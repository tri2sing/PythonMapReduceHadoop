From users-return-233247-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sun Apr  1 06:38:25 2012
Return-Path: <users-return-233247-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9D06D9A62
	for <apmail-tomcat-users-archive@www.apache.org>; Sun,  1 Apr 2012 06:38:25 +0000 (UTC)
Received: (qmail 70817 invoked by uid 500); 1 Apr 2012 06:38:21 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 70108 invoked by uid 500); 1 Apr 2012 06:38:19 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 70089 invoked by uid 99); 1 Apr 2012 06:38:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Apr 2012 06:38:19 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [218.219.159.119] (HELO smtp.silk.co.jp) (218.219.159.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Apr 2012 06:38:12 +0000
User-Agent: Microsoft-MacOutlook/14.14.0.111121
Date: Sun, 01 Apr 2012 15:37:42 +0900
Subject: Secure attribute of Catalina SSL Connector(APR)
From: Teppei Yamada <teppei@silk.co.jp>
To: <users@tomcat.apache.org>
Message-ID: <CB9E26C6.1E010%teppei@silk.co.jp>
Thread-Topic: Secure attribute of Catalina SSL Connector(APR)
Mime-version: 1.0
Content-type: text/plain;
	charset="US-ASCII"
Content-transfer-encoding: 7bit

Hi,


I don't want every session cookies to be secure cookies, so I
intentionally set secure attribute "false" in server,xml's SSL connector
tag.
(Actually tomcat native is compiled with OpenSSL and LD_LIBRARY_PATH is
set, so the SSL connector is using APR in my case.)
But even though doing above, catalina.connector.Request.isSecure() is
always "true" when Tomcat creating session cookie internally.
How can I turn every session cookie's secure attribute off ?
(Testing with Tomcat7.0.26 and Sun JDK1.6.31 in x86_64 Linux Box)

Thanks,
Teppei



---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233248-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sun Apr  1 09:15:55 2012
Return-Path: <users-return-233248-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BFC0A9B7C
	for <apmail-tomcat-users-archive@www.apache.org>; Sun,  1 Apr 2012 09:15:55 +0000 (UTC)
Received: (qmail 50748 invoked by uid 500); 1 Apr 2012 09:15:52 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 50516 invoked by uid 500); 1 Apr 2012 09:15:49 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 50480 invoked by uid 99); 1 Apr 2012 09:15:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Apr 2012 09:15:48 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [218.219.159.119] (HELO smtp.silk.co.jp) (218.219.159.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Apr 2012 09:15:42 +0000
User-Agent: Microsoft-MacOutlook/14.14.0.111121
Date: Sun, 01 Apr 2012 18:15:07 +0900
Subject: Implementing mod_headers for response in Tomcat7
From: Teppei Yamada <teppei@silk.co.jp>
To: Tomcat Users List <users@tomcat.apache.org>
Message-ID: <CB9E4BAB.1E07E%teppei@silk.co.jp>
Thread-Topic: Implementing mod_headers for response in Tomcat7
Mime-version: 1.0
Content-type: text/plain;
	charset="US-ASCII"
Content-transfer-encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,


I wanted to write something similar to apache httpd's mod_headers so I
read through Tomcat7.0.26 source code.
Then I realized that that could not be achieved without modifying coyote's
Abstract(Http11|Ajp)Processor.prepareResponse().
That can never be done by Valve because some HTTP headers are added just
in (or SessionCookie is right before) prepareResponse function and it
immediately writes headers to OutputBuffer and set committed.

So I propose inserting some code in prepareResponse.
Is is acceptable?

---
Teppei



---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233249-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sun Apr  1 18:36:05 2012
Return-Path: <users-return-233249-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D93EA9BFE
	for <apmail-tomcat-users-archive@www.apache.org>; Sun,  1 Apr 2012 18:36:05 +0000 (UTC)
Received: (qmail 36675 invoked by uid 500); 1 Apr 2012 18:36:02 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 36586 invoked by uid 500); 1 Apr 2012 18:36:02 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 36575 invoked by uid 99); 1 Apr 2012 18:36:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Apr 2012 18:36:02 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pid@pidster.com designates 209.85.212.177 as permitted sender)
Received: from [209.85.212.177] (HELO mail-wi0-f177.google.com) (209.85.212.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Apr 2012 18:35:55 +0000
Received: by wibhj13 with SMTP id hj13so1628566wib.0
        for <users@tomcat.apache.org>; Sun, 01 Apr 2012 11:35:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type;
        bh=S/9uvYUIdboUa6i+JAMbYBEsSF8srIsHduud2bAftgw=;
        b=rZereoeRIgse71lQHWG/M+9zqr8tnghwaO9wG8iSOVgBHx87kdgBkYrUjNqnqd4ZhJ
         hWcWuBE1JG81EKFOpLXxTpTfgVZq4zoP0pElz8Dj+3BUspoehePUy97Re5mbWHyako7n
         oiUcQMG/vEYvEul63Kee2oLnGBWpbNRBxpaAg=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type:x-gm-message-state;
        bh=S/9uvYUIdboUa6i+JAMbYBEsSF8srIsHduud2bAftgw=;
        b=S7/X0gwAUCHmVr0/y3eqHs+MPJFv0ePB5LMWO0eiTUWYFhHRjIb19j9HfwvAJozeOA
         HUDxjyqFiLX2h+HIoCD38r3imHZGR201ltnj07wbAtDlachmQcZRRsEirl/o/B1vz2EB
         0zQuN1ODAUyx0YycuHOM2cbAAPCX2ltnRGptqoGXIO5rw3ClSF/5n5a7YAqjNncDWFD7
         7oHnYmtMdaWwR2PEbF3u3IGw/wXSaETmmq6HqIk8CavDiqdp3+J8SMVRit12JGTi9LJi
         gxZgy1WY/jzees2OsbY/aIpCl11JD42Z7KD30GFXTQ+IB07jpH8O20nWIWcv8afYydx5
         9U8g==
Received: by 10.180.92.71 with SMTP id ck7mr17102417wib.21.1333305332815;
        Sun, 01 Apr 2012 11:35:32 -0700 (PDT)
Received: from Asura.local (cpc10-lewi14-2-0-cust355.2-4.cable.virginmedia.com. [82.4.249.100])
        by mx.google.com with ESMTPS id fz9sm27403276wib.3.2012.04.01.11.35.30
        (version=SSLv3 cipher=OTHER);
        Sun, 01 Apr 2012 11:35:31 -0700 (PDT)
Message-ID: <4F789FEC.5010002@pidster.com>
Date: Sun, 01 Apr 2012 19:35:24 +0100
From: Pid <pid@pidster.com>
Organization: Pidster Inc
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Secure attribute of Catalina SSL Connector(APR)
References: <CB9E26C6.1E010%teppei@silk.co.jp>
In-Reply-To: <CB9E26C6.1E010%teppei@silk.co.jp>
X-Enigmail-Version: 1.4
OpenPGP: id=62590808
Content-Type: multipart/signed; micalg=pgp-sha512;
 protocol="application/pgp-signature";
 boundary="------------enig9257B86A216C7D7DF5C90418"
X-Gm-Message-State: ALoCoQlXv6GusmIurUAp2DbFkqdxLHAw4cHGi9g4N4U5FUu5XZZDZ+GIMEpopHNnnPlQ95QtO8kK
X-Virus-Checked: Checked by ClamAV on apache.org

--------------enig9257B86A216C7D7DF5C90418
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

On 01/04/2012 07:37, Teppei Yamada wrote:
> Hi,
>=20
>=20
> I don't want every session cookies to be secure cookies, so I
> intentionally set secure attribute "false" in server,xml's SSL connecto=
r
> tag.

May I ask why?


> (Actually tomcat native is compiled with OpenSSL and LD_LIBRARY_PATH is=

> set, so the SSL connector is using APR in my case.)
> But even though doing above, catalina.connector.Request.isSecure() is
> always "true" when Tomcat creating session cookie internally.

That attribute refers to the request, not the cookie, so if you're using
an SSL enabled connector it /should/ return true.


> How can I turn every session cookie's secure attribute off ?
> (Testing with Tomcat7.0.26 and Sun JDK1.6.31 in x86_64 Linux Box)

Again, why would you want to do this when the cookie is generated from a
secure connection?


p


> Thanks,
> Teppei
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>=20


--=20

[key:62590808]


--------------enig9257B86A216C7D7DF5C90418
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.18 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iQIcBAEBCgAGBQJPeJ/xAAoJEGoM2OGpOvr9tjQQAI+FnqusXDBo8njn2n84eet8
k6hc0QB0nlntodj4KWRmaYuUvz4YrhmEyIrNFMpuH+7aFCxhQyh5FfTOQRoYSRzS
mPKRajmJeJeGsLf5Nc8iMiNFnsKIQNsOMNgsPOpSTgRwqV1jfUfctUvDZBccge5/
+fe+3QCheRIUWk+edFOs5ZBAziP1hQUpc5VNg7NMBZoGftAwsX+egtRkwtZsEvRw
4RSIGrnOjtyan/aX4jFwcqxLpYF2TemUW4aWI5I4A5R68Qbf4mEhFlZ38GEyTG4m
2nic14X8jGOvu+4o6VAiGNhoxl42Y7QgGDssvdbUPw+T6nmUzMjIQlUZ4PtCi+cb
2iEM1ZIEEcK5/IAs7GG9eTj1BLLQ/JZbGvDYXyENe5If8T4FllBZQPmkYXfkUEjY
Mmmdt3MFvj+cJKKmIFTQRA2dOURXQrij+hr9RRDKiBXj2oTyCptCg6XsM1YRHpaP
LiM2ZyKXaqetRnos3MpmqAeCx/qQGolAquWZp4ClfK8xKrA54s6un2EGAhBNvN+g
XKDHt8FF/LwVWCxXpBOQSHE9K7DCqi6A/yt3Xq1SOv+PZuLoVLEPDWbAx32JXcmd
KvFDrY3C7MaVKcA11e1O+Opn2Nt/j4y4Zqy0k2rtoXx3rjqWDjj5gILmbt8M4xMu
SxhQJyMfSVUFzGbFLWCJ
=OCZV
-----END PGP SIGNATURE-----

--------------enig9257B86A216C7D7DF5C90418--

From users-return-233250-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sun Apr  1 18:39:26 2012
Return-Path: <users-return-233250-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CF0139C8F
	for <apmail-tomcat-users-archive@www.apache.org>; Sun,  1 Apr 2012 18:39:26 +0000 (UTC)
Received: (qmail 45318 invoked by uid 500); 1 Apr 2012 18:39:23 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 45154 invoked by uid 500); 1 Apr 2012 18:39:23 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 45145 invoked by uid 99); 1 Apr 2012 18:39:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Apr 2012 18:39:23 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pid@pidster.com designates 74.125.82.173 as permitted sender)
Received: from [74.125.82.173] (HELO mail-we0-f173.google.com) (74.125.82.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 Apr 2012 18:39:17 +0000
Received: by werp12 with SMTP id p12so1813988wer.18
        for <users@tomcat.apache.org>; Sun, 01 Apr 2012 11:38:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type;
        bh=hWeot5mze1hh2P/WfY4ZJ/Oivo2TCaiQ2gg7FhffVU4=;
        b=fvZlwUSVaguFt9TVIRPgOB5w/uS2Jy7C5epkUa1b5e0p5icCSvs+9KMbfLGWGk1wQc
         Wk89ea56oG43vULSgeD6zsFX/sIn4cvzFB9iacpoVXRvUgYvgukcfjJY3Ep7WIS63tkt
         PYS1UsSOqIXSbJ/ertUiDwuYTdwUXCWAhOK2o=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type:x-gm-message-state;
        bh=hWeot5mze1hh2P/WfY4ZJ/Oivo2TCaiQ2gg7FhffVU4=;
        b=bTfyK7TeQKdRTqlw0bq2hSntgs1USPKi+AUVUseb4T8GFd7BACeKVSF/rHfiEozvQK
         J3JMHfJaMfPhpXvt7KBM0g1LcOk3J+xi/BSj3xnDUgIXtseF7BxCnKL/jBwj6AlxWs9m
         Xb7yF+Z8aT8OfRbsgkCfvMp8zLPszFREV8xkHEyFJQIUVBIBKusjjPBEsftKZGhwWcuC
         /vleJxTFphsl9rQPKnqSFBmsYl0A3DUxHTB+RO8eJ1FWnhKsqqTllrODmxEofQdWNcRT
         DT09WKxMWKvKFAv2svt41An9GVyeeoJxb2Oboj8dN3K/04FWNC4PYhYUuhvKXQTWRlgk
         jccw==
Received: by 10.180.95.129 with SMTP id dk1mr20150217wib.3.1333305535695;
        Sun, 01 Apr 2012 11:38:55 -0700 (PDT)
Received: from Asura.local (cpc10-lewi14-2-0-cust355.2-4.cable.virginmedia.com. [82.4.249.100])
        by mx.google.com with ESMTPS id w10sm44130747wiy.3.2012.04.01.11.38.53
        (version=SSLv3 cipher=OTHER);
        Sun, 01 Apr 2012 11:38:54 -0700 (PDT)
Message-ID: <4F78A0BC.3040103@pidster.com>
Date: Sun, 01 Apr 2012 19:38:52 +0100
From: Pid <pid@pidster.com>
Organization: Pidster Inc
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Implementing mod_headers for response in Tomcat7
References: <CB9E4BAB.1E07E%teppei@silk.co.jp>
In-Reply-To: <CB9E4BAB.1E07E%teppei@silk.co.jp>
X-Enigmail-Version: 1.4
OpenPGP: id=62590808
Content-Type: multipart/signed; micalg=pgp-sha512;
 protocol="application/pgp-signature";
 boundary="------------enigFED49AB6321267F1D58DBCD1"
X-Gm-Message-State: ALoCoQm3AqEIysTVNNt2eMyLVT2Vea23/txKDw+c0eRlFdQhk0NWbPn0LmIh/P1vIU2k6k+wHRH8
X-Virus-Checked: Checked by ClamAV on apache.org

--------------enigFED49AB6321267F1D58DBCD1
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

On 01/04/2012 10:15, Teppei Yamada wrote:
> Hi,
>=20
>=20
> I wanted to write something similar to apache httpd's mod_headers so I
> read through Tomcat7.0.26 source code.
> Then I realized that that could not be achieved without modifying coyot=
e's
> Abstract(Http11|Ajp)Processor.prepareResponse().
> That can never be done by Valve because some HTTP headers are added jus=
t
> in (or SessionCookie is right before) prepareResponse function and it
> immediately writes headers to OutputBuffer and set committed.

A Valve would be the way to address this requirement.

> So I propose inserting some code in prepareResponse.
> Is is acceptable?

You can customise Tomcat as you see fit, at your own risk.

Given your other thread regarding secure session cookies, I assume that
your requirement above is derived from a wish to modify the cookie header=
?


p


> ---
> Teppei
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>=20


--=20

[key:62590808]


--------------enigFED49AB6321267F1D58DBCD1
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.18 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iQIcBAEBCgAGBQJPeKC9AAoJEGoM2OGpOvr9BIQQALJG1nclegc+KdgOjMHleOzn
EgmeJB1/2uJ+Nwq8Dl/P3cWBA6R0kVmy6hNgv95b9dbNr8p21KwPq27bWXPLDnkD
n/J3PlWh/yVyzFmT2KB6NogMBQNcj7Vr+g+RMH8vijk9SVop5+Quu/YpmbLt+eP0
p6iTosG0UTRjWoFQmUlvo6YzhllANIyaCnkPR2sziLZvQj68Nz6DfMDZQkFumneD
vXBYKitW3YwvysePZ+JKqQVDDv/DdPJ2pKF9u9RUwllJbCeazfba3jJbNzvRZRKV
wMFtcjgrTpcfjFcxlu14y66ZQbsx7+VfhDqXUHWIxlcNKSgmpjtYkDW7vZ6lSQlr
YakQoPI2N2W0N3utDymlIeeDvN84RZpCmdIwm29OO/3LxM81llEpRsZkkQY6sUV9
cmb86uptWWo2Je+AnM0k8qFgNAd12xT3dXVo7vHt1i0Fas7TdiXYDirzjQQJSKQr
YvkdnUPAik4oAWx/TGZxKQ0M5ahF0N9VOremiziW5ZvCZWhFX+8LkUJ2yMT2PIG4
AxWQf9xZgXEUWRTJ1DwKf7sprKJWwC8mTpR2oeTRi77DOARqqeJcdwioyFoYYnuq
OVK6jvNKzNI20l4ATjuU9DC3sLOYqJXSqC9XZGWXCHpNeOg1xW/yRuqz6n96MMxv
LsDhZgdZCZNXtcKFedFS
=Tv/R
-----END PGP SIGNATURE-----

--------------enigFED49AB6321267F1D58DBCD1--

From users-return-233251-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  2 04:38:09 2012
Return-Path: <users-return-233251-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B3AE89F8C
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  2 Apr 2012 04:38:09 +0000 (UTC)
Received: (qmail 17081 invoked by uid 500); 2 Apr 2012 04:38:06 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 17007 invoked by uid 500); 2 Apr 2012 04:38:04 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 16966 invoked by uid 99); 2 Apr 2012 04:38:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 04:38:03 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of matt.m.munz@gmail.com designates 209.85.160.45 as permitted sender)
Received: from [209.85.160.45] (HELO mail-pb0-f45.google.com) (209.85.160.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 04:37:54 +0000
Received: by pbcuo5 with SMTP id uo5so4251700pbc.18
        for <users@tomcat.apache.org>; Sun, 01 Apr 2012 21:37:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=from:content-type:subject:date:references:to:message-id
         :mime-version:x-mailer;
        bh=2KQgummqT0khO5yHXA8q0HinXpZ4SOviRzgj+3Ss4a4=;
        b=ml9CCKUYCPXf10GINC+abF+4yYJcmcO338uwNdl7GRuAy0YdfTFCeuYrF10gq277o3
         NKb6H7RX52awD5TK1Qq0ShPO8pqXgHeSGnR8MUBFYRB/HClwqUbrYE05+rAosR0EaBWG
         qjmgYC+5/COlWT8utDIctd1Ch20WV30HxcQZj6A2AU2Js0x07dq6zOtwvTg/WjimccZc
         ERZg/kL1Pi+jcd0g9eUM70s+J8A7YzmI87Tirb9ncbyU/Nw56yrIY7nJf8YDNDkuXuJs
         3IZ053lzSkq1eiJCXuSQKCxhlx9HQSa5D98wxhfuQ7gCGUDZqXHbtzm1ky5r0OXorRFu
         CtTg==
Received: by 10.68.234.134 with SMTP id ue6mr18106236pbc.14.1333341453060;
        Sun, 01 Apr 2012 21:37:33 -0700 (PDT)
Received: from [10.0.1.15] (adsl-99-102-133-251.dsl.pltn13.sbcglobal.net. [99.102.133.251])
        by mx.google.com with ESMTPS id m1sm13256263pbl.39.2012.04.01.21.37.31
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sun, 01 Apr 2012 21:37:32 -0700 (PDT)
From: Matt Munz <matt.m.munz@gmail.com>
Content-Type: multipart/alternative; boundary=Apple-Mail-12-699448762
Subject: Tomcat 7 Maven plugin: deploy fails with tomcatManager status code:401, ReasonPhrase:Unauthorized
Date: Sun, 1 Apr 2012 21:37:30 -0700
References: <51200CB4-D325-4019-A12A-5A0FDCC8987E@me.com>
To: users@tomcat.apache.org
Message-Id: <0B75C850-2329-47A0-AEAF-A6B7CC14D35F@gmail.com>
Mime-Version: 1.0 (Apple Message framework v1084)
X-Mailer: Apple Mail (2.1084)

--Apple-Mail-12-699448762
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=us-ascii

Hi all,

  I'm trying to get the Tomcat 7 Maven plugin to work and I'm getting an =
authorization problem.[1]  Here's the command that I'm running. [2]  =
Here's the relevant snippet from tomcat-users.xml. [3]  =46rom the =
browser I am able to log on to the Manager with this account without =
problems.=20

  Any help you could provide would be greatly appreciated.

[1] tomcatManager status code:401, ReasonPhrase:Unauthorized
[2] mvn tomcat7:deploy -Dusername=3DAdministrator -Dpassword=3Da
[3]
<role rolename=3D"manager-gui"/>
<role rolename=3D"manager-script"/>
<role rolename=3D"manager-jmx"/>
<user username=3D"Administrator" password=3D"a" =
roles=3D"manager-gui,manager-script,manager-jmx"/>

  Matt Munz
  matt.m.munz@gmail.com





--Apple-Mail-12-699448762--

From users-return-233252-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  2 10:00:04 2012
Return-Path: <users-return-233252-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6CF099174
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  2 Apr 2012 10:00:04 +0000 (UTC)
Received: (qmail 80277 invoked by uid 500); 2 Apr 2012 10:00:01 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 80055 invoked by uid 500); 2 Apr 2012 10:00:00 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 80044 invoked by uid 99); 2 Apr 2012 09:59:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 09:59:59 +0000
X-ASF-Spam-Status: No, hits=0.9 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [216.139.250.139] (HELO joe.nabble.com) (216.139.250.139)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 09:59:54 +0000
Received: from alf.nabble.com ([192.168.236.21])
	by joe.nabble.com with esmtp (Exim 4.72)
	(envelope-from <lmhelp1@orange.fr>)
	id 1SEe2v-0006ah-EJ
	for users@tomcat.apache.org; Mon, 02 Apr 2012 02:59:33 -0700
Date: Mon, 2 Apr 2012 02:59:33 -0700 (PDT)
From: =?UTF-8?Q?L=C3=A9a_Massiot?= <lmhelp1@orange.fr>
To: users@tomcat.apache.org
Message-ID: <1333360773430-4678428.post@n6.nabble.com>
Subject: Tomcat6 - Context - aliases
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I've been struggling lately with the "aliases" attribute of the "Context"
element of the "context.xml" file.
I tested a Webapp with "Tomcat7" and it appears to work properly.
As a "Debian" user, "Tomcat7" is not yet packaged in the current stable
release "Squeeze" so I installed "Tomcat6" instead.
Result: the Webapp no longer works properly (as far as the "aliases"
attribute is concerned).
When I have a look at the "Tomcat6" documentation
(http://tomcat.apache.org/tomcat-6.0-doc/config/context.html), it looks like
the "Context" element "aliases" attribute is not available.

1) Can you confirm it is not?
2) How can I workaround this problem?

Thanks for helping. 

--
View this message in context: http://tomcat.10.n6.nabble.com/Tomcat6-Context-aliases-tp4678428p4678428.html
Sent from the Tomcat - User mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233253-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  2 10:07:01 2012
Return-Path: <users-return-233253-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F3115934A
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  2 Apr 2012 10:07:00 +0000 (UTC)
Received: (qmail 2226 invoked by uid 500); 2 Apr 2012 10:06:57 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 2169 invoked by uid 500); 2 Apr 2012 10:06:57 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 2150 invoked by uid 99); 2 Apr 2012 10:06:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 10:06:57 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [218.219.159.119] (HELO smtp.silk.co.jp) (218.219.159.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 10:06:50 +0000
User-Agent: Microsoft-MacOutlook/14.14.0.111121
Date: Mon, 02 Apr 2012 19:06:24 +0900
Subject: Re: Tomcat6 - Context - aliases
From: Teppei Yamada <teppei@silk.co.jp>
To: Tomcat Users List <users@tomcat.apache.org>
Message-ID: <CB9FA815.1E0D7%teppei@silk.co.jp>
Thread-Topic: Tomcat6 - Context - aliases
In-Reply-To: <1333360773430-4678428.post@n6.nabble.com>
Mime-version: 1.0
Content-type: text/plain;
	charset="ISO-8859-1"
Content-transfer-encoding: quoted-printable

Hi,


Can I ask you some questions?

1. What version of Tomcat7 did you test?
2. Where do you place context.xml in Tomcat6?

I don't know you are aware that context.xml placed in
yourwebapp/META-INF/context.xml is automatically copied to
TOMCAT_HOME/conf/Catalina/(hostname(usually localhost)/yourapp.xml.
Once copied, Tomcat6 refers the one in TOMCAT_HOME/conf.

Tomcat7.0.26 no longer copies context.xml.

Regards,
Teppei

On 12/04/02 18:59, "L=E9a Massiot" <lmhelp1@orange.fr> wrote:

>Hello,
>
>I've been struggling lately with the "aliases" attribute of the "Context"
>element of the "context.xml" file.
>I tested a Webapp with "Tomcat7" and it appears to work properly.
>As a "Debian" user, "Tomcat7" is not yet packaged in the current stable
>release "Squeeze" so I installed "Tomcat6" instead.
>Result: the Webapp no longer works properly (as far as the "aliases"
>attribute is concerned).
>When I have a look at the "Tomcat6" documentation
>(http://tomcat.apache.org/tomcat-6.0-doc/config/context.html), it looks
>like
>the "Context" element "aliases" attribute is not available.
>
>1) Can you confirm it is not?
>2) How can I workaround this problem?
>
>Thanks for helping.
>
>--
>View this message in context:
>http://tomcat.10.n6.nabble.com/Tomcat6-Context-aliases-tp4678428p4678428.h
>tml
>Sent from the Tomcat - User mailing list archive at Nabble.com.
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>For additional commands, e-mail: users-help@tomcat.apache.org
>



---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233254-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  2 10:18:25 2012
Return-Path: <users-return-233254-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 03D96988C
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  2 Apr 2012 10:18:24 +0000 (UTC)
Received: (qmail 44139 invoked by uid 500); 2 Apr 2012 10:18:21 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 43994 invoked by uid 500); 2 Apr 2012 10:18:21 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 43985 invoked by uid 99); 2 Apr 2012 10:18:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 10:18:21 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of knst.kolinko@gmail.com designates 209.85.161.173 as permitted sender)
Received: from [209.85.161.173] (HELO mail-gx0-f173.google.com) (209.85.161.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 10:18:15 +0000
Received: by ggnp2 with SMTP id p2so1292127ggn.18
        for <users@tomcat.apache.org>; Mon, 02 Apr 2012 03:17:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=CIsIBijHQ4HXrFlefy86uK8tAccX+hFVhYB8h3xTW1s=;
        b=dFm8GgOr67mUk86+V/XsjWJtM2hW+rNxZ7YGiw4SqsmP/K2JbnIze3lAnzEFEZdDms
         25EtdpNbovxH/KZFymPFca5+C75IKob7HxOy1uz0r/U/91bN5UITHVDSuY2UZwdjJRCJ
         /GpW1Qf1jQq3gGawfZ41pDmJxZbD/qgEPIC+wVWkoLCuC0+pNlWbpzixgo/2lA7H4Dd0
         5D2cFH8M62tByMnkmFtm1CF46eJLEu8TYI0dXqLVh5/BKSI/S4BhehBVDPAUI4f9YN7G
         GSjuyfINC35PAx2sMRY7kUogjMcRVDLWjmeHVkrqlhlzsic5Zqy88IjF9Uf/eGlUcD9M
         MrEQ==
MIME-Version: 1.0
Received: by 10.236.175.41 with SMTP id y29mr6368808yhl.60.1333361874328; Mon,
 02 Apr 2012 03:17:54 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Mon, 2 Apr 2012 03:17:54 -0700 (PDT)
In-Reply-To: <1333360773430-4678428.post@n6.nabble.com>
References: <1333360773430-4678428.post@n6.nabble.com>
Date: Mon, 2 Apr 2012 14:17:54 +0400
Message-ID: <CABzHfVn5uKEF9RKGUkqGGq56DLNFhRFm6Y_PUSUq--x3=yMpvw@mail.gmail.com>
Subject: Re: Tomcat6 - Context - aliases
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

2012/4/2 L=E9a Massiot <lmhelp1@orange.fr>:
>
> I've been struggling lately with the "aliases" attribute of the "Context"
> element of the "context.xml" file.
> I tested a Webapp with "Tomcat7" and it appears to work properly.
> As a "Debian" user, "Tomcat7" is not yet packaged in the current stable
> release "Squeeze" so I installed "Tomcat6" instead.
> Result: the Webapp no longer works properly (as far as the "aliases"
> attribute is concerned).
> When I have a look at the "Tomcat6" documentation
> (http://tomcat.apache.org/tomcat-6.0-doc/config/context.html), it looks l=
ike
> the "Context" element "aliases" attribute is not available.
>
> 1) Can you confirm it is not?

aliases are a feature added to Tomcat 7. They are not available in
earlier versions.

The feature is too intrusive to ever consider its backporting.

> 2) How can I workaround this problem?

Install Tomcat 7. Read RUNNING.txt for a start.

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233255-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  2 10:45:59 2012
Return-Path: <users-return-233255-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0B0209DDF
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  2 Apr 2012 10:45:59 +0000 (UTC)
Received: (qmail 16760 invoked by uid 500); 2 Apr 2012 10:45:55 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 16638 invoked by uid 500); 2 Apr 2012 10:45:55 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 16629 invoked by uid 99); 2 Apr 2012 10:45:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 10:45:55 +0000
X-ASF-Spam-Status: No, hits=0.9 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [216.139.250.139] (HELO joe.nabble.com) (216.139.250.139)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 10:45:49 +0000
Received: from alf.nabble.com ([192.168.236.21])
	by joe.nabble.com with esmtp (Exim 4.72)
	(envelope-from <lmhelp1@orange.fr>)
	id 1SEelL-0000CU-Nr
	for users@tomcat.apache.org; Mon, 02 Apr 2012 03:45:27 -0700
Date: Mon, 2 Apr 2012 03:45:27 -0700 (PDT)
From: =?UTF-8?Q?L=C3=A9a_Massiot?= <lmhelp1@orange.fr>
To: users@tomcat.apache.org
Message-ID: <1333363527730-4678513.post@n6.nabble.com>
In-Reply-To: <CABzHfVn5uKEF9RKGUkqGGq56DLNFhRFm6Y_PUSUq--x3=yMpvw@mail.gmail.com>
References: <1333360773430-4678428.post@n6.nabble.com> <CABzHfVn5uKEF9RKGUkqGGq56DLNFhRFm6Y_PUSUq--x3=yMpvw@mail.gmail.com>
Subject: Re: Tomcat6 - Context - aliases
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Hello,

Thank you for your answers.


Teppei Yamada wrote
> 1. What version of Tomcat7 did you test? 
On a Windows XP machine: Tomcat 7.0.20
On a Debian Squeeze machine: Tomcat 7.0.22


Teppei Yamada wrote
> 2. Where do you place context.xml in Tomcat6?
> I don't know you are aware that context.xml placed in
> yourwebapp/META-INF/context.xml is automatically copied to
> TOMCAT_HOME/conf/Catalina/(hostname(usually localhost)/yourapp.xml.
> Once copied, Tomcat6 refers the one in TOMCAT_HOME/conf. 
> Tomcat7.0.26 no longer copies context.xml. 
I placed "context.xml" in "yourwebapp/META-INF/".
I am aware of what you mentionned above.
I remember reading that "Tomcat6" copies "context.xml" to
"TOMCAT_HOME/conf/Catalina/(hostname(usually localhost)/yourapp.xml" only
the first time the Webapp is deployed.


Konstantin Kolinko wrote
> aliases are a feature added to Tomcat 7. They are not available in
> earlier versions.
> The feature is too intrusive to ever consider its backporting. 
> 

I see.


Konstantin Kolinko wrote
> Install Tomcat 7. Read RUNNING.txt for a start.
I prefer not to. As I wrote, "Tomcat7" is not packaged yet in "Debian"
stable "Squeeze".
For security reasons, I want to use only stable, packaged and up-to-date OS
and software versions.
I there any other workaround... I mean... I guess even before "Tomcat7",
people needed to declare such "aliases".

Thank you for your help and best regards.

--
View this message in context: http://tomcat.10.n6.nabble.com/Tomcat6-Context-aliases-tp4678430p4678513.html
Sent from the Tomcat - User mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233256-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  2 11:17:17 2012
Return-Path: <users-return-233256-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9570B99FD
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  2 Apr 2012 11:17:17 +0000 (UTC)
Received: (qmail 96798 invoked by uid 500); 2 Apr 2012 11:17:12 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 96712 invoked by uid 500); 2 Apr 2012 11:17:12 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 96644 invoked by uid 99); 2 Apr 2012 11:17:12 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 11:17:12 +0000
Received: from localhost (HELO mail-gx0-f173.google.com) (127.0.0.1)
  (smtp-auth username olamy, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 11:17:12 +0000
Received: by ggnp2 with SMTP id p2so1309291ggn.18
        for <users@tomcat.apache.org>; Mon, 02 Apr 2012 04:17:11 -0700 (PDT)
Received: by 10.236.79.195 with SMTP id i43mr6486470yhe.53.1333365431187; Mon,
 02 Apr 2012 04:17:11 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.100.34.8 with HTTP; Mon, 2 Apr 2012 04:16:51 -0700 (PDT)
In-Reply-To: <0B75C850-2329-47A0-AEAF-A6B7CC14D35F@gmail.com>
References: <51200CB4-D325-4019-A12A-5A0FDCC8987E@me.com> <0B75C850-2329-47A0-AEAF-A6B7CC14D35F@gmail.com>
From: Olivier Lamy <olamy@apache.org>
Date: Mon, 2 Apr 2012 13:16:51 +0200
Message-ID: <CAPoyBqRbT3w_C=3DEomct-hRkKsVpUTBaEd9pjTFn3r=McLMfg@mail.gmail.com>
Subject: Re: Tomcat 7 Maven plugin: deploy fails with tomcatManager status
 code:401, ReasonPhrase:Unauthorized
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hello,
I have fixed few things related to deployment in trunk.
Could you test with current 2.0-SNAPSHOT ?

Thanks
--=20
Olivier Lamy
Talend: http://coders.talend.com
http://twitter.com/olamy | http://linkedin.com/in/olamy

2012/4/2 Matt Munz <matt.m.munz@gmail.com>:
> Hi all,
>
> =A0I'm trying to get the Tomcat 7 Maven plugin to work and I'm getting an=
 authorization problem.[1] =A0Here's the command that I'm running. [2] =A0H=
ere's the relevant snippet from tomcat-users.xml. [3] =A0From the browser I=
 am able to log on to the Manager with this account without problems.
>
> =A0Any help you could provide would be greatly appreciated.
>
> [1] tomcatManager status code:401, ReasonPhrase:Unauthorized
> [2] mvn tomcat7:deploy -Dusername=3DAdministrator -Dpassword=3Da
> [3]
> <role rolename=3D"manager-gui"/>
> <role rolename=3D"manager-script"/>
> <role rolename=3D"manager-jmx"/>
> <user username=3D"Administrator" password=3D"a" roles=3D"manager-gui,mana=
ger-script,manager-jmx"/>
>
> =A0Matt Munz
> =A0matt.m.munz@gmail.com
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233257-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  2 11:38:02 2012
Return-Path: <users-return-233257-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 06EC29E06
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  2 Apr 2012 11:38:01 +0000 (UTC)
Received: (qmail 54977 invoked by uid 500); 2 Apr 2012 11:37:58 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 54897 invoked by uid 500); 2 Apr 2012 11:37:58 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 54887 invoked by uid 99); 2 Apr 2012 11:37:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 11:37:58 +0000
X-ASF-Spam-Status: No, hits=1.0 required=5.0
	tests=SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (athena.apache.org: transitioning domain of david.nothnagel@prudential.com does not designate 216.139.250.139 as permitted sender)
Received: from [216.139.250.139] (HELO joe.nabble.com) (216.139.250.139)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 11:37:53 +0000
Received: from alf.nabble.com ([192.168.236.21])
	by joe.nabble.com with esmtp (Exim 4.72)
	(envelope-from <david.nothnagel@prudential.com>)
	id 1SEfZk-0002NM-HK
	for users@tomcat.apache.org; Mon, 02 Apr 2012 04:37:32 -0700
Date: Mon, 2 Apr 2012 04:37:32 -0700 (PDT)
From: DaveNoth <david.nothnagel@prudential.com>
To: users@tomcat.apache.org
Message-ID: <1333366652527-4678609.post@n6.nabble.com>
In-Reply-To: <4F760DFA.20307@pidster.com>
References: <1333120922912-4671621.post@n6.nabble.com> <4F760DFA.20307@pidster.com>
Subject: Re: Running Tomcat as a Standalone desktop Application
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Yes,  On a company owned windows server we would control the server setup.
(What software is installed and how it is configured)   We are planning to
distribute to individually owned machines in which we can not control what
is installed. They may have software installed that interferes with a
TomCat/Web App setup.  We are hoping for someone who has had experiences
doing this that can provide "best practices" or Do's and Don'ts based upon
their experience.   I also see that embedded TomCat may also be an option. 
Would that be a better approach?   Any help would be greatly appreciated.

--
View this message in context: http://tomcat.10.n6.nabble.com/Running-Tomcat-as-a-Standalone-desktop-Application-tp4671621p4678609.html
Sent from the Tomcat - User mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233258-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  2 12:23:16 2012
Return-Path: <users-return-233258-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2ED4A9EC7
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  2 Apr 2012 12:23:16 +0000 (UTC)
Received: (qmail 93813 invoked by uid 500); 2 Apr 2012 12:23:12 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 93569 invoked by uid 500); 2 Apr 2012 12:23:12 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 93559 invoked by uid 99); 2 Apr 2012 12:23:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 12:23:12 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pid@pidster.com designates 209.85.215.173 as permitted sender)
Received: from [209.85.215.173] (HELO mail-ey0-f173.google.com) (209.85.215.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 12:23:05 +0000
Received: by eaaf11 with SMTP id f11so1250893eaa.18
        for <users@tomcat.apache.org>; Mon, 02 Apr 2012 05:22:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type;
        bh=GXtGchx+GYhQgRIvdOwpo+/kp4fNpLLp0wFVNvFO2us=;
        b=lBvtv5FvNM0p/QnbpDEhkCNE6m5Nuh+kwmAd2oBzgV+Q6T4ng9YuUaMwTjEf3frGqd
         e4wKGvJ5GdpZrJHklLVW/Dh0ETsCau5fxaq8iTKTNXAUORiIk461imT01+GbI1I+qS/1
         UlL8WTblvI6PNe8gH7JhU673M7N/3xM+smekM=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type:x-gm-message-state;
        bh=GXtGchx+GYhQgRIvdOwpo+/kp4fNpLLp0wFVNvFO2us=;
        b=JljmKPo42jyol0cyTI+2XH/BbnyryCZcnbZmL2Y2prLZwSTObYRsEkGKoD/wNOKGI2
         5tYntLcNOaq7E+9+kxi8bqxEg1a5OvNRDta+FNFOSg8ItMvgunfTCRPM0ihYGeNOsSoL
         BqSY/RFPuqubUCm/xsIL3ljpn1AYdPQBYDowNsr0jCP7+4IiiQW8b7DODzX2DNegDm3k
         uFn3b/byamYZs5Tgt2gDb5rtvLPECihF6mHnOqy61IzpbUMOj4rlkQZtwybeuah4SDIg
         DX3BE971jR9VdxeWn/TQWCGqW6UaxiWS5f1iraA8Gv9sF01HjRTnRKnrLZFfK/44CTPm
         nPeQ==
Received: by 10.14.203.67 with SMTP id e43mr1141387eeo.93.1333369364682;
        Mon, 02 Apr 2012 05:22:44 -0700 (PDT)
Received: from Asura.local (cpc10-lewi14-2-0-cust355.2-4.cable.virginmedia.com. [82.4.249.100])
        by mx.google.com with ESMTPS id q45sm62369100eem.7.2012.04.02.05.22.42
        (version=SSLv3 cipher=OTHER);
        Mon, 02 Apr 2012 05:22:43 -0700 (PDT)
Message-ID: <4F799A0B.6000100@pidster.com>
Date: Mon, 02 Apr 2012 13:22:35 +0100
From: Pid <pid@pidster.com>
Organization: Pidster Inc
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Running Tomcat as a Standalone desktop Application
References: <1333120922912-4671621.post@n6.nabble.com> <4F760DFA.20307@pidster.com> <1333366652527-4678609.post@n6.nabble.com>
In-Reply-To: <1333366652527-4678609.post@n6.nabble.com>
X-Enigmail-Version: 1.4
OpenPGP: id=62590808
Content-Type: multipart/signed; micalg=pgp-sha512;
 protocol="application/pgp-signature";
 boundary="------------enig4F426653F1385DB0BABD1A2F"
X-Gm-Message-State: ALoCoQkF51cC8gpBI0+tjmG1lAvN/1RixmD1N7IQE9lZVkMneVvYkwmebjcHiXlD7OFpBDqd6c/I

--------------enig4F426653F1385DB0BABD1A2F
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

On 02/04/2012 12:37, DaveNoth wrote:
> Yes,  On a company owned windows server we would control the server set=
up.
> (What software is installed and how it is configured)   We are planning=
 to
> distribute to individually owned machines in which we can not control w=
hat
> is installed. They may have software installed that interferes with a
> TomCat/Web App setup.  We are hoping for someone who has had experience=
s
> doing this that can provide "best practices" or Do's and Don'ts based u=
pon
> their experience.   I also see that embedded TomCat may also be an opti=
on.=20
> Would that be a better approach?   Any help would be greatly appreciate=
d.

Better approach than what?  You haven't really explained...

I'm not sure there'll be any best practices, beyond common sense ones.


p


P.S. It's Tomcat, not TomCat.


> --
> View this message in context: http://tomcat.10.n6.nabble.com/Running-To=
mcat-as-a-Standalone-desktop-Application-tp4671621p4678609.html
> Sent from the Tomcat - User mailing list archive at Nabble.com.
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>=20


--=20

[key:62590808]


--------------enig4F426653F1385DB0BABD1A2F
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.18 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iQIcBAEBCgAGBQJPeZoQAAoJEGoM2OGpOvr9bjoP/33gaO+UoLiWEpvYOGKOTd3t
tQaackm5Ytcye9rFWTCoFH19B2BxhytOe+XFnFoW+yEhmhuRiOZDENixg4ffBluW
KpAUoj0Sxt/1q5MbTTPYABNU8Lt7xGAQEoJwIALWJ55hdoITgHLOMeIfNhT2+RNf
fzgi99Fk8jFgNefrncqBhjdnOECQniYBHipRj5X/fJ087iNu+hT5GLZLicuZHUEE
kynk9bVJBqoAAgxAzR3OBOM1PlXdrpiNM3usmQhFcOrf0jnv2dJx2Vz7AsaJV0WQ
GNi7pk3RZtn96sqhnTkZ/cJEn3wWplbFEgyjwzGwSJusmcfZXZNpwyfLWfga/+9+
tRI5ae7jaXqUSEgatfUzc+Y1q7BvkIbbf/fjsk+7bmND2cGtzbxUMVLqgIrDQoRO
/vt/ezurXOgN8ngt6WxyR4PV+/hC1psU+LefY2NnJf0/TaUWAfB4MVzd/NajjGOj
DfjutlV1lDxBoF9sZIp5uHPJe5bhpkWu+c6TGhZXPbKvv8GEEm1LAqd3zgPLR7oA
FEG+QPy5KSmn2gc9hRwIUW32P9Tgg+cPI85CZldWZAjUrfBYvGMYZwDm5EeNmKJo
N5hkMny6X1BMN3yCGt7v+d764CaCxrCUieTbYh6bVZbWqtbZNIJb/HlX4tFS4ekd
xUaL9hXeaKqDpFiQt3cH
=D+mw
-----END PGP SIGNATURE-----

--------------enig4F426653F1385DB0BABD1A2F--

From users-return-233259-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  2 12:50:17 2012
Return-Path: <users-return-233259-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E8CEC973A
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  2 Apr 2012 12:50:16 +0000 (UTC)
Received: (qmail 85977 invoked by uid 500); 2 Apr 2012 12:50:13 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 85743 invoked by uid 500); 2 Apr 2012 12:50:13 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 85721 invoked by uid 99); 2 Apr 2012 12:50:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 12:50:13 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aw@ice-sa.com designates 212.85.38.228 as permitted sender)
Received: from [212.85.38.228] (HELO tor.combios.es) (212.85.38.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 12:50:04 +0000
Received: from [192.168.245.129] (p549E8FDA.dip0.t-ipconnect.de [84.158.143.218])
	by tor.combios.es (Postfix) with ESMTPA id 2611DDA076F
	for <users@tomcat.apache.org>; Mon,  2 Apr 2012 14:49:42 +0200 (CEST)
Message-ID: <4F79A062.8050100@ice-sa.com>
Date: Mon, 02 Apr 2012 14:49:38 +0200
From: =?ISO-8859-1?Q?Andr=E9_Warnier?= <aw@ice-sa.com>
Reply-To: Tomcat Users List <users@tomcat.apache.org>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Running Tomcat as a Standalone desktop Application
References: <1333120922912-4671621.post@n6.nabble.com> <4F760DFA.20307@pidster.com> <1333366652527-4678609.post@n6.nabble.com> <4F799A0B.6000100@pidster.com>
In-Reply-To: <4F799A0B.6000100@pidster.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Pid wrote:
> On 02/04/2012 12:37, DaveNoth wrote:
>> Yes,  On a company owned windows server we would control the server setup.
>> (What software is installed and how it is configured)   We are planning to
>> distribute to individually owned machines in which we can not control what
>> is installed. They may have software installed that interferes with a
>> TomCat/Web App setup.  We are hoping for someone who has had experiences
>> doing this that can provide "best practices" or Do's and Don'ts based upon
>> their experience.   I also see that embedded TomCat may also be an option. 
>> Would that be a better approach?   Any help would be greatly appreciated.
> 
> Better approach than what?  You haven't really explained...
> 
> I'm not sure there'll be any best practices, beyond common sense ones.
> 
Among those, I would suggest that you first read the FAQ entry about running Tomcat under 
Windows : http://wiki.apache.org/tomcat/FAQ/Windows
at least entries 9 and 10
This would give you an idea of what is actually running and how it all fits together.

As a first checklist, I would look at the following :
- Tomcat is a java application, so it runs under a Java JVM.  You will thus need to check 
if the host already has an installed JVM, and if yes, if it is compatible with your 
version of Tomcat.  If not, you will need to install a JVM.
- then you will need to set the appropriate paths so that the "service wrapper" (see above 
FAQs) uses that compatible JVM.
- when installed as a Service, it also needs a unique Service name. I'd suggest naming it 
differently from the standard Tomcat installation Service name, to avoid conflicts if 
there is already one installed.
- when running, Tomcat needs at least 2 "listen" ports, both of them configured in 
Tomcat's "server.xml" configuration file. One is the shutdown port, mentioned in the 
<Server> tag.  The other is the port for the HTTP connector, mentioned in the 
corresponding <Connector .. protocol="HTTP/1.1"> tag.
Tomcat will not start properly if it tries to open these listen ports, and some other 
software on the target machine is already using them. (For example, another webserver 
already using port 80).
- under Windows 7 and beyond, you'll also need to make sure that the installation does not 
run afoul of bothersome things like UAC and Windows Firewall etc..

All in all, a good bit of work, I would say.  You may be better off using the standard 
installation packages, and providing a good documentation.
Scanning the Tomcat online FAQ's may give you a good idea of how many failure modes are 
possible (some Windows-specific, some not), and what to do about them.

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233260-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  2 13:21:31 2012
Return-Path: <users-return-233260-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6BB859089
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  2 Apr 2012 13:21:31 +0000 (UTC)
Received: (qmail 94918 invoked by uid 500); 2 Apr 2012 13:21:28 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 94706 invoked by uid 500); 2 Apr 2012 13:21:27 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 94694 invoked by uid 99); 2 Apr 2012 13:21:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 13:21:27 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.91.2.12] (HELO smtp-outbound-1.vmware.com) (208.91.2.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 13:21:19 +0000
Received: from sc9-mailhost2.vmware.com (sc9-mailhost2.vmware.com [10.113.161.72])
	by smtp-outbound-1.vmware.com (Postfix) with ESMTP id 5DAE3288CE
	for <users@tomcat.apache.org>; Mon,  2 Apr 2012 06:20:58 -0700 (PDT)
Received: from zimbra-prod-mta-3.vmware.com (zimbra-prod-mta-3.vmware.com [10.113.160.227])
	by sc9-mailhost2.vmware.com (Postfix) with ESMTP id 5A602B02D1
	for <users@tomcat.apache.org>; Mon,  2 Apr 2012 06:20:58 -0700 (PDT)
Received: from localhost (localhost.localdomain [127.0.0.1])
	by zimbra-prod-mta-3.vmware.com (Postfix) with ESMTP id 55ABDEED76
	for <users@tomcat.apache.org>; Mon,  2 Apr 2012 06:20:58 -0700 (PDT)
X-Virus-Scanned: amavisd-new at zimbra-prod-mta-3.vmware.com
Received: from zimbra-prod-mta-3.vmware.com ([127.0.0.1])
	by localhost (zimbra-prod-mta-3.vmware.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Gfzq6OHlXorB for <users@tomcat.apache.org>;
	Mon,  2 Apr 2012 06:20:58 -0700 (PDT)
Received: from zimbra-prod-mbox-5.vmware.com (zimbra-prod-mbox-5.vmware.com [10.113.160.194])
	by zimbra-prod-mta-3.vmware.com (Postfix) with ESMTP id 4493BEED5C
	for <users@tomcat.apache.org>; Mon,  2 Apr 2012 06:20:58 -0700 (PDT)
Date: Mon, 2 Apr 2012 06:20:58 -0700 (PDT)
From: Daniel Mikusa <dmikusa@vmware.com>
To: Tomcat Users List <users@tomcat.apache.org>
Message-ID: <11462767.90.1333372854644.JavaMail.daniel@cleveland>
In-Reply-To: <1333363527730-4678513.post@n6.nabble.com>
Subject: Re: Tomcat6 - Context - aliases
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Originating-IP: [24.160.217.1]
X-Mailer: Zimbra 7.1.3_GA_3374 (Zimbra Desktop/7.1.4_11273_Linux)



----- Original Message -----
> Hello,
> 
> Thank you for your answers.
> 
> 
> Teppei Yamada wrote
> > 1. What version of Tomcat7 did you test?
> On a Windows XP machine: Tomcat 7.0.20
> On a Debian Squeeze machine: Tomcat 7.0.22
> 
> 
> Teppei Yamada wrote
> > 2. Where do you place context.xml in Tomcat6?
> > I don't know you are aware that context.xml placed in
> > yourwebapp/META-INF/context.xml is automatically copied to
> > TOMCAT_HOME/conf/Catalina/(hostname(usually localhost)/yourapp.xml.
> > Once copied, Tomcat6 refers the one in TOMCAT_HOME/conf.
> > Tomcat7.0.26 no longer copies context.xml.
> I placed "context.xml" in "yourwebapp/META-INF/".
> I am aware of what you mentionned above.
> I remember reading that "Tomcat6" copies "context.xml" to
> "TOMCAT_HOME/conf/Catalina/(hostname(usually localhost)/yourapp.xml"
> only
> the first time the Webapp is deployed.
> 
> 
> Konstantin Kolinko wrote
> > aliases are a feature added to Tomcat 7. They are not available in
> > earlier versions.
> > The feature is too intrusive to ever consider its backporting.
> > 
> 
> I see.
> 
> 
> Konstantin Kolinko wrote
> > Install Tomcat 7. Read RUNNING.txt for a start.

+1


> I prefer not to. As I wrote, "Tomcat7" is not packaged yet in
> "Debian"
> stable "Squeeze".

I'm not a fan of using Tomcat from a package repo.


> For security reasons, I want to use only stable, packaged and
> up-to-date OS
> and software versions.

I think your logic is backwards here.  In my experience, the package manager repos almost always lag behind (sometimes WAY behind) on Tomcat versions.  It might not seem to be a problem to hang a couple versions back, but you could miss a critical security patch this way.

I would suggest that you install the latest release from tomcat.apache.org, and keep an eye on the mailing lists for announcements regarding security advisories and version updates.

Dan


> I there any other workaround... I mean... I guess even before
> "Tomcat7",
> people needed to declare such "aliases".
> 
> Thank you for your help and best regards.
> 
> --
> View this message in context:
> http://tomcat.10.n6.nabble.com/Tomcat6-Context-aliases-tp4678430p4678513.html
> Sent from the Tomcat - User mailing list archive at Nabble.com.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233261-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  2 14:24:09 2012
Return-Path: <users-return-233261-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AD1989847
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  2 Apr 2012 14:24:09 +0000 (UTC)
Received: (qmail 80119 invoked by uid 500); 2 Apr 2012 14:24:06 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 79894 invoked by uid 500); 2 Apr 2012 14:24:06 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 79885 invoked by uid 99); 2 Apr 2012 14:24:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 14:24:06 +0000
X-ASF-Spam-Status: No, hits=0.9 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [216.139.250.139] (HELO joe.nabble.com) (216.139.250.139)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 14:24:00 +0000
Received: from alf.nabble.com ([192.168.236.21])
	by joe.nabble.com with esmtp (Exim 4.72)
	(envelope-from <lmhelp1@orange.fr>)
	id 1SEiAV-0001U5-L6
	for users@tomcat.apache.org; Mon, 02 Apr 2012 07:23:39 -0700
Date: Mon, 2 Apr 2012 07:23:39 -0700 (PDT)
From: =?UTF-8?Q?L=C3=A9a_Massiot?= <lmhelp1@orange.fr>
To: users@tomcat.apache.org
Message-ID: <1333376619645-4679060.post@n6.nabble.com>
In-Reply-To: <11462767.90.1333372854644.JavaMail.daniel@cleveland>
References: <1333360773430-4678428.post@n6.nabble.com> <CABzHfVn5uKEF9RKGUkqGGq56DLNFhRFm6Y_PUSUq--x3=yMpvw@mail.gmail.com> <1333363527730-4678513.post@n6.nabble.com> <11462767.90.1333372854644.JavaMail.daniel@cleveland>
Subject: Re: Tomcat6 - Context - aliases
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you for your advice.

And how did people do to declare aliases before the "aliases" attribute of
the "Context" element was introduced in "Tomcat7"?

--
View this message in context: http://tomcat.10.n6.nabble.com/Tomcat6-Context-aliases-tp4678430p4679060.html
Sent from the Tomcat - User mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233262-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  2 14:31:03 2012
Return-Path: <users-return-233262-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4004697A3
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  2 Apr 2012 14:31:03 +0000 (UTC)
Received: (qmail 10255 invoked by uid 500); 2 Apr 2012 14:30:59 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 10208 invoked by uid 500); 2 Apr 2012 14:30:59 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 10198 invoked by uid 99); 2 Apr 2012 14:30:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 14:30:59 +0000
X-ASF-Spam-Status: No, hits=1.0 required=5.0
	tests=SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (nike.apache.org: transitioning domain of david.nothnagel@prudential.com does not designate 216.139.250.139 as permitted sender)
Received: from [216.139.250.139] (HELO joe.nabble.com) (216.139.250.139)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 14:30:53 +0000
Received: from alf.nabble.com ([192.168.236.21])
	by joe.nabble.com with esmtp (Exim 4.72)
	(envelope-from <david.nothnagel@prudential.com>)
	id 1SEiHA-0001kj-3R
	for users@tomcat.apache.org; Mon, 02 Apr 2012 07:30:32 -0700
Date: Mon, 2 Apr 2012 07:30:32 -0700 (PDT)
From: DaveNoth <david.nothnagel@prudential.com>
To: users@tomcat.apache.org
Message-ID: <1333377032079-4679081.post@n6.nabble.com>
In-Reply-To: <4F79A062.8050100@ice-sa.com>
References: <1333120922912-4671621.post@n6.nabble.com> <4F760DFA.20307@pidster.com> <1333366652527-4678609.post@n6.nabble.com> <4F799A0B.6000100@pidster.com> <4F79A062.8050100@ice-sa.com>
Subject: Re: Running Tomcat as a Standalone desktop Application
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable


Thanks Andr=C3=A9!  This is very helpful. =20

We have a new user base that requires our application to run as a
stand-alone, disconnected App. Today our App is an Online Web Application
running under Websphere. I was also looking to see if anyone is currently
deploying a Web Application (Servlet/JSP) running on Tomcat as a
*stand-alone,* *disconnect* application.   Our goal is to use our same Java
Web application code base for Online connected users as well as disconnecte=
d
stand-alone users.   If no one out there is doing this, I am going to infer
it's not a very good idea and look into a rewrite of the code to work under
windows as a desktop app.

--
View this message in context: http://tomcat.10.n6.nabble.com/Running-Tomcat=
-as-a-Standalone-desktop-Application-tp4671621p4679081.html
Sent from the Tomcat - User mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233263-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  2 14:47:00 2012
Return-Path: <users-return-233263-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 05E579CB6
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  2 Apr 2012 14:47:00 +0000 (UTC)
Received: (qmail 61417 invoked by uid 500); 2 Apr 2012 14:46:56 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 61195 invoked by uid 500); 2 Apr 2012 14:46:56 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 61184 invoked by uid 99); 2 Apr 2012 14:46:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 14:46:56 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dckerber@verizon.net designates 206.46.173.7 as permitted sender)
Received: from [206.46.173.7] (HELO vms173007pub.verizon.net) (206.46.173.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 14:46:48 +0000
MIME-version: 1.0
Content-transfer-encoding: 8BIT
Content-type: text/plain; charset=UTF-8; format=flowed
Received: from [172.17.47.42] ([unknown] [64.17.225.82])
 by vms173007.mailsrvcs.net
 (Sun Java(tm) System Messaging Server 7u2-7.02 32bit (built Apr 16 2009))
 with ESMTPA id <0M1U00BGYX0JO440@vms173007.mailsrvcs.net> for
 users@tomcat.apache.org; Mon, 02 Apr 2012 09:45:56 -0500 (CDT)
Message-id: <4F79BBA3.2030002@verizon.net>
Date: Mon, 02 Apr 2012 10:45:55 -0400
From: David kerber <dckerber@verizon.net>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.25)
 Gecko/20111213 Thunderbird/3.1.17
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Running Tomcat as a Standalone desktop Application
References: <1333120922912-4671621.post@n6.nabble.com>
 <4F760DFA.20307@pidster.com> <1333366652527-4678609.post@n6.nabble.com>
 <4F799A0B.6000100@pidster.com> <4F79A062.8050100@ice-sa.com>
 <1333377032079-4679081.post@n6.nabble.com>
In-reply-to: <1333377032079-4679081.post@n6.nabble.com>

On 4/2/2012 10:30 AM, DaveNoth wrote:
>
> Thanks Andr!  This is very helpful.
>
> We have a new user base that requires our application to run as a
> stand-alone, disconnected App. Today our App is an Online Web Application
> running under Websphere. I was also looking to see if anyone is currently
> deploying a Web Application (Servlet/JSP) running on Tomcat as a
> *stand-alone,* *disconnect* application.   Our goal is to use our same Java
> Web application code base for Online connected users as well as disconnected
> stand-alone users.   If no one out there is doing this, I am going to infer
> it's not a very good idea and look into a rewrite of the code to work under
> windows as a desktop app.

I wouldn't say it's not a good idea, it just seems to be a lot of work, 
since you need to configure a TC server on every user's machine.  Why 
not just set it up on an in-house server that cannot be accessed from 
the outside world, but can be accessed from the in-house LAN?

If you choose to make it a java desktop app, you'll probably find that a 
lot of your code can be used unchanged, especially if the UI code is 
fairly well separated from the back-end processes code.


>
> --
> View this message in context: http://tomcat.10.n6.nabble.com/Running-Tomcat-as-a-Standalone-desktop-Application-tp4671621p4679081.html
> Sent from the Tomcat - User mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233264-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  2 14:52:39 2012
Return-Path: <users-return-233264-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F29079E43
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  2 Apr 2012 14:52:39 +0000 (UTC)
Received: (qmail 81149 invoked by uid 500); 2 Apr 2012 14:52:36 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 81094 invoked by uid 500); 2 Apr 2012 14:52:36 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 81084 invoked by uid 99); 2 Apr 2012 14:52:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 14:52:36 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pid@pidster.com designates 209.85.214.45 as permitted sender)
Received: from [209.85.214.45] (HELO mail-bk0-f45.google.com) (209.85.214.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 14:52:28 +0000
Received: by bkcjg9 with SMTP id jg9so2935358bkc.18
        for <users@tomcat.apache.org>; Mon, 02 Apr 2012 07:52:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type;
        bh=OfgZRHlAoc/u0tAwS98Plh4xU8zgo7ltdHbm1S8oHoc=;
        b=WxbqR6AAeWv5CcAl3X0VbVrs0AJ+SESASshuD9eAGhhV9LiAgvtLOqEHBoKGbnry4p
         OZKOKCrPfwaXBXbS8PzuSfmE49QNrLmNDPM4myDGtOjyHya6g6k4P413pg1nqJhItyne
         iyxvQMGoGvuDvAkkWyhlT9Jh0XSaBgyJWAYFI=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type:x-gm-message-state;
        bh=OfgZRHlAoc/u0tAwS98Plh4xU8zgo7ltdHbm1S8oHoc=;
        b=Wlnzptm+Y4UD9yMsuT6BTOTdt/624uM/YGKxn7ftmAAtm70TvEMKeOVvDmAlFhNYvt
         c7tnEDjirc0+JQakfC3GwOk9wxmHPplZ6kVrgCXjzuDgc+SNKZqxIBnfHrIT3ha+MIRX
         O1pAJA+hUzv3R5wIb84NK09V2QKQSkfJgKIHUxvc8O8v5RnM+UD2BGcGE9yWYz4IVGD9
         Jk1kb7+20KkqXb9H0RYIQzvTE8KI+k4X83RoQfJzFp+Cgd42eQdr59q1zNtGzmmnGlDj
         XtHmzTHyomGwmPC1zXWNSxcDvem7+WwC83qZlVjf1KhN8P7gxrL846EyT5ZrLDbW1zMt
         oDgQ==
Received: by 10.205.81.3 with SMTP id zw3mr3708641bkb.30.1333378328302;
        Mon, 02 Apr 2012 07:52:08 -0700 (PDT)
Received: from Asura.local (cpc10-lewi14-2-0-cust355.2-4.cable.virginmedia.com. [82.4.249.100])
        by mx.google.com with ESMTPS id p19sm39189318bka.1.2012.04.02.07.52.05
        (version=SSLv3 cipher=OTHER);
        Mon, 02 Apr 2012 07:52:07 -0700 (PDT)
Message-ID: <4F79BD0F.3050703@pidster.com>
Date: Mon, 02 Apr 2012 15:51:59 +0100
From: Pid <pid@pidster.com>
Organization: Pidster Inc
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Tomcat6 - Context - aliases
References: <1333360773430-4678428.post@n6.nabble.com> <CABzHfVn5uKEF9RKGUkqGGq56DLNFhRFm6Y_PUSUq--x3=yMpvw@mail.gmail.com> <1333363527730-4678513.post@n6.nabble.com> <11462767.90.1333372854644.JavaMail.daniel@cleveland> <1333376619645-4679060.post@n6.nabble.com>
In-Reply-To: <1333376619645-4679060.post@n6.nabble.com>
X-Enigmail-Version: 1.4
OpenPGP: id=62590808
Content-Type: multipart/signed; micalg=pgp-sha512;
 protocol="application/pgp-signature";
 boundary="------------enig7F310B1B9EE583BE2469644B"
X-Gm-Message-State: ALoCoQmF5C4Gv0a3ZicLFnawmJ9k4ajZ/wtq789tcRAxZuMPhUG65fAYw5rsaAfnaBwSaBOrfkkR

--------------enig7F310B1B9EE583BE2469644B
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

On 02/04/2012 15:23, L=E9a Massiot wrote:
> Thank you for your advice.
>=20
> And how did people do to declare aliases before the "aliases" attribute=
 of
> the "Context" element was introduced in "Tomcat7"?

Either they did not, or they selected an alternative based on their
use-case.  What is your exact requirement?


p


> --
> View this message in context: http://tomcat.10.n6.nabble.com/Tomcat6-Co=
ntext-aliases-tp4678430p4679060.html
> Sent from the Tomcat - User mailing list archive at Nabble.com.
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>=20


--=20

[key:62590808]


--------------enig7F310B1B9EE583BE2469644B
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.18 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iQIcBAEBCgAGBQJPeb0UAAoJEGoM2OGpOvr9yaUQAJ1dRqj2ii6F2lSNIA/fOHN5
tQQba25iw68zT57FqZPkO4DctduX2ETS7vKXHghH5gFkaXeFfzy0UY2b+Q5ZjzVq
oPYVRABspifM5XtuT44vH/4KDPuXHINS5rZm4qEzYPiRlRJK3BhHkxq7q5fGhiLh
22Phq4UijhEIiZopvgwovTHUBq3o7N2AkIRhrCd4whCxoOjzyKvrQVIjNFvnhQDy
h1fxyFUCDxWNtUfxCgqEn2RbMqg88ogETRSvLsCmcw10oDAQvso9s8T9sGdZMhev
Y53k367cR4XxfAPcVyuoonfd63ARYgZnjrZTU097uY8EnTVCXHTvRvXpOIbZzOll
NYoF5gdyIt1kOGWbyZ91fv3aJSH/0kH2jlsPOrVdagxynw0h3b4SZGPC9PoLxupx
De8QiPtlofr3uUFFoR1w8ExnPII/z7GZRj6UUX4ozOeNiBoKofGtsCZc2IQAYNcf
d3teQfbVLK6ZbMwkPLW6ktOqKYuvetLmViFsEls4Uq11f9u5ALw4tqyzuqkfXSM9
0eowzGbEa17Fz6H4VYtnbsLg67BtcJKO+2DTvgo0DF/HMXhZJ8V9U+l1IFW5SJmZ
YyfjzBWYCadKsrU2s4STokAuGFvhUnpOCXC64MyDemCOfDIo6uQbN7wj7dK1ARMK
Bjv0SrKF2wcjOKxwT2yy
=WN6y
-----END PGP SIGNATURE-----

--------------enig7F310B1B9EE583BE2469644B--

From users-return-233265-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  2 15:12:08 2012
Return-Path: <users-return-233265-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7260A980F
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  2 Apr 2012 15:12:08 +0000 (UTC)
Received: (qmail 51756 invoked by uid 500); 2 Apr 2012 15:12:04 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 51596 invoked by uid 500); 2 Apr 2012 15:12:04 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 51586 invoked by uid 99); 2 Apr 2012 15:12:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 15:12:04 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [216.82.241.99] (HELO mail51.messagelabs.com) (216.82.241.99)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 15:11:54 +0000
X-Env-Sender: Chuck.Caldarale@unisys.com
X-Msg-Ref: server-15.tower-51.messagelabs.com!1333379488!5885588!15
X-Originating-IP: [192.61.61.105]
X-StarScan-Version: 6.5.5; banners=-,-,-
X-VirusChecked: Checked
Received: (qmail 16086 invoked from network); 2 Apr 2012 15:11:31 -0000
Received: from naedge.unisys.com (HELO USEA-NAEDGE2.unisys.com) (192.61.61.105)
  by server-15.tower-51.messagelabs.com with RC4-SHA encrypted SMTP; 2 Apr 2012 15:11:31 -0000
Received: from usea-nahubcas1.na.uis.unisys.com (129.224.76.114) by
 USEA-NAEDGE2.unisys.com (192.61.61.105) with Microsoft SMTP Server (TLS) id
 8.3.83.0; Mon, 2 Apr 2012 10:11:29 -0500
Received: from USEA-EXCH8.na.uis.unisys.com ([129.224.76.41]) by
 usea-nahubcas1.na.uis.unisys.com ([129.224.76.114]) with mapi; Mon, 2 Apr
 2012 10:11:29 -0500
From: "Caldarale, Charles R" <Chuck.Caldarale@unisys.com>
To: Tomcat Users List <users@tomcat.apache.org>
Date: Mon, 2 Apr 2012 10:11:27 -0500
Subject: RE: Running Tomcat as a Standalone desktop Application
Thread-Topic: Running Tomcat as a Standalone desktop Application
Thread-Index: Ac0Q3UeM/hPCjYx2RvK+06GHElcEWwABOn3A
Message-ID: <99C8B2929B39C24493377AC7A121E21FB016BDF7C0@USEA-EXCH8.na.uis.unisys.com>
References: <1333120922912-4671621.post@n6.nabble.com>
 <4F760DFA.20307@pidster.com> <1333366652527-4678609.post@n6.nabble.com>
 <4F799A0B.6000100@pidster.com> <4F79A062.8050100@ice-sa.com>
 <1333377032079-4679081.post@n6.nabble.com>
In-Reply-To: <1333377032079-4679081.post@n6.nabble.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0

PiBGcm9tOiBEYXZlTm90aCBbbWFpbHRvOmRhdmlkLm5vdGhuYWdlbEBwcnVkZW50aWFsLmNvbV0g
DQo+IFN1YmplY3Q6IFJlOiBSdW5uaW5nIFRvbWNhdCBhcyBhIFN0YW5kYWxvbmUgZGVza3RvcCBB
cHBsaWNhdGlvbg0KDQo+IElmIG5vIG9uZSBvdXQgdGhlcmUgaXMgZG9pbmcgdGhpcywgSSBhbSBn
b2luZyB0byBpbmZlciBpdCdzIG5vdCBhIA0KPiB2ZXJ5IGdvb2QgaWRlYSBhbmQgbG9vayBpbnRv
IGEgcmV3cml0ZSBvZiB0aGUgY29kZSB0byB3b3JrIHVuZGVyDQo+IHdpbmRvd3MgYXMgYSBkZXNr
dG9wIGFwcC4NCg0KQWN0dWFsbHksIHRoZXJlIGFyZSBhIGZhaXIgbnVtYmVyIG9mIGNvbW1lcmNp
YWwgYXBwcyB0aGF0IGhhdmUgVG9tY2F0IGJ1cmllZCBpbnNpZGUgdGhlbSwgc28gaXQncyBkZWZp
bml0ZWx5IG5vdCBhIGJhZCBpZGVhLiAgWW91IG1pZ2h0IHdhbnQgdG8gbG9vayBhdCB1c2luZyBU
b21jYXQgaW4gaXRzIGVtYmVkZGVkIGZvcm0sIGFuZCBwcm92aWRlIGEgc21hbGwgbWFpbiBjbGFz
cyB0aGF0IGRpc2NvdmVycyBhbiBhdmFpbGFibGUgcG9ydCwgc3RhcnRzIHVwIFRvbWNhdCwgYW5k
IGxhdW5jaGVzIGEgYnJvd3NlciB1c2luZyB0aGUgcG9ydC4gIFlvdXIgb25seSByZXF1aXJlbWVu
dCBvbiB0aGUgZW52aXJvbm1lbnQgd291bGQgYmUgaGF2aW5nIGEgdmlhYmxlIEpSRSBpbnN0YWxs
ZWQuICAoT3IgeW91IGNvdWxkIGJ1bmRsZSBhIEpSRSB3aXRoIHlvdXIgYXBwLCBhcyBzb21lIGRv
LikNCg0KIC0gQ2h1Y2sNCg0KDQpUSElTIENPTU1VTklDQVRJT04gTUFZIENPTlRBSU4gQ09ORklE
RU5USUFMIEFORC9PUiBPVEhFUldJU0UgUFJPUFJJRVRBUlkgTUFURVJJQUwgYW5kIGlzIHRodXMg
Zm9yIHVzZSBvbmx5IGJ5IHRoZSBpbnRlbmRlZCByZWNpcGllbnQuIElmIHlvdSByZWNlaXZlZCB0
aGlzIGluIGVycm9yLCBwbGVhc2UgY29udGFjdCB0aGUgc2VuZGVyIGFuZCBkZWxldGUgdGhlIGUt
bWFpbCBhbmQgaXRzIGF0dGFjaG1lbnRzIGZyb20gYWxsIGNvbXB1dGVycy4NCg0K
DQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IHVzZXJzLXVuc3Vi
c2NyaWJlQHRvbWNhdC5hcGFjaGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1t
YWlsOiB1c2Vycy1oZWxwQHRvbWNhdC5hcGFjaGUub3JnDQoN

From users-return-233266-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  2 15:15:26 2012
Return-Path: <users-return-233266-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 07F8698A2
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  2 Apr 2012 15:15:26 +0000 (UTC)
Received: (qmail 61707 invoked by uid 500); 2 Apr 2012 15:15:22 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 61513 invoked by uid 500); 2 Apr 2012 15:15:22 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 61495 invoked by uid 99); 2 Apr 2012 15:15:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 15:15:21 +0000
X-ASF-Spam-Status: No, hits=0.9 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [216.139.250.139] (HELO joe.nabble.com) (216.139.250.139)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 15:15:15 +0000
Received: from alf.nabble.com ([192.168.236.21])
	by joe.nabble.com with esmtp (Exim 4.72)
	(envelope-from <lmhelp1@orange.fr>)
	id 1SEiy6-0003t7-MK
	for users@tomcat.apache.org; Mon, 02 Apr 2012 08:14:54 -0700
Date: Mon, 2 Apr 2012 08:14:54 -0700 (PDT)
From: =?UTF-8?Q?L=C3=A9a_Massiot?= <lmhelp1@orange.fr>
To: users@tomcat.apache.org
Message-ID: <1333379694684-4679237.post@n6.nabble.com>
In-Reply-To: <4F79BD0F.3050703@pidster.com>
References: <1333360773430-4678428.post@n6.nabble.com> <CABzHfVn5uKEF9RKGUkqGGq56DLNFhRFm6Y_PUSUq--x3=yMpvw@mail.gmail.com> <1333363527730-4678513.post@n6.nabble.com> <11462767.90.1333372854644.JavaMail.daniel@cleveland> <1333376619645-4679060.post@n6.nabble.com> <4F79BD0F.3050703@pidster.com>
Subject: Re: Tomcat6 - Context - aliases
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Pid * wrote
> Either they did not, or they selected an alternative based on their
> use-case.
I'm sure they did. You'll see below, my requirements are basic.


Pid * wrote
> What is your exact requirement? 
- Users upload files to the server running Tomcat.
- The Webapp stores these file on the hard disk in some directory which has
nothing to do neither with the Webapp nor with the Tomcat engine. Let's name
it "d1".
- I needed an alias for the directory "d1" to refer to it from inside the
Webapp.
  I created a "META-INF/context.xml":

  <?xml version='1.0' encoding='UTF-8'?>
  <Context aliases=&quot;/&lt;an_alias_1>=<d1>">
  </Context>

Of course, it works as expected with "Tomcat7".

I "just" want to do something equivalent which works with "Tomcat6".

Thank you for helping me and best regards.



--
View this message in context: http://tomcat.10.n6.nabble.com/Tomcat6-Context-aliases-tp4678430p4679237.html
Sent from the Tomcat - User mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233267-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  2 15:50:05 2012
Return-Path: <users-return-233267-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C505D9A3E
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  2 Apr 2012 15:50:05 +0000 (UTC)
Received: (qmail 75567 invoked by uid 500); 2 Apr 2012 15:50:02 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 75432 invoked by uid 500); 2 Apr 2012 15:50:02 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 75423 invoked by uid 99); 2 Apr 2012 15:50:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 15:50:02 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aw@ice-sa.com designates 212.85.38.228 as permitted sender)
Received: from [212.85.38.228] (HELO tor.combios.es) (212.85.38.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 15:49:54 +0000
Received: from [192.168.245.129] (p549E8FDA.dip0.t-ipconnect.de [84.158.143.218])
	by tor.combios.es (Postfix) with ESMTPA id B6E63DA070F
	for <users@tomcat.apache.org>; Mon,  2 Apr 2012 17:49:30 +0200 (CEST)
Message-ID: <4F79CA86.1020609@ice-sa.com>
Date: Mon, 02 Apr 2012 17:49:26 +0200
From: =?ISO-8859-1?Q?Andr=E9_Warnier?= <aw@ice-sa.com>
Reply-To: Tomcat Users List <users@tomcat.apache.org>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Tomcat6 - Context - aliases
References: <1333360773430-4678428.post@n6.nabble.com> <CABzHfVn5uKEF9RKGUkqGGq56DLNFhRFm6Y_PUSUq--x3=yMpvw@mail.gmail.com> <1333363527730-4678513.post@n6.nabble.com> <11462767.90.1333372854644.JavaMail.daniel@cleveland> <1333376619645-4679060.post@n6.nabble.com> <4F79BD0F.3050703@pidster.com> <1333379694684-4679237.post@n6.nabble.com>
In-Reply-To: <1333379694684-4679237.post@n6.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit

La Massiot wrote:
> Pid * wrote
>> Either they did not, or they selected an alternative based on their
>> use-case.
> I'm sure they did. You'll see below, my requirements are basic.
> 
> 
> Pid * wrote
>> What is your exact requirement? 
> - Users upload files to the server running Tomcat.
> - The Webapp stores these file on the hard disk in some directory which has
> nothing to do neither with the Webapp nor with the Tomcat engine. Let's name
> it "d1".
> - I needed an alias for the directory "d1" to refer to it from inside the
> Webapp.
>   I created a "META-INF/context.xml":
> 
>   <?xml version='1.0' encoding='UTF-8'?>
>   <Context aliases=&quot;/&lt;an_alias_1>=<d1>">
>   </Context>
> 
> Of course, it works as expected with "Tomcat7".
> 
> I "just" want to do something equivalent which works with "Tomcat6".
> 

this might help, in a container- and version-independent way :
http://jaitechwriteups.blogspot.de/2007/01/how-to-read-properties-file-in-web.html


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233268-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  2 16:30:50 2012
Return-Path: <users-return-233268-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 581C6917E
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  2 Apr 2012 16:30:50 +0000 (UTC)
Received: (qmail 14866 invoked by uid 500); 2 Apr 2012 16:30:46 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 14699 invoked by uid 500); 2 Apr 2012 16:30:46 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 14690 invoked by uid 99); 2 Apr 2012 16:30:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 16:30:46 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pid@pidster.com designates 74.125.83.45 as permitted sender)
Received: from [74.125.83.45] (HELO mail-ee0-f45.google.com) (74.125.83.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 16:30:39 +0000
Received: by eeit10 with SMTP id t10so1448142eei.18
        for <users@tomcat.apache.org>; Mon, 02 Apr 2012 09:30:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type;
        bh=pmLMdPx+3Vc1hTb3Xe3NcYUG0gLFXEyixix4rqazzJE=;
        b=pug/OHcXYK1h26Xn+jDMVWkjka41da9Pf3fD7VVcUHmL8CxsX+HVPgPYRkzVSoSCKy
         eqYFQ3Kv5hgeLUW0HoqN5HJuVed6wI9ldUrmbVIjVuoSk1Vej6AdRCHJtcZ5VgREM4ld
         LcwLnhMcvk07JWJCdk7wIk9sDvsNawu7zi94g=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type:x-gm-message-state;
        bh=pmLMdPx+3Vc1hTb3Xe3NcYUG0gLFXEyixix4rqazzJE=;
        b=OnLUBTjYJ3MWNldRJ0D54myEWmkuA6uvJINTbWepNzk2XRTNwlCikMuIEiQTTGcuYE
         h7PViB8abn6J25z5EqiNMw8vQtwkMSRDbzkKvLI4vLS+Xx3cdmTZqa/QNe7KGXv6lx5o
         4u8WSbsGW+TL+7R4h+cEJ7vFIL2SAuhTbjb5PQrL1PmiRXeGLETc5PqUTMT1P09JRock
         0KLqT2Q4kZ6JYaCAHsTpQl4I6egR17naY/yTIgzd0RDYv4Bjjbck0mye1NR37BSvzQv+
         S5yzxvXQQ7Q3xBKnJt+XxRB8KmTt4e8fHx2iMXzh4DTrK5l1/rppILE7FieUQolGCxp5
         YEAw==
Received: by 10.213.26.69 with SMTP id d5mr787793ebc.61.1333384218851;
        Mon, 02 Apr 2012 09:30:18 -0700 (PDT)
Received: from Asura.local (cpc10-lewi14-2-0-cust355.2-4.cable.virginmedia.com. [82.4.249.100])
        by mx.google.com with ESMTPS id e56sm64498770eea.11.2012.04.02.09.30.14
        (version=SSLv3 cipher=OTHER);
        Mon, 02 Apr 2012 09:30:16 -0700 (PDT)
Message-ID: <4F79D410.9080209@pidster.com>
Date: Mon, 02 Apr 2012 17:30:08 +0100
From: Pid <pid@pidster.com>
Organization: Pidster Inc
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Tomcat6 - Context - aliases
References: <1333360773430-4678428.post@n6.nabble.com> <CABzHfVn5uKEF9RKGUkqGGq56DLNFhRFm6Y_PUSUq--x3=yMpvw@mail.gmail.com> <1333363527730-4678513.post@n6.nabble.com> <11462767.90.1333372854644.JavaMail.daniel@cleveland> <1333376619645-4679060.post@n6.nabble.com> <4F79BD0F.3050703@pidster.com> <1333379694684-4679237.post@n6.nabble.com>
In-Reply-To: <1333379694684-4679237.post@n6.nabble.com>
X-Enigmail-Version: 1.4
OpenPGP: id=62590808
Content-Type: multipart/signed; micalg=pgp-sha512;
 protocol="application/pgp-signature";
 boundary="------------enigC79394291550AE0D96C97344"
X-Gm-Message-State: ALoCoQllvSj45FF1vvql19JvogcRsPevT9d1XApBNoybKmiE6rf05Jrjnv7wofs3Q5xh118mrFdO

--------------enigC79394291550AE0D96C97344
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

On 02/04/2012 16:14, L=E9a Massiot wrote:
>=20
> Pid * wrote
>> Either they did not, or they selected an alternative based on their
>> use-case.
> I'm sure they did. You'll see below, my requirements are basic.
>=20
>=20
> Pid * wrote
>> What is your exact requirement?=20
> - Users upload files to the server running Tomcat.
> - The Webapp stores these file on the hard disk in some directory which=
 has
> nothing to do neither with the Webapp nor with the Tomcat engine. Let's=
 name
> it "d1".
> - I needed an alias for the directory "d1" to refer to it from inside t=
he
> Webapp.

Please define 'inside'.  Does the application need to perform an
internal forward, or does the client just need to be able to request the
URL for the resource?

In the latter case, put a Context file in:

 tomcat/conf/Catalina/$hostname/$alias.xml

 <?xml version=3D'1.0' encoding=3D'UTF-8'?>
 <Context docBase=3D"/path/to/d1">
 </Context>


p

>   I created a "META-INF/context.xml":
>=20
>   <?xml version=3D'1.0' encoding=3D'UTF-8'?>
>   <Context aliases=3D&quot;/&lt;an_alias_1>=3D<d1>">
>   </Context>
>=20
> Of course, it works as expected with "Tomcat7".
>=20
> I "just" want to do something equivalent which works with "Tomcat6".
>=20
> Thank you for helping me and best regards.
>=20
>=20
>=20
> --
> View this message in context: http://tomcat.10.n6.nabble.com/Tomcat6-Co=
ntext-aliases-tp4678430p4679237.html
> Sent from the Tomcat - User mailing list archive at Nabble.com.
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>=20


--=20

[key:62590808]


--------------enigC79394291550AE0D96C97344
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.18 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iQIcBAEBCgAGBQJPedQUAAoJEGoM2OGpOvr98HwP/00uRGQSrxDtcxNxdPNIFc/t
XgUnPkQp0w9THREmNDmfCXqEGu909dCnLhMIaE9Y3FxerNem6biu37l9ewVQnxMY
2PuvROe0Qee8M28U/A6jT8+28I9cr3TrY5fFH6BtAfvpmu33ULm/KOvRTZQ9LH9g
muhMF9MIEMi+V4ZRSEW7PSkXdRF2kz6dBTOSHxD9qFU4BCaULeLconGbLkIguF5G
/mfBB/MEugea6W8OK/axoNARnk98WQbRPzR8LnS12XkiZKDsO74l3pRVfjuBWPTb
KwqB1Ys1LA8eDoLJkieWZLRM5nwLzIEbETAvaDD6++h4Rcid9UIjCv52YY5AUxv5
SWezbZ18lN88fGL1RgQ0tLPdip0lBI78ov0aMIgSqy4T9XxKsAmTQcrCxtWc/kiq
6Hf1yAU0dhXAqckEfZULWVXlrrm2Ql9mhMebnE16G3mlHqWSOlM3ntx55o5Byg/V
tZ9aP9Dg95xh1imByxKgpe2bCsYepQX+PF/eulBK/tKRqQlhipyPhIqXbEWK0nHc
qI01hJK4tsW90meTAovzyWAWs2zPeAs5wq3t/6vexBkgRGgTVNSG5dnuLxeUcvoY
4kO0A8IDDrFGoLSidWYiHbF8KeWi0h6N59pImdYFDkDEvhNYjSKeUrBsuCW+shW6
BITj7CAvdenOO5LMIjzU
=3w0h
-----END PGP SIGNATURE-----

--------------enigC79394291550AE0D96C97344--

From users-return-233269-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  2 16:55:59 2012
Return-Path: <users-return-233269-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0168C974C
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  2 Apr 2012 16:55:58 +0000 (UTC)
Received: (qmail 7543 invoked by uid 500); 2 Apr 2012 16:55:55 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 7489 invoked by uid 500); 2 Apr 2012 16:55:55 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 7479 invoked by uid 99); 2 Apr 2012 16:55:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 16:55:55 +0000
X-ASF-Spam-Status: No, hits=1.0 required=5.0
	tests=SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (nike.apache.org: transitioning domain of david.nothnagel@prudential.com does not designate 216.139.250.139 as permitted sender)
Received: from [216.139.250.139] (HELO joe.nabble.com) (216.139.250.139)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 16:55:49 +0000
Received: from alf.nabble.com ([192.168.236.21])
	by joe.nabble.com with esmtp (Exim 4.72)
	(envelope-from <david.nothnagel@prudential.com>)
	id 1SEkXQ-0008KX-0f
	for users@tomcat.apache.org; Mon, 02 Apr 2012 09:55:28 -0700
Date: Mon, 2 Apr 2012 09:55:28 -0700 (PDT)
From: DaveNoth <david.nothnagel@prudential.com>
To: users@tomcat.apache.org
Message-ID: <1333385728013-4679513.post@n6.nabble.com>
In-Reply-To: <99C8B2929B39C24493377AC7A121E21FB016BDF7C0@USEA-EXCH8.na.uis.unisys.com>
References: <1333120922912-4671621.post@n6.nabble.com> <4F760DFA.20307@pidster.com> <1333366652527-4678609.post@n6.nabble.com> <4F799A0B.6000100@pidster.com> <4F79A062.8050100@ice-sa.com> <1333377032079-4679081.post@n6.nabble.com> <99C8B2929B39C24493377AC7A121E21FB016BDF7C0@USEA-EXCH8.na.uis.unisys.com>
Subject: RE: Running Tomcat as a Standalone desktop Application
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Thank you Chuck.  Using Tomcat in the embedded form looks like a nice way to
go.   I see there was on older article on the web which described the type
of solution we are looking for in the disconnected deployment of our Web
App.

http://www.javalobby.org/articles/tomcat2go/

Can you list any of the commercial apps that are using Tomcat in this way?

Thanks everyone for all the help.
dave

--
View this message in context: http://tomcat.10.n6.nabble.com/Running-Tomcat-as-a-Standalone-desktop-Application-tp4671621p4679513.html
Sent from the Tomcat - User mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233270-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  2 17:50:50 2012
Return-Path: <users-return-233270-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 829C29BD8
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  2 Apr 2012 17:50:50 +0000 (UTC)
Received: (qmail 97670 invoked by uid 500); 2 Apr 2012 17:50:47 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 97493 invoked by uid 500); 2 Apr 2012 17:50:47 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 97484 invoked by uid 99); 2 Apr 2012 17:50:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 17:50:47 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.91.2.12] (HELO smtp-outbound-1.vmware.com) (208.91.2.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 17:50:41 +0000
Received: from sc9-mailhost1.vmware.com (sc9-mailhost1.vmware.com [10.113.161.71])
	by smtp-outbound-1.vmware.com (Postfix) with ESMTP id 7E3AE28633
	for <users@tomcat.apache.org>; Mon,  2 Apr 2012 10:50:19 -0700 (PDT)
Received: from zimbra-prod-mta-3.vmware.com (zimbra-prod-mta-3.vmware.com [10.113.160.227])
	by sc9-mailhost1.vmware.com (Postfix) with ESMTP id 7B3531833D
	for <users@tomcat.apache.org>; Mon,  2 Apr 2012 10:50:19 -0700 (PDT)
Received: from localhost (localhost.localdomain [127.0.0.1])
	by zimbra-prod-mta-3.vmware.com (Postfix) with ESMTP id 76CE7F30A0
	for <users@tomcat.apache.org>; Mon,  2 Apr 2012 10:50:19 -0700 (PDT)
X-Virus-Scanned: amavisd-new at zimbra-prod-mta-3.vmware.com
Received: from zimbra-prod-mta-3.vmware.com ([127.0.0.1])
	by localhost (zimbra-prod-mta-3.vmware.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id XLyKh-Nftlnh for <users@tomcat.apache.org>;
	Mon,  2 Apr 2012 10:50:19 -0700 (PDT)
Received: from zimbra-prod-mbox-5.vmware.com (zimbra-prod-mbox-5.vmware.com [10.113.160.194])
	by zimbra-prod-mta-3.vmware.com (Postfix) with ESMTP id 65DA3F2FF7
	for <users@tomcat.apache.org>; Mon,  2 Apr 2012 10:50:19 -0700 (PDT)
Date: Mon, 2 Apr 2012 10:50:19 -0700 (PDT)
From: Daniel Mikusa <dmikusa@vmware.com>
To: Tomcat Users List <users@tomcat.apache.org>
Message-ID: <18026241.197.1333389014962.JavaMail.daniel@cleveland>
In-Reply-To: <1333385728013-4679513.post@n6.nabble.com>
Subject: Re: Running Tomcat as a Standalone desktop Application
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Originating-IP: [24.160.217.1]
X-Mailer: Zimbra 7.1.3_GA_3374 (Zimbra Desktop/7.1.4_11273_Linux)

----- Original Message -----
> Thank you Chuck.  Using Tomcat in the embedded form looks like a nice
> way to
> go.   I see there was on older article on the web which described the
> type
> of solution we are looking for in the disconnected deployment of our
> Web
> App.
> 
> http://www.javalobby.org/articles/tomcat2go/
> 
> Can you list any of the commercial apps that are using Tomcat in this
> way?


I know of an open source offering called WaveMaker which is using this method of deployment.  It's a fairly large project.

  http://www.wavemaker.com/

Project source code is on GitHub.

  https://github.com/SpringSource/wavemaker/tree/master/wavemaker-desktop/wavemaker-launcher

Dan


> 
> Thanks everyone for all the help.
> dave
> 
> --
> View this message in context:
> http://tomcat.10.n6.nabble.com/Running-Tomcat-as-a-Standalone-desktop-Application-tp4671621p4679513.html
> Sent from the Tomcat - User mailing list archive at Nabble.com.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233271-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  2 18:06:32 2012
Return-Path: <users-return-233271-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 334349691
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  2 Apr 2012 18:06:32 +0000 (UTC)
Received: (qmail 58417 invoked by uid 500); 2 Apr 2012 18:06:28 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 58311 invoked by uid 500); 2 Apr 2012 18:06:28 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 58302 invoked by uid 99); 2 Apr 2012 18:06:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 18:06:28 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [134.226.32.56] (HELO scss.tcd.ie) (134.226.32.56)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 18:06:23 +0000
Received: from localhost (localhost [127.0.0.1])
	by hermes.scss.tcd.ie (Postfix) with ESMTP id ED89A171C06
	for <users@tomcat.apache.org>; Mon,  2 Apr 2012 19:05:51 +0100 (IST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=cs.tcd.ie; h=
	content-transfer-encoding:content-type:subject:mime-version
	:user-agent:organization:reply-to:from:date:message-id:received
	:received:x-virus-scanned; s=cs; t=1333389951; bh=nnJQRUqRmfYK4r
	mkFi6U2KS43nHkG48SOk9rOWilQdg=; b=u/o85bx/prLQSox0FrKhJq/TMsC4vc
	yvbZ42UQYSaQsEpHmceJpSc0gHYpUwKTIRnlAGHTGFyR+ICvzgmqxVjSHX2Ecsqq
	tk7TIVEvKMCTkIQbK7YfN/yfExRM3Lg7JRLlEc13SFSjawbRPjdOyZSFF4OpPDS5
	90jAWOqgTAi8yUAv/AnNrGLoMcVxA4gKjO0mo9SMwiET6pnvKI5UDoREdKJZ0EDn
	7x2nv7smKx6MpRiT8W2rIvJ6akdAl3CkUTcRinMmrqHyEnd2og3LwxbBMBcEACcn
	Qv92zPVCQa1JMS+r1E41yxJpz58Ot0ZWRmKX1IwXN082enSfH/fHQ4ig==
X-Virus-Scanned: Debian amavisd-new at scss.tcd.ie
Received: from scss.tcd.ie ([127.0.0.1])
	by localhost (scss.tcd.ie [127.0.0.1]) (amavisd-new, port 10027)
	with ESMTP id wbYW1t5O4IlM for <users@tomcat.apache.org>;
	Mon,  2 Apr 2012 19:05:51 +0100 (IST)
Received: from shiraz.cs.tcd.ie (unknown [IPv6:2001:770:10:200:21d:9ff:fe28:378e])
	by smtp.scss.tcd.ie (Postfix) with ESMTPSA id AAFFF171C05
	for <users@tomcat.apache.org>; Mon,  2 Apr 2012 19:05:51 +0100 (IST)
Message-ID: <4F79EA7F.7050501@cs.tcd.ie>
Date: Mon, 02 Apr 2012 19:05:51 +0100
From: Peter Lavin <lavinp@cs.tcd.ie>
Reply-To: lavinp@cs.tcd.ie
Organization: School of Computer Science and Statistics, Trinity College Dublin
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:10.0.3) Gecko/20120314 Thunderbird/10.0.3
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Deleting URLClassloader Cached Jars/Classes
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Hi all,
this may be a general Java question or their may be a specific answer 
related to Tomcat.

I am running a simple webservice which loads classes using a 
URLClassloader...

// start of code snippet
ClassLoader previous = Thread.currentThread()
					.getContextClassLoader();
URLClassLoader loader = new URLClassLoader(new URL[]
			 { new URL("http://localhost/classes/")}, previous);


String className = "common.MyClassToBeLoaded";
			Class<?> ho = loader.loadClass(className);
// end

This ok, but when I edit and recompile a class which is loaded, the 
changes to MyClassToBeLoaded.java are not reflected in the webservice.

I suspect that the class is being cached and won't be cleared until the 
JVM restarts (i.e. the Tomcat server will have to be restarted).


My Question:
Is there a way to empty this cache, or disable caching all together?

There are some suggestions out there but none specific to Tomcat.

Effectively, I need to clear the cache, all the better if my code can do 
it each time I load the MyClassToBeLoaded.class.


Peter


-- 
with best regards,
Peter Lavin,
PhD Candidate,
Computer Architecture & Grid Research Group,
Lloyd Institute, 005,
Trinity College Dublin, Ireland.
+353 1 8961536

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233272-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  2 19:03:23 2012
Return-Path: <users-return-233272-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 164FE9F72
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  2 Apr 2012 19:03:23 +0000 (UTC)
Received: (qmail 63314 invoked by uid 500); 2 Apr 2012 19:03:18 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 63263 invoked by uid 500); 2 Apr 2012 19:03:18 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 63184 invoked by uid 99); 2 Apr 2012 19:03:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 19:03:16 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [194.51.201.67] (HELO esa-sf1.esa.gmessaging.net) (194.51.201.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 19:03:07 +0000
Received: from esa-sf1.esa.gmessaging.net (localhost [127.0.0.1])
	by localhost.esa.gmessaging.net (Postfix) with SMTP id 3F3CE5F9BA3
	for <users@tomcat.apache.org>; Mon,  2 Apr 2012 21:02:35 +0200 (CEST)
Received: from sciops-mailgw.vilspa.esa.int (sciops-mailgw.vilspa.esa.int [193.147.152.105])
	by esa-sf1.esa.gmessaging.net (Postfix) with ESMTP id 257B65F9B9F
	for <users@tomcat.apache.org>; Mon,  2 Apr 2012 21:02:35 +0200 (CEST)
Received: from sciops.esac.int (scimail.esac.esa.int [193.147.152.87])
	by sciops-mailgw.vilspa.esa.int (Postfix) with ESMTP id E3B7C8B8E1
	for <users@tomcat.apache.org>; Mon,  2 Apr 2012 21:02:44 +0200 (CEST)
Received: from [127.0.0.1] (214.pool85-49-217.dynamic.orange.es [85.49.217.214])
	(authenticated bits=0)
	by sciops.esac.int (8.13.1/8.13.1) with ESMTP id q32J2i4P028619
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <users@tomcat.apache.org>; Mon, 2 Apr 2012 21:02:44 +0200
Message-ID: <16157_1333393355_4F79F7CB_16157_14431_1_4F79F7D2.60408@yahoo.es>
Date: Mon, 02 Apr 2012 21:02:42 +0200
From: =?ISO-8859-1?Q?Miguel_Gonz=E1lez_Casta=F1os?= <miguel_3_gonzalez@yahoo.es>
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:11.0) Gecko/20120312 Thunderbird/11.0
MIME-Version: 1.0
To: users@tomcat.apache.org
Subject: Bash script for monitoring status of the Tomcat server
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Antivirus: avast! (VPS 120402-0, 02/04/2012), Outbound message
X-Antivirus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org

Dear all,

   Recently we had to restart our standalone Tomcat server because 
apparently the 150 max threads setting was not enough. I have been 
googling a bit and it seems it's possible to monitor the performance of 
the server and also get the numbers when the connection pool or the 
threads are about to be exhausted.

   I would like to run a bash script to monitor these values and warn me 
if the reach a certain level. Also a tool that generates some graphs 
would be great.

   I haven't found anything googling. Any ideas of how to build my own 
script?

   Regards,

   Miguel

This message and any attachments are intended for the use of the addressee or addressees only. The unauthorised disclosure, use, dissemination or copying (either in whole or in part) of its content is not permitted. If you received this message in error, please notify the sender and delete it from your system. Emails can be altered and their integrity cannot be guaranteed by the sender.

Please consider the environment before printing this email.


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233273-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  2 19:29:12 2012
Return-Path: <users-return-233273-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4C4E99546
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  2 Apr 2012 19:29:12 +0000 (UTC)
Received: (qmail 61102 invoked by uid 500); 2 Apr 2012 19:29:08 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 61045 invoked by uid 500); 2 Apr 2012 19:29:08 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 61036 invoked by uid 99); 2 Apr 2012 19:29:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 19:29:08 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [216.82.249.131] (HELO mail28.messagelabs.com) (216.82.249.131)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 19:28:59 +0000
X-Env-Sender: Chuck.Caldarale@unisys.com
X-Msg-Ref: server-4.tower-28.messagelabs.com!1333394916!20301323!1
X-Originating-IP: [192.61.61.105]
X-StarScan-Version: 6.5.5; banners=-,-,-
X-VirusChecked: Checked
Received: (qmail 10838 invoked from network); 2 Apr 2012 19:28:37 -0000
Received: from naedge.unisys.com (HELO USEA-NAEDGE2.unisys.com) (192.61.61.105)
  by server-4.tower-28.messagelabs.com with RC4-SHA encrypted SMTP; 2 Apr 2012 19:28:37 -0000
Received: from usea-nahubcas1.na.uis.unisys.com (129.224.76.114) by
 USEA-NAEDGE2.unisys.com (192.61.61.105) with Microsoft SMTP Server (TLS) id
 8.3.83.0; Mon, 2 Apr 2012 14:28:36 -0500
Received: from USEA-EXCH8.na.uis.unisys.com ([129.224.76.41]) by
 usea-nahubcas1.na.uis.unisys.com ([129.224.76.114]) with mapi; Mon, 2 Apr
 2012 14:28:36 -0500
From: "Caldarale, Charles R" <Chuck.Caldarale@unisys.com>
To: Tomcat Users List <users@tomcat.apache.org>
Date: Mon, 2 Apr 2012 14:28:35 -0500
Subject: RE: Bash script for monitoring status of the Tomcat server
Thread-Topic: Bash script for monitoring status of the Tomcat server
Thread-Index: Ac0RA1Av8EGNJh8/QL+ieZijZvrrEQAAmUIA
Message-ID: <99C8B2929B39C24493377AC7A121E21FB016BDFD47@USEA-EXCH8.na.uis.unisys.com>
References: <16157_1333393355_4F79F7CB_16157_14431_1_4F79F7D2.60408@yahoo.es>
In-Reply-To: <16157_1333393355_4F79F7CB_16157_14431_1_4F79F7D2.60408@yahoo.es>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

> From: Miguel Gonz=E1lez Casta=F1os [mailto:miguel_3_gonzalez@yahoo.es]=20
> Subject: Bash script for monitoring status of the Tomcat server

> I would like to run a bash script to monitor these values and warn=20
> me if the reach a certain level. Also a tool that generates some=20
> graphs would be great.

Not quite sure how you can put "bash" and "graphs" together, but nonetheles=
s...

1) Use JConsole or VisualVM to graphically monitor what's going on inside T=
omcat and the JVM via JMX.  (Obviously not a bash script, but it's the easi=
est thing to do.)

2) Use wget or curl to access Tomcat's text-mode manager app and parse the =
results.

3) Use a command-line JMX tool like jmxsh (http://code.google.com/p/jmxsh/)=
 to extract information and parse out whatever you want.

4) Use one of the enhanced versions of Tomcat (e.g., tc Server) that includ=
es automatic monitoring and notification.

 - Chuck


THIS COMMUNICATION MAY CONTAIN CONFIDENTIAL AND/OR OTHERWISE PROPRIETARY MA=
TERIAL and is thus for use only by the intended recipient. If you received =
this in error, please contact the sender and delete the e-mail and its atta=
chments from all computers.


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233274-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  2 19:50:04 2012
Return-Path: <users-return-233274-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 04BD090FC
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  2 Apr 2012 19:50:03 +0000 (UTC)
Received: (qmail 37625 invoked by uid 500); 2 Apr 2012 19:50:00 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 37566 invoked by uid 500); 2 Apr 2012 19:50:00 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 37555 invoked by uid 99); 2 Apr 2012 19:50:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 19:50:00 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [76.96.59.228] (HELO qmta15.westchester.pa.mail.comcast.net) (76.96.59.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 19:49:54 +0000
Received: from omta19.westchester.pa.mail.comcast.net ([76.96.62.98])
	by qmta15.westchester.pa.mail.comcast.net with comcast
	id t5Hh1i00527AodY5F7pZaW; Mon, 02 Apr 2012 19:49:33 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta19.westchester.pa.mail.comcast.net with comcast
	id t7pY1i00D38FjT13f7pZ77; Mon, 02 Apr 2012 19:49:33 +0000
Message-ID: <4F7A02E3.1060703@christopherschultz.net>
Date: Mon, 02 Apr 2012 15:49:55 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Bash script for monitoring status of the Tomcat server
References: <16157_1333393355_4F79F7CB_16157_14431_1_4F79F7D2.60408@yahoo.es> <99C8B2929B39C24493377AC7A121E21FB016BDFD47@USEA-EXCH8.na.uis.unisys.com>
In-Reply-To: <99C8B2929B39C24493377AC7A121E21FB016BDFD47@USEA-EXCH8.na.uis.unisys.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Chuck,

On 4/2/12 3:28 PM, Caldarale, Charles R wrote:
>> From: Miguel Gonzlez Castaos
>> [mailto:miguel_3_gonzalez@yahoo.es] Subject: Bash script for
>> monitoring status of the Tomcat server
> 
>> I would like to run a bash script to monitor these values and
>> warn me if the reach a certain level. Also a tool that generates
>> some graphs would be great.
> 
> Not quite sure how you can put "bash" and "graphs" together, but
> nonetheless...
> 
> 2) Use wget or curl to access Tomcat's text-mode manager app and 
> parse the results.

+1 -- and use the JMXProxyServlet, which lets you query specific
components like the connectors. We've been doing this lately to great
success.

You can use a tool like rrdtool to store the data and generate
nice-looking graphs over time. You can also easily use the same feed
to do real-time monitoring using a tool like Nagios, Ichinga, etc.

> 3) Use a command-line JMX tool like jmxsh
> (http://code.google.com/p/jmxsh/) to extract information and parse
> out whatever you want.

While this is a tempting idea, when you start probing many different
values via JMX, you'll find that starting a dozen JVMs and connecting
via JMX starts to strain the server unnecessarily. That's why I
recommend using JMXProxyServlet -- you get the power of JMX without
actually making a JMX connection.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk96AuMACgkQ9CaO5/Lv0PAMqwCgnMEf3G54uFmERY1h/ezDRhCk
aKIAnibgy+FJlo2Qcr87iOE6+43EP+gR
=NIfs
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233275-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  2 19:54:40 2012
Return-Path: <users-return-233275-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2E34F9247
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  2 Apr 2012 19:54:40 +0000 (UTC)
Received: (qmail 51688 invoked by uid 500); 2 Apr 2012 19:54:36 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 51618 invoked by uid 500); 2 Apr 2012 19:54:36 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 51608 invoked by uid 99); 2 Apr 2012 19:54:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 19:54:36 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [76.96.62.80] (HELO qmta08.westchester.pa.mail.comcast.net) (76.96.62.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 19:54:29 +0000
Received: from omta08.westchester.pa.mail.comcast.net ([76.96.62.12])
	by qmta08.westchester.pa.mail.comcast.net with comcast
	id t7mN1i0040Fqzac587u868; Mon, 02 Apr 2012 19:54:08 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta08.westchester.pa.mail.comcast.net with comcast
	id t7u81i00338FjT13U7u80b; Mon, 02 Apr 2012 19:54:08 +0000
Message-ID: <4F7A03F7.5000702@christopherschultz.net>
Date: Mon, 02 Apr 2012 15:54:31 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Chasing a SocketTimeoutException with APR
References: <6368FCCCD803D64BB0931D7F5F0A3DD502261E4F98@DEMCHP99E84MSX.ww902.siemens.net> <-2864601223268460441@unknownmsgid> <6368FCCCD803D64BB0931D7F5F0A3DD502274ECCAA@DEMCHP99E84MSX.ww902.siemens.net>
In-Reply-To: <6368FCCCD803D64BB0931D7F5F0A3DD502274ECCAA@DEMCHP99E84MSX.ww902.siemens.net>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Micheal,

On 3/30/12 3:37 AM, Osipov, Michael wrote:
> Pid * wrote:
>> Can you switch to the NIO connector and see if a similar issue
>> occurs?
> 
> Not on the production system. We are using APR with SSL, so I did
> not create Java compatible SSL keys. I can try on an integration
> system but this error happens sporadically on this method.

FWIW, you should be able to convert SSL keys between formats using
keytool and openssl.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk96A/cACgkQ9CaO5/Lv0PCnuACfaiuZYGcvNavA9Z5Upf7QziFl
RD8An12MqpkAgPLBgII0zwcvuXAEOFoG
=8J3W
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233276-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  2 20:31:29 2012
Return-Path: <users-return-233276-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1A3AC9117
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  2 Apr 2012 20:31:29 +0000 (UTC)
Received: (qmail 72579 invoked by uid 500); 2 Apr 2012 20:31:25 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 72509 invoked by uid 500); 2 Apr 2012 20:31:25 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 72499 invoked by uid 99); 2 Apr 2012 20:31:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 20:31:25 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [76.96.62.24] (HELO qmta01.westchester.pa.mail.comcast.net) (76.96.62.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 20:31:18 +0000
Received: from omta16.westchester.pa.mail.comcast.net ([76.96.62.88])
	by qmta01.westchester.pa.mail.comcast.net with comcast
	id t7Ek1i0061uE5Es518WxZZ; Mon, 02 Apr 2012 20:30:57 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta16.westchester.pa.mail.comcast.net with comcast
	id t8Wx1i00k38FjT13c8Wx6A; Mon, 02 Apr 2012 20:30:57 +0000
Message-ID: <4F7A0C98.9080101@christopherschultz.net>
Date: Mon, 02 Apr 2012 16:31:20 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Ant Tasks Question
References: <00c82ddd5a8b1fb9cb75b0c98b39598d@mail.gmail.com>
In-Reply-To: <00c82ddd5a8b1fb9cb75b0c98b39598d@mail.gmail.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Nick,

On 3/29/12 10:07 PM, Nick Williams wrote:
> This works great for list, deploy, undeploy, stop, start, etc. All
> of those tasks work. But the jasper/jasper2 tasks are weird. They
> silently do nothing.

Hmm. I've been playing around with the JspC intermittently for about a
year, now, and I've noticed that the ant-i-fication of the JspC
compiler seems to be a bit of an afterthought. For instance, the class
that implements it isn't even called [something]Task.java.

It's possible that this task in particular just doesn't work properly
in a namespaced context. Can any ant experts comment on that?

> Finally, theres the matter of specifying a JVM. Other java/javac
> tasks allow you to specify an executable (javac)/jvm (java) to use
> when executing the task. I cant find anything in the documentation
> that reveals a way to do this with the Jasper tasks. Can the Jasper
> tasks ONLY run in the same JVM as Ant?

Obviously, you can compile the .java files that the precompiler
produces by separating the translation (.jsp -> .java) and compilation
(.java -> .class) into two separate steps (where the latter is
<javac>, which can be customized in the way you describe). So, do you
mean that you want to choose the JVM that is used when actually
performing the translation step?

It looks like JspC itself has a getFork() method that unconditionally
returns false. I'm not sure /why/, but this task wasn't expected to be
able to run in a forked context.

Without knowing the reasons for the above, I would say that in general
running in a forked context shouldn't be forbidden - rather it should
be expected of a nice player in the ant ecosystem. It seems like
generating a command-line from all the options taken from the ant
attributes and stuff shouldn't be in impossible feat.

Can you file an enhancement in bugzilla for both of these issues?

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk96DJgACgkQ9CaO5/Lv0PCTwgCfc00h+M/g0IEK+7oaxQ8pq2yc
/C8AoKC9kMhWLlsCt/rsJFXzmpmf8SrW
=qK/l
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233277-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  2 20:34:55 2012
Return-Path: <users-return-233277-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C31D891FA
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  2 Apr 2012 20:34:55 +0000 (UTC)
Received: (qmail 83944 invoked by uid 500); 2 Apr 2012 20:34:52 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 83760 invoked by uid 500); 2 Apr 2012 20:34:52 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 83750 invoked by uid 99); 2 Apr 2012 20:34:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 20:34:52 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [76.96.62.80] (HELO qmta08.westchester.pa.mail.comcast.net) (76.96.62.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 20:34:44 +0000
Received: from omta18.westchester.pa.mail.comcast.net ([76.96.62.90])
	by qmta08.westchester.pa.mail.comcast.net with comcast
	id t6ju1i0011wpRvQ588aR74; Mon, 02 Apr 2012 20:34:25 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta18.westchester.pa.mail.comcast.net with comcast
	id t8aQ1i02i38FjT13e8aQ9n; Mon, 02 Apr 2012 20:34:25 +0000
Message-ID: <4F7A0D67.9020103@christopherschultz.net>
Date: Mon, 02 Apr 2012 16:34:47 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Implementing mod_headers for response in Tomcat7
References: <CB9E4BAB.1E07E%teppei@silk.co.jp>
In-Reply-To: <CB9E4BAB.1E07E%teppei@silk.co.jp>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Teppei,

On 4/1/12 5:15 AM, Teppei Yamada wrote:
> I wanted to write something similar to apache httpd's mod_headers
> so I read through Tomcat7.0.26 source code. Then I realized that
> that could not be achieved without modifying coyote's 
> Abstract(Http11|Ajp)Processor.prepareResponse(). That can never be
> done by Valve because some HTTP headers are added just in (or
> SessionCookie is right before) prepareResponse function and it 
> immediately writes headers to OutputBuffer and set committed.

Most headers in Tomcat are added by components other than the
Processor and/or Connector. If you insert a Valve into the valve
chain, you can often intercept and/or re-write the headers at will.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk96DWcACgkQ9CaO5/Lv0PAnlQCglCHz3FTA1Iutre/55T783Sbs
VQEAnR5chWgd7EUT3BoMWHc1r1Vz4kkT
=ocz9
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233278-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  2 20:40:24 2012
Return-Path: <users-return-233278-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 820F19595
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  2 Apr 2012 20:40:24 +0000 (UTC)
Received: (qmail 1339 invoked by uid 500); 2 Apr 2012 20:40:21 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 1282 invoked by uid 500); 2 Apr 2012 20:40:21 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 1273 invoked by uid 99); 2 Apr 2012 20:40:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 20:40:21 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [76.96.62.24] (HELO qmta01.westchester.pa.mail.comcast.net) (76.96.62.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 20:40:14 +0000
Received: from omta07.westchester.pa.mail.comcast.net ([76.96.62.59])
	by qmta01.westchester.pa.mail.comcast.net with comcast
	id t8SB1i0091GhbT8518futM; Mon, 02 Apr 2012 20:39:54 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta07.westchester.pa.mail.comcast.net with comcast
	id t8fu1i00i38FjT13T8futb; Mon, 02 Apr 2012 20:39:54 +0000
Message-ID: <4F7A0EB1.7040603@christopherschultz.net>
Date: Mon, 02 Apr 2012 16:40:17 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: [OT] Deleting URLClassloader Cached Jars/Classes
References: <4F79EA7F.7050501@cs.tcd.ie>
In-Reply-To: <4F79EA7F.7050501@cs.tcd.ie>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Peter,

On 4/2/12 2:05 PM, Peter Lavin wrote:
> this may be a general Java question or their may be a specific
> answer related to Tomcat.

This is unrelated to Tomcat, since you are using java.net.URLClassLoader.

> I am running a simple webservice which loads classes using a 
> URLClassloader...
> 
> // start of code snippet ClassLoader previous =
> Thread.currentThread() .getContextClassLoader(); URLClassLoader
> loader = new URLClassLoader(new URL[] { new
> URL("http://localhost/classes/")}, previous);
> 
> 
> String className = "common.MyClassToBeLoaded"; Class<?> ho =
> loader.loadClass(className); // end
> 
> This ok, but when I edit and recompile a class which is loaded,
> the changes to MyClassToBeLoaded.java are not reflected in the
> webservice.

That's the way most ClassLoaders work: they are designed to cache
classes so that performance doesn't totally suck. Imagine if the JVM
kept having to check to see if java.lang.Object had been updated...

> Is there a way to empty this cache, or disable caching all
> together?

Not without implementing your own ClassLoader. You could read the code
for WebappClassLoader to see how it's done in there.

> There are some suggestions out there but none specific to Tomcat.

That's because this can be done without regard to Tomcat's operation.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk96DrEACgkQ9CaO5/Lv0PBqMQCeLuGqS/3EF3475s7mavDRK/BQ
D9oAnAyjAtQYj89s6TM+iDPSIbVk0euN
=+2b2
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233279-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  2 20:43:18 2012
Return-Path: <users-return-233279-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B5F9F971B
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  2 Apr 2012 20:43:18 +0000 (UTC)
Received: (qmail 17864 invoked by uid 500); 2 Apr 2012 20:43:15 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 17790 invoked by uid 500); 2 Apr 2012 20:43:15 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 17777 invoked by uid 99); 2 Apr 2012 20:43:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 20:43:15 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [76.96.62.17] (HELO qmta10.westchester.pa.mail.comcast.net) (76.96.62.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 20:43:08 +0000
Received: from omta13.westchester.pa.mail.comcast.net ([76.96.62.52])
	by qmta10.westchester.pa.mail.comcast.net with comcast
	id t8f41i00917dt5G5A8ipbc; Mon, 02 Apr 2012 20:42:49 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta13.westchester.pa.mail.comcast.net with comcast
	id t8io1i02W38FjT13Z8ioGr; Mon, 02 Apr 2012 20:42:49 +0000
Message-ID: <4F7A0F60.8080008@christopherschultz.net>
Date: Mon, 02 Apr 2012 16:43:12 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Running Tomcat as a Standalone desktop Application
References: <1333120922912-4671621.post@n6.nabble.com> <4F760DFA.20307@pidster.com> <1333366652527-4678609.post@n6.nabble.com> <4F799A0B.6000100@pidster.com> <4F79A062.8050100@ice-sa.com> <1333377032079-4679081.post@n6.nabble.com>
In-Reply-To: <1333377032079-4679081.post@n6.nabble.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Dave,

On 4/2/12 10:30 AM, DaveNoth wrote:
> We have a new user base that requires our application to run as a 
> stand-alone, disconnected App. Today our App is an Online Web
> Application running under Websphere. I was also looking to see if
> anyone is currently deploying a Web Application (Servlet/JSP)
> running on Tomcat as a *stand-alone,* *disconnect* application.
> Our goal is to use our same Java Web application code base for
> Online connected users as well as disconnected stand-alone users.
> If no one out there is doing this, I am going to infer it's not a
> very good idea and look into a rewrite of the code to work under 
> windows as a desktop app.

I think your biggest problem is going to be modifying the app itself
so that it can report whatever data is required back to "home base"
when the Internet connection resumes.

Or is this something that's intended to remain offline for its whole
lifetime?

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk96D18ACgkQ9CaO5/Lv0PBF1wCfZYZkoJhn+MEUTEABOXcBb8KA
zIwAnRx9GMdvr2c0eyXBXG6p8RtAy9Yh
=2GWt
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233280-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  2 20:54:15 2012
Return-Path: <users-return-233280-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BB11E9019
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  2 Apr 2012 20:54:15 +0000 (UTC)
Received: (qmail 58984 invoked by uid 500); 2 Apr 2012 20:54:12 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 58779 invoked by uid 500); 2 Apr 2012 20:54:12 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 58770 invoked by uid 99); 2 Apr 2012 20:54:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 20:54:12 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [76.96.62.24] (HELO qmta01.westchester.pa.mail.comcast.net) (76.96.62.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 20:54:04 +0000
Received: from omta12.westchester.pa.mail.comcast.net ([76.96.62.44])
	by qmta01.westchester.pa.mail.comcast.net with comcast
	id t8Jt1i00L0xGWP8518tkRS; Mon, 02 Apr 2012 20:53:44 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta12.westchester.pa.mail.comcast.net with comcast
	id t8tk1i01U38FjT13Y8tklZ; Mon, 02 Apr 2012 20:53:44 +0000
Message-ID: <4F7A11D7.80205@christopherschultz.net>
Date: Mon, 02 Apr 2012 16:53:43 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Tomcat6 - Context - aliases
References: <1333360773430-4678428.post@n6.nabble.com> <CABzHfVn5uKEF9RKGUkqGGq56DLNFhRFm6Y_PUSUq--x3=yMpvw@mail.gmail.com> <1333363527730-4678513.post@n6.nabble.com>
In-Reply-To: <1333363527730-4678513.post@n6.nabble.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

La,

On 4/2/12 6:45 AM, La Massiot wrote:
> Konstantin Kolinko wrote
>> Install Tomcat 7. Read RUNNING.txt for a start.
> 
> I prefer not to. As I wrote, "Tomcat7" is not packaged yet in
> "Debian" stable "Squeeze".

Nor will it. Debian has a fairly conservative release strategy, and I
suspect that Squeeze will *never* have a version of Tomcat 7 available
to the package manager.

> For security reasons, I want to use only stable, packaged and
> up-to-date OS and software versions.

You will probably have to upgrade to Wheezy (currently "testing")
which currently has Tomcat 7.0.26-1 (the "-1" is Debian's additional
patch level version number).

Note that Debian isn't always so fast to back-port security patches so
clinging to the Debian package manager doesn't necessarily make you
more secure... it just makes your security "someone else's problem"
which might be a mistake.

> I there any other workaround... I mean... I guess even before
> "Tomcat7", people needed to declare such "aliases".

You could deploy multiple webapps to get the same behavior as
'aliases'. Or, you could merge your directories together as deploy-time.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk96EdcACgkQ9CaO5/Lv0PCtyQCfe2FdMDFI/E2741bvtjX+PmI9
KOcAn16rx4b2DHGwwwU16jIJ9B5B/TR2
=O/i8
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233281-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  2 21:24:54 2012
Return-Path: <users-return-233281-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 26DA79ED5
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  2 Apr 2012 21:24:54 +0000 (UTC)
Received: (qmail 66099 invoked by uid 500); 2 Apr 2012 21:24:50 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 66007 invoked by uid 500); 2 Apr 2012 21:24:50 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 65998 invoked by uid 99); 2 Apr 2012 21:24:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 21:24:50 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of knst.kolinko@gmail.com designates 209.85.161.173 as permitted sender)
Received: from [209.85.161.173] (HELO mail-gx0-f173.google.com) (209.85.161.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 21:24:44 +0000
Received: by ggnp2 with SMTP id p2so1821102ggn.18
        for <users@tomcat.apache.org>; Mon, 02 Apr 2012 14:24:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=/RjTHDrdtVQxIAb0M5l0MLPAQjb9sBeHo8q20T6s8xo=;
        b=mkynLXny6Ze/W+WcM52oCO8jlC28V6O7Jf/pG/8Qso3OXDf7jWrbwpku93F86rA8FP
         EVyZv6syWvrL/br2IcZQ5WAZ+H33iMX6DQEuBTxTIyfWqMf6V/4BixpDmWW0sdaa6aac
         tbto10ILD+m5WcPuhbF2rsry/K7e0kvK+owkk+DjoLCq7/Zp6SRj8MJhnksfBTj0Xu5y
         s/uqpEFtypEHAgLNXgAXEJcdcmJux3NezsKsOA0iUIwfxzt9KM99xnjJZdOMP8D0i3Oy
         NvMBDfTajYF1Wxujd9RVSi+4E7gYAJkeMyhi0KeIsmmzS72UxV+axC5mDoPuwj9jADlE
         RsPg==
MIME-Version: 1.0
Received: by 10.100.245.10 with SMTP id s10mr2640118anh.65.1333401863432; Mon,
 02 Apr 2012 14:24:23 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Mon, 2 Apr 2012 14:24:23 -0700 (PDT)
In-Reply-To: <4F7A0C98.9080101@christopherschultz.net>
References: <00c82ddd5a8b1fb9cb75b0c98b39598d@mail.gmail.com>
	<4F7A0C98.9080101@christopherschultz.net>
Date: Tue, 3 Apr 2012 01:24:23 +0400
Message-ID: <CABzHfVks=RJKMUjtSAm815EmPJp+wDd0K1y55k4Jsvd5vn99Rg@mail.gmail.com>
Subject: Re: Ant Tasks Question
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable

2012/4/3 Christopher Schultz <chris@christopherschultz.net>:
>
> On 3/29/12 10:07 PM, Nick Williams wrote:
>> This works great for list, deploy, undeploy, stop, start, etc. All
>> of those tasks work. But the jasper/jasper2 tasks are weird. They
>> silently do nothing.
>
> Hmm. I've been playing around with the JspC intermittently for about a
> year, now, and I've noticed that the ant-i-fication of the JspC
> compiler seems to be a bit of an afterthought. For instance, the class
> that implements it isn't even called [something]Task.java.
>
> It's possible that this task in particular just doesn't work properly
> in a namespaced context. Can any ant experts comment on that?
>

Who cares how it is named?  There are hardly any built-in Ant tasks
that are named as *Task. See o.a.tools.ant.taskdefs package.


I think you just cannot load both TC6 and TC7 implementations at the
same time into the same classloader.

Either one implementation or the other should win (or you would just
get a mess).



>> Finally, there=92s the matter of specifying a JVM. Other java/javac
>> tasks allow you to specify an executable (javac)/jvm (java) to use
>> when executing the task. I can=92t find anything in the documentation
>> that reveals a way to do this with the Jasper tasks. Can the Jasper
>> tasks ONLY run in the same JVM as Ant?
>
> Obviously, you can compile the .java files that the precompiler
> produces by separating the translation (.jsp -> .java) and compilation
> (.java -> .class) into two separate steps (where the latter is
> <javac>, which can be customized in the way you describe). So, do you
> mean that you want to choose the JVM that is used when actually
> performing the translation step?
>
> It looks like JspC itself has a getFork() method that unconditionally
> returns false. I'm not sure /why/, but this task wasn't expected to be
> able to run in a forked context.
>
> Without knowing the reasons for the above, I would say that in general
> running in a forked context shouldn't be forbidden - rather it should
> be expected of a nice player in the ant ecosystem. It seems like
> generating a command-line from all the options taken from the ant
> attributes and stuff shouldn't be in impossible feat.
>
> Can you file an enhancement in bugzilla for both of these issues?

Let's discuss first.
Filing something is useless if it is loosely specified and if there is
little community interest in it.

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233282-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  2 21:33:56 2012
Return-Path: <users-return-233282-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 26DEE916E
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  2 Apr 2012 21:33:56 +0000 (UTC)
Received: (qmail 5628 invoked by uid 500); 2 Apr 2012 21:33:52 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 5545 invoked by uid 500); 2 Apr 2012 21:33:52 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 5536 invoked by uid 99); 2 Apr 2012 21:33:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 21:33:52 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of knst.kolinko@gmail.com designates 209.85.160.173 as permitted sender)
Received: from [209.85.160.173] (HELO mail-gy0-f173.google.com) (209.85.160.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 21:33:46 +0000
Received: by ghrr14 with SMTP id r14so1831520ghr.18
        for <users@tomcat.apache.org>; Mon, 02 Apr 2012 14:33:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=mtZEAWNBoVMlGx3yCjle/WxpE3sEj+Y4RLO4LKhYacM=;
        b=Lg0KnxS1pZ06qbbxTuge+Q7xbVhTS8U5fJfKmCVotchfWM1e4/BtD8Mh6DnoS/YdGm
         rLm+PE/DuYYyODU9QU/SDlAXIZoREv9JaU2E+lkuLByw0B33SwCdfV3W7P2kVDjWchC6
         OZKNfRGuRF1NxSXP2+raGsNKrSPOewUQA0ynci2KlnWYpJ9m3Cq6Udw3iQUif1h3tkQD
         +3r/hp5ONy1fRAKbl2qN+jdlbY2O2xjPznFEuSTISpIcmAIdspuY7L3rRGoPvGeJ81zD
         alufePaDwmgdYT728UpevwvCELZkCc4hiza+7KaNl/H4OuFlImxHEP032Q6vqUkMCeD9
         OCXQ==
MIME-Version: 1.0
Received: by 10.236.109.198 with SMTP id s46mr8581085yhg.43.1333402405796;
 Mon, 02 Apr 2012 14:33:25 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Mon, 2 Apr 2012 14:33:25 -0700 (PDT)
In-Reply-To: <4F7A0EB1.7040603@christopherschultz.net>
References: <4F79EA7F.7050501@cs.tcd.ie>
	<4F7A0EB1.7040603@christopherschultz.net>
Date: Tue, 3 Apr 2012 01:33:25 +0400
Message-ID: <CABzHfVk_CR74tt-v17rZpJDdLPcD=uOuXuHZG7zZ9_ihQuCq4g@mail.gmail.com>
Subject: Re: [OT] Deleting URLClassloader Cached Jars/Classes
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1

2012/4/3 Christopher Schultz <chris@christopherschultz.net>:
>
>> Is there a way to empty this cache, or disable caching all
>> together?
>
> Not without implementing your own ClassLoader. You could read the code
> for WebappClassLoader to see how it's done in there.
>

+1. You need your own class loader.

I would say org.apache.jasper.servlet.JasperLoader.  It is classloader
that is used to load JSP pages.  If the page is updated you just throw
classloader instance away together with the classes that it loaded.



In recent JVMs there is also an option to reload a class in memory
(aka hot-swap). That is used by debuggers, when you debug your program
in an IDE and want to continue with updated (edited) version of the
class without restarting all over.

It is not something that you would use from inside the JVM though.

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233283-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  2 21:44:19 2012
Return-Path: <users-return-233283-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5D4FD9A7B
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  2 Apr 2012 21:44:19 +0000 (UTC)
Received: (qmail 48141 invoked by uid 500); 2 Apr 2012 21:44:16 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 48027 invoked by uid 500); 2 Apr 2012 21:44:15 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 48018 invoked by uid 99); 2 Apr 2012 21:44:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 21:44:15 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED
X-Spam-Check-By: apache.org
Received-SPF: unknown ~allmx (nike.apache.org: encountered unrecognized mechanism during SPF processing of domain of nicholas.williams@puresafety.com)
Received: from [74.125.149.149] (HELO na3sys009aog123.obsmtp.com) (74.125.149.149)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 02 Apr 2012 21:44:08 +0000
Received: from mail-vb0-f47.google.com ([209.85.212.47]) (using TLSv1) by na3sys009aob123.postini.com ([74.125.148.12]) with SMTP
	ID DSNKT3odkrrmsHk/vtM2pkQdtaz6T12+1iLk@postini.com; Mon, 02 Apr 2012 14:43:47 PDT
Received: by vbbfr13 with SMTP id fr13so2214228vbb.6
        for <users@tomcat.apache.org>; Mon, 02 Apr 2012 14:43:45 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=from:references:in-reply-to:mime-version:x-mailer:thread-index:date
         :message-id:subject:to:content-type:content-transfer-encoding
         :x-gm-message-state;
        bh=uqdjJxCvweyV2ALzhIxuXOlQD9x8TnLII0ELqzg/DP8=;
        b=RKNYl5vQ4Lrb9ooyBIMcYsyyHI5OpC3CyA0YzGV6KiMwh+z6BM75otx7Sq//tFxMtB
         Qu2JFmUuC/uPEYHp5Og2JIwfEwqo8zVbx3zBqSNkyUEuCHIJa3Dd9bylJCwMfvpbAN3o
         kdu+UKygvOPWWjPi6f21A+t2nnh8PerL1PK7AlFNoQ7nJaYtY8J9n1ua6GxWYhy9/HJk
         /S0+2W2VXPeB16UUVFS6qnbwPDuZtlTeZV2mvynu2LxLXjkcTwt2UOwmyZquTT6tKzs8
         uESDK1+1FtZnz3anufZlwByPqixFLKD2snnvJf5AJvoaSevrMPVsrlDI7AXUrQmYe6JN
         L5IA==
Received: by 10.52.93.74 with SMTP id cs10mr3855466vdb.42.1333403025820; Mon,
 02 Apr 2012 14:43:45 -0700 (PDT)
From: Nick Williams <nicholas.williams@puresafety.com>
References: <00c82ddd5a8b1fb9cb75b0c98b39598d@mail.gmail.com> <4F7A0C98.9080101@christopherschultz.net>
In-Reply-To: <4F7A0C98.9080101@christopherschultz.net>
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Ac0RD5VDEhJS6O38QuyzA1Hwd95vZQACFq/A
Date: Mon, 2 Apr 2012 16:43:18 -0500
Message-ID: <a5e99375feec6f40641a51062ebcc411@mail.gmail.com>
Subject: RE: Ant Tasks Question
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable
X-Gm-Message-State: ALoCoQn3y4F6LLwNuGgvBMEmrYfkrqLcQKmZ+HJw8Xch2rs9MBjOrBsg9cyRvT6j/DxKf+y+rsis

-----Original Message-----
From: Christopher Schultz [mailto:chris@christopherschultz.net]
Sent: Monday, April 02, 2012 3:31 PM
To: Tomcat Users List
Subject: Re: Ant Tasks Question

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Nick,

On 3/29/12 10:07 PM, Nick Williams wrote:
> This works great for list, deploy, undeploy, stop, start, etc. All of
> those tasks work. But the jasper/jasper2 tasks are weird. They
> silently do nothing.

Hmm. I've been playing around with the JspC intermittently for about a year=
,
now, and I've noticed that the ant-i-fication of the JspC compiler seems to
be a bit of an afterthought. For instance, the class that implements it
isn't even called [something]Task.java.

It's possible that this task in particular just doesn't work properly in a
namespaced context. Can any ant experts comment on that?

> Finally, there=92s the matter of specifying a JVM. Other java/javac
> tasks allow you to specify an executable (javac)/jvm (java) to use
> when executing the task. I can=92t find anything in the documentation
> that reveals a way to do this with the Jasper tasks. Can the Jasper
> tasks ONLY run in the same JVM as Ant?

Obviously, you can compile the .java files that the precompiler produces by
separating the translation (.jsp -> .java) and compilation (.java -> .class=
)
into two separate steps (where the latter is <javac>, which can be
customized in the way you describe). So, do you mean that you want to choos=
e
the JVM that is used when actually performing the translation step?

It looks like JspC itself has a getFork() method that unconditionally
returns false. I'm not sure /why/, but this task wasn't expected to be able
to run in a forked context.

Without knowing the reasons for the above, I would say that in general
running in a forked context shouldn't be forbidden - rather it should be
expected of a nice player in the ant ecosystem. It seems like generating a
command-line from all the options taken from the ant attributes and stuff
shouldn't be in impossible feat.

Can you file an enhancement in bugzilla for both of these issues?

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk96DJgACgkQ9CaO5/Lv0PCTwgCfc00h+M/g0IEK+7oaxQ8pq2yc
/C8AoKC9kMhWLlsCt/rsJFXzmpmf8SrW
=3DqK/l
-----END PGP SIGNATURE-----

---------------------------------------------------------------------


As for the ant-i-fication of the JspC compiler, I, too get the impression
that it was rather an afterthought. However, it is not necessary or even
that common for tasks to be called *Task, as Konstantin pointed out. Most o=
f
them /aren't/ named *Task. However, if you are basing your comment on
Tomcat's naming standard for Ant tasks, then you do have a valid point. Jsp=
C
is the only Tomcat task that isn't named *Task. For that matter, it's the
only Tomcat task that isn't in o.a.catalina.ant.

I'm aware that I can translate and compile as separate tasks, but that's no=
t
what I was looking for. I actually DO want to translate and compile with th=
e
same task, because I want the Eclipse compiler shipped with Tomcat to be
used for compiling the JSPs. But your comment helps me out in expressing my
desire: I feel like it should be able to fork and use whatever JVM I specif=
y
for executing the JspC task, whether I'm using JspC for translation and
compilation or just translation.

I agree that fork support should be expected of a nice player in the Ant
ecosystem.

Maybe what we really need, instead of attempting to retrofit JspC to be mor=
e
Task-y, is add a new Task to o.a.catalina.ant (JasperTask? JspCompileTask?)
and trying to follow some better practices with the new practice. What are
the community thoughts on this? I can see both upsides and downsides to
doing this.

I'll file enhancement requests in Bugzilla later today or tomorrow for the
namespace and forking issues.

Thanks,

Nick

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233284-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  2 21:51:14 2012
Return-Path: <users-return-233284-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6CD479FCD
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  2 Apr 2012 21:51:14 +0000 (UTC)
Received: (qmail 77085 invoked by uid 500); 2 Apr 2012 21:51:11 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 76872 invoked by uid 500); 2 Apr 2012 21:51:11 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 76863 invoked by uid 99); 2 Apr 2012 21:51:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 21:51:10 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED
X-Spam-Check-By: apache.org
Received-SPF: unknown ~allmx (athena.apache.org: encountered unrecognized mechanism during SPF processing of domain of nicholas.williams@puresafety.com)
Received: from [74.125.149.145] (HELO na3sys009aog121.obsmtp.com) (74.125.149.145)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 02 Apr 2012 21:51:04 +0000
Received: from mail-vb0-f42.google.com ([209.85.212.42]) (using TLSv1) by na3sys009aob121.postini.com ([74.125.148.12]) with SMTP
	ID DSNKT3ofM41nhlCGFYCYVGWTlJfKqommsIWh@postini.com; Mon, 02 Apr 2012 14:50:44 PDT
Received: by vbjk13 with SMTP id k13so2126473vbj.15
        for <users@tomcat.apache.org>; Mon, 02 Apr 2012 14:50:43 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=from:references:in-reply-to:mime-version:x-mailer:thread-index:date
         :message-id:subject:to:content-type:x-gm-message-state;
        bh=ApSyZ+OA0av6FFOv61miY6ZAt3+yvx5lZy8/SNp050s=;
        b=kflwJroL/2yRluqwR9hHa5s5zVVPPGfMvHiYdxKg7pXGpGiXV0UeWCwVMUBnIW0/K5
         azZswVcwmiWpPqXo/cIJjM7T/AK9XLuDKKmb8To6u+48yFdMJoeG/Ol6sfh65HCL+jB2
         IVTjuUiHudh/nnyNCZYpBdORB8gzJXaGkHSpYGygj642nlkPY3QwmvIvHAeoIFKMyzJX
         jbIgUDlcvFUAmBSzsICeY9DAA9TqnYb0PKZc0QAWVL1tBu9QpUhQScBQvFeZxtZYclTW
         BTLfzh5NgQpSBArM6zuCfIsvWno1b/gPLsHq6D6skcPPpE3jFGlhf6oC48mc7BceZvWv
         kLOA==
Received: by 10.52.178.129 with SMTP id cy1mr3872834vdc.8.1333403443101; Mon,
 02 Apr 2012 14:50:43 -0700 (PDT)
From: Nick Williams <nicholas.williams@puresafety.com>
References: <00c82ddd5a8b1fb9cb75b0c98b39598d@mail.gmail.com>
	<4F7A0C98.9080101@christopherschultz.net> <CABzHfVks=RJKMUjtSAm815EmPJp+wDd0K1y55k4Jsvd5vn99Rg@mail.gmail.com>
In-Reply-To: <CABzHfVks=RJKMUjtSAm815EmPJp+wDd0K1y55k4Jsvd5vn99Rg@mail.gmail.com>
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Ac0RFwr+rbhByrTFSgqODa141BCHGQAApUqA
Date: Mon, 2 Apr 2012 16:50:16 -0500
Message-ID: <a8768acb2a172e897c470d568ecd8ade@mail.gmail.com>
Subject: RE: Ant Tasks Question
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQkhGJlKgX5jGljFPygkOWsuenzMO+jevUZ/vpAeL5YM2MDKBNDngt2PVYDkJlV1NIOKUzrT
X-Virus-Checked: Checked by ClamAV on apache.org

-----Original Message-----
From: Konstantin Kolinko [mailto:knst.kolinko@gmail.com]
Sent: Monday, April 02, 2012 4:24 PM
To: Tomcat Users List
Subject: Re: Ant Tasks Question

2012/4/3 Christopher Schultz <chris@christopherschultz.net>:
>
> On 3/29/12 10:07 PM, Nick Williams wrote:
>> This works great for list, deploy, undeploy, stop, start, etc. All of
>> those tasks work. But the jasper/jasper2 tasks are weird. They
>> silently do nothing.
>
> Hmm. I've been playing around with the JspC intermittently for about a
> year, now, and I've noticed that the ant-i-fication of the JspC
> compiler seems to be a bit of an afterthought. For instance, the class
> that implements it isn't even called [something]Task.java.
>
> It's possible that this task in particular just doesn't work properly
> in a namespaced context. Can any ant experts comment on that?
>

Who cares how it is named?  There are hardly any built-in Ant tasks that
are named as *Task. See o.a.tools.ant.taskdefs package.


I think you just cannot load both TC6 and TC7 implementations at the same
time into the same classloader.

Either one implementation or the other should win (or you would just get a
mess).



>> Finally, there's the matter of specifying a JVM. Other java/javac
>> tasks allow you to specify an executable (javac)/jvm (java) to use
>> when executing the task. I can't find anything in the documentation
>> that reveals a way to do this with the Jasper tasks. Can the Jasper
>> tasks ONLY run in the same JVM as Ant?
>
> Obviously, you can compile the .java files that the precompiler
> produces by separating the translation (.jsp -> .java) and compilation
> (.java -> .class) into two separate steps (where the latter is
> <javac>, which can be customized in the way you describe). So, do you
> mean that you want to choose the JVM that is used when actually
> performing the translation step?
>
> It looks like JspC itself has a getFork() method that unconditionally
> returns false. I'm not sure /why/, but this task wasn't expected to be
> able to run in a forked context.
>
> Without knowing the reasons for the above, I would say that in general
> running in a forked context shouldn't be forbidden - rather it should
> be expected of a nice player in the ant ecosystem. It seems like
> generating a command-line from all the options taken from the ant
> attributes and stuff shouldn't be in impossible feat.
>
> Can you file an enhancement in bugzilla for both of these issues?

Let's discuss first.
Filing something is useless if it is loosely specified and if there is
little community interest in it.

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------


The point of namespaces (in Ant specifically and XML in general) /is/ to
avoid naming conflicts with like-named tasks. I successfully use
namespaces for accessing all of the other tasks for Tomcat 6 and 7 without
one or the other "winning"; there's no reason I shouldn't be able to do
the same with the JspC task.

For that matter, loading them both isn't even the issue, it appears. If I
remove the "tomcat6" namespace from my Ant file and /only/ have the
"tomcat7" namespace, "tomcat7:jasper" still doesn't work. Furthermore, if
I declare explicit tomcat6-jsp-compile and tomcat7-jsp-compile tasks in
the same Ant task, they /do/ both work perfectly and independently without
either of them "winning". So loading them both in the same Ant task isn't
the issue. Calling it from the namespace appears to be. Which is very odd.

I see no issues with discussing it a little more before filing Bugzillas.
However, I would point out that the Bugzilla enhancement request is
/exactly/ where you want to work on the specifications for the
enhancement, IMO. It provides a perfect repository for the discussion on
the specification for a particular issue.

Nick

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233285-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  2 22:16:11 2012
Return-Path: <users-return-233285-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 505B99E6E
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  2 Apr 2012 22:16:11 +0000 (UTC)
Received: (qmail 55312 invoked by uid 500); 2 Apr 2012 22:16:08 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 55222 invoked by uid 500); 2 Apr 2012 22:16:08 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 55213 invoked by uid 99); 2 Apr 2012 22:16:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 22:16:07 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of knst.kolinko@gmail.com designates 209.85.160.173 as permitted sender)
Received: from [209.85.160.173] (HELO mail-gy0-f173.google.com) (209.85.160.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 22:16:01 +0000
Received: by ghrr14 with SMTP id r14so1849066ghr.18
        for <users@tomcat.apache.org>; Mon, 02 Apr 2012 15:15:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=t0qqxen4KRAmPsVn87I/NqzqZcc9YUxs1jQId7Ye+kg=;
        b=OwIivMS6BQBsK26yD+3RX4RoeeFl0lFJkOP2UnHBTbJRMglyJEwYZX33JVFnteD/Vp
         183MC68GjbZIiASU2JCKowRLI7LTTirkRCAqJy7O92o3ata428DqrDcx/8ls19NeqtZK
         OTFDw+Yll1rIIAnzth2fw5soBI4K8X8oAm1l9W3gnN0M87OGFh+ptmGh2YyoKmWQTl8b
         TOmNGlyo/QZ0u32ML26rGqx+Ps7pJKxqzfyyQWqilJomJ86kQluLVV1/azWIFDsIaBtm
         aBOMhH0aFPdmcfwd8e+/NMj+JgjP5i+gsq04uJedAlSDswyBYcqQ4ZBKFKpIeb5wenO1
         wAmg==
MIME-Version: 1.0
Received: by 10.100.244.26 with SMTP id r26mr2639288anh.53.1333404940654; Mon,
 02 Apr 2012 15:15:40 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Mon, 2 Apr 2012 15:15:40 -0700 (PDT)
In-Reply-To: <a8768acb2a172e897c470d568ecd8ade@mail.gmail.com>
References: <00c82ddd5a8b1fb9cb75b0c98b39598d@mail.gmail.com>
	<4F7A0C98.9080101@christopherschultz.net>
	<CABzHfVks=RJKMUjtSAm815EmPJp+wDd0K1y55k4Jsvd5vn99Rg@mail.gmail.com>
	<a8768acb2a172e897c470d568ecd8ade@mail.gmail.com>
Date: Tue, 3 Apr 2012 02:15:40 +0400
Message-ID: <CABzHfVmeXG9NWtA92ffapkJ+ZgnxdVya9TfTv87RJyzMO91zqw@mail.gmail.com>
Subject: Re: Ant Tasks Question
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1

2012/4/3 Nick Williams <nicholas.williams@puresafety.com>:
>
> The point of namespaces (in Ant specifically and XML in general) /is/ to
> avoid naming conflicts with like-named tasks.

Conflicts in XML file syntax. Is it more than that?  Does Ant use
different class loader instances for each of namespaces? (Can you
confirm?)

With JspC the issue is not the tasks having the same name, but the
classes implementing those tasks having the same name.


> I successfully use
> namespaces for accessing all of the other tasks for Tomcat 6 and 7 without
> one or the other "winning"; there's no reason I shouldn't be able to do
> the same with the JspC task.

Other tasks besides JspC are just HTTP clients to the Manager web
application, that send GET or PUT request to it.
I would say that it does not matter much whether you use Tomcat 6 or
Tomcat 7 implementation of those tasks.

For JspC task it is essential to use specific version of Tomcat,
Moreover, it is essential to use specific minor version x.y.z as you
have on your server, because there is no guaranteed compatibility with
version x.y.w.

>
> I see no issues with discussing it a little more before filing Bugzillas.
> However, I would point out that the Bugzilla enhancement request is
> /exactly/ where you want to work on the specifications for the
> enhancement, IMO. It provides a perfect repository for the discussion on
> the specification for a particular issue.

Bugizilla e-mails go to dev@ list.

1. There are more people on users@ than on dev@,
2. It is easier to discuss on a mailing list, IMHO.
3. You can always add a link to the mailing list thread archive  in
your Bugzilla issue.

Just my opinion. Do as you wish.

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233286-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  2 22:20:46 2012
Return-Path: <users-return-233286-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 976DD92AF
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  2 Apr 2012 22:20:46 +0000 (UTC)
Received: (qmail 70377 invoked by uid 500); 2 Apr 2012 22:20:43 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 70165 invoked by uid 500); 2 Apr 2012 22:20:43 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 70155 invoked by uid 99); 2 Apr 2012 22:20:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 22:20:43 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pid@pidster.com designates 74.125.82.173 as permitted sender)
Received: from [74.125.82.173] (HELO mail-we0-f173.google.com) (74.125.82.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 22:20:35 +0000
Received: by werp12 with SMTP id p12so2754628wer.18
        for <users@tomcat.apache.org>; Mon, 02 Apr 2012 15:20:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type;
        bh=0diz/PC8oURa2LRtBnHVE2fl6eONcbbM9q/HfhSxaOw=;
        b=Ns25ge3kSmIlqez9AcZjIzeTzAHoUDUviKRH0xiabCNCfHcbXczqm4M6emeRsXId3K
         xiVW1RUCa1MJizxNNV5Qrul2V3MJbc/GDtLbjnmN+65r4Q+kyIvMdhwRslcDv83W0j5C
         x+2s2K31XGjJKPiXgOyZZQ6hXX/TSmmj8dbc4=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type:x-gm-message-state;
        bh=0diz/PC8oURa2LRtBnHVE2fl6eONcbbM9q/HfhSxaOw=;
        b=TCtjj70wKj0y9MLsivyS2MdQjpggHVZ7hOUDfI1LC3goFkMpUQRoMwn+mBZ4vH5jnS
         NSrhMVQizsy1Joh8kES6yEg0kmdbdUTMf8Ifhiit7QYpz7gwuKK8yKhd4mfeWaOLKUCB
         f+S2HBBGFJpQuWhSDHqhEeQ3F1UXpDuE/fKcLLSmz9H31OzVoEsIZKapgKLuY2AruGmM
         Kq0Sb6r3LWTJqPbN+gKqqa1j4dC53hHFKx/FGS0B9E/e9kiTKqDgsoh/HUlata3oOkmO
         7UYZ2g80n14oet9QJPgghgU61GTu8i/dBlYe1epLzZ9Q8GQxFOGb4DkcQ0kI1lptF3KA
         u9kA==
Received: by 10.180.8.231 with SMTP id u7mr29197046wia.9.1333405215720;
        Mon, 02 Apr 2012 15:20:15 -0700 (PDT)
Received: from Asura.local (cpc10-lewi14-2-0-cust355.2-4.cable.virginmedia.com. [82.4.249.100])
        by mx.google.com with ESMTPS id o2sm60620479wiv.11.2012.04.02.15.20.12
        (version=SSLv3 cipher=OTHER);
        Mon, 02 Apr 2012 15:20:14 -0700 (PDT)
Message-ID: <4F7A2615.50102@pidster.com>
Date: Mon, 02 Apr 2012 23:20:05 +0100
From: Pid <pid@pidster.com>
Organization: Pidster Inc
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: [OT] Deleting URLClassloader Cached Jars/Classes
References: <4F79EA7F.7050501@cs.tcd.ie> <4F7A0EB1.7040603@christopherschultz.net> <CABzHfVk_CR74tt-v17rZpJDdLPcD=uOuXuHZG7zZ9_ihQuCq4g@mail.gmail.com>
In-Reply-To: <CABzHfVk_CR74tt-v17rZpJDdLPcD=uOuXuHZG7zZ9_ihQuCq4g@mail.gmail.com>
X-Enigmail-Version: 1.4
OpenPGP: id=62590808
Content-Type: multipart/signed; micalg=pgp-sha512;
 protocol="application/pgp-signature";
 boundary="------------enigE9E83B763BAACC29842E885D"
X-Gm-Message-State: ALoCoQlZmWw0L8NE5Hu7W9ylUiKEHHthsRut4fX1/zxYw5yAtX8UQtlyg0cBxVW1r1G8u5zvzbth

--------------enigE9E83B763BAACC29842E885D
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

On 02/04/2012 22:33, Konstantin Kolinko wrote:
> 2012/4/3 Christopher Schultz <chris@christopherschultz.net>:
>>
>>> Is there a way to empty this cache, or disable caching all
>>> together?
>>
>> Not without implementing your own ClassLoader. You could read the code=

>> for WebappClassLoader to see how it's done in there.
>>
>=20
> +1. You need your own class loader.

You would need your own *quite sophisticated* classloader.

This kind of thing is usually achieved with Java Agents that can rewrite
bytecode on the fly, like JavaRebel for example.


p

> I would say org.apache.jasper.servlet.JasperLoader.  It is classloader
> that is used to load JSP pages.  If the page is updated you just throw
> classloader instance away together with the classes that it loaded.
>=20
> In recent JVMs there is also an option to reload a class in memory
> (aka hot-swap). That is used by debuggers, when you debug your program
> in an IDE and want to continue with updated (edited) version of the
> class without restarting all over.
>=20
> It is not something that you would use from inside the JVM though.
>=20
> Best regards,
> Konstantin Kolinko
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>=20


--=20

[key:62590808]


--------------enigE9E83B763BAACC29842E885D
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.18 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iQIcBAEBCgAGBQJPeiYaAAoJEGoM2OGpOvr9azYP/i+XBQlnt22+MgvssYJEG2/3
5VwlT5oj3U6Hiy5nAa66xnSEaglpW7uvcPqG8s9a1+/c8pmBduifdwOBUs2+TLQi
Jtv8sGb9a61XpAWHaM7DtNT2P/hhm1rF3JoNdztU5LnY6h0RZhvA1c4PhEz1bmqC
sHf/UCVsx+0qH5nkBaSjPqWIS0Ad37QbN1tp3T9wFIpiBRJPEdCca3rdqgN0N4l6
q90gIL3pXcweLAiSFteP48Un4HqS8ru5HVovEh4C75B42eve5X9bCigKjocfGkeI
RzckIBn7sTjvbTYwJHIbvJGXyyTfmeqcCQq94CCMc62dCokOJArjdNvvHuIvRcqd
GqFFiTl6wiyiRFxqsbfaDuoC6XEB6VIYGtCaDNu8Q1iBw63osHgxPARHzs+w6pXD
fbccMVrfcUI7fEO1ISex/uSde98xC1ZYRDKzoQsDDkL1BnEPxOd9+j4OYZXprqyb
vXv+jMN5di8uS8pBlU3ZkVShiy8HRl/sJl19by55KXeK2KIcSNySEyiVrurb6vW9
/Qbsi9FlQP50v6UyMsYs1OB9sdtxxTMjOhseCqSyLmN66eQ1CkxA2ToY6vnPQl8e
ulLqs6cGGnEBE8Pe17bosOq9ZoPVV/W/3GSaDiVHNifulvngE84OHiDw8zplzXlA
rerXYTMeTQ7DurNB0+kM
=WcZ1
-----END PGP SIGNATURE-----

--------------enigE9E83B763BAACC29842E885D--

From users-return-233287-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  2 23:21:50 2012
Return-Path: <users-return-233287-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 40D7A9D7F
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  2 Apr 2012 23:21:50 +0000 (UTC)
Received: (qmail 66792 invoked by uid 500); 2 Apr 2012 23:21:45 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 66696 invoked by uid 500); 2 Apr 2012 23:21:45 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 66577 invoked by uid 99); 2 Apr 2012 23:21:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 23:21:45 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of darryl.lewis@unsw.edu.au designates 149.171.97.17 as permitted sender)
Received: from [149.171.97.17] (HELO smtp-dist.unsw.edu.au) (149.171.97.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 23:21:36 +0000
Received: from INFPACM003.services.comms.unsw.edu.au (INFPACM003.services.comms.unsw.edu.au [149.171.193.26])
	by smtp-dist.unsw.edu.au (8.13.6/8.13.6) with ESMTP id q32NKupf010957
	for <users@tomcat.apache.org>; Tue, 3 Apr 2012 09:20:56 +1000 (EST)
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: ApADALkzek+Vq4fskWdsb2JhbABDhVSxN4EBIgEBAQEUEhQnggkBAQEDASMRGjAHBAIBCA0EBAEBAQICBh0DAgICLwEUAQgIAgQIBwQBBxUEh2MFrSmJBoEhgS+IZ3mERzVjBJQMgmaFAYUhh2OBXA
X-IronPort-AV: E=Sophos;i="4.75,359,1330866000"; 
   d="scan'208";a="149055114"
Received: from unknown (HELO INFPWXH001.ad.unsw.edu.au) ([149.171.135.236])
  by INFPACM003.services.comms.unsw.edu.au with ESMTP; 03 Apr 2012 09:15:13 +1000
Received: from INFPWXM005.ad.unsw.edu.au ([169.254.5.216]) by
 INFPWXH001.ad.unsw.edu.au ([149.171.135.236]) with mapi id 14.01.0323.003;
 Tue, 3 Apr 2012 09:20:56 +1000
From: Darryl Lewis <darryl.lewis@unsw.edu.au>
To: Tomcat Users List <users@tomcat.apache.org>
Subject: RE: Bash script for monitoring status of the Tomcat server
Thread-Topic: Bash script for monitoring status of the Tomcat server
Thread-Index: AQHNEQNbpGPT4DWDjUCyfHw5EZ+xI5aHQ+2AgAAF9oCAAOIYEA==
Date: Mon, 2 Apr 2012 23:20:55 +0000
Message-ID: <9BFD8A9280D5F741802A3BA05AFFD87021353B@INFPWXM005.ad.unsw.edu.au>
References: <16157_1333393355_4F79F7CB_16157_14431_1_4F79F7D2.60408@yahoo.es>
 <99C8B2929B39C24493377AC7A121E21FB016BDFD47@USEA-EXCH8.na.uis.unisys.com>
 <4F7A02E3.1060703@christopherschultz.net>
In-Reply-To: <4F7A02E3.1060703@christopherschultz.net>
Accept-Language: en-US, en-AU
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [129.94.41.35]
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0

VHJ5IEphdmFNZWxvZHkuIEl0IGRvZXMgYSBsb3Qgb2YgbW9uaXRvcmluZyBzdHJhaWdodCBvdXQg
b2YgdGhlICdib3gnLg0KRm9yIHRoZXJlLCBpdCBpcyBhIHNtYWxsIHN0ZXAgdG8gdXNlIHdnZXQg
dG8gc2NyZWVuIHNjcmFwZSB2YWx1ZXMgZnJvbSBNZWxvZHkgYW5kIHNlbmQgZW1haWxzIG9uY2Ug
dGhleSBleGNlZWQgYSB0aHJlc2hvbGQuDQoNCi0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQpG
cm9tOiBDaHJpc3RvcGhlciBTY2h1bHR6IFttYWlsdG86Y2hyaXNAY2hyaXN0b3BoZXJzY2h1bHR6
Lm5ldF0gDQpTZW50OiBUdWVzZGF5LCAzIEFwcmlsIDIwMTIgNTo1MCBBTQ0KVG86IFRvbWNhdCBV
c2VycyBMaXN0DQpTdWJqZWN0OiBSZTogQmFzaCBzY3JpcHQgZm9yIG1vbml0b3Jpbmcgc3RhdHVz
IG9mIHRoZSBUb21jYXQgc2VydmVyDQoNCi0tLS0tQkVHSU4gUEdQIFNJR05FRCBNRVNTQUdFLS0t
LS0NCkhhc2g6IFNIQTENCg0KQ2h1Y2ssDQoNCk9uIDQvMi8xMiAzOjI4IFBNLCBDYWxkYXJhbGUs
IENoYXJsZXMgUiB3cm90ZToNCj4+IEZyb206IE1pZ3VlbCBHb256w6FsZXogQ2FzdGHDsW9zDQo+
PiBbbWFpbHRvOm1pZ3VlbF8zX2dvbnphbGV6QHlhaG9vLmVzXSBTdWJqZWN0OiBCYXNoIHNjcmlw
dCBmb3INCj4+IG1vbml0b3Jpbmcgc3RhdHVzIG9mIHRoZSBUb21jYXQgc2VydmVyDQo+IA0KPj4g
SSB3b3VsZCBsaWtlIHRvIHJ1biBhIGJhc2ggc2NyaXB0IHRvIG1vbml0b3IgdGhlc2UgdmFsdWVz
IGFuZA0KPj4gd2FybiBtZSBpZiB0aGUgcmVhY2ggYSBjZXJ0YWluIGxldmVsLiBBbHNvIGEgdG9v
bCB0aGF0IGdlbmVyYXRlcw0KPj4gc29tZSBncmFwaHMgd291bGQgYmUgZ3JlYXQuDQo+IA0KPiBO
b3QgcXVpdGUgc3VyZSBob3cgeW91IGNhbiBwdXQgImJhc2giIGFuZCAiZ3JhcGhzIiB0b2dldGhl
ciwgYnV0DQo+IG5vbmV0aGVsZXNzLi4uDQo+IA0KPiAyKSBVc2Ugd2dldCBvciBjdXJsIHRvIGFj
Y2VzcyBUb21jYXQncyB0ZXh0LW1vZGUgbWFuYWdlciBhcHAgYW5kIA0KPiBwYXJzZSB0aGUgcmVz
dWx0cy4NCg0KKzEgLS0gYW5kIHVzZSB0aGUgSk1YUHJveHlTZXJ2bGV0LCB3aGljaCBsZXRzIHlv
dSBxdWVyeSBzcGVjaWZpYw0KY29tcG9uZW50cyBsaWtlIHRoZSBjb25uZWN0b3JzLiBXZSd2ZSBi
ZWVuIGRvaW5nIHRoaXMgbGF0ZWx5IHRvIGdyZWF0DQpzdWNjZXNzLg0KDQpZb3UgY2FuIHVzZSBh
IHRvb2wgbGlrZSBycmR0b29sIHRvIHN0b3JlIHRoZSBkYXRhIGFuZCBnZW5lcmF0ZQ0KbmljZS1s
b29raW5nIGdyYXBocyBvdmVyIHRpbWUuIFlvdSBjYW4gYWxzbyBlYXNpbHkgdXNlIHRoZSBzYW1l
IGZlZWQNCnRvIGRvIHJlYWwtdGltZSBtb25pdG9yaW5nIHVzaW5nIGEgdG9vbCBsaWtlIE5hZ2lv
cywgSWNoaW5nYSwgZXRjLg0KDQo+IDMpIFVzZSBhIGNvbW1hbmQtbGluZSBKTVggdG9vbCBsaWtl
IGpteHNoDQo+IChodHRwOi8vY29kZS5nb29nbGUuY29tL3Avam14c2gvKSB0byBleHRyYWN0IGlu
Zm9ybWF0aW9uIGFuZCBwYXJzZQ0KPiBvdXQgd2hhdGV2ZXIgeW91IHdhbnQuDQoNCldoaWxlIHRo
aXMgaXMgYSB0ZW1wdGluZyBpZGVhLCB3aGVuIHlvdSBzdGFydCBwcm9iaW5nIG1hbnkgZGlmZmVy
ZW50DQp2YWx1ZXMgdmlhIEpNWCwgeW91J2xsIGZpbmQgdGhhdCBzdGFydGluZyBhIGRvemVuIEpW
TXMgYW5kIGNvbm5lY3RpbmcNCnZpYSBKTVggc3RhcnRzIHRvIHN0cmFpbiB0aGUgc2VydmVyIHVu
bmVjZXNzYXJpbHkuIFRoYXQncyB3aHkgSQ0KcmVjb21tZW5kIHVzaW5nIEpNWFByb3h5U2Vydmxl
dCAtLSB5b3UgZ2V0IHRoZSBwb3dlciBvZiBKTVggd2l0aG91dA0KYWN0dWFsbHkgbWFraW5nIGEg
Sk1YIGNvbm5lY3Rpb24uDQoNCi0gLWNocmlzDQotLS0tLUJFR0lOIFBHUCBTSUdOQVRVUkUtLS0t
LQ0KVmVyc2lvbjogR251UEcvTWFjR1BHMiB2Mi4wLjE3IChEYXJ3aW4pDQpDb21tZW50OiBHUEdU
b29scyAtIGh0dHA6Ly9ncGd0b29scy5vcmcNCkNvbW1lbnQ6IFVzaW5nIEdudVBHIHdpdGggTW96
aWxsYSAtIGh0dHA6Ly9lbmlnbWFpbC5tb3pkZXYub3JnLw0KDQppRVlFQVJFQ0FBWUZBazk2QXVN
QUNna1E5Q2FPNS9MdjBQQU1xd0Nnbk1FZjNHNTR1Rm1FUlkxaC9lekRSaENrDQphS0lBbmliZ3kr
RkpsbzJRY3I4N2lPRTYrNDNFUCtnUg0KPU5JZnMNCi0tLS0tRU5EIFBHUCBTSUdOQVRVUkUtLS0t
LQ0KDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IHVzZXJzLXVuc3Vic2Ny
aWJlQHRvbWNhdC5hcGFjaGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiB1
c2Vycy1oZWxwQHRvbWNhdC5hcGFjaGUub3JnDQoNCg==
DQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IHVzZXJzLXVuc3Vi
c2NyaWJlQHRvbWNhdC5hcGFjaGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1t
YWlsOiB1c2Vycy1oZWxwQHRvbWNhdC5hcGFjaGUub3JnDQoN

From users-return-233288-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  2 23:49:08 2012
Return-Path: <users-return-233288-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2BD9F9872
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  2 Apr 2012 23:49:08 +0000 (UTC)
Received: (qmail 44025 invoked by uid 500); 2 Apr 2012 23:49:04 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 43967 invoked by uid 500); 2 Apr 2012 23:49:04 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 43952 invoked by uid 99); 2 Apr 2012 23:49:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 Apr 2012 23:49:04 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [70.103.173.130] (HELO BANE.quinton.com) (70.103.173.130)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 02 Apr 2012 23:48:55 +0000
Received: from csmail.quinton.com ([10.4.0.20]) by BANE.quinton.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 2 Apr 2012 16:48:32 -0700
Received: from csmail.quinton.com ([10.4.0.20]) by csmail ([10.4.0.20]) with
 mapi; Mon, 2 Apr 2012 16:48:31 -0700
From: Debbie Shapiro <DShapiro@cardiacscience.com>
To: Tomcat Users List <users@tomcat.apache.org>
Date: Mon, 2 Apr 2012 16:48:15 -0700
Subject: Carriage Return being added to Java Options in Tomcat Configuration
 Tomcat 7.0.26
Thread-Topic: Carriage Return being added to Java Options in Tomcat
 Configuration Tomcat 7.0.26
Thread-Index: Ac0RKxKUlhA3a+GmSyqeHUXyco2pSg==
Message-ID: <30E219DE264470478E86828191E9B75105562E5D23@csmail>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: yes
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/mixed;
	boundary="_004_30E219DE264470478E86828191E9B75105562E5D23csmail_"
MIME-Version: 1.0
X-OriginalArrivalTime: 02 Apr 2012 23:48:32.0355 (UTC) FILETIME=[1C87F330:01CD112B]

--_004_30E219DE264470478E86828191E9B75105562E5D23csmail_
Content-Type: multipart/alternative;
	boundary="_000_30E219DE264470478E86828191E9B75105562E5D23csmail_"

--_000_30E219DE264470478E86828191E9B75105562E5D23csmail_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hello -
I'm seeing some strange behavior and I don't quite understand why this keep=
s recurring. In the Java Options on the Java tab of the Tomcat Configuratio=
n, a carriage return keeps being added, even though I am removing it. I hav=
e tried hitting apply and OK and just OK. Doesn't seem to make a difference=
. This extra carriage return seems to be causing errors and not allowing To=
mcat to startup properly. I check the options screen immediately after maki=
ng this change and it is inserted as soon as I hit OK and reopen it.



Please create a HelpStar ticket for any requests for assistance. This will =
help us better track your request.
http://helpstar

Debbie Shapiro
Data Warehouse Manager
Cardiac Science
Office: 425.402.2233

Visit us at www.cardiacscience.com<http://www.cardiacscience.com/>
Suppliers of Cardiac Science, Criticare, Unetixs, Powerheart, Burdick, and =
Quinton products Part of the Opto Circuits Family


--_000_30E219DE264470478E86828191E9B75105562E5D23csmail_
Content-Type: text/html; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:o=3D"urn:schemas-microsoft-com:office:office" xmlns:w=3D"urn:sc=
hemas-microsoft-com:office:word" xmlns:st1=3D"urn:schemas-microsoft-com:off=
ice:smarttags" xmlns=3D"http://www.w3.org/TR/REC-html40">

<head>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; charset=3Dus-ascii"=
>
<meta name=3DGenerator content=3D"Microsoft Word 11 (filtered medium)">
<o:SmartTagType namespaceuri=3D"urn:schemas-microsoft-com:office:smarttags"
 name=3D"PersonName"/>
<!--[if !mso]>
<style>
st1\:*{behavior:url(#default#ieooui) }
</style>
<![endif]-->
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Verdana;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"Arial Narrow";
	panose-1:2 11 6 6 2 2 2 3 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:Arial;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal-compose;
	font-family:Arial;
	color:windowtext;}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in 1.25in 1.0in 1.25in;}
div.Section1
	{page:Section1;}
-->
</style>

</head>

<body lang=3DEN-US link=3Dblue vlink=3Dpurple>

<div class=3DSection1>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span style=3D'font-size:1=
0.0pt'>Hello
&#8211;<o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span style=3D'font-size:1=
0.0pt'>I&#8217;m
seeing some strange behavior and I don&#8217;t quite understand why this ke=
eps
recurring. In the Java Options on the Java tab of the Tomcat Configuration,=
 a
carriage return keeps being added, even though I am removing it. I have tri=
ed
hitting apply and OK and just OK. Doesn&#8217;t seem to make a difference. =
This
extra carriage return seems to be causing errors and not allowing Tomcat to
startup properly. I check the options screen immediately after making this
change and it is inserted as soon as I hit OK and reopen it.<o:p></o:p></sp=
an></font></p>

<p class=3DMsoNormal><font size=3D2 face=3DArial><span style=3D'font-size:1=
0.0pt'><o:p>&nbsp;</o:p></span></font></p>

<p class=3DMsoNormal style=3D'mso-margin-top-alt:auto;mso-margin-bottom-alt=
:auto'><font
size=3D3 face=3DArial><span style=3D'font-size:12.0pt'>&nbsp;<o:p></o:p></s=
pan></font></p>

<p class=3DMsoNormal style=3D'mso-margin-top-alt:auto;mso-margin-bottom-alt=
:auto'><font
size=3D3 face=3DArial><span style=3D'font-size:12.0pt'>&nbsp;<o:p></o:p></s=
pan></font></p>

<p class=3DMsoNormal style=3D'mso-margin-top-alt:auto;mso-margin-bottom-alt=
:auto'><b><font
size=3D1 face=3DVerdana><span style=3D'font-size:9.0pt;font-family:Verdana;
font-weight:bold'>Please create a HelpStar ticket for any requests for
assistance. This will help us better track your request.</span></font></b><=
o:p></o:p></p>

<p class=3DMsoNormal style=3D'mso-margin-top-alt:auto;mso-margin-bottom-alt=
:auto'><b><font
size=3D1 face=3DVerdana><span style=3D'font-size:9.0pt;font-family:Verdana;
font-weight:bold'><a href=3D"http://helpstar" title=3D"blocked::http://help=
star/">http://helpstar</a></span></font></b><o:p></o:p></p>

<p class=3DMsoNormal style=3D'mso-margin-top-alt:auto;mso-margin-bottom-alt=
:auto'><font
size=3D2 face=3D"Arial Narrow"><span style=3D'font-size:10.0pt;font-family:=
"Arial Narrow"'>&nbsp;<o:p></o:p></span></font></p>

<p class=3DMsoNormal><st1:PersonName w:st=3D"on"><b><font size=3D1 face=3DV=
erdana><span
 style=3D'font-size:9.0pt;font-family:Verdana;font-weight:bold'>Debbie Shap=
iro</span></font></b></st1:PersonName><b><font
size=3D1 face=3DVerdana><span style=3D'font-size:9.0pt;font-family:Verdana;
font-weight:bold'>&nbsp;<br>
</span></font></b><i><font size=3D1 color=3D"#ff6600" face=3DVerdana><span
style=3D'font-size:9.0pt;font-family:Verdana;color:#FF6600;font-style:itali=
c'>Data
Warehouse Manager</span></font></i><font size=3D1 face=3DVerdana><span
style=3D'font-size:9.0pt;font-family:Verdana'><o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D1 face=3DVerdana><span style=3D'font-size=
:9.0pt;
font-family:Verdana'>Cardiac Science<o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D1 face=3DVerdana><span style=3D'font-size=
:9.0pt;
font-family:Verdana'>Office: 425.402.2233<o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D1 face=3DVerdana><span style=3D'font-size=
:9.0pt;
font-family:Verdana'><o:p>&nbsp;</o:p></span></font></p>

<p class=3DMsoNormal><font size=3D1 face=3DVerdana><span style=3D'font-size=
:9.0pt;
font-family:Verdana'>Visit us at <a href=3D"http://www.cardiacscience.com/"=
>www.cardiacscience.com</a><o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D1 color=3Dgray face=3DVerdana><span style=
=3D'font-size:
9.0pt;font-family:Verdana;color:gray'>Suppliers of Cardiac Science, Critica=
re,
Unetixs, Powerheart, Burdick, and Quinton products Part of the Opto Circuit=
s
Family<o:p></o:p></span></font></p>

<p class=3DMsoNormal><font size=3D3 face=3DArial><span style=3D'font-size:1=
2.0pt'><o:p>&nbsp;</o:p></span></font></p>

</div>

</body>

</html>

--_000_30E219DE264470478E86828191E9B75105562E5D23csmail_--


--_004_30E219DE264470478E86828191E9B75105562E5D23csmail_
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org
--_004_30E219DE264470478E86828191E9B75105562E5D23csmail_--

From users-return-233289-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr  3 00:03:40 2012
Return-Path: <users-return-233289-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5B3D39E5B
	for <apmail-tomcat-users-archive@www.apache.org>; Tue,  3 Apr 2012 00:03:40 +0000 (UTC)
Received: (qmail 84644 invoked by uid 500); 3 Apr 2012 00:03:37 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 84595 invoked by uid 500); 3 Apr 2012 00:03:37 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 84585 invoked by uid 99); 3 Apr 2012 00:03:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 00:03:37 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [70.103.173.130] (HELO BANE.quinton.com) (70.103.173.130)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 03 Apr 2012 00:03:31 +0000
Received: from csmail.quinton.com ([10.4.0.20]) by BANE.quinton.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 2 Apr 2012 17:03:11 -0700
Received: from csmail.quinton.com ([10.4.0.20]) by csmail ([10.4.0.20]) with
 mapi; Mon, 2 Apr 2012 17:03:10 -0700
From: Debbie Shapiro <DShapiro@cardiacscience.com>
To: Tomcat Users List <users@tomcat.apache.org>
Date: Mon, 2 Apr 2012 17:03:09 -0700
Subject: RE: Carriage Return being added to Java Options in Tomcat
 Configuration Tomcat 7.0.26
Thread-Topic: Carriage Return being added to Java Options in Tomcat
 Configuration Tomcat 7.0.26
Thread-Index: Ac0RK0eUKu4TJH0vT0emmNIp4V6T7wAAHvAw
Message-ID: <30E219DE264470478E86828191E9B75105562E5D29@csmail>
References: <30E219DE264470478E86828191E9B75105562E5D23@csmail>
In-Reply-To: <30E219DE264470478E86828191E9B75105562E5D23@csmail>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_30E219DE264470478E86828191E9B75105562E5D29csmail_"
MIME-Version: 1.0
X-OriginalArrivalTime: 03 Apr 2012 00:03:11.0461 (UTC) FILETIME=[2884E150:01CD112D]
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_30E219DE264470478E86828191E9B75105562E5D29csmail_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I think I found the problem. Somehow it wasn't recognizing my java installa=
tion. It's fixed now, I think. :)



Please create a HelpStar ticket for any requests for assistance. This will =
help us better track your request.
http://helpstar<http://helpstar/>


Debbie Shapiro
Data Warehouse Manager
Cardiac Science
Office: 425.402.2233

Visit us at www.cardiacscience.com<http://www.cardiacscience.com/>
Suppliers of Cardiac Science, Criticare, Unetixs, Powerheart, Burdick, and =
Quinton products Part of the Opto Circuits Family

________________________________
From: Debbie Shapiro [mailto:DShapiro@cardiacscience.com]
Sent: Monday, April 02, 2012 4:48 PM
To: Tomcat Users List
Subject: Carriage Return being added to Java Options in Tomcat Configuratio=
n Tomcat 7.0.26

Hello -
I'm seeing some strange behavior and I don't quite understand why this keep=
s recurring. In the Java Options on the Java tab of the Tomcat Configuratio=
n, a carriage return keeps being added, even though I am removing it. I hav=
e tried hitting apply and OK and just OK. Doesn't seem to make a difference=
. This extra carriage return seems to be causing errors and not allowing To=
mcat to startup properly. I check the options screen immediately after maki=
ng this change and it is inserted as soon as I hit OK and reopen it.



Please create a HelpStar ticket for any requests for assistance. This will =
help us better track your request.
http://helpstar

Debbie Shapiro
Data Warehouse Manager
Cardiac Science
Office: 425.402.2233

Visit us at www.cardiacscience.com<http://www.cardiacscience.com/>
Suppliers of Cardiac Science, Criticare, Unetixs, Powerheart, Burdick, and =
Quinton products Part of the Opto Circuits Family


--_000_30E219DE264470478E86828191E9B75105562E5D29csmail_--

From users-return-233290-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr  3 04:36:57 2012
Return-Path: <users-return-233290-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 45AB89CD1
	for <apmail-tomcat-users-archive@www.apache.org>; Tue,  3 Apr 2012 04:36:57 +0000 (UTC)
Received: (qmail 28513 invoked by uid 500); 3 Apr 2012 04:36:53 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 28275 invoked by uid 500); 3 Apr 2012 04:36:52 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 28235 invoked by uid 99); 3 Apr 2012 04:36:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 04:36:51 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of matt.m.munz@gmail.com designates 209.85.160.45 as permitted sender)
Received: from [209.85.160.45] (HELO mail-pb0-f45.google.com) (209.85.160.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 04:36:45 +0000
Received: by pbcuo5 with SMTP id uo5so5413693pbc.18
        for <users@tomcat.apache.org>; Mon, 02 Apr 2012 21:36:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=RccI+3h2/s6Mm9xamIzTZhiufz0KwQEDbY9tgSP70Gw=;
        b=nzVDpARuqMTZF5QHUq0vegFx7DPQ11z6FuC835t1psrZQ8KjRT/PGD3K+whFQQSizG
         y3sY1hrRYjrhA4ZthbUxZU0hVi8ogvWrgNjgYR6RNJZILuLWjsqCVeI32vdl0VfsXZm5
         Nro5VF9iLs3JWMa7Mvffr6f6gcSC/W3RdIwrjxSQyBLo3fhQ+dnOT4xAEOSOIwXn+ttR
         7hMVlLxCl4SkGO4WejMR0pBuGzNXsIfGRxcPhpO44k7Yw0Aep/WmXT3K740Ns8pdeIyT
         5jEo7vLFvpxPpf6FyRK8mbjWiaJ/v7HrIo2lc4gzyMJDW8ZEZMJc9caBDSFHsE880P1t
         TKSQ==
Received: by 10.68.234.134 with SMTP id ue6mr26343363pbc.14.1333427783748;
        Mon, 02 Apr 2012 21:36:23 -0700 (PDT)
Received: from [10.0.1.15] (adsl-99-102-133-251.dsl.pltn13.sbcglobal.net. [99.102.133.251])
        by mx.google.com with ESMTPS id f8sm15450994pbe.42.2012.04.02.21.36.21
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 02 Apr 2012 21:36:22 -0700 (PDT)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1084)
Subject: Re: Tomcat 7 Maven plugin: deploy fails with tomcatManager status code:401, ReasonPhrase:Unauthorized
From: Matt Munz <matt.m.munz@gmail.com>
In-Reply-To: <CAPoyBqRbT3w_C=3DEomct-hRkKsVpUTBaEd9pjTFn3r=McLMfg@mail.gmail.com>
Date: Mon, 2 Apr 2012 21:36:20 -0700
Content-Transfer-Encoding: quoted-printable
Message-Id: <5E45D237-38F2-473F-A5FB-9D6367F1DDD6@gmail.com>
References: <51200CB4-D325-4019-A12A-5A0FDCC8987E@me.com> <0B75C850-2329-47A0-AEAF-A6B7CC14D35F@gmail.com> <CAPoyBqRbT3w_C=3DEomct-hRkKsVpUTBaEd9pjTFn3r=McLMfg@mail.gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
X-Mailer: Apple Mail (2.1084)

Olivier,

  After switching to 2.0-SNAPSHOT, I am still getting errors :(  First I =
got an error saying that the tomcat7 prefix was not found. [1]  Then I =
tried "mvn  tomcat:deploy -Dusername=3DAdministrator -Dpassword=3Da" and =
I got a 403 response from the manager.

[1]
[ERROR] No plugin found for prefix 'tomcat7' in the current project and =
in the plugin groups [org.apache.maven.plugins, org.codehaus.mojo] =
available from the repositories [local (/Users/mattmunz/.m2/repository), =
central (http://repo1.maven.org/maven2)] -> [Help 1]
[2]
[ERROR] Failed to execute goal =
org.codehaus.mojo:tomcat-maven-plugin:1.1:deploy (default-cli) on =
project ...: Cannot invoke Tomcat manager: Server returned HTTP response =
code: 403 for URL: http://localhost:8080/manager/deploy?path=3D%2F...&war=3D=
 -> [Help 1]

  Matt

On Apr 2, 2012, at 4:16 AM, Olivier Lamy wrote:

> Hello,
> I have fixed few things related to deployment in trunk.
> Could you test with current 2.0-SNAPSHOT ?
>=20
> Thanks
> --=20
> Olivier Lamy
> Talend: http://coders.talend.com
> http://twitter.com/olamy | http://linkedin.com/in/olamy
>=20
> 2012/4/2 Matt Munz <matt.m.munz@gmail.com>:
>> Hi all,
>>=20
>>  I'm trying to get the Tomcat 7 Maven plugin to work and I'm getting =
an authorization problem.[1]  Here's the command that I'm running. [2]  =
Here's the relevant snippet from tomcat-users.xml. [3]  =46rom the =
browser I am able to log on to the Manager with this account without =
problems.
>>=20
>>  Any help you could provide would be greatly appreciated.
>>=20
>> [1] tomcatManager status code:401, ReasonPhrase:Unauthorized
>> [2] mvn tomcat7:deploy -Dusername=3DAdministrator -Dpassword=3Da
>> [3]
>> <role rolename=3D"manager-gui"/>
>> <role rolename=3D"manager-script"/>
>> <role rolename=3D"manager-jmx"/>
>> <user username=3D"Administrator" password=3D"a" =
roles=3D"manager-gui,manager-script,manager-jmx"/>
>>=20
>>  Matt Munz
>>  matt.m.munz@gmail.com
>>=20
>>=20
>>=20
>>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233291-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr  3 05:08:12 2012
Return-Path: <users-return-233291-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B57469E55
	for <apmail-tomcat-users-archive@www.apache.org>; Tue,  3 Apr 2012 05:08:12 +0000 (UTC)
Received: (qmail 10499 invoked by uid 500); 3 Apr 2012 05:08:09 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 10173 invoked by uid 500); 3 Apr 2012 05:08:03 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 10035 invoked by uid 99); 3 Apr 2012 05:08:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 05:08:00 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [81.169.162.220] (HELO h1611079.stratoserver.net) (81.169.162.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 05:07:44 +0000
Received: from [192.168.178.21] (pD9E80C0C.dip0.t-ipconnect.de [217.232.12.12])
	(using TLSv1 with cipher RC4-MD5 (128/128 bits))
	(No client certificate requested)
	by h1611079.stratoserver.net (Postfix) with ESMTPSA id 8560F4948219
	for <users@tomcat.apache.org>; Tue,  3 Apr 2012 07:07:23 +0200 (CEST)
References: <6368FCCCD803D64BB0931D7F5F0A3DD502261E4F98@DEMCHP99E84MSX.ww902.siemens.net> <-2864601223268460441@unknownmsgid> <6368FCCCD803D64BB0931D7F5F0A3DD502274ECCAA@DEMCHP99E84MSX.ww902.siemens.net> <4F7A03F7.5000702@christopherschultz.net>
User-Agent: K-9 Mail for Android
In-Reply-To: <4F7A03F7.5000702@christopherschultz.net>
MIME-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 8bit
Subject: Re: Chasing a SocketTimeoutException with APR
From: Felix Schumacher <felix.schumacher@internetallee.de>
Date: Tue, 03 Apr 2012 07:07:19 +0200
To: Tomcat Users List <users@tomcat.apache.org>
Message-ID: <7c261945-e3c4-4987-a38b-94d2affd2dd2@email.android.com>



Christopher Schultz <chris@christopherschultz.net> schrieb:

>-----BEGIN PGP SIGNED MESSAGE-----
>Hash: SHA1
>
>Micheal,
>
>On 3/30/12 3:37 AM, Osipov, Michael wrote:
>> Pid * wrote:
>>> Can you switch to the NIO connector and see if a similar issue
>>> occurs?
>> 
>> Not on the production system. We are using APR with SSL, so I did
>> not create Java compatible SSL keys. I can try on an integration
>> system but this error happens sporadically on this method.
>
>FWIW, you should be able to convert SSL keys between formats using
>keytool and openssl.
You could even try to set/change the keystoreType atribute of the connector to pkcs12.  That way you should be able to use the openssl keystore directly.

Regards
 Felix
>
>- -chris
>-----BEGIN PGP SIGNATURE-----
>Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
>Comment: GPGTools - http://gpgtools.org
>Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/
>
>iEYEARECAAYFAk96A/cACgkQ9CaO5/Lv0PCnuACfaiuZYGcvNavA9Z5Upf7QziFl
>RD8An12MqpkAgPLBgII0zwcvuXAEOFoG
>=8J3W
>-----END PGP SIGNATURE-----
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>For additional commands, e-mail: users-help@tomcat.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233292-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr  3 06:48:51 2012
Return-Path: <users-return-233292-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 70E86973C
	for <apmail-tomcat-users-archive@www.apache.org>; Tue,  3 Apr 2012 06:48:51 +0000 (UTC)
Received: (qmail 38613 invoked by uid 500); 3 Apr 2012 06:48:47 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 38481 invoked by uid 500); 3 Apr 2012 06:48:46 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 38464 invoked by uid 99); 3 Apr 2012 06:48:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 06:48:46 +0000
X-ASF-Spam-Status: No, hits=-1.6 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [195.245.230.34] (HELO mail1.bemta3.messagelabs.com) (195.245.230.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 06:48:36 +0000
Received: from [85.158.137.67:5271] by server-11.bemta-3.messagelabs.com id C8/C5-12049-F2D9A7F4; Tue, 03 Apr 2012 06:48:15 +0000
X-Env-Sender: Leigh.Anderson@betfair.com
X-Msg-Ref: server-11.tower-139.messagelabs.com!1333435695!22837805!1
X-Originating-IP: [213.86.197.188]
X-StarScan-Version: 6.5.7; banners=betfair.com,-,-
X-VirusChecked: Checked
Received: (qmail 9271 invoked from network); 3 Apr 2012 06:48:15 -0000
Received: from unknown (HELO HAMCAS04.uk.betfair.local) (213.86.197.188)
  by server-11.tower-139.messagelabs.com with SMTP; 3 Apr 2012 06:48:15 -0000
Received: from HAMMBX03.uk.betfair.local ([fe80::7828:724c:8e7a:6d6b]) by
 HAMCAS04.uk.betfair.local ([::1]) with mapi id 14.01.0355.002; Tue, 3 Apr
 2012 07:48:15 +0100
From: Leigh Anderson <Leigh.Anderson@betfair.com>
To: "users@tomcat.apache.org" <users@tomcat.apache.org>
Subject: Tomcat7-maven-plugin 2.0-beta1 and useSeparateTomcatClassloader
 fails with run goal
Thread-Topic: Tomcat7-maven-plugin 2.0-beta1 and
 useSeparateTomcatClassloader fails with run goal
Thread-Index: AQHNEWW+jphHNngJdEuNYm49rCONMw==
Date: Tue, 3 Apr 2012 06:48:14 +0000
Message-ID: <CB9F73BD.D4A7%leigh.anderson@betfair.com>
Accept-Language: en-GB, en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-originating-ip: [10.9.0.2]
Content-Type: text/plain; charset="us-ascii"
Content-ID: <D5E7AB41D4DA78479EF5F27DE8699400@betfair.com>
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

Hi All,

I'm trying to start a web application with 'mvn tomcat7:run'. It seems
that with the configuration below it fails with the following error:


=09[INFO]=20
------------------------------------------------------------------------
=09[ERROR] Failed to execute goal
org.apache.tomcat.maven:tomcat7-maven-plugin:2.0-beta-1:run (default-cli)
on project mantis-test-web-app: No such archiver: 'jar'. -> [Help 1]
=09[ERROR]=20
=09[ERROR] To see the full stack trace of the errors, re-run Maven with th=
e
-e switch.
=09[ERROR] Re-run Maven using the -X switch to enable full debug logging.=09=


I have also tried
=09* 'mvn tomcat:run-war', which seems to get past this point, but then th=
e
application will not start because the 'additionalClasspathDir' property
is not supported by the 'run-war' goal.
=09* removing 'useSeparateTomcatClassLoader' which then doesn't load the
Spring instrumenting class loader required to use AspectJ LTW, specified
in=20
context.xml. I have confirmed that I get the same 'no such archiver' error=

if I remove the=20
context.xml, so I don't believe this to be the cause.

Is there something I've missed in the configuration?

Cheers,
Leigh




                    <plugin>
                        <groupId>org.apache.tomcat.maven</groupId>
                        <artifactId>tomcat7-maven-plugin</artifactId>
                        <version>2.0-beta-1</version>
                        <configuration>
                            <systemProperties>
=09=09=09=09<log4j.defaultInitOverride>true</log4j.defaultInitOverride>
                                <HOSTNAME>localhost</HOSTNAME>
                                <port.http>9090</port.http>
                                <port.https>8443</port.https>
                            </systemProperties>
                            <port>9090</port>
                            <httpsPort>8443</httpsPort>
                            <path>/</path>
                            <useTestClasspath>false</useTestClasspath>
                            <additionalClasspathDirs>
                  =20
<additionalClasspathDir>${project.basedir}/config</additionalClasspathDir>=

                            </additionalClasspathDirs>
                  =20
<useSeparateTomcatClassLoader>true</useSeparateTomcatClassLoader>
                        </configuration>
                        <dependencies>
                            <dependency>
                                <groupId>org.springframework</groupId>
                  =20
=09=09=09=09<artifactId>spring-instrument-tomcat</artifactId>
                                <version>${spring.version}</version>
                            </dependency>
                        </dependencies>
                    </plugin>



________________________________________________________________________
In order to protect our email recipients, Betfair Group use SkyScan from=20=

MessageLabs to scan all Incoming and Outgoing mail for viruses.

________________________________________________________________________

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233293-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr  3 06:49:09 2012
Return-Path: <users-return-233293-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D68F7979E
	for <apmail-tomcat-users-archive@www.apache.org>; Tue,  3 Apr 2012 06:49:09 +0000 (UTC)
Received: (qmail 42058 invoked by uid 500); 3 Apr 2012 06:49:06 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 41966 invoked by uid 500); 3 Apr 2012 06:49:06 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 41949 invoked by uid 99); 3 Apr 2012 06:49:06 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 06:49:06 +0000
Received: from localhost (HELO mail-gx0-f173.google.com) (127.0.0.1)
  (smtp-auth username olamy, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 06:49:05 +0000
Received: by ggnp2 with SMTP id p2so1944070ggn.18
        for <users@tomcat.apache.org>; Mon, 02 Apr 2012 23:49:04 -0700 (PDT)
Received: by 10.236.147.19 with SMTP id s19mr9639752yhj.36.1333435744526; Mon,
 02 Apr 2012 23:49:04 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.100.34.8 with HTTP; Mon, 2 Apr 2012 23:48:44 -0700 (PDT)
In-Reply-To: <5E45D237-38F2-473F-A5FB-9D6367F1DDD6@gmail.com>
References: <51200CB4-D325-4019-A12A-5A0FDCC8987E@me.com> <0B75C850-2329-47A0-AEAF-A6B7CC14D35F@gmail.com>
 <CAPoyBqRbT3w_C=3DEomct-hRkKsVpUTBaEd9pjTFn3r=McLMfg@mail.gmail.com> <5E45D237-38F2-473F-A5FB-9D6367F1DDD6@gmail.com>
From: Olivier Lamy <olamy@apache.org>
Date: Tue, 3 Apr 2012 08:48:44 +0200
Message-ID: <CAPoyBqTKZ3vABf6zqo2g9WXEa7yec1kVerSY3uwb8C8bOrLyrw@mail.gmail.com>
Subject: Re: Tomcat 7 Maven plugin: deploy fails with tomcatManager status
 code:401, ReasonPhrase:Unauthorized
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hello,
With version from codehaus manager url for tomcat7 is not correct.
(see http://mojo.codehaus.org/tomcat-maven-plugin/examples/deployment-tomca=
t7.html)

Regarding the plugin prefix trouble, you have two solutions to use the
correct version:

* use the full cli: mvn
org.apache.tomcat.maven:tomcat7-maven-plugin:2.0-SNAPSHOT:deploy
* configure your settings.xml with the entry

  <pluginGroups>
    <pluginGroup>org.apache.tomcat.maven</pluginGroup>
  </pluginGroups>


HTH,
--=20
Olivier Lamy
Talend: http://coders.talend.com
http://twitter.com/olamy | http://linkedin.com/in/olamy

2012/4/3 Matt Munz <matt.m.munz@gmail.com>:
> Olivier,
>
> =A0After switching to 2.0-SNAPSHOT, I am still getting errors :( =A0First=
 I got an error saying that the tomcat7 prefix was not found. [1] =A0Then I=
 tried "mvn =A0tomcat:deploy -Dusername=3DAdministrator -Dpassword=3Da" and=
 I got a 403 response from the manager.
>
> [1]
> [ERROR] No plugin found for prefix 'tomcat7' in the current project and i=
n the plugin groups [org.apache.maven.plugins, org.codehaus.mojo] available=
 from the repositories [local (/Users/mattmunz/.m2/repository), central (ht=
tp://repo1.maven.org/maven2)] -> [Help 1]
> [2]
> [ERROR] Failed to execute goal org.codehaus.mojo:tomcat-maven-plugin:1.1:=
deploy (default-cli) on project ...: Cannot invoke Tomcat manager: Server r=
eturned HTTP response code: 403 for URL: http://localhost:8080/manager/depl=
oy?path=3D%2F...&war=3D -> [Help 1]
>
> =A0Matt
>
> On Apr 2, 2012, at 4:16 AM, Olivier Lamy wrote:
>
>> Hello,
>> I have fixed few things related to deployment in trunk.
>> Could you test with current 2.0-SNAPSHOT ?
>>
>> Thanks
>> --
>> Olivier Lamy
>> Talend: http://coders.talend.com
>> http://twitter.com/olamy | http://linkedin.com/in/olamy
>>
>> 2012/4/2 Matt Munz <matt.m.munz@gmail.com>:
>>> Hi all,
>>>
>>> =A0I'm trying to get the Tomcat 7 Maven plugin to work and I'm getting =
an authorization problem.[1] =A0Here's the command that I'm running. [2] =
=A0Here's the relevant snippet from tomcat-users.xml. [3] =A0From the brows=
er I am able to log on to the Manager with this account without problems.
>>>
>>> =A0Any help you could provide would be greatly appreciated.
>>>
>>> [1] tomcatManager status code:401, ReasonPhrase:Unauthorized
>>> [2] mvn tomcat7:deploy -Dusername=3DAdministrator -Dpassword=3Da
>>> [3]
>>> <role rolename=3D"manager-gui"/>
>>> <role rolename=3D"manager-script"/>
>>> <role rolename=3D"manager-jmx"/>
>>> <user username=3D"Administrator" password=3D"a" roles=3D"manager-gui,ma=
nager-script,manager-jmx"/>
>>>
>>> =A0Matt Munz
>>> =A0matt.m.munz@gmail.com
>>>
>>>
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>> For additional commands, e-mail: users-help@tomcat.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233294-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr  3 08:26:43 2012
Return-Path: <users-return-233294-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0DC249D1B
	for <apmail-tomcat-users-archive@www.apache.org>; Tue,  3 Apr 2012 08:26:42 +0000 (UTC)
Received: (qmail 66229 invoked by uid 500); 3 Apr 2012 08:26:39 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 65937 invoked by uid 500); 3 Apr 2012 08:26:36 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 65907 invoked by uid 99); 3 Apr 2012 08:26:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 08:26:35 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vijay.gandra@subk.co.in designates 67.18.62.19 as permitted sender)
Received: from [67.18.62.19] (HELO gateway01.websitewelcome.com) (67.18.62.19)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 08:26:26 +0000
Received: by gateway01.websitewelcome.com (Postfix, from userid 5007)
	id 72DFA25ACDB3D; Tue,  3 Apr 2012 03:26:05 -0500 (CDT)
Received: from ham02.websitewelcome.com (unknown [173.192.111.51])
	by gateway01.websitewelcome.com (Postfix) with ESMTP id 68AB825ACDB1D
	for <users@tomcat.apache.org>; Tue,  3 Apr 2012 03:26:05 -0500 (CDT)
Received: by ham02.websitewelcome.com (Postfix, from userid 666)
	id 66074FB1E2ABD; Tue,  3 Apr 2012 03:26:05 -0500 (CDT)
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on
	ham02.websitewelcome.com
X-Spam-Flag2999: NO
X-Spam-Level2999: 
X-Spam-Status2999: "No, score=-1.9 required=5.0 tests=BAYES_00 autolearn=ham
	version=3.3.1
Received: from gator1130.hostgator.com (gator1130.hostgator.com [174.120.233.130])
	by ham02.websitewelcome.com (Postfix) with ESMTP id 541AFFB1E2A98
	for <users@tomcat.apache.org>; Tue,  3 Apr 2012 03:26:05 -0500 (CDT)
Received: from [119.82.117.131] (port=58885 helo=[192.168.1.48])
	by gator1130.hostgator.com with esmtpa (Exim 4.69)
	(envelope-from <vijay.gandra@subk.co.in>)
	id 1SEz40-0008Ar-VP
	for users@tomcat.apache.org; Tue, 03 Apr 2012 03:26:05 -0500
Message-ID: <4F7AB41E.7060201@subk.co.in>
Date: Tue, 03 Apr 2012 13:56:06 +0530
From: Vijay <vijay.gandra@subk.co.in>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.28) Gecko/20120306 Lightning/1.0b2 Thunderbird/3.1.20
MIME-Version: 1.0
To: users@tomcat.apache.org
Subject: Re: PermGen error
References: <4F7AA8C8.5080609@subk.co.in>
In-Reply-To: <4F7AA8C8.5080609@subk.co.in>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - gator1130.hostgator.com
X-AntiAbuse: Original Domain - tomcat.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - subk.co.in
X-BWhitelist: no
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Source-Sender: ([192.168.1.48]) [119.82.117.131]:58885
X-Source-Auth: vijay.gandra@subk.co.in
X-Email-Count: 88
X-Source-Cap: c3ViaztzdWJrO2dhdG9yMTEzMC5ob3N0Z2F0b3IuY29t
X-Virus-Checked: Checked by ClamAV on apache.org

Why i am getting PermGen space error even increasing permgen size & Heap 
Size to 1024MB.
> Tomcat : apache-tomcat-6.0.33


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233295-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr  3 08:34:44 2012
Return-Path: <users-return-233295-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 303A29E4C
	for <apmail-tomcat-users-archive@www.apache.org>; Tue,  3 Apr 2012 08:34:44 +0000 (UTC)
Received: (qmail 92520 invoked by uid 500); 3 Apr 2012 08:34:41 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 92456 invoked by uid 500); 3 Apr 2012 08:34:40 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 92436 invoked by uid 99); 3 Apr 2012 08:34:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 08:34:39 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of the.6th.month@gmail.com designates 209.85.161.173 as permitted sender)
Received: from [209.85.161.173] (HELO mail-gx0-f173.google.com) (209.85.161.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 08:34:33 +0000
Received: by ggnp2 with SMTP id p2so1969491ggn.18
        for <users@tomcat.apache.org>; Tue, 03 Apr 2012 01:34:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=ZExbHFOiMsrcTo3tkQeW5pBYszbZNYybsH7dQkjEpYg=;
        b=lzOdCMDQg8Ky0yTSCEWypPBjl3oO8+Bc3ZJ2K/BB959muF+tF3tx4CpY4RLPmNS+2h
         4bYMv81Txl8YUnPtrEOUMQ2yQOXC2NvWCeMYCaMBZloeNjq2NVG8KbR+Vh+31ZKg6w7n
         XPgB9ZOCtsryhWxgBX1BES34zSNV265x+0Ibsi6wVkhCqMTURfwSFAYie5N2X08glLEQ
         JDwO/oKMkhC8jyoRR6X4BMYmK0elJVBnquLD/jn4dooDw8CSJEhdKshOrln0uCVVFzwR
         pzq8BMpO+KgM6zjuZLWTPM2JK+OAwZuUXl+l0dhA7p9SAiWY9htWAm5q00bhFjkQnV6N
         KRug==
Received: by 10.236.185.202 with SMTP id u50mr10043709yhm.111.1333442053028;
 Tue, 03 Apr 2012 01:34:13 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.236.9.72 with HTTP; Tue, 3 Apr 2012 01:33:52 -0700 (PDT)
In-Reply-To: <4F7AB41E.7060201@subk.co.in>
References: <4F7AA8C8.5080609@subk.co.in> <4F7AB41E.7060201@subk.co.in>
From: "the.6th.month@gmail.com" <the.6th.month@gmail.com>
Date: Tue, 3 Apr 2012 16:33:52 +0800
Message-ID: <CAKzy53nPAONcFtNsuKAexjjaYTQs3bTT5UmGSyChr5vMOu_Ueg@mail.gmail.com>
Subject: Re: PermGen error
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=20cf305e24b9e63b6104bcc22b57

--20cf305e24b9e63b6104bcc22b57
Content-Type: text/plain; charset=ISO-8859-1

hello, Vijay:
could you possibly give more details, you can run
jmap --heap pid
to collect the memory allocation info of your java process.
And it's better to have your java process info with full command options
pasted here.

Leon
On 3 April 2012 16:26, Vijay <vijay.gandra@subk.co.in> wrote:

> Why i am getting PermGen space error even increasing permgen size & Heap
> Size to 1024MB.
>
>> Tomcat : apache-tomcat-6.0.33
>>
>
>
> ------------------------------**------------------------------**---------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.**apache.org<users-unsubscribe@tomcat.apache.org>
> For additional commands, e-mail: users-help@tomcat.apache.org
>
>

--20cf305e24b9e63b6104bcc22b57--

From users-return-233296-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr  3 08:36:31 2012
Return-Path: <users-return-233296-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 961AA9EAC
	for <apmail-tomcat-users-archive@www.apache.org>; Tue,  3 Apr 2012 08:36:31 +0000 (UTC)
Received: (qmail 99412 invoked by uid 500); 3 Apr 2012 08:36:28 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 99146 invoked by uid 500); 3 Apr 2012 08:36:28 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 99124 invoked by uid 99); 3 Apr 2012 08:36:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 08:36:27 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kalle.privat@gmail.com designates 74.125.82.173 as permitted sender)
Received: from [74.125.82.173] (HELO mail-we0-f173.google.com) (74.125.82.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 08:36:21 +0000
Received: by werp12 with SMTP id p12so3050187wer.18
        for <users@tomcat.apache.org>; Tue, 03 Apr 2012 01:36:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        bh=OqHpcPh+yT1ui6q46GCcmgThxovodv7/sep8bQd+iSQ=;
        b=W6j4Vmqv3Ba/94m8Fz+qiiws6956bIz17SGmo39VojtuNmAQQuOUGqZoUT31pfLJDH
         xk/fZ/H++GC1hiKEA2Y+IPjwulMiN/qCRsLlnB0iXi4ANK9F5I4SPfWGuosl9oVSV3uK
         C4BVq/sBORG//G3JO8SGBqsQbqSbCtzA7ZZqGS/5v89McZuluWUJbFjttnSapV+WBgkQ
         /i0jjazTRtZRsjgqTOeT5YaYGTTvnVICLozwUfgFTTR7V89e1bRgCmOqR5HmQPx8EB4u
         LhY6LbhcnDbXub+sfTqhuUsdR0T4/u5Eclhc4aM6SY5WXD59grJt31l6AA8GWQjxVFyD
         p1ug==
Received: by 10.180.102.102 with SMTP id fn6mr4053686wib.10.1333442160808;
        Tue, 03 Apr 2012 01:36:00 -0700 (PDT)
Received: from [127.0.0.1] (ip-43-131.bnaa.dk. [84.238.43.131])
        by mx.google.com with ESMTPS id j3sm66746501wiw.1.2012.04.03.01.35.59
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 03 Apr 2012 01:36:00 -0700 (PDT)
Message-ID: <4F7AB66F.7000900@gmail.com>
Date: Tue, 03 Apr 2012 10:35:59 +0200
From: Casper Wandahl Schmidt <kalle.privat@gmail.com>
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: PermGen error
References: <4F7AA8C8.5080609@subk.co.in> <4F7AB41E.7060201@subk.co.in>
In-Reply-To: <4F7AB41E.7060201@subk.co.in>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org



Den 03-04-2012 10:26, Vijay skrev:
> Why i am getting PermGen space error even increasing permgen size & 
> Heap Size to 1024MB.
>> Tomcat : apache-tomcat-6.0.33
>
Try reading:
http://www.catb.org/~esr/faqs/smart-questions.html 
<http://www.catb.org/%7Eesr/faqs/smart-questions.html>

Kind regards
Casper
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233297-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr  3 08:58:45 2012
Return-Path: <users-return-233297-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4C36896B1
	for <apmail-tomcat-users-archive@www.apache.org>; Tue,  3 Apr 2012 08:58:45 +0000 (UTC)
Received: (qmail 58731 invoked by uid 500); 3 Apr 2012 08:58:42 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 58684 invoked by uid 500); 3 Apr 2012 08:58:41 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 58672 invoked by uid 99); 3 Apr 2012 08:58:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 08:58:41 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 147.91.1.120 is neither permitted nor denied by domain of ognjen.d.blagojevic@gmail.com)
Received: from [147.91.1.120] (HELO afrodita.rcub.bg.ac.rs) (147.91.1.120)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 08:58:37 +0000
Received: from [IPv6:2001:4170:0:4::66] (unknown [IPv6:2001:4170:0:4::66])
	by afrodita.rcub.bg.ac.rs (Postfix) with ESMTP id 35694191A199
	for <users@tomcat.apache.org>; Tue,  3 Apr 2012 10:58:13 +0200 (CEST)
Message-ID: <4F7ABBA4.3010005@gmail.com>
Date: Tue, 03 Apr 2012 10:58:12 +0200
From: Ognjen Blagojevic <ognjen.d.blagojevic@gmail.com>
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: users@tomcat.apache.org
Subject: Re: PermGen error
References: <4F7AA8C8.5080609@subk.co.in> <4F7AB41E.7060201@subk.co.in> <4F7AB66F.7000900@gmail.com>
In-Reply-To: <4F7AB66F.7000900@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-RCUB-MailScanner-Information: Please contact the ISP for more information
X-RCUB-MailScanner-ID: 35694191A199.AA717
X-RCUB-MailScanner: Found to be clean
X-RCUB-MailScanner-SpamCheck: not spam, SpamAssassin (not cached, score=-2.6,
	required 5, autolearn=not spam, BAYES_00 -2.60, NO_RELAYS -0.00)
X-Virus-Checked: Checked by ClamAV on apache.org

On 3.4.2012 10:35, Casper Wandahl Schmidt wrote:
> Den 03-04-2012 10:26, Vijay skrev:
>> Why i am getting PermGen space error even increasing permgen size &
>> Heap Size to 1024MB.
>>> Tomcat : apache-tomcat-6.0.33
>>
> Try reading:
> http://www.catb.org/~esr/faqs/smart-questions.html

Exactly.

Also, check these docs:

http://frankkieviet.blogspot.ca/2006/10/how-to-fix-dreaded-permgen-space.html
http://frankkieviet.blogspot.ca/2006/10/classloader-leaks-dreaded-permgen-space.html
http://wiki.apache.org/tomcat/OutOfMemory
http://wiki.apache.org/tomcat/MemoryLeakProtection

-Ognjen

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233298-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr  3 09:01:37 2012
Return-Path: <users-return-233298-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C5041980D
	for <apmail-tomcat-users-archive@www.apache.org>; Tue,  3 Apr 2012 09:01:37 +0000 (UTC)
Received: (qmail 66998 invoked by uid 500); 3 Apr 2012 09:01:34 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 66908 invoked by uid 500); 3 Apr 2012 09:01:34 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 66883 invoked by uid 99); 3 Apr 2012 09:01:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 09:01:33 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [134.226.32.56] (HELO scss.tcd.ie) (134.226.32.56)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 09:01:29 +0000
Received: from localhost (localhost [127.0.0.1])
	by hermes.scss.tcd.ie (Postfix) with ESMTP id 3CCCC171C05
	for <users@tomcat.apache.org>; Tue,  3 Apr 2012 10:01:05 +0100 (IST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=cs.tcd.ie; h=
	content-transfer-encoding:content-type:in-reply-to:references
	:subject:mime-version:user-agent:organization:reply-to:from:date
	:message-id:received:received:x-virus-scanned; s=cs; t=
	1333443664; bh=v8HDNXFhi3/me780AJx0lKnygloeE1inB6CgMCHHvug=; b=p
	8w3jNqvSh5nrDcWZnBVp41FVlVAeVu1iwyqSBGcRgBZc3+Q62l8Rp3AecPs0wBzv
	mUL7FnjTX8yFFJakOQ7MbeEzksuu3XwpnP+TqQIhrvx68HAWEpprxZujce0fmiIL
	C1H/Ls2tjScgeUGraMei8qZ5w3ml35nQqNYlAymo/FZznryAe31SA78cjW2zeXV4
	CqJhe7PGwM7e69/Eup+kbwDbywRulWRztzzamjYBT0D7ek7qalNf+rBgEpr/G7Z9
	zHStcy7fqOXImWRJmyAZa2UFDQPdtt0/oickRc8thEgYUeTemyZ6mO8dM2P01BZl
	8UkgtrOgTWFicedUNvz3w==
X-Virus-Scanned: Debian amavisd-new at scss.tcd.ie
Received: from scss.tcd.ie ([127.0.0.1])
	by localhost (scss.tcd.ie [127.0.0.1]) (amavisd-new, port 10027)
	with ESMTP id mucDlDYdbHoJ for <users@tomcat.apache.org>;
	Tue,  3 Apr 2012 10:01:04 +0100 (IST)
Received: from shiraz.cs.tcd.ie (unknown [IPv6:2001:770:10:200:21d:9ff:fe28:378e])
	by smtp.scss.tcd.ie (Postfix) with ESMTPSA id E27C7171C03
	for <users@tomcat.apache.org>; Tue,  3 Apr 2012 10:01:04 +0100 (IST)
Message-ID: <4F7ABC50.2090309@cs.tcd.ie>
Date: Tue, 03 Apr 2012 10:01:04 +0100
From: Peter Lavin <lavinp@cs.tcd.ie>
Reply-To: lavinp@cs.tcd.ie
Organization: School of Computer Science and Statistics, Trinity College Dublin
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:10.0.3) Gecko/20120314 Thunderbird/10.0.3
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: [OT] Deleting URLClassloader Cached Jars/Classes
References: <4F79EA7F.7050501@cs.tcd.ie> <4F7A0EB1.7040603@christopherschultz.net> <CABzHfVk_CR74tt-v17rZpJDdLPcD=uOuXuHZG7zZ9_ihQuCq4g@mail.gmail.com> <4F7A2615.50102@pidster.com>
In-Reply-To: <4F7A2615.50102@pidster.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks guys, I'll look at this again, esp the JasperLoader,

thanks,
Peter

On 04/02/2012 11:20 PM, Pid wrote:
> On 02/04/2012 22:33, Konstantin Kolinko wrote:
>> 2012/4/3 Christopher Schultz<chris@christopherschultz.net>:
>>>
>>>> Is there a way to empty this cache, or disable caching all
>>>> together?
>>>
>>> Not without implementing your own ClassLoader. You could read the code
>>> for WebappClassLoader to see how it's done in there.
>>>
>>
>> +1. You need your own class loader.
>
> You would need your own *quite sophisticated* classloader.
>
> This kind of thing is usually achieved with Java Agents that can rewrite
> bytecode on the fly, like JavaRebel for example.
>
>
> p
>
>> I would say org.apache.jasper.servlet.JasperLoader.  It is classloader
>> that is used to load JSP pages.  If the page is updated you just throw
>> classloader instance away together with the classes that it loaded.
>>
>> In recent JVMs there is also an option to reload a class in memory
>> (aka hot-swap). That is used by debuggers, when you debug your program
>> in an IDE and want to continue with updated (edited) version of the
>> class without restarting all over.
>>
>> It is not something that you would use from inside the JVM though.
>>
>> Best regards,
>> Konstantin Kolinko
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>> For additional commands, e-mail: users-help@tomcat.apache.org
>>
>
>

-- 
with best regards,
Peter Lavin,
PhD Candidate,
Computer Architecture & Grid Research Group,
Lloyd Institute, 005,
Trinity College Dublin, Ireland.
+353 1 8961536

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233299-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr  3 09:22:55 2012
Return-Path: <users-return-233299-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 47727904A
	for <apmail-tomcat-users-archive@www.apache.org>; Tue,  3 Apr 2012 09:22:55 +0000 (UTC)
Received: (qmail 26273 invoked by uid 500); 3 Apr 2012 09:22:51 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 26183 invoked by uid 500); 3 Apr 2012 09:22:50 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 25877 invoked by uid 99); 3 Apr 2012 09:22:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 09:22:48 +0000
X-ASF-Spam-Status: No, hits=0.9 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [216.139.250.139] (HELO joe.nabble.com) (216.139.250.139)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 09:22:42 +0000
Received: from alf.nabble.com ([192.168.236.21])
	by joe.nabble.com with esmtp (Exim 4.72)
	(envelope-from <lmhelp1@orange.fr>)
	id 1SEzwS-0003dk-CI
	for users@tomcat.apache.org; Tue, 03 Apr 2012 02:22:20 -0700
Date: Tue, 3 Apr 2012 02:22:20 -0700 (PDT)
From: =?UTF-8?Q?L=C3=A9a_Massiot?= <lmhelp1@orange.fr>
To: users@tomcat.apache.org
Message-ID: <1333444940374-4681421.post@n6.nabble.com>
In-Reply-To: <4F7A11D7.80205@christopherschultz.net>
References: <1333360773430-4678428.post@n6.nabble.com> <CABzHfVn5uKEF9RKGUkqGGq56DLNFhRFm6Y_PUSUq--x3=yMpvw@mail.gmail.com> <1333363527730-4678513.post@n6.nabble.com> <4F7A11D7.80205@christopherschultz.net>
Subject: Re: Tomcat6 - Context - aliases
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Thank you all three for your last answers.


Andr=C3=A9 Warnier wrote
> this might help, in a container- and version-independent way :
> http://jaitechwriteups.blogspot.de/2007/01/how-to-read-properties-file-in=
-web.html
I'm sorry, no offence... but I don't see how... :/


Pid * wrote
> Please define 'inside'.
In this Web page:
http://tomcat.apache.org/tomcat-7.0-doc/config/context.html (look for the
first occurrence of the word "aliases" in this document), there is a
description of what the "aliases" attribute is used for.=20
Excerpt: "This attribute provides a list of external locations from which t=
o
load resources for this context."
When I use the word "inside" (maybe improperly) I intend to mean the
opposite of what is called an "external location" in the documentation
mentionned above.

My requirements more clearly now I hope:=20
I just want to know, what is the "more basic" mechanism which was used in
"Tomcat6" to do what the "aliases" attribute of the "Context" element of th=
e
"context.xml" file permits now to do in "Tomcat7".

Note 1: I had'nt realized this "aliases" attribute was
container-version-dependent. I wouldn't have used it otherwise.
Note 2: Maybe this mechanism has to be implemented directly in the Webapp's
source code instead.
Note 3: The interesting idea behind this "external location" notion is to b=
e
able to isolate ressources from the Webapp itself and yet being able to
refer to them from inside the Webapp.

Thank you for helping and best regards.

--
View this message in context: http://tomcat.10.n6.nabble.com/Tomcat6-Contex=
t-aliases-tp4678430p4681421.html
Sent from the Tomcat - User mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233300-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr  3 10:37:44 2012
Return-Path: <users-return-233300-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 02E4798D3
	for <apmail-tomcat-users-archive@www.apache.org>; Tue,  3 Apr 2012 10:37:43 +0000 (UTC)
Received: (qmail 25770 invoked by uid 500); 3 Apr 2012 10:37:40 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 25710 invoked by uid 500); 3 Apr 2012 10:37:39 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 25697 invoked by uid 99); 3 Apr 2012 10:37:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 10:37:39 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [213.157.18.194] (HELO komm3.srs-management.de) (213.157.18.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 10:37:35 +0000
Received: from SRS-EXCH-02.bensheim.srs ([192.168.101.15]) by
 SRS-EXCH-02.bensheim.srs ([192.168.101.15]) with mapi; Tue, 3 Apr 2012
 12:36:27 +0200
From: =?iso-8859-1?Q?Thomas_Strau=DF?= <t.strauss@srs-management.de>
To: Tomcat Users List <users@tomcat.apache.org>
Date: Tue, 3 Apr 2012 12:36:26 +0200
Subject: AW: FormAuthentication Valve changes fail with RequestListeners?
Thread-Topic: FormAuthentication Valve changes fail with RequestListeners?
Thread-Index: Ac0OZbVvyp4v+pOyRhGQHuL1l+W6qwDH6PJA
Message-ID: <983BCB8DEFCDA248B640B2F6373CAE8D6DC8F52345@SRS-EXCH-02.bensheim.srs>
References: <983BCB8DEFCDA248B640B2F6373CAE8D6DC8F52285@SRS-EXCH-02.bensheim.srs>
	<CABzHfVkwa9tuH+QkSDteZRQ3_q85PWbkSHqSAaU5pvvLB57iwA@mail.gmail.com>
	<983BCB8DEFCDA248B640B2F6373CAE8D6DC8F522C7@SRS-EXCH-02.bensheim.srs>
 <CABzHfVnoJ1hk77=FuhcKpFVBJGFoDoGPLhgpKQyxWL3AvmM42A@mail.gmail.com>
In-Reply-To: <CABzHfVnoJ1hk77=FuhcKpFVBJGFoDoGPLhgpKQyxWL3AvmM42A@mail.gmail.com>
Accept-Language: de-DE
Content-Language: de-DE
X-MS-Has-Attach: yes
X-MS-TNEF-Correlator:
acceptlanguage: de-DE
Content-Type: multipart/signed; protocol="application/x-pkcs7-signature";
	micalg=SHA1; boundary="----=_NextPart_000_0482_01CD1196.62D05740"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0482_01CD1196.62D05740
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,

we have done the tests and got the following results (7.0.11 and =
7.0.26).

Thank you for taking the time:

=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D Tomcat 7.0.11
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
First call to portal:

["http-bio-8080"-exec-3                | INFO  | 30-03 16:47:29:005]  >>
requestInitialized
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
ial
ized(PortalRequestListener.java:52)]
["http-bio-8080"-exec-3                | INFO  | 30-03 16:47:29:005]
PortalRequest thread: 39 - "http-bio-8080"-exec-3
[de.srs.pen.portal.utils.server.servlet.PortalRequest.set(PortalRequest.j=
ava
:45)]
["http-bio-8080"-exec-3                | TRACE | 30-03 16:47:30:186]
Request Listener: Request Initialized
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
ial
ized(PortalRequestListener.java:60)]
["http-bio-8080"-exec-3                | TRACE | 30-03 16:47:30:187]
requested URI:/portal-srs-standard/
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
ial
ized(PortalRequestListener.java:62)]
["http-bio-8080"-exec-3                | TRACE | 30-03 16:47:30:187]
httpSession ID: 2D7D25B19BDC1A64DFFD61BBFD93CE7F
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
ial
ized(PortalRequestListener.java:63)]
["http-bio-8080"-exec-3                | TRACE | 30-03 16:47:30:187]
principal:no principal
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
ial
ized(PortalRequestListener.java:66)]
["http-bio-8080"-exec-3                | TRACE | 30-03 16:47:30:187]  =
stack
trace:
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
ial
ized(PortalRequestListener.java:67)]
java.lang.Exception
	at
de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestIniti=
ali
zed(PortalRequestListener.java:67)
	at
org.apache.catalina.core.StandardContext.fireRequestInitEvent(StandardCon=
tex
t.java:5903)
	at
org.apache.catalina.authenticator.FormAuthenticator.forwardToLoginPage(Fo=
rmA
uthenticator.java:372)
	at
org.apache.catalina.authenticator.FormAuthenticator.authenticate(FormAuth=
ent
icator.java:267)
	at
org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorB=
ase
.java:556)
	at
org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)=

	at
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:=
164
)
	at
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:=
100
)
	at
org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)=

	at
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.j=
ava
:118)
	at
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:39=
4)
	at
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:243=
)
	at
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(H=
ttp
11Protocol.java:188)
	at
org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.ja=
va:
302)
	at
java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor=
.ja
va:886)
	at
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.jav=
a:9
08)
	at java.lang.Thread.run(Thread.java:662)


Credentials provided, login done

["http-bio-8080"-exec-3                | TRACE | 30-03 16:47:47:246]
Request Listener: Request Initialized
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
ial
ized(PortalRequestListener.java:60)]
["http-bio-8080"-exec-3                | TRACE | 30-03 16:47:50:803]
requested URI:/portal-srs-standard/
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
ial
ized(PortalRequestListener.java:62)]
["http-bio-8080"-exec-3                | TRACE | 30-03 16:47:50:803]
httpSession ID: 17E5174AC9E99DC97A44B0967E3E0219
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
ial
ized(PortalRequestListener.java:63)]
["http-bio-8080"-exec-3                | TRACE | 30-03 16:47:50:804]
principal:srs/m.strauss
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
ial
ized(PortalRequestListener.java:66)]
["http-bio-8080"-exec-3                | TRACE | 30-03 16:47:50:804]  =
stack
trace:
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
ial
ized(PortalRequestListener.java:67)]
java.lang.Exception
	at
de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestIniti=
ali
zed(PortalRequestListener.java:67)
	at
org.apache.catalina.core.StandardContext.fireRequestInitEvent(StandardCon=
tex
t.java:5903)
	at
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve=
.ja
va:160)
	at
org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorB=
ase
.java:591)
	at
org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)=

	at
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:=
164
)
	at
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:=
100
)
	at
org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)=

	at
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.j=
ava
:118)
	at
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:39=
4)
	at
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:243=
)
	at
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(H=
ttp
11Protocol.java:188)
	at
org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.ja=
va:
302)
	at
java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor=
.ja
va:886)
	at
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.jav=
a:9
08)
	at java.lang.Thread.run(Thread.java:662)

=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D Tomcat 7.0.26
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D

[http-bio-8080-exec-3                  | TRACE | 30-03 17:12:11:030]
Request Listener: Request Initialized
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
ial
ized(PortalRequestListener.java:60)]
[http-bio-8080-exec-3                  | TRACE | 30-03 17:12:11:813]
requested URI:/portal-srs-standard/
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
ial
ized(PortalRequestListener.java:62)]
[http-bio-8080-exec-3                  | TRACE | 30-03 17:12:11:814]
httpSession ID: AC7A464173A57BD6CB8602A906EFB0EF
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
ial
ized(PortalRequestListener.java:63)]
[http-bio-8080-exec-3                  | TRACE | 30-03 17:12:11:814]
principal:no principal
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
ial
ized(PortalRequestListener.java:66)]
[http-bio-8080-exec-3                  | TRACE | 30-03 17:12:11:833]  =
stack
trace:
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
ial
ized(PortalRequestListener.java:67)]
java.lang.Exception
	at
de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestIniti=
ali
zed(PortalRequestListener.java:67)
	at
org.apache.catalina.core.StandardContext.fireRequestInitEvent(StandardCon=
tex
t.java:5934)
	at
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:=
164
)
	at
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:=
98)
	at
org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)=

	at
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.j=
ava
:118)
	at
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:40=
7)
	at
org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Pr=
oce
ssor.java:987)
	at
org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(Abst=
rac
tProtocol.java:579)
	at
org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.ja=
va:
307)
	at
java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor=
.ja
va:886)
	at
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.jav=
a:9
08)
	at java.lang.Thread.run(Thread.java:662)
[http-bio-8080-exec-3                  | INFO  | 30-03 17:12:12:745]  <<
requestInitialized
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
ial
ized(PortalRequestListener.java:93)]



[http-bio-8080-exec-7                  | INFO  | 30-03 17:13:26:084]
PortalRequest thread: 28 - http-bio-8080-exec-7
[de.srs.pen.portal.utils.server.servlet.PortalRequest.set(PortalRequest.j=
ava
:45)]
[http-bio-8080-exec-7                  | TRACE | 30-03 17:13:44:622]
Request Listener: Request Initialized
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
ial
ized(PortalRequestListener.java:60)]
[http-bio-8080-exec-7                  | TRACE | 30-03 17:13:45:263]
requested URI:/portal-srs-standard/j_security_check
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
ial
ized(PortalRequestListener.java:62)]
[http-bio-8080-exec-7                  | TRACE | 30-03 17:13:45:486]
httpSession ID: AC7A464173A57BD6CB8602A906EFB0EF
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
ial
ized(PortalRequestListener.java:63)]
[http-bio-8080-exec-7                  | TRACE | 30-03 17:13:46:007]
principal:no principal
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
ial
ized(PortalRequestListener.java:66)]
[http-bio-8080-exec-7                  | TRACE | 30-03 17:13:46:831]  =
stack
trace:
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
ial
ized(PortalRequestListener.java:67)]
java.lang.Exception
	at
de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestIniti=
ali
zed(PortalRequestListener.java:67)
	at
org.apache.catalina.core.StandardContext.fireRequestInitEvent(StandardCon=
tex
t.java:5934)
	at
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:=
164
)
	at
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:=
98)
	at
org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)=

	at
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.j=
ava
:118)
	at
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:40=
7)
	at
org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Pr=
oce
ssor.java:987)
	at
org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(Abst=
rac
tProtocol.java:579)
	at
org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.ja=
va:
307)
	at
java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor=
.ja
va:886)
	at
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.jav=
a:9
08)
	at java.lang.Thread.run(Thread.java:662)
[http-bio-8080-exec-7                  | INFO  | 30-03 17:13:49:228]  <<
requestInitialized
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
ial
ized(PortalRequestListener.java:93)]


Mit freundlichen Gr=FC=DFen

Thomas Strau=DF

SRS PaperDynamix=AE=20
WE MAKE PAPER WORK

SRS-Management GmbH=20
Berliner Ring 93
64625 Bensheim=20
T +49 6251 85 424 - 20=20
F +49 6251 85 424 - 14
M +49 174 2110912

www.srs-management.de
www.srs-paperdynamix.de

HRB 25262 AG Darmstadt
Gesch=E4ftsf=FChrer: Detlev Homilius, Thomas Strau=DF



> -----Urspr=FCngliche Nachricht-----
> Von: Konstantin Kolinko [mailto:knst.kolinko@gmail.com]
> Gesendet: Freitag, 30. M=E4rz 2012 13:10
> An: Tomcat Users List
> Betreff: Re: FormAuthentication Valve changes fail with =
RequestListeners?
>=20
> 2012/3/30 Thomas Strau=DF <t.strauss@srs-management.de>:
> > Hi,
> >
> > thank you for the information.
> >
> > We have not succeeded so far. I want to give you some more =
information
> > what happens, the context.xml and the web.xml
> >
> > What we have changed versus the existing setup, working on 7.0.11
> > - We have moved the login.jsp into the protection domain (was =
outside
> > before). This did not remove the issue.
> > - We have changed the preemptiveAuthentication setting. This did not
> > remove the issue.
> >
> > This is the flow through the system that we can see:
> >
> > Client sends request to /portal
> >
> > =A0 =A0 =A0 =A0/portal is not protected
> > =A0 =A0 =A0 =A0/portal/jsp/main.jsp is welcome page and protected =
(see
> > web.xml)
> > =A0 =A0 =A0 =A0portal context configures formauthentication on the =
protection
> > domain
> > =A0 =A0 =A0 =A0Tomcat redirects/forwards incoming call to =
/jsp/login.jsp
> > (protected
> > resource)
> >
> > FormAuthentication Valve is called
> > Request Listener is called (expected: principal is null -> OK!)
>=20
> What is stacktrace at this point inside the listener?
> (e.g. (new Exception()).printStackTrace());
>=20
> Maybe you can compare 7.0.26 and 7.0.11.
>=20
>=20
> IIRC there was some refactoring with regards to where the valves are
> placed and how listeners are called  In 7.0.22 changelog:
>=20
> "Error handling and request listeners are now handled in the
> StandardHostValve to ensure they wrap all Context level activity."
>=20
> Maybe something was missed there.
>=20
> > jsp/login.jsp is displayed, waiting for user User adds information,
> > press submit Client sends request to j_security_check is initiated =
by
> > browser with form data
> >
> > (something happens here?)
> >
> > Realm is called: Authentication succeeds, realm creates principal
> > =A0 =A0 =A0 =A0Realm provides its own implementation of Principal =
Object
> > =A0 =A0 =A0 =A0Realm uses different table-structure than original =
DataSource
> > Realm
> >
> > (something happens here?)
> >
> > Request Listener is called (expected: principal is not null -> =
FAILS!)
> >
> > (something happens here?)
> >
> > jsp/main.jsp is called, principal in request is not null -> can be
> > dumped to the JSP view
> >
> >
> > Following here is the used context.xml
> > (...)
> >
>=20
> BTW, if you want to run under debugger, the tips are here:
> https://wiki.apache.org/tomcat/FAQ/Developing#Debugging
>=20
> Best regards,
> Konstantin Kolinko
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>=20
>=20
> --
> This message has been scanned for viruses and dangerous content by
> MailScanner, and is believed to be clean.


------=_NextPart_000_0482_01CD1196.62D05740
Content-Type: application/x-pkcs7-signature; name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIU/jCCBjQw
ggQcoAMCAQICASAwDQYJKoZIhvcNAQEFBQAwfTELMAkGA1UEBhMCSUwxFjAUBgNVBAoTDVN0YXJ0
Q29tIEx0ZC4xKzApBgNVBAsTIlNlY3VyZSBEaWdpdGFsIENlcnRpZmljYXRlIFNpZ25pbmcxKTAn
BgNVBAMTIFN0YXJ0Q29tIENlcnRpZmljYXRpb24gQXV0aG9yaXR5MB4XDTA3MTAyNDIxMDI1NVoX
DTE3MTAyNDIxMDI1NVowgYwxCzAJBgNVBAYTAklMMRYwFAYDVQQKEw1TdGFydENvbSBMdGQuMSsw
KQYDVQQLEyJTZWN1cmUgRGlnaXRhbCBDZXJ0aWZpY2F0ZSBTaWduaW5nMTgwNgYDVQQDEy9TdGFy
dENvbSBDbGFzcyAyIFByaW1hcnkgSW50ZXJtZWRpYXRlIENsaWVudCBDQTCCASIwDQYJKoZIhvcN
AQEBBQADggEPADCCAQoCggEBAMsohUWcASz7GfKrpTOMKqANy9BV7V0igWdGxA8IU77L3aTxErQ+
fcxtDYZ36Z6GH0YFn7fq5RADteP0AYzrCA+EQTfi8q1+kA3m0nwtwXG94M5sIqsvs7lRP1aycBke
/s5g9hJHryZ2acScnzczjBCAo7X1v5G3yw8MDP2m2RCye0KfgZ4nODerZJVzhAlOD9YejvAXZqHk
sw56HzElVIoYSZ3q4+RJuPXXfIoyby+Y2m1E+YzX5iCZXBx05gk6MKAW1vaw4/v2OOLy6FZH3XHH
tOkzUreG//CsFnB9+uaYSlR65cdGzTsmoIK8WH1ygoXhRBm98SD7Hf/r3FELNvUCAwEAAaOCAa0w
ggGpMA8GA1UdEwEB/wQFMAMBAf8wDgYDVR0PAQH/BAQDAgEGMB0GA1UdDgQWBBSuVYNv7DHKufcd
+q9rMfPIHeOsuzAfBgNVHSMEGDAWgBROC+8apEBbpRdphzDKNGhD0EGu8jBmBggrBgEFBQcBAQRa
MFgwJwYIKwYBBQUHMAGGG2h0dHA6Ly9vY3NwLnN0YXJ0c3NsLmNvbS9jYTAtBggrBgEFBQcwAoYh
aHR0cDovL3d3dy5zdGFydHNzbC5jb20vc2ZzY2EuY3J0MFsGA1UdHwRUMFIwJ6AloCOGIWh0dHA6
Ly93d3cuc3RhcnRzc2wuY29tL3Nmc2NhLmNybDAnoCWgI4YhaHR0cDovL2NybC5zdGFydHNzbC5j
b20vc2ZzY2EuY3JsMIGABgNVHSAEeTB3MHUGCysGAQQBgbU3AQIBMGYwLgYIKwYBBQUHAgEWImh0
dHA6Ly93d3cuc3RhcnRzc2wuY29tL3BvbGljeS5wZGYwNAYIKwYBBQUHAgEWKGh0dHA6Ly93d3cu
c3RhcnRzc2wuY29tL2ludGVybWVkaWF0ZS5wZGYwDQYJKoZIhvcNAQEFBQADggIBADqpJw3I07QW
ke9plNBpxUxcffc7nUrIQpJHDci91DFG7fVhHRkMZ1J+BKg5UNUxIFJ2Z9B90Micc/NXcs7kPBRd
n6XGO/vPc87Y6R+cWS9Nc9+fp3Enmsm94OxOwI9wn8qnr/6o3mD4noP9JphwUPTXwHovjavRnhUQ
HLfo/i2NG0XXgTHXS2Xm0kVUozXqpYpAdumMiB/vezj1QHQJDmUdPYMcp+reg9901zkyT3fDW/iv
JVv6pWtkh6Pw2ytZT7mvg7YhX3V50Nv860cV11mocUVcqBLv0gcT+HBDYtbuvexNftwNQKD5193A
7zN4vG7CTYkXxytSjKuXrpEatEiFPxWgb84nVj25SU5q/r1Xhwby6mLhkbaXslkVtwEWT3Van49r
KjlK4XrUKYYWtnfzq6aSak5u0Vpxd1rY79tWhD3EdCvOhNz/QplNa+VkIsrcp7+8ZhP1l1b2U6Ma
xIVteuVMD3X0vziIwr7jxYae9FZjbxlpUemqXjcC0QaFfN7qI0JsQMALL7iGRBg7K0CoOBzECdD3
fuZil5kU/LP9cr1BK31U0Uy651bFnAMMMkqhAChIbn0ei72VnbpSsrrSdF0BAGYQ8vyHae5aCg+H
75dVCV33K6FuxZrf09yTz+Vx/PkdRUYkXmZz/OTfyJXsUOUXrym6KvI2rYpccSk5MIIG9TCCBd2g
AwIBAgICCT8wDQYJKoZIhvcNAQEFBQAwgYwxCzAJBgNVBAYTAklMMRYwFAYDVQQKEw1TdGFydENv
bSBMdGQuMSswKQYDVQQLEyJTZWN1cmUgRGlnaXRhbCBDZXJ0aWZpY2F0ZSBTaWduaW5nMTgwNgYD
VQQDEy9TdGFydENvbSBDbGFzcyAyIFByaW1hcnkgSW50ZXJtZWRpYXRlIENsaWVudCBDQTAeFw0x
MDA2MzAxODE1NDdaFw0xMjA3MDEwOTM2NDFaMIHlMSAwHgYDVQQNExcyMTk5MjItZEtzMFk0eWsx
WFR3ajd5VzELMAkGA1UEBhMCREUxDzANBgNVBAgTBkhlc3NlbjERMA8GA1UEBxMIQmVuc2hlaW0x
HDAaBgNVBAoTE1NSUy1NYW5hZ2VtZW50IEdtYkgxLTArBgNVBAsTJFN0YXJ0Q29tIFZlcmlmaWVk
IENlcnRpZmljYXRlIE1lbWJlcjEXMBUGA1UEAxMOVGhvbWFzIFN0cmF1c3MxKjAoBgkqhkiG9w0B
CQEWG3Quc3RyYXVzc0BzcnMtbWFuYWdlbWVudC5kZTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCC
AQoCggEBAMan/r/869arZeTbuRAtXtkWdVLfZc4yZmoQSmi1o7hsvieLKpQsFzdgn1mZmkbWmSZE
4GskdOlFcEBMOpnn8RrSsuvC1tHTEObUXIJVe9xL1M1u99SdmmkRvbnkDB+EZL/5G96SsW5IpJFk
tXBQuTYqhRJZKBjJr2Vx1zdjY4WrTBcdd8Go7LDRXwIjF2ARHSu7BPy63BMbErnUhfAG8Pzd2koO
MttLKLle+uigut0mgVvV4ORDwg0L6xGQ/ryh577Au5iFT2NjmISBRPNVMbQ12lhfd1Y1FcGCsqTq
JWDagb9pbjpo5fUFrLWciRMyC+r91UpB5YNiVcX0X1NaLq8CAwEAAaOCAwQwggMAMAkGA1UdEwQC
MAAwCwYDVR0PBAQDAgSwMB0GA1UdJQQWMBQGCCsGAQUFBwMCBggrBgEFBQcDBDAdBgNVHQ4EFgQU
SFBSKK/gXGz7+UpP4+T3aj/IhrEwHwYDVR0jBBgwFoAUrlWDb+wxyrn3HfqvazHzyB3jrLswJgYD
VR0RBB8wHYEbdC5zdHJhdXNzQHNycy1tYW5hZ2VtZW50LmRlMIIBQgYDVR0gBIIBOTCCATUwggEx
BgsrBgEEAYG1NwECAjCCASAwLgYIKwYBBQUHAgEWImh0dHA6Ly93d3cuc3RhcnRzc2wuY29tL3Bv
bGljeS5wZGYwNAYIKwYBBQUHAgEWKGh0dHA6Ly93d3cuc3RhcnRzc2wuY29tL2ludGVybWVkaWF0
ZS5wZGYwgbcGCCsGAQUFBwICMIGqMBQWDVN0YXJ0Q29tIEx0ZC4wAwIBARqBkUxpbWl0ZWQgTGlh
YmlsaXR5LCBzZWUgc2VjdGlvbiAqTGVnYWwgTGltaXRhdGlvbnMqIG9mIHRoZSBTdGFydENvbSBD
ZXJ0aWZpY2F0aW9uIEF1dGhvcml0eSBQb2xpY3kgYXZhaWxhYmxlIGF0IGh0dHA6Ly93d3cuc3Rh
cnRzc2wuY29tL3BvbGljeS5wZGYwYwYDVR0fBFwwWjAroCmgJ4YlaHR0cDovL3d3dy5zdGFydHNz
bC5jb20vY3J0dTItY3JsLmNybDAroCmgJ4YlaHR0cDovL2NybC5zdGFydHNzbC5jb20vY3J0dTIt
Y3JsLmNybDCBjgYIKwYBBQUHAQEEgYEwfzA5BggrBgEFBQcwAYYtaHR0cDovL29jc3Auc3RhcnRz
c2wuY29tL3N1Yi9jbGFzczIvY2xpZW50L2NhMEIGCCsGAQUFBzAChjZodHRwOi8vd3d3LnN0YXJ0
c3NsLmNvbS9jZXJ0cy9zdWIuY2xhc3MyLmNsaWVudC5jYS5jcnQwIwYDVR0SBBwwGoYYaHR0cDov
L3d3dy5zdGFydHNzbC5jb20vMA0GCSqGSIb3DQEBBQUAA4IBAQDExaKVxBLZk7M94nEhKkhuqg4n
QiQ9kWG5jJH9qH23x8HrFYVOK0uZ7RJlyYZzblZRH1VhyiJEIGRwCYHy5fslfFYZVs6vJcJ5BSvj
H9yRmAs+JZNABl6dQ5VLjIIJv6rTHiOycrD93Ge1LOk+sg+WSCIEGHazvvU4HMqoeyhtZSKfGvOb
ShFMov1CkzJHHl9U1NWZXuhVp2WPsMCp2oQGUr8fy2hyPzqhfjse31zlkjDFCIgKw/ygnkjmqtJq
e9pjv5CLxjXJX7WJzuEP/4N4krQlLzHyL2LHgbn7AQ3Uw6XSjnfFavtaZo0hzS7tfuKCbGwIzP5e
5PplYumjubJPMIIHyTCCBbGgAwIBAgIBATANBgkqhkiG9w0BAQUFADB9MQswCQYDVQQGEwJJTDEW
MBQGA1UEChMNU3RhcnRDb20gTHRkLjErMCkGA1UECxMiU2VjdXJlIERpZ2l0YWwgQ2VydGlmaWNh
dGUgU2lnbmluZzEpMCcGA1UEAxMgU3RhcnRDb20gQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwHhcN
MDYwOTE3MTk0NjM2WhcNMzYwOTE3MTk0NjM2WjB9MQswCQYDVQQGEwJJTDEWMBQGA1UEChMNU3Rh
cnRDb20gTHRkLjErMCkGA1UECxMiU2VjdXJlIERpZ2l0YWwgQ2VydGlmaWNhdGUgU2lnbmluZzEp
MCcGA1UEAxMgU3RhcnRDb20gQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwggIiMA0GCSqGSIb3DQEB
AQUAA4ICDwAwggIKAoICAQDBiNsJvGxGfHiflXu1M5DycmLWwTYgIiRezul38kMKogZkpMyONvg4
5iPwbm2xPN1yo4UcodM9tDMr0y+v/uqwQVlntsQGfQqedIXWeUyAN3rfOQVSWff0G0ZDpNKFhdLD
cfN1YjS6LIp/Ho/u7TTQEceWzVI9ujPW3U3eCztKS5/CJi/6tRYccjV3yjxd5srhJosaNnZcAdt0
FCX+7bWgiA/deMotHweXMAEtcnn6RtYTKqi5pquDSR3l8u/d5AGOGAqPY1MWhWKpDhk6zLVmpsJr
dAfkK+F2PrRt2PZE4XNiHzvEvqBTViVsUQn3qqvKv3b9bZvzndu/PWa8DFaqr5hIlTpL36dYUNk4
dalb6kMMAv+Z6+hsTXBbKWWc3apdzK8BMewM69KN6Oqce+Zu9ydmDBpI125C4z/eIT574Q1w+2Oq
qGwaVLRcJXrJosmLFqa7LH4XXgVNWG4SHQHuEhANxjJ/GP/89PrNbpHoNkm+Gkhpi8KWTRoSsmkX
wQqQ1vp5Iki/untp+HDH+no32NgN0nZPV/+Qt+OR0t3vwmC3Zzrd/qqc8NSLf3Iizsafl7b4r4qg
EKjZ+xjGtrVcUjyJthkqcwEKDwOzEmDyei+B26Nu/yYwl/WL3YlXtq09s68rxbd2AvCl1iuahhQq
cvbjM4xdCUsT37uMdBNSSwIDAQABo4ICUjCCAk4wDAYDVR0TBAUwAwEB/zALBgNVHQ8EBAMCAa4w
HQYDVR0OBBYEFE4L7xqkQFulF2mHMMo0aEPQQa7yMGQGA1UdHwRdMFswLKAqoCiGJmh0dHA6Ly9j
ZXJ0LnN0YXJ0Y29tLm9yZy9zZnNjYS1jcmwuY3JsMCugKaAnhiVodHRwOi8vY3JsLnN0YXJ0Y29t
Lm9yZy9zZnNjYS1jcmwuY3JsMIIBXQYDVR0gBIIBVDCCAVAwggFMBgsrBgEEAYG1NwEBATCCATsw
LwYIKwYBBQUHAgEWI2h0dHA6Ly9jZXJ0LnN0YXJ0Y29tLm9yZy9wb2xpY3kucGRmMDUGCCsGAQUF
BwIBFilodHRwOi8vY2VydC5zdGFydGNvbS5vcmcvaW50ZXJtZWRpYXRlLnBkZjCB0AYIKwYBBQUH
AgIwgcMwJxYgU3RhcnQgQ29tbWVyY2lhbCAoU3RhcnRDb20pIEx0ZC4wAwIBARqBl0xpbWl0ZWQg
TGlhYmlsaXR5LCByZWFkIHRoZSBzZWN0aW9uICpMZWdhbCBMaW1pdGF0aW9ucyogb2YgdGhlIFN0
YXJ0Q29tIENlcnRpZmljYXRpb24gQXV0aG9yaXR5IFBvbGljeSBhdmFpbGFibGUgYXQgaHR0cDov
L2NlcnQuc3RhcnRjb20ub3JnL3BvbGljeS5wZGYwEQYJYIZIAYb4QgEBBAQDAgAHMDgGCWCGSAGG
+EIBDQQrFilTdGFydENvbSBGcmVlIFNTTCBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTANBgkqhkiG
9w0BAQUFAAOCAgEAFmyZ9GYMNPXQhV59CuzaEE44HF7fpiUFS5Eyweg78T3dRAlbB0mKKctmArex
mvclmAk8jhvh3TaHK0u7aNM5Zj2gJsfyOZEdUauCe37Vzlrk4gNXcGmXCPleWKYK34wGmkUWFjgK
Xlf2Ysd6AgXmvB618p70qSmD+LIU424oh0TDkBreOKk8rENNZEXO3SipXPJzewT4F+irsfMuXGRu
czE6Eri8sxHkfY+BUZo7jYn0TZNmezwD7dOaHZrzZVD1oNB1ny+v8OqCQ5j4aZyJecRDjkZy42Q2
Eq/3JR44iZB3fsNrarnDy0RLrHiQi+fHLB5LEUTINFInzQpdn4XBidUaePKVEFMy3YCEZnXZtWgo
+2EuvoSoOMCZEoalHmdkrQYuL6lwhceWD3yJZfWOQ1QOq92lgDmUYMA0yZZwLKMS9R9Ie70cfmu3
nZD0Ijuu+PwqyvqCUqDvr0tVk+vBtfAii6w0TiYiBKGHLHVKt+V9E9e4DGTANtLJL4YSjCMJwRuC
O3NJo2pXh5Tl1njFmUNj403gdy3hZZlyaQQaRwnmDwFWJPsfvw55qVguucQJAX6Vum0ABj6y6koQ
OdjQK/W/7HW/lwLFCRsI3FU34oH7N4RDYiDK51ZLZer+bMEkkyShNOsF/5oirpt9P/FlUQqmMGqz
9IgcgA38corog14xggQmMIIEIgIBATCBkzCBjDELMAkGA1UEBhMCSUwxFjAUBgNVBAoTDVN0YXJ0
Q29tIEx0ZC4xKzApBgNVBAsTIlNlY3VyZSBEaWdpdGFsIENlcnRpZmljYXRlIFNpZ25pbmcxODA2
BgNVBAMTL1N0YXJ0Q29tIENsYXNzIDIgUHJpbWFyeSBJbnRlcm1lZGlhdGUgQ2xpZW50IENBAgIJ
PzAJBgUrDgMCGgUAoIICZzAYBgkqhkiG9w0BCQMxCwYJKoZIhvcNAQcBMBwGCSqGSIb3DQEJBTEP
Fw0xMjA0MDMxMDM2MjZaMCMGCSqGSIb3DQEJBDEWBBRM5ixbwI/Gn4WQ0qmH8X+RD3i8HjCBpAYJ
KwYBBAGCNxAEMYGWMIGTMIGMMQswCQYDVQQGEwJJTDEWMBQGA1UEChMNU3RhcnRDb20gTHRkLjEr
MCkGA1UECxMiU2VjdXJlIERpZ2l0YWwgQ2VydGlmaWNhdGUgU2lnbmluZzE4MDYGA1UEAxMvU3Rh
cnRDb20gQ2xhc3MgMiBQcmltYXJ5IEludGVybWVkaWF0ZSBDbGllbnQgQ0ECAgk/MIGmBgsqhkiG
9w0BCRACCzGBlqCBkzCBjDELMAkGA1UEBhMCSUwxFjAUBgNVBAoTDVN0YXJ0Q29tIEx0ZC4xKzAp
BgNVBAsTIlNlY3VyZSBEaWdpdGFsIENlcnRpZmljYXRlIFNpZ25pbmcxODA2BgNVBAMTL1N0YXJ0
Q29tIENsYXNzIDIgUHJpbWFyeSBJbnRlcm1lZGlhdGUgQ2xpZW50IENBAgIJPzCBtwYJKoZIhvcN
AQkPMYGpMIGmMAsGCWCGSAFlAwQBKjALBglghkgBZQMEARYwCgYIKoZIhvcNAwcwCwYJYIZIAWUD
BAECMA4GCCqGSIb3DQMCAgIAgDAHBgUrDgMCBzANBggqhkiG9w0DAgIBQDANBggqhkiG9w0DAgIB
KDAHBgUrDgMCGjALBglghkgBZQMEAgMwCwYJYIZIAWUDBAICMAsGCWCGSAFlAwQCATAKBggqhkiG
9w0CBTANBgkqhkiG9w0BAQEFAASCAQC1hVmRGCZjublq7uxgFqCzG97ZVVyNXjjIU45dlS3knXxV
1/QPL819TPRK5PIKQWcoVILJzVA/lw6uhXKLDBAfPspxyM3IPDMX1tYweCLqW2RDE/OhrcbRPJs4
DyShbXg/Wz2PQWk1//+39Gc3XQwBSHrOjViAoPPL1ELhuLQ5rDDejMN7gGiOiN8Ir/FChdzDqUtj
A7o54t0ziuQCA0rGWU+3zLFPAreis2+l1SjXq/HLszc7BaXUify5C6lXZ4fYkOnhjiyIMTGujh+E
i8sxBKyOKW9TRU51hr0G+w7O+dn57Q5hssPzDJv1ISONQAOdo3txE36neqi8iOteIpOmAAAAAAAA

------=_NextPart_000_0482_01CD1196.62D05740--

From users-return-233301-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr  3 11:42:59 2012
Return-Path: <users-return-233301-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A24B49D94
	for <apmail-tomcat-users-archive@www.apache.org>; Tue,  3 Apr 2012 11:42:59 +0000 (UTC)
Received: (qmail 3663 invoked by uid 500); 3 Apr 2012 11:42:56 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 3608 invoked by uid 500); 3 Apr 2012 11:42:56 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 3599 invoked by uid 99); 3 Apr 2012 11:42:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 11:42:56 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aw@ice-sa.com designates 212.85.38.228 as permitted sender)
Received: from [212.85.38.228] (HELO tor.combios.es) (212.85.38.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 11:42:49 +0000
Received: from [192.168.245.129] (p549E8B0A.dip0.t-ipconnect.de [84.158.139.10])
	by tor.combios.es (Postfix) with ESMTPA id 18A52DA0050
	for <users@tomcat.apache.org>; Tue,  3 Apr 2012 13:42:26 +0200 (CEST)
Message-ID: <4F7AE221.10605@ice-sa.com>
Date: Tue, 03 Apr 2012 13:42:25 +0200
From: =?UTF-8?B?QW5kcsOpIFdhcm5pZXI=?= <aw@ice-sa.com>
Reply-To: Tomcat Users List <users@tomcat.apache.org>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Tomcat6 - Context - aliases
References: <1333360773430-4678428.post@n6.nabble.com> <CABzHfVn5uKEF9RKGUkqGGq56DLNFhRFm6Y_PUSUq--x3=yMpvw@mail.gmail.com> <1333363527730-4678513.post@n6.nabble.com> <4F7A11D7.80205@christopherschultz.net> <1333444940374-4681421.post@n6.nabble.com>
In-Reply-To: <1333444940374-4681421.post@n6.nabble.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

La Massiot wrote:
> Thank you all three for your last answers.
> 
> 
> Andr Warnier wrote
>> this might help, in a container- and version-independent way :
>> http://jaitechwriteups.blogspot.de/2007/01/how-to-read-properties-file-in-web.html
> I'm sorry, no offence... but I don't see how... :/
> 
No offence taken.

What I meant (if I understood your basic issue properly) was :
- you need to tell your webapp where the uploaded files should be stored/retrieved
- you cannot do it via an "alias" under Tomcat < v7
- so instead of an alias, do it via a property in a properties file, which your webapp 
would read
This is (almost) a "pure java" solution, which would work under any servlet container of 
any version.

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233302-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr  3 11:52:42 2012
Return-Path: <users-return-233302-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0DC6690FB
	for <apmail-tomcat-users-archive@www.apache.org>; Tue,  3 Apr 2012 11:52:42 +0000 (UTC)
Received: (qmail 36472 invoked by uid 500); 3 Apr 2012 11:52:38 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 36419 invoked by uid 500); 3 Apr 2012 11:52:38 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 36410 invoked by uid 99); 3 Apr 2012 11:52:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 11:52:38 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [203.91.198.75] (HELO wipro-blr-out02.wipro.com) (203.91.198.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 11:52:31 +0000
X-AuditID: cb5bdd58-b7b45ae000001d45-ef-4f7ae468fc2b
Received: from BLR-OUT-EDG03.wipro.com ( [203.91.193.33])
	(using TLS with cipher AES128-SHA (AES128-SHA/128 bits))
	(Client did not present a certificate)
	by wipro-blr-out02.wipro.com (Symantec Mail Security) with SMTP id 25.0D.07493.864EA7F4; Tue,  3 Apr 2012 17:22:08 +0530 (IST)
Received: from BLR-EC-MBX6.wipro.com (10.208.51.116) by
 BLR-OUT-EDG03.wipro.com (203.91.193.33) with Microsoft SMTP Server (TLS) id
 14.1.289.1; Tue, 3 Apr 2012 17:22:08 +0530
Received: from BLR-EC-MBX5.wipro.com ([169.254.5.54]) by BLR-EC-MBX6.wipro.com
 ([169.254.6.79]) with mapi id 14.01.0289.001; Tue, 3 Apr 2012 17:22:08 +0530
From: <pawan.kumar23@wipro.com>
To: <users@tomcat.apache.org>
Subject: Enabling Manager
Thread-Topic: Enabling Manager
Thread-Index: AQHNEZAy+t1LiaYFSU+Cr2tDleOH6Q==
Date: Tue, 3 Apr 2012 11:52:08 +0000
Message-ID: <CF64939C62EF5641907A2ABAB5C9C33507F7AF@BLR-EC-MBX5.wipro.com>
References: <4F5BFA46.6030103@gmail.com>	<4F5C7F0F.9010404@pidster.com>
	<4F5CD403.5050109@gmail.com>
 <CABzHfV=U_QPoJ24nTJpJW-r-A9gOM-_9XQpre2TYQhGDUYMM0A@mail.gmail.com>
 <4F5CEC40.70709@gmail.com>
In-Reply-To: <4F5CEC40.70709@gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-cr-hashedpuzzle: AfYP ArGr AyYe BoaV Cbv4 Cs5s DcSx D16k Ew8I FYuR FkKE
 F0ds HOTb H415 IMqW
 Iu4w;1;dQBzAGUAcgBzAEAAdABvAG0AYwBhAHQALgBhAHAAYQBjAGgAZQAuAG8AcgBnAA==;Sosha1_v1;7;{74E0BC61-6103-4F3C-8D0B-7FF5E4C91286};cABhAHcAYQBuAC4AawB1AG0AYQByADIAMwBAAHcAaQBwAHIAbwAuAGMAbwBtAA==;Tue,
 03 Apr 2012 11:50:46 GMT;RQBuAGEAYgBsAGkAbgBnACAATQBhAG4AYQBnAGUAcgA=
x-cr-puzzleid: {74E0BC61-6103-4F3C-8D0B-7FF5E4C91286}
x-originating-ip: [10.207.78.170]
Content-Type: text/plain; charset="us-ascii"
content-transfer-encoding: quoted-printable
MIME-Version: 1.0
X-Brightmail-Tracker: AAAAAQAAAZE=

Hi guys,


Can any body explain, how to enable Manager in Tomcat? 
We are using tomcat-6.0.32.B.RELEASE.


Rgds,
pawan


Please do not print this email unless it is absolutely necessary. =0A=
=0A=
The information contained in this electronic message and any attachments to=
 this message are intended for the exclusive use of the addressee(s) and may=
 contain proprietary, confidential or privileged information. If you are not=
 the intended recipient, you should not disseminate, distribute or copy this=
 e-mail. Please notify the sender immediately and destroy all copies of this=
 message and any attachments. =0A=
=0A=
WARNING: Computer viruses can be transmitted via email. The recipient should=
 check this email and any attachments for the presence of viruses. The compa=
ny accepts no liability for any damage caused by any virus transmitted by th=
is email. =0A=
=0A=
www.wipro.com

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233303-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr  3 11:54:05 2012
Return-Path: <users-return-233303-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A7A85918D
	for <apmail-tomcat-users-archive@www.apache.org>; Tue,  3 Apr 2012 11:54:05 +0000 (UTC)
Received: (qmail 43778 invoked by uid 500); 3 Apr 2012 11:54:02 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 43601 invoked by uid 500); 3 Apr 2012 11:54:02 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 43588 invoked by uid 99); 3 Apr 2012 11:54:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 11:54:02 +0000
X-ASF-Spam-Status: No, hits=-4.3 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [192.35.17.2] (HELO thoth.sbs.de) (192.35.17.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 11:53:56 +0000
Received: from mail1.siemens.de (localhost [127.0.0.1])
	by thoth.sbs.de (8.13.6/8.13.6) with ESMTP id q33BrWJH015173
	for <users@tomcat.apache.org>; Tue, 3 Apr 2012 13:53:32 +0200
Received: from DEMCHP99ET1MSX.ww902.siemens.net (demchp99et1msx.ww902.siemens.net [139.25.131.180])
	by mail1.siemens.de (8.13.6/8.13.6) with ESMTP id q33BrWaK009573
	(version=TLSv1/SSLv3 cipher=RC4-MD5 bits=128 verify=FAIL)
	for <users@tomcat.apache.org>; Tue, 3 Apr 2012 13:53:32 +0200
Received: from DEMCHP99E84MSX.ww902.siemens.net ([169.254.1.87]) by
 DEMCHP99ET1MSX.ww902.siemens.net ([139.25.131.180]) with mapi; Tue, 3 Apr
 2012 13:53:31 +0200
From: "Osipov, Michael" <michael.osipov@siemens.com>
To: Tomcat Users List <users@tomcat.apache.org>
Date: Tue, 3 Apr 2012 13:53:30 +0200
Subject: RE: Enabling Manager
Thread-Topic: Enabling Manager
Thread-Index: AQHNEZAy+t1LiaYFSU+Cr2tDleOH6ZaI/ZYg
Message-ID: <6368FCCCD803D64BB0931D7F5F0A3DD502274ED745@DEMCHP99E84MSX.ww902.siemens.net>
References: <4F5BFA46.6030103@gmail.com>	<4F5C7F0F.9010404@pidster.com>
	<4F5CD403.5050109@gmail.com>
 <CABzHfV=U_QPoJ24nTJpJW-r-A9gOM-_9XQpre2TYQhGDUYMM0A@mail.gmail.com>
 <4F5CEC40.70709@gmail.com>
 <CF64939C62EF5641907A2ABAB5C9C33507F7AF@BLR-EC-MBX5.wipro.com>
In-Reply-To: <CF64939C62EF5641907A2ABAB5C9C33507F7AF@BLR-EC-MBX5.wipro.com>
Accept-Language: de-DE
Content-Language: de-DE
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: de-DE
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

pawan.kumar23@wipro.com wrote:
> Hi guys,
>=20
>=20
> Can any body explain, how to enable Manager in Tomcat?
> We are using tomcat-6.0.32.B.RELEASE.

By reading he documentation!=

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233304-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr  3 11:58:31 2012
Return-Path: <users-return-233304-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8A0F195EF
	for <apmail-tomcat-users-archive@www.apache.org>; Tue,  3 Apr 2012 11:58:31 +0000 (UTC)
Received: (qmail 59594 invoked by uid 500); 3 Apr 2012 11:58:28 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 59452 invoked by uid 500); 3 Apr 2012 11:58:28 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 59443 invoked by uid 99); 3 Apr 2012 11:58:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 11:58:28 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.91.198.75] (HELO wipro-blr-out02.wipro.com) (203.91.198.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 11:58:21 +0000
X-AuditID: cb5bdd58-b7b45ae000001d45-9d-4f7ae5c6d399
Received: from BLR-OUT-EDG01.wipro.com ( [203.91.193.31])
	(using TLS with cipher AES128-SHA (AES128-SHA/128 bits))
	(Client did not present a certificate)
	by wipro-blr-out02.wipro.com (Symantec Mail Security) with SMTP id 36.BD.07493.6C5EA7F4; Tue,  3 Apr 2012 17:27:58 +0530 (IST)
Received: from BLR-EC-MBX8.wipro.com (10.208.51.118) by
 BLR-OUT-EDG01.wipro.com (203.91.193.31) with Microsoft SMTP Server (TLS) id
 14.1.289.1; Tue, 3 Apr 2012 17:27:57 +0530
Received: from BLR-EC-MBX5.wipro.com ([169.254.5.54]) by BLR-EC-MBX8.wipro.com
 ([169.254.8.35]) with mapi id 14.01.0289.001; Tue, 3 Apr 2012 17:27:57 +0530
From: <pawan.kumar23@wipro.com>
To: <users@tomcat.apache.org>
Subject: RE: Enabling Manager
Thread-Topic: Enabling Manager
Thread-Index: AQHNEZAy+t1LiaYFSU+Cr2tDleOH6ZaI/ZYggAAAa9A=
Date: Tue, 3 Apr 2012 11:57:57 +0000
Message-ID: <CF64939C62EF5641907A2ABAB5C9C33507F7C2@BLR-EC-MBX5.wipro.com>
References: <4F5BFA46.6030103@gmail.com>	<4F5C7F0F.9010404@pidster.com>
	<4F5CD403.5050109@gmail.com>
 <CABzHfV=U_QPoJ24nTJpJW-r-A9gOM-_9XQpre2TYQhGDUYMM0A@mail.gmail.com>
 <4F5CEC40.70709@gmail.com>
 <CF64939C62EF5641907A2ABAB5C9C33507F7AF@BLR-EC-MBX5.wipro.com>
 <6368FCCCD803D64BB0931D7F5F0A3DD502274ED745@DEMCHP99E84MSX.ww902.siemens.net>
In-Reply-To: <6368FCCCD803D64BB0931D7F5F0A3DD502274ED745@DEMCHP99E84MSX.ww902.siemens.net>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-cr-hashedpuzzle: AKbH Aegl EAJC FFWw FbKm Fx3w GPbM GQTx GVsI G+g2 Iem8
 Iuhi JoXp KE5y KP0S
 LpRd;1;dQBzAGUAcgBzAEAAdABvAG0AYwBhAHQALgBhAHAAYQBjAGgAZQAuAG8AcgBnAA==;Sosha1_v1;7;{973218D4-04E2-49B6-A9CD-18F6A860208F};cABhAHcAYQBuAC4AawB1AG0AYQByADIAMwBAAHcAaQBwAHIAbwAuAGMAbwBtAA==;Tue,
 03 Apr 2012 11:56:37
 GMT;UgBFADoAIABFAG4AYQBiAGwAaQBuAGcAIABNAGEAbgBhAGcAZQByAA==
x-cr-puzzleid: {973218D4-04E2-49B6-A9CD-18F6A860208F}
x-originating-ip: [10.207.78.170]
Content-Type: text/plain; charset="us-ascii"
content-transfer-encoding: quoted-printable
MIME-Version: 1.0
X-Brightmail-Tracker: AAAAAQAAAZE=
X-Virus-Checked: Checked by ClamAV on apache.org

Hey, I mean, I tried with the configuration in tomcat-users.xml.

Here added the users and restarted the server, but iam getting 404 error her=
e.

-----Original Message-----
From: Osipov, Michael [mailto:michael.osipov@siemens.com] 
Sent: Tuesday, April 03, 2012 5:24 PM
To: Tomcat Users List
Subject: RE: Enabling Manager

pawan.kumar23@wipro.com wrote:
> Hi guys,
> 
> 
> Can any body explain, how to enable Manager in Tomcat?
> We are using tomcat-6.0.32.B.RELEASE.

By reading he documentation!
---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


Please do not print this email unless it is absolutely necessary. =0A=
=0A=
The information contained in this electronic message and any attachments to=
 this message are intended for the exclusive use of the addressee(s) and may=
 contain proprietary, confidential or privileged information. If you are not=
 the intended recipient, you should not disseminate, distribute or copy this=
 e-mail. Please notify the sender immediately and destroy all copies of this=
 message and any attachments. =0A=
=0A=
WARNING: Computer viruses can be transmitted via email. The recipient should=
 check this email and any attachments for the presence of viruses. The compa=
ny accepts no liability for any damage caused by any virus transmitted by th=
is email. =0A=
=0A=
www.wipro.com

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233305-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr  3 12:07:17 2012
Return-Path: <users-return-233305-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E01ED9805
	for <apmail-tomcat-users-archive@www.apache.org>; Tue,  3 Apr 2012 12:07:16 +0000 (UTC)
Received: (qmail 78335 invoked by uid 500); 3 Apr 2012 12:07:13 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 78092 invoked by uid 500); 3 Apr 2012 12:07:13 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 78082 invoked by uid 99); 3 Apr 2012 12:07:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 12:07:13 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aw@ice-sa.com designates 212.85.38.228 as permitted sender)
Received: from [212.85.38.228] (HELO tor.combios.es) (212.85.38.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 12:07:03 +0000
Received: from [192.168.245.129] (p549E8B0A.dip0.t-ipconnect.de [84.158.139.10])
	by tor.combios.es (Postfix) with ESMTPA id 3A8EEDA071B
	for <users@tomcat.apache.org>; Tue,  3 Apr 2012 14:06:42 +0200 (CEST)
Message-ID: <4F7AE7D1.6070106@ice-sa.com>
Date: Tue, 03 Apr 2012 14:06:41 +0200
From: =?ISO-8859-1?Q?Andr=E9_Warnier?= <aw@ice-sa.com>
Reply-To: Tomcat Users List <users@tomcat.apache.org>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: AW: FormAuthentication Valve changes fail with RequestListeners?
References: <983BCB8DEFCDA248B640B2F6373CAE8D6DC8F52285@SRS-EXCH-02.bensheim.srs>	<CABzHfVkwa9tuH+QkSDteZRQ3_q85PWbkSHqSAaU5pvvLB57iwA@mail.gmail.com>	<983BCB8DEFCDA248B640B2F6373CAE8D6DC8F522C7@SRS-EXCH-02.bensheim.srs> <CABzHfVnoJ1hk77=FuhcKpFVBJGFoDoGPLhgpKQyxWL3AvmM42A@mail.gmail.com> <983BCB8DEFCDA248B640B2F6373CAE8D6DC8F52345@SRS-EXCH-02.bensheim.srs>
In-Reply-To: <983BCB8DEFCDA248B640B2F6373CAE8D6DC8F52345@SRS-EXCH-02.bensheim.srs>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit

Thomas Strau wrote:
...

>>>
>>> We have not succeeded so far. I want to give you some more information
>>> what happens, the context.xml and the web.xml
>>>
>>> What we have changed versus the existing setup, working on 7.0.11
>>> - We have moved the login.jsp into the protection domain (was outside
>>> before). This did not remove the issue.
>>> - We have changed the preemptiveAuthentication setting. This did not
>>> remove the issue.
>>>
>>> This is the flow through the system that we can see:
>>>
>>> Client sends request to /portal
>>>
>>>        /portal is not protected
>>>        /portal/jsp/main.jsp is welcome page and protected (see
>>> web.xml)
>>>        portal context configures formauthentication on the protection
>>> domain
>>>        Tomcat redirects/forwards incoming call to /jsp/login.jsp
>>> (protected
>>> resource)
>>>

I have not followed in the details, and maybe I am talking out of turn here, but isn't 
there a "loop" problem if the login.jsp page is itself protected ?
(Like it will trigger the authentication, which will trigger a redirect to login.jsp, 
which will trigger the authentication, which will... etc.)

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233306-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr  3 12:08:56 2012
Return-Path: <users-return-233306-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 452C198BB
	for <apmail-tomcat-users-archive@www.apache.org>; Tue,  3 Apr 2012 12:08:56 +0000 (UTC)
Received: (qmail 86950 invoked by uid 500); 3 Apr 2012 12:08:52 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 86879 invoked by uid 500); 3 Apr 2012 12:08:52 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 86870 invoked by uid 99); 3 Apr 2012 12:08:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 12:08:52 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aw@ice-sa.com designates 212.85.38.228 as permitted sender)
Received: from [212.85.38.228] (HELO tor.combios.es) (212.85.38.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 12:08:45 +0000
Received: from [192.168.245.129] (p549E8B0A.dip0.t-ipconnect.de [84.158.139.10])
	by tor.combios.es (Postfix) with ESMTPA id DD674DA0719
	for <users@tomcat.apache.org>; Tue,  3 Apr 2012 14:08:23 +0200 (CEST)
Message-ID: <4F7AE836.4090505@ice-sa.com>
Date: Tue, 03 Apr 2012 14:08:22 +0200
From: =?ISO-8859-1?Q?Andr=E9_Warnier?= <aw@ice-sa.com>
Reply-To: Tomcat Users List <users@tomcat.apache.org>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Enabling Manager
References: <4F5BFA46.6030103@gmail.com>	<4F5C7F0F.9010404@pidster.com>	<4F5CD403.5050109@gmail.com> <CABzHfV=U_QPoJ24nTJpJW-r-A9gOM-_9XQpre2TYQhGDUYMM0A@mail.gmail.com> <4F5CEC40.70709@gmail.com> <CF64939C62EF5641907A2ABAB5C9C33507F7AF@BLR-EC-MBX5.wipro.com> <6368FCCCD803D64BB0931D7F5F0A3DD502274ED745@DEMCHP99E84MSX.ww902.siemens.net> <CF64939C62EF5641907A2ABAB5C9C33507F7C2@BLR-EC-MBX5.wipro.com>
In-Reply-To: <CF64939C62EF5641907A2ABAB5C9C33507F7C2@BLR-EC-MBX5.wipro.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

pawan.kumar23@wipro.com wrote:
> Hey, I mean, I tried with the configuration in tomcat-users.xml.
> 
> Here added the users and restarted the server, but iam getting 404 error here.

Maybe you forgot to remove a <!-- ... --> pair somewhere ?

> 
> -----Original Message-----
> From: Osipov, Michael [mailto:michael.osipov@siemens.com] 
> Sent: Tuesday, April 03, 2012 5:24 PM
> To: Tomcat Users List
> Subject: RE: Enabling Manager
> 
> pawan.kumar23@wipro.com wrote:
>> Hi guys,
>>
>>
>> Can any body explain, how to enable Manager in Tomcat?
>> We are using tomcat-6.0.32.B.RELEASE.
> 
> By reading he documentation!
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
> 
> 
> Please do not print this email unless it is absolutely necessary. 
> 
> The information contained in this electronic message and any attachments to this message are intended for the exclusive use of the addressee(s) and may contain proprietary, confidential or privileged information. If you are not the intended recipient, you should not disseminate, distribute or copy this e-mail. Please notify the sender immediately and destroy all copies of this message and any attachments. 
> 
> WARNING: Computer viruses can be transmitted via email. The recipient should check this email and any attachments for the presence of viruses. The company accepts no liability for any damage caused by any virus transmitted by this email. 
> 
> www.wipro.com
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233307-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr  3 12:55:49 2012
Return-Path: <users-return-233307-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6D9E69F91
	for <apmail-tomcat-users-archive@www.apache.org>; Tue,  3 Apr 2012 12:55:49 +0000 (UTC)
Received: (qmail 81282 invoked by uid 500); 3 Apr 2012 12:55:41 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 81136 invoked by uid 500); 3 Apr 2012 12:55:41 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 80944 invoked by uid 99); 3 Apr 2012 12:55:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 12:55:41 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [216.82.249.147] (HELO mail29.messagelabs.com) (216.82.249.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 12:55:32 +0000
X-Env-Sender: Chuck.Caldarale@unisys.com
X-Msg-Ref: server-10.tower-29.messagelabs.com!1333457707!18741697!7
X-Originating-IP: [192.61.61.105]
X-StarScan-Version: 6.5.5; banners=-,-,-
X-VirusChecked: Checked
Received: (qmail 19620 invoked from network); 3 Apr 2012 12:55:10 -0000
Received: from naedge.unisys.com (HELO USEA-NAEDGE2.unisys.com) (192.61.61.105)
  by server-10.tower-29.messagelabs.com with RC4-SHA encrypted SMTP; 3 Apr 2012 12:55:10 -0000
Received: from usea-nahubcas1.na.uis.unisys.com (129.224.76.114) by
 USEA-NAEDGE2.unisys.com (192.61.61.105) with Microsoft SMTP Server (TLS) id
 8.3.83.0; Tue, 3 Apr 2012 07:55:08 -0500
Received: from USEA-EXCH8.na.uis.unisys.com ([129.224.76.41]) by
 usea-nahubcas1.na.uis.unisys.com ([129.224.76.114]) with mapi; Tue, 3 Apr
 2012 07:55:07 -0500
From: "Caldarale, Charles R" <Chuck.Caldarale@unisys.com>
To: Tomcat Users List <users@tomcat.apache.org>
Date: Tue, 3 Apr 2012 07:55:05 -0500
Subject: RE: Enabling Manager
Thread-Topic: Enabling Manager
Thread-Index: AQHNEZAy+t1LiaYFSU+Cr2tDleOH6ZaI/ZYggAAAa9CAABAiEA==
Message-ID: <99C8B2929B39C24493377AC7A121E21FB016C93B1C@USEA-EXCH8.na.uis.unisys.com>
References: <4F5BFA46.6030103@gmail.com>	<4F5C7F0F.9010404@pidster.com>
	<4F5CD403.5050109@gmail.com>
 <CABzHfV=U_QPoJ24nTJpJW-r-A9gOM-_9XQpre2TYQhGDUYMM0A@mail.gmail.com>
 <4F5CEC40.70709@gmail.com>
 <CF64939C62EF5641907A2ABAB5C9C33507F7AF@BLR-EC-MBX5.wipro.com>
 <6368FCCCD803D64BB0931D7F5F0A3DD502274ED745@DEMCHP99E84MSX.ww902.siemens.net>
 <CF64939C62EF5641907A2ABAB5C9C33507F7C2@BLR-EC-MBX5.wipro.com>
In-Reply-To: <CF64939C62EF5641907A2ABAB5C9C33507F7C2@BLR-EC-MBX5.wipro.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

> From: pawan.kumar23@wipro.com [mailto:pawan.kumar23@wipro.com]=20
> Subject: RE: Enabling Manager

> Can any body explain, how to enable Manager in Tomcat?
> We are using tomcat-6.0.32.B.RELEASE.

Since there's no official Tomcat release with that nomenclature, you'll hav=
e to ask whatever 3rd-party repackager you got that one from.  If you downl=
oad and install a real Tomcat from tomcat.apache.org, the manager webapp is=
 present and ready to run.

 - Chuck


THIS COMMUNICATION MAY CONTAIN CONFIDENTIAL AND/OR OTHERWISE PROPRIETARY MA=
TERIAL and is thus for use only by the intended recipient. If you received =
this in error, please contact the sender and delete the e-mail and its atta=
chments from all computers.


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233308-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr  3 13:33:06 2012
Return-Path: <users-return-233308-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3BE0E9D86
	for <apmail-tomcat-users-archive@www.apache.org>; Tue,  3 Apr 2012 13:33:06 +0000 (UTC)
Received: (qmail 1107 invoked by uid 500); 3 Apr 2012 13:33:02 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 925 invoked by uid 500); 3 Apr 2012 13:33:02 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 914 invoked by uid 99); 3 Apr 2012 13:33:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 13:33:02 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rosenberg.leon@gmail.com designates 209.85.213.173 as permitted sender)
Received: from [209.85.213.173] (HELO mail-yx0-f173.google.com) (209.85.213.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 13:32:56 +0000
Received: by yenr5 with SMTP id r5so2129439yen.18
        for <users@tomcat.apache.org>; Tue, 03 Apr 2012 06:32:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=lewfMkjDPsnItLtNccKZ2BLxBWUn8y4C2QltlqKiSxM=;
        b=vtdijtnnN00Evjwyvv/OgX7sqODI/CmxT4SWu61o7EGhC68iN9Z8djR3Oe27LPXONd
         ObB36PNPn4ZwoCXIeywuGQOmDxoZA0Kjf8qT2P5nGxRmLl1ZUs1UbqXShRzWTIGJBMfs
         M5qCcPoa+zkGu0X3+4+OsMF6olW+qLovvv9NEeHUtlHU8nhWPgWQ7eH0zChzDiaug4Ag
         lDd46QDzAsXQofcPb/K84RYZC48DayfGKEbMO48t06mX5zFiuQjTACv2ds6g6jfQj/R9
         lSN/KtNOhrFw4s4i3vUk/PuKN92YkFOGE/oeBDML62K/c8FVjT+UuULob7mlXfVJwzS1
         tp7w==
MIME-Version: 1.0
Received: by 10.60.27.98 with SMTP id s2mr18558493oeg.48.1333459950253; Tue,
 03 Apr 2012 06:32:30 -0700 (PDT)
Received: by 10.60.162.40 with HTTP; Tue, 3 Apr 2012 06:32:30 -0700 (PDT)
In-Reply-To: <9BFD8A9280D5F741802A3BA05AFFD87021353B@INFPWXM005.ad.unsw.edu.au>
References: <16157_1333393355_4F79F7CB_16157_14431_1_4F79F7D2.60408@yahoo.es>
	<99C8B2929B39C24493377AC7A121E21FB016BDFD47@USEA-EXCH8.na.uis.unisys.com>
	<4F7A02E3.1060703@christopherschultz.net>
	<9BFD8A9280D5F741802A3BA05AFFD87021353B@INFPWXM005.ad.unsw.edu.au>
Date: Tue, 3 Apr 2012 15:32:30 +0200
Message-ID: <CAE2_di3-+urZCzZg_QPFhLN-hLYzAWCKkmqF-fCJFtgbtsApww@mail.gmail.com>
Subject: Re: Bash script for monitoring status of the Tomcat server
From: Leon Rosenberg <rosenberg.leon@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

or...
you take moskito which comes with buildin threadmonitoring, configure
your thresholds, and watch logfile with your bashscript for
RED,YELLOW,ORANGE messages...
regards
Leon

P.S.
http://moskito.anotheria.net/moskitodemo/mui/mskThresholds

On Tue, Apr 3, 2012 at 1:20 AM, Darryl Lewis <darryl.lewis@unsw.edu.au> wro=
te:
> Try JavaMelody. It does a lot of monitoring straight out of the 'box'.
> For there, it is a small step to use wget to screen scrape values from Me=
lody and send emails once they exceed a threshold.
>
> -----Original Message-----
> From: Christopher Schultz [mailto:chris@christopherschultz.net]
> Sent: Tuesday, 3 April 2012 5:50 AM
> To: Tomcat Users List
> Subject: Re: Bash script for monitoring status of the Tomcat server
>
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Chuck,
>
> On 4/2/12 3:28 PM, Caldarale, Charles R wrote:
>>> From: Miguel Gonz=E1lez Casta=F1os
>>> [mailto:miguel_3_gonzalez@yahoo.es] Subject: Bash script for
>>> monitoring status of the Tomcat server
>>
>>> I would like to run a bash script to monitor these values and
>>> warn me if the reach a certain level. Also a tool that generates
>>> some graphs would be great.
>>
>> Not quite sure how you can put "bash" and "graphs" together, but
>> nonetheless...
>>
>> 2) Use wget or curl to access Tomcat's text-mode manager app and
>> parse the results.
>
> +1 -- and use the JMXProxyServlet, which lets you query specific
> components like the connectors. We've been doing this lately to great
> success.
>
> You can use a tool like rrdtool to store the data and generate
> nice-looking graphs over time. You can also easily use the same feed
> to do real-time monitoring using a tool like Nagios, Ichinga, etc.
>
>> 3) Use a command-line JMX tool like jmxsh
>> (http://code.google.com/p/jmxsh/) to extract information and parse
>> out whatever you want.
>
> While this is a tempting idea, when you start probing many different
> values via JMX, you'll find that starting a dozen JVMs and connecting
> via JMX starts to strain the server unnecessarily. That's why I
> recommend using JMXProxyServlet -- you get the power of JMX without
> actually making a JMX connection.
>
> - -chris
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
> Comment: GPGTools - http://gpgtools.org
> Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/
>
> iEYEARECAAYFAk96AuMACgkQ9CaO5/Lv0PAMqwCgnMEf3G54uFmERY1h/ezDRhCk
> aKIAnibgy+FJlo2Qcr87iOE6+43EP+gR
> =3DNIfs
> -----END PGP SIGNATURE-----
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233309-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr  3 13:42:53 2012
Return-Path: <users-return-233309-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2A7DC90FF
	for <apmail-tomcat-users-archive@www.apache.org>; Tue,  3 Apr 2012 13:42:53 +0000 (UTC)
Received: (qmail 29392 invoked by uid 500); 3 Apr 2012 13:42:49 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 29338 invoked by uid 500); 3 Apr 2012 13:42:49 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 29325 invoked by uid 99); 3 Apr 2012 13:42:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 13:42:49 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [38.100.17.194] (HELO dsboss.dsource.local) (38.100.17.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 13:42:42 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CD119F.51AE1249"
Subject: Enabling logging in Tomcat 5.5
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Tue, 3 Apr 2012 09:40:38 -0400
Message-ID: <A859ED91E5B64A49A34C4340328BB43D73B238@dsource.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Enabling logging in Tomcat 5.5
Thread-Index: Ac0RnvBFBIeGEC9mQ4W4tsdeqLPEAg==
From: "David Sills" <DSills@datasourceinc.com>
To: "Tomcat Users List" <users@tomcat.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01CD119F.51AE1249
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

All:

=20

I am forced by a client's requirement to use Java 1.4.2 (I know,
antediluvian, right?) and so to test on Tomcat 5.5 with the
compatibility package. So far, Tomcat works fine, with one exception: I
get no logs. I have set up logging just as suggested (in detail) in
http://tomcat.apache.org/tomcat-5.5-doc/logging.html, but without avail.
Any other ideas? My application isn't deploying, and I can't find out
why without logs, of course.

=20

David

=20


------_=_NextPart_001_01CD119F.51AE1249--

From users-return-233310-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr  3 13:45:43 2012
Return-Path: <users-return-233310-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0C85A922D
	for <apmail-tomcat-users-archive@www.apache.org>; Tue,  3 Apr 2012 13:45:43 +0000 (UTC)
Received: (qmail 42370 invoked by uid 500); 3 Apr 2012 13:45:39 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 42232 invoked by uid 500); 3 Apr 2012 13:45:39 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 42220 invoked by uid 99); 3 Apr 2012 13:45:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 13:45:39 +0000
X-ASF-Spam-Status: No, hits=1.0 required=5.0
	tests=SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (nike.apache.org: transitioning domain of david.nothnagel@prudential.com does not designate 216.139.250.139 as permitted sender)
Received: from [216.139.250.139] (HELO joe.nabble.com) (216.139.250.139)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 13:45:33 +0000
Received: from alf.nabble.com ([192.168.236.21])
	by joe.nabble.com with esmtp (Exim 4.72)
	(envelope-from <david.nothnagel@prudential.com>)
	id 1SF42o-0006EZ-DX
	for users@tomcat.apache.org; Tue, 03 Apr 2012 06:45:10 -0700
Date: Tue, 3 Apr 2012 06:45:10 -0700 (PDT)
From: DaveNoth <david.nothnagel@prudential.com>
To: users@tomcat.apache.org
Message-ID: <1333460710410-4682043.post@n6.nabble.com>
In-Reply-To: <4F7A0F60.8080008@christopherschultz.net>
References: <1333120922912-4671621.post@n6.nabble.com> <4F760DFA.20307@pidster.com> <1333366652527-4678609.post@n6.nabble.com> <4F799A0B.6000100@pidster.com> <4F79A062.8050100@ice-sa.com> <1333377032079-4679081.post@n6.nabble.com> <4F7A0F60.8080008@christopherschultz.net>
Subject: Re: Running Tomcat as a Standalone desktop Application
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Good point Chris.   Other then occasionally checking for updates, the system
is intended to remain offline.

dave

--
View this message in context: http://tomcat.10.n6.nabble.com/Running-Tomcat-as-a-Standalone-desktop-Application-tp4671621p4682043.html
Sent from the Tomcat - User mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233311-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr  3 14:03:04 2012
Return-Path: <users-return-233311-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 832A79934
	for <apmail-tomcat-users-archive@www.apache.org>; Tue,  3 Apr 2012 14:03:04 +0000 (UTC)
Received: (qmail 81917 invoked by uid 500); 3 Apr 2012 14:03:01 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 81757 invoked by uid 500); 3 Apr 2012 14:03:00 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 81748 invoked by uid 99); 3 Apr 2012 14:03:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 14:03:00 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of knst.kolinko@gmail.com designates 209.85.213.173 as permitted sender)
Received: from [209.85.213.173] (HELO mail-yx0-f173.google.com) (209.85.213.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 14:02:53 +0000
Received: by yenr5 with SMTP id r5so2162107yen.18
        for <users@tomcat.apache.org>; Tue, 03 Apr 2012 07:02:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=iSOaSAje4gk8BBUkkcjuctnumIdopb0sXIH9AtgHeP8=;
        b=iHb1JnOweK58HeDTy37AtXPi13Mzrmu7EPllO1LFn3tgNKbgB1wllI1vniQE1C3A5E
         PVhS113Np1CDa2i4RLVUvhqLIioD0pN8Dcjw1wF2xeLlvwRK2YIk9YbabHhY4WLAaXOc
         nobgaCu2izTd/OvNvnsmNVBrU5O5ibxFkRkmBhuFGt/O+i9xbiVHt3ibic/tG0fPcI8t
         VHUiKerJ2p8Z4yjyVc+e2+0UbgyrWze5xIwsrzeeJ3ZSlReytxReLhFavibXfwbRsMhi
         Squ2yJ89s+ZCmOLffBEcGUgf3SDTcMWqdH/pX25b8WyvemkEb0Cq8/mrAS7sIrnXMW1l
         pSMQ==
MIME-Version: 1.0
Received: by 10.100.246.24 with SMTP id t24mr3492228anh.0.1333461752913; Tue,
 03 Apr 2012 07:02:32 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Tue, 3 Apr 2012 07:02:32 -0700 (PDT)
In-Reply-To: <A859ED91E5B64A49A34C4340328BB43D73B238@dsource.local>
References: <A859ED91E5B64A49A34C4340328BB43D73B238@dsource.local>
Date: Tue, 3 Apr 2012 18:02:32 +0400
Message-ID: <CABzHfV=ZVt49_T21+hJNb-j6SLFQOB1605prcqBueLz6Mhy4uQ@mail.gmail.com>
Subject: Re: Enabling logging in Tomcat 5.5
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1

2012/4/3 David Sills <DSills@datasourceinc.com>:
>
> I am forced by a client's requirement to use Java 1.4.2 (I know,
> antediluvian, right?) and so to test on Tomcat 5.5 with the
> compatibility package. So far, Tomcat works fine, with one exception: I
> get no logs. I have set up logging just as suggested (in detail) in
> http://tomcat.apache.org/tomcat-5.5-doc/logging.html, but without avail.
> Any other ideas? My application isn't deploying, and I can't find out
> why without logs, of course.
>

1. Do you intend to use java.util.logging or log4j ?  I'd recommend the former.

But if you have log4j.jar  among "common" libraries then
commons-logging library will autoconfigure itself to use Log4J instead
of java.util.logging.

So the question is what libraries do you have and where.


2. java.util.logging should be configured by startup script to use
Tomcat implementation of it. See how catalina.sh does that (with
-Djava.util.logging etc).

So the question is how do you start your Tomcat.

3. There should be only one logging.properties for java.util.logging
(or log4j.properties for juli) in a classpath of certain class-loader.
If there are several files, one of them wins.


Do you have logging output on your console?  (or catalina.out file
where it is usually redirected)?

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233312-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr  3 14:03:45 2012
Return-Path: <users-return-233312-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1C22E9A22
	for <apmail-tomcat-users-archive@www.apache.org>; Tue,  3 Apr 2012 14:03:45 +0000 (UTC)
Received: (qmail 86535 invoked by uid 500); 3 Apr 2012 14:03:41 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 86447 invoked by uid 500); 3 Apr 2012 14:03:41 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 86437 invoked by uid 99); 3 Apr 2012 14:03:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 14:03:41 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [76.96.62.80] (HELO qmta08.westchester.pa.mail.comcast.net) (76.96.62.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 14:03:34 +0000
Received: from omta15.westchester.pa.mail.comcast.net ([76.96.62.87])
	by qmta08.westchester.pa.mail.comcast.net with comcast
	id tQoV1i0061swQuc58S3EQt; Tue, 03 Apr 2012 14:03:14 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta15.westchester.pa.mail.comcast.net with comcast
	id tS3D1i03H38FjT13bS3EgS; Tue, 03 Apr 2012 14:03:14 +0000
Message-ID: <4F7B0322.8020903@christopherschultz.net>
Date: Tue, 03 Apr 2012 10:03:14 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Ant Tasks Question
References: <00c82ddd5a8b1fb9cb75b0c98b39598d@mail.gmail.com> <4F7A0C98.9080101@christopherschultz.net> <a5e99375feec6f40641a51062ebcc411@mail.gmail.com>
In-Reply-To: <a5e99375feec6f40641a51062ebcc411@mail.gmail.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Nick,

On 4/2/12 5:43 PM, Nick Williams wrote:
> As for the ant-i-fication of the JspC compiler, I, too get the
> impression that it was rather an afterthought. However, it is not
> necessary or even that common for tasks to be called *Task, as
> Konstantin pointed out. Most of them /aren't/ named *Task.

I was mostly gathering corroborating evidence to suggest that JspC
being an Ant task was not its original intent: it's mostly geared
towards being a CLI tool and has some support for Ant slapped-onto it.
I'm not sure why Konstantin got so agitated about my comments about
the class name: it's obviously the least significant part of my argument.

> I'm aware that I can translate and compile as separate tasks, but
> that's not what I was looking for. I actually DO want to translate
> and compile with the same task, because I want the Eclipse compiler
> shipped with Tomcat to be used for compiling the JSPs.

Well, you can already do that from within JspC (though the CLI doesn't
actually use it) by setting "compiler" to either
"org.apache.jasper.compiler.JDTCompiler" or
"org.apache.jasper.compiler.AntCompiler" (or really anything that
implements org.apache.jasper.compiler.Compiler). The default is to use
the JDTCompiler when the translate and compile steps are performed
together. I have no idea how to invoke the JDT compiler from the
command-line given just the .jar file that contains it: I suspect
you'd be able to poke-around and figure out how to do that as a
separate Ant task, which might give you more flexibility.

> But your comment helps me out in expressing my desire: I feel like
> it should be able to fork and use whatever JVM I specify for
> executing the JspC task, whether I'm using JspC for translation
> and compilation or just translation.

Fair enough. Just because I'm curious: why do you care which JVM is
being used for the translation step?

> I agree that fork support should be expected of a nice player in
> the Ant ecosystem.

I'll have to read the code for some of the built-in Ant tasks to see
how that's traditionally done. It might make sense for the Jasper and
task to become a separate class from JspC, even if it heavily utilizes
JspC itself. Ideally, JspC would be "merely" the CLI wrapper around a
Compiler and a separate class would handle the Ant-related stuff. I
would even buy a common superclass for the two, but it's often tough
to tell what is there to support Ant and what isn't.

> Maybe what we really need, instead of attempting to retrofit JspC
> to be more Task-y, is add a new Task to o.a.catalina.ant
> (JasperTask? JspCompileTask?) and trying to follow some better
> practices with the new practice. What are the community thoughts on
> this? I can see both upsides and downsides to doing this.

Heh. I should have read this first. I obviously agree.

> I'll file enhancement requests in Bugzilla later today or tomorrow
> for the namespace and forking issues.

I'll look for those.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk97AyIACgkQ9CaO5/Lv0PCWjwCeIIJh0Qp9iooqN0ZRa23YOI55
GUwAoJGNiPlt/IO7r2PffDcEKKtDgdTu
=qORp
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233313-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr  3 15:31:36 2012
Return-Path: <users-return-233313-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9BD169F10
	for <apmail-tomcat-users-archive@www.apache.org>; Tue,  3 Apr 2012 15:31:36 +0000 (UTC)
Received: (qmail 77197 invoked by uid 500); 3 Apr 2012 15:31:33 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 77030 invoked by uid 500); 3 Apr 2012 15:31:33 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 77021 invoked by uid 99); 3 Apr 2012 15:31:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 15:31:33 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ksamayan@googlemail.com designates 209.85.212.177 as permitted sender)
Received: from [209.85.212.177] (HELO mail-wi0-f177.google.com) (209.85.212.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 15:31:28 +0000
Received: by wibhj13 with SMTP id hj13so3033674wib.0
        for <users@tomcat.apache.org>; Tue, 03 Apr 2012 08:31:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=20120113;
        h=references:in-reply-to:mime-version:content-transfer-encoding
         :content-type:message-id:cc:x-mailer:from:subject:date:to;
        bh=uQl5GXrh0BFCUOCZA3msK1ds9Rq0X4LcM3aZTt5buwI=;
        b=vsr4evKC3O+m4B5IJaM1Ei9kKJj8hvwh+ZeTS7T7JdnLQx13N4zIZofZ8pYnWNNda4
         VWy2E3YekpD49P8KMIzrSyj6npud1fr6ZcmT32qS2ySOHKORr3GvRdHt5TvBnWNByojp
         Ay/xdmqkUYVEHGd8Ep6Z9G5MGqcidciqqt30pDgugXAJSvkj4VerT3ETlIo83rW0GAir
         WG6fyZb3dPYEEzhoLPpbluQCpkPEqgCGq69M8hcVT+jc2TCsEgdDwtWYC7pF5dey08hi
         w7g43KvsM6CvTilOuKfsLePYQWypULg3xbWAr7xM2NptkbWzVoMswHldzQm1ZMc0Clzs
         UpBA==
Received: by 10.180.92.228 with SMTP id cp4mr7514566wib.2.1333467066741;
        Tue, 03 Apr 2012 08:31:06 -0700 (PDT)
Received: from [10.229.186.175] (dab-bhx1-nat-blade-2-1.dab.02.net. [82.132.228.222])
        by mx.google.com with ESMTPS id fl2sm70714279wib.4.2012.04.03.08.31.05
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 03 Apr 2012 08:31:06 -0700 (PDT)
References: <4F5BFA46.6030103@gmail.com> <4F5C7F0F.9010404@pidster.com> <4F5CD403.5050109@gmail.com> <CABzHfV=U_QPoJ24nTJpJW-r-A9gOM-_9XQpre2TYQhGDUYMM0A@mail.gmail.com> <4F5CEC40.70709@gmail.com> <CF64939C62EF5641907A2ABAB5C9C33507F7AF@BLR-EC-MBX5.wipro.com> <6368FCCCD803D64BB0931D7F5F0A3DD502274ED745@DEMCHP99E84MSX.ww902.siemens.net> <CF64939C62EF5641907A2ABAB5C9C33507F7C2@BLR-EC-MBX5.wipro.com> <99C8B2929B39C24493377AC7A121E21FB016C93B1C@USEA-EXCH8.na.uis.unisys.com>
In-Reply-To: <99C8B2929B39C24493377AC7A121E21FB016C93B1C@USEA-EXCH8.na.uis.unisys.com>
Mime-Version: 1.0 (iPhone Mail 8L1)
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=us-ascii
Message-Id: <CDD2B0E4-8E9F-4B52-B722-B9C320032558@gmail.com>
Cc: Tomcat Users List <users@tomcat.apache.org>
X-Mailer: iPhone Mail (8L1)
From: Muthu <ksamayan@googlemail.com>
Subject: Re: Enabling Manager
Date: Tue, 3 Apr 2012 16:30:59 +0100
To: Tomcat Users List <users@tomcat.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

You have to make sure /manager application available in /webapps folder of T=
omcat installation.

Sent from my iPhone

On 3 Apr 2012, at 13:55, "Caldarale, Charles R" <Chuck.Caldarale@unisys.com>=
 wrote:

>> From: pawan.kumar23@wipro.com [mailto:pawan.kumar23@wipro.com]
>> Subject: RE: Enabling Manager
>=20
>> Can any body explain, how to enable Manager in Tomcat?
>> We are using tomcat-6.0.32.B.RELEASE.
>=20
> Since there's no official Tomcat release with that nomenclature, you'll ha=
ve to ask whatever 3rd-party repackager you got that one from.  If you downl=
oad and install a real Tomcat from tomcat.apache.org, the manager webapp is p=
resent and ready to run.
>=20
> - Chuck
>=20
>=20
> THIS COMMUNICATION MAY CONTAIN CONFIDENTIAL AND/OR OTHERWISE PROPRIETARY M=
ATERIAL and is thus for use only by the intended recipient. If you received t=
his in error, please contact the sender and delete the e-mail and its attach=
ments from all computers.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233314-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr  3 17:03:22 2012
Return-Path: <users-return-233314-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D8CE299A9
	for <apmail-tomcat-users-archive@www.apache.org>; Tue,  3 Apr 2012 17:03:21 +0000 (UTC)
Received: (qmail 29163 invoked by uid 500); 3 Apr 2012 17:03:18 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 28961 invoked by uid 500); 3 Apr 2012 17:03:18 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 28952 invoked by uid 99); 3 Apr 2012 17:03:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 17:03:18 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [38.100.17.194] (HELO dsboss.dsource.local) (38.100.17.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 17:03:13 +0000
X-Ninja-PIM: Scanned by Ninja
X-Ninja-AttachmentFiltering: (no action)
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Enabling logging in Tomcat 5.5
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Tue, 3 Apr 2012 13:02:54 -0400
Message-ID: <A859ED91E5B64A49A34C4340328BB43D73B240@dsource.local>
In-Reply-To: <CABzHfV=ZVt49_T21+hJNb-j6SLFQOB1605prcqBueLz6Mhy4uQ@mail.gmail.com>
Thread-Topic: Enabling logging in Tomcat 5.5
Thread-Index: Ac0Roob1LA42jCfqQZaZeJsqgv5T4wAF3C7w
References: <A859ED91E5B64A49A34C4340328BB43D73B238@dsource.local> 
	<CABzHfV=ZVt49_T21+hJNb-j6SLFQOB1605prcqBueLz6Mhy4uQ@mail.gmail.com>
From: "David Sills" <DSills@datasourceinc.com>
To: "Tomcat Users List" <users@tomcat.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Konstantin:

Many thanks for your questions. I am using log4j (again, client
requirement - they like the formatting and they're familiar with the
configuration files). I'm currently using a fairly current version of
log4j (1.2.16), as it seems to be compiled against the JDK 1.2 or lower
APIs (thank heavens!). It is in the common/lib and the log4j.properties
is in common/classes, as specified in the instructions referred to below
(which also specifies the contents of the log4j.properties file), but
that didn't produce any logging output, either in the standard out or=
 in
files. It seems to be better if I create a "setenv.bat" file with this
content:

set
CLASSPATH=3D..\common\classes;..\common\lib\org.apache.log4j-1.2.16.jar

When this is placed in the "bin" directory, it is automatically run by
the catalina.bat file (which I discovered on walking through the
process). By default, such a file doesn't exist. This produces, at
least, a "tomcat.log" file.

So I am getting something. What, exactly, especially when it comes to
application logging, I'm still working through.

David Sills



-----Original Message-----
From: Konstantin Kolinko [mailto:knst.kolinko@gmail.com]=20
Sent: Tuesday, April 03, 2012 10:03 AM
To: Tomcat Users List
Subject: Re: Enabling logging in Tomcat 5.5

2012/4/3 David Sills <DSills@datasourceinc.com>:
>
> I am forced by a client's requirement to use Java 1.4.2 (I know,=20
> antediluvian, right?) and so to test on Tomcat 5.5 with the=20
> compatibility package. So far, Tomcat works fine, with one exception:=20
> I get no logs. I have set up logging just as suggested (in detail) in=20
> http://tomcat.apache.org/tomcat-5.5-doc/logging.html, but without
avail.
> Any other ideas? My application isn't deploying, and I can't find out=20
> why without logs, of course.
>

1. Do you intend to use java.util.logging or log4j ?  I'd recommend the
former.

But if you have log4j.jar  among "common" libraries then commons-logging
library will autoconfigure itself to use Log4J instead of
java.util.logging.

So the question is what libraries do you have and where.


2. java.util.logging should be configured by startup script to use
Tomcat implementation of it. See how catalina.sh does that (with
-Djava.util.logging etc).

So the question is how do you start your Tomcat.

3. There should be only one logging.properties for java.util.logging (or
log4j.properties for juli) in a classpath of certain class-loader.
If there are several files, one of them wins.


Do you have logging output on your console?  (or catalina.out file where
it is usually redirected)?

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233315-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr  3 17:23:50 2012
Return-Path: <users-return-233315-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E83BC9AA1
	for <apmail-tomcat-users-archive@www.apache.org>; Tue,  3 Apr 2012 17:23:49 +0000 (UTC)
Received: (qmail 6544 invoked by uid 500); 3 Apr 2012 17:23:46 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 6473 invoked by uid 500); 3 Apr 2012 17:23:46 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 6464 invoked by uid 99); 3 Apr 2012 17:23:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 17:23:46 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [76.96.62.96] (HELO qmta09.westchester.pa.mail.comcast.net) (76.96.62.96)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 17:23:40 +0000
Received: from omta14.westchester.pa.mail.comcast.net ([76.96.62.60])
	by qmta09.westchester.pa.mail.comcast.net with comcast
	id tVNq1i00j1HzFnQ59VPK4i; Tue, 03 Apr 2012 17:23:19 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta14.westchester.pa.mail.comcast.net with comcast
	id tVPK1i01438FjT13aVPK5m; Tue, 03 Apr 2012 17:23:19 +0000
Message-ID: <4F7B3206.8030800@christopherschultz.net>
Date: Tue, 03 Apr 2012 13:23:18 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Enabling logging in Tomcat 5.5
References: <A859ED91E5B64A49A34C4340328BB43D73B238@dsource.local>  <CABzHfV=ZVt49_T21+hJNb-j6SLFQOB1605prcqBueLz6Mhy4uQ@mail.gmail.com> <A859ED91E5B64A49A34C4340328BB43D73B240@dsource.local>
In-Reply-To: <A859ED91E5B64A49A34C4340328BB43D73B240@dsource.local>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

David,

On 4/3/12 1:02 PM, David Sills wrote:
> It seems to be better if I create a "setenv.bat" file with this 
> content:
> 
> set 
> CLASSPATH=..\common\classes;..\common\lib\org.apache.log4j-1.2.16.jar

You
> 
shouldn't have to do that: Tomcat should auto-configure its
CLASSPATH including the common locations you have specified above.
Does it really not work unless you explicitly set the CLASSPATH
environment variable?

> When this is placed in the "bin" directory, it is automatically run
> by the catalina.bat file (which I discovered on walking through
> the process).

Correct. It's kind of silly to ship a completely empty file, though
one could argue that a no-op file with comments in it might be a nice
thing to do.

> So I am getting something. What, exactly, especially when it comes
> to application logging, I'm still working through.

Let us know how things go for you.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk97MgYACgkQ9CaO5/Lv0PCqKwCfQ1NfnI4WeKa9H7gus3eY2ftI
x2YAn3iMEtBa2XMEtcLfNkp9ejg5SQLS
=yRwx
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233316-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr  3 18:01:21 2012
Return-Path: <users-return-233316-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DB9B89205
	for <apmail-tomcat-users-archive@www.apache.org>; Tue,  3 Apr 2012 18:01:20 +0000 (UTC)
Received: (qmail 33350 invoked by uid 500); 3 Apr 2012 18:01:17 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 33127 invoked by uid 500); 3 Apr 2012 18:01:17 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 33118 invoked by uid 99); 3 Apr 2012 18:01:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 18:01:17 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=MIME_BASE64_BLANKS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [38.100.17.194] (HELO dsboss.dsource.local) (38.100.17.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 18:01:11 +0000
X-Ninja-PIM: Scanned by Ninja
X-Ninja-AttachmentFiltering: (no action)
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: base64
Subject: RE: Enabling logging in Tomcat 5.5
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Tue, 3 Apr 2012 14:00:53 -0400
Message-ID: <A859ED91E5B64A49A34C4340328BB43D73B246@dsource.local>
In-Reply-To: <4F7B3206.8030800@christopherschultz.net>
Thread-Topic: Enabling logging in Tomcat 5.5
Thread-Index: Ac0RvpJ22auvvH3lQkiqC9CyOzKMfwABQYyA
References: <A859ED91E5B64A49A34C4340328BB43D73B238@dsource.local>  
	<CABzHfV=ZVt49_T21+hJNb-j6SLFQOB1605prcqBueLz6Mhy4uQ@mail.gmail.com> 
	<A859ED91E5B64A49A34C4340328BB43D73B240@dsource.local> 
	<4F7B3206.8030800@christopherschultz.net>
From: "David Sills" <DSills@datasourceinc.com>
To: "Tomcat Users List" <users@tomcat.apache.org>

QWN0dWFsbHksIHllcywgaXQgcmVhbGx5IGRvZXNuJ3Qgd29yayB1bmxlc3MgSSBleHBsaWNpdGx5
IHNldCB0aGUgb3BlbmluZyBjbGFzc3BhdGguIEkgc29ydCBvZiBnb3QgdGhlIGhpbnQgd2hlbiB0
aGUgZmFtb3VzIGVycm9yIG1lc3NhZ2UgYWJvdXQgbG9nNGogbm90IGJlaW5nIGNvbmZpZ3VyZWQg
Y29ycmVjdGx5IHN0YXJ0ZWQgcG9wcGluZyB1cC4NCg0KLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0t
LS0NCkZyb206IENocmlzdG9waGVyIFNjaHVsdHogW21haWx0bzpjaHJpc0BjaHJpc3RvcGhlcnNj
aHVsdHoubmV0XSANClNlbnQ6IFR1ZXNkYXksIEFwcmlsIDAzLCAyMDEyIDE6MjMgUE0NClRvOiBU
b21jYXQgVXNlcnMgTGlzdA0KU3ViamVjdDogUmU6IEVuYWJsaW5nIGxvZ2dpbmcgaW4gVG9tY2F0
IDUuNQ0KDQotLS0tLUJFR0lOIFBHUCBTSUdORUQgTUVTU0FHRS0tLS0tDQpIYXNoOiBTSEExDQoN
CkRhdmlkLA0KDQpPbiA0LzMvMTIgMTowMiBQTSwgRGF2aWQgU2lsbHMgd3JvdGU6DQo+IEl0IHNl
ZW1zIHRvIGJlIGJldHRlciBpZiBJIGNyZWF0ZSBhICJzZXRlbnYuYmF0IiBmaWxlIHdpdGggdGhp
cw0KPiBjb250ZW50Og0KPiANCj4gc2V0DQo+IENMQVNTUEFUSD0uLlxjb21tb25cY2xhc3Nlczsu
Llxjb21tb25cbGliXG9yZy5hcGFjaGUubG9nNGotMS4yLjE2Lmphcg0KDQpZb3UNCj4gDQpzaG91
bGRuJ3QgaGF2ZSB0byBkbyB0aGF0OiBUb21jYXQgc2hvdWxkIGF1dG8tY29uZmlndXJlIGl0cyBD
TEFTU1BBVEggaW5jbHVkaW5nIHRoZSBjb21tb24gbG9jYXRpb25zIHlvdSBoYXZlIHNwZWNpZmll
ZCBhYm92ZS4NCkRvZXMgaXQgcmVhbGx5IG5vdCB3b3JrIHVubGVzcyB5b3UgZXhwbGljaXRseSBz
ZXQgdGhlIENMQVNTUEFUSCBlbnZpcm9ubWVudCB2YXJpYWJsZT8NCg0KPiBXaGVuIHRoaXMgaXMg
cGxhY2VkIGluIHRoZSAiYmluIiBkaXJlY3RvcnksIGl0IGlzIGF1dG9tYXRpY2FsbHkgcnVuIGJ5
IA0KPiB0aGUgY2F0YWxpbmEuYmF0IGZpbGUgKHdoaWNoIEkgZGlzY292ZXJlZCBvbiB3YWxraW5n
IHRocm91Z2ggdGhlIA0KPiBwcm9jZXNzKS4NCg0KQ29ycmVjdC4gSXQncyBraW5kIG9mIHNpbGx5
IHRvIHNoaXAgYSBjb21wbGV0ZWx5IGVtcHR5IGZpbGUsIHRob3VnaCBvbmUgY291bGQgYXJndWUg
dGhhdCBhIG5vLW9wIGZpbGUgd2l0aCBjb21tZW50cyBpbiBpdCBtaWdodCBiZSBhIG5pY2UgdGhp
bmcgdG8gZG8uDQoNCj4gU28gSSBhbSBnZXR0aW5nIHNvbWV0aGluZy4gV2hhdCwgZXhhY3RseSwg
ZXNwZWNpYWxseSB3aGVuIGl0IGNvbWVzIHRvIA0KPiBhcHBsaWNhdGlvbiBsb2dnaW5nLCBJJ20g
c3RpbGwgd29ya2luZyB0aHJvdWdoLg0KDQpMZXQgdXMga25vdyBob3cgdGhpbmdzIGdvIGZvciB5
b3UuDQoNCi0gLWNocmlzDQotLS0tLUJFR0lOIFBHUCBTSUdOQVRVUkUtLS0tLQ0KVmVyc2lvbjog
R251UEcvTWFjR1BHMiB2Mi4wLjE3IChEYXJ3aW4pDQpDb21tZW50OiBHUEdUb29scyAtIGh0dHA6
Ly9ncGd0b29scy5vcmcNCkNvbW1lbnQ6IFVzaW5nIEdudVBHIHdpdGggTW96aWxsYSAtIGh0dHA6
Ly9lbmlnbWFpbC5tb3pkZXYub3JnLw0KDQppRVlFQVJFQ0FBWUZBazk3TWdZQUNna1E5Q2FPNS9M
djBQQ3FLd0NmUTFOZm5JNFdlS2E5SDdndXMzZVkyZnRJDQp4MllBbjNpTUV0QmEyWE1FdGNMZk5r
cDllamc1U1FMUw0KPXlSd3gNCi0tLS0tRU5EIFBHUCBTSUdOQVRVUkUtLS0tLQ0KDQotLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IHVzZXJzLXVuc3Vic2NyaWJlQHRvbWNhdC5h
cGFjaGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiB1c2Vycy1oZWxwQHRv
bWNhdC5hcGFjaGUub3JnDQoNCg==

DQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IHVzZXJzLXVuc3Vi
c2NyaWJlQHRvbWNhdC5hcGFjaGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1t
YWlsOiB1c2Vycy1oZWxwQHRvbWNhdC5hcGFjaGUub3JnDQoN

From users-return-233317-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr  3 21:58:02 2012
Return-Path: <users-return-233317-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 67B159F14
	for <apmail-tomcat-users-archive@www.apache.org>; Tue,  3 Apr 2012 21:58:02 +0000 (UTC)
Received: (qmail 89220 invoked by uid 500); 3 Apr 2012 21:57:58 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 89177 invoked by uid 500); 3 Apr 2012 21:57:58 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 89167 invoked by uid 99); 3 Apr 2012 21:57:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 Apr 2012 21:57:58 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED
X-Spam-Check-By: apache.org
Received-SPF: unknown ~allmx (athena.apache.org: encountered unrecognized mechanism during SPF processing of domain of nicholas.williams@puresafety.com)
Received: from [74.125.149.107] (HELO psmtp.com) (74.125.149.107)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 03 Apr 2012 21:57:53 +0000
Received: from mail-vb0-f45.google.com ([209.85.212.45]) (using TLSv1) by na3sys009aob127.postini.com ([74.125.148.12]) with SMTP
	ID DSNKT3tyS1M6T/mueEA+fSPNJWto9xjMQpJH@postini.com; Tue, 03 Apr 2012 14:57:32 PDT
Received: by vbbfs19 with SMTP id fs19so149849vbb.4
        for <users@tomcat.apache.org>; Tue, 03 Apr 2012 14:57:30 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=from:references:in-reply-to:mime-version:x-mailer:thread-index:date
         :message-id:subject:to:content-type:x-gm-message-state;
        bh=Xwgy+HlwV2fkLJHYFXfpavh06erTUbKWbddf/bpNFVE=;
        b=co55Klj3FaWC1T8bTFFsPIYEuGKgTlUPrO4O8SJt+dTomVTW3h7/HpOrk0wi/k2XgC
         epRwE67tBtx7Tcgi7cpz0XUYzqCWVEswtCRTvkzgmwBk9pek/e3MtdknJjBEuX3yd0Sw
         rYoxTZNyigkQipnUiH+zm9IP36eBg6QjMyGRajSU9Nl0nUb72ZjQ4+emxUawusAS21XS
         O/2Ay4Gfk3ijv0BMn8ODKtC/Dj7Pus8UseCPkEyaGsPWpDtR0f26nUR6ZkSw7/un5+Gl
         BqVdfdY1VPzHQ0LRiJrdBXaNjmJs8Db8kjQbKb152R6G7oUC6qVhkxwIjoGwAQ3MIPKV
         cpbg==
Received: by 10.220.117.203 with SMTP id s11mr1445443vcq.33.1333490250764;
 Tue, 03 Apr 2012 14:57:30 -0700 (PDT)
From: Nick Williams <nicholas.williams@puresafety.com>
References: <00c82ddd5a8b1fb9cb75b0c98b39598d@mail.gmail.com>
 <4F7A0C98.9080101@christopherschultz.net> <a5e99375feec6f40641a51062ebcc411@mail.gmail.com>
 <4F7B0322.8020903@christopherschultz.net>
In-Reply-To: <4F7B0322.8020903@christopherschultz.net>
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Ac0RopVAHCF39ii5TDyDylz0l58sGQAP/Lrg
Date: Tue, 3 Apr 2012 16:56:58 -0500
Message-ID: <244034c1c24cda74922a5e728a8b53a5@mail.gmail.com>
Subject: RE: Ant Tasks Question
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
X-Gm-Message-State: ALoCoQlMl8gjjTPjWRs9lvAkEHtjJ87fMInGmDAvpFDbJRl7q8OzVSQXzq5G1bp6Ump0YFOr7XZn
X-Virus-Checked: Checked by ClamAV on apache.org

-----Original Message-----
From: Christopher Schultz [mailto:chris@christopherschultz.net]
Sent: Tuesday, April 03, 2012 9:03 AM
To: Tomcat Users List
Subject: Re: Ant Tasks Question

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Nick,

On 4/2/12 5:43 PM, Nick Williams wrote:
> As for the ant-i-fication of the JspC compiler, I, too get the
> impression that it was rather an afterthought. However, it is not
> necessary or even that common for tasks to be called *Task, as
> Konstantin pointed out. Most of them /aren't/ named *Task.

I was mostly gathering corroborating evidence to suggest that JspC being an
Ant task was not its original intent: it's mostly geared towards being a CLI
tool and has some support for Ant slapped-onto it.
I'm not sure why Konstantin got so agitated about my comments about the
class name: it's obviously the least significant part of my argument.

> I'm aware that I can translate and compile as separate tasks, but
> that's not what I was looking for. I actually DO want to translate and
> compile with the same task, because I want the Eclipse compiler
> shipped with Tomcat to be used for compiling the JSPs.

Well, you can already do that from within JspC (though the CLI doesn't
actually use it) by setting "compiler" to either
"org.apache.jasper.compiler.JDTCompiler" or
"org.apache.jasper.compiler.AntCompiler" (or really anything that implements
org.apache.jasper.compiler.Compiler). The default is to use the JDTCompiler
when the translate and compile steps are performed together. I have no idea
how to invoke the JDT compiler from the command-line given just the .jar
file that contains it: I suspect you'd be able to poke-around and figure out
how to do that as a separate Ant task, which might give you more
flexibility.

> But your comment helps me out in expressing my desire: I feel like it
> should be able to fork and use whatever JVM I specify for executing
> the JspC task, whether I'm using JspC for translation and compilation
> or just translation.

Fair enough. Just because I'm curious: why do you care which JVM is being
used for the translation step?

> I agree that fork support should be expected of a nice player in the
> Ant ecosystem.

I'll have to read the code for some of the built-in Ant tasks to see how
that's traditionally done. It might make sense for the Jasper and task to
become a separate class from JspC, even if it heavily utilizes JspC itself.
Ideally, JspC would be "merely" the CLI wrapper around a Compiler and a
separate class would handle the Ant-related stuff. I would even buy a common
superclass for the two, but it's often tough to tell what is there to
support Ant and what isn't.

> Maybe what we really need, instead of attempting to retrofit JspC to
> be more Task-y, is add a new Task to o.a.catalina.ant (JasperTask?
> JspCompileTask?) and trying to follow some better practices with the
> new practice. What are the community thoughts on this? I can see both
> upsides and downsides to doing this.

Heh. I should have read this first. I obviously agree.

> I'll file enhancement requests in Bugzilla later today or tomorrow for
> the namespace and forking issues.

I'll look for those.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk97AyIACgkQ9CaO5/Lv0PCWjwCeIIJh0Qp9iooqN0ZRa23YOI55
GUwAoJGNiPlt/IO7r2PffDcEKKtDgdTu
=qORp
-----END PGP SIGNATURE-----

---------------------------------------------------------------------


I have filed issues 53031 and 53032 to go along with 53011 and 53012 that I
filed earlier. I look forward to working on them.

I don't really care what JVM is being used for the translation phase. The
reason I care what JVM is being used for the /compilation/ phase is that our
build machine has multiple JVMs (Java 6 32-bit, Java 7 32-bit, Java 6
64-bit, Java 7 64-bit). Our Ant script should be run only using the Java 7
64-bit JVM. However, everything else in the build script (java, javac,
junit, etc.) is configured to explicitly use the Java 7 JVM, so that if
anyone ever messed up the build agent and switched it to using Java 6 to run
Ant, everything would still compile under Java 7. Except that, in this case,
the Jasper task would suddenly be running under Java 6.

This isn't even a big issue for us, because if somebody messes up the build
configuration, that just needs to be fixed. I understand that I can separate
the translation phase from the compilation phase. But I want the compilation
phase to use the Eclipse compiler, just like if it was running under Tomcat,
and javac can't be configured to use the Eclipse compiler (that I know of).
Like I said, it's not even a big deal for us, but it seems like, in the
spirit of being like java and javac and junit and other language-dependent
tasks, it should support providing and alternative JVM (and thus forking).
This will likely be encompassed by the changes necessary for issue 53031
(the forking issue).

Unless you have any objections, I'm going to move further discussions about
53011, 53012, 53031 and 53032 to the developer's list ("Improving Ant Task
for JSP Compilation"), to keep from polluting the users list with too much
specification information.

Nick

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233318-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 04:24:39 2012
Return-Path: <users-return-233318-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 51D6D90F8
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 04:24:39 +0000 (UTC)
Received: (qmail 82372 invoked by uid 500); 4 Apr 2012 04:24:35 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 82245 invoked by uid 500); 4 Apr 2012 04:24:31 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 82197 invoked by uid 99); 4 Apr 2012 04:24:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 04:24:29 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [203.91.198.75] (HELO wipro-blr-out02.wipro.com) (203.91.198.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 04:24:21 +0000
X-AuditID: cb5bdd58-b7b45ae000001d45-d7-4f7bccdfaa30
Received: from BLR-OUT-EDG03.wipro.com ( [203.91.193.33])
	(using TLS with cipher AES128-SHA (AES128-SHA/128 bits))
	(Client did not present a certificate)
	by wipro-blr-out02.wipro.com (Symantec Mail Security) with SMTP id CC.41.07493.FDCCB7F4; Wed,  4 Apr 2012 09:53:59 +0530 (IST)
Received: from BLR-EC-MBX8.wipro.com (10.208.51.118) by
 BLR-OUT-EDG03.wipro.com (203.91.193.33) with Microsoft SMTP Server (TLS) id
 14.1.289.1; Wed, 4 Apr 2012 09:53:58 +0530
Received: from BLR-EC-MBX5.wipro.com ([169.254.5.54]) by BLR-EC-MBX8.wipro.com
 ([169.254.8.35]) with mapi id 14.01.0289.001; Wed, 4 Apr 2012 09:53:58 +0530
From: <souvik.datta@wipro.com>
To: <users@tomcat.apache.org>
Subject: Accessing USB drive content from pages served from tomcat6  server
Thread-Topic: Accessing USB drive content from pages served from tomcat6
  server
Thread-Index: Ac0SGsC/XI/fLQa+R1adPIraGT12VQ==
Date: Wed, 4 Apr 2012 04:23:58 +0000
Message-ID: <85DA62F108ABD4439B9B6A3AB2B2880F01F613A7@BLR-EC-MBX5.wipro.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-originating-ip: [10.141.68.111]
Content-Type: multipart/alternative;
	boundary="_000_85DA62F108ABD4439B9B6A3AB2B2880F01F613A7BLRECMBX5wiproc_"
MIME-Version: 1.0
X-Brightmail-Tracker: AAAAAQAAAZE=

--_000_85DA62F108ABD4439B9B6A3AB2B2880F01F613A7BLRECMBX5wiproc_
Content-Type: text/plain; charset="us-ascii"
content-transfer-encoding: quoted-printable

Hi,

I have a NPAPI plugin which gets a notification from my middleware whenever=
 a USB MSD device is connected to the system. The HTML page which loads the=
 plug-in then plays the Media (audio/video/pictures) that are present in the=
 USB drive. This html page is served from a local tomcat server (the same PC=
 to which the USB MSD device has been connected). To enable access to USB De=
vice from the HTML page (served from tomcat6 server), I have added following=
 lines in /etc/tomcat6/server.xml (in Ubuntu 10.10):

<Context path=3D"/usb_0" docBase=3D"/media/WCF/usb_0/"/>

<Context path=3D"/usb_1" docBase=3D"/media/WCF/usb_1/"/>

<Context path=3D"/usb_2" docBase=3D"/media/WCF/usb_2/"/>

<Context path=3D"/usb_3" docBase=3D"/media/WCF/usb_3/"/>

<Context path=3D"/usb_4" docBase=3D"/media/WCF/usb_4/"/>

<Context path=3D"/albumart" docBase=3D"/mnt/WCFRamDisk/"/>

When I am pluggin in the first USB device (which is mounted at /media/WCF/us=
b_0), I am able to access the device content from my HTML page (served from=
 my tomcat6 server ) but when I am connecting the second USB device which is=
 mounted at /media/WCF/usb_1, I am not able to access its content.

In the browser when I am trying to check the content of http://localhost:808=
0/usb_1/ by typing the URL in the address bar, I am getting error resource n=
ot available. For usb_0, I am able to see the resources.

Can some please tell me whether I am missing any tomcat6 server specific con=
figuration here? I have tried restarting tomcat6 server but the result is th=
e same. Please advice.

Thanks and Regards,

Souvik


Please do not print this email unless it is absolutely necessary. =0A=
=0A=
The information contained in this electronic message and any attachments to=
 this message are intended for the exclusive use of the addressee(s) and may=
 contain proprietary, confidential or privileged information. If you are not=
 the intended recipient, you should not disseminate, distribute or copy this=
 e-mail. Please notify the sender immediately and destroy all copies of this=
 message and any attachments. =0A=
=0A=
WARNING: Computer viruses can be transmitted via email. The recipient should=
 check this email and any attachments for the presence of viruses. The compa=
ny accepts no liability for any damage caused by any virus transmitted by th=
is email. =0A=
=0A=
www.wipro.com

--_000_85DA62F108ABD4439B9B6A3AB2B2880F01F613A7BLRECMBX5wiproc_--

From users-return-233319-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 05:06:06 2012
Return-Path: <users-return-233319-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5F66497F3
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 05:06:06 +0000 (UTC)
Received: (qmail 71632 invoked by uid 500); 4 Apr 2012 05:06:03 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 71527 invoked by uid 500); 4 Apr 2012 05:06:00 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 71509 invoked by uid 99); 4 Apr 2012 05:06:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 05:06:00 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of matt.m.munz@gmail.com designates 209.85.160.45 as permitted sender)
Received: from [209.85.160.45] (HELO mail-pb0-f45.google.com) (209.85.160.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 05:05:55 +0000
Received: by pbcuo5 with SMTP id uo5so606313pbc.18
        for <users@tomcat.apache.org>; Tue, 03 Apr 2012 22:05:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=NvoTG1hljs2UZR0qRPzm/JBn+jrXnmqxwU2JiKUJVLg=;
        b=gEU05SKcX+9hXCCL/BZYOXZ8y8T353UlyLH0mvmRd5VUUjKnv13ZZh6DVtcX8jzJsf
         9dJkwkTqZS2mBd2tRsM/RHk6d3cQB2C3j2ZOhH7s4YskydSrNkUVTFza8oNWLXlLrTwF
         n1WxzFSEt6Q/28BWvbtA4l2RtvwyKDef/IWQVKCj0gsVSxzXGnHmK3jXWrRDcaQfI23I
         DLWbTQ4DejxYFYtMZEdwSOtfjkAfyy1bKd+UcEESfjSwi/5yV1xAEEX1K6JMytv2+2jM
         AACrj6/XmdT0K8c/vs8z2VX6dBpk5e8sDhhh6cA24Ge6c/bwYCM6w8K5tLVxBMX4l3uh
         OXEQ==
Received: by 10.68.226.42 with SMTP id rp10mr34389401pbc.162.1333515935238;
        Tue, 03 Apr 2012 22:05:35 -0700 (PDT)
Received: from [10.0.1.15] (adsl-99-102-133-251.dsl.pltn13.sbcglobal.net. [99.102.133.251])
        by mx.google.com with ESMTPS id w10sm13015148pbk.30.2012.04.03.22.05.33
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 03 Apr 2012 22:05:34 -0700 (PDT)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1084)
Subject: Re: Tomcat 7 Maven plugin: deploy fails with tomcatManager status code:401, ReasonPhrase:Unauthorized
From: Matt Munz <matt.m.munz@gmail.com>
In-Reply-To: <CAPoyBqTKZ3vABf6zqo2g9WXEa7yec1kVerSY3uwb8C8bOrLyrw@mail.gmail.com>
Date: Tue, 3 Apr 2012 22:05:31 -0700
Content-Transfer-Encoding: quoted-printable
Message-Id: <C24FEA44-BB75-4EE1-A4E2-81FDD4F84FB3@gmail.com>
References: <51200CB4-D325-4019-A12A-5A0FDCC8987E@me.com> <0B75C850-2329-47A0-AEAF-A6B7CC14D35F@gmail.com> <CAPoyBqRbT3w_C=3DEomct-hRkKsVpUTBaEd9pjTFn3r=McLMfg@mail.gmail.com> <5E45D237-38F2-473F-A5FB-9D6367F1DDD6@gmail.com> <CAPoyBqTKZ3vABf6zqo2g9WXEa7yec1kVerSY3uwb8C8bOrLyrw@mail.gmail.com>
To: "Tomcat Users List" <users@tomcat.apache.org>
X-Mailer: Apple Mail (2.1084)
X-Virus-Checked: Checked by ClamAV on apache.org

Olivier,

  I made that change to settings.xml and now I'm getting a different =
error. [1]  How can I find out where this plugin is stored?  Perhaps =
there is a problem with the repository or my repository configuration.

[1]
[WARNING] The POM for =
org.apache.tomcat.maven:tomcat7-maven-plugin:jar:2.0-SNAPSHOT is =
missing, no dependency information available
[WARNING] Failed to retrieve plugin descriptor for =
org.apache.tomcat.maven:tomcat7-maven-plugin:2.0-SNAPSHOT: Plugin =
org.apache.tomcat.maven:tomcat7-maven-plugin:2.0-SNAPSHOT or one of its =
dependencies could not be resolved: Failed to read artifact descriptor =
for org.apache.tomcat.maven:tomcat7-maven-plugin:jar:2.0-SNAPSHOT
...
[WARNING] The POM for =
org.apache.tomcat.maven:tomcat7-maven-plugin:jar:2.0-SNAPSHOT is =
missing, no dependency information available
...
[ERROR] Plugin org.apache.tomcat.maven:tomcat7-maven-plugin:2.0-SNAPSHOT =
or one of its dependencies could not be resolved: Failed to read =
artifact descriptor for =
org.apache.tomcat.maven:tomcat7-maven-plugin:jar:2.0-SNAPSHOT: Could not =
find artifact =
org.apache.tomcat.maven:tomcat7-maven-plugin:pom:2.0-SNAPSHOT -> [Help =
1]

  Matt Munz

On Apr 2, 2012, at 11:48 PM, Olivier Lamy wrote:

> Hello,
> With version from codehaus manager url for tomcat7 is not correct.
> (see =
http://mojo.codehaus.org/tomcat-maven-plugin/examples/deployment-tomcat7.h=
tml)
>=20
> Regarding the plugin prefix trouble, you have two solutions to use the
> correct version:
>=20
> * use the full cli: mvn
> org.apache.tomcat.maven:tomcat7-maven-plugin:2.0-SNAPSHOT:deploy
> * configure your settings.xml with the entry
>=20
>  <pluginGroups>
>    <pluginGroup>org.apache.tomcat.maven</pluginGroup>
>  </pluginGroups>
>=20
>=20
> HTH,
> --=20
> Olivier Lamy
> Talend: http://coders.talend.com
> http://twitter.com/olamy | http://linkedin.com/in/olamy
>=20
> 2012/4/3 Matt Munz <matt.m.munz@gmail.com>:
>> Olivier,
>>=20
>>  After switching to 2.0-SNAPSHOT, I am still getting errors :(  First =
I got an error saying that the tomcat7 prefix was not found. [1]  Then I =
tried "mvn  tomcat:deploy -Dusername=3DAdministrator -Dpassword=3Da" and =
I got a 403 response from the manager.
>>=20
>> [1]
>> [ERROR] No plugin found for prefix 'tomcat7' in the current project =
and in the plugin groups [org.apache.maven.plugins, org.codehaus.mojo] =
available from the repositories [local (/Users/mattmunz/.m2/repository), =
central (http://repo1.maven.org/maven2)] -> [Help 1]
>> [2]
>> [ERROR] Failed to execute goal =
org.codehaus.mojo:tomcat-maven-plugin:1.1:deploy (default-cli) on =
project ...: Cannot invoke Tomcat manager: Server returned HTTP response =
code: 403 for URL: http://localhost:8080/manager/deploy?path=3D%2F...&war=3D=
 -> [Help 1]
>>=20
>>  Matt
>>=20
>> On Apr 2, 2012, at 4:16 AM, Olivier Lamy wrote:
>>=20
>>> Hello,
>>> I have fixed few things related to deployment in trunk.
>>> Could you test with current 2.0-SNAPSHOT ?
>>>=20
>>> Thanks
>>> --
>>> Olivier Lamy
>>> Talend: http://coders.talend.com
>>> http://twitter.com/olamy | http://linkedin.com/in/olamy
>>>=20
>>> 2012/4/2 Matt Munz <matt.m.munz@gmail.com>:
>>>> Hi all,
>>>>=20
>>>>  I'm trying to get the Tomcat 7 Maven plugin to work and I'm =
getting an authorization problem.[1]  Here's the command that I'm =
running. [2]  Here's the relevant snippet from tomcat-users.xml. [3]  =
=46rom the browser I am able to log on to the Manager with this account =
without problems.
>>>>=20
>>>>  Any help you could provide would be greatly appreciated.
>>>>=20
>>>> [1] tomcatManager status code:401, ReasonPhrase:Unauthorized
>>>> [2] mvn tomcat7:deploy -Dusername=3DAdministrator -Dpassword=3Da
>>>> [3]
>>>> <role rolename=3D"manager-gui"/>
>>>> <role rolename=3D"manager-script"/>
>>>> <role rolename=3D"manager-jmx"/>
>>>> <user username=3D"Administrator" password=3D"a" =
roles=3D"manager-gui,manager-script,manager-jmx"/>
>>>>=20
>>>>  Matt Munz
>>>>  matt.m.munz@gmail.com
>>>>=20
>>>>=20
>>>>=20
>>>>=20
>>>=20
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>=20
>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>> For additional commands, e-mail: users-help@tomcat.apache.org
>>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233320-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 07:24:14 2012
Return-Path: <users-return-233320-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 513FA971E
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 07:24:14 +0000 (UTC)
Received: (qmail 62206 invoked by uid 500); 4 Apr 2012 07:24:10 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 61895 invoked by uid 500); 4 Apr 2012 07:24:05 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 60891 invoked by uid 99); 4 Apr 2012 07:24:03 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 07:24:03 +0000
Received: from localhost (HELO mail-gx0-f173.google.com) (127.0.0.1)
  (smtp-auth username olamy, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 07:24:03 +0000
Received: by ggnp2 with SMTP id p2so264523ggn.18
        for <users@tomcat.apache.org>; Wed, 04 Apr 2012 00:24:02 -0700 (PDT)
Received: by 10.101.3.18 with SMTP id f18mr4443169ani.31.1333524242607; Wed,
 04 Apr 2012 00:24:02 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.100.34.8 with HTTP; Wed, 4 Apr 2012 00:23:42 -0700 (PDT)
In-Reply-To: <C24FEA44-BB75-4EE1-A4E2-81FDD4F84FB3@gmail.com>
References: <51200CB4-D325-4019-A12A-5A0FDCC8987E@me.com> <0B75C850-2329-47A0-AEAF-A6B7CC14D35F@gmail.com>
 <CAPoyBqRbT3w_C=3DEomct-hRkKsVpUTBaEd9pjTFn3r=McLMfg@mail.gmail.com>
 <5E45D237-38F2-473F-A5FB-9D6367F1DDD6@gmail.com> <CAPoyBqTKZ3vABf6zqo2g9WXEa7yec1kVerSY3uwb8C8bOrLyrw@mail.gmail.com>
 <C24FEA44-BB75-4EE1-A4E2-81FDD4F84FB3@gmail.com>
From: Olivier Lamy <olamy@apache.org>
Date: Wed, 4 Apr 2012 09:23:42 +0200
Message-ID: <CAPoyBqRO=i4sWqRxjOdj_J4Bky=mFhJD_d9MVxPPMCXAzP-gWA@mail.gmail.com>
Subject: Re: Tomcat 7 Maven plugin: deploy fails with tomcatManager status
 code:401, ReasonPhrase:Unauthorized
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hello,
Have a look here:
http://tomcat.apache.org/maven-plugin-2.0-SNAPSHOT/snapshot-test.html

2012/4/4 Matt Munz <matt.m.munz@gmail.com>:
> Olivier,
>
> =A0I made that change to settings.xml and now I'm getting a different err=
or. [1] =A0How can I find out where this plugin is stored? =A0Perhaps there=
 is a problem with the repository or my repository configuration.
>
> [1]
> [WARNING] The POM for org.apache.tomcat.maven:tomcat7-maven-plugin:jar:2.=
0-SNAPSHOT is missing, no dependency information available
> [WARNING] Failed to retrieve plugin descriptor for org.apache.tomcat.mave=
n:tomcat7-maven-plugin:2.0-SNAPSHOT: Plugin org.apache.tomcat.maven:tomcat7=
-maven-plugin:2.0-SNAPSHOT or one of its dependencies could not be resolved=
: Failed to read artifact descriptor for org.apache.tomcat.maven:tomcat7-ma=
ven-plugin:jar:2.0-SNAPSHOT
> ...
> [WARNING] The POM for org.apache.tomcat.maven:tomcat7-maven-plugin:jar:2.=
0-SNAPSHOT is missing, no dependency information available
> ...
> [ERROR] Plugin org.apache.tomcat.maven:tomcat7-maven-plugin:2.0-SNAPSHOT =
or one of its dependencies could not be resolved: Failed to read artifact d=
escriptor for org.apache.tomcat.maven:tomcat7-maven-plugin:jar:2.0-SNAPSHOT=
: Could not find artifact org.apache.tomcat.maven:tomcat7-maven-plugin:pom:=
2.0-SNAPSHOT -> [Help 1]
>
> =A0Matt Munz
>
> On Apr 2, 2012, at 11:48 PM, Olivier Lamy wrote:
>
>> Hello,
>> With version from codehaus manager url for tomcat7 is not correct.
>> (see http://mojo.codehaus.org/tomcat-maven-plugin/examples/deployment-to=
mcat7.html)
>>
>> Regarding the plugin prefix trouble, you have two solutions to use the
>> correct version:
>>
>> * use the full cli: mvn
>> org.apache.tomcat.maven:tomcat7-maven-plugin:2.0-SNAPSHOT:deploy
>> * configure your settings.xml with the entry
>>
>> =A0<pluginGroups>
>> =A0 =A0<pluginGroup>org.apache.tomcat.maven</pluginGroup>
>> =A0</pluginGroups>
>>
>>
>> HTH,
>> --
>> Olivier Lamy
>> Talend: http://coders.talend.com
>> http://twitter.com/olamy | http://linkedin.com/in/olamy
>>
>> 2012/4/3 Matt Munz <matt.m.munz@gmail.com>:
>>> Olivier,
>>>
>>> =A0After switching to 2.0-SNAPSHOT, I am still getting errors :( =A0Fir=
st I got an error saying that the tomcat7 prefix was not found. [1] =A0Then=
 I tried "mvn =A0tomcat:deploy -Dusername=3DAdministrator -Dpassword=3Da" a=
nd I got a 403 response from the manager.
>>>
>>> [1]
>>> [ERROR] No plugin found for prefix 'tomcat7' in the current project and=
 in the plugin groups [org.apache.maven.plugins, org.codehaus.mojo] availab=
le from the repositories [local (/Users/mattmunz/.m2/repository), central (=
http://repo1.maven.org/maven2)] -> [Help 1]
>>> [2]
>>> [ERROR] Failed to execute goal org.codehaus.mojo:tomcat-maven-plugin:1.=
1:deploy (default-cli) on project ...: Cannot invoke Tomcat manager: Server=
 returned HTTP response code: 403 for URL: http://localhost:8080/manager/de=
ploy?path=3D%2F...&war=3D -> [Help 1]
>>>
>>> =A0Matt
>>>
>>> On Apr 2, 2012, at 4:16 AM, Olivier Lamy wrote:
>>>
>>>> Hello,
>>>> I have fixed few things related to deployment in trunk.
>>>> Could you test with current 2.0-SNAPSHOT ?
>>>>
>>>> Thanks
>>>> --
>>>> Olivier Lamy
>>>> Talend: http://coders.talend.com
>>>> http://twitter.com/olamy | http://linkedin.com/in/olamy
>>>>
>>>> 2012/4/2 Matt Munz <matt.m.munz@gmail.com>:
>>>>> Hi all,
>>>>>
>>>>> =A0I'm trying to get the Tomcat 7 Maven plugin to work and I'm gettin=
g an authorization problem.[1] =A0Here's the command that I'm running. [2] =
=A0Here's the relevant snippet from tomcat-users.xml. [3] =A0From the brows=
er I am able to log on to the Manager with this account without problems.
>>>>>
>>>>> =A0Any help you could provide would be greatly appreciated.
>>>>>
>>>>> [1] tomcatManager status code:401, ReasonPhrase:Unauthorized
>>>>> [2] mvn tomcat7:deploy -Dusername=3DAdministrator -Dpassword=3Da
>>>>> [3]
>>>>> <role rolename=3D"manager-gui"/>
>>>>> <role rolename=3D"manager-script"/>
>>>>> <role rolename=3D"manager-jmx"/>
>>>>> <user username=3D"Administrator" password=3D"a" roles=3D"manager-gui,=
manager-script,manager-jmx"/>
>>>>>
>>>>> =A0Matt Munz
>>>>> =A0matt.m.munz@gmail.com
>>>>>
>>>>>
>>>>>
>>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>> For additional commands, e-mail: users-help@tomcat.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>



--=20
Olivier Lamy
Talend: http://coders.talend.com
http://twitter.com/olamy | http://linkedin.com/in/olamy

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233321-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 10:36:34 2012
Return-Path: <users-return-233321-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 292189688
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 10:36:34 +0000 (UTC)
Received: (qmail 44331 invoked by uid 500); 4 Apr 2012 10:36:30 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 44251 invoked by uid 500); 4 Apr 2012 10:36:30 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 44242 invoked by uid 99); 4 Apr 2012 10:36:30 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 10:36:30 +0000
Received: from localhost (HELO mail-gy0-f173.google.com) (127.0.0.1)
  (smtp-auth username olamy, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 10:36:30 +0000
Received: by ghrr14 with SMTP id r14so43846ghr.18
        for <users@tomcat.apache.org>; Wed, 04 Apr 2012 03:36:29 -0700 (PDT)
Received: by 10.236.79.195 with SMTP id i43mr14211616yhe.53.1333535789450;
 Wed, 04 Apr 2012 03:36:29 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.100.34.8 with HTTP; Wed, 4 Apr 2012 03:36:09 -0700 (PDT)
In-Reply-To: <CB9F73BD.D4A7%leigh.anderson@betfair.com>
References: <CB9F73BD.D4A7%leigh.anderson@betfair.com>
From: Olivier Lamy <olamy@apache.org>
Date: Wed, 4 Apr 2012 12:36:09 +0200
Message-ID: <CAPoyBqRkjgKApxNk_SfrKMX8GPB1d6MZj-c-nVgpZ+JjZL0D=g@mail.gmail.com>
Subject: Re: Tomcat7-maven-plugin 2.0-beta1 and useSeparateTomcatClassloader
 fails with run goal
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hello,
Looks to be an issue (does that work with tomcat6:run ?)
Could you create an issue here:
https://issues.apache.org/jira/browse/MTOMCAT (if possible with a
small sample project to reproduce).

Thanks
--=20
Olivier Lamy
Talend: http://coders.talend.com
http://twitter.com/olamy | http://linkedin.com/in/olamy

2012/4/3 Leigh Anderson <Leigh.Anderson@betfair.com>:
> Hi All,
>
> I'm trying to start a web application with 'mvn tomcat7:run'. It seems
> that with the configuration below it fails with the following error:
>
>
> =A0 =A0 =A0 =A0[INFO]
> ------------------------------------------------------------------------
> =A0 =A0 =A0 =A0[ERROR] Failed to execute goal
> org.apache.tomcat.maven:tomcat7-maven-plugin:2.0-beta-1:run (default-cli)
> on project mantis-test-web-app: No such archiver: 'jar'. -> [Help 1]
> =A0 =A0 =A0 =A0[ERROR]
> =A0 =A0 =A0 =A0[ERROR] To see the full stack trace of the errors, re-run =
Maven with the
> -e switch.
> =A0 =A0 =A0 =A0[ERROR] Re-run Maven using the -X switch to enable full de=
bug logging.
>
> I have also tried
> =A0 =A0 =A0 =A0* 'mvn tomcat:run-war', which seems to get past this point=
, but then the
> application will not start because the 'additionalClasspathDir' property
> is not supported by the 'run-war' goal.
> =A0 =A0 =A0 =A0* removing 'useSeparateTomcatClassLoader' which then doesn=
't load the
> Spring instrumenting class loader required to use AspectJ LTW, specified
> in
> context.xml. I have confirmed that I get the same 'no such archiver' erro=
r
> if I remove the
> context.xml, so I don't believe this to be the cause.
>
> Is there something I've missed in the configuration?
>
> Cheers,
> Leigh
>
>
>
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<plugin>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<groupId>org.apache.tomcat=
.maven</groupId>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<artifactId>tomcat7-maven-=
plugin</artifactId>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<version>2.0-beta-1</versi=
on>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<configuration>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<systemProperties>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<log4j.def=
aultInitOverride>true</log4j.defaultInitOverride>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<HOSTNAME>=
localhost</HOSTNAME>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<port.http=
>9090</port.http>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<port.http=
s>8443</port.https>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0</systemProperties=
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<port>9090</port>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<httpsPort>8443</h=
ttpsPort>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<path>/</path>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<useTestClasspath>=
false</useTestClasspath>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<additionalClasspa=
thDirs>
>
> <additionalClasspathDir>${project.basedir}/config</additionalClasspathDir=
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0</additionalClassp=
athDirs>
>
> <useSeparateTomcatClassLoader>true</useSeparateTomcatClassLoader>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0</configuration>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<dependencies>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<dependency>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<groupId>o=
rg.springframework</groupId>
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<artifactI=
d>spring-instrument-tomcat</artifactId>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<version>$=
{spring.version}</version>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0</dependency>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0</dependencies>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0</plugin>
>
>
>
> ________________________________________________________________________
> In order to protect our email recipients, Betfair Group use SkyScan from
> MessageLabs to scan all Incoming and Outgoing mail for viruses.
>
> ________________________________________________________________________
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233322-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 11:09:30 2012
Return-Path: <users-return-233322-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 64C819EBB
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 11:09:30 +0000 (UTC)
Received: (qmail 24351 invoked by uid 500); 4 Apr 2012 11:09:26 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 24145 invoked by uid 500); 4 Apr 2012 11:09:26 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 24136 invoked by uid 99); 4 Apr 2012 11:09:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 11:09:26 +0000
X-ASF-Spam-Status: No, hits=1.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sahmed1020@gmail.com designates 209.85.216.52 as permitted sender)
Received: from [209.85.216.52] (HELO mail-qa0-f52.google.com) (209.85.216.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 11:09:20 +0000
Received: by qabg40 with SMTP id g40so133438qab.18
        for <users@tomcat.apache.org>; Wed, 04 Apr 2012 04:08:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:from:date:message-id:subject:to:content-type;
        bh=if1a8eVfr/Wm0qNqKVmdvL9BZ/PDhwBhO6UqHdbZf8I=;
        b=zl2ggjJtKSfxjLxf62IQZ9owIUmCXsG7G9wnkdOZ6DyQfZZh8Pr4/jJMRsoVnIKVn7
         5FMQEfGXEc0/nftRyaO0DsdXvqGgVkhijxWlpiv7uI7bAMoxr22u5PvF7Fn3G6uBIcp+
         aP63OjAYouCuquN+/S4YZtc1/2MI2Y/3Ea3JIk2W8fsvkbZNztk0TyNtS2Rjx6ui/ZX1
         3oQSJ5r5Tg0ZATz6pVUWOZZ/xAkzn/XIqU2hlhFcfbHCXYKftzT7xSA+W/TLyiwBc+xv
         6McWruHxjr88iKb5PjxvMcy0PN23EzISTy3UK6O4W4vakx67YWsTIs8s+YdcVzzgcgRY
         VtDw==
Received: by 10.224.175.67 with SMTP id w3mr21871689qaz.82.1333537739868; Wed,
 04 Apr 2012 04:08:59 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.68.135 with HTTP; Wed, 4 Apr 2012 04:08:39 -0700 (PDT)
From: S Ahmed <sahmed1020@gmail.com>
Date: Wed, 4 Apr 2012 07:08:39 -0400
Message-ID: <CAG2rwuNhHZUZYe2=wzgUkT4XdwWrgSv5gRm=S4ydymAMXGVG+A@mail.gmail.com>
Subject: jdbc pool properties
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=20cf303b417547899104bcd873fb
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf303b417547899104bcd873fb
Content-Type: text/plain; charset=ISO-8859-1

My db connections seem to be lost after an extended period of inactivity
(for a web application).  And the only way to get the connections to work
again is to restart tomcat.

My tomcat.jdbc.pool.Datasource settings have:

 <property name="maxActive" value="100"/>
        <property name="maxIdle" value="30"/>
        <property name="maxWait" value="1000"/>
        <property name="defaultAutoCommit" value="true"/>
        <property name="removeAbandoned" value="true"/>
        <property name="removeAbandonedTimeout" value="60"/>


Is it the removedAbonded and abandonedTimeout?  Does it mean "after 60
seconds, remove the connection from the pool?

I guess what I need is a minActive setting then?

--20cf303b417547899104bcd873fb--

From users-return-233323-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 12:05:43 2012
Return-Path: <users-return-233323-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2AF169DA7
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 12:05:43 +0000 (UTC)
Received: (qmail 74326 invoked by uid 500); 4 Apr 2012 12:05:37 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 74137 invoked by uid 500); 4 Apr 2012 12:05:37 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 73945 invoked by uid 99); 4 Apr 2012 12:05:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 12:05:37 +0000
X-ASF-Spam-Status: No, hits=4.7 required=5.0
	tests=FREEMAIL_FORGED_REPLYTO,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.138.91.42] (HELO nm25-vm1.bullet.mail.ne1.yahoo.com) (98.138.91.42)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 04 Apr 2012 12:05:28 +0000
Received: from [98.138.90.48] by nm25.bullet.mail.ne1.yahoo.com with NNFMP; 04 Apr 2012 12:05:07 -0000
Received: from [98.138.89.160] by tm1.bullet.mail.ne1.yahoo.com with NNFMP; 04 Apr 2012 12:05:07 -0000
Received: from [127.0.0.1] by omp1016.mail.ne1.yahoo.com with NNFMP; 04 Apr 2012 12:05:07 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 302497.93374.bm@omp1016.mail.ne1.yahoo.com
Received: (qmail 29964 invoked by uid 60001); 4 Apr 2012 12:05:07 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1333541107; bh=iO65h5te3cieCzHYwD/Uo1y4/DHjKh40+dTZty1XhMg=; h=X-YMail-OSG:Received:X-Mailer:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type; b=J+TA9P+U3JmzF/89nNnoQGzGFTmCHmUHc0QNqCYZde7TWHirgzzphs5Dm4VC3ZxKmqipkKFHpIl2D+/qKm1LFN4GJDBxQK6RsEdxMVyOjQXytXtLT/P6OgpWxsoPxXp61A/GEYqIETIxD9s96GXu/YemO/KLxcd6ZnFbubMXh84=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type;
  b=psW/v4n5fniOSVu18MKTnXASqoagUVvjW+z3KK0C/rFapRx4pnpmIQpCf0CteWi5m7POkS3IAOdfjFpgbtE3BOh1/QLoq9CxPacwEKWi/t49/KASvCrervth1xPpKGYoVuzpLyqKsQ3qhgbEkisu9h00ZYf0Q8O/pqjKULFOxYA=;
X-YMail-OSG: EKUGV9kVM1kT9tEQm4T.NRmDhOT3TiRwT_P7G5Yn8renCIF
 mpBZZCrA9dbaKx0DUzvp4KWsuma9NaN1zjcIzv8nfzSm1Q.qgy26ahr5Lbua
 2Nxgiv6Mpa7Nsbqmngg7rbj1kwxNSTQ50Eeo31aF5XDEdB6zjhJ3wt7cl2Lh
 x_shwKF1NtxYgnKRFYV.LT5ttTN.E1gDBESM8PmRyvl_Yutzx23ZBv_kUhXj
 esfAj5Kfiv_pkudpcmBsuFULClqNpui3qJk7kq5qJlpNrL1sZ5FHwanZ98cj
 lxf1p4QBPL7BDxUt0gyxzFmu9b2ZJVLAVgZxHIt2.qoMGc4E3CPMFZuJn0sT
 OyrGARCuKjeDDOVy6LxkonunKhBt6H9u1risXQlxiriA2jHHRRlBHntqCe83
 ZQsE-
Received: from [62.134.46.5] by web122304.mail.ne1.yahoo.com via HTTP; Wed, 04 Apr 2012 05:05:07 PDT
X-Mailer: YahooMailWebService/0.8.117.340979
Message-ID: <1333541107.27592.YahooMailNeo@web122304.mail.ne1.yahoo.com>
Date: Wed, 4 Apr 2012 05:05:07 -0700 (PDT)
From: Hermes Flying <flyinghermes@yahoo.com>
Reply-To: Hermes Flying <flyinghermes@yahoo.com>
Subject: Discrepancy between Tomcat's connection pool and tomcat's report on memory leaks
To: "users@tomcat.apache.org" <users@tomcat.apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="-634093744-1304632376-1333541107=:27592"
X-Virus-Checked: Checked by ClamAV on apache.org

---634093744-1304632376-1333541107=:27592
Content-Type: text/plain; charset=us-ascii

Hi,

I am using Tomcat 7.0.25 in a Linux machine

I am using Tomcat's connection pool (org.apache.tomcat.dbcp.dbcp.BasicDataSource). As database I am using H2 as a file database.
All is ok, but I have the following problem.
On shutdown of Tomcat I see in catalina.out: 


SEVERE: The web application [/GeneralApplication] appears to have started a thread named [H2 Log Writer GENERICAPPLICATION] but has failed to stop it. This is very likely to create a memory leak.
Apr 4, 2012 2:32:54 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/GeneralApplication] appears to have started a thread named [H2 File Lock Watchdog /opt/en/repos/tomcat/webapps/GeneralApplication/db/internaldatabase.lock.db] but has failed to stop it. This is very likely to create a memory leak.

Why do I get these messages?
As I understand these messages, H2 is still running on shutdown and the documentation they have says that the database will shutdown once the last connection is closed (and the connections are handled by the pool i.e. Tomcat)

Additionally the input from H2 dev is that these messages are a Tomcat problem. Tomcat should have first disposed of the connection pool and then log the running threads.Their explanation seem correct to me.

Is this a known issue? Why do I see these errors in catalina? Should I somehow dispose off the connection pool myself?

Thank you for your time
Best Regards,
FH

---634093744-1304632376-1333541107=:27592--

From users-return-233324-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 12:36:03 2012
Return-Path: <users-return-233324-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 810C0962B
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 12:36:03 +0000 (UTC)
Received: (qmail 69450 invoked by uid 500); 4 Apr 2012 12:35:59 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 69393 invoked by uid 500); 4 Apr 2012 12:35:59 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 69384 invoked by uid 99); 4 Apr 2012 12:35:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 12:35:59 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.91.2.13] (HELO smtp-outbound-2.vmware.com) (208.91.2.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 12:35:51 +0000
Received: from sc9-mailhost2.vmware.com (sc9-mailhost2.vmware.com [10.113.161.72])
	by smtp-outbound-2.vmware.com (Postfix) with ESMTP id 19DF928324
	for <users@tomcat.apache.org>; Wed,  4 Apr 2012 05:35:31 -0700 (PDT)
Received: from zimbra-prod-mta-3.vmware.com (zimbra-prod-mta-3.vmware.com [10.113.160.227])
	by sc9-mailhost2.vmware.com (Postfix) with ESMTP id 16CBBB03EF
	for <users@tomcat.apache.org>; Wed,  4 Apr 2012 05:35:31 -0700 (PDT)
Received: from localhost (localhost.localdomain [127.0.0.1])
	by zimbra-prod-mta-3.vmware.com (Postfix) with ESMTP id 11F93F4F66
	for <users@tomcat.apache.org>; Wed,  4 Apr 2012 05:35:31 -0700 (PDT)
X-Virus-Scanned: amavisd-new at zimbra-prod-mta-3.vmware.com
Received: from zimbra-prod-mta-3.vmware.com ([127.0.0.1])
	by localhost (zimbra-prod-mta-3.vmware.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id E5C7bzN3DbMS for <users@tomcat.apache.org>;
	Wed,  4 Apr 2012 05:35:31 -0700 (PDT)
Received: from zimbra-prod-mbox-5.vmware.com (zimbra-prod-mbox-5.vmware.com [10.113.160.194])
	by zimbra-prod-mta-3.vmware.com (Postfix) with ESMTP id 013C6F4F3C
	for <users@tomcat.apache.org>; Wed,  4 Apr 2012 05:35:31 -0700 (PDT)
Date: Wed, 4 Apr 2012 05:35:30 -0700 (PDT)
From: Daniel Mikusa <dmikusa@vmware.com>
To: Tomcat Users List <users@tomcat.apache.org>
Message-ID: <7617295.110.1333542925681.JavaMail.daniel@cleveland>
In-Reply-To: <1333541107.27592.YahooMailNeo@web122304.mail.ne1.yahoo.com>
Subject: Re: Discrepancy between Tomcat's connection pool and tomcat's
 report on memory leaks
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Originating-IP: [24.160.217.1]
X-Mailer: Zimbra 7.1.3_GA_3374 (Zimbra Desktop/7.1.4_11273_Linux)
X-Virus-Checked: Checked by ClamAV on apache.org



----- Original Message -----
> Hi,
> 
> I am using Tomcat 7.0.25 in a Linux machine
> 
> I am using Tomcat's connection pool
> (org.apache.tomcat.dbcp.dbcp.BasicDataSource). As database I am
> using H2 as a file database.

Where are you defining the connection pool?  Can you include your configuration?

Dan


> All is ok, but I have the following problem.
> On shutdown of Tomcat I see in catalina.out:
> 
> 
> SEVERE: The web application [/GeneralApplication] appears to have
> started a thread named [H2 Log Writer GENERICAPPLICATION] but has
> failed to stop it. This is very likely to create a memory leak.
> Apr 4, 2012 2:32:54 PM org.apache.catalina.loader.WebappClassLoader
> clearReferencesThreads
> SEVERE: The web application [/GeneralApplication] appears to have
> started a thread named [H2 File Lock Watchdog
> /opt/en/repos/tomcat/webapps/GeneralApplication/db/internaldatabase.lock.db]
> but has failed to stop it. This is very likely to create a memory
> leak.
> 
> Why do I get these messages?
> As I understand these messages, H2 is still running on shutdown and
> the documentation they have says that the database will shutdown
> once the last connection is closed (and the connections are handled
> by the pool i.e. Tomcat)
> 
> Additionally the input from H2 dev is that these messages are a
> Tomcat problem. Tomcat should have first disposed of the connection
> pool and then log the running threads.Their explanation seem correct
> to me.
> 
> Is this a known issue? Why do I see these errors in catalina? Should
> I somehow dispose off the connection pool myself?
> 
> Thank you for your time
> Best Regards,
> FH
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233325-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 12:44:37 2012
Return-Path: <users-return-233325-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DF5DE98C3
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 12:44:37 +0000 (UTC)
Received: (qmail 97760 invoked by uid 500); 4 Apr 2012 12:44:34 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 97711 invoked by uid 500); 4 Apr 2012 12:44:34 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 97699 invoked by uid 99); 4 Apr 2012 12:44:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 12:44:34 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pid@pidster.com designates 74.125.83.45 as permitted sender)
Received: from [74.125.83.45] (HELO mail-ee0-f45.google.com) (74.125.83.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 12:44:26 +0000
Received: by eeit10 with SMTP id t10so122234eei.18
        for <users@tomcat.apache.org>; Wed, 04 Apr 2012 05:44:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type;
        bh=MNXcvVEVQOaGm+H8HwXAzPfkFMYXiTkudWmyumIAunQ=;
        b=FaOKqnfscZ0WMY34retTKVldvBGTps2DRKhq+n1rhrdZrOmvQgHsmbbqMqBE7jel/P
         EmEUB5JvVsv2UFsoPD0GD5GqW9kZuSEtVwiuh+jPRUJMFrqqOwNeYI6h1h5Hz5G0eedd
         1EgDV29tjdhGr9PVgV3D4nNESyF/vEjuTSXfg=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type:x-gm-message-state;
        bh=MNXcvVEVQOaGm+H8HwXAzPfkFMYXiTkudWmyumIAunQ=;
        b=fI7MSwnSP29P8kYp2P4cwDKuiReADpS3tE3g4v3nDQyHNJ71D1+pCwZNf8winRqYGm
         oXH7DjKzWfjk+9VMhy2TZB5rwh9c6D509TbrRhmyKk99DLr4WFYl89Oq/Ir9A5EHoJ+5
         Oq6+19jGBL/bxsk63r3ogQJm5xd1M6+dmbJcEHQa0XG/U/tSlfFj5a8Rc0UAOjmIMwAa
         ncbXJdS9MsrCwMSsvHkeFAnm8CdILQWQaBa72a7NzVD6gnjogVlR75ky565+CFLrrSWG
         +MqFKp3EXYnLqAgk5IX4XFzjFGlvrtko4NN4tX6MqfeECK1oIdutIpXiXyFdU8rdfMEo
         kgFQ==
Received: by 10.14.95.3 with SMTP id o3mr3121586eef.26.1333543445514;
        Wed, 04 Apr 2012 05:44:05 -0700 (PDT)
Received: from Asura.local ([81.134.122.147])
        by mx.google.com with ESMTPS id x8sm1972784eea.10.2012.04.04.05.44.03
        (version=SSLv3 cipher=OTHER);
        Wed, 04 Apr 2012 05:44:03 -0700 (PDT)
Message-ID: <4F7C420C.8070401@pidster.com>
Date: Wed, 04 Apr 2012 13:43:56 +0100
From: Pid <pid@pidster.com>
Organization: Pidster Inc
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Discrepancy between Tomcat's connection pool and tomcat's report
 on memory leaks
References: <1333541107.27592.YahooMailNeo@web122304.mail.ne1.yahoo.com>
In-Reply-To: <1333541107.27592.YahooMailNeo@web122304.mail.ne1.yahoo.com>
X-Enigmail-Version: 1.4
OpenPGP: id=62590808
Content-Type: multipart/signed; micalg=pgp-sha512;
 protocol="application/pgp-signature";
 boundary="------------enigE82F0F00D0D114306C2EA339"
X-Gm-Message-State: ALoCoQlIR3q7ytWKmwXTmhMFECYfuMop5ankS6/CS2w5bOLNpUCnfBzOgVe5D1jnWGk97IgeYv5U

--------------enigE82F0F00D0D114306C2EA339
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

On 04/04/2012 13:05, Hermes Flying wrote:
> Hi,
>=20
> I am using Tomcat 7.0.25 in a Linux machine
>=20
> I am using Tomcat's connection pool (org.apache.tomcat.dbcp.dbcp.BasicD=
ataSource). As database I am using H2 as a file database.
> All is ok, but I have the following problem.
> On shutdown of Tomcat I see in catalina.out:=20

In which file have you defined the pool?


> SEVERE: The web application [/GeneralApplication] appears to have start=
ed a thread named [H2 Log Writer GENERICAPPLICATION] but has failed to st=
op it. This is very likely to create a memory leak.
> Apr 4, 2012 2:32:54 PM org.apache.catalina.loader.WebappClassLoader cle=
arReferencesThreads
> SEVERE: The web application [/GeneralApplication] appears to have start=
ed a thread named [H2 File Lock Watchdog /opt/en/repos/tomcat/webapps/Gen=
eralApplication/db/internaldatabase.lock.db] but has failed to stop it. T=
his is very likely to create a memory leak.
>=20
> Why do I get these messages?

When the application shuts down Tomcat tries to detect & prevent memory
leaks by examining threads & various things associated with the
WebappClassloader.


> As I understand these messages, H2 is still running on shutdown and the=
 documentation they have says that the database will shutdown once the la=
st connection is closed (and the connections are handled by the pool i.e.=
 Tomcat)

So there is no way to manually the database down?


> Additionally the input from H2 dev is that these messages are a Tomcat =
problem. Tomcat should have first disposed of the connection pool and the=
n log the running threads.Their explanation seem correct to me.

That's the usual first response.  Let's figure out whether it's correct..=
=2E


> Is this a known issue?=20

Not that I've come across here.

> Why do I see these errors in catalina?=20

As above.

> Should I somehow dispose off the connection pool myself?

Depends.


p

> Thank you for your time
> Best Regards,
> FH
>=20


--=20

[key:62590808]


--------------enigE82F0F00D0D114306C2EA339
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.18 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iQIcBAEBCgAGBQJPfEIQAAoJEGoM2OGpOvr9mCMP/iltaos3YZFBtgRDitH0nPCQ
MdKB+GP5OQMPZcZTjJG+Eu+yOg1lOb3DjvxmWFgWs/OQokX8rb99sU+8aj1ta0PG
7rV4lLdY5OfdE4OZHXBgwJrS1SoqC2k41tN0RIA9X3nQ15eq+M09+037x1zD58yv
HEhMpyKOHj1LyuC1doA7p2HHnjiXFE/+j3akLYZL9vMQP5sbzWYoOwYsSasOM9gv
FZP9TlIV6TcvTnYz/LcyTiSnW1TS+f5QU86+JVNryMwnIz9RMrOsgwkEG7E9AwMS
QpSd8nHqrpxnfNCmDFPUzMYWUetR2MnCzIoD2BpacNsMFZ/bLQ6O/dVdHUijZZ2A
sbYOdwY6Owg64OgNHC+qa9admuMwGPj34VMukkFFCW35sQ9XHKx3C/6l34oIkrC5
GVrJ5wSi31qSr44nFbLgdJYxZyuMpEsE01zwP+QhlheAIK64X+nkoDnNASJusOI7
ykrbFHQcA5PdKGC126dQsT19Lrd03Km+XoNVsHhxlxKF+PQIdnlWghCpJveArXoD
MZqW76Bwx5o6c0qVm206al41mn687dlz/x599fHUYD1nyPtp4InyL+FXh81PUL/M
X4QNQPeWhTJH6Hjha82ZkHSu6Yjb2PoYi5ttbqkkXk2R/7OAf4+S3BqwQItVr/CG
bARFtqqkgEeVNJyXgXZ7
=xBuN
-----END PGP SIGNATURE-----

--------------enigE82F0F00D0D114306C2EA339--

From users-return-233326-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 12:45:37 2012
Return-Path: <users-return-233326-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B03A798FE
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 12:45:37 +0000 (UTC)
Received: (qmail 2507 invoked by uid 500); 4 Apr 2012 12:45:34 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 2328 invoked by uid 500); 4 Apr 2012 12:45:34 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 2319 invoked by uid 99); 4 Apr 2012 12:45:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 12:45:34 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pid@pidster.com designates 209.85.212.177 as permitted sender)
Received: from [209.85.212.177] (HELO mail-wi0-f177.google.com) (209.85.212.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 12:45:26 +0000
Received: by wibhj13 with SMTP id hj13so170649wib.0
        for <users@tomcat.apache.org>; Wed, 04 Apr 2012 05:45:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type;
        bh=00LD5DqJI0dLsx4s29jDLTBOd7rD6TQCIOsg5ajG0DQ=;
        b=poIA7z/FfcSe3bV89hLOPJzXTtZJZBrak/68LesHFgSNVAGTBM+C10eC4/ZJDFkzn3
         h0K5UkAHCrQaYP/34MJRBHVKfNASdtMCdoFBIXUSG2IoKSl9/+pTXtemB9iT0/jCafBu
         146+RFJ+AfXOvVzs1FjEgTWS+lKjw8myi9nN8=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type:x-gm-message-state;
        bh=00LD5DqJI0dLsx4s29jDLTBOd7rD6TQCIOsg5ajG0DQ=;
        b=TDcHOzTD4KeiqgTdvd9WHOLsl/GK6mYm777MAu95CWYxAXC4bis0bFQ1lAuoBQbc4F
         wK9CYBacFLdM7H23pzpumnknxEauhj+VeQCXpHNeVTMd8zoUKkeoeJc5YYGlwlLor7cR
         LCb8jRAzoSqNSWMqjAatec5nfudSzJxzB2QZ1PJOmwc8liSwSSiKzbEjQ0Um3KByOiaM
         fXzEq/bAdTSPqCRZj0MfOqTdZyiPsbUs3viwxiZU+pKEqaNUq1T6sJ00YqNwmwD+P3pc
         gEfnxf5xHd14DDwJZTfq3rLib0ilD5YeBOtjv7WxT5dZ2ekFaWY28n50CeJLkCxeHrMT
         nO5w==
Received: by 10.216.225.216 with SMTP id z66mr1343917wep.71.1333543506149;
        Wed, 04 Apr 2012 05:45:06 -0700 (PDT)
Received: from Asura.local ([81.134.122.147])
        by mx.google.com with ESMTPS id gd4sm2376529wib.6.2012.04.04.05.45.04
        (version=SSLv3 cipher=OTHER);
        Wed, 04 Apr 2012 05:45:04 -0700 (PDT)
Message-ID: <4F7C424D.3030108@pidster.com>
Date: Wed, 04 Apr 2012 13:45:01 +0100
From: Pid <pid@pidster.com>
Organization: Pidster Inc
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: jdbc pool properties
References: <CAG2rwuNhHZUZYe2=wzgUkT4XdwWrgSv5gRm=S4ydymAMXGVG+A@mail.gmail.com>
In-Reply-To: <CAG2rwuNhHZUZYe2=wzgUkT4XdwWrgSv5gRm=S4ydymAMXGVG+A@mail.gmail.com>
X-Enigmail-Version: 1.4
OpenPGP: id=62590808
Content-Type: multipart/signed; micalg=pgp-sha512;
 protocol="application/pgp-signature";
 boundary="------------enig545139711F28F14AA4F25650"
X-Gm-Message-State: ALoCoQkdjWi+kOVNm48A6r2BMvRZ0DmjcWwfZ2bohoege3ElcUxX7xIVoV72W4kFT/HM0N+Vy9rW

--------------enig545139711F28F14AA4F25650
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

On 04/04/2012 12:08, S Ahmed wrote:
> My db connections seem to be lost after an extended period of inactivit=
y
> (for a web application).  And the only way to get the connections to wo=
rk
> again is to restart tomcat.
>=20
> My tomcat.jdbc.pool.Datasource settings have:
>=20
>  <property name=3D"maxActive" value=3D"100"/>
>         <property name=3D"maxIdle" value=3D"30"/>
>         <property name=3D"maxWait" value=3D"1000"/>
>         <property name=3D"defaultAutoCommit" value=3D"true"/>
>         <property name=3D"removeAbandoned" value=3D"true"/>
>         <property name=3D"removeAbandonedTimeout" value=3D"60"/>
>=20
>=20
> Is it the removedAbonded and abandonedTimeout?  Does it mean "after 60
> seconds, remove the connection from the pool?
>=20
> I guess what I need is a minActive setting then?

Do you have a connection validation query and test set?

E.g. testOnBorrow=3Dtrue?


p


--=20

[key:62590808]


--------------enig545139711F28F14AA4F25650
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.18 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iQIcBAEBCgAGBQJPfEJNAAoJEGoM2OGpOvr95S8P/16dMkLDfmx/jnssR/3+2/wU
F3+1H8ypTLHoB1IRIq0+ijbaG0ybZa/Pdk9eYfnBUL56OTuWyKAV40WP5TzklpkO
C3vOpgQOQuY5K/hLYSMpgBXFmun1J7kvLwvqaY3dfSarepVR0zpHz78EXMOGy6rt
Ht2VKGjyNhtC3ysN4j3WGC+Xi1u0M3eWcOu3ax7WiQMUdB9KQz86uZlUBXh5WXaY
h3vo1knQgNwydAtXACAVutxyFZjGQTVkQZ78ZLoXQ7qXJ0IjsUBcfq7MZE2FiDu0
WAqqzg3NZiBFa6ns1XlTDmQOjkWM1NdAOidSdRWJ0mvuvOgLUgoIQZjzdlxbrQbP
Lrj2ycaBIggGdBItJkBkkmIDxAYIjlwH4I19N9qBrYkOST6hsC7tkKFrauAEpxdh
3bfHcB5vDz//2ptFIxgORgdX7WFoto3PtJu9ZFM8DiEp6NC4g7ti1IcFgrndp2+7
9w+zQD8hVbjuPKgfgTnKCS31O9gVtvZjlzn364E09rpkrXXxpbCnm7NMQ1Oyevwv
eDgOvAXK/n5naK93+rVF95WqlFiJAwUdIIcHsVOWkIN1Qnue5yX19yyQHI9EvFcA
Zc+Tbt0Iq3tFMi55jTCjIdeSiHB+xN+QGTFpQJ8Es3bjIEzzNfdFYSlLvXmphI4C
0VoScNhUD4kJqyq2gU4E
=5VkB
-----END PGP SIGNATURE-----

--------------enig545139711F28F14AA4F25650--

From users-return-233327-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 12:46:49 2012
Return-Path: <users-return-233327-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2958D9917
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 12:46:49 +0000 (UTC)
Received: (qmail 7173 invoked by uid 500); 4 Apr 2012 12:46:45 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 7043 invoked by uid 500); 4 Apr 2012 12:46:45 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 7034 invoked by uid 99); 4 Apr 2012 12:46:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 12:46:45 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.91.2.13] (HELO smtp-outbound-2.vmware.com) (208.91.2.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 12:46:37 +0000
Received: from sc9-mailhost1.vmware.com (sc9-mailhost1.vmware.com [10.113.161.71])
	by smtp-outbound-2.vmware.com (Postfix) with ESMTP id 57F66281E3
	for <users@tomcat.apache.org>; Wed,  4 Apr 2012 05:46:17 -0700 (PDT)
Received: from zimbra-prod-mta-2.vmware.com (zimbra-prod-mta-2.vmware.com [10.113.160.174])
	by sc9-mailhost1.vmware.com (Postfix) with ESMTP id 535DE1840F
	for <users@tomcat.apache.org>; Wed,  4 Apr 2012 05:46:17 -0700 (PDT)
Received: from localhost (localhost.localdomain [127.0.0.1])
	by zimbra-prod-mta-2.vmware.com (Postfix) with ESMTP id 4B68A357B1
	for <users@tomcat.apache.org>; Wed,  4 Apr 2012 05:46:17 -0700 (PDT)
X-Virus-Scanned: amavisd-new at zimbra-prod-mta-2.vmware.com
Received: from zimbra-prod-mta-2.vmware.com ([127.0.0.1])
	by localhost (zimbra-prod-mta-2.vmware.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id v9DTvW5AgGrc for <users@tomcat.apache.org>;
	Wed,  4 Apr 2012 05:46:17 -0700 (PDT)
Received: from zimbra-prod-mbox-5.vmware.com (zimbra-prod-mbox-5.vmware.com [10.113.160.194])
	by zimbra-prod-mta-2.vmware.com (Postfix) with ESMTP id 34574357AE
	for <users@tomcat.apache.org>; Wed,  4 Apr 2012 05:46:17 -0700 (PDT)
Date: Wed, 4 Apr 2012 05:46:17 -0700 (PDT)
From: Daniel Mikusa <dmikusa@vmware.com>
To: Tomcat Users List <users@tomcat.apache.org>
Message-ID: <17972289.150.1333543571938.JavaMail.daniel@cleveland>
In-Reply-To: <CAG2rwuNhHZUZYe2=wzgUkT4XdwWrgSv5gRm=S4ydymAMXGVG+A@mail.gmail.com>
Subject: Re: jdbc pool properties
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Originating-IP: [24.160.217.1]
X-Mailer: Zimbra 7.1.3_GA_3374 (Zimbra Desktop/7.1.4_11273_Linux)
X-Virus-Checked: Checked by ClamAV on apache.org



----- Original Message -----
> My db connections seem to be lost after an extended period of
> inactivity

There could be a number of reasons that this occurs.  Perhaps a network issue is causing them to be disconnected or the database may be timing them out.  At any rate, it's not likely that the problem would be caused by the "removeAbandoned" / "abandonedTimeout" settings, unless you application is not properly returning connections to the connection pool.

  https://tomcat.apache.org/tomcat-7.0-doc/jndi-datasource-examples-howto.html#Preventing_database_connection_pool_leaks


> (for a web application).  And the only way to get the connections to
> work
> again is to restart tomcat.
> 
> My tomcat.jdbc.pool.Datasource settings have:
> 
>  <property name="maxActive" value="100"/>
>         <property name="maxIdle" value="30"/>
>         <property name="maxWait" value="1000"/>
>         <property name="defaultAutoCommit" value="true"/>
>         <property name="removeAbandoned" value="true"/>
>         <property name="removeAbandonedTimeout" value="60"/>
> 

You probably want to add testOnBorrow="true" and "validationQuery=SELECT 1"  (or some other valid query for your DB).  See the following link for an explanation of those properties.

  https://commons.apache.org/dbcp/configuration.html

This will cause your connections to be validated prior to their use by your application.  Stale connections will be removed and replaced with new, working connections.

> 
> Is it the removedAbonded and abandonedTimeout?  Does it mean "after
> 60
> seconds, remove the connection from the pool?

No.  See either of the links I've referenced above for an explanation of these settings.

> 
> I guess what I need is a minActive setting then?
> 

There's no "minActive" setting.  You have "minIdle", but I don't think that would help here.

Dan





---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233328-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 12:47:44 2012
Return-Path: <users-return-233328-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B41A69942
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 12:47:44 +0000 (UTC)
Received: (qmail 12082 invoked by uid 500); 4 Apr 2012 12:47:41 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 11877 invoked by uid 500); 4 Apr 2012 12:47:41 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 11868 invoked by uid 99); 4 Apr 2012 12:47:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 12:47:41 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [98.138.229.50] (HELO nm32-vm2.bullet.mail.ne1.yahoo.com) (98.138.229.50)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 04 Apr 2012 12:47:31 +0000
Received: from [98.138.90.57] by nm32.bullet.mail.ne1.yahoo.com with NNFMP; 04 Apr 2012 12:47:10 -0000
Received: from [98.138.88.239] by tm10.bullet.mail.ne1.yahoo.com with NNFMP; 04 Apr 2012 12:47:10 -0000
Received: from [127.0.0.1] by omp1039.mail.ne1.yahoo.com with NNFMP; 04 Apr 2012 12:47:10 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 178808.31688.bm@omp1039.mail.ne1.yahoo.com
Received: (qmail 16173 invoked by uid 60001); 4 Apr 2012 12:47:10 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1333543630; bh=auM1PtfW+ADkev5RLuxw0WL2gOiIz5aUbSfQktIbz+E=; h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=T/muFpnj6wpOo3KlUnMY6oH+Yy3wmkuWbijnMnPEtZfrjm8LTt42iZiuSbN9YKPs6+QsqeRw5sVfA3nTjBBtuFFAvjwThgtJ+HHU4mJ+OVADZTu2bo5MnqHzTCLei7Dz1z/sKICXJpUCMECto52libTCy1SZ/O09LJ73ngHT0Es=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=5dIZvCA331eRaAc1uEbyWfc7eMHpAZ3A1xW3FXxN9JCO3taScm266zyf53cn4E/AfBfNxbTFlwA+djfRCEwDvRmHdWIn3MM59fzO8+1gC1TW0x3okSu7kw7Tdb0DuzxnhZv6iL6ChLaRI8dFJvCbjNOE6Vd5FXP6SLI2Elh9Ndo=;
X-YMail-OSG: svrv.tIVM1nz2NENOZjHuyOvvcYs3sZLKEc.ANJoIEYqrFp
 12py9RKvxNEFDvlJ4qyfdkXM5jnaM6Wv8KoommqXzdgqyyoPoa4TbPD96VaG
 DliSiwh1emgQ5Tso1z46H51wqJGTNSzEMEF8jlCuvuUoerChrB64ZZ_h1vZi
 QN5ckal9ONbFM5CIBN7hYnBn6zmMd6OmYjnvAJgKgJEiGXxDgvtIhWdCH1XC
 aAMz9z6qn_Fi2JJZ8_UvjCW5BOsWUf48MVQyviItBEKuDRq5Ca7EzoD6My7e
 0jWOHVNbU6jOpdOOHVgbDyQ2TaIuJ.dsAKCl1.4YY2mLR75zvvqcM5Lno0Z5
 biPEum8eNUBE2IGRm1_tow0SV.dHEZmXHwk9yvKZECrtVR1lKq7DZ.oTZ2kV
 RWYXKZepF70p50UPYzQwwt7ClQg--
Received: from [62.134.46.5] by web122302.mail.ne1.yahoo.com via HTTP; Wed, 04 Apr 2012 05:47:09 PDT
X-Mailer: YahooMailWebService/0.8.117.340979
References: <1333541107.27592.YahooMailNeo@web122304.mail.ne1.yahoo.com> <7617295.110.1333542925681.JavaMail.daniel@cleveland>
Message-ID: <1333543629.34110.YahooMailNeo@web122302.mail.ne1.yahoo.com>
Date: Wed, 4 Apr 2012 05:47:09 -0700 (PDT)
From: Hermes Flying <flyinghermes@yahoo.com>
Reply-To: Hermes Flying <flyinghermes@yahoo.com>
Subject: Re: Discrepancy between Tomcat's connection pool and tomcat's report on memory leaks
To: Tomcat Users List <users@tomcat.apache.org>,
  "dmikusa@vmware.com" <dmikusa@vmware.com>
In-Reply-To: <7617295.110.1333542925681.JavaMail.daniel@cleveland>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="1800448838-1941921243-1333543629=:34110"

--1800448838-1941921243-1333543629=:34110
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hi Dan,=0A=0AThe following entry is in server.xml =0A=0A=A0<Resource name=
=3D"jdbc_GENERIS_RS" auth=3D"Container"=0A=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0 type=3D"javax.sql.DataSource"=0A=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0 driverClassName=3D"org.h2.Driver"=0A=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0 url=3D"jdbc:h2:file:/opt/en/repos/tomcat/webapps/GeneralApplication/=
db/internaldatabase;SCHEMA=3Dgenericschema"=0A=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0 username=3D"root" password=3D"sa"=0A=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0 maxActive=3D"20" maxIdle=3D"10" maxWait=3D"-1"=0A=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 />=0A=0A=0AAnd the following entry is under =
$TOMCAT_HOME/conf/context.xml=0A=0A=A0<ResourceLink name=3D"jdbc/GenericDat=
aSource"=0A=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 global=3D"jdbc_GEN=
ERIS_RS"=0A=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 type=3D"javax.sql.=
DataSource"/>=0A=0A=0ADo you need more details than these?=0A=0A=0A=0A=0A__=
______________________________=0A From: Daniel Mikusa <dmikusa@vmware.com>=
=0ATo: Tomcat Users List <users@tomcat.apache.org> =0ASent: Wednesday, Apri=
l 4, 2012 3:35 PM=0ASubject: Re: Discrepancy between Tomcat's connection po=
ol and tomcat's report on memory leaks=0A =0A=0A=0A----- Original Message -=
----=0A> Hi,=0A> =0A> I am using Tomcat 7.0.25 in a Linux machine=0A> =0A> =
I am using Tomcat's connection pool=0A> (org.apache.tomcat.dbcp.dbcp.BasicD=
ataSource). As database I am=0A> using H2 as a file database.=0A=0AWhere ar=
e you defining the connection pool?=A0 Can you include your configuration?=
=0A=0ADan=0A=0A=0A> All is ok, but I have the following problem.=0A> On shu=
tdown of Tomcat I see in catalina.out:=0A> =0A> =0A> SEVERE: The web applic=
ation [/GeneralApplication] appears to have=0A> started a thread named [H2 =
Log Writer GENERICAPPLICATION] but has=0A> failed to stop it. This is very =
likely to create a memory leak.=0A> Apr 4, 2012 2:32:54 PM org.apache.catal=
ina.loader.WebappClassLoader=0A> clearReferencesThreads=0A> SEVERE: The web=
 application [/GeneralApplication] appears to have=0A> started a thread nam=
ed [H2 File Lock Watchdog=0A> /opt/en/repos/tomcat/webapps/GeneralApplicati=
on/db/internaldatabase.lock.db]=0A> but has failed to stop it. This is very=
 likely to create a memory=0A> leak.=0A> =0A> Why do I get these messages?=
=0A> As I understand these messages, H2 is still running on shutdown and=0A=
> the documentation they have says that the database will shutdown=0A> once=
 the last connection is closed (and the connections are handled=0A> by the =
pool i.e. Tomcat)=0A> =0A> Additionally the input from H2 dev is that these=
 messages are a=0A> Tomcat problem. Tomcat should have first disposed of th=
e connection=0A> pool and then log the running threads.Their explanation se=
em correct=0A> to me.=0A> =0A> Is this a known issue? Why do I see these er=
rors in catalina? Should=0A> I somehow dispose off the connection pool myse=
lf?=0A> =0A> Thank you for your time=0A> Best Regards,=0A> FH=0A> =0A=0A---=
------------------------------------------------------------------=0ATo uns=
ubscribe, e-mail: users-unsubscribe@tomcat.apache.org=0AFor additional comm=
ands, e-mail: users-help@tomcat.apache.org
--1800448838-1941921243-1333543629=:34110--

From users-return-233329-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 12:55:02 2012
Return-Path: <users-return-233329-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 719719BDD
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 12:55:02 +0000 (UTC)
Received: (qmail 36166 invoked by uid 500); 4 Apr 2012 12:54:59 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 36050 invoked by uid 500); 4 Apr 2012 12:54:59 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 36041 invoked by uid 99); 4 Apr 2012 12:54:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 12:54:58 +0000
X-ASF-Spam-Status: No, hits=4.7 required=5.0
	tests=FREEMAIL_FORGED_REPLYTO,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.138.91.88] (HELO nm12-vm2.bullet.mail.ne1.yahoo.com) (98.138.91.88)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 04 Apr 2012 12:54:50 +0000
Received: from [98.138.90.55] by nm12.bullet.mail.ne1.yahoo.com with NNFMP; 04 Apr 2012 12:54:29 -0000
Received: from [98.138.87.8] by tm8.bullet.mail.ne1.yahoo.com with NNFMP; 04 Apr 2012 12:54:29 -0000
Received: from [127.0.0.1] by omp1008.mail.ne1.yahoo.com with NNFMP; 04 Apr 2012 12:54:29 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 686446.27249.bm@omp1008.mail.ne1.yahoo.com
Received: (qmail 72761 invoked by uid 60001); 4 Apr 2012 12:54:29 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1333544069; bh=PZkwJXiJ666KU529KiXP3vAr7uq9ACvBClgCaDBDHNo=; h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=desHyGun7ZD0tdwkeZeiZTOptZV+1DdUqaoR4fKwDBXou++7z9pwJPC4vd9nRjl3ZrY0gn160ahwrghTf7j8riJymqXjT5Bw0WpXcrBUUX/iRgkKsvrsQasBnvBfDBmAozSoXQ+lrPvKZrgjv9EQ5xx5W2+f7FuBpk2QtX035Iw=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=Sx2ST+5SXv4exsDSpUrJ/ErNbAfCKb8QaBlE3X60O8+LDTKDl6PSvxy8wf5rLnWu+Gfe5xrBn9wyYUCxdvdaqw3dLjkq2hDuZXSYnB8M2AnipC2QpgCF9kyoQHsgYIefClOER922hK4DAy3FJZHYrRoN0Gihq6WgiuFQ273lmE8=;
X-YMail-OSG: X6d8AhkVM1myBerhZQWoNxHIo9POnKjwVhpEVYF1001AFOa
 bmCpI5whGoZpv1A6la6U5vZ599Wqu8aKzcRQshW1fq_XeZiYjckYIlHLST5p
 Wu0HIHufrq11MMxCrgwa8zzPhfcAqM4aHCrf0.G_BxZ4Z3LpPNTT1UI1B5Ip
 GKbiLIz8RsAwOMrS5WuE7Z9ArUgj..TkdxAIA705kiQsxJJ24TCHYS0980l2
 0v8Put3OSCnXjsAGmbg7L352P.9WZfC8ut1KbgVsKLNGGy8Lkp0NlQ2DvrYP
 a_0PenG6cD0HQTA6MaM3YMJarADd_LS7uhp_JRXr4jsdpNbxFzikmmjm1dOk
 PSNAZg8fo0vjf7KU15mo_WoRir2Xlf2T7qgA5x_OLKv9xNfm2yNvR7LfAs7y
 vCF4GkH1udzyJAZNYmcZ2r6_4Iw--
Received: from [62.134.46.5] by web122303.mail.ne1.yahoo.com via HTTP; Wed, 04 Apr 2012 05:54:29 PDT
X-Mailer: YahooMailWebService/0.8.117.340979
References: <1333541107.27592.YahooMailNeo@web122304.mail.ne1.yahoo.com> <4F7C420C.8070401@pidster.com>
Message-ID: <1333544069.69754.YahooMailNeo@web122303.mail.ne1.yahoo.com>
Date: Wed, 4 Apr 2012 05:54:29 -0700 (PDT)
From: Hermes Flying <flyinghermes@yahoo.com>
Reply-To: Hermes Flying <flyinghermes@yahoo.com>
Subject: Re: Discrepancy between Tomcat's connection pool and tomcat's report on memory leaks
To: Tomcat Users List <users@tomcat.apache.org>,
  "pid@pidster.com" <pid@pidster.com>
In-Reply-To: <4F7C420C.8070401@pidster.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="-1062763926-1238691080-1333544069=:69754"
X-Virus-Checked: Checked by ClamAV on apache.org

---1062763926-1238691080-1333544069=:69754
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hi Pid,=0A=0AThis is the configuration=0AThe following entry is in server.x=
ml =0A=0A=A0<Resource name=3D"jdbc_GENERIS_RS" auth=3D"Container"=0A=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 type=3D"javax.sql.DataSource"=0A=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 driverClassName=3D"org.h2.Driver"=0A=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 url=3D"jdbc:h2:file:/opt/en/repos/tomcat/=
webapps/GeneralApplication/db/internaldatabase;SCHEMA=3Dgenericschema"=0A=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 username=3D"root" password=3D"sa"=
=0A=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 maxActive=3D"20" maxIdle=3D"10" =
maxWait=3D"-1"=0A=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 />=0A=0A=0AAnd the=
 following entry is under $TOMCAT_HOME/conf/context.xml=0A=0A=A0<ResourceLi=
nk name=3D"jdbc/GenericDataSource"=0A=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0 global=3D"jdbc_GENERIS_RS"=0A=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0 type=3D"javax.sql.DataSource"/>=0A=0AConcerning your other questi=
ons:=0A1) Yes I could shut down the database manually but I would like to d=
o it as a last resort if this issue is something that can not be fixed sinc=
e I believe that my setup is correct and should be supported as is=0A=0A2) =
You say that it depends if I should close down the connection myself. But h=
ow can I do that? A javax.sql.DataSource does not provide a close method. I=
 would have to cast to org.apache.tomcat.dbcp.dbcp.BasicDataSource to call =
close. I am not sure if this is the proper approach. I mean I then get bind=
 to this class, right? Or there is another way?=0A=0AThank you=0A=0A=0A=0A_=
_______________________________=0A From: Pid <pid@pidster.com>=0ATo: Tomcat=
 Users List <users@tomcat.apache.org> =0ASent: Wednesday, April 4, 2012 3:4=
3 PM=0ASubject: Re: Discrepancy between Tomcat's connection pool and tomcat=
's report on memory leaks=0A =0AOn 04/04/2012 13:05, Hermes Flying wrote:=
=0A> Hi,=0A> =0A> I am using Tomcat 7.0.25 in a Linux machine=0A> =0A> I am=
 using Tomcat's connection pool (org.apache.tomcat.dbcp.dbcp.BasicDataSourc=
e). As database I am using H2 as a file database.=0A> All is ok, but I have=
 the following problem.=0A> On shutdown of Tomcat I see in catalina.out: =
=0A=0AIn which file have you defined the pool?=0A=0A=0A> SEVERE: The web ap=
plication [/GeneralApplication] appears to have started a thread named [H2 =
Log Writer GENERICAPPLICATION] but has failed to stop it. This is very like=
ly to create a memory leak.=0A> Apr 4, 2012 2:32:54 PM org.apache.catalina.=
loader.WebappClassLoader clearReferencesThreads=0A> SEVERE: The web applica=
tion [/GeneralApplication] appears to have started a thread named [H2 File =
Lock Watchdog /opt/en/repos/tomcat/webapps/GeneralApplication/db/internalda=
tabase.lock.db] but has failed to stop it. This is very likely to create a =
memory leak.=0A> =0A> Why do I get these messages?=0A=0AWhen the applicatio=
n shuts down Tomcat tries to detect & prevent memory=0Aleaks by examining t=
hreads & various things associated with the=0AWebappClassloader.=0A=0A=0A> =
As I understand these messages, H2 is still running on shutdown and the doc=
umentation they have says that the database will shutdown once the last con=
nection is closed (and the connections are handled by the pool i.e. Tomcat)=
=0A=0ASo there is no way to manually the database down?=0A=0A=0A> Additiona=
lly the input from H2 dev is that these messages are a Tomcat problem. Tomc=
at should have first disposed of the connection pool and then log the runni=
ng threads.Their explanation seem correct to me.=0A=0AThat's the usual firs=
t response.=A0 Let's figure out whether it's correct...=0A=0A=0A> Is this a=
 known issue? =0A=0ANot that I've come across here.=0A=0A> Why do I see the=
se errors in catalina? =0A=0AAs above.=0A=0A> Should I somehow dispose off =
the connection pool myself?=0A=0ADepends.=0A=0A=0Ap=0A=0A> Thank you for yo=
ur time=0A> Best Regards,=0A> FH=0A> =0A=0A=0A-- =0A=0A[key:62590808]
---1062763926-1238691080-1333544069=:69754--

From users-return-233330-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 13:49:59 2012
Return-Path: <users-return-233330-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9FEB99A56
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 13:49:59 +0000 (UTC)
Received: (qmail 1020 invoked by uid 500); 4 Apr 2012 13:49:53 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 941 invoked by uid 500); 4 Apr 2012 13:49:53 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 872 invoked by uid 99); 4 Apr 2012 13:49:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 13:49:53 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=SPF_PASS,TO_NO_BRKTS_DIRECT
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of llowder@oreillyauto.com designates 208.70.182.171 as permitted sender)
Received: from [208.70.182.171] (HELO domino1.oreillyauto.com) (208.70.182.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 13:49:46 +0000
MIME-Version: 1.0
Subject: Tomcat6 thread pool questions
To: users@tomcat.apache.org
Message-ID: <OF5AAEB29C.4417B5FC-ON862579D6.004B04E2-862579D6.004BEF1A@LocalDomain>
From: llowder@oreillyauto.com
Date: Wed, 4 Apr 2012 08:50:24 -0500
Content-type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: quoted-printable
X-KeepSent: 5AAEB29C:4417B5FC-862579D6:004B04E2; name=$KeepSent; type=4
X-Mailer: Lotus Notes Release 8.5.1 September 28, 2009
X-Disclaimed: 25119
X-MIMETrack: CD-MIME by Router on domino1/OReilly(Release 8.5.3|September 15, 2011) at
 04/04/2012 08:49:45,CD-MIME complete at 04/04/2012 08:49:45,Itemize by Router on domino1/OReilly(Release 8.5.3|September 15, 2011) at
 04/04/2012 08:49:45


Greetings,

I was wondering if someone could help me understand how the threadpools are
handled in tomcat6. I know that a lot of the functionality was moved to
executors.

I set one up and using psi-Probe I could see that it was indeed killing off
threads as I expected. However, the minSpareThreads did not seem to be used
at all.

Is my understanding of that attribute correct, in that "minSparethreads"
should be the minimum number of threads running at any point?

For example, if I have minSpareThreads set to 30, I should see 30 threads
when the server is idle, and between 30 and maxThreads when it is under a
load, right?

That is not what I am seeing, as most of the time there are only 2-3
threads with one busy thread while the server is idle or near idle.

If anyone could let me know either what I am missing or what it is I do not
understand correctly, I would appreciate it.

Thank you.

Lee Lowder

This communication and any attachments are confidential, protected by Commu=
nications Privacy Act 18 USCS =A7 2510, solely for the use of the intended =
recipient, and may contain legally privileged material. If you are not the =
intended recipient, please return or destroy it immediately. Thank you.
=

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233331-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 13:54:25 2012
Return-Path: <users-return-233331-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5EAAD9C75
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 13:54:25 +0000 (UTC)
Received: (qmail 20301 invoked by uid 500); 4 Apr 2012 13:54:21 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 20240 invoked by uid 500); 4 Apr 2012 13:54:21 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 20227 invoked by uid 99); 4 Apr 2012 13:54:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 13:54:21 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of barry.l.propes@citi.com designates 67.231.145.106 as permitted sender)
Received: from [67.231.145.106] (HELO mx0a-00123c01.pphosted.com) (67.231.145.106)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 13:54:11 +0000
Received: from pps.filterd (m0030125 [127.0.0.1])
	by mx0a-00123c02.pphosted.com (8.14.5/8.14.5) with SMTP id q34DrH7Q023602
	for <users@tomcat.apache.org>; Wed, 4 Apr 2012 13:53:50 GMT
Received: from mail.citigroup.com ([192.193.222.5])
	by mx0a-00123c02.pphosted.com with ESMTP id 13n7yh6k32-1
	(version=TLSv1/SSLv3 cipher=AES256-SHA bits=256 verify=NOT)
	for <users@tomcat.apache.org>; Wed, 04 Apr 2012 13:53:50 +0000
Received: from imbhub-ru02.nam.nsroot.net (namdlpdimpsw07.nam.nsroot.net [153.40.172.113])
	by smtpinbound.citigroup.com (Switch-3.4.1/Switch-3.4.1) with ESMTP id q34DquxX002552
	for <users@tomcat.apache.org>; Wed, 4 Apr 2012 13:53:17 GMT
Received: from exnjiht04.nam.nsroot.net (EXNJIHT04.nam.nsroot.net [150.110.165.230])
	by imbhub-ru02.nam.nsroot.net (Switch-3.4.1/Switch-3.4.1) with ESMTP id q34DmdD8021592
	for <users@tomcat.apache.org>; Wed, 4 Apr 2012 13:53:46 GMT
Received: from exlnjht01.lac.nsroot.net (150.110.183.28) by
 exnjiht04.nam.nsroot.net (150.110.165.230) with Microsoft SMTP Server (TLS)
 id 8.3.192.1; Wed, 4 Apr 2012 09:53:28 -0400
Received: from exgtht01.nam.nsroot.net (169.171.98.130) by
 exlnjht01.lac.nsroot.net (150.110.183.28) with Microsoft SMTP Server (TLS) id
 8.3.192.1; Wed, 4 Apr 2012 09:53:28 -0400
Received: from exgtmb06.nam.nsroot.net ([169.171.98.118]) by
 exgtht01.nam.nsroot.net ([169.171.98.130]) with mapi; Wed, 4 Apr 2012
 08:53:27 -0500
From: "Propes, Barry L " <barry.l.propes@citi.com>
To: "'Tomcat Users List'" <users@tomcat.apache.org>
Date: Wed, 4 Apr 2012 08:53:26 -0500
Subject: RE: jdbc pool properties
Thread-Topic: jdbc pool properties
Thread-Index: Ac0SYQE2KboBKmAhRzWabvfCRTiqKAACK46Q
Message-ID: <08382548D50D3049BD5599E1E3146B3416F43AC1A8@exgtmb06.nam.nsroot.net>
References: <CAG2rwuNhHZUZYe2=wzgUkT4XdwWrgSv5gRm=S4ydymAMXGVG+A@mail.gmail.com>
 <17972289.150.1333543571938.JavaMail.daniel@cleveland>
In-Reply-To: <17972289.150.1333543571938.JavaMail.daniel@cleveland>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-WiganSS: 01000000010018exlnjht01.lac.nsroot.net
	ID0044<08382548D50D3049BD5599E1E3146B3416F43AC1A8@exgtmb06.nam.nsroot.net>
X-CFilter-Loop: Reflected
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.6.7498,1.0.260,0.0.0000
 definitions=2012-04-04_05:2012-04-04,2012-04-04,1970-01-01 signatures=0
X-Virus-Checked: Checked by ClamAV on apache.org

There are some databases that do go in and periodically kill off connection=
s, aside from the Tomcat settings.

In addition to testOnBorrow=3Dtrue, I also had two other attributes, but no=
t sure if Tomcat 7.0 uses them or not, as I'm on 6.0.29.

    testOnBorrow=3D"true"
    timeBetweenEvictionRunsMillis=3D"-1"
    minEvictableIdleTimeMillis=3D"28800"



-----Original Message-----
From: Daniel Mikusa [mailto:dmikusa@vmware.com]
Sent: Wednesday, April 04, 2012 7:46 AM
To: Tomcat Users List
Subject: Re: jdbc pool properties



----- Original Message -----
> My db connections seem to be lost after an extended period of
> inactivity

There could be a number of reasons that this occurs.  Perhaps a network iss=
ue is causing them to be disconnected or the database may be timing them ou=
t.  At any rate, it's not likely that the problem would be caused by the "r=
emoveAbandoned" / "abandonedTimeout" settings, unless you application is no=
t properly returning connections to the connection pool.

  https://tomcat.apache.org/tomcat-7.0-doc/jndi-datasource-examples-howto.h=
tml#Preventing_database_connection_pool_leaks


> (for a web application).  And the only way to get the connections to
> work again is to restart tomcat.
>
> My tomcat.jdbc.pool.Datasource settings have:
>
>  <property name=3D"maxActive" value=3D"100"/>
>         <property name=3D"maxIdle" value=3D"30"/>
>         <property name=3D"maxWait" value=3D"1000"/>
>         <property name=3D"defaultAutoCommit" value=3D"true"/>
>         <property name=3D"removeAbandoned" value=3D"true"/>
>         <property name=3D"removeAbandonedTimeout" value=3D"60"/>
>

You probably want to add testOnBorrow=3D"true" and "validationQuery=3DSELEC=
T 1"  (or some other valid query for your DB).  See the following link for =
an explanation of those properties.

  https://commons.apache.org/dbcp/configuration.html

This will cause your connections to be validated prior to their use by your=
 application.  Stale connections will be removed and replaced with new, wor=
king connections.

>
> Is it the removedAbonded and abandonedTimeout?  Does it mean "after 60
> seconds, remove the connection from the pool?

No.  See either of the links I've referenced above for an explanation of th=
ese settings.

>
> I guess what I need is a minActive setting then?
>

There's no "minActive" setting.  You have "minIdle", but I don't think that=
 would help here.

Dan





---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233332-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 14:32:53 2012
Return-Path: <users-return-233332-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CDB3B9AB3
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 14:32:53 +0000 (UTC)
Received: (qmail 47964 invoked by uid 500); 4 Apr 2012 14:32:50 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 47880 invoked by uid 500); 4 Apr 2012 14:32:50 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 47871 invoked by uid 99); 4 Apr 2012 14:32:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 14:32:50 +0000
X-ASF-Spam-Status: No, hits=0.9 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [216.139.250.139] (HELO joe.nabble.com) (216.139.250.139)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 14:32:43 +0000
Received: from alf.nabble.com ([192.168.236.21])
	by joe.nabble.com with esmtp (Exim 4.72)
	(envelope-from <lmhelp1@orange.fr>)
	id 1SFRG2-000823-CS
	for users@tomcat.apache.org; Wed, 04 Apr 2012 07:32:22 -0700
Date: Wed, 4 Apr 2012 07:32:22 -0700 (PDT)
From: =?UTF-8?Q?L=C3=A9a_Massiot?= <lmhelp1@orange.fr>
To: users@tomcat.apache.org
Message-ID: <1333549942374-4686704.post@n6.nabble.com>
In-Reply-To: <4F7AE221.10605@ice-sa.com>
References: <1333360773430-4678428.post@n6.nabble.com> <CABzHfVn5uKEF9RKGUkqGGq56DLNFhRFm6Y_PUSUq--x3=yMpvw@mail.gmail.com> <1333363527730-4678513.post@n6.nabble.com> <4F7A11D7.80205@christopherschultz.net> <1333444940374-4681421.post@n6.nabble.com> <4F7AE221.10605@ice-sa.com>
Subject: Re: Tomcat6 - Context - aliases
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hello Andr=C3=A9,


Andr=C3=A9 Warnier wrote
>=20
> - you need to tell your webapp where the uploaded files should be
> stored/retrieved
> - you cannot do it via an "alias" under Tomcat < v7=20
>=20

Exactly.


Andr=C3=A9 Warnier wrote
>=20
> - so instead of an alias, do it via a property in a properties file, whic=
h
> your webapp would read. This is (almost) a "pure java" solution, which
> would work under any servlet container of any version.
>=20

I wish I knew how to do that and yes, I'm interested in an (almost) "pure
Java" solution.



May I precise what I did and what already works with Tomcat7:

1) When a user uploads a file to the server running Tomcat, I store the
file, for example, in a directory: "/home/d1/"

2) In a JSP, this user can view the list of the "n" files he uploaded:
---------------------------------------------------------------------------=
-----------
< a href=3D"/an_alias_1/file_1.txt"> file_1.txt < /a>
...
< a href=3D"/an_alias_1/file_n.txt"> file_n.txt < /a>
---------------------------------------------------------------------------=
-----------

3) In Tomcat7, I used the "aliases" properties of the "Context" element in
"META-INF/context.xml" to ("magically" to me :/), let Tomcat map these
addresses:
---------------------------------------------------------------------------=
-----------
/an_alias_1/file_1.txt
...
/an_alias_1/file_n.txt
---------------------------------------------------------------------------=
-----------
to their real addresses on the  filesystem:
---------------------------------------------------------------------------=
-----------
/home/d1/file_1.txt=20
...
/home/d1/file_n.txt=20
---------------------------------------------------------------------------=
-----------
so that the user could click on one of these links and retrieve/view the
corresponding resource.

Of course, I read carefully what you wrote, it looks like I'm really missin=
g
something important because I have absolutely no idea how to "implement" th=
e
same mechanism using a properties file as you suggest...
Would you be so very kind to to explain a bit more?

Thank you and best regards.

--
View this message in context: http://tomcat.10.n6.nabble.com/Tomcat6-Contex=
t-aliases-tp4678430p4686704.html
Sent from the Tomcat - User mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233333-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 14:41:19 2012
Return-Path: <users-return-233333-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C8F849D7F
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 14:41:19 +0000 (UTC)
Received: (qmail 80615 invoked by uid 500); 4 Apr 2012 14:41:16 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 80545 invoked by uid 500); 4 Apr 2012 14:41:16 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 80532 invoked by uid 99); 4 Apr 2012 14:41:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 14:41:16 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.213.173] (HELO mail-yx0-f173.google.com) (209.85.213.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 14:41:11 +0000
Received: by yenr5 with SMTP id r5so238664yen.18
        for <users@tomcat.apache.org>; Wed, 04 Apr 2012 07:40:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=via.com; s=google;
        h=mime-version:date:message-id:subject:from:to:cc:content-type;
        bh=hVMtuVzjJ7mvhax9fPzfd+aHwWJsnh30FYmRBzEDP7k=;
        b=UNxYkCuu8wZGyGKwH7RY0KuIaaHd35tjE5hznXm2t5XrjQ/6O4XgGmx5K1Vv2TshUn
         PRpvFZu3gG+Qppbtl3/0A6TP5apxVwWKl0eUk0iBX2QXMWqNCZiwHvGfajdshskYpivH
         jIf00U2JkV8cVNdXc8rciZKak1yuwMnSh9Ttw=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:cc:content-type
         :x-gm-message-state;
        bh=hVMtuVzjJ7mvhax9fPzfd+aHwWJsnh30FYmRBzEDP7k=;
        b=Pe/6+u0wXVzLoqnZ0psy36NH8T/qCBKLeibhy9hbCFWWH5uspSdJ01ECUQfxusTxvt
         WDRrKG3F0BVsPH8WKi6gQDBoVS+D6vZF/Fs8QHPiwOZ0W5dSjy3gve+tfEWz+tHSfFYP
         JBf9yi/chZg9hkc0suF3aGvtdiEUt0HUIsHdL7++QdoVLLH56M8Nzna86aw3193ZNbXf
         uNoJQ3Wefc0KS/VB1FD6Gdl5svwMSz5IKmeITj3AwjJDwd+SMoReesO4QeZotutH1ykJ
         MOS/ZOgjpU+gtX09q/e5+q6WCL4VHK8Gvj6iNm9Zw1TTVxAPyCbb/hn/uXzUX9t0/RRs
         ZsEA==
MIME-Version: 1.0
Received: by 10.60.22.70 with SMTP id b6mr25034631oef.5.1333550449210; Wed, 04
 Apr 2012 07:40:49 -0700 (PDT)
Received: by 10.182.209.34 with HTTP; Wed, 4 Apr 2012 07:40:49 -0700 (PDT)
Date: Wed, 4 Apr 2012 20:10:49 +0530
Message-ID: <CABKrPsOS9+H=m8MBGcQitR0P3w80VY8Uu8P9GeVopTjPCywkWQ@mail.gmail.com>
Subject: SEVERE: Unable to start cluster.
From: Dhaval Jaiswal <dhaval.jaiswal@via.com>
To: Tomcat Users List <users@tomcat.apache.org>
Cc: Shrinivas Devarkonda <shrinivas.devarkonda@via.com>
Content-Type: multipart/alternative; boundary=e89a8fb20616d0b6cf04bcdb68b7
X-Gm-Message-State: ALoCoQlXEe/dm+YqnvfBcDVPQ1JJC2TM2L2Cp7wWO9rASUQo7MZbedxfjSnThrEi/adx62hjUgHl
X-Virus-Checked: Checked by ClamAV on apache.org

--e89a8fb20616d0b6cf04bcdb68b7
Content-Type: text/plain; charset=ISO-8859-1

Hi List,

Below is the error we are facing while starting tomcats.

SEVERE: Unable to start cluster.
org.apache.catalina.tribes.ChannelException: java.net.SocketException: Not
a multicast address; No faulty members identified.


Our cluster setting is as below in server.xml


 <Cluster className="org.apache.catalina.ha.tcp.SimpleTcpCluster"
channelSendOptions="6">
        <Manager className="org.apache.catalina.ha.session.BackupManager"
expireSessionsOnShutdown="false"
                   notifyListenersOnReplication="true" mapSendOptions="6"/>

            <Channel
className="org.apache.catalina.tribes.group.GroupChannel">
             <Membership
className="org.apache.catalina.tribes.membership.McastService"
                        address="192.168.3.14"
                        port="45564"
                        frequency="500"
                        dropTime="30000"/>
             <Receiver
className="org.apache.catalina.tribes.transport.nio.NioReceiver"
                      address="auto"
                      port="4000"
                      selectorTimeout="5000"
                      timeout="60000"
                      maxThreads="6"/>

             <Sender
className="org.apache.catalina.tribes.transport.ReplicationTransmitter">
                  <Transport
className="org.apache.catalina.tribes.transport.nio.PooledParallelSender"
timeout="60000" keepAliveCount="0"/>
             </Sender>
             <Interceptor
className="org.apache.catalina.tribes.group.interceptors.TcpFailureDetector"/>
             <Interceptor
className="org.apache.catalina.tribes.group.interceptors.MessageDispatch15Interceptor"/>
             <Interceptor
className="org.apache.catalina.tribes.group.interceptors.ThroughputInterceptor"/>
           </Channel>
         <Valve className="org.apache.catalina.ha.tcp.ReplicationValve"

filter=".*\.gif|.*\.js|.*\.jpeg|.*\.jpg|.*\.png|.*\.htm|.*\.html|.*\.css|.*\.txt"/>
         <Valve
className="org.apache.catalina.ha.session.JvmRouteBinderValve"/>
       <ClusterListener
className="org.apache.catalina.ha.session.ClusterSessionListener"/>
       <ClusterListener
className="org.apache.catalina.ha.session.JvmRouteSessionIDBinderListener"/>
     </Cluster>



Note: 192.168.3.14 is the IP of backup manager with java & 192.168.3.9 is
the IP address of local tomcat where above server.xml is hosted.

Please guide us as to how to overcome the issue & please give us the sample
<cluster>   </cluster>  file if possible.

--e89a8fb20616d0b6cf04bcdb68b7--

From users-return-233334-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 14:47:08 2012
Return-Path: <users-return-233334-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 614309F81
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 14:47:08 +0000 (UTC)
Received: (qmail 1912 invoked by uid 500); 4 Apr 2012 14:47:04 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 1782 invoked by uid 500); 4 Apr 2012 14:47:04 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 1773 invoked by uid 99); 4 Apr 2012 14:47:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 14:47:04 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [213.157.18.194] (HELO komm3.srs-management.de) (213.157.18.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 14:46:58 +0000
Received: from SRS-EXCH-02.bensheim.srs ([192.168.101.15]) by
 SRS-EXCH-02.bensheim.srs ([192.168.101.15]) with mapi; Wed, 4 Apr 2012
 16:45:47 +0200
From: =?iso-8859-1?Q?Thomas_Strau=DF?= <t.strauss@srs-management.de>
To: Tomcat Users List <users@tomcat.apache.org>
Date: Wed, 4 Apr 2012 16:45:44 +0200
Subject: AW: AW: FormAuthentication Valve changes fail with RequestListeners?
Thread-Topic: AW: FormAuthentication Valve changes fail with
 RequestListeners?
Thread-Index: Ac0Rkjfw7Xk43weLQGGD5t4xa5kmCQA3ysoA
Message-ID: <983BCB8DEFCDA248B640B2F6373CAE8D6DC8F52384@SRS-EXCH-02.bensheim.srs>
References: <983BCB8DEFCDA248B640B2F6373CAE8D6DC8F52285@SRS-EXCH-02.bensheim.srs>
	<CABzHfVkwa9tuH+QkSDteZRQ3_q85PWbkSHqSAaU5pvvLB57iwA@mail.gmail.com>
	<983BCB8DEFCDA248B640B2F6373CAE8D6DC8F522C7@SRS-EXCH-02.bensheim.srs>
 <CABzHfVnoJ1hk77=FuhcKpFVBJGFoDoGPLhgpKQyxWL3AvmM42A@mail.gmail.com>
 <983BCB8DEFCDA248B640B2F6373CAE8D6DC8F52345@SRS-EXCH-02.bensheim.srs>
 <4F7AE7D1.6070106@ice-sa.com>
In-Reply-To: <4F7AE7D1.6070106@ice-sa.com>
Accept-Language: de-DE
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

> -----Urspr=FCngliche Nachricht-----
> Von: Andr=E9 Warnier [mailto:aw@ice-sa.com]
> Gesendet: Dienstag, 3. April 2012 14:07
> An: Tomcat Users List
> Betreff: Re: AW: FormAuthentication Valve changes fail with
> RequestListeners?
>
> Thomas Strau=DF wrote:
> ...
>
> >>>
> >>> We have not succeeded so far. I want to give you some more
> >>> information what happens, the context.xml and the web.xml
> >>>
> >>> What we have changed versus the existing setup, working on 7.0.11
> >>> - We have moved the login.jsp into the protection domain (was
> >>> outside before). This did not remove the issue.
> >>> - We have changed the preemptiveAuthentication setting. This did not
> >>> remove the issue.
> >>>
> >>> This is the flow through the system that we can see:
> >>>
> >>> Client sends request to /portal
> >>>
> >>>        /portal is not protected
> >>>        /portal/jsp/main.jsp is welcome page and protected (see
> >>> web.xml)
> >>>        portal context configures formauthentication on the
> >>> protection domain
> >>>        Tomcat redirects/forwards incoming call to /jsp/login.jsp
> >>> (protected
> >>> resource)
> >>>
>
> I have not followed in the details, and maybe I am talking out of turn
> here, but isn't there a "loop" problem if the login.jsp page is itself
> protected ?
> (Like it will trigger the authentication, which will trigger a redirect t=
o
> login.jsp, which will trigger the authentication, which will... etc.)
>

there is no difference if the jsp is in or out of the protection domain. Ac=
tually we moved the jsp inside the domain following a hint from the list :-=
)



> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>
>
> --
> This message has been scanned for viruses and dangerous content by
> MailScanner, and is believed to be clean.


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233335-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 14:48:13 2012
Return-Path: <users-return-233335-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AE8DBA000
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 14:48:13 +0000 (UTC)
Received: (qmail 8264 invoked by uid 500); 4 Apr 2012 14:48:10 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 8187 invoked by uid 500); 4 Apr 2012 14:48:10 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 8178 invoked by uid 99); 4 Apr 2012 14:48:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 14:48:10 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [213.157.18.194] (HELO komm3.srs-management.de) (213.157.18.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 14:48:02 +0000
Received: from SRS-EXCH-02.bensheim.srs ([192.168.101.15]) by
 SRS-EXCH-02.bensheim.srs ([192.168.101.15]) with mapi; Wed, 4 Apr 2012
 16:46:54 +0200
From: =?iso-8859-1?Q?Thomas_Strau=DF?= <t.strauss@srs-management.de>
To: Tomcat Users List <users@tomcat.apache.org>
Date: Wed, 4 Apr 2012 16:46:51 +0200
Subject: AW: FormAuthentication Valve changes fail with RequestListeners?
Thread-Topic: FormAuthentication Valve changes fail with RequestListeners?
Thread-Index: Ac0OZbVvyp4v+pOyRhGQHuL1l+W6qwDH6PJAADsTwIA=
Message-ID: <983BCB8DEFCDA248B640B2F6373CAE8D6DC8F52385@SRS-EXCH-02.bensheim.srs>
References: <983BCB8DEFCDA248B640B2F6373CAE8D6DC8F52285@SRS-EXCH-02.bensheim.srs>
	<CABzHfVkwa9tuH+QkSDteZRQ3_q85PWbkSHqSAaU5pvvLB57iwA@mail.gmail.com>
	<983BCB8DEFCDA248B640B2F6373CAE8D6DC8F522C7@SRS-EXCH-02.bensheim.srs>
 <CABzHfVnoJ1hk77=FuhcKpFVBJGFoDoGPLhgpKQyxWL3AvmM42A@mail.gmail.com>
 <983BCB8DEFCDA248B640B2F6373CAE8D6DC8F52345@SRS-EXCH-02.bensheim.srs>
In-Reply-To: <983BCB8DEFCDA248B640B2F6373CAE8D6DC8F52345@SRS-EXCH-02.bensheim.srs>
Accept-Language: de-DE
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

Repeating the message because I signed it (again, *sigh*), causing trouble =
- sorry.

Hi,

we have done the tests and got the following results (7.0.11 and 7.0.26).

Thank you for taking the time:

=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D Tomcat 7.0.11
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
First call to portal:

["http-bio-8080"-exec-3                | INFO  | 30-03 16:47:29:005]  >>
requestInitialized
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInitia=
l
ized(PortalRequestListener.java:52)]
["http-bio-8080"-exec-3                | INFO  | 30-03 16:47:29:005]
PortalRequest thread: 39 - "http-bio-8080"-exec-3
[de.srs.pen.portal.utils.server.servlet.PortalRequest.set(PortalRequest.jav=
a
:45)]
["http-bio-8080"-exec-3                | TRACE | 30-03 16:47:30:186]
Request Listener: Request Initialized
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInitia=
l
ized(PortalRequestListener.java:60)]
["http-bio-8080"-exec-3                | TRACE | 30-03 16:47:30:187]
requested URI:/portal-srs-standard/
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInitia=
l
ized(PortalRequestListener.java:62)]
["http-bio-8080"-exec-3                | TRACE | 30-03 16:47:30:187]
httpSession ID: 2D7D25B19BDC1A64DFFD61BBFD93CE7F
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInitia=
l
ized(PortalRequestListener.java:63)]
["http-bio-8080"-exec-3                | TRACE | 30-03 16:47:30:187]
principal:no principal
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInitia=
l
ized(PortalRequestListener.java:66)]
["http-bio-8080"-exec-3                | TRACE | 30-03 16:47:30:187]  stack
trace:
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInitia=
l
ized(PortalRequestListener.java:67)]
java.lang.Exception
        at
de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInitial=
i
zed(PortalRequestListener.java:67)
        at
org.apache.catalina.core.StandardContext.fireRequestInitEvent(StandardConte=
x
t.java:5903)
        at
org.apache.catalina.authenticator.FormAuthenticator.forwardToLoginPage(Form=
A
uthenticator.java:372)
        at
org.apache.catalina.authenticator.FormAuthenticator.authenticate(FormAuthen=
t
icator.java:267)
        at
org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBas=
e
.java:556)
        at
org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
        at
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:16=
4
)
        at
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:10=
0
)
        at
org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
        at
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.jav=
a
:118)
        at
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:394)
        at
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:243)
        at
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Htt=
p
11Protocol.java:188)
        at
org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java=
:
302)
        at
java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.j=
a
va:886)
        at
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:=
9
08)
        at java.lang.Thread.run(Thread.java:662)


Credentials provided, login done

["http-bio-8080"-exec-3                | TRACE | 30-03 16:47:47:246]
Request Listener: Request Initialized
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInitia=
l
ized(PortalRequestListener.java:60)]
["http-bio-8080"-exec-3                | TRACE | 30-03 16:47:50:803]
requested URI:/portal-srs-standard/
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInitia=
l
ized(PortalRequestListener.java:62)]
["http-bio-8080"-exec-3                | TRACE | 30-03 16:47:50:803]
httpSession ID: 17E5174AC9E99DC97A44B0967E3E0219
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInitia=
l
ized(PortalRequestListener.java:63)]
["http-bio-8080"-exec-3                | TRACE | 30-03 16:47:50:804]
principal:srs/m.strauss
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInitia=
l
ized(PortalRequestListener.java:66)]
["http-bio-8080"-exec-3                | TRACE | 30-03 16:47:50:804]  stack
trace:
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInitia=
l
ized(PortalRequestListener.java:67)]
java.lang.Exception
        at
de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInitial=
i
zed(PortalRequestListener.java:67)
        at
org.apache.catalina.core.StandardContext.fireRequestInitEvent(StandardConte=
x
t.java:5903)
        at
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.j=
a
va:160)
        at
org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBas=
e
.java:591)
        at
org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
        at
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:16=
4
)
        at
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:10=
0
)
        at
org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
        at
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.jav=
a
:118)
        at
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:394)
        at
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:243)
        at
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Htt=
p
11Protocol.java:188)
        at
org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java=
:
302)
        at
java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.j=
a
va:886)
        at
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:=
9
08)
        at java.lang.Thread.run(Thread.java:662)

=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D Tomcat 7.0.26
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D

[http-bio-8080-exec-3                  | TRACE | 30-03 17:12:11:030]
Request Listener: Request Initialized
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInitia=
l
ized(PortalRequestListener.java:60)]
[http-bio-8080-exec-3                  | TRACE | 30-03 17:12:11:813]
requested URI:/portal-srs-standard/
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInitia=
l
ized(PortalRequestListener.java:62)]
[http-bio-8080-exec-3                  | TRACE | 30-03 17:12:11:814]
httpSession ID: AC7A464173A57BD6CB8602A906EFB0EF
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInitia=
l
ized(PortalRequestListener.java:63)]
[http-bio-8080-exec-3                  | TRACE | 30-03 17:12:11:814]
principal:no principal
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInitia=
l
ized(PortalRequestListener.java:66)]
[http-bio-8080-exec-3                  | TRACE | 30-03 17:12:11:833]  stack
trace:
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInitia=
l
ized(PortalRequestListener.java:67)]
java.lang.Exception
        at
de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInitial=
i
zed(PortalRequestListener.java:67)
        at
org.apache.catalina.core.StandardContext.fireRequestInitEvent(StandardConte=
x
t.java:5934)
        at
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:16=
4
)
        at
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98=
)
        at
org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
        at
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.jav=
a
:118)
        at
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at
org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Proc=
e
ssor.java:987)
        at
org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(Abstra=
c
tProtocol.java:579)
        at
org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java=
:
307)
        at
java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.j=
a
va:886)
        at
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:=
9
08)
        at java.lang.Thread.run(Thread.java:662)
[http-bio-8080-exec-3                  | INFO  | 30-03 17:12:12:745]  <<
requestInitialized
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInitia=
l
ized(PortalRequestListener.java:93)]



[http-bio-8080-exec-7                  | INFO  | 30-03 17:13:26:084]
PortalRequest thread: 28 - http-bio-8080-exec-7
[de.srs.pen.portal.utils.server.servlet.PortalRequest.set(PortalRequest.jav=
a
:45)]
[http-bio-8080-exec-7                  | TRACE | 30-03 17:13:44:622]
Request Listener: Request Initialized
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInitia=
l
ized(PortalRequestListener.java:60)]
[http-bio-8080-exec-7                  | TRACE | 30-03 17:13:45:263]
requested URI:/portal-srs-standard/j_security_check
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInitia=
l
ized(PortalRequestListener.java:62)]
[http-bio-8080-exec-7                  | TRACE | 30-03 17:13:45:486]
httpSession ID: AC7A464173A57BD6CB8602A906EFB0EF
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInitia=
l
ized(PortalRequestListener.java:63)]
[http-bio-8080-exec-7                  | TRACE | 30-03 17:13:46:007]
principal:no principal
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInitia=
l
ized(PortalRequestListener.java:66)]
[http-bio-8080-exec-7                  | TRACE | 30-03 17:13:46:831]  stack
trace:
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInitia=
l
ized(PortalRequestListener.java:67)]
java.lang.Exception
        at
de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInitial=
i
zed(PortalRequestListener.java:67)
        at
org.apache.catalina.core.StandardContext.fireRequestInitEvent(StandardConte=
x
t.java:5934)
        at
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:16=
4
)
        at
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98=
)
        at
org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
        at
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.jav=
a
:118)
        at
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at
org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Proc=
e
ssor.java:987)
        at
org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(Abstra=
c
tProtocol.java:579)
        at
org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java=
:
307)
        at
java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.j=
a
va:886)
        at
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:=
9
08)
        at java.lang.Thread.run(Thread.java:662)
[http-bio-8080-exec-7                  | INFO  | 30-03 17:13:49:228]  <<
requestInitialized
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInitia=
l
ized(PortalRequestListener.java:93)]


Mit freundlichen Gr=FC=DFen

Thomas Strau=DF

SRS PaperDynamix=AE
WE MAKE PAPER WORK

SRS-Management GmbH
Berliner Ring 93
64625 Bensheim
T +49 6251 85 424 - 20
F +49 6251 85 424 - 14
M +49 174 2110912

www.srs-management.de
www.srs-paperdynamix.de

HRB 25262 AG Darmstadt
Gesch=E4ftsf=FChrer: Detlev Homilius, Thomas Strau=DF



> -----Urspr=FCngliche Nachricht-----
> Von: Konstantin Kolinko [mailto:knst.kolinko@gmail.com]
> Gesendet: Freitag, 30. M=E4rz 2012 13:10
> An: Tomcat Users List
> Betreff: Re: FormAuthentication Valve changes fail with RequestListeners?
>
> 2012/3/30 Thomas Strau=DF <t.strauss@srs-management.de>:
> > Hi,
> >
> > thank you for the information.
> >
> > We have not succeeded so far. I want to give you some more information
> > what happens, the context.xml and the web.xml
> >
> > What we have changed versus the existing setup, working on 7.0.11
> > - We have moved the login.jsp into the protection domain (was outside
> > before). This did not remove the issue.
> > - We have changed the preemptiveAuthentication setting. This did not
> > remove the issue.
> >
> > This is the flow through the system that we can see:
> >
> > Client sends request to /portal
> >
> >        /portal is not protected
> >        /portal/jsp/main.jsp is welcome page and protected (see
> > web.xml)
> >        portal context configures formauthentication on the protection
> > domain
> >        Tomcat redirects/forwards incoming call to /jsp/login.jsp
> > (protected
> > resource)
> >
> > FormAuthentication Valve is called
> > Request Listener is called (expected: principal is null -> OK!)
>
> What is stacktrace at this point inside the listener?
> (e.g. (new Exception()).printStackTrace());
>
> Maybe you can compare 7.0.26 and 7.0.11.
>
>
> IIRC there was some refactoring with regards to where the valves are
> placed and how listeners are called  In 7.0.22 changelog:
>
> "Error handling and request listeners are now handled in the
> StandardHostValve to ensure they wrap all Context level activity."
>
> Maybe something was missed there.
>
> > jsp/login.jsp is displayed, waiting for user User adds information,
> > press submit Client sends request to j_security_check is initiated by
> > browser with form data
> >
> > (something happens here?)
> >
> > Realm is called: Authentication succeeds, realm creates principal
> >        Realm provides its own implementation of Principal Object
> >        Realm uses different table-structure than original DataSource
> > Realm
> >
> > (something happens here?)
> >
> > Request Listener is called (expected: principal is not null -> FAILS!)
> >
> > (something happens here?)
> >
> > jsp/main.jsp is called, principal in request is not null -> can be
> > dumped to the JSP view
> >
> >
> > Following here is the used context.xml
> > (...)
> >
>
> BTW, if you want to run under debugger, the tips are here:
> https://wiki.apache.org/tomcat/FAQ/Developing#Debugging
>
> Best regards,
> Konstantin Kolinko
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>
>
> --
> This message has been scanned for viruses and dangerous content by
> MailScanner, and is believed to be clean.


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233336-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 15:12:09 2012
Return-Path: <users-return-233336-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3F2389B18
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 15:12:09 +0000 (UTC)
Received: (qmail 87469 invoked by uid 500); 4 Apr 2012 15:12:05 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 87282 invoked by uid 500); 4 Apr 2012 15:12:05 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 87272 invoked by uid 99); 4 Apr 2012 15:12:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 15:12:05 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.91.2.12] (HELO smtp-outbound-1.vmware.com) (208.91.2.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 15:11:59 +0000
Received: from sc9-mailhost2.vmware.com (sc9-mailhost2.vmware.com [10.113.161.72])
	by smtp-outbound-1.vmware.com (Postfix) with ESMTP id A69C828361
	for <users@tomcat.apache.org>; Wed,  4 Apr 2012 08:11:38 -0700 (PDT)
Received: from zimbra-prod-mta-2.vmware.com (zimbra-prod-mta-2.vmware.com [10.113.160.174])
	by sc9-mailhost2.vmware.com (Postfix) with ESMTP id 9A06EB035C
	for <users@tomcat.apache.org>; Wed,  4 Apr 2012 08:11:38 -0700 (PDT)
Received: from localhost (localhost.localdomain [127.0.0.1])
	by zimbra-prod-mta-2.vmware.com (Postfix) with ESMTP id 963D3361FD
	for <users@tomcat.apache.org>; Wed,  4 Apr 2012 08:11:38 -0700 (PDT)
X-Virus-Scanned: amavisd-new at zimbra-prod-mta-2.vmware.com
Received: from zimbra-prod-mta-2.vmware.com ([127.0.0.1])
	by localhost (zimbra-prod-mta-2.vmware.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id yYQ4MgH3GENy for <users@tomcat.apache.org>;
	Wed,  4 Apr 2012 08:11:38 -0700 (PDT)
Received: from zimbra-prod-mbox-5.vmware.com (zimbra-prod-mbox-5.vmware.com [10.113.160.194])
	by zimbra-prod-mta-2.vmware.com (Postfix) with ESMTP id 7D33A361EB
	for <users@tomcat.apache.org>; Wed,  4 Apr 2012 08:11:38 -0700 (PDT)
Date: Wed, 4 Apr 2012 08:11:38 -0700 (PDT)
From: Daniel Mikusa <dmikusa@vmware.com>
To: Tomcat Users List <users@tomcat.apache.org>
Message-ID: <18586956.280.1333552294480.JavaMail.daniel@cleveland>
In-Reply-To: <CABKrPsOS9+H=m8MBGcQitR0P3w80VY8Uu8P9GeVopTjPCywkWQ@mail.gmail.com>
Subject: Re: SEVERE: Unable to start cluster.
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Originating-IP: [24.160.217.1]
X-Mailer: Zimbra 7.1.3_GA_3374 (Zimbra Desktop/7.1.4_11273_Linux)
X-Virus-Checked: Checked by ClamAV on apache.org

----- Original Message -----
> Hi List,
> 
> Below is the error we are facing while starting tomcats.
> 
> SEVERE: Unable to start cluster.
> org.apache.catalina.tribes.ChannelException:
> java.net.SocketException: Not
> a multicast address; No faulty members identified.
> 

The address you specified is not a multicast address.  See the following link for info on multicast addresses.

  https://en.wikipedia.org/wiki/Multicast_address

> 
> Our cluster setting is as below in server.xml
> 
> 
>  <Cluster className="org.apache.catalina.ha.tcp.SimpleTcpCluster"
> channelSendOptions="6">
>         <Manager
>         className="org.apache.catalina.ha.session.BackupManager"
> expireSessionsOnShutdown="false"
>                    notifyListenersOnReplication="true"
>                    mapSendOptions="6"/>
> 
>             <Channel
> className="org.apache.catalina.tribes.group.GroupChannel">
>              <Membership
> className="org.apache.catalina.tribes.membership.McastService"

>                         address="192.168.3.14"

This is the address which is referenced from the error above.  It's not a multicast address.

>                         port="45564"
>                         frequency="500"
>                         dropTime="30000"/>
>              <Receiver
> className="org.apache.catalina.tribes.transport.nio.NioReceiver"
>                       address="auto"
>                       port="4000"
>                       selectorTimeout="5000"
>                       timeout="60000"
>                       maxThreads="6"/>
> 
>              <Sender
> className="org.apache.catalina.tribes.transport.ReplicationTransmitter">
>                   <Transport
> className="org.apache.catalina.tribes.transport.nio.PooledParallelSender"
> timeout="60000" keepAliveCount="0"/>
>              </Sender>
>              <Interceptor
> className="org.apache.catalina.tribes.group.interceptors.TcpFailureDetector"/>
>              <Interceptor
> className="org.apache.catalina.tribes.group.interceptors.MessageDispatch15Interceptor"/>
>              <Interceptor
> className="org.apache.catalina.tribes.group.interceptors.ThroughputInterceptor"/>
>            </Channel>
>          <Valve
>          className="org.apache.catalina.ha.tcp.ReplicationValve"
> 
> filter=".*\.gif|.*\.js|.*\.jpeg|.*\.jpg|.*\.png|.*\.htm|.*\.html|.*\.css|.*\.txt"/>
>          <Valve
> className="org.apache.catalina.ha.session.JvmRouteBinderValve"/>
>        <ClusterListener
> className="org.apache.catalina.ha.session.ClusterSessionListener"/>
>        <ClusterListener
> className="org.apache.catalina.ha.session.JvmRouteSessionIDBinderListener"/>
>      </Cluster>
> 
> 
> 
> Note: 192.168.3.14 is the IP of backup manager with java &
> 192.168.3.9 is
> the IP address of local tomcat where above server.xml is hosted.
> 
> Please guide us as to how to overcome the issue 

Use a correct multicast address.

>& please give us the sample

See the section title "For the impatient".

  https://tomcat.apache.org/tomcat-7.0-doc/cluster-howto.html

Dan


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233337-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 15:14:11 2012
Return-Path: <users-return-233337-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6BB479C19
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 15:14:11 +0000 (UTC)
Received: (qmail 99910 invoked by uid 500); 4 Apr 2012 15:14:08 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 99722 invoked by uid 500); 4 Apr 2012 15:14:07 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 99713 invoked by uid 99); 4 Apr 2012 15:14:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 15:14:07 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=MIME_QP_LONG_LINE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [212.218.179.23] (HELO srv.ordix.de) (212.218.179.23)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 15:14:01 +0000
Received: from emailix.ordix.de (emailix.ordix.de [192.168.7.99])
	by srv.ordix.de (Postfix) with ESMTP id AFF0D7D9
	for <users@tomcat.apache.org>; Wed,  4 Apr 2012 17:11:43 +0200 (CEST)
Received: by emailix.ordix.de (Postfix, from userid 96)
	id 2FB0F9992; Wed,  4 Apr 2012 17:13:58 +0200 (CEST)
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on emailix.ordix.de
X-Spam-Level: 
Received: from zarafix.ordix.de (zarafix.ordix.de [192.168.7.165])
	by emailix.ordix.de (Postfix) with SMTP id 622A99927
	for <users@tomcat.apache.org>; Wed,  4 Apr 2012 17:13:52 +0200 (CEST)
Subject: AW: SEVERE: Unable to start cluster.
From: =?windows-1252?Q?Thomas_Rohde_?= <tro@ordix.de>
To: =?windows-1252?Q?users=40tomcat.apache.org?= <users@tomcat.apache.org>
Date: Wed, 4 Apr 2012 17:13:35 +0200
Mime-Version: 1.0
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-Mailer: Zarafa 6.40.14-31537
Message-Id: <zarafa.4f7c651f.1095.7ca7df39672deef6@zarafix.ordix.de>
X-Old-Spam-Status: No  -102.9 / 4.5  Tests= ALL_TRUSTED | BAYES_00 |
	MIME_QP_LONG_LINE | T_RP_MATCHES_RCVD | USER_IN_WHITELIST

-----Urspr=FCngliche Nachricht-----
Von:=09Dhaval Jaiswal <dhaval.jaiswal@via.com>
Gesendet:=09Mi 04.04.2012 16:41
Betreff:=09SEVERE: Unable to start cluster.
An:=09Tomcat Users List <users@tomcat.apache.org>;=20
CC:=09Shrinivas Devarkonda <shrinivas.devarkonda@via.com>;=20
> Hi List,
>=20
> Below is the error we are facing while starting tomcats.
>=20
> SEVERE: Unable to start cluster.
> org.apache.catalina.tribes.ChannelException: java.net.SocketException: Not
> a multicast address; No faulty members identified.
>=20
>=20
> Our cluster setting is as below in server.xml
>=20
>=20
>  <Cluster className=3D"org.apache.catalina.ha.tcp.SimpleTcpCluster"
> channelSendOptions=3D"6">
>         <Manager className=3D"org.apache.catalina.ha.session.BackupManager"
> expireSessionsOnShutdown=3D"false"
>                    notifyListenersOnReplication=3D"true" mapSendOptions=3D"6"/>
>=20
>             <Channel
> className=3D"org.apache.catalina.tribes.group.GroupChannel">
>              <Membership
> className=3D"org.apache.catalina.tribes.membership.McastService"
>                         address=3D"192.168.3.14"
>                         port=3D"45564"
>                         frequency=3D"500"
>                         dropTime=3D"30000"/>
>              <Receiver
> className=3D"org.apache.catalina.tribes.transport.nio.NioReceiver"
>                       address=3D"auto"
>                       port=3D"4000"
>                       selectorTimeout=3D"5000"
>                       timeout=3D"60000"
>                       maxThreads=3D"6"/>
>=20
>              <Sender
> className=3D"org.apache.catalina.tribes.transport.ReplicationTransmitter">
>                   <Transport
> className=3D"org.apache.catalina.tribes.transport.nio.PooledParallelSender"
> timeout=3D"60000" keepAliveCount=3D"0"/>
>              </Sender>
>              <Interceptor
> className=3D"org.apache.catalina.tribes.group.interceptors.TcpFailureDetector"/>
>              <Interceptor
> className=3D"org.apache.catalina.tribes.group.interceptors.MessageDispatch15Interc
> eptor"/>
>              <Interceptor
> className=3D"org.apache.catalina.tribes.group.interceptors.ThroughputInterceptor"/
> >
>            </Channel>
>          <Valve className=3D"org.apache.catalina.ha.tcp.ReplicationValve"
>=20
> filter=3D".*\.gif|.*\.js|.*\.jpeg|.*\.jpg|.*\.png|.*\.htm|.*\.html|.*\.css|.*\.txt
> "/>
>          <Valve
> className=3D"org.apache.catalina.ha.session.JvmRouteBinderValve"/>
>        <ClusterListener
> className=3D"org.apache.catalina.ha.session.ClusterSessionListener"/>
>        <ClusterListener
> className=3D"org.apache.catalina.ha.session.JvmRouteSessionIDBinderListener"/>
>      </Cluster>
>=20
>=20
>=20
> Note: 192.168.3.14 is the IP of backup manager with java & 192.168.3.9 is
> the IP address of local tomcat where above server.xml is hosted.
>=20
> Please guide us as to how to overcome the issue & please give us the sample
> <cluster>   </cluster>  file if possible.
>=20

Hi Dhaval,

you have to set a multicast ip address for the "address" attribute of the McastService. A multicast address looks like 224.x.x.x.

Take a look at http://en.wikipedia.org/wiki/Multicast_address for further details.

The Tomcat cluster uses multicast for the management of the cluster member.

Thomas

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233338-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 15:25:52 2012
Return-Path: <users-return-233338-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 493EB9DB5
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 15:25:52 +0000 (UTC)
Received: (qmail 42514 invoked by uid 500); 4 Apr 2012 15:25:48 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 42452 invoked by uid 500); 4 Apr 2012 15:25:48 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 42440 invoked by uid 99); 4 Apr 2012 15:25:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 15:25:48 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of fairouz.fakhfakh@gmail.com designates 209.85.214.45 as permitted sender)
Received: from [209.85.214.45] (HELO mail-bk0-f45.google.com) (209.85.214.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 15:25:42 +0000
Received: by bkcjg9 with SMTP id jg9so514024bkc.18
        for <users@tomcat.apache.org>; Wed, 04 Apr 2012 08:25:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=RujUdvgBQZwOBoLomR+jwT6x1od2JPoUquyqkBu7Rrk=;
        b=kaxRqOdEDgA8Mjx5oNyC8ptYkTEGicZJDGdCrzurfkp/PmD9tbOsdx942QqjgJzYtd
         LH7UfsHEjl4UUYM0qeXdkP2leyds2MyxsgUHUh4DifScjynLn+sQRNY1v3fefqfzhq8I
         njLWe1luuuYeUp/oCUcqnuAFvpcE3qZjpndoBFgiRdtMfetNuE8mOqOKnoXEsxdED0Nm
         aHc+YFnpR29v4IumgeEwaYIplLHjuCKJ6Mm/BhO6yWfNTiWGPwTVYcaE/lVcQXNNcTKp
         0d4pyP1ORahGjwmnodvHxa591JrcBiTKnMWm8Hj4avxXjAMjC1wS67Ia018etyVxcCkR
         eKLg==
MIME-Version: 1.0
Received: by 10.204.133.205 with SMTP id g13mr2384677bkt.94.1333553120710;
 Wed, 04 Apr 2012 08:25:20 -0700 (PDT)
Received: by 10.205.127.14 with HTTP; Wed, 4 Apr 2012 08:25:20 -0700 (PDT)
Date: Wed, 4 Apr 2012 16:25:20 +0100
Message-ID: <CANhTVFNNhu=B-fjUnbnq-7tw7C44ENexm0WrRbWAHTKPTq2c+Q@mail.gmail.com>
Subject: Problem tomcat
From: Fairouz Fakhfakh <fairouz.fakhfakh@gmail.com>
To: users@tomcat.apache.org
Content-Type: multipart/alternative; boundary=000e0cd734060c906904bcdc08fc
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd734060c906904bcdc08fc
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hello,
I use  Tomcat 6 and java 5.
I have a problem by clicking on a button to access a JSP page.
Here is the error displayed.

*exception*

javax.servlet.ServletException:
org.eclipse.jdt.internal.compiler.env.NameEnvironmentAnswer.<init>(Lorg/ecl=
ipse/jdt/internal/compiler/env/IBinaryType;)V

        org.apache.jasper.servlet.JspServlet.service(JspServlet.java:249)

        javax.servlet.http.HttpServlet.service(HttpServlet.java:802)


EDU.cmu.Atlas.matchmaker.client.servlet.UDDIMatchMakerServlet.doGet(UDDIMat=
chMakerServlet.java:65)


EDU.cmu.Atlas.matchmaker.client.servlet.UDDIMatchMakerServlet.doPost(UDDIMa=
tchMakerServlet.java:90)

        javax.servlet.http.HttpServlet.service(HttpServlet.java:709)

        javax.servlet.http.HttpServlet.service(HttpServlet.java:802)

*cause m=E8re*

java.lang.NoSuchMethodError:
org.eclipse.jdt.internal.compiler.env.NameEnvironmentAnswer.<init>(Lorg/ecl=
ipse/jdt/internal/compiler/env/IBinaryType;)V


org.apache.jasper.compiler.JDTCompiler$1.findType(JDTCompiler.java:214)


org.apache.jasper.compiler.JDTCompiler$1.findType(JDTCompiler.java:183)


org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.askForType(Looku=
pEnvironment.java:119)


org.eclipse.jdt.internal.compiler.lookup.PackageBinding.getTypeOrPackage(Pa=
ckageBinding.java:178)


org.eclipse.jdt.internal.compiler.lookup.Scope.getPackage(Scope.java:2166)


org.eclipse.jdt.internal.compiler.ast.QualifiedTypeReference.getTypeBinding=
(QualifiedTypeReference.java:62)


org.eclipse.jdt.internal.compiler.ast.TypeReference.resolveType(TypeReferen=
ce.java:141)


org.eclipse.jdt.internal.compiler.ast.TypeReference.resolveSuperType(TypeRe=
ference.java:104)


org.eclipse.jdt.internal.compiler.lookup.ClassScope.findSupertype(ClassScop=
e.java:1107)


org.eclipse.jdt.internal.compiler.lookup.ClassScope.connectSuperclass(Class=
Scope.java:767)


org.eclipse.jdt.internal.compiler.lookup.ClassScope.connectTypeHierarchy(Cl=
assScope.java:947)


org.eclipse.jdt.internal.compiler.lookup.CompilationUnitScope.connectTypeHi=
erarchy(CompilationUnitScope.java:266)


org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.completeTypeBind=
ings(LookupEnvironment.java:195)


org.eclipse.jdt.internal.compiler.Compiler.beginToCompile(Compiler.java:301=
)


org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:315)


org.apache.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:387)

        org.apache.jasper.compiler.Compiler.compile(Compiler.java:288)

        org.apache.jasper.compiler.Compiler.compile(Compiler.java:267)

        org.apache.jasper.compiler.Compiler.compile(Compiler.java:255)


org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:=
556)


org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:=
293)


org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:291)

        org.apache.jasper.servlet.JspServlet.service(JspServlet.java:241)

        javax.servlet.http.HttpServlet.service(HttpServlet.java:802)


EDU.cmu.Atlas.matchmaker.client.servlet.UDDIMatchMakerServlet.doGet(UDDIMat=
chMakerServlet.java:65)


EDU.cmu.Atlas.matchmaker.client.servlet.UDDIMatchMakerServlet.doPost(UDDIMa=
tchMakerServlet.java:90)

        javax.servlet.http.HttpServlet.service(HttpServlet.java:709)

        javax.servlet.http.HttpServlet.service(HttpServlet.java:802)


So, I didn't understand the problem!!!!
Do you have any idea about this problem, please?
Thank you for answering me.

--000e0cd734060c906904bcdc08fc--

From users-return-233339-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 15:41:17 2012
Return-Path: <users-return-233339-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D08E39A29
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 15:41:17 +0000 (UTC)
Received: (qmail 98559 invoked by uid 500); 4 Apr 2012 15:41:14 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 98502 invoked by uid 500); 4 Apr 2012 15:41:14 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 98490 invoked by uid 99); 4 Apr 2012 15:41:14 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 15:41:14 +0000
Received: from localhost (HELO [192.168.23.9]) (127.0.0.1)
  (smtp-auth username markt, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 15:41:13 +0000
Message-ID: <4F7C6B8F.3000604@apache.org>
Date: Wed, 04 Apr 2012 16:41:03 +0100
From: Mark Thomas <markt@apache.org>
User-Agent: Mozilla/5.0 (Windows NT 5.2; WOW64; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Tomcat6 thread pool questions
References: <OF5AAEB29C.4417B5FC-ON862579D6.004B04E2-862579D6.004BEF1A@LocalDomain>
In-Reply-To: <OF5AAEB29C.4417B5FC-ON862579D6.004B04E2-862579D6.004BEF1A@LocalDomain>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

On 04/04/2012 14:50, llowder@oreillyauto.com wrote:
> 
> Greetings,
> 
> I was wondering if someone could help me understand how the threadpools are
> handled in tomcat6. I know that a lot of the functionality was moved to
> executors.
> 
> I set one up and using psi-Probe I could see that it was indeed killing off
> threads as I expected. However, the minSpareThreads did not seem to be used
> at all.

And where do you see minSpareThreads defined as a valid attribute for a
Connector element in the Tomcat 6 documentation?

Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233340-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 15:42:37 2012
Return-Path: <users-return-233340-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A20659BDB
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 15:42:37 +0000 (UTC)
Received: (qmail 7598 invoked by uid 500); 4 Apr 2012 15:42:34 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 7407 invoked by uid 500); 4 Apr 2012 15:42:34 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 7397 invoked by uid 99); 4 Apr 2012 15:42:34 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 15:42:34 +0000
Received: from localhost (HELO [192.168.23.9]) (127.0.0.1)
  (smtp-auth username markt, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 15:42:33 +0000
Message-ID: <4F7C6BDF.9080006@apache.org>
Date: Wed, 04 Apr 2012 16:42:23 +0100
From: Mark Thomas <markt@apache.org>
User-Agent: Mozilla/5.0 (Windows NT 5.2; WOW64; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Discrepancy between Tomcat's connection pool and tomcat's report
 on memory leaks
References: <1333541107.27592.YahooMailNeo@web122304.mail.ne1.yahoo.com> <4F7C420C.8070401@pidster.com> <1333544069.69754.YahooMailNeo@web122303.mail.ne1.yahoo.com>
In-Reply-To: <1333544069.69754.YahooMailNeo@web122303.mail.ne1.yahoo.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

On 04/04/2012 13:54, Hermes Flying wrote:
> Hi Pid,
> 
> This is the configuration The following entry is in server.xml
> 
> <Resource name="jdbc_GENERIS_RS" auth="Container" 
> type="javax.sql.DataSource" driverClassName="org.h2.Driver" 
> url="jdbc:h2:file:/opt/en/repos/tomcat/webapps/GeneralApplication/db/internaldatabase;SCHEMA=genericschema"
>
> 
username="root" password="sa"
> maxActive="20" maxIdle="10" maxWait="-1" />

OK. That means it is a server wide connection pool...

> And the following entry is under $TOMCAT_HOME/conf/context.xml
> 
> <ResourceLink name="jdbc/GenericDataSource" global="jdbc_GENERIS_RS" 
> type="javax.sql.DataSource"/>

... that is shared by one or more applications.

> Concerning your other questions: 1) Yes I could shut down the
> database manually but I would like to do it as a last resort if this
> issue is something that can not be fixed since I believe that my
> setup is correct and should be supported as is

Based on what I have seen so far, I would agree.

> 2) You say that it depends if I should close down the connection
> myself. But how can I do that? A javax.sql.DataSource does not
> provide a close method. I would have to cast to
> org.apache.tomcat.dbcp.dbcp.BasicDataSource to call close. I am not
> sure if this is the proper approach. I mean I then get bind to this
> class, right? Or there is another way?

Not that is applies in this case (since the pool is global rather than
per application) but as of 7.0.12 yo an set the closeMethod for a
resource that should be the name of a zero atg method to call to shut
down the resource

>> SEVERE: The web application [/GeneralApplication] appears to have
>> started a thread named [H2 Log Writer GENERICAPPLICATION] but has
>> failed to stop it. This is very likely to create a memory leak. Apr
>> 4, 2012 2:32:54 PM org.apache.catalina.loader.WebappClassLoader
>> clearReferencesThreads


SEVERE: The web application
>> [/GeneralApplication] appears to have started a thread named [H2
>> File Lock Watchdog
>> /opt/en/repos/tomcat/webapps/GeneralApplication/db/internaldatabase.lock.db]
>> but has failed to stop it. This is very likely to create a memory
>> leak.
>> 
>> Why do I get these messages?

What is happening is the the JDBC driver is creating threads. When a
thread is created the context class loader for the thread is - by
default - set to the current context class loader. These threads are
being created when the current context class loader is the web
application class loader. i.e. they are being created as a result of the
web application using the JDBC driver (via the pool). When the web
application stops those threads are still in use (since it is a global
pool) but the threads retain a reference to the web application class
loader and this creates a memory leak.

>> Additionally the input from H2 dev is that these messages are a
>> Tomcat problem. Tomcat should have first disposed of the connection
>> pool and then log the running threads.Their explanation seem
>> correct to me.
> 
> That's the usual first response.  Let's figure out whether it's
> correct...

And it is wrong. When H2 creates those threads it should ensure that the
context class loader for the threads is set to the same class loader
that loaded the JDBC driver. We had similar issues with the evictor
thread in Apache Commons Pool (used by DBCP).

Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233341-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 15:54:07 2012
Return-Path: <users-return-233341-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 33A8E90BF
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 15:54:07 +0000 (UTC)
Received: (qmail 43884 invoked by uid 500); 4 Apr 2012 15:54:02 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 43838 invoked by uid 500); 4 Apr 2012 15:54:02 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 43829 invoked by uid 99); 4 Apr 2012 15:54:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 15:54:02 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [98.138.91.172] (HELO nm12-vm4.bullet.mail.ne1.yahoo.com) (98.138.91.172)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 04 Apr 2012 15:53:52 +0000
Received: from [98.138.90.57] by nm12.bullet.mail.ne1.yahoo.com with NNFMP; 04 Apr 2012 15:53:31 -0000
Received: from [98.138.89.175] by tm10.bullet.mail.ne1.yahoo.com with NNFMP; 04 Apr 2012 15:53:31 -0000
Received: from [127.0.0.1] by omp1031.mail.ne1.yahoo.com with NNFMP; 04 Apr 2012 15:53:30 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 998045.5293.bm@omp1031.mail.ne1.yahoo.com
Received: (qmail 7337 invoked by uid 60001); 4 Apr 2012 15:53:30 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1333554810; bh=JFqoRIC2oWb9KtsWITzY2EqCN+qux773UYOJDvduSCk=; h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:Cc:In-Reply-To:MIME-Version:Content-Type; b=Xha4or3sZXxaIIWjk/ghHJqeTS+CABqed2ONByP0HcfhWDNqw7NGRUhbHfvlhEUEC/Rng0/MdB210FLn6RvFY2L2FCauQrnXVTR7hqa/EgioSZYsd7DzuQn/FprmP3jlj39DVEg4IpemiTwaD5f47FG/9gX8Nc+eGPWS+H4p3xY=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:Cc:In-Reply-To:MIME-Version:Content-Type;
  b=EwNRFC5EUK0h401+/mM1Heba18De0QCOkEfkTqsiSipP1hwP7K6E7hyI+VgbFJlgVbek8lMgVqy2fZTF+zxWxVf+n/sv8dFNYTsNPO1osTjj2yQoHvBuHB35SR/SFW4YYeV+C5NC9Lk5s4AJaoW10iQwR39Q2Ffsclwr28w4K28=;
X-YMail-OSG: taOEecoVM1lvFqUir8k4Lv6YITASyVnT5t1gw52EMRb6ayT
 aGYbnyEaCWXnX_AWLRMyUg01ZB_1TbIUpTzR2w.ci.RmvF564ymSYhQrtxt1
 ee.hXZMiy5BBdJ9LthymJPhdmH9FzxYQJNowm.UOFELlPa6vD9zVU.y6yWNx
 aDvVkFUEcq63ds7mIPEolqaRSyBoExLLSP1kJxvdfUlvtWwm5MKJjoPsOkn8
 q0I8S2j6TnyW5_xNbKkH3Y_eIXAhdMWCDGB57T2JPciqmi5AyCU08DZgnstk
 V0iYGCmFRcZq3F8LHL6ROxNLGnlLIfGMhf9pBDNEnIn1KC3DBEbPxfwoTOS9
 F6Uh8ZjooMWLC97l2dbQaFo2vow_e9UdiPc9JMKifuoy.wc6sksbhyNTArBz
 y2eQrs22wvbpSyPlSaaw3EG4E5wH6NdBojc1VvKnp63LJ9SpTlSefmU_WF5k
 RVoRian0ypT6KKnJe.ob9eA--
Received: from [87.202.5.142] by web122304.mail.ne1.yahoo.com via HTTP; Wed, 04 Apr 2012 08:53:30 PDT
X-Mailer: YahooMailWebService/0.8.117.340979
References: <1333547379.63979.YahooMailNeo@web122302.mail.ne1.yahoo.com> <4401822.257.1333548863561.JavaMail.daniel@cleveland>
Message-ID: <1333554810.98186.YahooMailNeo@web122304.mail.ne1.yahoo.com>
Date: Wed, 4 Apr 2012 08:53:30 -0700 (PDT)
From: Hermes Flying <flyinghermes@yahoo.com>
Reply-To: Hermes Flying <flyinghermes@yahoo.com>
Subject: Re: Discrepancy between Tomcat's connection pool and tomcat's report on memory leaks
To: Daniel Mikusa <dmikusa@vmware.com>
Cc: "users@tomcat.apache.org" <users@tomcat.apache.org>
In-Reply-To: <4401822.257.1333548863561.JavaMail.daniel@cleveland>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="-634093744-1011165981-1333554810=:98186"

---634093744-1011165981-1333554810=:98186
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

>>Which is indicating that the application deployed to "/GeneralApplication=
" is creating a thread named "H2 Log Writer >>GENERICAPPLICATION" and never=
 stopping it.  I do not believe that this would be associated with the pool=
 created by Tomcat as that would >>be created as a global resource availabl=
e to all applications and not specific to "/GeneralApplication".=0A>>I can'=
t really say a whole lot more about what is going on, just that this strike=
s me as odd.  If it were my app, I'd dig into this more and see what is >>c=
reating that thread.  Possibly with a profiler or thread dumps.=0A=0AWhat i=
s happening here (as I undestand it is the following):=0A1)=A0My applicatio=
n=A0uses Tomcat's connection pool from the data source=0A2) My application =
uses H2 as a file database. H2 starts=A0back end(s) thread which is about l=
ogging (H2 logging) and possibly other tasks=A0and that is the thread that =
catalina complaints about=0A3) H2 remains open as long as there are open co=
nnections and is closed when the last connection is released=0A4) My applic=
ation uses Tomcat's connection pool and as a result Tomcat "decides" when t=
he data source should be disposed or when connections are released (not my =
code).=0A5) I shutdown Tomcat. =0A6) The connection pool of Tomcat has stil=
l connections (e.g. idle) and so H2 does not shutdown. Hence it's lock file=
 and related background threads are still running.=0A7) Tomcat shuts down m=
y application but does not dispose off the connection pool (yet). I believe=
 this happens because of the way Tomcat is being shut down (as sequence of =
actions I mean).=0A8) Since the connection pool has not been disposed, ther=
e are still connections and as a result H2 is still running=0A9) Tomcat's m=
emory leak detection mechanism detects H2 threads started from GenericAppli=
cation which uses H2 and gives the report in catalina.out. So Tomcat gives =
the report first and then proceeds with the shutdown (and this perhaps is n=
ot correct? I can't say)=0A10) Tomcat eventually shuts down.=0A=A0=0AIs thi=
s scenario as I describe it, wrong?=0AShould I somehow have configured the =
datasource to be "associated" with my web application instead of a generic =
data source? Why? =0AShould I have shut the data source myself? How?=0AIf a=
ll what I describe is reasonable this seems to me like a "racing" condition=
. How should I mediate this?=0A=0AThank you for your time.=0A=A0 =0A=0A____=
____________________________=0A From: Daniel Mikusa <dmikusa@vmware.com>=0A=
To: Hermes Flying <flyinghermes@yahoo.com> =0ASent: Wednesday, April 4, 201=
2 5:14 PM=0ASubject: Re: Discrepancy between Tomcat's connection pool and t=
omcat's report on memory leaks=0A  =0A----- Original Message -----=0A> =0A>=
 =0A> What I do is get the dataSource inside a ServletContextListener and=
=0A> save it in servlet context (as part of a DAO Factory):=0A> =0A> public=
 void contextInitialized(ServletContextEvent sce) {=0A> =0A> ServletContext=
 context =3D sce.getServletContext();=0A> DataSource dataSource =3D null;=
=0A> try {=0A> dataSource =3D (DataSource) new=0A> InitialContext().lookup(=
"java:/comp/env/jdbc/GenericDataSource");=0A> context.setAttribute("daogene=
ricfactory",=0A> DAOGenericFactory.getInstance(dataSource));=0A> =0A> } cat=
ch (NamingException e) {=0A> e.printStackTrace();=0A> }=0A> =0A> }=0A> =0A>=
 =0A> The DAOGenericFactory just returns specific DAO objects passing in=0A=
> their constructor the data source.=0A> Each DAO instance has an member va=
riable of DataSource and for action=0A> to the database I do in order to ge=
t a connection:=0A> =0A> public Connection getConnection() throws Exception=
{=0A> return dataSource.getConnection();=0A> }=0A> =0A> =0A> So I use the C=
onnection this way and I always close the connections=0A> in order to be re=
turned back to the pool.=0A> The only thing perhaps to mention is that I cr=
eate new DAO objects=0A> passing this data source (I don't reuse instances =
of DAO).=0A> So I don't have a pool of my own. I just use DAO pattern .=0A>=
 This is happening in my web application GeneralApplication=0A> Is this inf=
ormation adequate/clear?=0A=0ADefinitely clear.=A0 It just doesn't seem to =
match up with the output from the log files.=A0 You're seeing=0A=0A=A0 =A0 =
SEVERE: The web application [/GeneralApplication] appears to have=0A=A0 =A0=
 started a thread named [H2 Log Writer GENERICAPPLICATION] but has=0A=A0 =
=A0 failed to stop it. This is very likely to create a memory leak.=0A=0AWh=
ich is indicating that the application deployed to "/GeneralApplication" is=
 creating a thread named "H2 Log Writer GENERICAPPLICATION" and never stopp=
ing it.=A0 I do not believe that this would be associated with the pool cre=
ated by Tomcat as that would be created as a global resource available to a=
ll applications and not specific to "/GeneralApplication".=0A=0AI can't rea=
lly say a whole lot more about what is going on, just that this strikes me =
as odd.=A0 If it were my app, I'd dig into this more and see what is creati=
ng that thread.=A0 Possibly with a profiler or thread dumps.=0A=0A=0A> Also=
 how did you test it? =0A=0AI took a stock Tomcat 7 instance, added the <Re=
source/> tag you specified to server.xml and added the <ResourceLink/> tag =
you specified to context.xml.=A0 I then deployed a test app that I have, it=
's a simple Grails app that I routinely use to test database issues.=A0 It =
just uses the JNDI connection specified to do some basic database crud.=0A=
=0A=0A>Did you use H2? =0A=0AYes.=A0 h2-1.3.161.jar=0A=0A=0A>Because I don'=
t get these errors in catalina.out intermittently but always.=0A=0ANo error=
s in any of my log files.=A0 I tested stopping the Tomcat instance, restart=
ing it and undeploying the application.=0A=0ADan=0A=0A=0A=0A> =0A> Thank yo=
u=0A> =0A> =0A> =0A> =0A> =0A> =0A> From: Daniel Mikusa <dmikusa@vmware.com=
>=0A> To: Hermes Flying <flyinghermes@yahoo.com>=0A> Sent: Wednesday, April=
 4, 2012 4:25 PM=0A> Subject: Re: Discrepancy between Tomcat's connection p=
ool and=0A> tomcat's report on memory leaks=0A> =0A> ----- Original Message=
 -----=0A> > =0A> > =0A> > Hi Dan,=0A> > =0A> > =0A> > The following entry =
is in server.xml=0A> > =0A> > <Resource name=3D"jdbc_GENERIS_RS" auth=3D"Co=
ntainer"=0A> > type=3D"javax.sql.DataSource"=0A> > driverClassName=3D"org.h=
2.Driver"=0A> > url=3D"jdbc:h2:file:/opt/en/repos/tomcat/webapps/GeneralApp=
lication/db/internaldatabase;SCHEMA=3Dgenericschema"=0A> > username=3D"root=
" password=3D"sa"=0A> > maxActive=3D"20" maxIdle=3D"10" maxWait=3D"-1"=0A> =
> />=0A> > =0A> > =0A> > And the following entry is under $TOMCAT_HOME/conf=
/context.xml=0A> > =0A> > <ResourceLink name=3D"jdbc/GenericDataSource"=0A>=
 > global=3D"jdbc_GENERIS_RS"=0A> > type=3D"javax.sql.DataSource"/>=0A> > =
=0A> > =0A> > =0A> > Do you need more details than these?=0A> > =0A> > =0A>=
 =0A> Seems a little weird. The message is indicating that the threads=0A> =
which have not stopped reside in the application=0A> "[/GeneralApplication]=
". This would seem to imply that the=0A> connection pool was created by the=
 application. The configuration=0A> that you've specified here would have t=
he container creating the=0A> connection pool, which shouldn't trigger mess=
ages like this.=0A> =0A> Are you sure your application is not creating a co=
nnection pool?=0A> =0A> As a side note, I tried the configuration you menti=
oned in a local=0A> Tomcat instance and it worked fine, no errors.=0A> =0A>=
 Dan=0A> =0A> =0A> > =0A> > =0A> > =0A> > =0A> > =0A> > =0A> > =0A> > From:=
 Daniel Mikusa < dmikusa@vmware.com >=0A> > To: Tomcat Users List < users@t=
omcat.apache.org >=0A> > Sent: Wednesday, April 4, 2012 3:35 PM=0A> > Subje=
ct: Re: Discrepancy between Tomcat's connection pool and=0A> > tomcat's rep=
ort on memory leaks=0A> > =0A> > =0A> > =0A> > ----- Original Message -----=
=0A> > > Hi,=0A> > > =0A> > > I am using Tomcat 7.0.25 in a Linux machine=
=0A> > > =0A> > > I am using Tomcat's connection pool=0A> > > (org.apache.t=
omcat.dbcp.dbcp.BasicDataSource). As database I am=0A> > > using H2 as a fi=
le database.=0A> > =0A> > Where are you defining the connection pool? Can y=
ou include your=0A> > configuration?=0A> > =0A> > Dan=0A> > =0A> > =0A> > >=
 All is ok, but I have the following problem.=0A> > > On shutdown of Tomcat=
 I see in catalina.out:=0A> > > =0A> > > =0A> > > SEVERE: The web applicati=
on [/GeneralApplication] appears to have=0A> > > started a thread named [H2=
 Log Writer GENERICAPPLICATION] but has=0A> > > failed to stop it. This is =
very likely to create a memory leak.=0A> > > Apr 4, 2012 2:32:54 PM=0A> > >=
 org.apache.catalina.loader.WebappClassLoader=0A> > > clearReferencesThread=
s=0A> > > SEVERE: The web application [/GeneralApplication] appears to have=
=0A> > > started a thread named [H2 File Lock Watchdog=0A> > > /opt/en/repo=
s/tomcat/webapps/GeneralApplication/db/internaldatabase.lock.db]=0A> > > bu=
t has failed to stop it. This is very likely to create a memory=0A> > > lea=
k.=0A> > > =0A> > > Why do I get these messages?=0A> > > As I understand th=
ese messages, H2 is still running on shutdown=0A> > > and=0A> > > the docum=
entation they have says that the database will shutdown=0A> > > once the la=
st connection is closed (and the connections are=0A> > > handled=0A> > > by=
 the pool i.e. Tomcat)=0A> > > =0A> > > Additionally the input from H2 dev =
is that these messages are a=0A> > > Tomcat problem. Tomcat should have fir=
st disposed of the=0A> > > connection=0A> > > pool and then log the running=
 threads.Their explanation seem=0A> > > correct=0A> > > to me.=0A> > > =0A>=
 > > Is this a known issue? Why do I see these errors in catalina?=0A> > > =
Should=0A> > > I somehow dispose off the connection pool myself?=0A> > > =
=0A> > > Thank you for your time=0A> > > Best Regards,=0A> > > FH=0A> > > =
=0A> > =0A> > -------------------------------------------------------------=
--------=0A> > To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org=
=0A> > For additional commands, e-mail: users-help@tomcat.apache.org=0A> > =
=0A> > =0A> > =0A> > =0A> =0A> =0A> 
---634093744-1011165981-1333554810=:98186--

From users-return-233342-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 15:58:50 2012
Return-Path: <users-return-233342-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D541B9542
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 15:58:50 +0000 (UTC)
Received: (qmail 64939 invoked by uid 500); 4 Apr 2012 15:58:47 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 64728 invoked by uid 500); 4 Apr 2012 15:58:47 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 64715 invoked by uid 99); 4 Apr 2012 15:58:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 15:58:47 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [66.160.196.165] (HELO arizona.hanik.com) (66.160.196.165)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 15:58:39 +0000
Received: from arizona.hanik.com (arizona.hanik.com [66.160.196.165])
	by arizona.hanik.com (Postfix) with ESMTP id 2EE52A7E0119
	for <users@tomcat.apache.org>; Wed,  4 Apr 2012 09:55:26 -0600 (MDT)
Date: Wed, 04 Apr 2012 09:55:26 -0600 (MDT)
From: Filip Hanik Mailing Lists <devlists@hanik.com>
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: jdbc pool properties
Message-ID: <147e0bb8-74ea-49b0-93c1-e30ff134c7f3@arizona.hanik.com>
In-Reply-To: <08382548D50D3049BD5599E1E3146B3416F43AC1A8@exgtmb06.nam.nsroot.net>
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
MIME-Version: 1.0
X-Originating-IP: [144.230.82.43]
X-Mailer: Zimbra 7.1.1_GA_3196 (ZimbraWebClient - FF3.0 (Mac)/7.1.1_GA_3196)

> There are some databases that do go in and periodically kill off
> connections, aside from the Tomcat settings.

you may want to explore the maxAge option for this, as we can disconnect and create new connections before the DB does kills it as long lived

----- Original Message -----
> From: "Barry L Propes" <barry.l.propes@citi.com>
> To: "Tomcat Users List" <users@tomcat.apache.org>
> Sent: Wednesday, April 4, 2012 7:53:26 AM
> Subject: RE: jdbc pool properties
> 
> There are some databases that do go in and periodically kill off
> connections, aside from the Tomcat settings.
> 
> In addition to testOnBorrow=true, I also had two other attributes,
> but not sure if Tomcat 7.0 uses them or not, as I'm on 6.0.29.
> 
>     testOnBorrow="true"
>     timeBetweenEvictionRunsMillis="-1"
>     minEvictableIdleTimeMillis="28800"
> 
> 
> 
> -----Original Message-----
> From: Daniel Mikusa [mailto:dmikusa@vmware.com]
> Sent: Wednesday, April 04, 2012 7:46 AM
> To: Tomcat Users List
> Subject: Re: jdbc pool properties
> 
> 
> 
> ----- Original Message -----
> > My db connections seem to be lost after an extended period of
> > inactivity
> 
> There could be a number of reasons that this occurs.  Perhaps a
> network issue is causing them to be disconnected or the database may
> be timing them out.  At any rate, it's not likely that the problem
> would be caused by the "removeAbandoned" / "abandonedTimeout"
> settings, unless you application is not properly returning
> connections to the connection pool.
> 
>   https://tomcat.apache.org/tomcat-7.0-doc/jndi-datasource-examples-howto.html#Preventing_database_connection_pool_leaks
> 
> 
> > (for a web application).  And the only way to get the connections
> > to
> > work again is to restart tomcat.
> >
> > My tomcat.jdbc.pool.Datasource settings have:
> >
> >  <property name="maxActive" value="100"/>
> >         <property name="maxIdle" value="30"/>
> >         <property name="maxWait" value="1000"/>
> >         <property name="defaultAutoCommit" value="true"/>
> >         <property name="removeAbandoned" value="true"/>
> >         <property name="removeAbandonedTimeout" value="60"/>
> >
> 
> You probably want to add testOnBorrow="true" and
> "validationQuery=SELECT 1"  (or some other valid query for your DB).
>  See the following link for an explanation of those properties.
> 
>   https://commons.apache.org/dbcp/configuration.html
> 
> This will cause your connections to be validated prior to their use
> by your application.  Stale connections will be removed and replaced
> with new, working connections.
> 
> >
> > Is it the removedAbonded and abandonedTimeout?  Does it mean "after
> > 60
> > seconds, remove the connection from the pool?
> 
> No.  See either of the links I've referenced above for an explanation
> of these settings.
> 
> >
> > I guess what I need is a minActive setting then?
> >
> 
> There's no "minActive" setting.  You have "minIdle", but I don't
> think that would help here.
> 
> Dan
> 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233343-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 16:02:22 2012
Return-Path: <users-return-233343-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6227B96B3
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 16:02:22 +0000 (UTC)
Received: (qmail 80095 invoked by uid 500); 4 Apr 2012 16:02:19 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 79945 invoked by uid 500); 4 Apr 2012 16:02:18 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 79933 invoked by uid 99); 4 Apr 2012 16:02:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 16:02:18 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [66.160.196.165] (HELO arizona.hanik.com) (66.160.196.165)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 16:02:12 +0000
Received: from arizona.hanik.com (arizona.hanik.com [66.160.196.165])
	by arizona.hanik.com (Postfix) with ESMTP id A1DE5A7E0119
	for <users@tomcat.apache.org>; Wed,  4 Apr 2012 09:58:59 -0600 (MDT)
Date: Wed, 04 Apr 2012 09:58:59 -0600 (MDT)
From: Filip Hanik Mailing Lists <devlists@hanik.com>
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: [JDBC Pool] PoolCleaner creates some sort of memory
Message-ID: <2d6f5217-62bf-494b-8e97-9d508738d5d2@arizona.hanik.com>
In-Reply-To: <6368FCCCD803D64BB0931D7F5F0A3DD502274ECCD8@DEMCHP99E84MSX.ww902.siemens.net>
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
MIME-Version: 1.0
X-Originating-IP: [144.230.82.43]
X-Mailer: Zimbra 7.1.1_GA_3196 (ZimbraWebClient - FF3.0 (Mac)/7.1.1_GA_3196)

I'll take a look at the test failures, but yes you can ignore them. Tomcat 7.0.27 will have the fix included, about to be released shortly
building it is easy, builds with both maven and ant

Filip

----- Original Message -----
> From: "Michael Osipov" <michael.osipov@siemens.com>
> To: "Tomcat Users List" <users@tomcat.apache.org>
> Sent: Friday, March 30, 2012 2:05:50 AM
> Subject: RE: [JDBC Pool] PoolCleaner creates some sort of memory
> 
> Konstantin Kolinko wrote:
> > 2012/3/30 Osipov, Michael <michael.osipov@siemens.com>:
> >> Filip Hanik (mailing lists) wrote:
> >>> http://svn.apache.org/viewvc?view=revision&revision=1306946
> >> 
> >> Thanks for the patch, I am having trouble to build from source. I
> >> do
> >> have some test failures, should I ignore them and go on?
> > 
> > Please be more specific. In what tests?
> 
> Have a look at this: http://pastebin.com/kiHLF6D9
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233344-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 16:03:59 2012
Return-Path: <users-return-233344-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 529FF97C1
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 16:03:59 +0000 (UTC)
Received: (qmail 88962 invoked by uid 500); 4 Apr 2012 16:03:55 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 88902 invoked by uid 500); 4 Apr 2012 16:03:55 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 88893 invoked by uid 99); 4 Apr 2012 16:03:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 16:03:55 +0000
X-ASF-Spam-Status: No, hits=-2.8 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of oferi@checkpoint.com designates 194.29.34.68 as permitted sender)
Received: from [194.29.34.68] (HELO michael.checkpoint.com) (194.29.34.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 16:03:44 +0000
Received: from il-ex01.ad.checkpoint.com (il-ex01.ad.checkpoint.com [194.29.34.26])
	by michael.checkpoint.com (8.13.8/8.13.8) with ESMTP id q34G1ntV023385
	for <users@tomcat.apache.org>; Wed, 4 Apr 2012 19:02:52 +0300
X-CheckPoint: {4F7C7E13-0-1B221DC2-5FFFF}
Received: from il-ex03.ad.checkpoint.com (194.29.34.71) by
 il-ex01.ad.checkpoint.com (194.29.34.26) with Microsoft SMTP Server (TLS) id
 8.3.213.0; Wed, 4 Apr 2012 19:02:18 +0300
Received: from il-ex01.ad.checkpoint.com ([126.0.0.2]) by
 il-ex03.ad.checkpoint.com ([194.29.34.71]) with mapi; Wed, 4 Apr 2012
 19:02:18 +0300
From: Ofer Israeli <oferi@checkpoint.com>
To: "Tomcat Users List (users@tomcat.apache.org)" <users@tomcat.apache.org>
Date: Wed, 4 Apr 2012 19:02:17 +0300
Subject: Bug in Tomcat AJP Connector?
Thread-Topic: Bug in Tomcat AJP Connector?
Thread-Index: Ac0Se4XN7JVM9/PQS6eF5aSIXvaODg==
Message-ID: <217DDBC2BB1E394CA9E7446337CBDEF20102DEDB4F4A@il-ex01.ad.checkpoint.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
x-kse-antivirus-interceptor-info: scan successful
x-kse-antivirus-info: Clean
Content-Type: multipart/alternative;
	boundary="_000_217DDBC2BB1E394CA9E7446337CBDEF20102DEDB4F4Ailex01adche_"
MIME-Version: 1.0
X-KSE-AntiSpam-Interceptor-Info: protection disabled

--_000_217DDBC2BB1E394CA9E7446337CBDEF20102DEDB4F4Ailex01adche_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi all,

We have recently witnessed a strange situation.  Our Tomcat (6.0.35) listen=
s on 2 ports: 8080 and 8009, handling HTTP and AJP respectively.  At some p=
oint in time we found that Apache is replying HTTP 503s to all clients and =
a look at netstat showed that indeed Apache could not communicate with Tomc=
at - there were many connections in state SYN_SENT, that were never replied=
.  A test of attempting to connect to Tomcat's 8009 port turned out to give=
 the same result, so the issue was obviously in Tomcat and not Apache.  But=
 netstat also showed that Tomcat was listening on port 8009.  After digging=
 into the logs, we found that there was an Out of Memory exception in the J=
K's accept() sequence and once this exception was caught there was a messag=
e of "terminating thread".

So although the exception is caught and handled by killing the thread (isn'=
t that a little drastic?), the socket isn't closed beforehand and thus the =
OS thinks that the port is still fine (in LISTENING state), as although the=
 thread is dead, the process is alive.  Has anyone encountered this or know=
s if this bug is known?


Thanks,
Ofer

--_000_217DDBC2BB1E394CA9E7446337CBDEF20102DEDB4F4Ailex01adche_--

From users-return-233345-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 16:14:57 2012
Return-Path: <users-return-233345-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1278B9B7F
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 16:14:57 +0000 (UTC)
Received: (qmail 39884 invoked by uid 500); 4 Apr 2012 16:14:52 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 39723 invoked by uid 500); 4 Apr 2012 16:14:52 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 39711 invoked by uid 99); 4 Apr 2012 16:14:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 16:14:52 +0000
X-ASF-Spam-Status: No, hits=4.7 required=5.0
	tests=FREEMAIL_FORGED_REPLYTO,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.138.229.118] (HELO nm36-vm6.bullet.mail.ne1.yahoo.com) (98.138.229.118)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 04 Apr 2012 16:14:42 +0000
Received: from [98.138.90.56] by nm36.bullet.mail.ne1.yahoo.com with NNFMP; 04 Apr 2012 16:14:22 -0000
Received: from [98.138.89.161] by tm9.bullet.mail.ne1.yahoo.com with NNFMP; 04 Apr 2012 16:14:22 -0000
Received: from [127.0.0.1] by omp1017.mail.ne1.yahoo.com with NNFMP; 04 Apr 2012 16:14:22 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 49891.60214.bm@omp1017.mail.ne1.yahoo.com
Received: (qmail 22984 invoked by uid 60001); 4 Apr 2012 16:14:22 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1333556061; bh=KR+BEG6N1s/wJHhrCewxzC/UKIY14lMVnDZ4Tbrb9+c=; h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=KCUVlEIpJqb6hQvLPQL5nTDLsCH0gAlAKENjIPhg7ZNmhH/wm4qUg/MtKDw0UHrN3dXcspWioAgl+AMm7BfoSgzJSaTOktBo3KODun+hhagydEpt+v+cZ6IUgf9BgsonsTyoZm+bmmTc1lxQ3EjPOlDbHYdsTQ1lGgd4zx10d0E=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=blxWPaM+lgEJIgLO1EyssxP1r6IuIdDP5vHIuna90bMqParfgo3xImZ1Hfg2WT8TXC1fxDjiJ3h7x7ziO7/gxU1LRdYs9WZ4RmLGT/26qKoVLxv73ch/ZrxD3PifSi2ibgxX2GYJewbtYV32IWK4lM5Af3cKtXaxhGsrZy3Ut8s=;
X-YMail-OSG: Zgyj_isVM1mCp2y1.fAAnMo2._hKY5Qqu3KKiZwtrR_ZMXG
 ueWiCVYYBb5l5QcPY.DfZ3vBLBpspEBoY1mKeJOPa0Ahr.AD37xd9MAdPO1a
 ktAnpx5pHOubsyIKjzp7N.uphKbZBkh2dVgqM9ROC6E4KMhE48smuMFroBJI
 whLiRHPGZdbkKixbY4vo_iYFggwBtkw4quDpDTL6rr3VwTksQQerRiAXuJj3
 wzxCW_QcqjUVoFmskdYNeMJRg0iloBbZWYpVaJ9cVlofvawjmV_I0sUCOA4a
 D4RhdZAEh0554q8zSNmZNJsbRZAuBLkcFB47JdRgTg3IKJuKEw75EnQIM2aG
 eaYX4DJCPT68wIYZ2AmdJU6ez4IrnMowFZblHmDBub9Sua232sU1XHljz2fq
 Z4mRHIdY1_6dcxIh2QKnJSHLQAd0-
Received: from [87.202.5.142] by web122304.mail.ne1.yahoo.com via HTTP; Wed, 04 Apr 2012 09:14:21 PDT
X-Mailer: YahooMailWebService/0.8.117.340979
References: <1333541107.27592.YahooMailNeo@web122304.mail.ne1.yahoo.com> <4F7C420C.8070401@pidster.com> <1333544069.69754.YahooMailNeo@web122303.mail.ne1.yahoo.com> <4F7C6BDF.9080006@apache.org>
Message-ID: <1333556061.12060.YahooMailNeo@web122304.mail.ne1.yahoo.com>
Date: Wed, 4 Apr 2012 09:14:21 -0700 (PDT)
From: Hermes Flying <flyinghermes@yahoo.com>
Reply-To: Hermes Flying <flyinghermes@yahoo.com>
Subject: Re: Discrepancy between Tomcat's connection pool and tomcat's report on memory leaks
To: Tomcat Users List <users@tomcat.apache.org>,
  "markt@apache.org" <markt@apache.org>
In-Reply-To: <4F7C6BDF.9080006@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="-634093744-549895477-1333556061=:12060"
X-Virus-Checked: Checked by ClamAV on apache.org

---634093744-549895477-1333556061=:12060
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hi Mark,thank you for your reply.=0A2 questions related your mail=0A1)I don=
't understand what you are saying here: "but as of 7.0.12 yo an set the clo=
seMethod for a resource that should be the name of a zero atg method to cal=
l to shut down the resource". Could you please explain or send a link to a =
reference on what you are talking about here?=0A2)Concerning your comment c=
oncerning the class loaders and H2. I didn't mention that the H2=A0driver i=
s under $TOMCAT_HOME/lib. Does this make a difference in the behavior you d=
escribe? I mean the JDBC driver would not be unloaded with the web applicat=
ion, right? So is this an issue? Should I have placed the H2 driver under W=
EB-INF/lib? =0AI can do that but then from my point of view Tomcat's setup =
has many exception/corner cases and the setup is not "uniform" but requires=
 some background knowledge of the implementation of Tomcat=0A=A0=0AAlso as =
mentioned to Dan:=0A=A0=0AMy undestanding of what is happening here is the =
following=0A1) My application uses Tomcat's connection pool from the data s=
ource=0A2) My application uses H2 as a file database. H2 starts back end(s)=
 thread which is about logging (H2 logging) and possibly other tasks and th=
at is the thread that catalina complaints about=0A3) H2 remains open as lon=
g as there are open connections and is closed when the last connection is r=
eleased=0A4) My application uses Tomcat's connection pool and as a result T=
omcat "decides" when the data source should be disposed or when connections=
 are released (not my code).=0A5) I shutdown Tomcat. =0A6) The connection p=
ool of Tomcat has still connections (e.g. idle) and so H2 does not shutdown=
. Hence it's lock file and related background threads are still running.=0A=
7) Tomcat shuts down my application but does not dispose off the connection=
 pool (yet). I believe this happens because of the way Tomcat is being shut=
 down (as sequence of actions I mean).=0A8) Since the connection pool has n=
ot been disposed, there are still connections and as a result H2 is still r=
unning=0A9) Tomcat's memory leak detection mechanism detects H2 threads sta=
rted from GenericApplication which uses H2 and gives the report in catalina=
.out. So Tomcat gives the report first and then proceeds with the shutdown =
(and this perhaps is not correct? I can't say)=0A10) Tomcat eventually shut=
s down.=0A=0AIs this scenario as I describe it, wrong?=0AShould I somehow h=
ave configured the datasource to be "associated" with my web application in=
stead of a generic data source? Why? =0AShould I have shut the data source =
myself? How?=0AIf all what I describe is reasonable this seems to me like a=
 "racing" condition. How should I mediate this?=0A=0AThank you for your tim=
e=0A=0A =0A=0A________________________________=0A From: Mark Thomas <markt@=
apache.org>=0ATo: Tomcat Users List <users@tomcat.apache.org> =0ASent: Wedn=
esday, April 4, 2012 6:42 PM=0ASubject: Re: Discrepancy between Tomcat's co=
nnection pool and tomcat's report on memory leaks=0A  =0AOn 04/04/2012 13:5=
4, Hermes Flying wrote:=0A> Hi Pid,=0A> =0A> This is the configuration The =
following entry is in server.xml=0A> =0A> <Resource name=3D"jdbc_GENERIS_RS=
" auth=3D"Container" =0A> type=3D"javax.sql.DataSource" driverClassName=3D"=
org.h2.Driver" =0A> url=3D"jdbc:h2:file:/opt/en/repos/tomcat/webapps/Genera=
lApplication/db/internaldatabase;SCHEMA=3Dgenericschema"=0A>=0A> =0Ausernam=
e=3D"root" password=3D"sa"=0A> maxActive=3D"20" maxIdle=3D"10" maxWait=3D"-=
1" />=0A=0AOK. That means it is a server wide connection pool...=0A=0A> And=
 the following entry is under $TOMCAT_HOME/conf/context.xml=0A> =0A> <Resou=
rceLink name=3D"jdbc/GenericDataSource" global=3D"jdbc_GENERIS_RS" =0A> typ=
e=3D"javax.sql.DataSource"/>=0A=0A... that is shared by one or more applica=
tions.=0A=0A> Concerning your other questions: 1) Yes I could shut down the=
=0A> database manually but I would like to do it as a last resort if this=
=0A> issue is something that can not be fixed since I believe that my=0A> s=
etup is correct and should be supported as is=0A=0ABased on what I have see=
n so far, I would agree.=0A=0A> 2) You say that it depends if I should clos=
e down the connection=0A> myself. But how can I do that? A javax.sql.DataSo=
urce does not=0A> provide a close method. I would have to cast to=0A> org.a=
pache.tomcat.dbcp.dbcp.BasicDataSource to call close. I am not=0A> sure if =
this is the proper approach. I mean I then get bind to this=0A> class, righ=
t? Or there is another way?=0A=0ANot that is applies in this case (since th=
e pool is global rather than=0Aper application) but as of 7.0.12 yo an set =
the closeMethod for a=0Aresource that should be the name of a zero atg meth=
od to call to shut=0Adown the resource=0A=0A>> SEVERE: The web application =
[/GeneralApplication] appears to have=0A>> started a thread named [H2 Log W=
riter GENERICAPPLICATION] but has=0A>> failed to stop it. This is very like=
ly to create a memory leak. Apr=0A>> 4, 2012 2:32:54 PM org.apache.catalina=
.loader.WebappClassLoader=0A>> clearReferencesThreads=0A=0A=0ASEVERE: The w=
eb application=0A>> [/GeneralApplication] appears to have started a thread =
named [H2=0A>> File Lock Watchdog=0A>> /opt/en/repos/tomcat/webapps/General=
Application/db/internaldatabase.lock.db]=0A>> but has failed to stop it. Th=
is is very likely to create a memory=0A>> leak.=0A>> =0A>> Why do I get the=
se messages?=0A=0AWhat is happening is the the JDBC driver is creating thre=
ads. When a=0Athread is created the context class loader for the thread is =
- by=0Adefault - set to the current context class loader. These threads are=
=0Abeing created when the current context class loader is the web=0Aapplica=
tion class loader. i.e. they are being created as a result of the=0Aweb app=
lication using the JDBC driver (via the pool). When the web=0Aapplication s=
tops those threads are still in use (since it is a global=0Apool) but the t=
hreads retain a reference to the web application class=0Aloader and this cr=
eates a memory leak.=0A=0A>> Additionally the input from H2 dev is that the=
se messages are a=0A>> Tomcat problem. Tomcat should have first disposed of=
 the connection=0A>> pool and then log the running threads.Their explanatio=
n seem=0A>> correct to me.=0A> =0A> That's the usual first response.=A0 Let=
's figure out whether it's=0A> correct...=0A=0AAnd it is wrong. When H2 cre=
ates those threads it should ensure that the=0Acontext class loader for the=
 threads is set to the same class loader=0Athat loaded the JDBC driver. We =
had similar issues with the evictor=0Athread in Apache Commons Pool (used b=
y DBCP).=0A=0AMark=0A=0A---------------------------------------------------=
------------------=0ATo unsubscribe, e-mail: users-unsubscribe@tomcat.apach=
e.org=0AFor additional commands, e-mail: users-help@tomcat.apache.org
---634093744-549895477-1333556061=:12060--

From users-return-233346-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 16:19:05 2012
Return-Path: <users-return-233346-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3A3D79E2A
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 16:19:05 +0000 (UTC)
Received: (qmail 55629 invoked by uid 500); 4 Apr 2012 16:19:01 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 55557 invoked by uid 500); 4 Apr 2012 16:19:01 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 55517 invoked by uid 99); 4 Apr 2012 16:19:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 16:19:01 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.160.196.165] (HELO arizona.hanik.com) (66.160.196.165)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 16:18:55 +0000
Received: from arizona.hanik.com (arizona.hanik.com [66.160.196.165])
	by arizona.hanik.com (Postfix) with ESMTP id 7B041A7E0119
	for <users@tomcat.apache.org>; Wed,  4 Apr 2012 10:15:42 -0600 (MDT)
Date: Wed, 04 Apr 2012 10:15:42 -0600 (MDT)
From: Filip Hanik Mailing Lists <devlists@hanik.com>
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Tomcat6 thread pool questions
Message-ID: <a89563d0-899f-4c83-9f5f-86ccc5c1c698@arizona.hanik.com>
In-Reply-To: <OF5AAEB29C.4417B5FC-ON862579D6.004B04E2-862579D6.004BEF1A@LocalDomain>
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Originating-IP: [144.230.82.43]
X-Mailer: Zimbra 7.1.1_GA_3196 (ZimbraWebClient - FF3.0 (Mac)/7.1.1_GA_3196)
X-Virus-Checked: Checked by ClamAV on apache.org

In Tomcat 6, the default thread pool ignores minSpareThreads, but if you us=
e <Executor name=3D"threadpool"...> and then <Connector executor=3D"threadp=
ool"
it will respect that value and you will see the expected the results

Filip


----- Original Message -----
> From: llowder@oreillyauto.com
> To: users@tomcat.apache.org
> Sent: Wednesday, April 4, 2012 7:50:24 AM
> Subject: Tomcat6 thread pool questions
> 
> 
> Greetings,
> 
> I was wondering if someone could help me understand how the
> threadpools are
> handled in tomcat6. I know that a lot of the functionality was moved
> to
> executors.
> 
> I set one up and using psi-Probe I could see that it was indeed
> killing off
> threads as I expected. However, the minSpareThreads did not seem to
> be used
> at all.
> 
> Is my understanding of that attribute correct, in that
> "minSparethreads"
> should be the minimum number of threads running at any point?
> 
> For example, if I have minSpareThreads set to 30, I should see 30
> threads
> when the server is idle, and between 30 and maxThreads when it is
> under a
> load, right?
> 
> That is not what I am seeing, as most of the time there are only 2-3
> threads with one busy thread while the server is idle or near idle.
> 
> If anyone could let me know either what I am missing or what it is I
> do not
> understand correctly, I would appreciate it.
> 
> Thank you.
> 
> Lee Lowder
> 
> This communication and any attachments are confidential, protected by
> Communications Privacy Act 18 USCS =EF=BF=BD 2510, solely for the use of =
the
> intended recipient, and may contain legally privileged material. If
> you are not the intended recipient, please return or destroy it
> immediately. Thank you.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233347-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 16:32:14 2012
Return-Path: <users-return-233347-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 53262955C
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 16:32:14 +0000 (UTC)
Received: (qmail 6233 invoked by uid 500); 4 Apr 2012 16:32:11 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 6041 invoked by uid 500); 4 Apr 2012 16:32:10 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 6028 invoked by uid 99); 4 Apr 2012 16:32:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 16:32:10 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.160.196.165] (HELO arizona.hanik.com) (66.160.196.165)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 16:32:04 +0000
Received: from arizona.hanik.com (arizona.hanik.com [66.160.196.165])
	by arizona.hanik.com (Postfix) with ESMTP id AEF38A7E0119
	for <users@tomcat.apache.org>; Wed,  4 Apr 2012 10:28:51 -0600 (MDT)
Date: Wed, 04 Apr 2012 10:28:51 -0600 (MDT)
From: Filip Hanik Mailing Lists <devlists@hanik.com>
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Discrepancy between Tomcat's connection pool and tomcat's report on memory leaks
Message-ID: <92e8953c-e3ff-4cb4-a78a-a4785f0cbc71@arizona.hanik.com>
In-Reply-To: <1333554810.98186.YahooMailNeo@web122304.mail.ne1.yahoo.com>
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Originating-IP: [144.230.82.43]
X-Mailer: Zimbra 7.1.1_GA_3196 (ZimbraWebClient - FF3.0 (Mac)/7.1.1_GA_3196)
X-Virus-Checked: Checked by ClamAV on apache.org

just set minIdle=3D0 and enable the eviction process to take care of it. 

Filip


----- Original Message -----
> From: "Hermes Flying" <flyinghermes@yahoo.com>
> To: "Daniel Mikusa" <dmikusa@vmware.com>
> Cc: users@tomcat.apache.org
> Sent: Wednesday, April 4, 2012 9:53:30 AM
> Subject: Re: Discrepancy between Tomcat's connection pool and tomcat's re=
port on memory leaks
> 
> >>Which is indicating that the application deployed to
> >>"/GeneralApplication" is creating a thread named "H2 Log Writer
> >>>>GENERICAPPLICATION" and never stopping it.  I do not believe
> >>that this would be associated with the pool created by Tomcat as
> >>that would >>be created as a global resource available to all
> >>applications and not specific to "/GeneralApplication".
> >>I can't really say a whole lot more about what is going on, just
> >>that this strikes me as odd.  If it were my app, I'd dig into this
> >>more and see what is >>creating that thread.  Possibly with a
> >>profiler or thread dumps.
> 
> What is happening here (as I undestand it is the following):
> 1)=C2=A0My application=C2=A0uses Tomcat's connection pool from the data s=
ource
> 2) My application uses H2 as a file database. H2 starts=C2=A0back end(s)
> thread which is about logging (H2 logging) and possibly other tasks
> =C2=A0and that is the thread that catalina complaints about
> 3) H2 remains open as long as there are open connections and is
> closed when the last connection is released
> 4) My application uses Tomcat's connection pool and as a result
> Tomcat "decides" when the data source should be disposed or when
> connections are released (not my code).
> 5) I shutdown Tomcat.
> 6) The connection pool of Tomcat has still connections (e.g. idle)
> and so H2 does not shutdown. Hence it's lock file and related
> background threads are still running.
> 7) Tomcat shuts down my application but does not dispose off the
> connection pool (yet). I believe this happens because of the way
> Tomcat is being shut down (as sequence of actions I mean).
> 8) Since the connection pool has not been disposed, there are still
> connections and as a result H2 is still running
> 9) Tomcat's memory leak detection mechanism detects H2 threads
> started from GenericApplication which uses H2 and gives the report
> in catalina.out. So Tomcat gives the report first and then proceeds
> with the shutdown (and this perhaps is not correct? I can't say)
> 10) Tomcat eventually shuts down.
> =C2=A0
> Is this scenario as I describe it, wrong?
> Should I somehow have configured the datasource to be "associated"
> with my web application instead of a generic data source? Why?
> Should I have shut the data source myself? How?
> If all what I describe is reasonable this seems to me like a "racing"
> condition. How should I mediate this?
> 
> Thank you for your time.
> =C2=A0 
> 
> ________________________________
>  From: Daniel Mikusa <dmikusa@vmware.com>
> To: Hermes Flying <flyinghermes@yahoo.com>
> Sent: Wednesday, April 4, 2012 5:14 PM
> Subject: Re: Discrepancy between Tomcat's connection pool and
> tomcat's report on memory leaks
>   
> ----- Original Message -----
> > 
> > 
> > What I do is get the dataSource inside a ServletContextListener and
> > save it in servlet context (as part of a DAO Factory):
> > 
> > public void contextInitialized(ServletContextEvent sce) {
> > 
> > ServletContext context =3D sce.getServletContext();
> > DataSource dataSource =3D null;
> > try {
> > dataSource =3D (DataSource) new
> > InitialContext().lookup("java:/comp/env/jdbc/GenericDataSource");
> > context.setAttribute("daogenericfactory",
> > DAOGenericFactory.getInstance(dataSource));
> > 
> > } catch (NamingException e) {
> > e.printStackTrace();
> > }
> > 
> > }
> > 
> > 
> > The DAOGenericFactory just returns specific DAO objects passing in
> > their constructor the data source.
> > Each DAO instance has an member variable of DataSource and for
> > action
> > to the database I do in order to get a connection:
> > 
> > public Connection getConnection() throws Exception{
> > return dataSource.getConnection();
> > }
> > 
> > 
> > So I use the Connection this way and I always close the connections
> > in order to be returned back to the pool.
> > The only thing perhaps to mention is that I create new DAO objects
> > passing this data source (I don't reuse instances of DAO).
> > So I don't have a pool of my own. I just use DAO pattern .
> > This is happening in my web application GeneralApplication
> > Is this information adequate/clear?
> 
> Definitely clear.=C2=A0 It just doesn't seem to match up with the output
> from the log files.=C2=A0 You're seeing
> 
> =C2=A0 =C2=A0 SEVERE: The web application [/GeneralApplication] appears t=
o have
> =C2=A0 =C2=A0 started a thread named [H2 Log Writer GENERICAPPLICATION] b=
ut has
> =C2=A0 =C2=A0 failed to stop it. This is very likely to create a memory l=
eak.
> 
> Which is indicating that the application deployed to
> "/GeneralApplication" is creating a thread named "H2 Log Writer
> GENERICAPPLICATION" and never stopping it.=C2=A0 I do not believe that
> this would be associated with the pool created by Tomcat as that
> would be created as a global resource available to all applications
> and not specific to "/GeneralApplication".
> 
> I can't really say a whole lot more about what is going on, just that
> this strikes me as odd.=C2=A0 If it were my app, I'd dig into this more
> and see what is creating that thread.=C2=A0 Possibly with a profiler or
> thread dumps.
> 
> 
> > Also how did you test it?
> 
> I took a stock Tomcat 7 instance, added the <Resource/> tag you
> specified to server.xml and added the <ResourceLink/> tag you
> specified to context.xml.=C2=A0 I then deployed a test app that I have,
> it's a simple Grails app that I routinely use to test database
> issues.=C2=A0 It just uses the JNDI connection specified to do some basic=

> database crud.
> 
> 
> >Did you use H2?
> 
> Yes.=C2=A0 h2-1.3.161.jar
> 
> 
> >Because I don't get these errors in catalina.out intermittently but
> >always.
> 
> No errors in any of my log files.=C2=A0 I tested stopping the Tomcat
> instance, restarting it and undeploying the application.
> 
> Dan
> 
> 
> 
> > 
> > Thank you
> > 
> > 
> > 
> > 
> > 
> > 
> > From: Daniel Mikusa <dmikusa@vmware.com>
> > To: Hermes Flying <flyinghermes@yahoo.com>
> > Sent: Wednesday, April 4, 2012 4:25 PM
> > Subject: Re: Discrepancy between Tomcat's connection pool and
> > tomcat's report on memory leaks
> > 
> > ----- Original Message -----
> > > 
> > > 
> > > Hi Dan,
> > > 
> > > 
> > > The following entry is in server.xml
> > > 
> > > <Resource name=3D"jdbc_GENERIS_RS" auth=3D"Container"
> > > type=3D"javax.sql.DataSource"
> > > driverClassName=3D"org.h2.Driver"
> > > url=3D"jdbc:h2:file:/opt/en/repos/tomcat/webapps/GeneralApplication/d=
b/internaldatabase;SCHEMA=3Dgenericschema"
> > > username=3D"root" password=3D"sa"
> > > maxActive=3D"20" maxIdle=3D"10" maxWait=3D"-1"
> > > />
> > > 
> > > 
> > > And the following entry is under $TOMCAT_HOME/conf/context.xml
> > > 
> > > <ResourceLink name=3D"jdbc/GenericDataSource"
> > > global=3D"jdbc_GENERIS_RS"
> > > type=3D"javax.sql.DataSource"/>
> > > 
> > > 
> > > 
> > > Do you need more details than these?
> > > 
> > > 
> > 
> > Seems a little weird. The message is indicating that the threads
> > which have not stopped reside in the application
> > "[/GeneralApplication]". This would seem to imply that the
> > connection pool was created by the application. The configuration
> > that you've specified here would have the container creating the
> > connection pool, which shouldn't trigger messages like this.
> > 
> > Are you sure your application is not creating a connection pool?
> > 
> > As a side note, I tried the configuration you mentioned in a local
> > Tomcat instance and it worked fine, no errors.
> > 
> > Dan
> > 
> > 
> > > 
> > > 
> > > 
> > > 
> > > 
> > > 
> > > 
> > > From: Daniel Mikusa < dmikusa@vmware.com >
> > > To: Tomcat Users List < users@tomcat.apache.org >
> > > Sent: Wednesday, April 4, 2012 3:35 PM
> > > Subject: Re: Discrepancy between Tomcat's connection pool and
> > > tomcat's report on memory leaks
> > > 
> > > 
> > > 
> > > ----- Original Message -----
> > > > Hi,
> > > > 
> > > > I am using Tomcat 7.0.25 in a Linux machine
> > > > 
> > > > I am using Tomcat's connection pool
> > > > (org.apache.tomcat.dbcp.dbcp.BasicDataSource). As database I am
> > > > using H2 as a file database.
> > > 
> > > Where are you defining the connection pool? Can you include your
> > > configuration?
> > > 
> > > Dan
> > > 
> > > 
> > > > All is ok, but I have the following problem.
> > > > On shutdown of Tomcat I see in catalina.out:
> > > > 
> > > > 
> > > > SEVERE: The web application [/GeneralApplication] appears to
> > > > have
> > > > started a thread named [H2 Log Writer GENERICAPPLICATION] but
> > > > has
> > > > failed to stop it. This is very likely to create a memory leak.
> > > > Apr 4, 2012 2:32:54 PM
> > > > org.apache.catalina.loader.WebappClassLoader
> > > > clearReferencesThreads
> > > > SEVERE: The web application [/GeneralApplication] appears to
> > > > have
> > > > started a thread named [H2 File Lock Watchdog
> > > > /opt/en/repos/tomcat/webapps/GeneralApplication/db/internaldatabase=
.lock.db]
> > > > but has failed to stop it. This is very likely to create a
> > > > memory
> > > > leak.
> > > > 
> > > > Why do I get these messages?
> > > > As I understand these messages, H2 is still running on shutdown
> > > > and
> > > > the documentation they have says that the database will
> > > > shutdown
> > > > once the last connection is closed (and the connections are
> > > > handled
> > > > by the pool i.e. Tomcat)
> > > > 
> > > > Additionally the input from H2 dev is that these messages are a
> > > > Tomcat problem. Tomcat should have first disposed of the
> > > > connection
> > > > pool and then log the running threads.Their explanation seem
> > > > correct
> > > > to me.
> > > > 
> > > > Is this a known issue? Why do I see these errors in catalina?
> > > > Should
> > > > I somehow dispose off the connection pool myself?
> > > > 
> > > > Thank you for your time
> > > > Best Regards,
> > > > FH
> > > > 
> > > 
> > > ---------------------------------------------------------------------=

> > > To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> > > For additional commands, e-mail: users-help@tomcat.apache.org
> > > 
> > > 
> > > 
> > > 
> > 
> > 
> >

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233348-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 16:45:56 2012
Return-Path: <users-return-233348-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A6AA19B83
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 16:45:56 +0000 (UTC)
Received: (qmail 55106 invoked by uid 500); 4 Apr 2012 16:45:53 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 55050 invoked by uid 500); 4 Apr 2012 16:45:52 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 55041 invoked by uid 99); 4 Apr 2012 16:45:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 16:45:52 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.138.90.251] (HELO nm5-vm0.bullet.mail.ne1.yahoo.com) (98.138.90.251)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 04 Apr 2012 16:45:46 +0000
Received: from [98.138.90.48] by nm5.bullet.mail.ne1.yahoo.com with NNFMP; 04 Apr 2012 16:45:24 -0000
Received: from [98.138.89.171] by tm1.bullet.mail.ne1.yahoo.com with NNFMP; 04 Apr 2012 16:45:24 -0000
Received: from [127.0.0.1] by omp1027.mail.ne1.yahoo.com with NNFMP; 04 Apr 2012 16:45:24 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 956473.58011.bm@omp1027.mail.ne1.yahoo.com
Received: (qmail 65187 invoked by uid 60001); 4 Apr 2012 16:45:24 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1333557924; bh=2aGeclQgjWyaHe2dcVmQtY6oaeTdqizkGCHRtDuwCWQ=; h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=UMTRRV75+XNNEAEcWHD0vMQxWGk0xSb/fGyLIYWynlPL42aYuYgtu3vkG254xs+Uo5J2Fkc/IyrNKRi+WhKe4SIqm+/60RqtRMitHbYJOhURGGw3njUNyzroqFVNdFj71rD1tbzdBAKxS3BNNF4Rc96SE8oraieT7Kki7TDWBP4=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=2Y1J2RlIDWf7SA7mtjVUa6JRcepZ6mEEIxbYREeQMFl8XS+DCviG311b3B+UhZoL5f/8Ic+mrrVoQmsWByxM0iF/peVh3Fhq8G4brySiDHp6Wv1Rs07Wen4zG/a63i04cuAqHpxvhY/xPT4Xr2/A64RuGBX84PsVvVq/CzXpX+E=;
X-YMail-OSG: bSPP8mIVM1nyqhc7YPGverXQKrPq8eLn.DXRDDQQHdcGA9e
 MIwo0wk2jFeMVAFMkULRi0q9rJUUwRt94qSu2akHFVmF461YZwntqJ7BrSao
 BDAjeJ3SYoHoXRNthCR06iCBFwgLesW2leGfWci_sPiphh7aZlPARKEJX4SF
 BJVCe0zwVuY8XSY6lc7LwGfbiDZ2mJRjAX3ckf.iRNSmUEolSlWLDXl4aaBa
 aZiAJsqVt1c7v4xFn7WQFXMkPYbO6X7.KKa78yHRKn22jHw493ypSHMLSizP
 JZBNuvXvkiYfO5Cyc9QUhZs27cm5qPtyCYW.2.HiRyOQXOJz.G8MzP3iYn8o
 reSQ6MyAzkpRidrIQ4O4k_B_wM_2eQFVlG.4Y0R5Wi3dtDEKk2CtU.PN8MIP
 cd55CyTjUOcYhwJY0J4zRreRmAk5VJPh2Edk23oCEfacp.busrPsLVHp8rG2
 LkwHOVA.HPlodvUPvFzabUA--
Received: from [87.202.5.142] by web122305.mail.ne1.yahoo.com via HTTP; Wed, 04 Apr 2012 09:45:24 PDT
X-Mailer: YahooMailWebService/0.8.117.340979
References: <1333554810.98186.YahooMailNeo@web122304.mail.ne1.yahoo.com> <92e8953c-e3ff-4cb4-a78a-a4785f0cbc71@arizona.hanik.com>
Message-ID: <1333557924.34311.YahooMailNeo@web122305.mail.ne1.yahoo.com>
Date: Wed, 4 Apr 2012 09:45:24 -0700 (PDT)
From: Hermes Flying <flyinghermes@yahoo.com>
Reply-To: Hermes Flying <flyinghermes@yahoo.com>
Subject: Re: Discrepancy between Tomcat's connection pool and tomcat's report on memory leaks
To: Tomcat Users List <users@tomcat.apache.org>
In-Reply-To: <92e8953c-e3ff-4cb4-a78a-a4785f0cbc71@arizona.hanik.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="-947112896-2041526583-1333557924=:34311"
X-Virus-Checked: Checked by ClamAV on apache.org

---947112896-2041526583-1333557924=:34311
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

But if I set 'minIdle=3D0' all the connections would close imediatelly, rig=
ht?=0ASo why would I need a connection pool in the first place if I do this=
?=0A =0A=0A________________________________=0A From: Filip Hanik Mailing Li=
sts <devlists@hanik.com>=0ATo: Tomcat Users List <users@tomcat.apache.org> =
=0ASent: Wednesday, April 4, 2012 7:28 PM=0ASubject: Re: Discrepancy betwee=
n Tomcat's connection pool and tomcat's report on memory leaks=0A  =0Ajust =
set minIdle=3D0 and enable the eviction process to take care of it.=0A=0AFi=
lip=0A=0A=0A----- Original Message -----=0A> From: "Hermes Flying" <flyingh=
ermes@yahoo.com>=0A> To: "Daniel Mikusa" <dmikusa@vmware.com>=0A> Cc: users=
@tomcat.apache.org=0A> Sent: Wednesday, April 4, 2012 9:53:30 AM=0A> Subjec=
t: Re: Discrepancy between Tomcat's connection pool and tomcat's report on =
memory leaks=0A>=0A> >>Which is indicating that the application deployed to=
=0A> >>"/GeneralApplication" is creating a thread named "H2 Log Writer=0A> =
>>>>GENERICAPPLICATION" and never stopping it.=A0 I do not believe=0A> >>th=
at this would be associated with the pool created by Tomcat as=0A> >>that w=
ould >>be created as a global resource available to all=0A> >>applications =
and not specific to "/GeneralApplication".=0A> >>I can't really say a whole=
 lot more about what is going on, just=0A> >>that this strikes me as odd.=
=A0 If it were my app, I'd dig into this=0A> >>more and see what is >>creat=
ing that thread.=A0 Possibly with a=0A> >>profiler or thread dumps.=0A>=0A>=
 What is happening here (as I undestand it is the following):=0A> 1)=A0My a=
pplication=A0uses Tomcat's connection pool from the data source=0A> 2) My a=
pplication uses H2 as a file database. H2 starts=A0back end(s)=0A> thread w=
hich is about logging (H2 logging) and possibly other tasks=0A> =A0and that=
 is the thread that catalina complaints about=0A> 3) H2 remains open as lon=
g as there are open connections and is=0A> closed when the last connection =
is released=0A> 4) My application uses Tomcat's connection pool and as a re=
sult=0A> Tomcat "decides" when the data source should be disposed or when=
=0A> connections are released (not my code).=0A> 5) I shutdown Tomcat.=0A> =
6) The connection pool of Tomcat has still connections (e.g. idle)=0A> and =
so H2 does not shutdown. Hence it's lock file and related=0A> background th=
reads are still running.=0A> 7) Tomcat shuts down my application but does n=
ot dispose off the=0A> connection pool (yet). I believe this happens becaus=
e of the way=0A> Tomcat is being shut down (as sequence of actions I mean).=
=0A> 8) Since the connection pool has not been disposed, there are still=0A=
> connections and as a result H2 is still running=0A> 9) Tomcat's memory le=
ak detection mechanism detects H2 threads=0A> started from GenericApplicati=
on which uses H2 and gives the report=0A> in catalina.out. So Tomcat gives =
the report first and then proceeds=0A> with the shutdown (and this perhaps =
is not correct? I can't say)=0A> 10) Tomcat eventually shuts down.=0A> =A0=
=0A> Is this scenario as I describe it, wrong?=0A> Should I somehow have co=
nfigured the datasource to be "associated"=0A> with my web application inst=
ead of a generic data source? Why?=0A> Should I have shut the data source m=
yself? How?=0A> If all what I describe is reasonable this seems to me like =
a "racing"=0A> condition. How should I mediate this?=0A>=0A> Thank you for =
your time.=0A> =A0=0A>=0A> ________________________________=0A>=A0 From: Da=
niel Mikusa <dmikusa@vmware.com>=0A> To: Hermes Flying <flyinghermes@yahoo.=
com>=0A> Sent: Wednesday, April 4, 2012 5:14 PM=0A> Subject: Re: Discrepanc=
y between Tomcat's connection pool and=0A> tomcat's report on memory leaks=
=0A>=0A> ----- Original Message -----=0A> >=0A> >=0A> > What I do is get th=
e dataSource inside a ServletContextListener and=0A> > save it in servlet c=
ontext (as part of a DAO Factory):=0A> >=0A> > public void contextInitializ=
ed(ServletContextEvent sce) {=0A> >=0A> > ServletContext context =3D sce.ge=
tServletContext();=0A> > DataSource dataSource =3D null;=0A> > try {=0A> > =
dataSource =3D (DataSource) new=0A> > InitialContext().lookup("java:/comp/e=
nv/jdbc/GenericDataSource");=0A> > context.setAttribute("daogenericfactory"=
,=0A> > DAOGenericFactory.getInstance(dataSource));=0A> >=0A> > } catch (Na=
mingException e) {=0A> > e.printStackTrace();=0A> > }=0A> >=0A> > }=0A> >=
=0A> >=0A> > The DAOGenericFactory just returns specific DAO objects passin=
g in=0A> > their constructor the data source.=0A> > Each DAO instance has a=
n member variable of DataSource and for=0A> > action=0A> > to the database =
I do in order to get a connection:=0A> >=0A> > public Connection getConnect=
ion() throws Exception{=0A> > return dataSource.getConnection();=0A> > }=0A=
> >=0A> >=0A> > So I use the Connection this way and I always close the con=
nections=0A> > in order to be returned back to the pool.=0A> > The only thi=
ng perhaps to mention is that I create new DAO objects=0A> > passing this d=
ata source (I don't reuse instances of DAO).=0A> > So I don't have a pool o=
f my own. I just use DAO pattern .=0A> > This is happening in my web applic=
ation GeneralApplication=0A> > Is this information adequate/clear?=0A>=0A> =
Definitely clear.=A0 It just doesn't seem to match up with the output=0A> f=
rom the log files.=A0 You're seeing=0A>=0A> =A0 =A0 SEVERE: The web applica=
tion [/GeneralApplication] appears to have=0A> =A0 =A0 started a thread nam=
ed [H2 Log Writer GENERICAPPLICATION] but has=0A> =A0 =A0 failed to stop it=
. This is very likely to create a memory leak.=0A>=0A> Which is indicating =
that the application deployed to=0A> "/GeneralApplication" is creating a th=
read named "H2 Log Writer=0A> GENERICAPPLICATION" and never stopping it.=A0=
 I do not believe that=0A> this would be associated with the pool created b=
y Tomcat as that=0A> would be created as a global resource available to all=
 applications=0A> and not specific to "/GeneralApplication".=0A>=0A> I can'=
t really say a whole lot more about what is going on, just that=0A> this st=
rikes me as odd.=A0 If it were my app, I'd dig into this more=0A> and see w=
hat is creating that thread.=A0 Possibly with a profiler or=0A> thread dump=
s.=0A>=0A>=0A> > Also how did you test it?=0A>=0A> I took a stock Tomcat 7 =
instance, added the <Resource/> tag you=0A> specified to server.xml and add=
ed the <ResourceLink/> tag you=0A> specified to context.xml.=A0 I then depl=
oyed a test app that I have,=0A> it's a simple Grails app that I routinely =
use to test database=0A> issues.=A0 It just uses the JNDI connection specif=
ied to do some basic=0A> database crud.=0A>=0A>=0A> >Did you use H2?=0A>=0A=
> Yes.=A0 h2-1.3.161.jar=0A>=0A>=0A> >Because I don't get these errors in c=
atalina.out intermittently but=0A> >always.=0A>=0A> No errors in any of my =
log files.=A0 I tested stopping the Tomcat=0A> instance, restarting it and =
undeploying the application.=0A>=0A> Dan=0A>=0A>=0A>=0A> >=0A> > Thank you=
=0A> >=0A> >=0A> >=0A> >=0A> >=0A> >=0A> > From: Daniel Mikusa <dmikusa@vmw=
are.com>=0A> > To: Hermes Flying <flyinghermes@yahoo.com>=0A> > Sent: Wedne=
sday, April 4, 2012 4:25 PM=0A> > Subject: Re: Discrepancy between Tomcat's=
 connection pool and=0A> > tomcat's report on memory leaks=0A> >=0A> > ----=
- Original Message -----=0A> > >=0A> > >=0A> > > Hi Dan,=0A> > >=0A> > >=0A=
> > > The following entry is in server.xml=0A> > >=0A> > > <Resource name=
=3D"jdbc_GENERIS_RS" auth=3D"Container"=0A> > > type=3D"javax.sql.DataSourc=
e"=0A> > > driverClassName=3D"org.h2.Driver"=0A> > > url=3D"jdbc:h2:file:/o=
pt/en/repos/tomcat/webapps/GeneralApplication/db/internaldatabase;SCHEMA=3D=
genericschema"=0A> > > username=3D"root" password=3D"sa"=0A> > > maxActive=
=3D"20" maxIdle=3D"10" maxWait=3D"-1"=0A> > > />=0A> > >=0A> > >=0A> > > An=
d the following entry is under $TOMCAT_HOME/conf/context.xml=0A> > >=0A> > =
> <ResourceLink name=3D"jdbc/GenericDataSource"=0A> > > global=3D"jdbc_GENE=
RIS_RS"=0A> > > type=3D"javax.sql.DataSource"/>=0A> > >=0A> > >=0A> > >=0A>=
 > > Do you need more details than these?=0A> > >=0A> > >=0A> >=0A> > Seems=
 a little weird. The message is indicating that the threads=0A> > which hav=
e not stopped reside in the application=0A> > "[/GeneralApplication]". This=
 would seem to imply that the=0A> > connection pool was created by the appl=
ication. The configuration=0A> > that you've specified here would have the =
container creating the=0A> > connection pool, which shouldn't trigger messa=
ges like this.=0A> >=0A> > Are you sure your application is not creating a =
connection pool?=0A> >=0A> > As a side note, I tried the configuration you =
mentioned in a local=0A> > Tomcat instance and it worked fine, no errors.=
=0A> >=0A> > Dan=0A> >=0A> >=0A> > >=0A> > >=0A> > >=0A> > >=0A> > >=0A> > =
>=0A> > >=0A> > > From: Daniel Mikusa < dmikusa@vmware.com >=0A> > > To: To=
mcat Users List < users@tomcat.apache.org >=0A> > > Sent: Wednesday, April =
4, 2012 3:35 PM=0A> > > Subject: Re: Discrepancy between Tomcat's connectio=
n pool and=0A> > > tomcat's report on memory leaks=0A> > >=0A> > >=0A> > >=
=0A> > > ----- Original Message -----=0A> > > > Hi,=0A> > > >=0A> > > > I a=
m using Tomcat 7.0.25 in a Linux machine=0A> > > >=0A> > > > I am using Tom=
cat's connection pool=0A> > > > (org.apache.tomcat.dbcp.dbcp.BasicDataSourc=
e). As database I am=0A> > > > using H2 as a file database.=0A> > >=0A> > >=
 Where are you defining the connection pool? Can you include your=0A> > > c=
onfiguration?=0A> > >=0A> > > Dan=0A> > >=0A> > >=0A> > > > All is ok, but =
I have the following problem.=0A> > > > On shutdown of Tomcat I see in cata=
lina.out:=0A> > > >=0A> > > >=0A> > > > SEVERE: The web application [/Gener=
alApplication] appears to=0A> > > > have=0A> > > > started a thread named [=
H2 Log Writer GENERICAPPLICATION] but=0A> > > > has=0A> > > > failed to sto=
p it. This is very likely to create a memory leak.=0A> > > > Apr 4, 2012 2:=
32:54 PM=0A> > > > org.apache.catalina.loader.WebappClassLoader=0A> > > > c=
learReferencesThreads=0A> > > > SEVERE: The web application [/GeneralApplic=
ation] appears to=0A> > > > have=0A> > > > started a thread named [H2 File =
Lock Watchdog=0A> > > > /opt/en/repos/tomcat/webapps/GeneralApplication/db/=
internaldatabase.lock.db]=0A> > > > but has failed to stop it. This is very=
 likely to create a=0A> > > > memory=0A> > > > leak.=0A> > > >=0A> > > > Wh=
y do I get these messages?=0A> > > > As I understand these messages, H2 is =
still running on shutdown=0A> > > > and=0A> > > > the documentation they ha=
ve says that the database will=0A> > > > shutdown=0A> > > > once the last c=
onnection is closed (and the connections are=0A> > > > handled=0A> > > > by=
 the pool i.e. Tomcat)=0A> > > >=0A> > > > Additionally the input from H2 d=
ev is that these messages are a=0A> > > > Tomcat problem. Tomcat should hav=
e first disposed of the=0A> > > > connection=0A> > > > pool and then log th=
e running threads.Their explanation seem=0A> > > > correct=0A> > > > to me.=
=0A> > > >=0A> > > > Is this a known issue? Why do I see these errors in ca=
talina?=0A> > > > Should=0A> > > > I somehow dispose off the connection poo=
l myself?=0A> > > >=0A> > > > Thank you for your time=0A> > > > Best Regard=
s,=0A> > > > FH=0A> > > >=0A> > >=0A> > > ---------------------------------=
------------------------------------=0A> > > To unsubscribe, e-mail: users-=
unsubscribe@tomcat.apache.org=0A> > > For additional commands, e-mail: user=
s-help@tomcat.apache.org=0A> > >=0A> > >=0A> > >=0A> > >=0A> >=0A> >=0A> >=
=0A=0A---------------------------------------------------------------------=
=0ATo unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org=0AFor additi=
onal commands, e-mail: users-help@tomcat.apache.org
---947112896-2041526583-1333557924=:34311--

From users-return-233349-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 16:54:10 2012
Return-Path: <users-return-233349-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BE0829F35
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 16:54:10 +0000 (UTC)
Received: (qmail 91832 invoked by uid 500); 4 Apr 2012 16:54:07 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 91767 invoked by uid 500); 4 Apr 2012 16:54:07 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 91758 invoked by uid 99); 4 Apr 2012 16:54:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 16:54:07 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [66.160.196.165] (HELO arizona.hanik.com) (66.160.196.165)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 16:53:59 +0000
Received: from arizona.hanik.com (arizona.hanik.com [66.160.196.165])
	by arizona.hanik.com (Postfix) with ESMTP id 95748A7E011B;
	Wed,  4 Apr 2012 10:50:46 -0600 (MDT)
Date: Wed, 04 Apr 2012 10:50:46 -0600 (MDT)
From: Filip Hanik Mailing Lists <devlists@hanik.com>
To: Tomcat Users List <users@tomcat.apache.org>, Hermes Flying <flyinghermes@yahoo.com>
Subject: Re: Discrepancy between Tomcat's connection pool and tomcat's report on memory leaks
Message-ID: <7f3f1647-0219-48da-a950-570a3c0461cb@arizona.hanik.com>
In-Reply-To: <1333557924.34311.YahooMailNeo@web122305.mail.ne1.yahoo.com>
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Originating-IP: [144.230.82.43]
X-Mailer: Zimbra 7.1.1_GA_3196 (ZimbraWebClient - FF3.0 (Mac)/7.1.1_GA_3196)

no, that would happen if you set maxIdle=3D0, not minIdle

----- Original Message -----
> From: "Hermes Flying" <flyinghermes@yahoo.com>
> To: "Tomcat Users List" <users@tomcat.apache.org>
> Sent: Wednesday, April 4, 2012 10:45:24 AM
> Subject: Re: Discrepancy between Tomcat's connection pool and tomcat's re=
port on memory leaks
> 
> But if I set 'minIdle=3D0' all the connections would close imediatelly,
> right?
> So why would I need a connection pool in the first place if I do
> this?
>  
> 
> ________________________________
>  From: Filip Hanik Mailing Lists <devlists@hanik.com>
> To: Tomcat Users List <users@tomcat.apache.org>
> Sent: Wednesday, April 4, 2012 7:28 PM
> Subject: Re: Discrepancy between Tomcat's connection pool and
> tomcat's report on memory leaks
>   
> just set minIdle=3D0 and enable the eviction process to take care of
> it.
> 
> Filip
> 
> 
> ----- Original Message -----
> > From: "Hermes Flying" <flyinghermes@yahoo.com>
> > To: "Daniel Mikusa" <dmikusa@vmware.com>
> > Cc: users@tomcat.apache.org
> > Sent: Wednesday, April 4, 2012 9:53:30 AM
> > Subject: Re: Discrepancy between Tomcat's connection pool and
> > tomcat's report on memory leaks
> >
> > >>Which is indicating that the application deployed to
> > >>"/GeneralApplication" is creating a thread named "H2 Log Writer
> > >>>>GENERICAPPLICATION" and never stopping it.=C2=A0 I do not believe
> > >>that this would be associated with the pool created by Tomcat as
> > >>that would >>be created as a global resource available to all
> > >>applications and not specific to "/GeneralApplication".
> > >>I can't really say a whole lot more about what is going on, just
> > >>that this strikes me as odd.=C2=A0 If it were my app, I'd dig into
> > >>this
> > >>more and see what is >>creating that thread.=C2=A0 Possibly with a
> > >>profiler or thread dumps.
> >
> > What is happening here (as I undestand it is the following):
> > 1)=C2=A0My application=C2=A0uses Tomcat's connection pool from the data=

> > source
> > 2) My application uses H2 as a file database. H2 starts=C2=A0back end(s=
)
> > thread which is about logging (H2 logging) and possibly other tasks
> > =C2=A0and that is the thread that catalina complaints about
> > 3) H2 remains open as long as there are open connections and is
> > closed when the last connection is released
> > 4) My application uses Tomcat's connection pool and as a result
> > Tomcat "decides" when the data source should be disposed or when
> > connections are released (not my code).
> > 5) I shutdown Tomcat.
> > 6) The connection pool of Tomcat has still connections (e.g. idle)
> > and so H2 does not shutdown. Hence it's lock file and related
> > background threads are still running.
> > 7) Tomcat shuts down my application but does not dispose off the
> > connection pool (yet). I believe this happens because of the way
> > Tomcat is being shut down (as sequence of actions I mean).
> > 8) Since the connection pool has not been disposed, there are still
> > connections and as a result H2 is still running
> > 9) Tomcat's memory leak detection mechanism detects H2 threads
> > started from GenericApplication which uses H2 and gives the report
> > in catalina.out. So Tomcat gives the report first and then proceeds
> > with the shutdown (and this perhaps is not correct? I can't say)
> > 10) Tomcat eventually shuts down.
> > =C2=A0
> > Is this scenario as I describe it, wrong?
> > Should I somehow have configured the datasource to be "associated"
> > with my web application instead of a generic data source? Why?
> > Should I have shut the data source myself? How?
> > If all what I describe is reasonable this seems to me like a
> > "racing"
> > condition. How should I mediate this?
> >
> > Thank you for your time.
> > =C2=A0
> >
> > ________________________________
> >=C2=A0 From: Daniel Mikusa <dmikusa@vmware.com>
> > To: Hermes Flying <flyinghermes@yahoo.com>
> > Sent: Wednesday, April 4, 2012 5:14 PM
> > Subject: Re: Discrepancy between Tomcat's connection pool and
> > tomcat's report on memory leaks
> >
> > ----- Original Message -----
> > >
> > >
> > > What I do is get the dataSource inside a ServletContextListener
> > > and
> > > save it in servlet context (as part of a DAO Factory):
> > >
> > > public void contextInitialized(ServletContextEvent sce) {
> > >
> > > ServletContext context =3D sce.getServletContext();
> > > DataSource dataSource =3D null;
> > > try {
> > > dataSource =3D (DataSource) new
> > > InitialContext().lookup("java:/comp/env/jdbc/GenericDataSource");
> > > context.setAttribute("daogenericfactory",
> > > DAOGenericFactory.getInstance(dataSource));
> > >
> > > } catch (NamingException e) {
> > > e.printStackTrace();
> > > }
> > >
> > > }
> > >
> > >
> > > The DAOGenericFactory just returns specific DAO objects passing
> > > in
> > > their constructor the data source.
> > > Each DAO instance has an member variable of DataSource and for
> > > action
> > > to the database I do in order to get a connection:
> > >
> > > public Connection getConnection() throws Exception{
> > > return dataSource.getConnection();
> > > }
> > >
> > >
> > > So I use the Connection this way and I always close the
> > > connections
> > > in order to be returned back to the pool.
> > > The only thing perhaps to mention is that I create new DAO
> > > objects
> > > passing this data source (I don't reuse instances of DAO).
> > > So I don't have a pool of my own. I just use DAO pattern .
> > > This is happening in my web application GeneralApplication
> > > Is this information adequate/clear?
> >
> > Definitely clear.=C2=A0 It just doesn't seem to match up with the outpu=
t
> > from the log files.=C2=A0 You're seeing
> >
> > =C2=A0 =C2=A0 SEVERE: The web application [/GeneralApplication] appears=
 to
> > =C2=A0 =C2=A0 have
> > =C2=A0 =C2=A0 started a thread named [H2 Log Writer GENERICAPPLICATION]=
 but
> > =C2=A0 =C2=A0 has
> > =C2=A0 =C2=A0 failed to stop it. This is very likely to create a memory=
 leak.
> >
> > Which is indicating that the application deployed to
> > "/GeneralApplication" is creating a thread named "H2 Log Writer
> > GENERICAPPLICATION" and never stopping it.=C2=A0 I do not believe that
> > this would be associated with the pool created by Tomcat as that
> > would be created as a global resource available to all applications
> > and not specific to "/GeneralApplication".
> >
> > I can't really say a whole lot more about what is going on, just
> > that
> > this strikes me as odd.=C2=A0 If it were my app, I'd dig into this more=

> > and see what is creating that thread.=C2=A0 Possibly with a profiler or=

> > thread dumps.
> >
> >
> > > Also how did you test it?
> >
> > I took a stock Tomcat 7 instance, added the <Resource/> tag you
> > specified to server.xml and added the <ResourceLink/> tag you
> > specified to context.xml.=C2=A0 I then deployed a test app that I have,=

> > it's a simple Grails app that I routinely use to test database
> > issues.=C2=A0 It just uses the JNDI connection specified to do some
> > basic
> > database crud.
> >
> >
> > >Did you use H2?
> >
> > Yes.=C2=A0 h2-1.3.161.jar
> >
> >
> > >Because I don't get these errors in catalina.out intermittently
> > >but
> > >always.
> >
> > No errors in any of my log files.=C2=A0 I tested stopping the Tomcat
> > instance, restarting it and undeploying the application.
> >
> > Dan
> >
> >
> >
> > >
> > > Thank you
> > >
> > >
> > >
> > >
> > >
> > >
> > > From: Daniel Mikusa <dmikusa@vmware.com>
> > > To: Hermes Flying <flyinghermes@yahoo.com>
> > > Sent: Wednesday, April 4, 2012 4:25 PM
> > > Subject: Re: Discrepancy between Tomcat's connection pool and
> > > tomcat's report on memory leaks
> > >
> > > ----- Original Message -----
> > > >
> > > >
> > > > Hi Dan,
> > > >
> > > >
> > > > The following entry is in server.xml
> > > >
> > > > <Resource name=3D"jdbc_GENERIS_RS" auth=3D"Container"
> > > > type=3D"javax.sql.DataSource"
> > > > driverClassName=3D"org.h2.Driver"
> > > > url=3D"jdbc:h2:file:/opt/en/repos/tomcat/webapps/GeneralApplication=
/db/internaldatabase;SCHEMA=3Dgenericschema"
> > > > username=3D"root" password=3D"sa"
> > > > maxActive=3D"20" maxIdle=3D"10" maxWait=3D"-1"
> > > > />
> > > >
> > > >
> > > > And the following entry is under $TOMCAT_HOME/conf/context.xml
> > > >
> > > > <ResourceLink name=3D"jdbc/GenericDataSource"
> > > > global=3D"jdbc_GENERIS_RS"
> > > > type=3D"javax.sql.DataSource"/>
> > > >
> > > >
> > > >
> > > > Do you need more details than these?
> > > >
> > > >
> > >
> > > Seems a little weird. The message is indicating that the threads
> > > which have not stopped reside in the application
> > > "[/GeneralApplication]". This would seem to imply that the
> > > connection pool was created by the application. The configuration
> > > that you've specified here would have the container creating the
> > > connection pool, which shouldn't trigger messages like this.
> > >
> > > Are you sure your application is not creating a connection pool?
> > >
> > > As a side note, I tried the configuration you mentioned in a
> > > local
> > > Tomcat instance and it worked fine, no errors.
> > >
> > > Dan
> > >
> > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > > From: Daniel Mikusa < dmikusa@vmware.com >
> > > > To: Tomcat Users List < users@tomcat.apache.org >
> > > > Sent: Wednesday, April 4, 2012 3:35 PM
> > > > Subject: Re: Discrepancy between Tomcat's connection pool and
> > > > tomcat's report on memory leaks
> > > >
> > > >
> > > >
> > > > ----- Original Message -----
> > > > > Hi,
> > > > >
> > > > > I am using Tomcat 7.0.25 in a Linux machine
> > > > >
> > > > > I am using Tomcat's connection pool
> > > > > (org.apache.tomcat.dbcp.dbcp.BasicDataSource). As database I
> > > > > am
> > > > > using H2 as a file database.
> > > >
> > > > Where are you defining the connection pool? Can you include
> > > > your
> > > > configuration?
> > > >
> > > > Dan
> > > >
> > > >
> > > > > All is ok, but I have the following problem.
> > > > > On shutdown of Tomcat I see in catalina.out:
> > > > >
> > > > >
> > > > > SEVERE: The web application [/GeneralApplication] appears to
> > > > > have
> > > > > started a thread named [H2 Log Writer GENERICAPPLICATION] but
> > > > > has
> > > > > failed to stop it. This is very likely to create a memory
> > > > > leak.
> > > > > Apr 4, 2012 2:32:54 PM
> > > > > org.apache.catalina.loader.WebappClassLoader
> > > > > clearReferencesThreads
> > > > > SEVERE: The web application [/GeneralApplication] appears to
> > > > > have
> > > > > started a thread named [H2 File Lock Watchdog
> > > > > /opt/en/repos/tomcat/webapps/GeneralApplication/db/internaldataba=
se.lock.db]
> > > > > but has failed to stop it. This is very likely to create a
> > > > > memory
> > > > > leak.
> > > > >
> > > > > Why do I get these messages?
> > > > > As I understand these messages, H2 is still running on
> > > > > shutdown
> > > > > and
> > > > > the documentation they have says that the database will
> > > > > shutdown
> > > > > once the last connection is closed (and the connections are
> > > > > handled
> > > > > by the pool i.e. Tomcat)
> > > > >
> > > > > Additionally the input from H2 dev is that these messages are
> > > > > a
> > > > > Tomcat problem. Tomcat should have first disposed of the
> > > > > connection
> > > > > pool and then log the running threads.Their explanation seem
> > > > > correct
> > > > > to me.
> > > > >
> > > > > Is this a known issue? Why do I see these errors in catalina?
> > > > > Should
> > > > > I somehow dispose off the connection pool myself?
> > > > >
> > > > > Thank you for your time
> > > > > Best Regards,
> > > > > FH
> > > > >
> > > >
> > > > -------------------------------------------------------------------=
--
> > > > To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> > > > For additional commands, e-mail: users-help@tomcat.apache.org
> > > >
> > > >
> > > >
> > > >
> > >
> > >
> > >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233350-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 16:56:41 2012
Return-Path: <users-return-233350-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8B60A9065
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 16:56:41 +0000 (UTC)
Received: (qmail 658 invoked by uid 500); 4 Apr 2012 16:56:38 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 436 invoked by uid 500); 4 Apr 2012 16:56:38 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 427 invoked by uid 99); 4 Apr 2012 16:56:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 16:56:38 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.138.91.128] (HELO nm28-vm2.bullet.mail.ne1.yahoo.com) (98.138.91.128)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 04 Apr 2012 16:56:31 +0000
Received: from [98.138.90.51] by nm28.bullet.mail.ne1.yahoo.com with NNFMP; 04 Apr 2012 16:56:10 -0000
Received: from [98.138.89.195] by tm4.bullet.mail.ne1.yahoo.com with NNFMP; 04 Apr 2012 16:56:10 -0000
Received: from [127.0.0.1] by omp1053.mail.ne1.yahoo.com with NNFMP; 04 Apr 2012 16:56:10 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 216288.56763.bm@omp1053.mail.ne1.yahoo.com
Received: (qmail 58359 invoked by uid 60001); 4 Apr 2012 16:56:10 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1333558570; bh=CWjMK9pvWxHS4n0FUp3pgfL5CW/x0emR2DyA4vovemI=; h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=HwLdKgqBV/Pks6qbKndOTL4kByS87qH5x9IgK7FjWTs71NYJSM15DD8tXDDHpcReppsr57cjQSFJNrciadhHrz/PRCFcWy6sMtOl0CTYo2Oz36o+Tdd6iuajG0EPSkqhFIc1N99WK2pcxgT/HgiH0JkIhCOr6l6FnHdXjOzim9E=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=e15MNddwIpEIdaeSKyc+Bj6pEY5thl+92RPoLcoG6GgXWDiuI8xDx3ab4//GkDwxo6gyUKmUxEPB56MHAFvfoOwtFw6j19Wf3S5yUn1ugw9gtftn4Nx0XyOgM2GUnFCms5Y052LVTcGwLNW/48A3bFFXFnarM4X+/qib39mwtU4=;
X-YMail-OSG: zbnq8AYVM1kp88isd.UrFoHh2CZ2whQ5tQ3VG8oPcms1bCE
 ojvF3apaJNI_Hr6Xcnr8VeGuEl_FMxcDJV2L95TR_ypCdx4jYX2f5TyeOMHL
 UF86OtcqpcoDjBRnfFgRZMBmsjfgCHi98D4gOLrY_WhVuZvybA1LACqPpamf
 ZMv0eQUfuO19JTDHCsDPRcpgNGEvTxNHT6WVJoIJwuC729UlHaQ7GMRXR4.W
 5L17PEsvGuDZGjxq8Gc1XgW3BBly6JGrxOm0oyXK.EPI1KKZyZ9LrhuWCGH4
 dZ66MsLY4zrIr3EwpHv_AK.89mtrc9w5Lg.F4fFdNgxqeKt5D11iosT4up0F
 A76jCZWNVKAsn5g5emfiwul22nDocvldH8e0g1QOou4LVhLw1Mu7lHYtbPql
 Q_4pvI.w7hbDVq3l1RstYM7eJ3CEZBcvNKNk4qxxHxIJCf42JJSiAxspEIGL
 YSeTiUpNd3t5gzHYO3y5DBg--
Received: from [87.202.5.142] by web122303.mail.ne1.yahoo.com via HTTP; Wed, 04 Apr 2012 09:56:10 PDT
X-Mailer: YahooMailWebService/0.8.117.340979
References: <1333557924.34311.YahooMailNeo@web122305.mail.ne1.yahoo.com> <7f3f1647-0219-48da-a950-570a3c0461cb@arizona.hanik.com>
Message-ID: <1333558570.29161.YahooMailNeo@web122303.mail.ne1.yahoo.com>
Date: Wed, 4 Apr 2012 09:56:10 -0700 (PDT)
From: Hermes Flying <flyinghermes@yahoo.com>
Reply-To: Hermes Flying <flyinghermes@yahoo.com>
Subject: Re: Discrepancy between Tomcat's connection pool and tomcat's report on memory leaks
To: Filip Hanik Mailing Lists <devlists@hanik.com>,
  Tomcat Users List <users@tomcat.apache.org>
In-Reply-To: <7f3f1647-0219-48da-a950-570a3c0461cb@arizona.hanik.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="-1062763926-2079516396-1333558570=:29161"
X-Virus-Checked: Checked by ClamAV on apache.org

---1062763926-2079516396-1333558570=:29161
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Ok. So how is the configuration parameter fixing my problem? Would you plea=
se explain this to me to undestand how this works?=0A=0A =0A=0A____________=
____________________=0A From: Filip Hanik Mailing Lists <devlists@hanik.com=
>=0ATo: Tomcat Users List <users@tomcat.apache.org>; Hermes Flying <flyingh=
ermes@yahoo.com> =0ASent: Wednesday, April 4, 2012 7:50 PM=0ASubject: Re: D=
iscrepancy between Tomcat's connection pool and tomcat's report on memory l=
eaks=0A  =0Ano, that would happen if you set maxIdle=3D0, not minIdle=0A=0A=
----- Original Message -----=0A> From: "Hermes Flying" <flyinghermes@yahoo.=
com>=0A> To: "Tomcat Users List" <users@tomcat.apache.org>=0A> Sent: Wednes=
day, April 4, 2012 10:45:24 AM=0A> Subject: Re: Discrepancy between Tomcat'=
s connection pool and tomcat's report on memory leaks=0A>=0A> But if I set =
'minIdle=3D0' all the connections would close imediatelly,=0A> right?=0A> S=
o why would I need a connection pool in the first place if I do=0A> this?=
=0A>=0A>=0A> ________________________________=0A>=A0 From: Filip Hanik Mail=
ing Lists <devlists@hanik.com>=0A> To: Tomcat Users List <users@tomcat.apac=
he.org>=0A> Sent: Wednesday, April 4, 2012 7:28 PM=0A> Subject: Re: Discrep=
ancy between Tomcat's connection pool and=0A> tomcat's report on memory lea=
ks=0A>=0A> just set minIdle=3D0 and enable the eviction process to take car=
e of=0A> it.=0A>=0A> Filip=0A>=0A>=0A> ----- Original Message -----=0A> > F=
rom: "Hermes Flying" <flyinghermes@yahoo.com>=0A> > To: "Daniel Mikusa" <dm=
ikusa@vmware.com>=0A> > Cc: users@tomcat.apache.org=0A> > Sent: Wednesday, =
April 4, 2012 9:53:30 AM=0A> > Subject: Re: Discrepancy between Tomcat's co=
nnection pool and=0A> > tomcat's report on memory leaks=0A> >=0A> > >>Which=
 is indicating that the application deployed to=0A> > >>"/GeneralApplicatio=
n" is creating a thread named "H2 Log Writer=0A> > >>>>GENERICAPPLICATION" =
and never stopping it.=A0 I do not believe=0A> > >>that this would be assoc=
iated with the pool created by Tomcat as=0A> > >>that would >>be created as=
 a global resource available to all=0A> > >>applications and not specific t=
o "/GeneralApplication".=0A> > >>I can't really say a whole lot more about =
what is going on, just=0A> > >>that this strikes me as odd.=A0 If it were m=
y app, I'd dig into=0A> > >>this=0A> > >>more and see what is >>creating th=
at thread.=A0 Possibly with a=0A> > >>profiler or thread dumps.=0A> >=0A> >=
 What is happening here (as I undestand it is the following):=0A> > 1)=A0My=
 application=A0uses Tomcat's connection pool from the data=0A> > source=0A>=
 > 2) My application uses H2 as a file database. H2 starts=A0back end(s)=0A=
> > thread which is about logging (H2 logging) and possibly other tasks=0A>=
 > =A0and that is the thread that catalina complaints about=0A> > 3) H2 rem=
ains open as long as there are open connections and is=0A> > closed when th=
e last connection is released=0A> > 4) My application uses Tomcat's connect=
ion pool and as a result=0A> > Tomcat "decides" when the data source should=
 be disposed or when=0A> > connections are released (not my code).=0A> > 5)=
 I shutdown Tomcat.=0A> > 6) The connection pool of Tomcat has still connec=
tions (e.g. idle)=0A> > and so H2 does not shutdown. Hence it's lock file a=
nd related=0A> > background threads are still running.=0A> > 7) Tomcat shut=
s down my application but does not dispose off the=0A> > connection pool (y=
et). I believe this happens because of the way=0A> > Tomcat is being shut d=
own (as sequence of actions I mean).=0A> > 8) Since the connection pool has=
 not been disposed, there are still=0A> > connections and as a result H2 is=
 still running=0A> > 9) Tomcat's memory leak detection mechanism detects H2=
 threads=0A> > started from GenericApplication which uses H2 and gives the =
report=0A> > in catalina.out. So Tomcat gives the report first and then pro=
ceeds=0A> > with the shutdown (and this perhaps is not correct? I can't say=
)=0A> > 10) Tomcat eventually shuts down.=0A> > =A0=0A> > Is this scenario =
as I describe it, wrong?=0A> > Should I somehow have configured the datasou=
rce to be "associated"=0A> > with my web application instead of a generic d=
ata source? Why?=0A> > Should I have shut the data source myself? How?=0A> =
> If all what I describe is reasonable this seems to me like a=0A> > "racin=
g"=0A> > condition. How should I mediate this?=0A> >=0A> > Thank you for yo=
ur time.=0A> > =A0=0A> >=0A> > ________________________________=0A> >=A0 Fr=
om: Daniel Mikusa <dmikusa@vmware.com>=0A> > To: Hermes Flying <flyingherme=
s@yahoo.com>=0A> > Sent: Wednesday, April 4, 2012 5:14 PM=0A> > Subject: Re=
: Discrepancy between Tomcat's connection pool and=0A> > tomcat's report on=
 memory leaks=0A> >=0A> > ----- Original Message -----=0A> > >=0A> > >=0A> =
> > What I do is get the dataSource inside a ServletContextListener=0A> > >=
 and=0A> > > save it in servlet context (as part of a DAO Factory):=0A> > >=
=0A> > > public void contextInitialized(ServletContextEvent sce) {=0A> > >=
=0A> > > ServletContext context =3D sce.getServletContext();=0A> > > DataSo=
urce dataSource =3D null;=0A> > > try {=0A> > > dataSource =3D (DataSource)=
 new=0A> > > InitialContext().lookup("java:/comp/env/jdbc/GenericDataSource=
");=0A> > > context.setAttribute("daogenericfactory",=0A> > > DAOGenericFac=
tory.getInstance(dataSource));=0A> > >=0A> > > } catch (NamingException e) =
{=0A> > > e.printStackTrace();=0A> > > }=0A> > >=0A> > > }=0A> > >=0A> > >=
=0A> > > The DAOGenericFactory just returns specific DAO objects passing=0A=
> > > in=0A> > > their constructor the data source.=0A> > > Each DAO instan=
ce has an member variable of DataSource and for=0A> > > action=0A> > > to t=
he database I do in order to get a connection:=0A> > >=0A> > > public Conne=
ction getConnection() throws Exception{=0A> > > return dataSource.getConnec=
tion();=0A> > > }=0A> > >=0A> > >=0A> > > So I use the Connection this way =
and I always close the=0A> > > connections=0A> > > in order to be returned =
back to the pool.=0A> > > The only thing perhaps to mention is that I creat=
e new DAO=0A> > > objects=0A> > > passing this data source (I don't reuse i=
nstances of DAO).=0A> > > So I don't have a pool of my own. I just use DAO =
pattern .=0A> > > This is happening in my web application GeneralApplicatio=
n=0A> > > Is this information adequate/clear?=0A> >=0A> > Definitely clear.=
=A0 It just doesn't seem to match up with the output=0A> > from the log fil=
es.=A0 You're seeing=0A> >=0A> > =A0 =A0 SEVERE: The web application [/Gene=
ralApplication] appears to=0A> > =A0 =A0 have=0A> > =A0 =A0 started a threa=
d named [H2 Log Writer GENERICAPPLICATION] but=0A> > =A0 =A0 has=0A> > =A0 =
=A0 failed to stop it. This is very likely to create a memory leak.=0A> >=
=0A> > Which is indicating that the application deployed to=0A> > "/General=
Application" is creating a thread named "H2 Log Writer=0A> > GENERICAPPLICA=
TION" and never stopping it.=A0 I do not believe that=0A> > this would be a=
ssociated with the pool created by Tomcat as that=0A> > would be created as=
 a global resource available to all applications=0A> > and not specific to =
"/GeneralApplication".=0A> >=0A> > I can't really say a whole lot more abou=
t what is going on, just=0A> > that=0A> > this strikes me as odd.=A0 If it =
were my app, I'd dig into this more=0A> > and see what is creating that thr=
ead.=A0 Possibly with a profiler or=0A> > thread dumps.=0A> >=0A> >=0A> > >=
 Also how did you test it?=0A> >=0A> > I took a stock Tomcat 7 instance, ad=
ded the <Resource/> tag you=0A> > specified to server.xml and added the <Re=
sourceLink/> tag you=0A> > specified to context.xml.=A0 I then deployed a t=
est app that I have,=0A> > it's a simple Grails app that I routinely use to=
 test database=0A> > issues.=A0 It just uses the JNDI connection specified =
to do some=0A> > basic=0A> > database crud.=0A> >=0A> >=0A> > >Did you use =
H2?=0A> >=0A> > Yes.=A0 h2-1.3.161.jar=0A> >=0A> >=0A> > >Because I don't g=
et these errors in catalina.out intermittently=0A> > >but=0A> > >always.=0A=
> >=0A> > No errors in any of my log files.=A0 I tested stopping the Tomcat=
=0A> > instance, restarting it and undeploying the application.=0A> >=0A> >=
 Dan=0A> >=0A> >=0A> >=0A> > >=0A> > > Thank you=0A> > >=0A> > >=0A> > >=0A=
> > >=0A> > >=0A> > >=0A> > > From: Daniel Mikusa <dmikusa@vmware.com>=0A> =
> > To: Hermes Flying <flyinghermes@yahoo.com>=0A> > > Sent: Wednesday, Apr=
il 4, 2012 4:25 PM=0A> > > Subject: Re: Discrepancy between Tomcat's connec=
tion pool and=0A> > > tomcat's report on memory leaks=0A> > >=0A> > > -----=
 Original Message -----=0A> > > >=0A> > > >=0A> > > > Hi Dan,=0A> > > >=0A>=
 > > >=0A> > > > The following entry is in server.xml=0A> > > >=0A> > > > <=
Resource name=3D"jdbc_GENERIS_RS" auth=3D"Container"=0A> > > > type=3D"java=
x.sql.DataSource"=0A> > > > driverClassName=3D"org.h2.Driver"=0A> > > > url=
=3D"jdbc:h2:file:/opt/en/repos/tomcat/webapps/GeneralApplication/db/interna=
ldatabase;SCHEMA=3Dgenericschema"=0A> > > > username=3D"root" password=3D"s=
a"=0A> > > > maxActive=3D"20" maxIdle=3D"10" maxWait=3D"-1"=0A> > > > />=0A=
> > > >=0A> > > >=0A> > > > And the following entry is under $TOMCAT_HOME/c=
onf/context.xml=0A> > > >=0A> > > > <ResourceLink name=3D"jdbc/GenericDataS=
ource"=0A> > > > global=3D"jdbc_GENERIS_RS"=0A> > > > type=3D"javax.sql.Dat=
aSource"/>=0A> > > >=0A> > > >=0A> > > >=0A> > > > Do you need more details=
 than these?=0A> > > >=0A> > > >=0A> > >=0A> > > Seems a little weird. The =
message is indicating that the threads=0A> > > which have not stopped resid=
e in the application=0A> > > "[/GeneralApplication]". This would seem to im=
ply that the=0A> > > connection pool was created by the application. The co=
nfiguration=0A> > > that you've specified here would have the container cre=
ating the=0A> > > connection pool, which shouldn't trigger messages like th=
is.=0A> > >=0A> > > Are you sure your application is not creating a connect=
ion pool?=0A> > >=0A> > > As a side note, I tried the configuration you men=
tioned in a=0A> > > local=0A> > > Tomcat instance and it worked fine, no er=
rors.=0A> > >=0A> > > Dan=0A> > >=0A> > >=0A> > > >=0A> > > >=0A> > > >=0A>=
 > > >=0A> > > >=0A> > > >=0A> > > >=0A> > > > From: Daniel Mikusa < dmikus=
a@vmware.com >=0A> > > > To: Tomcat Users List < users@tomcat.apache.org >=
=0A> > > > Sent: Wednesday, April 4, 2012 3:35 PM=0A> > > > Subject: Re: Di=
screpancy between Tomcat's connection pool and=0A> > > > tomcat's report on=
 memory leaks=0A> > > >=0A> > > >=0A> > > >=0A> > > > ----- Original Messag=
e -----=0A> > > > > Hi,=0A> > > > >=0A> > > > > I am using Tomcat 7.0.25 in=
 a Linux machine=0A> > > > >=0A> > > > > I am using Tomcat's connection poo=
l=0A> > > > > (org.apache.tomcat.dbcp.dbcp.BasicDataSource). As database I=
=0A> > > > > am=0A> > > > > using H2 as a file database.=0A> > > >=0A> > > =
> Where are you defining the connection pool? Can you include=0A> > > > you=
r=0A> > > > configuration?=0A> > > >=0A> > > > Dan=0A> > > >=0A> > > >=0A> =
> > > > All is ok, but I have the following problem.=0A> > > > > On shutdow=
n of Tomcat I see in catalina.out:=0A> > > > >=0A> > > > >=0A> > > > > SEVE=
RE: The web application [/GeneralApplication] appears to=0A> > > > > have=
=0A> > > > > started a thread named [H2 Log Writer GENERICAPPLICATION] but=
=0A> > > > > has=0A> > > > > failed to stop it. This is very likely to crea=
te a memory=0A> > > > > leak.=0A> > > > > Apr 4, 2012 2:32:54 PM=0A> > > > =
> org.apache.catalina.loader.WebappClassLoader=0A> > > > > clearReferencesT=
hreads=0A> > > > > SEVERE: The web application [/GeneralApplication] appear=
s to=0A> > > > > have=0A> > > > > started a thread named [H2 File Lock Watc=
hdog=0A> > > > > /opt/en/repos/tomcat/webapps/GeneralApplication/db/interna=
ldatabase.lock.db]=0A> > > > > but has failed to stop it. This is very like=
ly to create a=0A> > > > > memory=0A> > > > > leak.=0A> > > > >=0A> > > > >=
 Why do I get these messages?=0A> > > > > As I understand these messages, H=
2 is still running on=0A> > > > > shutdown=0A> > > > > and=0A> > > > > the =
documentation they have says that the database will=0A> > > > > shutdown=0A=
> > > > > once the last connection is closed (and the connections are=0A> >=
 > > > handled=0A> > > > > by the pool i.e. Tomcat)=0A> > > > >=0A> > > > >=
 Additionally the input from H2 dev is that these messages are=0A> > > > > =
a=0A> > > > > Tomcat problem. Tomcat should have first disposed of the=0A> =
> > > > connection=0A> > > > > pool and then log the running threads.Their =
explanation seem=0A> > > > > correct=0A> > > > > to me.=0A> > > > >=0A> > >=
 > > Is this a known issue? Why do I see these errors in catalina?=0A> > > =
> > Should=0A> > > > > I somehow dispose off the connection pool myself?=0A=
> > > > >=0A> > > > > Thank you for your time=0A> > > > > Best Regards,=0A>=
 > > > > FH=0A> > > > >=0A> > > >=0A> > > > -------------------------------=
--------------------------------------=0A> > > > To unsubscribe, e-mail: us=
ers-unsubscribe@tomcat.apache.org=0A> > > > For additional commands, e-mail=
: users-help@tomcat.apache.org=0A> > > >=0A> > > >=0A> > > >=0A> > > >=0A> =
> >=0A> > >=0A> > >=0A>=0A> -----------------------------------------------=
----------------------=0A> To unsubscribe, e-mail: users-unsubscribe@tomcat=
.apache.org=0A> For additional commands, e-mail: users-help@tomcat.apache.o=
rg
---1062763926-2079516396-1333558570=:29161--

From users-return-233351-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 17:06:26 2012
Return-Path: <users-return-233351-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AB84B9533
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 17:06:26 +0000 (UTC)
Received: (qmail 33870 invoked by uid 500); 4 Apr 2012 17:06:23 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 33660 invoked by uid 500); 4 Apr 2012 17:06:23 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 33647 invoked by uid 99); 4 Apr 2012 17:06:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 17:06:23 +0000
X-ASF-Spam-Status: No, hits=1.2 required=5.0
	tests=MISSING_HEADERS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [66.160.196.165] (HELO arizona.hanik.com) (66.160.196.165)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 17:06:15 +0000
Received: from arizona.hanik.com (arizona.hanik.com [66.160.196.165])
	by arizona.hanik.com (Postfix) with ESMTP id 565F6A7E011B
	for <users@tomcat.apache.org>; Wed,  4 Apr 2012 11:03:02 -0600 (MDT)
Date: Wed, 04 Apr 2012 11:03:02 -0600 (MDT)
From: Filip Hanik Mailing Lists <devlists@hanik.com>
Cc: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Discrepancy between Tomcat's connection pool and tomcat's report on memory leaks
Message-ID: <5918aef8-434c-43df-b1dc-cedc349fe5db@arizona.hanik.com>
In-Reply-To: <1333558570.29161.YahooMailNeo@web122303.mail.ne1.yahoo.com>
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
MIME-Version: 1.0
X-Originating-IP: [144.230.82.43]
X-Mailer: Zimbra 7.1.1_GA_3196 (ZimbraWebClient - FF3.0 (Mac)/7.1.1_GA_3196)

The real fix to your problem should have been

<Resource type="javax.sql.DataSource" closeMethod="close" .../> (available in Tomcat 7)

If I understand the problem you're having is two fold
1. you see reports about memory leaks
"started a thread named [H2 File Lock Watchdog" you should be able to fix this by setting initialSize>0 so that the thread is started using the main class loader when tomcat starts, not when an app starts using the pool.
(Tomcat 7's jdbc-pool does this automatically from 7.0.27 onwards, regardless of configuration)

2. The connection pool is not closed properly, again, this is addressed in the top of this email.

letting the pool eventually shrink to 0, is merely a work around, but I realize it will NOT work. H2 is starting it's own thread, there is no way around this, unless there is way to shut down this thread. Maybe this shuts down if all connections are closed.

Filip

----- Original Message -----
> From: "Hermes Flying" <flyinghermes@yahoo.com>
> To: "Filip Hanik Mailing Lists" <devlists@hanik.com>, "Tomcat Users List" <users@tomcat.apache.org>
> Sent: Wednesday, April 4, 2012 10:56:10 AM
> Subject: Re: Discrepancy between Tomcat's connection pool and tomcat's report on memory leaks
> 
> 
> 
> Ok. So how is the configuration parameter fixing my problem? Would
> you please explain this to me to undestand how this works?
> 
> 
> 
> 
> 
> From: Filip Hanik Mailing Lists <devlists@hanik.com>
> To: Tomcat Users List <users@tomcat.apache.org>; Hermes Flying
> <flyinghermes@yahoo.com>
> Sent: Wednesday, April 4, 2012 7:50 PM
> Subject: Re: Discrepancy between Tomcat's connection pool and
> tomcat's report on memory leaks
> 
> no, that would happen if you set maxIdle=0, not minIdle
> 
> ----- Original Message -----
> > From: "Hermes Flying" < flyinghermes@yahoo.com >
> > To: "Tomcat Users List" < users@tomcat.apache.org >
> > Sent: Wednesday, April 4, 2012 10:45:24 AM
> > Subject: Re: Discrepancy between Tomcat's connection pool and
> > tomcat's report on memory leaks
> > 
> > But if I set 'minIdle=0' all the connections would close
> > imediatelly,
> > right?
> > So why would I need a connection pool in the first place if I do
> > this?
> > 
> > 
> > ________________________________
> > From: Filip Hanik Mailing Lists < devlists@hanik.com >
> > To: Tomcat Users List < users@tomcat.apache.org >
> > Sent: Wednesday, April 4, 2012 7:28 PM
> > Subject: Re: Discrepancy between Tomcat's connection pool and
> > tomcat's report on memory leaks
> > 
> > just set minIdle=0 and enable the eviction process to take care of
> > it.
> > 
> > Filip
> > 
> > 
> > ----- Original Message -----
> > > From: "Hermes Flying" < flyinghermes@yahoo.com >
> > > To: "Daniel Mikusa" < dmikusa@vmware.com >
> > > Cc: users@tomcat.apache.org
> > > Sent: Wednesday, April 4, 2012 9:53:30 AM
> > > Subject: Re: Discrepancy between Tomcat's connection pool and
> > > tomcat's report on memory leaks
> > > 
> > > >>Which is indicating that the application deployed to
> > > >>"/GeneralApplication" is creating a thread named "H2 Log Writer
> > > >>>>GENERICAPPLICATION" and never stopping it. I do not believe
> > > >>that this would be associated with the pool created by Tomcat
> > > >>as
> > > >>that would >>be created as a global resource available to all
> > > >>applications and not specific to "/GeneralApplication".
> > > >>I can't really say a whole lot more about what is going on,
> > > >>just
> > > >>that this strikes me as odd. If it were my app, I'd dig into
> > > >>this
> > > >>more and see what is >>creating that thread. Possibly with a
> > > >>profiler or thread dumps.
> > > 
> > > What is happening here (as I undestand it is the following):
> > > 1) My application uses Tomcat's connection pool from the data
> > > source
> > > 2) My application uses H2 as a file database. H2 starts back
> > > end(s)
> > > thread which is about logging (H2 logging) and possibly other
> > > tasks
> > > and that is the thread that catalina complaints about
> > > 3) H2 remains open as long as there are open connections and is
> > > closed when the last connection is released
> > > 4) My application uses Tomcat's connection pool and as a result
> > > Tomcat "decides" when the data source should be disposed or when
> > > connections are released (not my code).
> > > 5) I shutdown Tomcat.
> > > 6) The connection pool of Tomcat has still connections (e.g.
> > > idle)
> > > and so H2 does not shutdown. Hence it's lock file and related
> > > background threads are still running.
> > > 7) Tomcat shuts down my application but does not dispose off the
> > > connection pool (yet). I believe this happens because of the way
> > > Tomcat is being shut down (as sequence of actions I mean).
> > > 8) Since the connection pool has not been disposed, there are
> > > still
> > > connections and as a result H2 is still running
> > > 9) Tomcat's memory leak detection mechanism detects H2 threads
> > > started from GenericApplication which uses H2 and gives the
> > > report
> > > in catalina.out. So Tomcat gives the report first and then
> > > proceeds
> > > with the shutdown (and this perhaps is not correct? I can't say)
> > > 10) Tomcat eventually shuts down.
> > > 
> > > Is this scenario as I describe it, wrong?
> > > Should I somehow have configured the datasource to be
> > > "associated"
> > > with my web application instead of a generic data source? Why?
> > > Should I have shut the data source myself? How?
> > > If all what I describe is reasonable this seems to me like a
> > > "racing"
> > > condition. How should I mediate this?
> > > 
> > > Thank you for your time.
> > > 
> > > 
> > > ________________________________
> > > From: Daniel Mikusa < dmikusa@vmware.com >
> > > To: Hermes Flying < flyinghermes@yahoo.com >
> > > Sent: Wednesday, April 4, 2012 5:14 PM
> > > Subject: Re: Discrepancy between Tomcat's connection pool and
> > > tomcat's report on memory leaks
> > > 
> > > ----- Original Message -----
> > > > 
> > > > 
> > > > What I do is get the dataSource inside a ServletContextListener
> > > > and
> > > > save it in servlet context (as part of a DAO Factory):
> > > > 
> > > > public void contextInitialized(ServletContextEvent sce) {
> > > > 
> > > > ServletContext context = sce.getServletContext();
> > > > DataSource dataSource = null;
> > > > try {
> > > > dataSource = (DataSource) new
> > > > InitialContext().lookup("java:/comp/env/jdbc/GenericDataSource");
> > > > context.setAttribute("daogenericfactory",
> > > > DAOGenericFactory.getInstance(dataSource));
> > > > 
> > > > } catch (NamingException e) {
> > > > e.printStackTrace();
> > > > }
> > > > 
> > > > }
> > > > 
> > > > 
> > > > The DAOGenericFactory just returns specific DAO objects passing
> > > > in
> > > > their constructor the data source.
> > > > Each DAO instance has an member variable of DataSource and for
> > > > action
> > > > to the database I do in order to get a connection:
> > > > 
> > > > public Connection getConnection() throws Exception{
> > > > return dataSource.getConnection();
> > > > }
> > > > 
> > > > 
> > > > So I use the Connection this way and I always close the
> > > > connections
> > > > in order to be returned back to the pool.
> > > > The only thing perhaps to mention is that I create new DAO
> > > > objects
> > > > passing this data source (I don't reuse instances of DAO).
> > > > So I don't have a pool of my own. I just use DAO pattern .
> > > > This is happening in my web application GeneralApplication
> > > > Is this information adequate/clear?
> > > 
> > > Definitely clear. It just doesn't seem to match up with the
> > > output
> > > from the log files. You're seeing
> > > 
> > > SEVERE: The web application [/GeneralApplication] appears to
> > > have
> > > started a thread named [H2 Log Writer GENERICAPPLICATION] but
> > > has
> > > failed to stop it. This is very likely to create a memory leak.
> > > 
> > > Which is indicating that the application deployed to
> > > "/GeneralApplication" is creating a thread named "H2 Log Writer
> > > GENERICAPPLICATION" and never stopping it. I do not believe that
> > > this would be associated with the pool created by Tomcat as that
> > > would be created as a global resource available to all
> > > applications
> > > and not specific to "/GeneralApplication".
> > > 
> > > I can't really say a whole lot more about what is going on, just
> > > that
> > > this strikes me as odd. If it were my app, I'd dig into this more
> > > and see what is creating that thread. Possibly with a profiler or
> > > thread dumps.
> > > 
> > > 
> > > > Also how did you test it?
> > > 
> > > I took a stock Tomcat 7 instance, added the <Resource/> tag you
> > > specified to server.xml and added the <ResourceLink/> tag you
> > > specified to context.xml. I then deployed a test app that I have,
> > > it's a simple Grails app that I routinely use to test database
> > > issues. It just uses the JNDI connection specified to do some
> > > basic
> > > database crud.
> > > 
> > > 
> > > >Did you use H2?
> > > 
> > > Yes. h2-1.3.161.jar
> > > 
> > > 
> > > >Because I don't get these errors in catalina.out intermittently
> > > >but
> > > >always.
> > > 
> > > No errors in any of my log files. I tested stopping the Tomcat
> > > instance, restarting it and undeploying the application.
> > > 
> > > Dan
> > > 
> > > 
> > > 
> > > > 
> > > > Thank you
> > > > 
> > > > 
> > > > 
> > > > 
> > > > 
> > > > 
> > > > From: Daniel Mikusa < dmikusa@vmware.com >
> > > > To: Hermes Flying < flyinghermes@yahoo.com >
> > > > Sent: Wednesday, April 4, 2012 4:25 PM
> > > > Subject: Re: Discrepancy between Tomcat's connection pool and
> > > > tomcat's report on memory leaks
> > > > 
> > > > ----- Original Message -----
> > > > > 
> > > > > 
> > > > > Hi Dan,
> > > > > 
> > > > > 
> > > > > The following entry is in server.xml
> > > > > 
> > > > > <Resource name="jdbc_GENERIS_RS" auth="Container"
> > > > > type="javax.sql.DataSource"
> > > > > driverClassName="org.h2.Driver"
> > > > > url="jdbc:h2:file:/opt/en/repos/tomcat/webapps/GeneralApplication/db/internaldatabase;SCHEMA=genericschema"
> > > > > username="root" password="sa"
> > > > > maxActive="20" maxIdle="10" maxWait="-1"
> > > > > />
> > > > > 
> > > > > 
> > > > > And the following entry is under
> > > > > $TOMCAT_HOME/conf/context.xml
> > > > > 
> > > > > <ResourceLink name="jdbc/GenericDataSource"
> > > > > global="jdbc_GENERIS_RS"
> > > > > type="javax.sql.DataSource"/>
> > > > > 
> > > > > 
> > > > > 
> > > > > Do you need more details than these?
> > > > > 
> > > > > 
> > > > 
> > > > Seems a little weird. The message is indicating that the
> > > > threads
> > > > which have not stopped reside in the application
> > > > "[/GeneralApplication]". This would seem to imply that the
> > > > connection pool was created by the application. The
> > > > configuration
> > > > that you've specified here would have the container creating
> > > > the
> > > > connection pool, which shouldn't trigger messages like this.
> > > > 
> > > > Are you sure your application is not creating a connection
> > > > pool?
> > > > 
> > > > As a side note, I tried the configuration you mentioned in a
> > > > local
> > > > Tomcat instance and it worked fine, no errors.
> > > > 
> > > > Dan
> > > > 
> > > > 
> > > > > 
> > > > > 
> > > > > 
> > > > > 
> > > > > 
> > > > > 
> > > > > 
> > > > > From: Daniel Mikusa < dmikusa@vmware.com >
> > > > > To: Tomcat Users List < users@tomcat.apache.org >
> > > > > Sent: Wednesday, April 4, 2012 3:35 PM
> > > > > Subject: Re: Discrepancy between Tomcat's connection pool and
> > > > > tomcat's report on memory leaks
> > > > > 
> > > > > 
> > > > > 
> > > > > ----- Original Message -----
> > > > > > Hi,
> > > > > > 
> > > > > > I am using Tomcat 7.0.25 in a Linux machine
> > > > > > 
> > > > > > I am using Tomcat's connection pool
> > > > > > (org.apache.tomcat.dbcp.dbcp.BasicDataSource). As database
> > > > > > I
> > > > > > am
> > > > > > using H2 as a file database.
> > > > > 
> > > > > Where are you defining the connection pool? Can you include
> > > > > your
> > > > > configuration?
> > > > > 
> > > > > Dan
> > > > > 
> > > > > 
> > > > > > All is ok, but I have the following problem.
> > > > > > On shutdown of Tomcat I see in catalina.out:
> > > > > > 
> > > > > > 
> > > > > > SEVERE: The web application [/GeneralApplication] appears
> > > > > > to
> > > > > > have
> > > > > > started a thread named [H2 Log Writer GENERICAPPLICATION]
> > > > > > but
> > > > > > has
> > > > > > failed to stop it. This is very likely to create a memory
> > > > > > leak.
> > > > > > Apr 4, 2012 2:32:54 PM
> > > > > > org.apache.catalina.loader.WebappClassLoader
> > > > > > clearReferencesThreads
> > > > > > SEVERE: The web application [/GeneralApplication] appears
> > > > > > to
> > > > > > have
> > > > > > started a thread named [H2 File Lock Watchdog
> > > > > > /opt/en/repos/tomcat/webapps/GeneralApplication/db/internaldatabase.lock.db]
> > > > > > but has failed to stop it. This is very likely to create a
> > > > > > memory
> > > > > > leak.
> > > > > > 
> > > > > > Why do I get these messages?
> > > > > > As I understand these messages, H2 is still running on
> > > > > > shutdown
> > > > > > and
> > > > > > the documentation they have says that the database will
> > > > > > shutdown
> > > > > > once the last connection is closed (and the connections are
> > > > > > handled
> > > > > > by the pool i.e. Tomcat)
> > > > > > 
> > > > > > Additionally the input from H2 dev is that these messages
> > > > > > are
> > > > > > a
> > > > > > Tomcat problem. Tomcat should have first disposed of the
> > > > > > connection
> > > > > > pool and then log the running threads.Their explanation
> > > > > > seem
> > > > > > correct
> > > > > > to me.
> > > > > > 
> > > > > > Is this a known issue? Why do I see these errors in
> > > > > > catalina?
> > > > > > Should
> > > > > > I somehow dispose off the connection pool myself?
> > > > > > 
> > > > > > Thank you for your time
> > > > > > Best Regards,
> > > > > > FH
> > > > > > 
> > > > > 
> > > > > ---------------------------------------------------------------------
> > > > > To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> > > > > For additional commands, e-mail: users-help@tomcat.apache.org
> > > > > 
> > > > > 
> > > > > 
> > > > > 
> > > > 
> > > > 
> > > > 
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> > For additional commands, e-mail: users-help@tomcat.apache.org
> 
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233352-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 17:13:01 2012
Return-Path: <users-return-233352-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 291AD97DE
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 17:13:01 +0000 (UTC)
Received: (qmail 58690 invoked by uid 500); 4 Apr 2012 17:12:57 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 58510 invoked by uid 500); 4 Apr 2012 17:12:57 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 58501 invoked by uid 99); 4 Apr 2012 17:12:57 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 17:12:57 +0000
Received: from localhost (HELO [192.168.23.9]) (127.0.0.1)
  (smtp-auth username markt, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 17:12:57 +0000
Message-ID: <4F7C810F.9030002@apache.org>
Date: Wed, 04 Apr 2012 18:12:47 +0100
From: Mark Thomas <markt@apache.org>
User-Agent: Mozilla/5.0 (Windows NT 5.2; WOW64; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Discrepancy between Tomcat's connection pool and tomcat's report
 on memory leaks
References: <1333541107.27592.YahooMailNeo@web122304.mail.ne1.yahoo.com> <4F7C420C.8070401@pidster.com> <1333544069.69754.YahooMailNeo@web122303.mail.ne1.yahoo.com> <4F7C6BDF.9080006@apache.org> <1333556061.12060.YahooMailNeo@web122304.mail.ne1.yahoo.com>
In-Reply-To: <1333556061.12060.YahooMailNeo@web122304.mail.ne1.yahoo.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

On 04/04/2012 17:14, Hermes Flying wrote:
> Hi Mark,thank you for your reply. 2 questions related your mail 1)I 
> don't understand what you are saying here: "but as of 7.0.12 yo an 
> set the closeMethod for a resource that should be the name of a zero 
> atg method to call to shut down the resource". Could you please 
> explain or send a link to a reference on what you are talking about 
> here?

http://tomcat.apache.org/tomcat-7.0-doc/config/context.html#Resource_Definitions


> 2)Concerning your comment concerning the class loaders and H2. 
> I didn't mention that the H2 driver is under $TOMCAT_HOME/lib. Does 
> this make a difference in the behavior you describe?
Nope. If you are using Tomcat's connection pooling that is where the
driver has to be located.

> I mean the JDBC driver would not be unloaded with the web application, right?
Correct.

> So is this an issue?
No.

> Should I have placed the H2 driver under WEB-INF/lib? 
Not if you wanted to use Tomcat's connection pooling.

> I can do that but then from my point of view Tomcat's setup has many 
> exception/corner cases and the setup is not "uniform" but requires 
> some background knowledge of the implementation of Tomcat
No you can't since then you can't use Tomcat's connection pooling.


> Also as mentioned to Dan:
> 
> My undestanding of what is happening here is the following 1) My 
> application uses Tomcat's connection pool from the data source 2) My 
> application uses H2 as a file database. H2 starts back end(s) thread 
> which is about logging (H2 logging) and possibly other tasks and
> that is the thread that catalina complaints about 3) H2 remains open
> as long as there are open connections and is closed when the last 
> connection is released 4) My application uses Tomcat's connection 
> pool and as a result Tomcat "decides" when the data source should be 
> disposed or when connections are released (not my code). 5) I 
> shutdown Tomcat. 6) The connection pool of Tomcat has still 
> connections (e.g. idle) and so H2 does not shutdown. Hence it's lock 
> file and related background threads are still running. 7) Tomcat 
> shuts down my application but does not dispose off the connection 
> pool (yet). I believe this happens because of the way Tomcat is
> being shut down (as sequence of actions I mean). 8) Since the
> connection pool has not been disposed, there are still connections
> and as a result H2 is still running 9) Tomcat's memory leak
> detection mechanism detects H2 threads started from
> GenericApplication which uses H2 and gives the report in
> catalina.out. So Tomcat gives the report first and then proceeds with
> the shutdown (and this perhaps is not correct? I can't say) 10)
> Tomcat eventually shuts down.
> 
> Is this scenario as I describe it, wrong?

It is mostly right but misses the point that threads started by the JDBC
driver have the web application's class loader as their context class
loader when they should have the class loader used to load the JDBC
driver. That is a bug in the JDBC driver.

> Should I somehow have configured the datasource to be "associated" with my web application 
> instead of a generic data source?
No.

> Why?
N/A

> Should I have shut the data source myself?
No.

How?
N/A.

If all what I describe is reasonable this seems to me like a "racing"
condition.
Nope. It is a memory leak in the JDBC driver which is why Tomcat is
reporting it. When a web application shuts down, nothing should be
retaining a reference to the web application class loader. That the JDBC
driver does, is a bug in the JDBC driver.

> How should I mediate this?
Get back to the H2 folks and provide them with a link to this thread. If
they still insist that there is no bug in their driver, either live with
the bug or find an alternative driver and/or database.

Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233353-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 17:15:53 2012
Return-Path: <users-return-233353-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C3285993A
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 17:15:53 +0000 (UTC)
Received: (qmail 71716 invoked by uid 500); 4 Apr 2012 17:15:49 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 71658 invoked by uid 500); 4 Apr 2012 17:15:49 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 71649 invoked by uid 99); 4 Apr 2012 17:15:49 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 17:15:49 +0000
Received: from localhost (HELO [192.168.23.9]) (127.0.0.1)
  (smtp-auth username markt, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 17:15:49 +0000
Message-ID: <4F7C81BB.1040804@apache.org>
Date: Wed, 04 Apr 2012 18:15:39 +0100
From: Mark Thomas <markt@apache.org>
User-Agent: Mozilla/5.0 (Windows NT 5.2; WOW64; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Bug in Tomcat AJP Connector?
References: <217DDBC2BB1E394CA9E7446337CBDEF20102DEDB4F4A@il-ex01.ad.checkpoint.com>
In-Reply-To: <217DDBC2BB1E394CA9E7446337CBDEF20102DEDB4F4A@il-ex01.ad.checkpoint.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

On 04/04/2012 17:02, Ofer Israeli wrote:
> Hi all,
> 
> We have recently witnessed a strange situation.  Our Tomcat (6.0.35)
> listens on 2 ports: 8080 and 8009, handling HTTP and AJP
> respectively.  At some point in time we found that Apache is replying
> HTTP 503s to all clients and a look at netstat showed that indeed
> Apache could not communicate with Tomcat - there were many
> connections in state SYN_SENT, that were never replied.  A test of
> attempting to connect to Tomcat's 8009 port turned out to give the
> same result, so the issue was obviously in Tomcat and not Apache.
> But netstat also showed that Tomcat was listening on port 8009.
> After digging into the logs, we found that there was an Out of Memory
> exception in the JK's accept() sequence and once this exception was
> caught there was a message of "terminating thread".
> 
> So although the exception is caught and handled by killing the thread
> (isn't that a little drastic?), the socket isn't closed beforehand
> and thus the OS thinks that the port is still fine (in LISTENING
> state), as although the thread is dead, the process is alive.  Has
> anyone encountered this or knows if this bug is known?

Once you have an OOME all bets are off. The JVM needs to be restarted.
There is no guarantee of reliable operation after an OOME.

Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233354-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 17:39:06 2012
Return-Path: <users-return-233354-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 587539E33
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 17:39:06 +0000 (UTC)
Received: (qmail 45693 invoked by uid 500); 4 Apr 2012 17:39:03 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 45618 invoked by uid 500); 4 Apr 2012 17:39:02 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 45608 invoked by uid 99); 4 Apr 2012 17:39:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 17:39:02 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of llowder@oreillyauto.com designates 208.70.182.171 as permitted sender)
Received: from [208.70.182.171] (HELO domino1.oreillyauto.com) (208.70.182.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 17:38:56 +0000
MIME-Version: 1.0
In-Reply-To: <a89563d0-899f-4c83-9f5f-86ccc5c1c698@arizona.hanik.com>
Subject: Re: Tomcat6 thread pool questions
To: "Tomcat Users List" <users@tomcat.apache.org>
Message-ID: <OFB705DBE6.F0F3F5DB-ON862579D6.005FDEEE-862579D6.0060EA71@LocalDomain>
From: llowder@oreillyauto.com
Date: Wed, 4 Apr 2012 12:39:35 -0500
Content-type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: quoted-printable
References: <OF5AAEB29C.4417B5FC-ON862579D6.004B04E2-862579D6.004BEF1A@LocalDomain>
 <a89563d0-899f-4c83-9f5f-86ccc5c1c698@arizona.hanik.com>
X-KeepSent: B705DBE6:F0F3F5DB-862579D6:005FDEEE; name=$KeepSent; type=4
X-Mailer: Lotus Notes Release 8.5.1 September 28, 2009
X-Disclaimed: 29575
X-MIMETrack: CD-MIME by Router on domino1/OReilly(Release 8.5.3|September 15, 2011) at
 04/04/2012 12:38:56,CD-MIME complete at 04/04/2012 12:38:56,Itemize by Router on domino1/OReilly(Release 8.5.3|September 15, 2011) at
 04/04/2012 12:38:56
X-Virus-Checked: Checked by ClamAV on apache.org

Forgive me if my first message was unclear.

I have an executor and an AJP connector set up.

<Executor name=3D"tomcatThreadPool" namePrefix=3D"catalina-exec-"
maxThreads=3D"300" minSpareThreads=3D"30"/>

<Connector executor=3D"tomcatThreadPool" port=3D"8009"
           protocol=3D"org.apache.coyote.ajp.AjpProtocol"
           redirectPort=3D"8443"/>


When I watch it with psi-Probe, I can see that it is indeed killing idle
threads as I expect it to.  What I am not seeing is the minSpareThreads
attribute being honored as I expect it to, though it may very well be that
my understanding of how this is supposed to work is what is wrong.

When I monitor this, I do not see any spare threads being fired up in
advance, nor do I see the thread count being much more than 1 or 2 higher
than the busy thread count.

If I have minSpareThread set to 30, shouldn't that mean that the server
keeps at least 30 non active threads around?

Or is it that I am just looking at the wrong thing or using the wrong tool?

Lee Lowder
O'Reilly Auto Parts
Web Systems Administrator
(417) 862-2674 x1858

This communication and any attachments are confidential, protected by Commu=
nications Privacy Act 18 USCS =A7 2510, solely for the use of the intended =
recipient, and may contain legally privileged material. If you are not the =
intended recipient, please return or destroy it immediately. Thank you.
=

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233355-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 18:28:49 2012
Return-Path: <users-return-233355-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6C8F1924E
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 18:28:49 +0000 (UTC)
Received: (qmail 5941 invoked by uid 500); 4 Apr 2012 18:28:45 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 5872 invoked by uid 500); 4 Apr 2012 18:28:45 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 5863 invoked by uid 99); 4 Apr 2012 18:28:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 18:28:45 +0000
X-ASF-Spam-Status: No, hits=0.9 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [216.139.250.139] (HELO joe.nabble.com) (216.139.250.139)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 18:28:39 +0000
Received: from alf.nabble.com ([192.168.236.21])
	by joe.nabble.com with esmtp (Exim 4.72)
	(envelope-from <lmhelp1@orange.fr>)
	id 1SFUwN-0002te-5g
	for users@tomcat.apache.org; Wed, 04 Apr 2012 11:28:19 -0700
Date: Wed, 4 Apr 2012 11:28:19 -0700 (PDT)
From: =?UTF-8?Q?L=C3=A9a_Massiot?= <lmhelp1@orange.fr>
To: users@tomcat.apache.org
Message-ID: <1333564099167-4687332.post@n6.nabble.com>
In-Reply-To: <1333549942374-4686704.post@n6.nabble.com>
References: <1333360773430-4678428.post@n6.nabble.com> <CABzHfVn5uKEF9RKGUkqGGq56DLNFhRFm6Y_PUSUq--x3=yMpvw@mail.gmail.com> <1333363527730-4678513.post@n6.nabble.com> <4F7A11D7.80205@christopherschultz.net> <1333444940374-4681421.post@n6.nabble.com> <4F7AE221.10605@ice-sa.com> <1333549942374-4686704.post@n6.nabble.com>
Subject: Re: Tomcat6 - Context - aliases
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Ok. So, I found a solution, if I can call that a solution.

- I created a file "an_alias_1.xml" in "/etc/tomcat6/Catalina/localhost/"
(the OS being Debian Squeeze).

- Here are the contents of this "an_alias_1.xml" file:
< Context path="/an_alias_1" docBase="/home/d1" crossContext="true" / >

- This Configuration Descriptor is automatically deployed once saved.

- I suppressed the Webapp "w"'s "WEB-INF\context.xml" I had created.

- I redeployed the Webapp "w".

=> Now, when a user clicks on any link < a href="/an_alias_1/file_< i>.txt">
file_< i>.txt < /a>
it is successfully retrieved.

=> What is still problematic to me, is that, when the user clicks on a link,
the context or Webapp changes (from "w" to "an_alias_1").
The resources which are in "/home/d1" are available directly by typing the
following URL in a browser:
http://<hostname>:8080/an_alias_1/file_< i>.txt
and not compulsorily through the Webapp "w".

Best regards.

Ref. - a useful thread on stackoverflow: 
http://stackoverflow.com/questions/4575562/how-to-set-up-a-different-context-to-point-to-an-external-directory-outside-weba

--
View this message in context: http://tomcat.10.n6.nabble.com/Tomcat6-Context-aliases-tp4678430p4687332.html
Sent from the Tomcat - User mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233356-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 18:33:34 2012
Return-Path: <users-return-233356-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 42F889823
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 18:33:34 +0000 (UTC)
Received: (qmail 20868 invoked by uid 500); 4 Apr 2012 18:33:31 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 20814 invoked by uid 500); 4 Apr 2012 18:33:31 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 20800 invoked by uid 99); 4 Apr 2012 18:33:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 18:33:30 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [216.82.254.195] (HELO mail200.messagelabs.com) (216.82.254.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 18:33:21 +0000
X-Env-Sender: Chuck.Caldarale@unisys.com
X-Msg-Ref: server-2.tower-200.messagelabs.com!1333564379!6914902!9
X-Originating-IP: [192.61.61.105]
X-StarScan-Version: 6.5.5; banners=-,-,-
X-VirusChecked: Checked
Received: (qmail 10853 invoked from network); 4 Apr 2012 18:33:00 -0000
Received: from naedge.unisys.com (HELO USEA-NAEDGE2.unisys.com) (192.61.61.105)
  by server-2.tower-200.messagelabs.com with RC4-SHA encrypted SMTP; 4 Apr 2012 18:33:00 -0000
Received: from usea-nahubcas1.na.uis.unisys.com (129.224.76.114) by
 USEA-NAEDGE2.unisys.com (192.61.61.105) with Microsoft SMTP Server (TLS) id
 8.3.83.0; Wed, 4 Apr 2012 13:32:28 -0500
Received: from USEA-EXCH8.na.uis.unisys.com ([129.224.76.41]) by
 usea-nahubcas1.na.uis.unisys.com ([129.224.76.114]) with mapi; Wed, 4 Apr
 2012 13:32:28 -0500
From: "Caldarale, Charles R" <Chuck.Caldarale@unisys.com>
To: Tomcat Users List <users@tomcat.apache.org>
Date: Wed, 4 Apr 2012 13:32:27 -0500
Subject: RE: Tomcat6 - Context - aliases
Thread-Topic: Tomcat6 - Context - aliases
Thread-Index: Ac0SkMgKxUb3RBJmTU6PCJMJYeQyfwAAFBvA
Message-ID: <99C8B2929B39C24493377AC7A121E21FB016D1E5D9@USEA-EXCH8.na.uis.unisys.com>
References: <1333360773430-4678428.post@n6.nabble.com>
 <CABzHfVn5uKEF9RKGUkqGGq56DLNFhRFm6Y_PUSUq--x3=yMpvw@mail.gmail.com>
 <1333363527730-4678513.post@n6.nabble.com>
 <4F7A11D7.80205@christopherschultz.net>
 <1333444940374-4681421.post@n6.nabble.com> <4F7AE221.10605@ice-sa.com>
 <1333549942374-4686704.post@n6.nabble.com>
 <1333564099167-4687332.post@n6.nabble.com>
In-Reply-To: <1333564099167-4687332.post@n6.nabble.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

> From: L=E9a Massiot [mailto:lmhelp1@orange.fr]=20
> Subject: Re: Tomcat6 - Context - aliases

> Ok. So, I found a solution, if I can call that a solution.

How about a much easier solution: install Tomcat 7.  Easier to configure, f=
aster, and more secure.  Stop making your life difficult.

 - Chuck


THIS COMMUNICATION MAY CONTAIN CONFIDENTIAL AND/OR OTHERWISE PROPRIETARY MA=
TERIAL and is thus for use only by the intended recipient. If you received =
this in error, please contact the sender and delete the e-mail and its atta=
chments from all computers.


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233357-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 19:12:48 2012
Return-Path: <users-return-233357-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 56C269850
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 19:12:48 +0000 (UTC)
Received: (qmail 55429 invoked by uid 500); 4 Apr 2012 19:12:44 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 55373 invoked by uid 500); 4 Apr 2012 19:12:44 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 55364 invoked by uid 99); 4 Apr 2012 19:12:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 19:12:44 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (nike.apache.org: transitioning domain of dhaval.jaiswal@via.com does not designate 209.85.214.173 as permitted sender)
Received: from [209.85.214.173] (HELO mail-ob0-f173.google.com) (209.85.214.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 19:12:38 +0000
Received: by obbup19 with SMTP id up19so961492obb.18
        for <users@tomcat.apache.org>; Wed, 04 Apr 2012 12:12:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=via.com; s=google;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=pRgwCO/2+XpNZ43pNL3glk2zMb3cb/fX25Q84M42Jhs=;
        b=aG4dhpZShT86pRuOw87ZMRcwKplZ2eGLfRdatBY2rLzCrAs+9ge+k/ntVeqgEgERcz
         k2qaW4T4OMc/of0Np/+anr51tsIUHduECQ2MoNCSttBCpqmkIRr/aJ9CfNrIdHy5QpSY
         lY81cxUfNkURsrj26rx5fmBaYwMtHrUgi+Nm8=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:x-gm-message-state;
        bh=pRgwCO/2+XpNZ43pNL3glk2zMb3cb/fX25Q84M42Jhs=;
        b=bbd96aet+PVMqi00UFoYHQ1499f1R4reHh28NmUwoW1L56/JzI/ujOiYIfGg5HDTWE
         kVITimh1r4wkSrV+omxgLss06FW+3OP2eWObUW6pQM1b/x/yxbzb9vfpctzYcB/2HWdt
         3D1CezwQM+M6bA/ablU7vj9b7NvjOqQBKTI0tKY+u5A80sOTMjuQy9MoLsdj2I7irgvj
         lE+lwuIndvxJuY5f5smlXFrhV2rwW8gJf5nPZELhivLO0Ui9vzr/g74i7JtUq2dGZO0P
         Zy0xKn/gLkM0ZYN1dRVPfI9xTnLIzw8+ptwY7EBU0MmTYBC4yEa668dvtOQcnF1SKRHD
         qLqw==
MIME-Version: 1.0
Received: by 10.182.154.40 with SMTP id vl8mr4526016obb.25.1333566736814; Wed,
 04 Apr 2012 12:12:16 -0700 (PDT)
Received: by 10.182.209.34 with HTTP; Wed, 4 Apr 2012 12:12:16 -0700 (PDT)
In-Reply-To: <zarafa.4f7c651f.1095.7ca7df39672deef6@zarafix.ordix.de>
References: <zarafa.4f7c651f.1095.7ca7df39672deef6@zarafix.ordix.de>
Date: Thu, 5 Apr 2012 00:42:16 +0530
Message-ID: <CABKrPsNQN_2KjH_PLfE49aoXjqgc451yFZFs-a0e0g9S3hMLpw@mail.gmail.com>
Subject: Re: SEVERE: Unable to start cluster.
From: Dhaval Jaiswal <dhaval.jaiswal@via.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=f46d04479f0da1d23f04bcdf3361
X-Gm-Message-State: ALoCoQmF631pwfEQJM+d/7K7qZMDHOxJF6S+uczFxwtRy7+0Q/vtvVVTr8mw5jMfj8PSwBdRGzF5

--f46d04479f0da1d23f04bcdf3361
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Thanks to all for sharing info. I will test it & come back to you.

Also want to know that after starting session replication there will be a
huge logging in catalina.out for session information. How to minimize it ?

Below are the logs of catalina.out. As per the log it shows that it has
added member 192.168.3.18.

Now we have a tomcat cluster group from 192.168.3.5 to 192.168.3.11.
However it is trying to connect to the 192.168.3.18.


192.168.3.18 is the tomcat of another cluster. Where should i look into to
resolve this. Where to define this limit that it has to share the session
information from 192.168.3.5 to 192.168.3.11.



INFO: Replication member
added:org.apache.catalina.tribes.membership.MemberImpl[tcp://{-64, -88, 3,
18}:4000,{-64, -88, 3, 18},4000, alive=3D18507474,id=3D{25 -66 -54 110 84 -=
96
79 -74 -84 -106 122 -65 -121 9 -16 5 }, payload=3D{}, command=3D{}, domain=
=3D{}, ]
Apr 5, 2012 12:31:10 AM
org.apache.catalina.tribes.group.interceptors.TcpFailureDetector
performBasicCheck
INFO: Suspect member, confirmed
alive.[org.apache.catalina.tribes.membership.MemberImpl[tcp://{-64, -88, 3,
18}:4000,{-64, -88, 3, 18},4000, alive=3D18507474,id=3D{25 -66 -54 110 84 -=
96
79 -74 -84 -106 122 -65 -121 9 -16 5 }, payload=3D{}, command=3D{}, domain=
=3D{},
]]
Apr 5, 2012 12:32:10 AM
org.apache.catalina.tribes.group.interceptors.TcpFailureDetector
memberDisappeared
INFO: Received
memberDisappeared[org.apache.catalina.tribes.membership.MemberImpl[tcp://{-=
64,
-88, 3, 18}:4000,{-64, -88, 3, 18},4000, alive=3D18507474,id=3D{25 -66 -54 =
110
84 -96 79 -74 -84 -106 122 -65 -121 9 -16 5 }, payload=3D{}, command=3D{},
domain=3D{}, ]] message. Will verify.
Apr 5, 2012 12:32:10 AM
org.apache.catalina.tribes.group.interceptors.TcpFailureDetector
memberDisappeared
INFO: Verification complete. Member still
alive[org.apache.catalina.tribes.membership.MemberImpl[tcp://{-64, -88, 3,
18}:4000,{-64, -88, 3, 18},4000, alive=3D18507474,id=3D{25 -66 -54 110 84 -=
96
79 -74 -84 -106 122 -65 -121 9 -16 5 }, payload=3D{}, command=3D{}, domain=
=3D{},
]]
Apr 5, 2012 12:32:10 AM
org.apache.catalina.tribes.tipis.AbstractReplicatedMap heartbeat
SEVERE: Unable to send AbstractReplicatedMap.ping message
org.apache.catalina.tribes.ChannelException: Operation has timed out(60000
ms.).; Faulty members:tcp://{-64, -88, 3, 18}:4000;









On Wed, Apr 4, 2012 at 8:43 PM, Thomas Rohde <tro@ordix.de> wrote:

> -----Urspr=FCngliche Nachricht-----
> Von:    Dhaval Jaiswal <dhaval.jaiswal@via.com>
> Gesendet:       Mi 04.04.2012 16:41
> Betreff:        SEVERE: Unable to start cluster.
> An:     Tomcat Users List <users@tomcat.apache.org>;
> CC:     Shrinivas Devarkonda <shrinivas.devarkonda@via.com>;
> > Hi List,
> >
> > Below is the error we are facing while starting tomcats.
> >
> > SEVERE: Unable to start cluster.
> > org.apache.catalina.tribes.ChannelException: java.net.SocketException:
> Not
> > a multicast address; No faulty members identified.
> >
> >
> > Our cluster setting is as below in server.xml
> >
> >
> >  <Cluster className=3D"org.apache.catalina.ha.tcp.SimpleTcpCluster"
> > channelSendOptions=3D"6">
> >         <Manager className=3D"org.apache.catalina.ha.session.BackupMana=
ger"
> > expireSessionsOnShutdown=3D"false"
> >                    notifyListenersOnReplication=3D"true"
> mapSendOptions=3D"6"/>
> >
> >             <Channel
> > className=3D"org.apache.catalina.tribes.group.GroupChannel">
> >              <Membership
> > className=3D"org.apache.catalina.tribes.membership.McastService"
> >                         address=3D"192.168.3.14"
> >                         port=3D"45564"
> >                         frequency=3D"500"
> >                         dropTime=3D"30000"/>
> >              <Receiver
> > className=3D"org.apache.catalina.tribes.transport.nio.NioReceiver"
> >                       address=3D"auto"
> >                       port=3D"4000"
> >                       selectorTimeout=3D"5000"
> >                       timeout=3D"60000"
> >                       maxThreads=3D"6"/>
> >
> >              <Sender
> > className=3D"org.apache.catalina.tribes.transport.ReplicationTransmitte=
r">
> >                   <Transport
> > className=3D"org.apache.catalina.tribes.transport.nio.PooledParallelSen=
der"
> > timeout=3D"60000" keepAliveCount=3D"0"/>
> >              </Sender>
> >              <Interceptor
> >
> className=3D"org.apache.catalina.tribes.group.interceptors.TcpFailureDete=
ctor"/>
> >              <Interceptor
> >
> className=3D"org.apache.catalina.tribes.group.interceptors.MessageDispatc=
h15Interc
> > eptor"/>
> >              <Interceptor
> >
> className=3D"org.apache.catalina.tribes.group.interceptors.ThroughputInte=
rceptor"/
> > >
> >            </Channel>
> >          <Valve className=3D"org.apache.catalina.ha.tcp.ReplicationValv=
e"
> >
> >
> filter=3D".*\.gif|.*\.js|.*\.jpeg|.*\.jpg|.*\.png|.*\.htm|.*\.html|.*\.cs=
s|.*\.txt
> > "/>
> >          <Valve
> > className=3D"org.apache.catalina.ha.session.JvmRouteBinderValve"/>
> >        <ClusterListener
> > className=3D"org.apache.catalina.ha.session.ClusterSessionListener"/>
> >        <ClusterListener
> >
> className=3D"org.apache.catalina.ha.session.JvmRouteSessionIDBinderListen=
er"/>
> >      </Cluster>
> >
> >
> >
> > Note: 192.168.3.14 is the IP of backup manager with java & 192.168.3.9 =
is
> > the IP address of local tomcat where above server.xml is hosted.
> >
> > Please guide us as to how to overcome the issue & please give us the
> sample
> > <cluster>   </cluster>  file if possible.
> >
>
> Hi Dhaval,
>
> you have to set a multicast ip address for the "address" attribute of the
> McastService. A multicast address looks like 224.x.x.x.
>
> Take a look at http://en.wikipedia.org/wiki/Multicast_address for further
> details.
>
> The Tomcat cluster uses multicast for the management of the cluster membe=
r.
>
> Thomas
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>
>


--=20


<http://www.via.com/>

--f46d04479f0da1d23f04bcdf3361--

From users-return-233358-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 20:47:38 2012
Return-Path: <users-return-233358-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C1D229ED4
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 20:47:38 +0000 (UTC)
Received: (qmail 81678 invoked by uid 500); 4 Apr 2012 20:47:35 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 81581 invoked by uid 500); 4 Apr 2012 20:47:35 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 81572 invoked by uid 99); 4 Apr 2012 20:47:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 20:47:35 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of knst.kolinko@gmail.com designates 209.85.161.173 as permitted sender)
Received: from [209.85.161.173] (HELO mail-gx0-f173.google.com) (209.85.161.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 20:47:28 +0000
Received: by ggnp2 with SMTP id p2so563840ggn.18
        for <users@tomcat.apache.org>; Wed, 04 Apr 2012 13:47:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=1Jw5V/axTceW5Hw3RxLCeS5qj+jHHuxdNECjkeM0ojE=;
        b=M2VZHGoUAzgJzEPzIq+CujiH5O6slas4yaCHb10AT8/92JCB6oRaqigvFQNl1NOE3b
         mdnrs7b4SNgc+p/Q7/7gvIHamjk0p2X+sSnWo/tVNVOahzAdYFZp4xleB8KutRLQU2nE
         I/lXKXwMWYpANvKMlB83lFOzFUwtd34EScy8PM5UZugZpIsJ4uWEDAe2Qv9uaqzhewEA
         TVEqzij4JrTWoi2QtFa/lWBjM5ZQEoZjtiPmoI8Feozbj/nnoYSY4gJYodBd5vLerynR
         WrHSliGk/nsBmL5aGQ3UFlf8g0MZWjDNucTRqgv0/5qcbr/swUj6Hfgclay6l1iIQUMl
         GiVw==
MIME-Version: 1.0
Received: by 10.236.109.198 with SMTP id s46mr16277438yhg.43.1333572428070;
 Wed, 04 Apr 2012 13:47:08 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Wed, 4 Apr 2012 13:47:07 -0700 (PDT)
In-Reply-To: <1333564099167-4687332.post@n6.nabble.com>
References: <1333360773430-4678428.post@n6.nabble.com>
	<CABzHfVn5uKEF9RKGUkqGGq56DLNFhRFm6Y_PUSUq--x3=yMpvw@mail.gmail.com>
	<1333363527730-4678513.post@n6.nabble.com>
	<4F7A11D7.80205@christopherschultz.net>
	<1333444940374-4681421.post@n6.nabble.com>
	<4F7AE221.10605@ice-sa.com>
	<1333549942374-4686704.post@n6.nabble.com>
	<1333564099167-4687332.post@n6.nabble.com>
Date: Thu, 5 Apr 2012 00:47:07 +0400
Message-ID: <CABzHfVnN_V+J84BhD0wn=MWghA6KB0DUT3K48nMnU3VM9pC3dg@mail.gmail.com>
Subject: Re: Tomcat6 - Context - aliases
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

2012/4/4 L=E9a Massiot <lmhelp1@orange.fr>:
> Ok. So, I found a solution, if I can call that a solution.
>
> - I created a file "an_alias_1.xml" in "/etc/tomcat6/Catalina/localhost/"
> (the OS being Debian Squeeze).
>
> - Here are the contents of this "an_alias_1.xml" file:
> < Context path=3D"/an_alias_1" docBase=3D"/home/d1" crossContext=3D"true"=
 / >

You should remove the path attribute when Context is defined in an XML file=
.

The name of the xml file itself specifies the path, not the attribute.

See "Context" chapter in configuration reference for details.

>
> - This Configuration Descriptor is automatically deployed once saved.
>
> - I suppressed the Webapp "w"'s "WEB-INF\context.xml" I had created.
>
> - I redeployed the Webapp "w".
>
> =3D> Now, when a user clicks on any link < a href=3D"/an_alias_1/file_< i=
>.txt">
> file_< i>.txt < /a>
> it is successfully retrieved.
>
> =3D> What is still problematic to me, is that, when the user clicks on a =
link,
> the context or Webapp changes (from "w" to "an_alias_1").
> The resources which are in "/home/d1" are available directly by typing th=
e
> following URL in a browser:
> http://<hostname>:8080/an_alias_1/file_< i>.txt
> and not compulsorily through the Webapp "w".
>

Best regards.
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233359-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 20:56:22 2012
Return-Path: <users-return-233359-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 310BF9214
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 20:56:22 +0000 (UTC)
Received: (qmail 12010 invoked by uid 500); 4 Apr 2012 20:56:18 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 11867 invoked by uid 500); 4 Apr 2012 20:56:18 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 11820 invoked by uid 99); 4 Apr 2012 20:56:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 20:56:17 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.138.90.72] (HELO nm9.bullet.mail.ne1.yahoo.com) (98.138.90.72)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 04 Apr 2012 20:56:10 +0000
Received: from [98.138.90.49] by nm9.bullet.mail.ne1.yahoo.com with NNFMP; 04 Apr 2012 20:55:48 -0000
Received: from [98.138.226.162] by tm2.bullet.mail.ne1.yahoo.com with NNFMP; 04 Apr 2012 20:55:48 -0000
Received: from [127.0.0.1] by omp1063.mail.ne1.yahoo.com with NNFMP; 04 Apr 2012 20:55:48 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 635792.52218.bm@omp1063.mail.ne1.yahoo.com
Received: (qmail 44464 invoked by uid 60001); 4 Apr 2012 20:55:48 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1333572948; bh=Bf0i4QIxz+XDrlANHwNWiiKm70n0ezltMH/u9iYX48o=; h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=LN1oBcoFeUBLeBW9SpjagKtwl3kNQYV9rfHKMKpaaAtNunyyci8lFrFE04XwB4ZK4yxYIa/njEccGr45VDAx+3hB4k2gtF7G/L0G+ZZSM6tpsp7bCKn0Zmu/Gb1WK8K2qpM3qtRfvN1p1JQefJBBsi9oYLlxAz6SQiiXxoOS+cE=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=cbwQFKJ1tqo0D5VglAlq8K6XjAXX54bSM9E8hLS8SniFIdeW0PiAN2oSt/iIVBvgV1kUoJ83EFtcEG6tMPVwqsUpoEPx6QiD4CgYXZxH9BwiKZeb5aiNt2CNk/FC2Hk1GQ0yaJ9l2tGVFy+92s8g9M8NhgP/wHVWJuesmt1qBDE=;
X-YMail-OSG: xWGv4.sVM1ng7zYqVRnpJm2txx8rMIeSnaEx8ak6nhSptav
 iVqgJhrzPaZZnlZSUuEmszlS_yxCAN8QCxtHwFn.f.cNO.dbHZq64JnLADj_
 Ra3RSTQeDJQLl7NWeoylAtCkqszIoOwLyy5sFVcV75Kbm5jhbvc0xSaG5qpb
 wFOj0RF7_4QHgw4Y5dBjo6lVvr8f_V.hT9KAjh5KqqdpSSfidYvceOluSR3n
 al0CXqfs98cdsZD6krlixa6UFIObwN2cDVCv9_ETgwp4eezFLJtJ_le.EibN
 cS6RqoKDmlwKfJd5J0rfmut6zrgx2b06qAAPi0zq03pjfdw8Cyjlitq7WFBs
 ruao0whjYlXIXLnpih6ufoHiR42ytLtweIg0kocVl5b3c3MTinzZJ9RB2VAJ
 YrjqyrnZnVAG6BYTYYg4aHeIIxCESwhWGQEpAsayfaXaVLjfGwvobiD03Uee
 Xv4sJQCORB93Cw7eacFlF0KTp1EZnbu1w.8MfSzkN7HY0vZAKwx2qrEyqEB7
 vCZCXblI0t.pmy.wAY7z43Pt_5qf3Ogaexv3CrOU1JMLFt3ELtH3nDn3k8sR
 Kggn9290ki0THA8KFMGCKhL35oDzjpYmEvtm5
Received: from [71.129.46.96] by web125504.mail.ne1.yahoo.com via HTTP; Wed, 04 Apr 2012 13:55:48 PDT
X-Mailer: YahooMailWebService/0.8.117.340979
References: <zarafa.4f7c651f.1095.7ca7df39672deef6@zarafix.ordix.de> <CABKrPsNQN_2KjH_PLfE49aoXjqgc451yFZFs-a0e0g9S3hMLpw@mail.gmail.com>
Message-ID: <1333572948.35940.YahooMailNeo@web125504.mail.ne1.yahoo.com>
Date: Wed, 4 Apr 2012 13:55:48 -0700 (PDT)
From: Mark Eggers <its_toasted@yahoo.com>
Reply-To: Mark Eggers <its_toasted@yahoo.com>
Subject: Re: SEVERE: Unable to start cluster.
To: Tomcat Users List <users@tomcat.apache.org>
In-Reply-To: <CABKrPsNQN_2KjH_PLfE49aoXjqgc451yFZFs-a0e0g9S3hMLpw@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Comments inline and surrounded by =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D COMMENT=
 =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=0A=0A----- Original Message -----=
=0A=0A> From: Dhaval Jaiswal <dhaval.jaiswal@via.com>=0A> To: Tomcat Users =
List <users@tomcat.apache.org>=0A> Cc: =0A> Sent: Wednesday, April 4, 2012 =
12:12 PM=0A> Subject: Re: SEVERE: Unable to start cluster.=0A> =0A>T hanks =
to all for sharing info. I will test it & come back to you.=0A> =0A> Also w=
ant to know that after starting session replication there will be a=0A> hug=
e logging in catalina.out for session information. How to minimize it ?=0A=
=0A=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D COMMENT =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=0A=0A=0ADid read my other mail concerning how to manage logging? =
I thought I was pretty explicit (and gave an example). If my example for lo=
gging.properties was unclear, please ask specific questions (to the list).=
=0A=0AIf you want less logging, then turn down the levels. See the followin=
g documentation:=0A=0Ahttp://tomcat.apache.org/tomcat-6.0-doc/logging.html#=
Using_java.util.logging_(default)=0A=0A=0A=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
 COMMENT =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=0A=0A=0A> =0A> Below are t=
he logs of catalina.out. As per the log it shows that it has=0A> added memb=
er 192.168.3.18.=0A> =0A> Now we have a tomcat cluster group from 192.168.3=
.5 to 192.168.3.11.=0A> However it is trying to connect to the 192.168.3.18=
.=0A> =0A> =0A> 192.168.3.18 is the tomcat of another cluster. Where should=
 i look into to=0A> resolve this. Where to define this limit that it has to=
 share the session=0A> information from 192.168.3.5 to 192.168.3.11.=0A=0A=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D COMMENT =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=0A=0A=0AFrom the documentation on the web site at:=0A=0Ahttp://tomca=
t.apache.org/tomcat-6.0-doc/cluster-howto.html#Cluster_Information=0A=0A=0A=
Membership is established using multicast heartbeats. Hence, if you wish to=
 subdivide your clusters, you can do this by changing the multicast IP addr=
ess or port in the <Membership> element.=0A=0AIn other words, if you want m=
ultiple clusters change either the multicast address here:=0A=0A=A0 =A0 =A0=
 =A0 =A0 =A0<Membership className=3D"org.apache.catalina.tribes.membership.=
McastService"=0A=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 address=3D"=
228.0.0.4"=0A=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 port=3D"45564"=
=0A=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 frequency=3D"500"=0A=A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 dropTime=3D"3000"/>=0A=0Ato a d=
ifferent multicast address, or change the port in the above to a different =
port. The multicast address / port establishes the cluster group. The above=
 snippet is from one of my server.xml files.=0A=0AYou might also want to re=
ad up on how multicasting works.=0A=0A=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D COM=
MENT =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=0A=0A=0A>=A0=0A=0A> =0A> =0A> =
INFO: Replication member=0A> added:org.apache.catalina.tribes.membership.Me=
mberImpl[tcp://{-64, -88, 3,=0A> 18}:4000,{-64, -88, 3, 18},4000, alive=3D1=
8507474,id=3D{25 -66 -54 110 84 -96=0A> 79 -74 -84 -106 122 -65 -121 9 -16 =
5 }, payload=3D{}, command=3D{}, domain=3D{}, ]=0A> Apr 5, 2012 12:31:10 AM=
=0A> org.apache.catalina.tribes.group.interceptors.TcpFailureDetector=0A> p=
erformBasicCheck=0A> INFO: Suspect member, confirmed=0A> alive.[org.apache.=
catalina.tribes.membership.MemberImpl[tcp://{-64, -88, 3,=0A> 18}:4000,{-64=
, -88, 3, 18},4000, alive=3D18507474,id=3D{25 -66 -54 110 84 -96=0A> 79 -74=
 -84 -106 122 -65 -121 9 -16 5 }, payload=3D{}, command=3D{}, domain=3D{},=
=0A> ]]=0A> Apr 5, 2012 12:32:10 AM=0A> org.apache.catalina.tribes.group.in=
terceptors.TcpFailureDetector=0A> memberDisappeared=0A> INFO: Received=0A> =
memberDisappeared[org.apache.catalina.tribes.membership.MemberImpl[tcp://{-=
64,=0A> -88, 3, 18}:4000,{-64, -88, 3, 18},4000, alive=3D18507474,id=3D{25 =
-66 -54 110=0A> 84 -96 79 -74 -84 -106 122 -65 -121 9 -16 5 }, payload=3D{}=
, command=3D{},=0A> domain=3D{}, ]] message. Will verify.=0A> Apr 5, 2012 1=
2:32:10 AM=0A> org.apache.catalina.tribes.group.interceptors.TcpFailureDete=
ctor=0A> memberDisappeared=0A> INFO: Verification complete. Member still=0A=
> alive[org.apache.catalina.tribes.membership.MemberImpl[tcp://{-64, -88, 3=
,=0A> 18}:4000,{-64, -88, 3, 18},4000, alive=3D18507474,id=3D{25 -66 -54 11=
0 84 -96=0A> 79 -74 -84 -106 122 -65 -121 9 -16 5 }, payload=3D{}, command=
=3D{}, domain=3D{},=0A> ]]=0A> Apr 5, 2012 12:32:10 AM=0A> org.apache.catal=
ina.tribes.tipis.AbstractReplicatedMap heartbeat=0A> SEVERE: Unable to send=
 AbstractReplicatedMap.ping message=0A> org.apache.catalina.tribes.ChannelE=
xception: Operation has timed out(60000=0A> ms.).; Faulty members:tcp://{-6=
4, -88, 3, 18}:4000;=0A> =0A> =0A> =0A> =0A> =0A> =0A> =0A> =0A> =0A> On We=
d, Apr 4, 2012 at 8:43 PM, Thomas Rohde <tro@ordix.de> wrote:=0A> =0A>>  --=
---Urspr=FCngliche Nachricht-----=0A>>  Von:=A0 =A0 Dhaval Jaiswal <dhaval.=
jaiswal@via.com>=0A>>  Gesendet:=A0 =A0 =A0  Mi 04.04.2012 16:41=0A>>  Betr=
eff:=A0 =A0 =A0 =A0 SEVERE: Unable to start cluster.=0A>>  An:=A0 =A0  Tomc=
at Users List <users@tomcat.apache.org>;=0A>>  CC:=A0 =A0  Shrinivas Devark=
onda <shrinivas.devarkonda@via.com>;=0A>>  > Hi List,=0A>>  >=0A>>  > Below=
 is the error we are facing while starting tomcats.=0A>>  >=0A>>  > SEVERE:=
 Unable to start cluster.=0A>>  > org.apache.catalina.tribes.ChannelExcepti=
on: java.net.SocketException:=0A>>  Not=0A>>  > a multicast address; No fau=
lty members identified.=0A>>  >=0A>>  >=0A>>  > Our cluster setting is as b=
elow in server.xml=0A>>  >=0A>>  >=0A>>  >=A0 <Cluster =0A> className=3D"or=
g.apache.catalina.ha.tcp.SimpleTcpCluster"=0A>>  > channelSendOptions=3D"6"=
>=0A>>  >=A0 =A0 =A0 =A0  <Manager =0A> className=3D"org.apache.catalina.ha=
.session.BackupManager"=0A>>  > expireSessionsOnShutdown=3D"false"=0A>>  >=
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 notifyListenersOnReplication=3D"tru=
e"=0A>>  mapSendOptions=3D"6"/>=0A>>  >=0A>>  >=A0 =A0 =A0 =A0 =A0 =A0  <Ch=
annel=0A>>  > =0A> className=3D"org.apache.catalina.tribes.group.GroupChann=
el">=0A>>  >=A0 =A0 =A0 =A0 =A0 =A0 =A0 <Membership=0A>>  > =0A> className=
=3D"org.apache.catalina.tribes.membership.McastService"=0A>>  >=A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0  address=3D"192.168.3.14"=0A>>  >=A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0  port=3D"45564"=0A>>  >=A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0  frequency=3D"500"=0A>>  >=A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0  dropTime=3D"30000"/>=0A>>  >=A0 =
=A0 =A0 =A0 =A0 =A0 =A0 <Receiver=0A>>  > =0A> className=3D"org.apache.cata=
lina.tribes.transport.nio.NioReceiver"=0A>>  >=A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0  address=3D"auto"=0A>>  >=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0  port=3D"4000"=0A>>  >=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0  selectorTimeout=3D"5000"=0A>>  >=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0  timeout=3D"60000"=0A>>  >=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0  maxThreads=3D"6"/>=0A>>  >=0A>>  >=A0 =A0 =A0 =A0 =A0 =A0 =A0 <Sender=
=0A>>  > =0A> className=3D"org.apache.catalina.tribes.transport.Replication=
Transmitter">=0A>>  >=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0  <Transport=0A>>  =
> =0A> className=3D"org.apache.catalina.tribes.transport.nio.PooledParallel=
Sender"=0A>>  > timeout=3D"60000" keepAliveCount=3D"0"/>=0A>>  >=A0 =A0 =A0=
 =A0 =A0 =A0 =A0 </Sender>=0A>>  >=A0 =A0 =A0 =A0 =A0 =A0 =A0 <Interceptor=
=0A>>  >=0A>> =0A> className=3D"org.apache.catalina.tribes.group.intercepto=
rs.TcpFailureDetector"/>=0A>>  >=A0 =A0 =A0 =A0 =A0 =A0 =A0 <Interceptor=0A=
>>  >=0A>> =0A> className=3D"org.apache.catalina.tribes.group.interceptors.=
MessageDispatch15Interc=0A>>  > eptor"/>=0A>>  >=A0 =A0 =A0 =A0 =A0 =A0 =A0=
 <Interceptor=0A>>  >=0A>> =0A> className=3D"org.apache.catalina.tribes.gro=
up.interceptors.ThroughputInterceptor"/=0A>>  > >=0A>>  >=A0 =A0 =A0 =A0 =
=A0 =A0 </Channel>=0A>>  >=A0 =A0 =A0 =A0 =A0 <Valve =0A> className=3D"org.=
apache.catalina.ha.tcp.ReplicationValve"=0A>>  >=0A>>  >=0A>> =0A> filter=
=3D".*\.gif|.*\.js|.*\.jpeg|.*\.jpg|.*\.png|.*\.htm|.*\.html|.*\.css|.*\.tx=
t=0A>>  > "/>=0A>>  >=A0 =A0 =A0 =A0 =A0 <Valve=0A>>  > =0A> className=3D"o=
rg.apache.catalina.ha.session.JvmRouteBinderValve"/>=0A>>  >=A0 =A0 =A0 =A0=
 <ClusterListener=0A>>  > =0A> className=3D"org.apache.catalina.ha.session.=
ClusterSessionListener"/>=0A>>  >=A0 =A0 =A0 =A0 <ClusterListener=0A>>  >=
=0A>> =0A> className=3D"org.apache.catalina.ha.session.JvmRouteSessionIDBin=
derListener"/>=0A>>  >=A0 =A0 =A0 </Cluster>=0A>>  >=0A>>  >=0A>>  >=0A>>  =
> Note: 192.168.3.14 is the IP of backup manager with java & =0A> 192.168.3=
.9 is=0A>>  > the IP address of local tomcat where above server.xml is host=
ed.=0A>>  >=0A>>  > Please guide us as to how to overcome the issue & pleas=
e give us =0A> the=0A>>  sample=0A>>  > <cluster>=A0  </cluster>=A0 file if=
 possible.=0A>>  >=0A>> =0A>>  Hi Dhaval,=0A>> =0A>>  you have to set a mul=
ticast ip address for the "address" =0A> attribute of the=0A>>  McastServic=
e. A multicast address looks like 224.x.x.x.=0A>> =0A>>  Take a look at htt=
p://en.wikipedia.org/wiki/Multicast_address for further=0A>>  details.=0A>>=
 =0A>>  The Tomcat cluster uses multicast for the management of the cluster=
 member.=0A>> =0A>>  Thomas=0A>> =0A> <http://www.via.com/>=0A> =0A=0A. . .=
 . just my two cents.=0A/mde/

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233360-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 21:00:13 2012
Return-Path: <users-return-233360-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CD85795C5
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 21:00:13 +0000 (UTC)
Received: (qmail 25861 invoked by uid 500); 4 Apr 2012 21:00:10 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 25801 invoked by uid 500); 4 Apr 2012 21:00:10 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 25792 invoked by uid 99); 4 Apr 2012 21:00:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 21:00:10 +0000
X-ASF-Spam-Status: No, hits=4.7 required=5.0
	tests=FREEMAIL_FORGED_REPLYTO,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [98.138.91.179] (HELO nm19-vm4.bullet.mail.ne1.yahoo.com) (98.138.91.179)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 04 Apr 2012 20:59:58 +0000
Received: from [98.138.90.52] by nm19.bullet.mail.ne1.yahoo.com with NNFMP; 04 Apr 2012 20:59:37 -0000
Received: from [98.138.89.173] by tm5.bullet.mail.ne1.yahoo.com with NNFMP; 04 Apr 2012 20:59:37 -0000
Received: from [127.0.0.1] by omp1029.mail.ne1.yahoo.com with NNFMP; 04 Apr 2012 20:59:37 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 306358.28675.bm@omp1029.mail.ne1.yahoo.com
Received: (qmail 48514 invoked by uid 60001); 4 Apr 2012 20:59:37 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1333573177; bh=xksmqieJ/e+sppV2UnsPXmu/gT8qH8bee+4fx1HxEZg=; h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=SiPxWcpamN89aPjynIzJplAl0/rNU3+D1LSQZZ1nUTjyFvtvl9xxNNQNigLB5aZW8FyiK0DdXwMn91Js14ImJbkXNu9uCTvQvW16/dHuPm80tMlgIR1DRO+wkypkGftSMDYLiN66bW41Dg2ehyObioWW2W+Y4MLO063q7/YyBrM=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=IyxRm9jaZdOnwMln2qnsK3FSe2CVTufzBwrnCHudKE8YGiIXv9xRRgjffDtgyuvheFavn1HYQy1VlgLIrMPnv5m+2xOWoCA+qabSza+5ywYj8HwLk1W21/MEBGwLh+V02td8PupdCyARo96gWWo4VA/yJrd/Z3witceLE54pLE0=;
X-YMail-OSG: OnLakOIVM1nJ.Mc.q3ZMvfxYGT3rCQuZ09HHNOpTH7XR3.L
 B5seCLRvw9w3kISO3fysKgGJqDT111cD6b5mM00gxXbxzfDNvBnHIn.hF5UI
 3ilEtpgUGZ9XJoNsK23EoUNVg2P11mM0CEhAdgH7wixF9EFTJi2LBIf7Lut_
 sob4ApJOwIZKrZTsGK0AIUYwOtyTGUEjeQAvPJvN5uadAEFBf8CDtZ2nXiRq
 D5u.QKJpZ2OM4n_CzNaZ9ds9B.PNOjGT7r5jQDxkd9v1TznTzGaepW3dzLV4
 zxTmHMFrnGn7VsYwgFV83vSXCPguvASBDIwEZf.46v9lbB77YDnC_lgMkPn_
 vxgRPAZ7wq6hE4mcTfvQ2O9Z0J7IQqTFEMgoBu0e1JtTJnruPR0ErfSeTZhP
 lTf1WowYyY4aUqhUbOUBFplrNrps-
Received: from [87.202.3.209] by web122301.mail.ne1.yahoo.com via HTTP; Wed, 04 Apr 2012 13:59:37 PDT
X-Mailer: YahooMailWebService/0.8.117.340979
References: <1333541107.27592.YahooMailNeo@web122304.mail.ne1.yahoo.com> <4F7C420C.8070401@pidster.com> <1333544069.69754.YahooMailNeo@web122303.mail.ne1.yahoo.com> <4F7C6BDF.9080006@apache.org> <1333556061.12060.YahooMailNeo@web122304.mail.ne1.yahoo.com> <4F7C810F.9030002@apache.org>
Message-ID: <1333573177.33592.YahooMailNeo@web122301.mail.ne1.yahoo.com>
Date: Wed, 4 Apr 2012 13:59:37 -0700 (PDT)
From: Hermes Flying <flyinghermes@yahoo.com>
Reply-To: Hermes Flying <flyinghermes@yahoo.com>
Subject: Re: Discrepancy between Tomcat's connection pool and tomcat's report on memory leaks
To: Tomcat Users List <users@tomcat.apache.org>,
  "markt@apache.org" <markt@apache.org>
In-Reply-To: <4F7C810F.9030002@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="518238472-1071577121-1333573177=:33592"

--518238472-1071577121-1333573177=:33592
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Thank you for your explanation.=0AI will take this to H2 but I have one mor=
e question on your comment:=0A=A0=0A>>Nope. It is a memory leak in the JDBC=
 driver which is why Tomcat is reporting it. When a web application shuts d=
own, nothing should be=0A>>retaining a reference to the web application cla=
ss loader. That the JDBC driver does, is a bug in the JDBC driver.=0A=A0=0A=
My question is: is this leak a general problem that should concern me=A0or =
something that is an issue only on application undeployment? =0A=0A=0A=A0=
=0A =0A=0A________________________________=0A From: Mark Thomas <markt@apac=
he.org>=0ATo: Tomcat Users List <users@tomcat.apache.org> =0ASent: Wednesda=
y, April 4, 2012 8:12 PM=0ASubject: Re: Discrepancy between Tomcat's connec=
tion pool and tomcat's report on memory leaks=0A  =0AOn 04/04/2012 17:14, H=
ermes Flying wrote:=0A> Hi Mark,thank you for your reply. 2 questions relat=
ed your mail 1)I =0A> don't understand what you are saying here: "but as of=
 7.0.12 yo an =0A> set the closeMethod for a resource that should be the na=
me of a zero =0A> atg method to call to shut down the resource". Could you =
please =0A> explain or send a link to a reference on what you are talking a=
bout =0A> here?=0A=0Ahttp://tomcat.apache.org/tomcat-7.0-doc/config/context=
.html#Resource_Definitions=0A=0A=0A> 2)Concerning your comment concerning t=
he class loaders and H2. =0A> I didn't mention that the H2 driver is under =
$TOMCAT_HOME/lib. Does =0A> this make a difference in the behavior you desc=
ribe?=0ANope. If you are using Tomcat's connection pooling that is where th=
e=0Adriver has to be located.=0A=0A> I mean the JDBC driver would not be un=
loaded with the web application, right?=0ACorrect.=0A=0A> So is this an iss=
ue?=0ANo.=0A=0A> Should I have placed the H2 driver under WEB-INF/lib? =0AN=
ot if you wanted to use Tomcat's connection pooling.=0A=0A> I can do that b=
ut then from my point of view Tomcat's setup has many =0A> exception/corner=
 cases and the setup is not "uniform" but requires =0A> some background kno=
wledge of the implementation of Tomcat=0ANo you can't since then you can't =
use Tomcat's connection pooling.=0A=0A=0A> Also as mentioned to Dan:=0A> =
=0A> My undestanding of what is happening here is the following 1) My =0A> =
application uses Tomcat's connection pool from the data source 2) My =0A> a=
pplication uses H2 as a file database. H2 starts back end(s) thread =0A> wh=
ich is about logging (H2 logging) and possibly other tasks and=0A> that is =
the thread that catalina complaints about 3) H2 remains open=0A> as long as=
 there are open connections and is closed when the last =0A> connection is =
released 4) My application uses Tomcat's connection =0A> pool and as a resu=
lt Tomcat "decides" when the data source should be =0A> disposed or when co=
nnections are released (not my code). 5) I =0A> shutdown Tomcat. 6) The con=
nection pool of Tomcat has still =0A> connections (e.g. idle) and so H2 doe=
s not shutdown. Hence it's lock =0A> file and related background threads ar=
e still running. 7) Tomcat =0A> shuts down my application but does not disp=
ose off the connection =0A> pool (yet). I believe this happens because of t=
he way Tomcat is=0A> being shut down (as sequence of actions I mean). 8) Si=
nce the=0A> connection pool has not been disposed, there are still connecti=
ons=0A> and as a result H2 is still running 9) Tomcat's memory leak=0A> det=
ection mechanism detects H2 threads started from=0A> GenericApplication whi=
ch uses H2 and gives the report in=0A> catalina.out. So Tomcat gives the re=
port first and then proceeds with=0A> the shutdown (and this perhaps is not=
 correct? I can't say) 10)=0A> Tomcat eventually shuts down.=0A> =0A> Is th=
is scenario as I describe it, wrong?=0A=0AIt is mostly right but misses the=
 point that threads started by the JDBC=0Adriver have the web application's=
 class loader as their context class=0Aloader when they should have the cla=
ss loader used to load the JDBC=0Adriver. That is a bug in the JDBC driver.=
=0A=0A> Should I somehow have configured the datasource to be "associated" =
with my web application =0A> instead of a generic data source?=0ANo.=0A=0A>=
 Why?=0AN/A=0A=0A> Should I have shut the data source myself?=0ANo.=0A=0AHo=
w?=0AN/A.=0A=0AIf all what I describe is reasonable this seems to me like a=
 "racing"=0Acondition.=0ANope. It is a memory leak in the JDBC driver which=
 is why Tomcat is=0Areporting it. When a web application shuts down, nothin=
g should be=0Aretaining a reference to the web application class loader. Th=
at the JDBC=0Adriver does, is a bug in the JDBC driver.=0A=0A> How should I=
 mediate this?=0AGet back to the H2 folks and provide them with a link to t=
his thread. If=0Athey still insist that there is no bug in their driver, ei=
ther live with=0Athe bug or find an alternative driver and/or database.=0A=
=0AMark=0A=0A--------------------------------------------------------------=
-------=0ATo unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org=0AFor=
 additional commands, e-mail: users-help@tomcat.apache.org
--518238472-1071577121-1333573177=:33592--

From users-return-233361-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 21:04:38 2012
Return-Path: <users-return-233361-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 02E6F9714
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 21:04:37 +0000 (UTC)
Received: (qmail 39134 invoked by uid 500); 4 Apr 2012 21:04:33 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 39040 invoked by uid 500); 4 Apr 2012 21:04:33 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 39031 invoked by uid 99); 4 Apr 2012 21:04:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 21:04:33 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [98.138.229.26] (HELO nm33.bullet.mail.ne1.yahoo.com) (98.138.229.26)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 04 Apr 2012 21:04:24 +0000
Received: from [98.138.90.52] by nm33.bullet.mail.ne1.yahoo.com with NNFMP; 04 Apr 2012 21:04:02 -0000
Received: from [98.138.87.5] by tm5.bullet.mail.ne1.yahoo.com with NNFMP; 04 Apr 2012 21:04:02 -0000
Received: from [127.0.0.1] by omp1005.mail.ne1.yahoo.com with NNFMP; 04 Apr 2012 21:04:02 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 570258.58303.bm@omp1005.mail.ne1.yahoo.com
Received: (qmail 51529 invoked by uid 60001); 4 Apr 2012 21:04:01 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1333573441; bh=TI2Mz1nOXR6j3Sqx7NbP9gE//1G9n0qNHnfP1pOqfRU=; h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=a04v83YyfVJOQTUDcwZ2iwhAEyHkHVr+PNlJFRFrZF7DND4MN6ZwIZ/vw288mchVNe9RatvXvOAZfS+E5ammIO/c6r1pMpmCkACdXoN9+tnBJs7uayPbwu9V4FdPTsW0u3flz3hCo+tpL7N10POEpdENbjPoRQ+D8ezHIIID+PQ=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=ZlVX0Oy+VPV7XFO30kTJkC7HigLoxzDfBjHf/rTbpN997g8Bs1HWWICCHOVyJAC4DOh8yfD4jedQ/uQiprhupD2GR1ji+dMOfRDEbvOh0gBT7n0rbcCX3F34ysAp8Pj8CxO1vxTVuOUdOlu++BCqqn0bqIYKqWXr2SH6RQIGn9g=;
X-YMail-OSG: bEEAOnwVM1lfl.Y7QZw_qVNSPmnpeBvPFz9fdWOcdTGxTw5
 o6iRWOu9lFUYfRponkJwYK70ksTYkuEMPajxXjdeKwt3_rGJXSeTWcOThp_o
 geCgbuio.JepYbJSrayx88f14R9T0DANvx7KJkHzFE6pc_ulsqgsBdsQtPBX
 qwAERyIjVfGeK46dQNmozT1UKx66qEbLtSWWXj1Q3HFGqSxevBZ9z53UXF2R
 QHxWFw_iONgk9dtJjYQFpn8w0r_Ihte_HYza2mSLgeBBT_P4Fsy1F78FKU2z
 1IzAdd2vYIVhxZlBLV_rUwYz2Bx6jKBP_ZN7vIUW936lKpmi_ZVAhAwW_C0u
 GAcze33GEwP.84igi5fejnnuqG9TTuwzI1Uls5TXz04q6FORF8U2ZOY0MEcH
 3Qpo.jRI.UanWOJAHTW6w_E4Rgbl2GGF65duHcEP5HUxHiUG8TbW7DEB2u1l
 Gs94q1m4c2jYmCMx2q25PhA--
Received: from [87.202.3.209] by web122301.mail.ne1.yahoo.com via HTTP; Wed, 04 Apr 2012 14:04:01 PDT
X-Mailer: YahooMailWebService/0.8.117.340979
References: <1333558570.29161.YahooMailNeo@web122303.mail.ne1.yahoo.com> <5918aef8-434c-43df-b1dc-cedc349fe5db@arizona.hanik.com>
Message-ID: <1333573441.51438.YahooMailNeo@web122301.mail.ne1.yahoo.com>
Date: Wed, 4 Apr 2012 14:04:01 -0700 (PDT)
From: Hermes Flying <flyinghermes@yahoo.com>
Reply-To: Hermes Flying <flyinghermes@yahoo.com>
Subject: Re: Discrepancy between Tomcat's connection pool and tomcat's report on memory leaks
To: Tomcat Users List <users@tomcat.apache.org>
In-Reply-To: <5918aef8-434c-43df-b1dc-cedc349fe5db@arizona.hanik.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="518238472-1321457877-1333573441=:51438"

--518238472-1321457877-1333573441=:51438
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,=0A=A0=0AI am not sure how <Resource type=3D"javax.sql.DataSource" close=
Method=3D"close" .../> helps (I am using Tomcat 7)=0AAlso:=0A>>you should b=
e able to fix this by setting initialSize>0 so that the thread is started u=
sing the main class loader when tomcat starts, not when an app >>starts usi=
ng the pool=0ABut how was I supposed to know this? I will try it and let yo=
u know=0A =0A=0A________________________________=0A From: Filip Hanik Maili=
ng Lists <devlists@hanik.com>=0ATo: =0ACc: Tomcat Users List <users@tomcat.=
apache.org> =0ASent: Wednesday, April 4, 2012 8:03 PM=0ASubject: Re: Discre=
pancy between Tomcat's connection pool and tomcat's report on memory leaks=
=0A  =0AThe real fix to your problem should have been=0A=0A<Resource type=
=3D"javax.sql.DataSource" closeMethod=3D"close" .../> (available in Tomcat =
7)=0A=0AIf I understand the problem you're having is two fold=0A1. you see =
reports about memory leaks=0A"started a thread named [H2 File Lock Watchdog=
" you should be able to fix this by setting initialSize>0 so that the threa=
d is started using the main class loader when tomcat starts, not when an ap=
p starts using the pool.=0A(Tomcat 7's jdbc-pool does this automatically fr=
om 7.0.27 onwards, regardless of configuration)=0A=0A2. The connection pool=
 is not closed properly, again, this is addressed in the top of this email.=
=0A=0Aletting the pool eventually shrink to 0, is merely a work around, but=
 I realize it will NOT work. H2 is starting it's own thread, there is no wa=
y around this, unless there is way to shut down this thread. Maybe this shu=
ts down if all connections are closed.=0A=0AFilip=0A=0A----- Original Messa=
ge -----=0A> From: "Hermes Flying" <flyinghermes@yahoo.com>=0A> To: "Filip =
Hanik Mailing Lists" <devlists@hanik.com>, "Tomcat Users List" <users@tomca=
t.apache.org>=0A> Sent: Wednesday, April 4, 2012 10:56:10 AM=0A> Subject: R=
e: Discrepancy between Tomcat's connection pool and tomcat's report on memo=
ry leaks=0A> =0A> =0A> =0A> Ok. So how is the configuration parameter fixin=
g my problem? Would=0A> you please explain this to me to undestand how this=
 works?=0A> =0A> =0A> =0A> =0A> =0A> From: Filip Hanik Mailing Lists <devli=
sts@hanik.com>=0A> To: Tomcat Users List <users@tomcat.apache.org>; Hermes =
Flying=0A> <flyinghermes@yahoo.com>=0A> Sent: Wednesday, April 4, 2012 7:50=
 PM=0A> Subject: Re: Discrepancy between Tomcat's connection pool and=0A> t=
omcat's report on memory leaks=0A> =0A> no, that would happen if you set ma=
xIdle=3D0, not minIdle=0A> =0A> ----- Original Message -----=0A> > From: "H=
ermes Flying" < flyinghermes@yahoo.com >=0A> > To: "Tomcat Users List" < us=
ers@tomcat.apache.org >=0A> > Sent: Wednesday, April 4, 2012 10:45:24 AM=0A=
> > Subject: Re: Discrepancy between Tomcat's connection pool and=0A> > tom=
cat's report on memory leaks=0A> > =0A> > But if I set 'minIdle=3D0' all th=
e connections would close=0A> > imediatelly,=0A> > right?=0A> > So why woul=
d I need a connection pool in the first place if I do=0A> > this?=0A> > =0A=
> > =0A> > ________________________________=0A> > From: Filip Hanik Mailing=
 Lists < devlists@hanik.com >=0A> > To: Tomcat Users List < users@tomcat.ap=
ache.org >=0A> > Sent: Wednesday, April 4, 2012 7:28 PM=0A> > Subject: Re: =
Discrepancy between Tomcat's connection pool and=0A> > tomcat's report on m=
emory leaks=0A> > =0A> > just set minIdle=3D0 and enable the eviction proce=
ss to take care of=0A> > it.=0A> > =0A> > Filip=0A> > =0A> > =0A> > ----- O=
riginal Message -----=0A> > > From: "Hermes Flying" < flyinghermes@yahoo.co=
m >=0A> > > To: "Daniel Mikusa" < dmikusa@vmware.com >=0A> > > Cc: users@to=
mcat.apache.org=0A> > > Sent: Wednesday, April 4, 2012 9:53:30 AM=0A> > > S=
ubject: Re: Discrepancy between Tomcat's connection pool and=0A> > > tomcat=
's report on memory leaks=0A> > > =0A> > > >>Which is indicating that the a=
pplication deployed to=0A> > > >>"/GeneralApplication" is creating a thread=
 named "H2 Log Writer=0A> > > >>>>GENERICAPPLICATION" and never stopping it=
. I do not believe=0A> > > >>that this would be associated with the pool cr=
eated by Tomcat=0A> > > >>as=0A> > > >>that would >>be created as a global =
resource available to all=0A> > > >>applications and not specific to "/Gene=
ralApplication".=0A> > > >>I can't really say a whole lot more about what i=
s going on,=0A> > > >>just=0A> > > >>that this strikes me as odd. If it wer=
e my app, I'd dig into=0A> > > >>this=0A> > > >>more and see what is >>crea=
ting that thread. Possibly with a=0A> > > >>profiler or thread dumps.=0A> >=
 > =0A> > > What is happening here (as I undestand it is the following):=0A=
> > > 1) My application uses Tomcat's connection pool from the data=0A> > >=
 source=0A> > > 2) My application uses H2 as a file database. H2 starts bac=
k=0A> > > end(s)=0A> > > thread which is about logging (H2 logging) and pos=
sibly other=0A> > > tasks=0A> > > and that is the thread that catalina comp=
laints about=0A> > > 3) H2 remains open as long as there are open connectio=
ns and is=0A> > > closed when the last connection is released=0A> > > 4) My=
 application uses Tomcat's connection pool and as a result=0A> > > Tomcat "=
decides" when the data source should be disposed or when=0A> > > connection=
s are released (not my code).=0A> > > 5) I shutdown Tomcat.=0A> > > 6) The =
connection pool of Tomcat has still connections (e.g.=0A> > > idle)=0A> > >=
 and so H2 does not shutdown. Hence it's lock file and related=0A> > > back=
ground threads are still running.=0A> > > 7) Tomcat shuts down my applicati=
on but does not dispose off the=0A> > > connection pool (yet). I believe th=
is happens because of the way=0A> > > Tomcat is being shut down (as sequenc=
e of actions I mean).=0A> > > 8) Since the connection pool has not been dis=
posed, there are=0A> > > still=0A> > > connections and as a result H2 is st=
ill running=0A> > > 9) Tomcat's memory leak detection mechanism detects H2 =
threads=0A> > > started from GenericApplication which uses H2 and gives the=
=0A> > > report=0A> > > in catalina.out. So Tomcat gives the report first a=
nd then=0A> > > proceeds=0A> > > with the shutdown (and this perhaps is not=
 correct? I can't say)=0A> > > 10) Tomcat eventually shuts down.=0A> > > =
=0A> > > Is this scenario as I describe it, wrong?=0A> > > Should I somehow=
 have configured the datasource to be=0A> > > "associated"=0A> > > with my =
web application instead of a generic data source? Why?=0A> > > Should I hav=
e shut the data source myself? How?=0A> > > If all what I describe is reaso=
nable this seems to me like a=0A> > > "racing"=0A> > > condition. How shoul=
d I mediate this?=0A> > > =0A> > > Thank you for your time.=0A> > > =0A> > =
> =0A> > > ________________________________=0A> > > From: Daniel Mikusa < d=
mikusa@vmware.com >=0A> > > To: Hermes Flying < flyinghermes@yahoo.com >=0A=
> > > Sent: Wednesday, April 4, 2012 5:14 PM=0A> > > Subject: Re: Discrepan=
cy between Tomcat's connection pool and=0A> > > tomcat's report on memory l=
eaks=0A> > > =0A> > > ----- Original Message -----=0A> > > > =0A> > > > =0A=
> > > > What I do is get the dataSource inside a ServletContextListener=0A>=
 > > > and=0A> > > > save it in servlet context (as part of a DAO Factory):=
=0A> > > > =0A> > > > public void contextInitialized(ServletContextEvent sc=
e) {=0A> > > > =0A> > > > ServletContext context =3D sce.getServletContext(=
);=0A> > > > DataSource dataSource =3D null;=0A> > > > try {=0A> > > > data=
Source =3D (DataSource) new=0A> > > > InitialContext().lookup("java:/comp/e=
nv/jdbc/GenericDataSource");=0A> > > > context.setAttribute("daogenericfact=
ory",=0A> > > > DAOGenericFactory.getInstance(dataSource));=0A> > > > =0A> =
> > > } catch (NamingException e) {=0A> > > > e.printStackTrace();=0A> > > =
> }=0A> > > > =0A> > > > }=0A> > > > =0A> > > > =0A> > > > The DAOGenericFa=
ctory just returns specific DAO objects passing=0A> > > > in=0A> > > > thei=
r constructor the data source.=0A> > > > Each DAO instance has an member va=
riable of DataSource and for=0A> > > > action=0A> > > > to the database I d=
o in order to get a connection:=0A> > > > =0A> > > > public Connection getC=
onnection() throws Exception{=0A> > > > return dataSource.getConnection();=
=0A> > > > }=0A> > > > =0A> > > > =0A> > > > So I use the Connection this w=
ay and I always close the=0A> > > > connections=0A> > > > in order to be re=
turned back to the pool.=0A> > > > The only thing perhaps to mention is tha=
t I create new DAO=0A> > > > objects=0A> > > > passing this data source (I =
don't reuse instances of DAO).=0A> > > > So I don't have a pool of my own. =
I just use DAO pattern .=0A> > > > This is happening in my web application =
GeneralApplication=0A> > > > Is this information adequate/clear?=0A> > > =
=0A> > > Definitely clear. It just doesn't seem to match up with the=0A> > =
> output=0A> > > from the log files. You're seeing=0A> > > =0A> > > SEVERE:=
 The web application [/GeneralApplication] appears to=0A> > > have=0A> > > =
started a thread named [H2 Log Writer GENERICAPPLICATION] but=0A> > > has=
=0A> > > failed to stop it. This is very likely to create a memory leak.=0A=
> > > =0A> > > Which is indicating that the application deployed to=0A> > >=
 "/GeneralApplication" is creating a thread named "H2 Log Writer=0A> > > GE=
NERICAPPLICATION" and never stopping it. I do not believe that=0A> > > this=
 would be associated with the pool created by Tomcat as that=0A> > > would =
be created as a global resource available to all=0A> > > applications=0A> >=
 > and not specific to "/GeneralApplication".=0A> > > =0A> > > I can't real=
ly say a whole lot more about what is going on, just=0A> > > that=0A> > > t=
his strikes me as odd. If it were my app, I'd dig into this more=0A> > > an=
d see what is creating that thread. Possibly with a profiler or=0A> > > thr=
ead dumps.=0A> > > =0A> > > =0A> > > > Also how did you test it?=0A> > > =
=0A> > > I took a stock Tomcat 7 instance, added the <Resource/> tag you=0A=
> > > specified to server.xml and added the <ResourceLink/> tag you=0A> > >=
 specified to context.xml. I then deployed a test app that I have,=0A> > > =
it's a simple Grails app that I routinely use to test database=0A> > > issu=
es. It just uses the JNDI connection specified to do some=0A> > > basic=0A>=
 > > database crud.=0A> > > =0A> > > =0A> > > >Did you use H2?=0A> > > =0A>=
 > > Yes. h2-1.3.161.jar=0A> > > =0A> > > =0A> > > >Because I don't get the=
se errors in catalina.out intermittently=0A> > > >but=0A> > > >always.=0A> =
> > =0A> > > No errors in any of my log files. I tested stopping the Tomcat=
=0A> > > instance, restarting it and undeploying the application.=0A> > > =
=0A> > > Dan=0A> > > =0A> > > =0A> > > =0A> > > > =0A> > > > Thank you=0A> =
> > > =0A> > > > =0A> > > > =0A> > > > =0A> > > > =0A> > > > =0A> > > > Fro=
m: Daniel Mikusa < dmikusa@vmware.com >=0A> > > > To: Hermes Flying < flyin=
ghermes@yahoo.com >=0A> > > > Sent: Wednesday, April 4, 2012 4:25 PM=0A> > =
> > Subject: Re: Discrepancy between Tomcat's connection pool and=0A> > > >=
 tomcat's report on memory leaks=0A> > > > =0A> > > > ----- Original Messag=
e -----=0A> > > > > =0A> > > > > =0A> > > > > Hi Dan,=0A> > > > > =0A> > > =
> > =0A> > > > > The following entry is in server.xml=0A> > > > > =0A> > > =
> > <Resource name=3D"jdbc_GENERIS_RS" auth=3D"Container"=0A> > > > > type=
=3D"javax.sql.DataSource"=0A> > > > > driverClassName=3D"org.h2.Driver"=0A>=
 > > > > url=3D"jdbc:h2:file:/opt/en/repos/tomcat/webapps/GeneralApplicatio=
n/db/internaldatabase;SCHEMA=3Dgenericschema"=0A> > > > > username=3D"root"=
 password=3D"sa"=0A> > > > > maxActive=3D"20" maxIdle=3D"10" maxWait=3D"-1"=
=0A> > > > > />=0A> > > > > =0A> > > > > =0A> > > > > And the following ent=
ry is under=0A> > > > > $TOMCAT_HOME/conf/context.xml=0A> > > > > =0A> > > =
> > <ResourceLink name=3D"jdbc/GenericDataSource"=0A> > > > > global=3D"jdb=
c_GENERIS_RS"=0A> > > > > type=3D"javax.sql.DataSource"/>=0A> > > > > =0A> =
> > > > =0A> > > > > =0A> > > > > Do you need more details than these?=0A> =
> > > > =0A> > > > > =0A> > > > =0A> > > > Seems a little weird. The messag=
e is indicating that the=0A> > > > threads=0A> > > > which have not stopped=
 reside in the application=0A> > > > "[/GeneralApplication]". This would se=
em to imply that the=0A> > > > connection pool was created by the applicati=
on. The=0A> > > > configuration=0A> > > > that you've specified here would =
have the container creating=0A> > > > the=0A> > > > connection pool, which =
shouldn't trigger messages like this.=0A> > > > =0A> > > > Are you sure you=
r application is not creating a connection=0A> > > > pool?=0A> > > > =0A> >=
 > > As a side note, I tried the configuration you mentioned in a=0A> > > >=
 local=0A> > > > Tomcat instance and it worked fine, no errors.=0A> > > > =
=0A> > > > Dan=0A> > > > =0A> > > > =0A> > > > > =0A> > > > > =0A> > > > > =
=0A> > > > > =0A> > > > > =0A> > > > > =0A> > > > > =0A> > > > > From: Dani=
el Mikusa < dmikusa@vmware.com >=0A> > > > > To: Tomcat Users List < users@=
tomcat.apache.org >=0A> > > > > Sent: Wednesday, April 4, 2012 3:35 PM=0A> =
> > > > Subject: Re: Discrepancy between Tomcat's connection pool and=0A> >=
 > > > tomcat's report on memory leaks=0A> > > > > =0A> > > > > =0A> > > > =
> =0A> > > > > ----- Original Message -----=0A> > > > > > Hi,=0A> > > > > >=
 =0A> > > > > > I am using Tomcat 7.0.25 in a Linux machine=0A> > > > > > =
=0A> > > > > > I am using Tomcat's connection pool=0A> > > > > > (org.apach=
e.tomcat.dbcp.dbcp.BasicDataSource). As database=0A> > > > > > I=0A> > > > =
> > am=0A> > > > > > using H2 as a file database.=0A> > > > > =0A> > > > > =
Where are you defining the connection pool? Can you include=0A> > > > > you=
r=0A> > > > > configuration?=0A> > > > > =0A> > > > > Dan=0A> > > > > =0A> =
> > > > =0A> > > > > > All is ok, but I have the following problem.=0A> > >=
 > > > On shutdown of Tomcat I see in catalina.out:=0A> > > > > > =0A> > > =
> > > =0A> > > > > > SEVERE: The web application [/GeneralApplication] appe=
ars=0A> > > > > > to=0A> > > > > > have=0A> > > > > > started a thread name=
d [H2 Log Writer GENERICAPPLICATION]=0A> > > > > > but=0A> > > > > > has=0A=
> > > > > > failed to stop it. This is very likely to create a memory=0A> >=
 > > > > leak.=0A> > > > > > Apr 4, 2012 2:32:54 PM=0A> > > > > > org.apach=
e.catalina.loader.WebappClassLoader=0A> > > > > > clearReferencesThreads=0A=
> > > > > > SEVERE: The web application [/GeneralApplication] appears=0A> >=
 > > > > to=0A> > > > > > have=0A> > > > > > started a thread named [H2 Fil=
e Lock Watchdog=0A> > > > > > /opt/en/repos/tomcat/webapps/GeneralApplicati=
on/db/internaldatabase.lock.db]=0A> > > > > > but has failed to stop it. Th=
is is very likely to create a=0A> > > > > > memory=0A> > > > > > leak.=0A> =
> > > > > =0A> > > > > > Why do I get these messages?=0A> > > > > > As I un=
derstand these messages, H2 is still running on=0A> > > > > > shutdown=0A> =
> > > > > and=0A> > > > > > the documentation they have says that the datab=
ase will=0A> > > > > > shutdown=0A> > > > > > once the last connection is c=
losed (and the connections are=0A> > > > > > handled=0A> > > > > > by the p=
ool i.e. Tomcat)=0A> > > > > > =0A> > > > > > Additionally the input from H=
2 dev is that these messages=0A> > > > > > are=0A> > > > > > a=0A> > > > > =
> Tomcat problem. Tomcat should have first disposed of the=0A> > > > > > co=
nnection=0A> > > > > > pool and then log the running threads.Their explanat=
ion=0A> > > > > > seem=0A> > > > > > correct=0A> > > > > > to me.=0A> > > >=
 > > =0A> > > > > > Is this a known issue? Why do I see these errors in=0A>=
 > > > > > catalina?=0A> > > > > > Should=0A> > > > > > I somehow dispose o=
ff the connection pool myself?=0A> > > > > > =0A> > > > > > Thank you for y=
our time=0A> > > > > > Best Regards,=0A> > > > > > FH=0A> > > > > > =0A> > =
> > > =0A> > > > > --------------------------------------------------------=
-------------=0A> > > > > To unsubscribe, e-mail: users-unsubscribe@tomcat.=
apache.org=0A> > > > > For additional commands, e-mail: users-help@tomcat.a=
pache.org=0A> > > > > =0A> > > > > =0A> > > > > =0A> > > > > =0A> > > > =0A=
> > > > =0A> > > > =0A> > =0A> > ------------------------------------------=
---------------------------=0A> > To unsubscribe, e-mail: users-unsubscribe=
@tomcat.apache.org=0A> > For additional commands, e-mail: users-help@tomcat=
.apache.org=0A> =0A> =0A> =0A=0A-------------------------------------------=
--------------------------=0ATo unsubscribe, e-mail: users-unsubscribe@tomc=
at.apache.org=0AFor additional commands, e-mail: users-help@tomcat.apache.o=
rg
--518238472-1321457877-1333573441=:51438--

From users-return-233362-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 21:31:58 2012
Return-Path: <users-return-233362-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4F53C9F95
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 21:31:58 +0000 (UTC)
Received: (qmail 37494 invoked by uid 500); 4 Apr 2012 21:31:54 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 37432 invoked by uid 500); 4 Apr 2012 21:31:54 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 37423 invoked by uid 99); 4 Apr 2012 21:31:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 21:31:54 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of 2ndgenfilms@gmail.com designates 209.85.160.173 as permitted sender)
Received: from [209.85.160.173] (HELO mail-gy0-f173.google.com) (209.85.160.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 21:31:46 +0000
Received: by ghrr14 with SMTP id r14so589635ghr.18
        for <users@tomcat.apache.org>; Wed, 04 Apr 2012 14:31:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=0Lo0cxbetDNTg/b1xDdIL6sI+RL5Ya8+wBmB5C7PJ3I=;
        b=chuKUqj0kbFSHg8HzTIB8H18Qu62nTQgP9KB2coUaCmmXZo872Jkn3JAUVirtoGZ5H
         XOtMpKufqo0kLQk5A+nYtmgOP+m6a16X5gCvzX1bkTExds57H0NnS01iimbVeTmMMPJ0
         xweXOAr2VDUBm3EkyWULR9OFQsZ4AGIFY7d5qJFqgK9C7cz/KFamNnVc4oiZV5EPbOmS
         siOWeAMfNcD2GpXYcLS0UDJzsEbuybbuiLFiGJYYQc5ri3w5mKwKfDjmalaDYTbADZy+
         LIQv8VKxDv6DHdv2cTo0vd2uORNaoBtvDqNaaht9QiaVBKC3BqbYvEjj9nKoKJpH6oAQ
         UBQQ==
MIME-Version: 1.0
Received: by 10.236.175.41 with SMTP id y29mr14575yhl.60.1333575086037; Wed,
 04 Apr 2012 14:31:26 -0700 (PDT)
Received: by 10.236.9.102 with HTTP; Wed, 4 Apr 2012 14:31:25 -0700 (PDT)
Date: Wed, 4 Apr 2012 16:31:25 -0500
Message-ID: <CACGXvK2gJGkwpMAjGn=PMDeQ__cD9Hc5fiWcLmvWbgPNtJQB8w@mail.gmail.com>
Subject: request.login() not persistent
From: Jerry Malcolm <2ndgenfilms@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=14dae9d2f66c48d97e04bce12536

--14dae9d2f66c48d97e04bce12536
Content-Type: text/plain; charset=ISO-8859-1

I am using TC 7.0 on a couple of servers.  I have id/pw fields and a
'login' button at the top of all guest pages on my site.  If the user
clicks the login, it goes to a guest page that does the request.login()
method call and then redirects to a protected page.  If the login fails,
the normal j_security login form stuff kicks in on the protected page and
the user logs in the old way.

OK, this worked on one server for several months.  It never worked on the
other server.  On that server, the request.login() succeeded according to
the logs.  But when it redirected to the protected page, the j_security
login form would appear.  I could log in from there and everything was
fine.

Then a couple of weeks ago, the server that was working just started doing
the same thing.  So now, the request.login() is useless.

I am looking at the logs.  The request.login() succeeded.  And the
request.getUserPrincipal() is the correct after the login on that page.
But as soon as I redirect to another page, the userPrincipal is now null.

I'm not saying I didn't have some configuration something wrong somewhere
on one of the servers and now it's wrong on both. But I'm totally baffled.
I have no clue what could be going wrong.  I'm not invalidating the session
or doing a request.logoff().  The sessionId is the same on the login page
and the subsequent redirect page.  And again, if I now login using the
j_security form on the redirected target page, I'm logged in for the
duration.  So it's nothing like an invalid id/pw or anything (and it fails
the same on all id/pws)

My first question... am I totally wrong on my philosophy for using the
request.login() method and redirecting to a protected page once logged in?
It did work for months.  So I assume that's not a fundamental design
problem.

If the design is ok, what's happening?  The log shows I'm logged in at the
end of one page that had the request.login() and then I'm not logged in at
the beginning of the redirect target page.

Any suggestions for what to try? How can I debug this?

Thx.

--14dae9d2f66c48d97e04bce12536--

From users-return-233363-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr  4 22:11:38 2012
Return-Path: <users-return-233363-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 95FA99D3F
	for <apmail-tomcat-users-archive@www.apache.org>; Wed,  4 Apr 2012 22:11:38 +0000 (UTC)
Received: (qmail 55781 invoked by uid 500); 4 Apr 2012 22:11:38 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 55657 invoked by uid 500); 4 Apr 2012 22:11:37 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 55410 invoked by uid 99); 4 Apr 2012 22:11:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 22:11:37 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [216.139.250.139] (HELO joe.nabble.com) (216.139.250.139)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 Apr 2012 22:11:18 +0000
Received: from alf.nabble.com ([192.168.236.21])
	by joe.nabble.com with esmtp (Exim 4.72)
	(envelope-from <gscanga@federatedinv.com>)
	id 1SFYPT-0004T1-V9
	for users@tomcat.apache.org; Wed, 04 Apr 2012 15:10:35 -0700
Date: Wed, 4 Apr 2012 15:10:35 -0700 (PDT)
From: mandg <gscanga@federatedinv.com>
To: users@tomcat.apache.org
Message-ID: <1333577435957-4687935.post@n6.nabble.com>
In-Reply-To: <1333574622500-4687812.post@n6.nabble.com>
References: <1326928153152-3814537.post@n6.nabble.com> <4F1768FD.7000400@kippdata.de> <1326950991288-3874653.post@n6.nabble.com> <4F18237E.4030101@pidster.com> <1327025514408-3882571.post@n6.nabble.com> <1333574622500-4687812.post@n6.nabble.com>
Subject: Re: Is SSL keystore with AJP connector possible?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Ryan- in my case, it turned that the SSL settings were configured in
another part of the application - HP Service Center in this case. The
server.xml file is still using the AJP connector.  I know that doesn't help
you much here though unless you're using the same app.

--
View this message in context: http://tomcat.10.n6.nabble.com/Is-SSL-keystore-with-AJP-connector-possible-tp3814537p4687935.html
Sent from the Tomcat - User mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233364-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 00:32:05 2012
Return-Path: <users-return-233364-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 98F299FF2
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 00:32:05 +0000 (UTC)
Received: (qmail 14396 invoked by uid 500); 5 Apr 2012 00:32:02 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 14187 invoked by uid 500); 5 Apr 2012 00:32:02 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 14177 invoked by uid 99); 5 Apr 2012 00:32:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 00:32:01 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [76.96.59.211] (HELO QMTA11.westchester.pa.mail.comcast.net) (76.96.59.211)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 00:31:54 +0000
Received: from omta04.westchester.pa.mail.comcast.net ([76.96.62.35])
	by QMTA11.westchester.pa.mail.comcast.net with comcast
	id u0FC1i0020ldTLk5B0XZiw; Thu, 05 Apr 2012 00:31:33 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta04.westchester.pa.mail.comcast.net with comcast
	id u0XZ1i00k38FjT13Q0XZ8Q; Thu, 05 Apr 2012 00:31:33 +0000
Message-ID: <4F7CE7E4.8000700@christopherschultz.net>
Date: Wed, 04 Apr 2012 20:31:32 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Eclipse Project Files for Tomcat 7
References: <CAKaoAEwZN=M4NSEioULCrW_U6eg9DFo++R9Pfv-GfEf-T1HdpQ@mail.gmail.com> <4F76FB57.9050407@apache.org>
In-Reply-To: <4F76FB57.9050407@apache.org>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Mark,

On 3/31/12 8:40 AM, Mark Thomas wrote:
> /res/ide-support/eclipse

Also, as I've discovered:

$ echo "base.path=[path where downloads will be put]" > build.properties

$ ant ide-eclipse

Then, go to Preferences | Java/Build Path/Classpath Variables and set
the following variables:

ANT_HOME=path to your Ant install (where lib/ant.jar can be found)
TOMCAT_LIBS_BASE=[whatever you set base.path to above]

Note that TOMCAT_LIBS_BASE will be Eclipse-wide, so you'll want to set
it to someplace where libraries for all versions of Tomcat (trunk,
7.0.x, etc.) can all coexist (i.e. not within one particular project
directory).

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk985+QACgkQ9CaO5/Lv0PCk1wCfcDFNcV4SOMR6cg0dVncHtBbK
W6MAoLBHN0NIrg3QmWRm/+GmQ7JldMOf
=ghDx
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233365-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 00:50:20 2012
Return-Path: <users-return-233365-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EB8C49525
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 00:50:20 +0000 (UTC)
Received: (qmail 53565 invoked by uid 500); 5 Apr 2012 00:50:17 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 53309 invoked by uid 500); 5 Apr 2012 00:50:17 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 53300 invoked by uid 99); 5 Apr 2012 00:50:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 00:50:17 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [76.96.62.16] (HELO qmta01.westchester.pa.mail.comcast.net) (76.96.62.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 00:50:09 +0000
Received: from omta22.westchester.pa.mail.comcast.net ([76.96.62.73])
	by qmta01.westchester.pa.mail.comcast.net with comcast
	id tyU81i0051ap0As510pp0Z; Thu, 05 Apr 2012 00:49:49 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta22.westchester.pa.mail.comcast.net with comcast
	id u0pp1i01t38FjT13i0ppFx; Thu, 05 Apr 2012 00:49:49 +0000
Message-ID: <4F7CEC2C.7030701@christopherschultz.net>
Date: Wed, 04 Apr 2012 20:49:48 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: request.login() not persistent
References: <CACGXvK2gJGkwpMAjGn=PMDeQ__cD9Hc5fiWcLmvWbgPNtJQB8w@mail.gmail.com>
In-Reply-To: <CACGXvK2gJGkwpMAjGn=PMDeQ__cD9Hc5fiWcLmvWbgPNtJQB8w@mail.gmail.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Jerry,

On 4/4/12 5:31 PM, Jerry Malcolm wrote:
> I am using TC 7.0 on a couple of servers.

7.0.what?

There have been a bunch of questions about authentication and
authorization lately involving a (somewhat) recent change when
resources aren't protected buy a <security-constraint> and are calling
request.getPrincipal().

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk987CwACgkQ9CaO5/Lv0PD9cgCgnzLbeVE97a+vPw0SWsafDpCT
e9sAoKYPJWqf86mkd7JtbBNDkrv2Wuwb
=K8KQ
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233366-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 04:44:48 2012
Return-Path: <users-return-233366-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9EE109748
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 04:44:48 +0000 (UTC)
Received: (qmail 26777 invoked by uid 500); 5 Apr 2012 04:44:45 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 26646 invoked by uid 500); 5 Apr 2012 04:44:42 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 26619 invoked by uid 99); 5 Apr 2012 04:44:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 04:44:42 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of 2ndgenfilms@gmail.com designates 209.85.161.173 as permitted sender)
Received: from [209.85.161.173] (HELO mail-gx0-f173.google.com) (209.85.161.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 04:44:36 +0000
Received: by ggnp2 with SMTP id p2so678780ggn.18
        for <users@tomcat.apache.org>; Wed, 04 Apr 2012 21:44:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=X+MsK6pvqi+Yr4hpxTwIu2tT41w6+5Sx0e+H856Vaug=;
        b=BXo0UCCcl8xSQZReUmNljVDWnBL53yRRXofawbwdOiTIZsfYKPC6lmLvzkdXKa2OTp
         75+BZvHPhuos3v9KnldARe8hT2NOwXfp0Ka56zFF1SAz8p6HR1yoCwmO9Nc4VqNb50q8
         aMuTY3hGyid83IwXHpUZ1NCXki56+7eMY23hEjEtTi9qZmhwBb8bHvDgWDyu7DXMTdiU
         reNghHvuM2aEWW5RbUfvSMbocufvGtL2JoEW0Jx5sAEwbUoaLZY0NpDJ9JWzpFU9jWv8
         Noqq631HPMn8h9eZ2xdIuhXQVIBL9dOnMucUMZS/QAQ7U6F/DG16Lq9iaeidhjV3s8M5
         eRdQ==
MIME-Version: 1.0
Received: by 10.236.195.71 with SMTP id o47mr954844yhn.5.1333601055615; Wed,
 04 Apr 2012 21:44:15 -0700 (PDT)
Received: by 10.236.9.102 with HTTP; Wed, 4 Apr 2012 21:44:15 -0700 (PDT)
In-Reply-To: <4F7CEC2C.7030701@christopherschultz.net>
References: <CACGXvK2gJGkwpMAjGn=PMDeQ__cD9Hc5fiWcLmvWbgPNtJQB8w@mail.gmail.com>
	<4F7CEC2C.7030701@christopherschultz.net>
Date: Wed, 4 Apr 2012 23:44:15 -0500
Message-ID: <CACGXvK0_5CZQr1j_qtj+h6eyWaMQb=9mgOQ0QNgot8iZ625VJg@mail.gmail.com>
Subject: Re: request.login() not persistent
From: Jerry Malcolm <2ndgenfilms@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=20cf305e2501312ae704bce73102

--20cf305e2501312ae704bce73102
Content-Type: text/plain; charset=ISO-8859-1

Chris,

Good question on the version.  But I'm not sure how to tell.  Both servers
are in a directory named Tomcat 7.0.  But I can't remember if that was the
default or if I forced that name.  Where can I look in the install
directory to find the version?  I do know that I installed both servers
around  the first of December 2011.  I haven't updated since then.

You mentioned there were some known problems with using
getUserPrincipal().  It might be related.  However, I was only using
getUserPrincipal() for debug purposes to show whether I was logged on or
not.  The real symptom of the problem was after logging on successfully and
redirecting to another page, the login form page pops up forcing a second
login.  If it's all tied together, then fine.  But if the problem you
referenced only had to do with results of getUserPrincipal and nothing
else, I doubt it is related to my problem.

If there is a newer version since December, and there are known fixes in
this area, I'll go ahead and upgrade.  But I really don't want to update
and risk more instability unless there is reason to believe upgrading will
fix the problem.

Suggestions?

Thx

On Wed, Apr 4, 2012 at 7:49 PM, Christopher Schultz <
chris@christopherschultz.net> wrote:

> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Jerry,
>
> On 4/4/12 5:31 PM, Jerry Malcolm wrote:
> > I am using TC 7.0 on a couple of servers.
>
> 7.0.what?
>
> There have been a bunch of questions about authentication and
> authorization lately involving a (somewhat) recent change when
> resources aren't protected buy a <security-constraint> and are calling
> request.getPrincipal().
>
> - -chris
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
> Comment: GPGTools - http://gpgtools.org
> Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/
>
> iEYEARECAAYFAk987CwACgkQ9CaO5/Lv0PD9cgCgnzLbeVE97a+vPw0SWsafDpCT
> e9sAoKYPJWqf86mkd7JtbBNDkrv2Wuwb
> =K8KQ
> -----END PGP SIGNATURE-----
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>
>

--20cf305e2501312ae704bce73102--

From users-return-233367-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 06:36:41 2012
Return-Path: <users-return-233367-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E7A809A39
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 06:36:41 +0000 (UTC)
Received: (qmail 61666 invoked by uid 500); 5 Apr 2012 06:36:38 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 61574 invoked by uid 500); 5 Apr 2012 06:36:37 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 61545 invoked by uid 99); 5 Apr 2012 06:36:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 06:36:36 +0000
X-ASF-Spam-Status: No, hits=-1.6 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [195.245.230.34] (HELO mail1.bemta3.messagelabs.com) (195.245.230.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 06:36:31 +0000
Received: from [85.158.137.67:36987] by server-12.bemta-3.messagelabs.com id 25/7B-30663-95D3D7F4; Thu, 05 Apr 2012 06:36:09 +0000
X-Env-Sender: Leigh.Anderson@betfair.com
X-Msg-Ref: server-10.tower-139.messagelabs.com!1333607769!22313309!1
X-Originating-IP: [213.86.197.188]
X-StarScan-Version: 6.5.7; banners=betfair.com,-,-
X-VirusChecked: Checked
Received: (qmail 20970 invoked from network); 5 Apr 2012 06:36:09 -0000
Received: from unknown (HELO HAMCAS04.uk.betfair.local) (213.86.197.188)
  by server-10.tower-139.messagelabs.com with SMTP; 5 Apr 2012 06:36:09 -0000
Received: from HAMMBX03.uk.betfair.local ([fe80::7828:724c:8e7a:6d6b]) by
 HAMCAS04.uk.betfair.local ([::1]) with mapi id 14.01.0355.002; Thu, 5 Apr
 2012 07:36:08 +0100
From: Leigh Anderson <Leigh.Anderson@betfair.com>
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Tomcat7-maven-plugin 2.0-beta1 and useSeparateTomcatClassloader
 fails with run goal
Thread-Topic: Tomcat7-maven-plugin 2.0-beta1 and
 useSeparateTomcatClassloader fails with run goal
Thread-Index: AQHNEWW+jphHNngJdEuNYm49rCONM5aKae+AgAFgDAA=
Date: Thu, 5 Apr 2012 06:36:08 +0000
Message-ID: <CBA2FB65.D678%leigh.anderson@betfair.com>
In-Reply-To: <CAPoyBqRkjgKApxNk_SfrKMX8GPB1d6MZj-c-nVgpZ+JjZL0D=g@mail.gmail.com>
Accept-Language: en-GB, en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-originating-ip: [10.9.0.2]
Content-Type: text/plain; charset="us-ascii"
Content-ID: <B028914EBC8B254CA956D69B1C0F21F1@betfair.com>
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Olivier,

I'm not able to run this with tomcat6 as it's a Servlet 3.0 project. I'll
get the issue created -- should have some time next week to put together a=

sample project.


Thanks,
Leigh

On 04/04/2012 11:36, "Olivier Lamy" <olamy@apache.org> wrote:

>Hello,
>Looks to be an issue (does that work with tomcat6:run ?)
>Could you create an issue here:
>https://issues.apache.org/jira/browse/MTOMCAT (if possible with a
>small sample project to reproduce).
>
>Thanks
>--=20
>Olivier Lamy
>Talend: http://coders.talend.com
>http://twitter.com/olamy | http://linkedin.com/in/olamy
>
>2012/4/3 Leigh Anderson <Leigh.Anderson@betfair.com>:
>> Hi All,
>>
>> I'm trying to start a web application with 'mvn tomcat7:run'. It seems
>> that with the configuration below it fails with the following error:
>>
>>
>>        [INFO]
>> -----------------------------------------------------------------------=
-
>>        [ERROR] Failed to execute goal
>> org.apache.tomcat.maven:tomcat7-maven-plugin:2.0-beta-1:run
>>(default-cli)
>> on=20project mantis-test-web-app: No such archiver: 'jar'. -> [Help 1]
>>        [ERROR]
>>        [ERROR] To see the full stack trace of the errors, re-run Maven
>>with the
>> -e switch.
>>        [ERROR] Re-run Maven using the -X switch to enable full debug
>>logging.
>>
>> I have also tried
>>        * 'mvn tomcat:run-war', which seems to get past this point, but
>>then the
>> application will not start because the 'additionalClasspathDir' propert=
y
>> is not supported by the 'run-war' goal.
>>        * removing 'useSeparateTomcatClassLoader' which then doesn't
>>load the
>> Spring instrumenting class loader required to use AspectJ LTW, specifie=
d
>> in
>> context.xml. I have confirmed that I get the same 'no such archiver'
>>error
>> if I remove the
>> context.xml, so I don't believe this to be the cause.
>>
>> Is there something I've missed in the configuration?
>>
>> Cheers,
>> Leigh
>>
>>
>>
>>
>>                    <plugin>
>>                        <groupId>org.apache.tomcat.maven</groupId>
>>            =20           <artifactId>tomcat7-maven-plugin</artifactId>
>>                        <version>2.0-beta-1</version>
>>                        <configuration>
>>                            <systemProperties>
>>                =20
>><log4j.defaultInitOverride>true</log4j.defaultInitOverride>
>>                                <HOSTNAME>localhost</HOSTNAME>
>>                                <port.http>9090</port.http>
>>                                <port.https>8443</port.https>
>>                            </systemProperties>
>>                            <port>9090</port>
>>                            <httpsPort>8443</httpsPort>
>>                            <path>/</path>
>>                            <useTestClasspath>false</useTestClasspath>
>>                            <additionalClasspathDirs>
>>
>>=20
>><additionalClasspathDir>${project.basedir}/config</additionalClasspathDi=
r
>>>
>>                            </additionalClasspathDirs>
>>
>> <useSeparateTomcatClassLoader>true</useSeparateTomcatClassLoader>
>>                        </configuration>
>>                        <dependencies>
>>                            <dependency>
>>                                <groupId>org.springframework</groupId>
>>
>>                =20
>><artifactId>spring-instrument-tomcat</artifactId>
>>                                <version>${spring.version}</version>
>>                            </dependency>
>>                        </dependencies>
>>                    </plugin>
>>
>>
>>
>> _______________________________________________________________________=
_
>> In order to protect our email recipients, Betfair Group use SkyScan fro=
m
>> MessageLabs to scan all Incoming and Outgoing mail for viruses.
>>
>> _______________________________________________________________________=
_
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>> For additional commands, e-mail: users-help@tomcat.apache.org
>>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>For additional commands, e-mail: users-help@tomcat.apache.org
>


________________________________________________________________________
In order to protect our email recipients, Betfair Group use SkyScan from=20=

MessageLabs to scan all Incoming and Outgoing mail for viruses.

________________________________________________________________________

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233368-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 07:32:17 2012
Return-Path: <users-return-233368-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 10C849793
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 07:32:16 +0000 (UTC)
Received: (qmail 89011 invoked by uid 500); 5 Apr 2012 07:32:13 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 87619 invoked by uid 500); 5 Apr 2012 07:32:07 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 87602 invoked by uid 99); 5 Apr 2012 07:32:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 07:32:06 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of oferi@checkpoint.com designates 194.29.34.68 as permitted sender)
Received: from [194.29.34.68] (HELO michael.checkpoint.com) (194.29.34.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 07:31:55 +0000
Received: from il-ex01.ad.checkpoint.com (il-ex01.ad.checkpoint.com [194.29.34.26])
	by michael.checkpoint.com (8.13.8/8.13.8) with ESMTP id q357VXp0018730
	for <users@tomcat.apache.org>; Thu, 5 Apr 2012 10:31:34 +0300
X-CheckPoint: {4F7D57F1-4-1B221DC2-5FFFF}
Received: from il-ex03.ad.checkpoint.com (194.29.34.71) by
 il-ex01.ad.checkpoint.com (194.29.34.26) with Microsoft SMTP Server (TLS) id
 8.3.213.0; Thu, 5 Apr 2012 10:31:33 +0300
Received: from il-ex01.ad.checkpoint.com ([126.0.0.2]) by
 il-ex03.ad.checkpoint.com ([194.29.34.71]) with mapi; Thu, 5 Apr 2012
 10:31:33 +0300
From: Ofer Israeli <oferi@checkpoint.com>
To: Tomcat Users List <users@tomcat.apache.org>
Date: Thu, 5 Apr 2012 10:31:31 +0300
Subject: RE: Bug in Tomcat AJP Connector?
Thread-Topic: Bug in Tomcat AJP Connector?
Thread-Index: Ac0ShpqUxaPBmRK+TNGu5OyPC+ytdgAdyjUg
Message-ID: <217DDBC2BB1E394CA9E7446337CBDEF20102DEDB4FA0@il-ex01.ad.checkpoint.com>
References: <217DDBC2BB1E394CA9E7446337CBDEF20102DEDB4F4A@il-ex01.ad.checkpoint.com>
 <4F7C81BB.1040804@apache.org>
In-Reply-To: <4F7C81BB.1040804@apache.org>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
x-kse-antivirus-interceptor-info: scan successful
x-kse-antivirus-info: Clean
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-KSE-AntiSpam-Interceptor-Info: protection disabled

Mark Thomas wrote:
> On 04/04/2012 17:02, Ofer Israeli wrote:
>> Hi all,
>>=20
>> We have recently witnessed a strange situation.  Our Tomcat (6.0.35)
>> listens on 2 ports: 8080 and 8009, handling HTTP and AJP
>> respectively. At some point in time we found that Apache is replying
>> HTTP 503s to all clients and a look at netstat showed that indeed
>> Apache could not communicate with Tomcat - there were many
>> connections in state SYN_SENT, that were never replied.  A test of
>> attempting to connect to Tomcat's 8009 port turned out to give the
>> same result, so the issue was obviously in Tomcat and not Apache.
>> But netstat also showed that Tomcat was listening on port 8009.
>> After digging into the logs, we found that there was an Out of Memory
>> exception in the JK's accept() sequence and once this exception was
>> caught there was a message of "terminating thread".
>>=20
>> So although the exception is caught and handled by killing the thread
>> (isn't that a little drastic?), the socket isn't closed beforehand
>> and thus the OS thinks that the port is still fine (in LISTENING
>> state), as although the thread is dead, the process is alive.  Has
>> anyone encountered this or knows if this bug is known?
>=20
> Once you have an OOME all bets are off. The JVM needs to be restarted.
> There is no guarantee of reliable operation after an OOME.
>=20
> Mark

Hi Mark,
I agree that there in such a situation the JVM should be restarted, but it =
isn't restarted by Tomcat.  On the other hand, Tomcat does take some precau=
tious actions and kills the accepting thread, but in such a case it should =
also close the socket that thread is listening on otherwise it is leaving g=
arbage around after the thread's death.
Do you see any reason as not to close the listening socket?

Ofer=

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233369-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 10:51:04 2012
Return-Path: <users-return-233369-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2E31A934E
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 10:51:04 +0000 (UTC)
Received: (qmail 56635 invoked by uid 500); 5 Apr 2012 10:51:00 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 56523 invoked by uid 500); 5 Apr 2012 10:51:00 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 56511 invoked by uid 99); 5 Apr 2012 10:51:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 10:51:00 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of knst.kolinko@gmail.com designates 209.85.160.173 as permitted sender)
Received: from [209.85.160.173] (HELO mail-gy0-f173.google.com) (209.85.160.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 10:50:55 +0000
Received: by ghrr14 with SMTP id r14so767142ghr.18
        for <users@tomcat.apache.org>; Thu, 05 Apr 2012 03:50:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=gz8knKsJZfRWJcm6Cx2NoXBgxQvn6YYkoPIVTjqQQiM=;
        b=Vf4+ANglYO1nEWuwW2qbpUAD3jHtiF8hlPU7B9BHdlX/4JdUq2uzeG1fqggZU2vO52
         nLDJsCzRPYjS/AFV9+vzHWnez8cNELgrkapuNsMgikLAvhDpj5gWKCYGCkjA6au5u5YI
         H694W0WtyfALX9X+Ih9lmJtpcfvymlYE81ol96+oAYNt1BBTIwsaIpF4NRyQIdDlDEdI
         adKhAdu2OyNGIewMk89YYg+nhn0iq2kPWY5R1rcNeJ4/8XsM7UwAJB98aw6L0aiOpBPA
         OSRM6rB9roQszFV8sENdCbQl2y3WQAaav9hI7gq1pJXpozp5iGM/YfhDMfFEQepFiaxd
         6WVA==
MIME-Version: 1.0
Received: by 10.236.189.98 with SMTP id b62mr1771423yhn.9.1333623034846; Thu,
 05 Apr 2012 03:50:34 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Thu, 5 Apr 2012 03:50:34 -0700 (PDT)
In-Reply-To: <4F7CE7E4.8000700@christopherschultz.net>
References: <CAKaoAEwZN=M4NSEioULCrW_U6eg9DFo++R9Pfv-GfEf-T1HdpQ@mail.gmail.com>
	<4F76FB57.9050407@apache.org>
	<4F7CE7E4.8000700@christopherschultz.net>
Date: Thu, 5 Apr 2012 14:50:34 +0400
Message-ID: <CABzHfVm+MgazJFWWGjNni=0QxdeK0L6-2SVUwjHD-ZmpQHXtog@mail.gmail.com>
Subject: Re: Eclipse Project Files for Tomcat 7
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

2012/4/5 Christopher Schultz <chris@christopherschultz.net>:
>
> Mark,
>
> On 3/31/12 8:40 AM, Mark Thomas wrote:
>> /res/ide-support/eclipse
>
> Also, as I've discovered:

There is
http://tomcat.apache.org/tomcat-7.0-doc/building.html#Building_with_Eclipse

Maybe it is not so easy to find  (and I forgot about "ant ide-eclipse"
when you asked your question).

>
> $ echo "base.path=[path where downloads will be put]" > build.properties
>
> $ ant ide-eclipse
>
> Then, go to Preferences | Java/Build Path/Classpath Variables and set
> the following variables:
>
> ANT_HOME=path to your Ant install (where lib/ant.jar can be found)
> TOMCAT_LIBS_BASE=[whatever you set base.path to above]
>
> Note that TOMCAT_LIBS_BASE will be Eclipse-wide, so you'll want to set
> it to someplace where libraries for all versions of Tomcat (trunk,
> 7.0.x, etc.) can all coexist (i.e. not within one particular project
> directory).
>
> - -chris
>

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233370-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 11:21:10 2012
Return-Path: <users-return-233370-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1F16C9059
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 11:21:10 +0000 (UTC)
Received: (qmail 35676 invoked by uid 500); 5 Apr 2012 11:21:06 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 35618 invoked by uid 500); 5 Apr 2012 11:21:06 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 35606 invoked by uid 99); 5 Apr 2012 11:21:06 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 11:21:06 +0000
Received: from localhost (HELO [192.168.23.9]) (127.0.0.1)
  (smtp-auth username markt, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 11:21:06 +0000
Message-ID: <4F7D8018.2070204@apache.org>
Date: Thu, 05 Apr 2012 12:20:56 +0100
From: Mark Thomas <markt@apache.org>
User-Agent: Mozilla/5.0 (Windows NT 5.2; WOW64; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Discrepancy between Tomcat's connection pool and tomcat's report
 on memory leaks
References: <1333541107.27592.YahooMailNeo@web122304.mail.ne1.yahoo.com> <4F7C420C.8070401@pidster.com> <1333544069.69754.YahooMailNeo@web122303.mail.ne1.yahoo.com> <4F7C6BDF.9080006@apache.org> <1333556061.12060.YahooMailNeo@web122304.mail.ne1.yahoo.com> <4F7C810F.9030002@apache.org> <1333573177.33592.YahooMailNeo@web122301.mail.ne1.yahoo.com>
In-Reply-To: <1333573177.33592.YahooMailNeo@web122301.mail.ne1.yahoo.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

On 04/04/2012 21:59, Hermes Flying wrote:
> Thank you for your explanation. I will take this to H2 but I have one
> more question on your comment:
> 
>>> Nope. It is a memory leak in the JDBC driver which is why Tomcat
>>> is reporting it. When a web application shuts down, nothing
>>> should be retaining a reference to the web application class
>>> loader. That the JDBC driver does, is a bug in the JDBC driver.
> 
> My question is: is this leak a general problem that should concern me
> or something that is an issue only on application undeployment?

You will get a memory leak when the application is stopped for any
reason. If this happens at Tomcat shut down it isn't that much of an
issue. At any other point it is a problem.

Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233371-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 11:24:03 2012
Return-Path: <users-return-233371-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 80FD19219
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 11:24:03 +0000 (UTC)
Received: (qmail 52386 invoked by uid 500); 5 Apr 2012 11:24:00 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 52176 invoked by uid 500); 5 Apr 2012 11:24:00 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 52167 invoked by uid 99); 5 Apr 2012 11:24:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 11:24:00 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of 2ndgenfilms@gmail.com designates 209.85.161.173 as permitted sender)
Received: from [209.85.161.173] (HELO mail-gx0-f173.google.com) (209.85.161.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 11:23:53 +0000
Received: by ggnp2 with SMTP id p2so776813ggn.18
        for <users@tomcat.apache.org>; Thu, 05 Apr 2012 04:23:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=/Hlap79Dpy4VkLOY0wY8ATO0mAYhBak7DDssMLYaJkE=;
        b=VtE4u/4HiikjC/DtanTPO+SwnUh5h/VM/qhPMZAxWFG1XIuwrEhz8J3HLVLWJ5f1+y
         /6I8TAFMc17IN0lZ9bCmALrb5rDj9NbBHuFv+wsBed2K2T+cgkWyKtjc/pFuXtqvjqys
         rLRVWF4LtaT+qZoX6e5vFKw5a53XzCBp89WXjj5zPgFGZocoD6nE96zAn8GE+g0NpfQ3
         6po04JACOB+/2ffTEIY6y0gV6phsTmswhSq5NFzSAGStdZAB0kCst1FkhNjNoXsFuDz9
         vbUFZptkFywhWdZiQz5u75Jvu/0fldDRc1LmiS7Tnl11W8HBFwc5gIoCP3R/U1fpLo1Z
         Rxpw==
MIME-Version: 1.0
Received: by 10.236.144.133 with SMTP id n5mr1743634yhj.54.1333625013250; Thu,
 05 Apr 2012 04:23:33 -0700 (PDT)
Received: by 10.236.9.102 with HTTP; Thu, 5 Apr 2012 04:23:33 -0700 (PDT)
In-Reply-To: <CACGXvK0_5CZQr1j_qtj+h6eyWaMQb=9mgOQ0QNgot8iZ625VJg@mail.gmail.com>
References: <CACGXvK2gJGkwpMAjGn=PMDeQ__cD9Hc5fiWcLmvWbgPNtJQB8w@mail.gmail.com>
	<4F7CEC2C.7030701@christopherschultz.net>
	<CACGXvK0_5CZQr1j_qtj+h6eyWaMQb=9mgOQ0QNgot8iZ625VJg@mail.gmail.com>
Date: Thu, 5 Apr 2012 06:23:33 -0500
Message-ID: <CACGXvK2tCH4d_DmfgqxKj++enQux6=m5rxxz4VO4JgsnPg_C7A@mail.gmail.com>
Subject: Re: request.login() not persistent
From: Jerry Malcolm <2ndgenfilms@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=20cf303ea3282daaa004bcecc5b2

--20cf303ea3282daaa004bcecc5b2
Content-Type: text/plain; charset=ISO-8859-1

Ok, finally located the zip in my downloads folder.  I'm currently running
7.0.23.  But I'm still curious about how to find out the version if I
hadn't been able to locate the zip.  Is the version buried somewhere in the
install folder?

Jerry


On Wed, Apr 4, 2012 at 11:44 PM, Jerry Malcolm <2ndgenfilms@gmail.com>wrote:

> Chris,
>
> Good question on the version.  But I'm not sure how to tell.  Both servers
> are in a directory named Tomcat 7.0.  But I can't remember if that was the
> default or if I forced that name.  Where can I look in the install
> directory to find the version?  I do know that I installed both servers
> around  the first of December 2011.  I haven't updated since then.
>
> You mentioned there were some known problems with using
> getUserPrincipal().  It might be related.  However, I was only using
> getUserPrincipal() for debug purposes to show whether I was logged on or
> not.  The real symptom of the problem was after logging on successfully and
> redirecting to another page, the login form page pops up forcing a second
> login.  If it's all tied together, then fine.  But if the problem you
> referenced only had to do with results of getUserPrincipal and nothing
> else, I doubt it is related to my problem.
>
> If there is a newer version since December, and there are known fixes in
> this area, I'll go ahead and upgrade.  But I really don't want to update
> and risk more instability unless there is reason to believe upgrading will
> fix the problem.
>
> Suggestions?
>
> Thx
>
>
> On Wed, Apr 4, 2012 at 7:49 PM, Christopher Schultz <
> chris@christopherschultz.net> wrote:
>
>> -----BEGIN PGP SIGNED MESSAGE-----
>> Hash: SHA1
>>
>> Jerry,
>>
>> On 4/4/12 5:31 PM, Jerry Malcolm wrote:
>> > I am using TC 7.0 on a couple of servers.
>>
>> 7.0.what?
>>
>> There have been a bunch of questions about authentication and
>> authorization lately involving a (somewhat) recent change when
>> resources aren't protected buy a <security-constraint> and are calling
>> request.getPrincipal().
>>
>> - -chris
>> -----BEGIN PGP SIGNATURE-----
>> Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
>> Comment: GPGTools - http://gpgtools.org
>> Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/
>>
>> iEYEARECAAYFAk987CwACgkQ9CaO5/Lv0PD9cgCgnzLbeVE97a+vPw0SWsafDpCT
>> e9sAoKYPJWqf86mkd7JtbBNDkrv2Wuwb
>> =K8KQ
>> -----END PGP SIGNATURE-----
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>> For additional commands, e-mail: users-help@tomcat.apache.org
>>
>>
>

--20cf303ea3282daaa004bcecc5b2--

From users-return-233372-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 11:28:19 2012
Return-Path: <users-return-233372-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 484259D03
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 11:28:19 +0000 (UTC)
Received: (qmail 65464 invoked by uid 500); 5 Apr 2012 11:28:15 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 65385 invoked by uid 500); 5 Apr 2012 11:28:15 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 65375 invoked by uid 99); 5 Apr 2012 11:28:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 11:28:15 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of knst.kolinko@gmail.com designates 209.85.161.173 as permitted sender)
Received: from [209.85.161.173] (HELO mail-gx0-f173.google.com) (209.85.161.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 11:28:08 +0000
Received: by ggnp2 with SMTP id p2so778185ggn.18
        for <users@tomcat.apache.org>; Thu, 05 Apr 2012 04:27:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=OotWKYHtSwg5V+ZN/sS96gF2z7nICIM0B22k99UzCFw=;
        b=0oWFcRSH8A8iMKlx0b/W51fz+0NTjduICUlR0JEvCCfgHaVWnpxWZciGuLWbbBM+zJ
         CCG9vGLU/naoDHKjWGgrb3o+x2UttSNwHjqW/ojgSLlgAwGbyCm69S0pcayjl8HS1B/x
         LnuPjNb6hqTZz6H1mAR5KimOskSCzrSJSvh7G5VrJlZecMZhDfgLuQEci5k5diouDyL/
         xc49SGIug+DlgWyoXPSdj1kE0zh80zdd2dOdTxZXBvTogbEjGWT6xI94JEmUzQD3wadS
         91za4cWtVOHTisYrAGfOZp+uCcrAM8Oj/W0rdSqjZGYD+G3ndxkZRhc+ac5Ytbdi+pkw
         13sA==
MIME-Version: 1.0
Received: by 10.236.189.98 with SMTP id b62mr1886927yhn.9.1333625267437; Thu,
 05 Apr 2012 04:27:47 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Thu, 5 Apr 2012 04:27:47 -0700 (PDT)
In-Reply-To: <CACGXvK2tCH4d_DmfgqxKj++enQux6=m5rxxz4VO4JgsnPg_C7A@mail.gmail.com>
References: <CACGXvK2gJGkwpMAjGn=PMDeQ__cD9Hc5fiWcLmvWbgPNtJQB8w@mail.gmail.com>
	<4F7CEC2C.7030701@christopherschultz.net>
	<CACGXvK0_5CZQr1j_qtj+h6eyWaMQb=9mgOQ0QNgot8iZ625VJg@mail.gmail.com>
	<CACGXvK2tCH4d_DmfgqxKj++enQux6=m5rxxz4VO4JgsnPg_C7A@mail.gmail.com>
Date: Thu, 5 Apr 2012 15:27:47 +0400
Message-ID: <CABzHfVm9LSNdQXnkJiutLZodLf5OZ1+7j-xQXFtaPk4Xo5Wg_Q@mail.gmail.com>
Subject: Re: request.login() not persistent
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

2012/4/5 Jerry Malcolm <2ndgenfilms@gmail.com>:
> Ok, finally located the zip in my downloads folder. =A0I'm currently runn=
ing
> 7.0.23. =A0But I'm still curious about how to find out the version if I
> hadn't been able to locate the zip. =A0Is the version buried somewhere in=
 the
> install folder?
>

catalina.jar
 ->  \org\apache\catalina\util\ServerInfo.properties


If you have *.bat files (e.g. from a zip distributive) you can run version.=
bat

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233373-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 11:39:06 2012
Return-Path: <users-return-233373-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B194B95FB
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 11:39:06 +0000 (UTC)
Received: (qmail 93615 invoked by uid 500); 5 Apr 2012 11:39:03 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 93462 invoked by uid 500); 5 Apr 2012 11:39:03 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 93452 invoked by uid 99); 5 Apr 2012 11:39:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 11:39:03 +0000
X-ASF-Spam-Status: No, hits=-0.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of phracek2@gmail.com designates 209.85.216.52 as permitted sender)
Received: from [209.85.216.52] (HELO mail-qa0-f52.google.com) (209.85.216.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 11:38:55 +0000
Received: by qabg40 with SMTP id g40so1061373qab.18
        for <users@tomcat.apache.org>; Thu, 05 Apr 2012 04:38:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=5YfJyvDsioVpOWfLwjncqaCUPoB9NHw83Bg6/jKP9VQ=;
        b=FEers/O6V0Bgkgg5IPU6iRSNxd75hCr6Syp2QYtzIxgOUxlS9QiB2KMkr7DsXK5Xtu
         m0W5pUwl2exHKJJph/ygKtk7OXnnWo6Gbvw/fejtc9j5KtBewDppjOSF4VR6ICJVrgXR
         rxkarME4N8YhCleTu/0cII9VfgWNNrk5DxDls9eNq5wzttksIcNT5QZ0X7W2i5G9Gb5o
         P5tJIkKpxSmkoXXcrsOdqLdu7ccSipjMQ2E2n4CpdZYcAx20Mgx0KN7kkqXWOACwPkjU
         tBAiYHytLAl7Bns/p4KV1CR6nTlkpNMsCCFUbcSJz7+Rmo1CCGwd6R1i2+Cu8+XG97yL
         pwkA==
MIME-Version: 1.0
Received: by 10.229.136.134 with SMTP id r6mr816259qct.79.1333625914766; Thu,
 05 Apr 2012 04:38:34 -0700 (PDT)
Received: by 10.224.113.3 with HTTP; Thu, 5 Apr 2012 04:38:34 -0700 (PDT)
Date: Thu, 5 Apr 2012 13:38:34 +0200
Message-ID: <CAOdshCzbq3U5pSFC1MmVjmWc=tkT1TRyqFjEiyxwHSLBWjynFA@mail.gmail.com>
Subject: Problem with shutting down tomcat5.5.29
From: Petr Hracek <phracek2@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=UTF-8

Dear all,

I now that I am using pretty old version of tomcat5, but I have a
tricky problem.
On the server is run apache2.2.21 and tomcat5 together. tomcat5 is
used only as servlet container and not web server.
Both are connected together over AJP1.3 interface.

In configuration file of apache2 is mentioned:
ProxyPass /appl1 ajp://localhost:8009/appl1
ProxyPassReverse /appl1 ajp://localhost:8009/appl1

During the stopping of tomcat5 I can see in log files:
/var/log/tomcat5/base/catalina.out:
2012-04-05 11:56:17,492 [main] INFO
org.apache.coyote.http11.Http11BaseProtocol - Pausing Coyote HTTP/1.1
on http-8080
2012-04-05 11:56:18,495 [main] INFO
org.apache.catalina.core.StandardService - Stopping service Catalina
2012-04-05 11:56:18,520 [main] INFO
org.apache.coyote.http11.Http11BaseProtocol - Stopping Coyote HTTP/1.1
on http-8080
2012-04-05 11:56:18,521 [main] INFO
org.apache.catalina.core.AprLifecycleListener - Failed shutdown of
Apache Portable Runtime

/var/log/tomcat5/base/stop.log
 Using CATALINA_BASE:   /srv/www/tomcat5/base/
Using CATALINA_HOME:   /usr/share/tomcat5
Using CATALINA_TMPDIR: /srv/www/tomcat5/base//temp
Using JRE_HOME:       /usr/lib/jvm/java
2012-04-05 11:56:19,282 [main] ERROR
org.apache.catalina.startup.Catalina - Catalina.stop:
java.net.ConnectException: Connection refused
        at java.net.PlainSocketImpl.socketConnect(Native Method)
        at java.net.PlainSocketImpl.doConnect(Unknown Source)
        at java.net.PlainSocketImpl.connectToAddress(Unknown Source)
        at java.net.PlainSocketImpl.connect(Unknown Source)
        at java.net.SocksSocketImpl.connect(Unknown Source)
        at java.net.Socket.connect(Unknown Source)
        at java.net.Socket.connect(Unknown Source)
        at java.net.Socket.<init>(Unknown Source)
        at java.net.Socket.<init>(Unknown Source)
        at org.apache.catalina.startup.Catalina.stopServer(Catalina.java:395)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.apache.catalina.startup.Bootstrap.stopServer(Bootstrap.java:344)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:435)

in server.xml file are used tags:
  <Listener className="org.apache.catalina.core.AprLifecycleListener" />
  <Listener className="org.apache.catalina.mbeans.ServerLifecycleListener" />
  <Listener className="org.apache.catalina.mbeans.GlobalResourcesLifecycleListener"
/>
  <Listener className="org.apache.catalina.storeconfig.StoreConfigLifecycleListener"/>

  <Connector port="8080" maxHttpHeaderSize="8192"
              maxThreads="150" minSpareThreads="25" maxSpareThreads="75"
               enableLookups="false" redirectPort="8443" acceptCount="100"
               connectionTimeout="20000" disableUploadTimeout="true" />
  <Connector port="8009"
               enableLookups="false" redirectPort="8443"
protocol="AJP/1.3" address="127.0.0.1" />

Where I could have a problem?
-- 
Best Regards / S pozdravem
Petr Hracek

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233374-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 12:19:47 2012
Return-Path: <users-return-233374-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BF12A9636
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 12:19:47 +0000 (UTC)
Received: (qmail 90194 invoked by uid 500); 5 Apr 2012 12:19:44 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 90085 invoked by uid 500); 5 Apr 2012 12:19:44 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 90076 invoked by uid 99); 5 Apr 2012 12:19:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 12:19:44 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of knst.kolinko@gmail.com designates 209.85.213.173 as permitted sender)
Received: from [209.85.213.173] (HELO mail-yx0-f173.google.com) (209.85.213.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 12:19:37 +0000
Received: by yenr5 with SMTP id r5so808396yen.18
        for <users@tomcat.apache.org>; Thu, 05 Apr 2012 05:19:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=C3CJbjQJcAlDFK5aQ1xD0ciioIcIJkjIt5P4qyLL8Nk=;
        b=drolAHwoKqu1VmTfUhEijeB/dXI17ABGcV8eNivHK3xotAKWYA9BLV/pCJAQddh7Cq
         R2xdk+D5rZ/EuevfU4tUhBU3TVitLx0aiu/0fq16rFnSfUo8akXkWWOnOFoZFSRjP9dK
         Xn99EaNfIVYgthdr0xbIiciU3fpWqf1K05gkUzHUZqvyEo4muVhrScXoG2yBlgH1Y3+g
         Lz7YVfkVK3KZEUJ51u8KCOKWGLAGvX+pyJnhl2vcgpq7fPVAfEh/ONOs2T1sOQ45u4jD
         sw+ZtxhBdJ2jN1CV5oe3ANzT/6Ae0i0vH5SWHzTPsjaO0KzvVMFLaqTOzbxgnWjy6eYf
         HwyQ==
MIME-Version: 1.0
Received: by 10.236.175.41 with SMTP id y29mr1953494yhl.60.1333628357160; Thu,
 05 Apr 2012 05:19:17 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Thu, 5 Apr 2012 05:19:17 -0700 (PDT)
In-Reply-To: <CAOdshCzbq3U5pSFC1MmVjmWc=tkT1TRyqFjEiyxwHSLBWjynFA@mail.gmail.com>
References: <CAOdshCzbq3U5pSFC1MmVjmWc=tkT1TRyqFjEiyxwHSLBWjynFA@mail.gmail.com>
Date: Thu, 5 Apr 2012 16:19:17 +0400
Message-ID: <CABzHfVm=z7OaZczbEECHbOY3ovNtkiJSANZ+D6ehvhV8Ktmrrg@mail.gmail.com>
Subject: Re: Problem with shutting down tomcat5.5.29
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

2012/4/5 Petr Hracek <phracek2@gmail.com>:
> Dear all,
>
> I now that I am using pretty old version of tomcat5, but I have a
> tricky problem.
> On the server is run apache2.2.21 and tomcat5 together. tomcat5 is
> used only as servlet container and not web server.
> Both are connected together over AJP1.3 interface.
>
> In configuration file of apache2 is mentioned:
> ProxyPass /appl1 ajp://localhost:8009/appl1
> ProxyPassReverse /appl1 ajp://localhost:8009/appl1
>
> During the stopping of tomcat5 I can see in log files:
> /var/log/tomcat5/base/catalina.out:
> 2012-04-05 11:56:17,492 [main] INFO
> org.apache.coyote.http11.Http11BaseProtocol - Pausing Coyote HTTP/1.1
> on http-8080
> 2012-04-05 11:56:18,495 [main] INFO
> org.apache.catalina.core.StandardService - Stopping service Catalina
> 2012-04-05 11:56:18,520 [main] INFO
> org.apache.coyote.http11.Http11BaseProtocol - Stopping Coyote HTTP/1.1
> on http-8080
> 2012-04-05 11:56:18,521 [main] INFO
> org.apache.catalina.core.AprLifecycleListener - Failed shutdown of
> Apache Portable Runtime

Tomcat-Native shared library failed to shut down.
I do not know why. Did it start? Do you use Apr versions of Tomcat
connectors? (You will see that when Tomcat starts).  If you no not
need it you can comment away the "AprLifecycleListener" in server.xml.
I do not remember whether there were some specific issues in 5.5.29 -
you may look at the changelog.

The message really does not matter much if you shut down Tomcat as a whole.

>
> /var/log/tomcat5/base/stop.log
> =A0Using CATALINA_BASE: =A0 /srv/www/tomcat5/base/
> Using CATALINA_HOME: =A0 /usr/share/tomcat5
> Using CATALINA_TMPDIR: /srv/www/tomcat5/base//temp
> Using JRE_HOME: =A0 =A0 =A0 /usr/lib/jvm/java
> 2012-04-05 11:56:19,282 [main] ERROR
> org.apache.catalina.startup.Catalina - Catalina.stop:
> java.net.ConnectException: Connection refused

Attempt to stop Tomcat that is already stopped (and thus do not listen
on the shutdown port anymore).

> =A0 =A0 =A0 =A0at java.net.PlainSocketImpl.socketConnect(Native Method)
> =A0 =A0 =A0 =A0at java.net.PlainSocketImpl.doConnect(Unknown Source)
> =A0 =A0 =A0 =A0at java.net.PlainSocketImpl.connectToAddress(Unknown Sourc=
e)
> =A0 =A0 =A0 =A0at java.net.PlainSocketImpl.connect(Unknown Source)
> =A0 =A0 =A0 =A0at java.net.SocksSocketImpl.connect(Unknown Source)
> =A0 =A0 =A0 =A0at java.net.Socket.connect(Unknown Source)
> =A0 =A0 =A0 =A0at java.net.Socket.connect(Unknown Source)
> =A0 =A0 =A0 =A0at java.net.Socket.<init>(Unknown Source)
> =A0 =A0 =A0 =A0at java.net.Socket.<init>(Unknown Source)
> =A0 =A0 =A0 =A0at org.apache.catalina.startup.Catalina.stopServer(Catalin=
a.java:395)
> =A0 =A0 =A0 =A0at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Met=
hod)
> =A0 =A0 =A0 =A0at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Sou=
rce)
> =A0 =A0 =A0 =A0at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown=
 Source)
> =A0 =A0 =A0 =A0at java.lang.reflect.Method.invoke(Unknown Source)
> =A0 =A0 =A0 =A0at org.apache.catalina.startup.Bootstrap.stopServer(Bootst=
rap.java:344)
> =A0 =A0 =A0 =A0at org.apache.catalina.startup.Bootstrap.main(Bootstrap.ja=
va:435)
>
> in server.xml file are used tags:
> =A0<Listener className=3D"org.apache.catalina.core.AprLifecycleListener" =
/>
> =A0<Listener className=3D"org.apache.catalina.mbeans.ServerLifecycleListe=
ner" />
> =A0<Listener className=3D"org.apache.catalina.mbeans.GlobalResourcesLifec=
ycleListener"
> />
> =A0<Listener className=3D"org.apache.catalina.storeconfig.StoreConfigLife=
cycleListener"/>
>
> =A0<Connector port=3D"8080" maxHttpHeaderSize=3D"8192"
> =A0 =A0 =A0 =A0 =A0 =A0 =A0maxThreads=3D"150" minSpareThreads=3D"25" maxS=
pareThreads=3D"75"
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 enableLookups=3D"false" redirectPort=3D"8443"=
 acceptCount=3D"100"
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 connectionTimeout=3D"20000" disableUploadTime=
out=3D"true" />
> =A0<Connector port=3D"8009"
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 enableLookups=3D"false" redirectPort=3D"8443"
> protocol=3D"AJP/1.3" address=3D"127.0.0.1" />
>
> Where I could have a problem?

Any other problem besides those two messages that I commented?


Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233375-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 12:36:19 2012
Return-Path: <users-return-233375-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A39589946
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 12:36:19 +0000 (UTC)
Received: (qmail 43820 invoked by uid 500); 5 Apr 2012 12:36:16 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 43630 invoked by uid 500); 5 Apr 2012 12:36:16 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 43619 invoked by uid 99); 5 Apr 2012 12:36:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 12:36:16 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of knst.kolinko@gmail.com designates 209.85.161.173 as permitted sender)
Received: from [209.85.161.173] (HELO mail-gx0-f173.google.com) (209.85.161.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 12:36:09 +0000
Received: by ggnp2 with SMTP id p2so814622ggn.18
        for <users@tomcat.apache.org>; Thu, 05 Apr 2012 05:35:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=+W0SJJWKy1lfmTtHc6VTjRLVyWKds4qA+wmw1/pswjk=;
        b=vg3D1pGi0Ivw55/fq7zIcP51q83rMl62X6/DL3kXXqNsFNckutkjYv+CPwQNGkSXiv
         H8rmLgvTa1sSqbGBwxhUnJsepACBqR/x98teTP+xet4GS/v9UvL5b4et4xdOFX6G/E3a
         2fz0ebRJr8LT1q+4txDwi3jf3D9PWLYzO6kWoYdOlcmmoP1KjrFCMkI0FlDjM640fc2P
         vv11xCMM2071YR/D8VJiIjlGhrgMPsTZdkORArCvpFJ2igAAZ4XOlJwHzUIoJYymhZJT
         1XGv3iYnc7TKS7pJ7EoEQj6J5a9s59pl9OTFcXqGohD8KXIgRtbPEl0K5xHRmKvF9WtI
         Mn/A==
MIME-Version: 1.0
Received: by 10.236.78.74 with SMTP id f50mr2005157yhe.26.1333629349357; Thu,
 05 Apr 2012 05:35:49 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Thu, 5 Apr 2012 05:35:49 -0700 (PDT)
In-Reply-To: <CACGXvK2gJGkwpMAjGn=PMDeQ__cD9Hc5fiWcLmvWbgPNtJQB8w@mail.gmail.com>
References: <CACGXvK2gJGkwpMAjGn=PMDeQ__cD9Hc5fiWcLmvWbgPNtJQB8w@mail.gmail.com>
Date: Thu, 5 Apr 2012 16:35:49 +0400
Message-ID: <CABzHfVm_SYf0d4px-X2E-uON55nr4PE9seRFkLhPjFp6BAwykw@mail.gmail.com>
Subject: Re: request.login() not persistent
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

2012/4/5 Jerry Malcolm <2ndgenfilms@gmail.com>:
> I am using TC 7.0 on a couple of servers. =A0I have id/pw fields and a
> 'login' button at the top of all guest pages on my site. =A0If the user
> clicks the login, it goes to a guest page that does the request.login()
> method call and then redirects to a protected page. =A0If the login fails=
,
> the normal j_security login form stuff kicks in on the protected page and
> the user logs in the old way.
>
> OK, this worked on one server for several months. =A0It never worked on t=
he
> other server. =A0On that server, the request.login() succeeded according =
to
> the logs. =A0But when it redirected to the protected page, the j_security
> login form would appear. =A0I could log in from there and everything was
> fine.
> (...)

How do you perform your redirect?
Do you call  HttpServletResponse.encodeRedirectURL( ) to encode
sessionid in the redirection URL?

Form authentication relies on sessions.  If new request does not
belong to the same session (the correct session id is not send by
client either in URL or with a cookie) then it does not have
authentication.


Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233376-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 12:43:33 2012
Return-Path: <users-return-233376-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0E7E59A54
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 12:43:33 +0000 (UTC)
Received: (qmail 59811 invoked by uid 500); 5 Apr 2012 12:43:29 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 59645 invoked by uid 500); 5 Apr 2012 12:43:29 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 59634 invoked by uid 99); 5 Apr 2012 12:43:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 12:43:29 +0000
X-ASF-Spam-Status: No, hits=0.9 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [216.139.250.139] (HELO joe.nabble.com) (216.139.250.139)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 12:43:24 +0000
Received: from alf.nabble.com ([192.168.236.21])
	by joe.nabble.com with esmtp (Exim 4.72)
	(envelope-from <lmhelp1@orange.fr>)
	id 1SFm1n-0002Nn-6Q
	for users@tomcat.apache.org; Thu, 05 Apr 2012 05:43:03 -0700
Date: Thu, 5 Apr 2012 05:43:03 -0700 (PDT)
From: =?UTF-8?Q?L=C3=A9a_Massiot?= <lmhelp1@orange.fr>
To: users@tomcat.apache.org
Message-ID: <1333629783189-4689256.post@n6.nabble.com>
In-Reply-To: <CABzHfVnN_V+J84BhD0wn=MWghA6KB0DUT3K48nMnU3VM9pC3dg@mail.gmail.com>
References: <1333360773430-4678428.post@n6.nabble.com> <CABzHfVn5uKEF9RKGUkqGGq56DLNFhRFm6Y_PUSUq--x3=yMpvw@mail.gmail.com> <1333363527730-4678513.post@n6.nabble.com> <4F7A11D7.80205@christopherschultz.net> <1333444940374-4681421.post@n6.nabble.com> <4F7AE221.10605@ice-sa.com> <1333549942374-4686704.post@n6.nabble.com> <1333564099167-4687332.post@n6.nabble.com> <CABzHfVnN_V+J84BhD0wn=MWghA6KB0DUT3K48nMnU3VM9pC3dg@mail.gmail.com>
Subject: Re: Tomcat6 - Context - aliases
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Konstantin Kolinko wrote
> 
> You should remove the path attribute when Context is defined in an XML
> file.
> The name of the xml file itself specifies the path, not the attribute.
> 
Indeed. Thank you.
Best regards.

--
View this message in context: http://tomcat.10.n6.nabble.com/Tomcat6-Context-aliases-tp4678430p4689256.html
Sent from the Tomcat - User mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233377-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 13:03:12 2012
Return-Path: <users-return-233377-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 813309D95
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 13:03:12 +0000 (UTC)
Received: (qmail 4605 invoked by uid 500); 5 Apr 2012 13:03:09 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 4552 invoked by uid 500); 5 Apr 2012 13:03:08 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 4541 invoked by uid 99); 5 Apr 2012 13:03:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 13:03:08 +0000
X-ASF-Spam-Status: No, hits=-0.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of phracek2@gmail.com designates 209.85.216.173 as permitted sender)
Received: from [209.85.216.173] (HELO mail-qc0-f173.google.com) (209.85.216.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 13:03:01 +0000
Received: by qcsc20 with SMTP id c20so1033753qcs.18
        for <users@tomcat.apache.org>; Thu, 05 Apr 2012 06:02:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=g5RKnPTDc+nKe4BnhvqQzWiXJ3OW2YHOxQ28Oqzsh2Y=;
        b=ZQKt5MQnENcqH4uHGL5fi27jU6noMSSjMfCmB7xVczA/GQoWhVVigMCWQWs6KbHeEg
         MhTcDmkPuEd1bjWogqnF+qaZxCG9NB3RPPj0JskRVXAerVHtVJkV8BzrgrM0610Etsv6
         C3BgXGfqqTNNupcBQ6Xi6eL9zVq2AtXgk9EwhNw8si7w5FOTiyNLabeO6IC8fUAu1JPf
         H+jFfjf++IplyyCBgrsKcz4uQY8vXDy/P9ABmoCRYIslE70zPVYKzA5kPxkZBqgpcFVr
         g+sU0ccXZlG/SUblY+nop9ogpkP8I6+b9WAGlPqvXXOOIhIN0zm3AtxvNcq+lVT6gJoy
         qp/Q==
MIME-Version: 1.0
Received: by 10.229.136.84 with SMTP id q20mr931200qct.59.1333630960336; Thu,
 05 Apr 2012 06:02:40 -0700 (PDT)
Received: by 10.224.113.3 with HTTP; Thu, 5 Apr 2012 06:02:40 -0700 (PDT)
In-Reply-To: <CABzHfVm=z7OaZczbEECHbOY3ovNtkiJSANZ+D6ehvhV8Ktmrrg@mail.gmail.com>
References: <CAOdshCzbq3U5pSFC1MmVjmWc=tkT1TRyqFjEiyxwHSLBWjynFA@mail.gmail.com>
	<CABzHfVm=z7OaZczbEECHbOY3ovNtkiJSANZ+D6ehvhV8Ktmrrg@mail.gmail.com>
Date: Thu, 5 Apr 2012 15:02:40 +0200
Message-ID: <CAOdshCwyQCNeQT5NJe4dtzUTZvDV6tLp1f4F-wLUzDThz+fDSg@mail.gmail.com>
Subject: Re: Problem with shutting down tomcat5.5.29
From: Petr Hracek <phracek2@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

What I see in the start.log file is:
2012-04-05 15:28:04,557 [main] INFO
org.apache.coyote.http11.Http11BaseProtocol - Initializing Coyote
HTTP/1.1 on http-8080
2012-04-05 15:28:04,560 [main] INFO
org.apache.catalina.startup.Catalina - Initialization processed in
1062 ms
2012-04-05 15:28:04,727 [main] INFO
org.apache.catalina.core.StandardService - Starting service Catalina
2012-04-05 15:28:04,731 [main] INFO
org.apache.catalina.core.StandardEngine - Starting Servlet Engine:
Apache Tomcat/5.5.27
2012-04-05 15:28:04,743 [main] INFO
org.apache.catalina.core.StandardHost - XML validation disabled
2012-04-05 15:28:06,229 [main] INFO
org.apache.catalina.loader.WebappClassLoader -
validateJarFile(/opt/repgen/servlet/WEB-INF/lib/servlet.jar) - jar not
loaded. See Servlet Spec 2.3, section 9.7.2. Offending class:
javax/servlet/Servlet.class
2012-04-05 15:28:06,312 [main] INFO
org.apache.coyote.http11.Http11BaseProtocol - Starting Coyote HTTP/1.1
on http-8080
2012-04-05 15:28:06,423 [main] INFO
org.apache.jk.common.ChannelSocket - JK: ajp13 listening on
/127.0.0.1:8009
2012-04-05 15:28:06,425 [main] INFO  org.apache.jk.server.JkMain - Jk
running ID=3D0 time=3D0/15  config=3Dnull
2012-04-05 15:28:06,453 [main] INFO
org.apache.catalina.storeconfig.StoreLoader - Find registry
server-registry.xml at classpath resource
2012-04-05 15:28:06,514 [main] INFO
org.apache.catalina.startup.Catalina - Server startup in 1954 ms

Here is mention ajp13. It is not correct one, right?

Is it possible that during the shutting down of tomcat5 stopping
operation will take more then 2 minutes?
When I am commented out Listener section then during the stopping
tomcat5 Failed is not mentioned
but in stop.log file Exception is still there. How to avoid that
Exception message will not be there?

best reagrds
Petr

Dne 5. dubna 2012 14:19 Konstantin Kolinko <knst.kolinko@gmail.com> napsal(=
a):
> 2012/4/5 Petr Hracek <phracek2@gmail.com>:
>> Dear all,
>>
>> I now that I am using pretty old version of tomcat5, but I have a
>> tricky problem.
>> On the server is run apache2.2.21 and tomcat5 together. tomcat5 is
>> used only as servlet container and not web server.
>> Both are connected together over AJP1.3 interface.
>>
>> In configuration file of apache2 is mentioned:
>> ProxyPass /appl1 ajp://localhost:8009/appl1
>> ProxyPassReverse /appl1 ajp://localhost:8009/appl1
>>
>> During the stopping of tomcat5 I can see in log files:
>> /var/log/tomcat5/base/catalina.out:
>> 2012-04-05 11:56:17,492 [main] INFO
>> org.apache.coyote.http11.Http11BaseProtocol - Pausing Coyote HTTP/1.1
>> on http-8080
>> 2012-04-05 11:56:18,495 [main] INFO
>> org.apache.catalina.core.StandardService - Stopping service Catalina
>> 2012-04-05 11:56:18,520 [main] INFO
>> org.apache.coyote.http11.Http11BaseProtocol - Stopping Coyote HTTP/1.1
>> on http-8080
>> 2012-04-05 11:56:18,521 [main] INFO
>> org.apache.catalina.core.AprLifecycleListener - Failed shutdown of
>> Apache Portable Runtime
>
> Tomcat-Native shared library failed to shut down.
> I do not know why. Did it start? Do you use Apr versions of Tomcat
> connectors? (You will see that when Tomcat starts). =C2=A0If you no not
> need it you can comment away the "AprLifecycleListener" in server.xml.
> I do not remember whether there were some specific issues in 5.5.29 -
> you may look at the changelog.
>
> The message really does not matter much if you shut down Tomcat as a whol=
e.
>
>>
>> /var/log/tomcat5/base/stop.log
>> =C2=A0Using CATALINA_BASE: =C2=A0 /srv/www/tomcat5/base/
>> Using CATALINA_HOME: =C2=A0 /usr/share/tomcat5
>> Using CATALINA_TMPDIR: /srv/www/tomcat5/base//temp
>> Using JRE_HOME: =C2=A0 =C2=A0 =C2=A0 /usr/lib/jvm/java
>> 2012-04-05 11:56:19,282 [main] ERROR
>> org.apache.catalina.startup.Catalina - Catalina.stop:
>> java.net.ConnectException: Connection refused
>
> Attempt to stop Tomcat that is already stopped (and thus do not listen
> on the shutdown port anymore).
>
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at java.net.PlainSocketImpl.socketConnect(Nat=
ive Method)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at java.net.PlainSocketImpl.doConnect(Unknown=
 Source)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at java.net.PlainSocketImpl.connectToAddress(=
Unknown Source)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at java.net.PlainSocketImpl.connect(Unknown S=
ource)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at java.net.SocksSocketImpl.connect(Unknown S=
ource)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at java.net.Socket.connect(Unknown Source)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at java.net.Socket.connect(Unknown Source)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at java.net.Socket.<init>(Unknown Source)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at java.net.Socket.<init>(Unknown Source)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.catalina.startup.Catalina.stopS=
erver(Catalina.java:395)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at sun.reflect.NativeMethodAccessorImpl.invok=
e0(Native Method)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at sun.reflect.NativeMethodAccessorImpl.invok=
e(Unknown Source)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at sun.reflect.DelegatingMethodAccessorImpl.i=
nvoke(Unknown Source)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at java.lang.reflect.Method.invoke(Unknown So=
urce)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.catalina.startup.Bootstrap.stop=
Server(Bootstrap.java:344)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.catalina.startup.Bootstrap.main=
(Bootstrap.java:435)
>>
>> in server.xml file are used tags:
>> =C2=A0<Listener className=3D"org.apache.catalina.core.AprLifecycleListen=
er" />
>> =C2=A0<Listener className=3D"org.apache.catalina.mbeans.ServerLifecycleL=
istener" />
>> =C2=A0<Listener className=3D"org.apache.catalina.mbeans.GlobalResourcesL=
ifecycleListener"
>> />
>> =C2=A0<Listener className=3D"org.apache.catalina.storeconfig.StoreConfig=
LifecycleListener"/>
>>
>> =C2=A0<Connector port=3D"8080" maxHttpHeaderSize=3D"8192"
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0maxThreads=3D"150" minSp=
areThreads=3D"25" maxSpareThreads=3D"75"
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 enableLookups=3D"false"=
 redirectPort=3D"8443" acceptCount=3D"100"
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 connectionTimeout=3D"20=
000" disableUploadTimeout=3D"true" />
>> =C2=A0<Connector port=3D"8009"
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 enableLookups=3D"false"=
 redirectPort=3D"8443"
>> protocol=3D"AJP/1.3" address=3D"127.0.0.1" />
>>
>> Where I could have a problem?
>
> Any other problem besides those two messages that I commented?
>
>
> Best regards,
> Konstantin Kolinko
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>



--=20
Best Regards / S pozdravem
Petr Hracek

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233378-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 13:57:49 2012
Return-Path: <users-return-233378-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B698E9FD8
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 13:57:49 +0000 (UTC)
Received: (qmail 56606 invoked by uid 500); 5 Apr 2012 13:57:46 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 56497 invoked by uid 500); 5 Apr 2012 13:57:46 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 56486 invoked by uid 99); 5 Apr 2012 13:57:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 13:57:45 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (athena.apache.org: transitioning domain of dhaval.jaiswal@via.com does not designate 209.85.214.173 as permitted sender)
Received: from [209.85.214.173] (HELO mail-ob0-f173.google.com) (209.85.214.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 13:57:40 +0000
Received: by obbup19 with SMTP id up19so2408488obb.18
        for <users@tomcat.apache.org>; Thu, 05 Apr 2012 06:57:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=via.com; s=google;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type;
        bh=PQFeLF3U2AFesCB5QgyEqAl+psKGr2fwgNmIIuRyHAE=;
        b=WjI2GcHQhY8p0aCiNmNR+x9hUVRlnycn5f7AsWJCXRsXqfVTuUZNqO1V5YFpKTPCv4
         5+8pZihqwW1HfeAPNvnbSw/Xk2fTOOBf5sR8yXGfQhVVOxolrFDanHYDl8psYqj6gpIK
         VnPJ73Ky3yAJ6XI62jCiktWm7cm7f/pcsof/g=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type:x-gm-message-state;
        bh=PQFeLF3U2AFesCB5QgyEqAl+psKGr2fwgNmIIuRyHAE=;
        b=f1B5KX1HMsi+2bgEWnVq45Yp/XRxJ46SiZpMtfTz0wKcq0CtBYWBA+9tjqh68LZCih
         b9VSuAjrNrusd95PmyBjHZPZF7+3fZCA+nk689mhUz8B0DzJ35pvEt9fKAXXNW/eUDzx
         LkwVoJO+pZaVEVL/ca85vfmPVtAGdQIzoppetab2eoYgVP1jJwjnafzARwChaKkw91lb
         HZM8Dv515Djv++l0dkIpXoK8Cphs+HieQfCYx2vbnBq3YASlapLJDqLvHqwQqnnRxrpv
         k2g8DXeRpyP1urr4MAkwCdK+cqyZP2Q5KDI9EB9rqO3Tl9MH+Mc1zyh9vH+elDGhKbqJ
         mEsw==
MIME-Version: 1.0
Received: by 10.182.154.40 with SMTP id vl8mr4126540obb.25.1333634239913; Thu,
 05 Apr 2012 06:57:19 -0700 (PDT)
Received: by 10.182.209.34 with HTTP; Thu, 5 Apr 2012 06:57:19 -0700 (PDT)
In-Reply-To: <4F699F51.5090009@apache.org>
References: <CABKrPsNAwOAZKPZ+EJ24jpBciKNVzb-XHdYUF-2o0V9wNOffMA@mail.gmail.com>
	<03f001cd06c3$449a3a80$cdceaf80$@hanik.com>
	<CABKrPsMQGx-Zmq3xB+OriCAP+ciu990PshHe=8fqp-cdKuAfmA@mail.gmail.com>
	<4F699F51.5090009@apache.org>
Date: Thu, 5 Apr 2012 19:27:19 +0530
Message-ID: <CABKrPsMvToexGESTtjqP9SR2bkM+dDxiGnfE8wM9QcXy5mn45Q@mail.gmail.com>
Subject: Re: Need a sample server.xml file for the session replication using
 backup manager
From: Dhaval Jaiswal <dhaval.jaiswal@via.com>
To: Tomcat Users List <users@tomcat.apache.org>
Cc: Shrinivas Devarkonda <shrinivas.devarkonda@via.com>
Content-Type: multipart/alternative; boundary=f46d04479f0d215d4004bceeeb95
X-Gm-Message-State: ALoCoQkcmoQntV9UTDN2RpW2m76d+5aZlJ4UPlHY5NdaVS3DNc7D4fIq8Yhr1m5Tf+jVw7fhtVh3
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d04479f0d215d4004bceeeb95
Content-Type: text/plain; charset=ISO-8859-1

Thanks for the info. We are using sticky sessions only with BackupManager.

See We have the current setup.

1 Apache + sticky sessions with mod_ajp proxy balancer in httpd.conf +  10
tomcats.

currently if one of our tomcat goes down the User sessions goes down, I
need to stop this quickly somehow either by using deltamanager or
Backupmanager.

deltamanager all-to-all session replication is not feasible since our apps
is heavy and memory chocks.

We need a simple setup where all 9 tomcats should send session replication
to 10th tomcat where app is also running.
10th tomcat has high hardware config in terms of memory+CPU.

So please guide us on *server.xml change for 9 tomcats* and *server.xml for
10th Tomcat which is BackupManager*. We have sticky sessions config up and
running.


Regards,
Dhaval,







On Wed, Mar 21, 2012 at 2:58 PM, Mark Thomas <markt@apache.org> wrote:

> On 21/03/2012 09:15, Dhaval Jaiswal wrote:
> > We have already server.xml(changed as per tomcat site instructions)
> > in place, but it is not working properly. I will give you detail idea
> > about our environment.
> >
> > We have 10 tomcats starting from 192.168.3.1 to 192.168.3.10. I
> > wanted to make 192.168.3.10 as master/backup node, which has a
> > session id information of rest 9 tomcats including 10 too.
> >
> > Kindly provide the clear example of server.xml of 192.168.3.10
> > (master/backup node) & rest of the 9 tomcats.
>
> The backup manager doesn't work the way you think it does. Consider a
> four node cluster with nodes A, B, C & D. If node A has 30 primary
> sessions (more on that on a sec) then 10 of them will be backed up on
> node B, 10 on node C and 10 on node D. Sessions may be primary
> (currently being used), backup (full copy of the primary) or proxy (no
> data but knows which nodes are primary and backup). If a node isn't the
> primary or a backup it will be a proxy.
>
> You have to use sticky sessions with the backup manager else the primary
> node for the session keeps changing and that creates a lot of traffic.
>
> If the primary node fails, any other node can take over since they all
> have either a backup or the proxy info.
>
>
> Mark
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>
>

--f46d04479f0d215d4004bceeeb95--

From users-return-233379-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 14:05:10 2012
Return-Path: <users-return-233379-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5E6259743
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 14:05:10 +0000 (UTC)
Received: (qmail 82670 invoked by uid 500); 5 Apr 2012 14:05:07 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 82527 invoked by uid 500); 5 Apr 2012 14:05:06 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 82517 invoked by uid 99); 5 Apr 2012 14:05:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 14:05:06 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [76.96.59.228] (HELO qmta15.westchester.pa.mail.comcast.net) (76.96.59.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 14:05:00 +0000
Received: from omta07.westchester.pa.mail.comcast.net ([76.96.62.59])
	by qmta15.westchester.pa.mail.comcast.net with comcast
	id uE4D1i0071GhbT85FE4gkh; Thu, 05 Apr 2012 14:04:40 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta07.westchester.pa.mail.comcast.net with comcast
	id uE4f1i01N38FjT13TE4ggf; Thu, 05 Apr 2012 14:04:40 +0000
Message-ID: <4F7DA677.3060205@christopherschultz.net>
Date: Thu, 05 Apr 2012 10:04:39 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Tomcat6 - Context - aliases
References: <1333360773430-4678428.post@n6.nabble.com> <CABzHfVn5uKEF9RKGUkqGGq56DLNFhRFm6Y_PUSUq--x3=yMpvw@mail.gmail.com> <1333363527730-4678513.post@n6.nabble.com> <4F7A11D7.80205@christopherschultz.net> <1333444940374-4681421.post@n6.nabble.com> <4F7AE221.10605@ice-sa.com> <1333549942374-4686704.post@n6.nabble.com> <1333564099167-4687332.post@n6.nabble.com>
In-Reply-To: <1333564099167-4687332.post@n6.nabble.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

La,

On 4/4/12 2:28 PM, La Massiot wrote:
> < Context path="/an_alias_1" docBase="/home/d1" crossContext="true"
> / >

Do you really need crossContext="true" here?

> - This Configuration Descriptor is automatically deployed once
> saved.
> 
> - I suppressed the Webapp "w"'s "WEB-INF\context.xml" I had
> created.
> 
> - I redeployed the Webapp "w".

This is the first time you mentioned webapp "w". Is that the "main"
webapp?

> => Now, when a user clicks on any link < a href="/an_alias_1/file_<
> i>.txt"> file_< i>.txt < /a> it is successfully retrieved.

Good.

> => What is still problematic to me, is that, when the user clicks
> on a link, the context or Webapp changes (from "w" to
> "an_alias_1").

Why is that a problem?

> The resources which are in "/home/d1" are available directly by
> typing the following URL in a browser: 
> http://<hostname>:8080/an_alias_1/file_< i>.txt and not
> compulsorily through the Webapp "w".

Isn't that what you wanted? Or, do you want everything to be exposed
through /w/an_alias_1?

If you want /w/an_alias_1, then re-name your context deployment
descriptor:

$ mv an_alias_1.xml w\#an_alias_1.xml

Honestly, though, I'm not sure it makes any difference: a URL is a
URL. Maybe you just want to make it "look" like the resource "belongs"
to the webapp.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk99pncACgkQ9CaO5/Lv0PB1fgCeJ+kv6Y/UH9NlG4gIJYK36juZ
gE8An3r6kqhEUXY8pCwvb0A9v4YEvItG
=trQU
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233380-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 14:06:16 2012
Return-Path: <users-return-233380-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0459897B6
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 14:06:15 +0000 (UTC)
Received: (qmail 88730 invoked by uid 500); 5 Apr 2012 14:06:12 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 88550 invoked by uid 500); 5 Apr 2012 14:06:12 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 88541 invoked by uid 99); 5 Apr 2012 14:06:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 14:06:12 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [76.96.62.40] (HELO qmta04.westchester.pa.mail.comcast.net) (76.96.62.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 14:06:06 +0000
Received: from omta23.westchester.pa.mail.comcast.net ([76.96.62.74])
	by qmta04.westchester.pa.mail.comcast.net with comcast
	id uAza1i0021c6gX854E5m2d; Thu, 05 Apr 2012 14:05:46 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta23.westchester.pa.mail.comcast.net with comcast
	id uE5m1i00n38FjT13jE5mp0; Thu, 05 Apr 2012 14:05:46 +0000
Message-ID: <4F7DA6BA.5030704@christopherschultz.net>
Date: Thu, 05 Apr 2012 10:05:46 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Eclipse Project Files for Tomcat 7
References: <CAKaoAEwZN=M4NSEioULCrW_U6eg9DFo++R9Pfv-GfEf-T1HdpQ@mail.gmail.com> <4F76FB57.9050407@apache.org> <4F7CE7E4.8000700@christopherschultz.net> <CABzHfVm+MgazJFWWGjNni=0QxdeK0L6-2SVUwjHD-ZmpQHXtog@mail.gmail.com>
In-Reply-To: <CABzHfVm+MgazJFWWGjNni=0QxdeK0L6-2SVUwjHD-ZmpQHXtog@mail.gmail.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Konstantin,

On 4/5/12 6:50 AM, Konstantin Kolinko wrote:
> There is 
> http://tomcat.apache.org/tomcat-7.0-doc/building.html#Building_with_Eclipse
>
>  Maybe it is not so easy to find  (and I forgot about "ant
> ide-eclipse" when you asked your question).

Yeah, I hadn't looked there (which was stupid on my part). I'll link
my recently-added FAQ entry to that page.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk99proACgkQ9CaO5/Lv0PA6gQCgrceRlTdEKviI2iR7/NzCofvq
77wAn2KIoSFmacSusQeO24Od/GLY9LOF
=EfL+
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233381-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 14:13:55 2012
Return-Path: <users-return-233381-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5C75C9C7E
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 14:13:55 +0000 (UTC)
Received: (qmail 19057 invoked by uid 500); 5 Apr 2012 14:13:48 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 18967 invoked by uid 500); 5 Apr 2012 14:13:48 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 18921 invoked by uid 99); 5 Apr 2012 14:13:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 14:13:48 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (athena.apache.org: transitioning domain of dhaval.jaiswal@via.com does not designate 209.85.214.173 as permitted sender)
Received: from [209.85.214.173] (HELO mail-ob0-f173.google.com) (209.85.214.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 14:13:44 +0000
Received: by obbup19 with SMTP id up19so2430179obb.18
        for <users@tomcat.apache.org>; Thu, 05 Apr 2012 07:13:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=via.com; s=google;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type;
        bh=Jsug9merq6vKOtuXdg7NikypLQ4TPlMWsxpqq/LcUFc=;
        b=cgJfs4eZWc5DUr0tLXk21x76c+Grn+cqq9jW6bXUSwvVdzdonWsqIhijpOI3hclQf+
         95EeoDMHzpR9QctTAnM4I1K6LObRflhPUTkDZoOf5GQqZo2oF3VRPKkLcK+e5rvAWnTl
         u6PpfntQXDkfEIzmm6CEx57GLMrRCLRBGyTxI=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type:x-gm-message-state;
        bh=Jsug9merq6vKOtuXdg7NikypLQ4TPlMWsxpqq/LcUFc=;
        b=WPno6yQNBMivBzZagY/YSg4pVH+34CVxPY86ODXfWOYyTLgfk2haUU0T/vXklEkCKE
         +ulVHN9l+mEHVbTW+pH+pPwMFVjV9mUgn2Ct+WDkGJEU1wGZaBRY7kZYEe0dTvbrf9fl
         c6VFbPiFYUW+29fZMMZRQiewUT2LhlwH32HPRDAZ/COngy1gdYsx0p+uEKv4ZQLfzRhm
         +0l7zhzaFwRoePA7UpvsELrf1iKlyhJ2/5hnzHiEFXo6ud0WAaiXlZpzhHdZUBkRuMN+
         xpmnhghNYVAJThtg0e2eKkUwV6LzUiGL83JSW1mBEBpQLMu4MPLx3NMxIpxAOOkWtp4h
         Axxg==
MIME-Version: 1.0
Received: by 10.182.202.69 with SMTP id kg5mr4263776obc.35.1333635203144; Thu,
 05 Apr 2012 07:13:23 -0700 (PDT)
Received: by 10.182.209.34 with HTTP; Thu, 5 Apr 2012 07:13:22 -0700 (PDT)
In-Reply-To: <1333572948.35940.YahooMailNeo@web125504.mail.ne1.yahoo.com>
References: <zarafa.4f7c651f.1095.7ca7df39672deef6@zarafix.ordix.de>
	<CABKrPsNQN_2KjH_PLfE49aoXjqgc451yFZFs-a0e0g9S3hMLpw@mail.gmail.com>
	<1333572948.35940.YahooMailNeo@web125504.mail.ne1.yahoo.com>
Date: Thu, 5 Apr 2012 19:43:22 +0530
Message-ID: <CABKrPsN0KV_Wox_0JuzMqhLfzZ9r7Jsg5-5OuWJbeFHfkxNRNQ@mail.gmail.com>
Subject: Re: SEVERE: Unable to start cluster.
From: Dhaval Jaiswal <dhaval.jaiswal@via.com>
To: Tomcat Users List <users@tomcat.apache.org>, Mark Eggers <its_toasted@yahoo.com>
Cc: Shrinivas Devarkonda <shrinivas.devarkonda@via.com>
Content-Type: multipart/related; boundary=e89a8f6438c28b1c9404bcef2424
X-Gm-Message-State: ALoCoQn2b3MvWcXpe8Ebwx5eD2RcKUn5Jhf8aNrtVSyZwQuFofQJNqBMGu49QHVAogbddNXefBOd
X-Virus-Checked: Checked by ClamAV on apache.org

--e89a8f6438c28b1c9404bcef2424
Content-Type: multipart/alternative; boundary=e89a8f6438c28b1c8604bcef2423

--e89a8f6438c28b1c8604bcef2423
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

I have tested the below cluster manager; as per the instruction i have
changed. However, when we try to deploy the apps on tomcat it was throwing
error that

WARNING: Unable to send map start message.
Apr 5, 2012 1:37:12 PM org.apache.catalina.ha.session.BackupManager start
SEVERE: Unable to start BackupManager
java.lang.RuntimeException: Unable to start replicated map.
       at
org.apache.catalina.tribes.tipis.AbstractReplicatedMap.init(AbstractReplica=
tedMap.java:230)

Failed to start BackupManager:  java.lang.IllegalArgumentException:
Listener already
exists:{}[org.apache.catalina.tribes.tipis.LazyReplicatedMap]



i am using below server.xml for all the 10 tomcats. Do i have to change it
for every tomcat. How would i fix it.



<Cluster className=3D"org.apache.catalina.ha.tcp.SimpleTcpCluster"
channelSendOptions=3D"6">
        <Manager className=3D"org.apache.catalina.ha.session.BackupManager"
expireSessionsOnShutdown=3D"false"
                   notifyListenersOnReplication=3D"true" mapSendOptions=3D"=
6"/>

            <Channel
className=3D"org.apache.catalina.tribes.group.GroupChannel">
             <Membership
className=3D"org.apache.catalina.tribes.membership.McastService"
                        address=3D"228.0.0.4"
                        port=3D"45563"
                        frequency=3D"500"
                        dropTime=3D"30000"/>
             <Receiver
className=3D"org.apache.catalina.tribes.transport.nio.NioReceiver"
                      address=3D"auto"
                      port=3D"4000"
                      selectorTimeout=3D"5000"
                      timeout=3D"60000"
                      maxThreads=3D"6"/>

             <Sender
className=3D"org.apache.catalina.tribes.transport.ReplicationTransmitter">
                  <Transport
className=3D"org.apache.catalina.tribes.transport.nio.PooledParallelSender"
timeout=3D"60000" keepAliveCount=3D"0"/>
             </Sender>
             <Interceptor
className=3D"org.apache.catalina.tribes.group.interceptors.TcpFailureDetect=
or"/>
             <Interceptor
className=3D"org.apache.catalina.tribes.group.interceptors.MessageDispatch1=
5Interceptor"/>
            <!--  <Interceptor
className=3D"org.apache.catalina.tribes.group.interceptors.ThroughputInterc=
eptor"/>
-->
           </Channel>
         <Valve className=3D"org.apache.catalina.ha.tcp.ReplicationValve"

filter=3D".*\.gif|.*\.js|.*\.jpeg|.*\.jpg|.*\.png|.*\.htm|.*\.html|.*\.css|=
.*\.txt"/>
         <Valve
className=3D"org.apache.catalina.ha.session.JvmRouteBinderValve"/>
       <ClusterListener
className=3D"org.apache.catalina.ha.session.ClusterSessionListener"/>
       <ClusterListener
className=3D"org.apache.catalina.ha.session.JvmRouteSessionIDBinderListener=
"/>
     </Cluster>




On Thu, Apr 5, 2012 at 2:25 AM, Mark Eggers <its_toasted@yahoo.com> wrote:

> Comments inline and surrounded by =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D COMME=
NT =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
>
> ----- Original Message -----
>
> > From: Dhaval Jaiswal <dhaval.jaiswal@via.com>
> > To: Tomcat Users List <users@tomcat.apache.org>
> > Cc:
> > Sent: Wednesday, April 4, 2012 12:12 PM
> > Subject: Re: SEVERE: Unable to start cluster.
> >
> >T hanks to all for sharing info. I will test it & come back to you.
> >
> > Also want to know that after starting session replication there will be=
 a
> > huge logging in catalina.out for session information. How to minimize i=
t
> ?
>
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D COMMENT =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
>
>
> Did read my other mail concerning how to manage logging? I thought I was
> pretty explicit (and gave an example). If my example for logging.properti=
es
> was unclear, please ask specific questions (to the list).
>
> If you want less logging, then turn down the levels. See the following
> documentation:
>
>
> http://tomcat.apache.org/tomcat-6.0-doc/logging.html#Using_java.util.logg=
ing_(default)
>
>
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D COMMENT =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
>
>
> >
> > Below are the logs of catalina.out. As per the log it shows that it has
> > added member 192.168.3.18.
> >
> > Now we have a tomcat cluster group from 192.168.3.5 to 192.168.3.11.
> > However it is trying to connect to the 192.168.3.18.
> >
> >
> > 192.168.3.18 is the tomcat of another cluster. Where should i look into
> to
> > resolve this. Where to define this limit that it has to share the sessi=
on
> > information from 192.168.3.5 to 192.168.3.11.
>
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D COMMENT =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
>
>
> From the documentation on the web site at:
>
>
> http://tomcat.apache.org/tomcat-6.0-doc/cluster-howto.html#Cluster_Inform=
ation
>
>
> Membership is established using multicast heartbeats. Hence, if you wish
> to subdivide your clusters, you can do this by changing the multicast IP
> address or port in the <Membership> element.
>
> In other words, if you want multiple clusters change either the multicast
> address here:
>
>            <Membership
> className=3D"org.apache.catalina.tribes.membership.McastService"
>                         address=3D"228.0.0.4"
>                         port=3D"45564"
>                         frequency=3D"500"
>                         dropTime=3D"3000"/>
>
> to a different multicast address, or change the port in the above to a
> different port. The multicast address / port establishes the cluster grou=
p.
> The above snippet is from one of my server.xml files.
>
> You might also want to read up on how multicasting works.
>
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D COMMENT =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D
>
>
> >
>
> >
> >
> > INFO: Replication member
> > added:org.apache.catalina.tribes.membership.MemberImpl[tcp://{-64, -88,
> 3,
> > 18}:4000,{-64, -88, 3, 18},4000, alive=3D18507474,id=3D{25 -66 -54 110 =
84 -96
> > 79 -74 -84 -106 122 -65 -121 9 -16 5 }, payload=3D{}, command=3D{},
> domain=3D{}, ]
> > Apr 5, 2012 12:31:10 AM
> > org.apache.catalina.tribes.group.interceptors.TcpFailureDetector
> > performBasicCheck
> > INFO: Suspect member, confirmed
> > alive.[org.apache.catalina.tribes.membership.MemberImpl[tcp://{-64, -88=
,
> 3,
> > 18}:4000,{-64, -88, 3, 18},4000, alive=3D18507474,id=3D{25 -66 -54 110 =
84 -96
> > 79 -74 -84 -106 122 -65 -121 9 -16 5 }, payload=3D{}, command=3D{},
> domain=3D{},
> > ]]
> > Apr 5, 2012 12:32:10 AM
> > org.apache.catalina.tribes.group.interceptors.TcpFailureDetector
> > memberDisappeared
> > INFO: Received
> >
> memberDisappeared[org.apache.catalina.tribes.membership.MemberImpl[tcp://=
{-64,
> > -88, 3, 18}:4000,{-64, -88, 3, 18},4000, alive=3D18507474,id=3D{25 -66 =
-54
> 110
> > 84 -96 79 -74 -84 -106 122 -65 -121 9 -16 5 }, payload=3D{}, command=3D=
{},
> > domain=3D{}, ]] message. Will verify.
> > Apr 5, 2012 12:32:10 AM
> > org.apache.catalina.tribes.group.interceptors.TcpFailureDetector
> > memberDisappeared
> > INFO: Verification complete. Member still
> > alive[org.apache.catalina.tribes.membership.MemberImpl[tcp://{-64, -88,
> 3,
> > 18}:4000,{-64, -88, 3, 18},4000, alive=3D18507474,id=3D{25 -66 -54 110 =
84 -96
> > 79 -74 -84 -106 122 -65 -121 9 -16 5 }, payload=3D{}, command=3D{},
> domain=3D{},
> > ]]
> > Apr 5, 2012 12:32:10 AM
> > org.apache.catalina.tribes.tipis.AbstractReplicatedMap heartbeat
> > SEVERE: Unable to send AbstractReplicatedMap.ping message
> > org.apache.catalina.tribes.ChannelException: Operation has timed
> out(60000
> > ms.).; Faulty members:tcp://{-64, -88, 3, 18}:4000;
> >
> >
> >
> >
> >
> >
> >
> >
> >
> > On Wed, Apr 4, 2012 at 8:43 PM, Thomas Rohde <tro@ordix.de> wrote:
> >
> >>  -----Urspr=FCngliche Nachricht-----
> >>  Von:    Dhaval Jaiswal <dhaval.jaiswal@via.com>
> >>  Gesendet:       Mi 04.04.2012 16:41
> >>  Betreff:        SEVERE: Unable to start cluster.
> >>  An:     Tomcat Users List <users@tomcat.apache.org>;
> >>  CC:     Shrinivas Devarkonda <shrinivas.devarkonda@via.com>;
> >>  > Hi List,
> >>  >
> >>  > Below is the error we are facing while starting tomcats.
> >>  >
> >>  > SEVERE: Unable to start cluster.
> >>  > org.apache.catalina.tribes.ChannelException:
> java.net.SocketException:
> >>  Not
> >>  > a multicast address; No faulty members identified.
> >>  >
> >>  >
> >>  > Our cluster setting is as below in server.xml
> >>  >
> >>  >
> >>  >  <Cluster
> > className=3D"org.apache.catalina.ha.tcp.SimpleTcpCluster"
> >>  > channelSendOptions=3D"6">
> >>  >         <Manager
> > className=3D"org.apache.catalina.ha.session.BackupManager"
> >>  > expireSessionsOnShutdown=3D"false"
> >>  >                    notifyListenersOnReplication=3D"true"
> >>  mapSendOptions=3D"6"/>
> >>  >
> >>  >             <Channel
> >>  >
> > className=3D"org.apache.catalina.tribes.group.GroupChannel">
> >>  >              <Membership
> >>  >
> > className=3D"org.apache.catalina.tribes.membership.McastService"
> >>  >                         address=3D"192.168.3.14"
> >>  >                         port=3D"45564"
> >>  >                         frequency=3D"500"
> >>  >                         dropTime=3D"30000"/>
> >>  >              <Receiver
> >>  >
> > className=3D"org.apache.catalina.tribes.transport.nio.NioReceiver"
> >>  >                       address=3D"auto"
> >>  >                       port=3D"4000"
> >>  >                       selectorTimeout=3D"5000"
> >>  >                       timeout=3D"60000"
> >>  >                       maxThreads=3D"6"/>
> >>  >
> >>  >              <Sender
> >>  >
> > className=3D"org.apache.catalina.tribes.transport.ReplicationTransmitte=
r">
> >>  >                   <Transport
> >>  >
> > className=3D"org.apache.catalina.tribes.transport.nio.PooledParallelSen=
der"
> >>  > timeout=3D"60000" keepAliveCount=3D"0"/>
> >>  >              </Sender>
> >>  >              <Interceptor
> >>  >
> >>
> >
> className=3D"org.apache.catalina.tribes.group.interceptors.TcpFailureDete=
ctor"/>
> >>  >              <Interceptor
> >>  >
> >>
> >
> className=3D"org.apache.catalina.tribes.group.interceptors.MessageDispatc=
h15Interc
> >>  > eptor"/>
> >>  >              <Interceptor
> >>  >
> >>
> >
> className=3D"org.apache.catalina.tribes.group.interceptors.ThroughputInte=
rceptor"/
> >>  > >
> >>  >            </Channel>
> >>  >          <Valve
> > className=3D"org.apache.catalina.ha.tcp.ReplicationValve"
> >>  >
> >>  >
> >>
> >
> filter=3D".*\.gif|.*\.js|.*\.jpeg|.*\.jpg|.*\.png|.*\.htm|.*\.html|.*\.cs=
s|.*\.txt
> >>  > "/>
> >>  >          <Valve
> >>  >
> > className=3D"org.apache.catalina.ha.session.JvmRouteBinderValve"/>
> >>  >        <ClusterListener
> >>  >
> > className=3D"org.apache.catalina.ha.session.ClusterSessionListener"/>
> >>  >        <ClusterListener
> >>  >
> >>
> >
> className=3D"org.apache.catalina.ha.session.JvmRouteSessionIDBinderListen=
er"/>
> >>  >      </Cluster>
> >>  >
> >>  >
> >>  >
> >>  > Note: 192.168.3.14 is the IP of backup manager with java &
> > 192.168.3.9 is
> >>  > the IP address of local tomcat where above server.xml is hosted.
> >>  >
> >>  > Please guide us as to how to overcome the issue & please give us
> > the
> >>  sample
> >>  > <cluster>   </cluster>  file if possible.
> >>  >
> >>
> >>  Hi Dhaval,
> >>
> >>  you have to set a multicast ip address for the "address"
> > attribute of the
> >>  McastService. A multicast address looks like 224.x.x.x.
> >>
> >>  Take a look at http://en.wikipedia.org/wiki/Multicast_address for
> further
> >>  details.
> >>
> >>  The Tomcat cluster uses multicast for the management of the cluster
> member.
> >>
> >>  Thomas
> >>
> > <http://www.via.com/>
> >
>
> . . . . just my two cents.
> /mde/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>
>


--=20

[image: Inline image 2] <http://www.via.com/>

*Dhaval* | Database & System

*E:* dhaval.jaiswal@via.com <ramya@via.com>| *T:* 080 4043 3000 | *M:* +91
- 8095 397 843

[image: all-icon.jpg] <http://www.via.com/>

--e89a8f6438c28b1c8604bcef2423
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

I have tested the below cluster manager; as per the instruction i have chan=
ged. However, when we try to deploy the apps on tomcat it was throwing erro=
r that <br><br>WARNING: Unable to send map start message.<br>Apr 5, 2012 1:=
37:12 PM org.apache.catalina.ha.session.BackupManager start<br>
SEVERE: Unable to start BackupManager<br>java.lang.RuntimeException: Unable=
 to start replicated map.<br>=A0=A0=A0=A0=A0=A0 at org.apache.catalina.trib=
es.tipis.AbstractReplicatedMap.init(AbstractReplicatedMap.java:230)<br><br>=
Failed to start BackupManager:=A0 java.lang.IllegalArgumentException: Liste=
ner already exists:{}[org.apache.catalina.tribes.tipis.LazyReplicatedMap]<b=
r>
<br><br><br>i am using below server.xml for all the 10 tomcats. Do i have t=
o change it for every tomcat. How would i fix it. <br><br><br><br>&lt;Clust=
er className=3D&quot;org.apache.catalina.ha.tcp.SimpleTcpCluster&quot; chan=
nelSendOptions=3D&quot;6&quot;&gt;<br>
=A0=A0=A0=A0=A0=A0=A0 &lt;Manager className=3D&quot;org.apache.catalina.ha.=
session.BackupManager&quot; expireSessionsOnShutdown=3D&quot;false&quot;<br=
>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 notifyListenersOnRe=
plication=3D&quot;true&quot; mapSendOptions=3D&quot;6&quot;/&gt;<br>
<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;Channel className=3D&quot;org.apa=
che.catalina.tribes.group.GroupChannel&quot;&gt;<br>=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0 &lt;Membership className=3D&quot;org.apache.catalina.tribes=
.membership.McastService&quot;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 address=3D&quot;228.0.0.4&quot;<br>
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 port=
=3D&quot;45563&quot;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0 frequency=3D&quot;500&quot;<br>=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 dropTime=3D&quot;30000&quot;/=
&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;Receiver className=3D&quot=
;org.apache.catalina.tribes.transport.nio.NioReceiver&quot;<br>
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 address=3D&=
quot;auto&quot;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0 port=3D&quot;4000&quot;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0 selectorTimeout=3D&quot;5000&quot;<br>=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 timeout=3D&quot;6000=
0&quot;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 =
maxThreads=3D&quot;6&quot;/&gt;<br>
<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;Sender className=3D&quot;org.a=
pache.catalina.tribes.transport.ReplicationTransmitter&quot;&gt;<br>=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;Transport className=3D&qu=
ot;org.apache.catalina.tribes.transport.nio.PooledParallelSender&quot; time=
out=3D&quot;60000&quot; keepAliveCount=3D&quot;0&quot;/&gt;<br>
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/Sender&gt;<br>=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0 &lt;Interceptor className=3D&quot;org.apache.catalina.tr=
ibes.group.interceptors.TcpFailureDetector&quot;/&gt;<br>=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0 &lt;Interceptor className=3D&quot;org.apache.catalina.tr=
ibes.group.interceptors.MessageDispatch15Interceptor&quot;/&gt;<br>
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;!--=A0 &lt;Interceptor className=3D&q=
uot;org.apache.catalina.tribes.group.interceptors.ThroughputInterceptor&quo=
t;/&gt; --&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/Channel&gt;<br>=A0=A0=
=A0=A0=A0=A0=A0=A0 &lt;Valve className=3D&quot;org.apache.catalina.ha.tcp.R=
eplicationValve&quot;<br>
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 filter=3D&quot;.*\.gif|.*\=
.js|.*\.jpeg|.*\.jpg|.*\.png|.*\.htm|.*\.html|.*\.css|.*\.txt&quot;/&gt;<br=
>=A0=A0=A0=A0=A0=A0=A0=A0 &lt;Valve className=3D&quot;org.apache.catalina.h=
a.session.JvmRouteBinderValve&quot;/&gt;<br>=A0=A0=A0=A0=A0=A0 &lt;ClusterL=
istener className=3D&quot;org.apache.catalina.ha.session.ClusterSessionList=
ener&quot;/&gt;<br>
=A0=A0=A0=A0=A0=A0 &lt;ClusterListener className=3D&quot;org.apache.catalin=
a.ha.session.JvmRouteSessionIDBinderListener&quot;/&gt;<br>=A0=A0=A0=A0 &lt=
;/Cluster&gt;<br><br><br><br><br><div class=3D"gmail_quote">On Thu, Apr 5, =
2012 at 2:25 AM, Mark Eggers <span dir=3D"ltr">&lt;<a href=3D"mailto:its_to=
asted@yahoo.com">its_toasted@yahoo.com</a>&gt;</span> wrote:<br>
<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex">Comments inline and surrounded by =3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D COMMENT =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D<br=
>
<br>
----- Original Message -----<br>
<br>
&gt; From: Dhaval Jaiswal &lt;<a href=3D"mailto:dhaval.jaiswal@via.com">dha=
val.jaiswal@via.com</a>&gt;<br>
&gt; To: Tomcat Users List &lt;<a href=3D"mailto:users@tomcat.apache.org">u=
sers@tomcat.apache.org</a>&gt;<br>
&gt; Cc:<br>
&gt; Sent: Wednesday, April 4, 2012 12:12 PM<br>
&gt; Subject: Re: SEVERE: Unable to start cluster.<br>
&gt;<br>
&gt;T hanks to all for sharing info. I will test it &amp; come back to you.=
<br>
<div class=3D"im">&gt;<br>
&gt; Also want to know that after starting session replication there will b=
e a<br>
&gt; huge logging in catalina.out for session information. How to minimize =
it ?<br>
<br>
</div>=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D COMMENT =3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D<br>
<br>
<br>
Did read my other mail concerning how to manage logging? I thought I was pr=
etty explicit (and gave an example). If my example for logging.properties w=
as unclear, please ask specific questions (to the list).<br>
<br>
If you want less logging, then turn down the levels. See the following docu=
mentation:<br>
<br>
<a href=3D"http://tomcat.apache.org/tomcat-6.0-doc/logging.html#Using_java.=
util.logging_%28default%29" target=3D"_blank">http://tomcat.apache.org/tomc=
at-6.0-doc/logging.html#Using_java.util.logging_(default)</a><br>
<br>
<br>
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D COMMENT =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D<br>
<div class=3D"im"><br>
<br>
&gt;<br>
&gt; Below are the logs of catalina.out. As per the log it shows that it ha=
s<br>
&gt; added member 192.168.3.18.<br>
&gt;<br>
&gt; Now we have a tomcat cluster group from 192.168.3.5 to 192.168.3.11.<b=
r>
&gt; However it is trying to connect to the 192.168.3.18.<br>
&gt;<br>
&gt;<br>
&gt; 192.168.3.18 is the tomcat of another cluster. Where should i look int=
o to<br>
&gt; resolve this. Where to define this limit that it has to share the sess=
ion<br>
&gt; information from 192.168.3.5 to 192.168.3.11.<br>
<br>
</div>=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D COMMENT =3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D<br>
<br>
<br>
>From the documentation on the web site at:<br>
<br>
<a href=3D"http://tomcat.apache.org/tomcat-6.0-doc/cluster-howto.html#Clust=
er_Information" target=3D"_blank">http://tomcat.apache.org/tomcat-6.0-doc/c=
luster-howto.html#Cluster_Information</a><br>
<br>
<br>
Membership is established using multicast heartbeats. Hence, if you wish to=
 subdivide your clusters, you can do this by changing the multicast IP addr=
ess or port in the &lt;Membership&gt; element.<br>
<br>
In other words, if you want multiple clusters change either the multicast a=
ddress here:<br>
<br>
=A0 =A0 =A0 =A0 =A0 =A0&lt;Membership className=3D&quot;org.apache.catalina=
.tribes.membership.McastService&quot;<br>
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 address=3D&quot;228.0.0.4&q=
uot;<br>
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 port=3D&quot;45564&quot;<br=
>
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 frequency=3D&quot;500&quot;=
<br>
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 dropTime=3D&quot;3000&quot;=
/&gt;<br>
<br>
to a different multicast address, or change the port in the above to a diff=
erent port. The multicast address / port establishes the cluster group. The=
 above snippet is from one of my server.xml files.<br>
<br>
You might also want to read up on how multicasting works.<br>
<br>
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D COMMENT =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D<br>
<div><div></div><div class=3D"h5"><br>
<br>
&gt;=A0<br>
<br>
&gt;<br>
&gt;<br>
&gt; INFO: Replication member<br>
&gt; added:org.apache.catalina.tribes.membership.MemberImpl[tcp://{-64, -88=
, 3,<br>
&gt; 18}:4000,{-64, -88, 3, 18},4000, alive=3D18507474,id=3D{25 -66 -54 110=
 84 -96<br>
&gt; 79 -74 -84 -106 122 -65 -121 9 -16 5 }, payload=3D{}, command=3D{}, do=
main=3D{}, ]<br>
&gt; Apr 5, 2012 12:31:10 AM<br>
&gt; org.apache.catalina.tribes.group.interceptors.TcpFailureDetector<br>
&gt; performBasicCheck<br>
&gt; INFO: Suspect member, confirmed<br>
&gt; alive.[org.apache.catalina.tribes.membership.MemberImpl[tcp://{-64, -8=
8, 3,<br>
&gt; 18}:4000,{-64, -88, 3, 18},4000, alive=3D18507474,id=3D{25 -66 -54 110=
 84 -96<br>
&gt; 79 -74 -84 -106 122 -65 -121 9 -16 5 }, payload=3D{}, command=3D{}, do=
main=3D{},<br>
&gt; ]]<br>
&gt; Apr 5, 2012 12:32:10 AM<br>
&gt; org.apache.catalina.tribes.group.interceptors.TcpFailureDetector<br>
&gt; memberDisappeared<br>
&gt; INFO: Received<br>
&gt; memberDisappeared[org.apache.catalina.tribes.membership.MemberImpl[tcp=
://{-64,<br>
&gt; -88, 3, 18}:4000,{-64, -88, 3, 18},4000, alive=3D18507474,id=3D{25 -66=
 -54 110<br>
&gt; 84 -96 79 -74 -84 -106 122 -65 -121 9 -16 5 }, payload=3D{}, command=
=3D{},<br>
&gt; domain=3D{}, ]] message. Will verify.<br>
&gt; Apr 5, 2012 12:32:10 AM<br>
&gt; org.apache.catalina.tribes.group.interceptors.TcpFailureDetector<br>
&gt; memberDisappeared<br>
&gt; INFO: Verification complete. Member still<br>
&gt; alive[org.apache.catalina.tribes.membership.MemberImpl[tcp://{-64, -88=
, 3,<br>
&gt; 18}:4000,{-64, -88, 3, 18},4000, alive=3D18507474,id=3D{25 -66 -54 110=
 84 -96<br>
&gt; 79 -74 -84 -106 122 -65 -121 9 -16 5 }, payload=3D{}, command=3D{}, do=
main=3D{},<br>
&gt; ]]<br>
&gt; Apr 5, 2012 12:32:10 AM<br>
&gt; org.apache.catalina.tribes.tipis.AbstractReplicatedMap heartbeat<br>
&gt; SEVERE: Unable to send AbstractReplicatedMap.ping message<br>
&gt; org.apache.catalina.tribes.ChannelException: Operation has timed out(6=
0000<br>
&gt; ms.).; Faulty members:tcp://{-64, -88, 3, 18}:4000;<br>
&gt;<br>
&gt;<br>
&gt;<br>
&gt;<br>
&gt;<br>
&gt;<br>
&gt;<br>
&gt;<br>
&gt;<br>
&gt; On Wed, Apr 4, 2012 at 8:43 PM, Thomas Rohde &lt;<a href=3D"mailto:tro=
@ordix.de">tro@ordix.de</a>&gt; wrote:<br>
&gt;<br>
&gt;&gt; =A0-----Urspr=FCngliche Nachricht-----<br>
&gt;&gt; =A0Von:=A0 =A0 Dhaval Jaiswal &lt;<a href=3D"mailto:dhaval.jaiswal=
@via.com">dhaval.jaiswal@via.com</a>&gt;<br>
&gt;&gt; =A0Gesendet:=A0 =A0 =A0 =A0Mi 04.04.2012 16:41<br>
&gt;&gt; =A0Betreff:=A0 =A0 =A0 =A0 SEVERE: Unable to start cluster.<br>
&gt;&gt; =A0An:=A0 =A0 =A0Tomcat Users List &lt;<a href=3D"mailto:users@tom=
cat.apache.org">users@tomcat.apache.org</a>&gt;;<br>
&gt;&gt; =A0CC:=A0 =A0 =A0Shrinivas Devarkonda &lt;<a href=3D"mailto:shrini=
vas.devarkonda@via.com">shrinivas.devarkonda@via.com</a>&gt;;<br>
&gt;&gt; =A0&gt; Hi List,<br>
&gt;&gt; =A0&gt;<br>
&gt;&gt; =A0&gt; Below is the error we are facing while starting tomcats.<b=
r>
&gt;&gt; =A0&gt;<br>
&gt;&gt; =A0&gt; SEVERE: Unable to start cluster.<br>
&gt;&gt; =A0&gt; org.apache.catalina.tribes.ChannelException: java.net.Sock=
etException:<br>
&gt;&gt; =A0Not<br>
&gt;&gt; =A0&gt; a multicast address; No faulty members identified.<br>
&gt;&gt; =A0&gt;<br>
&gt;&gt; =A0&gt;<br>
&gt;&gt; =A0&gt; Our cluster setting is as below in server.xml<br>
&gt;&gt; =A0&gt;<br>
&gt;&gt; =A0&gt;<br>
&gt;&gt; =A0&gt;=A0 &lt;Cluster<br>
&gt; className=3D&quot;org.apache.catalina.ha.tcp.SimpleTcpCluster&quot;<br=
>
&gt;&gt; =A0&gt; channelSendOptions=3D&quot;6&quot;&gt;<br>
&gt;&gt; =A0&gt;=A0 =A0 =A0 =A0 =A0&lt;Manager<br>
&gt; className=3D&quot;org.apache.catalina.ha.session.BackupManager&quot;<b=
r>
&gt;&gt; =A0&gt; expireSessionsOnShutdown=3D&quot;false&quot;<br>
&gt;&gt; =A0&gt;=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 notifyListenersOnRe=
plication=3D&quot;true&quot;<br>
&gt;&gt; =A0mapSendOptions=3D&quot;6&quot;/&gt;<br>
&gt;&gt; =A0&gt;<br>
&gt;&gt; =A0&gt;=A0 =A0 =A0 =A0 =A0 =A0 =A0&lt;Channel<br>
&gt;&gt; =A0&gt;<br>
&gt; className=3D&quot;org.apache.catalina.tribes.group.GroupChannel&quot;&=
gt;<br>
&gt;&gt; =A0&gt;=A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;Membership<br>
&gt;&gt; =A0&gt;<br>
&gt; className=3D&quot;org.apache.catalina.tribes.membership.McastService&q=
uot;<br>
&gt;&gt; =A0&gt;=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0address=
=3D&quot;192.168.3.14&quot;<br>
&gt;&gt; =A0&gt;=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0port=3D&=
quot;45564&quot;<br>
&gt;&gt; =A0&gt;=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0frequenc=
y=3D&quot;500&quot;<br>
&gt;&gt; =A0&gt;=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0dropTime=
=3D&quot;30000&quot;/&gt;<br>
&gt;&gt; =A0&gt;=A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;Receiver<br>
&gt;&gt; =A0&gt;<br>
&gt; className=3D&quot;org.apache.catalina.tribes.transport.nio.NioReceiver=
&quot;<br>
&gt;&gt; =A0&gt;=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0address=3D&q=
uot;auto&quot;<br>
&gt;&gt; =A0&gt;=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0port=3D&quot=
;4000&quot;<br>
&gt;&gt; =A0&gt;=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0selectorTime=
out=3D&quot;5000&quot;<br>
&gt;&gt; =A0&gt;=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0timeout=3D&q=
uot;60000&quot;<br>
&gt;&gt; =A0&gt;=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0maxThreads=
=3D&quot;6&quot;/&gt;<br>
&gt;&gt; =A0&gt;<br>
&gt;&gt; =A0&gt;=A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;Sender<br>
&gt;&gt; =A0&gt;<br>
&gt; className=3D&quot;org.apache.catalina.tribes.transport.ReplicationTran=
smitter&quot;&gt;<br>
&gt;&gt; =A0&gt;=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0&lt;Transport<br>
&gt;&gt; =A0&gt;<br>
&gt; className=3D&quot;org.apache.catalina.tribes.transport.nio.PooledParal=
lelSender&quot;<br>
&gt;&gt; =A0&gt; timeout=3D&quot;60000&quot; keepAliveCount=3D&quot;0&quot;=
/&gt;<br>
&gt;&gt; =A0&gt;=A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;/Sender&gt;<br>
&gt;&gt; =A0&gt;=A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;Interceptor<br>
&gt;&gt; =A0&gt;<br>
&gt;&gt;<br>
&gt; className=3D&quot;org.apache.catalina.tribes.group.interceptors.TcpFai=
lureDetector&quot;/&gt;<br>
&gt;&gt; =A0&gt;=A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;Interceptor<br>
&gt;&gt; =A0&gt;<br>
&gt;&gt;<br>
&gt; className=3D&quot;org.apache.catalina.tribes.group.interceptors.Messag=
eDispatch15Interc<br>
&gt;&gt; =A0&gt; eptor&quot;/&gt;<br>
&gt;&gt; =A0&gt;=A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;Interceptor<br>
&gt;&gt; =A0&gt;<br>
&gt;&gt;<br>
&gt; className=3D&quot;org.apache.catalina.tribes.group.interceptors.Throug=
hputInterceptor&quot;/<br>
&gt;&gt; =A0&gt; &gt;<br>
&gt;&gt; =A0&gt;=A0 =A0 =A0 =A0 =A0 =A0 &lt;/Channel&gt;<br>
&gt;&gt; =A0&gt;=A0 =A0 =A0 =A0 =A0 &lt;Valve<br>
&gt; className=3D&quot;org.apache.catalina.ha.tcp.ReplicationValve&quot;<br=
>
&gt;&gt; =A0&gt;<br>
&gt;&gt; =A0&gt;<br>
&gt;&gt;<br>
&gt; filter=3D&quot;.*\.gif|.*\.js|.*\.jpeg|.*\.jpg|.*\.png|.*\.htm|.*\.htm=
l|.*\.css|.*\.txt<br>
&gt;&gt; =A0&gt; &quot;/&gt;<br>
&gt;&gt; =A0&gt;=A0 =A0 =A0 =A0 =A0 &lt;Valve<br>
&gt;&gt; =A0&gt;<br>
&gt; className=3D&quot;org.apache.catalina.ha.session.JvmRouteBinderValve&q=
uot;/&gt;<br>
&gt;&gt; =A0&gt;=A0 =A0 =A0 =A0 &lt;ClusterListener<br>
&gt;&gt; =A0&gt;<br>
&gt; className=3D&quot;org.apache.catalina.ha.session.ClusterSessionListene=
r&quot;/&gt;<br>
&gt;&gt; =A0&gt;=A0 =A0 =A0 =A0 &lt;ClusterListener<br>
&gt;&gt; =A0&gt;<br>
&gt;&gt;<br>
&gt; className=3D&quot;org.apache.catalina.ha.session.JvmRouteSessionIDBind=
erListener&quot;/&gt;<br>
&gt;&gt; =A0&gt;=A0 =A0 =A0 &lt;/Cluster&gt;<br>
&gt;&gt; =A0&gt;<br>
&gt;&gt; =A0&gt;<br>
&gt;&gt; =A0&gt;<br>
&gt;&gt; =A0&gt; Note: 192.168.3.14 is the IP of backup manager with java &=
amp;<br>
&gt; 192.168.3.9 is<br>
&gt;&gt; =A0&gt; the IP address of local tomcat where above server.xml is h=
osted.<br>
&gt;&gt; =A0&gt;<br>
&gt;&gt; =A0&gt; Please guide us as to how to overcome the issue &amp; plea=
se give us<br>
&gt; the<br>
&gt;&gt; =A0sample<br>
&gt;&gt; =A0&gt; &lt;cluster&gt;=A0 =A0&lt;/cluster&gt;=A0 file if possible=
.<br>
&gt;&gt; =A0&gt;<br>
&gt;&gt;<br>
&gt;&gt; =A0Hi Dhaval,<br>
&gt;&gt;<br>
&gt;&gt; =A0you have to set a multicast ip address for the &quot;address&qu=
ot;<br>
&gt; attribute of the<br>
&gt;&gt; =A0McastService. A multicast address looks like 224.x.x.x.<br>
&gt;&gt;<br>
&gt;&gt; =A0Take a look at <a href=3D"http://en.wikipedia.org/wiki/Multicas=
t_address" target=3D"_blank">http://en.wikipedia.org/wiki/Multicast_address=
</a> for further<br>
&gt;&gt; =A0details.<br>
&gt;&gt;<br>
&gt;&gt; =A0The Tomcat cluster uses multicast for the management of the clu=
ster member.<br>
&gt;&gt;<br>
&gt;&gt; =A0Thomas<br>
&gt;&gt;<br>
</div></div>&gt; &lt;<a href=3D"http://www.via.com/" target=3D"_blank">http=
://www.via.com/</a>&gt;<br>
&gt;<br>
<br>
. . . . just my two cents.<br>
/mde/<br>
<div><div></div><div class=3D"h5"><br>
---------------------------------------------------------------------<br>
To unsubscribe, e-mail: <a href=3D"mailto:users-unsubscribe@tomcat.apache.o=
rg">users-unsubscribe@tomcat.apache.org</a><br>
For additional commands, e-mail: <a href=3D"mailto:users-help@tomcat.apache=
.org">users-help@tomcat.apache.org</a><br>
<br>
</div></div></blockquote></div><br><br clear=3D"all"><br>-- <br><table styl=
e=3D"border-collapse:collapse" border=3D"0" cellpadding=3D"0" cellspacing=
=3D"0"><tbody><tr><td rowspan=3D"5" style=3D"width:127.8pt;padding:0in 5.4p=
t 0in 5.4pt" valign=3D"top" width=3D"170">
<p><a href=3D"http://www.via.com/" target=3D"_blank"><span style=3D"color:b=
lue;text-decoration:none"><img src=3D"cid:image001.png@01CD1254.166F7B10" a=
lt=3D"Inline image 2" height=3D"77" width=3D"145" border=3D"0"></span></a><=
/p></td><td style=3D"width:351.0pt;padding:0in 5.4pt 0in 5.4pt" valign=3D"t=
op" width=3D"468">
<p><b><span style=3D"font-size:12.0pt;color:red">Dhaval</span></b> <span st=
yle=3D"color:#595959">| Database &amp; System </span><span style=3D"font-si=
ze:12.0pt;font-family:&quot;Times New Roman&quot;,&quot;serif&quot;"></span=
></p>
</td></tr><tr><td style=3D"width:351.0pt;padding:0in 5.4pt 0in 5.4pt" valig=
n=3D"top" width=3D"468"><p><b>E:</b><span style=3D"color:#595959"> dhaval.j=
aiswal<a href=3D"mailto:ramya@via.com" target=3D"_blank"><span style=3D"col=
or:blue">@via.com</span></a>| </span><b>T:</b><span style=3D"color:#595959"=
> 080 4043 3000 | </span><b>M:</b><span style=3D"color:#595959"> +91 - 8095=
 397 843</span><span style=3D"font-size:12.0pt;font-family:&quot;Times New =
Roman&quot;,&quot;serif&quot;"></span></p>
</td></tr><tr><td style=3D"width:351.0pt;padding:0in 5.4pt 0in 5.4pt" valig=
n=3D"top" width=3D"468"><p><a href=3D"http://www.via.com/" target=3D"_blank=
"><span style=3D"color:blue;text-decoration:none"><img src=3D"cid:image002.=
jpg@01CD1254.166F7B10" alt=3D"all-icon.jpg" height=3D"57" width=3D"374" bor=
der=3D"0"></span></a></p>
</td></tr></tbody></table><br>

--e89a8f6438c28b1c8604bcef2423--
--e89a8f6438c28b1c9404bcef2424--

From users-return-233382-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 14:17:06 2012
Return-Path: <users-return-233382-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1F0969DD4
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 14:17:06 +0000 (UTC)
Received: (qmail 33699 invoked by uid 500); 5 Apr 2012 14:17:02 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 33519 invoked by uid 500); 5 Apr 2012 14:17:02 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 33510 invoked by uid 99); 5 Apr 2012 14:17:02 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 14:17:02 +0000
Received: from localhost (HELO [192.168.23.9]) (127.0.0.1)
  (smtp-auth username markt, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 14:17:02 +0000
Message-ID: <4F7DA95C.5070107@apache.org>
Date: Thu, 05 Apr 2012 15:17:00 +0100
From: Mark Thomas <markt@apache.org>
User-Agent: Mozilla/5.0 (Windows NT 5.2; WOW64; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Need a sample server.xml file for the session replication using
 backup manager
References: <CABKrPsNAwOAZKPZ+EJ24jpBciKNVzb-XHdYUF-2o0V9wNOffMA@mail.gmail.com> <03f001cd06c3$449a3a80$cdceaf80$@hanik.com> <CABKrPsMQGx-Zmq3xB+OriCAP+ciu990PshHe=8fqp-cdKuAfmA@mail.gmail.com> <4F699F51.5090009@apache.org> <CABKrPsMvToexGESTtjqP9SR2bkM+dDxiGnfE8wM9QcXy5mn45Q@mail.gmail.com>
In-Reply-To: <CABKrPsMvToexGESTtjqP9SR2bkM+dDxiGnfE8wM9QcXy5mn45Q@mail.gmail.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

On 05/04/2012 14:57, Dhaval Jaiswal wrote:
> Thanks for the info. We are using sticky sessions only with BackupManager.
> 
> See We have the current setup.
> 
> 1 Apache + sticky sessions with mod_ajp proxy balancer in httpd.conf +  10
> tomcats.
> 
> currently if one of our tomcat goes down the User sessions goes down, I
> need to stop this quickly somehow either by using deltamanager or
> Backupmanager.
> 
> deltamanager all-to-all session replication is not feasible since our apps
> is heavy and memory chocks.
> 
> We need a simple setup where all 9 tomcats should send session replication
> to 10th tomcat where app is also running.
> 10th tomcat has high hardware config in terms of memory+CPU.
> 
> So please guide us on *server.xml change for 9 tomcats* and *server.xml for
> 10th Tomcat which is BackupManager*. We have sticky sessions config up and
> running.

That isn't the way that the backup manage works. Go and re-read my last
post.

Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233383-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 15:00:40 2012
Return-Path: <users-return-233383-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 156EF9FE8
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 15:00:40 +0000 (UTC)
Received: (qmail 66256 invoked by uid 500); 5 Apr 2012 15:00:36 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 66073 invoked by uid 500); 5 Apr 2012 15:00:36 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 66064 invoked by uid 99); 5 Apr 2012 15:00:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 15:00:36 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of knst.kolinko@gmail.com designates 209.85.213.45 as permitted sender)
Received: from [209.85.213.45] (HELO mail-yw0-f45.google.com) (209.85.213.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 15:00:30 +0000
Received: by yhoo21 with SMTP id o21so938220yho.18
        for <users@tomcat.apache.org>; Thu, 05 Apr 2012 08:00:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=Ps3r/FTl70/i6854O4VZEPA3KZgizG3U083TsD67orE=;
        b=qgd7p3owha2Js6EMmCktNd3LW3+0aJLbPTsXnxV5vLM8MOmz6jUgeyw+RknbpQNBAF
         2qxc170kVFrUQGspP6wCQJJqmO2QXBpuFVHmmY8mpX/ZuTzEWacJjl44CuZSY7z6yDsB
         uq6AtWObOIHD6LugyZV4ubIVHMUInHPmyZCa+BqEg+A4Q6m74MHAuEru5AADaARgnQqw
         dhQw1AY36wf00b1JWKDBMBgv4VTkP8DefR32/mPVzZAv28vJMzIHQt5wSKVDuecR3DiM
         OMPCP6IutAAI8GwNS53tFa+nREYrD+vjhgsV95vfAYCdm5ruXpVQE77w4/x8Ek3tdKdR
         fGxQ==
MIME-Version: 1.0
Received: by 10.236.189.98 with SMTP id b62mr2619226yhn.9.1333638009473; Thu,
 05 Apr 2012 08:00:09 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Thu, 5 Apr 2012 08:00:09 -0700 (PDT)
In-Reply-To: <CAOdshCwyQCNeQT5NJe4dtzUTZvDV6tLp1f4F-wLUzDThz+fDSg@mail.gmail.com>
References: <CAOdshCzbq3U5pSFC1MmVjmWc=tkT1TRyqFjEiyxwHSLBWjynFA@mail.gmail.com>
	<CABzHfVm=z7OaZczbEECHbOY3ovNtkiJSANZ+D6ehvhV8Ktmrrg@mail.gmail.com>
	<CAOdshCwyQCNeQT5NJe4dtzUTZvDV6tLp1f4F-wLUzDThz+fDSg@mail.gmail.com>
Date: Thu, 5 Apr 2012 19:00:09 +0400
Message-ID: <CABzHfVnfGegj00S46g5ftz+XhEVTYndv_2ZWPOCY6cehUS6bhw@mail.gmail.com>
Subject: Re: Problem with shutting down tomcat5.5.29
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

2012/4/5 Petr Hracek <phracek2@gmail.com>:
> What I see in the start.log file is:
> 2012-04-05 15:28:04,557 [main] INFO
> org.apache.coyote.http11.Http11BaseProtocol - Initializing Coyote
> HTTP/1.1 on http-8080
> 2012-04-05 15:28:04,560 [main] INFO
> org.apache.catalina.startup.Catalina - Initialization processed in
> 1062 ms
> 2012-04-05 15:28:04,727 [main] INFO
> org.apache.catalina.core.StandardService - Starting service Catalina
> 2012-04-05 15:28:04,731 [main] INFO
> org.apache.catalina.core.StandardEngine - Starting Servlet Engine:
> Apache Tomcat/5.5.27
> 2012-04-05 15:28:04,743 [main] INFO
> org.apache.catalina.core.StandardHost - XML validation disabled
> 2012-04-05 15:28:06,229 [main] INFO
> org.apache.catalina.loader.WebappClassLoader -
> validateJarFile(/opt/repgen/servlet/WEB-INF/lib/servlet.jar) - jar not
> loaded. See Servlet Spec 2.3, section 9.7.2. Offending class:
> javax/servlet/Servlet.class

The above is bad. (Though not related to your original question).
You should not have servlet.jar in your application. Servlet API is
provided by Tomcat only. Tomcat had to ignore your jar.

> 2012-04-05 15:28:06,312 [main] INFO
> org.apache.coyote.http11.Http11BaseProtocol - Starting Coyote HTTP/1.1
> on http-8080
> 2012-04-05 15:28:06,423 [main] INFO
> org.apache.jk.common.ChannelSocket - JK: ajp13 listening on
> /127.0.0.1:8009
> 2012-04-05 15:28:06,425 [main] INFO =A0org.apache.jk.server.JkMain - Jk
> running ID=3D0 time=3D0/15 =A0config=3Dnull
> 2012-04-05 15:28:06,453 [main] INFO
> org.apache.catalina.storeconfig.StoreLoader - Find registry
> server-registry.xml at classpath resource
> 2012-04-05 15:28:06,514 [main] INFO
> org.apache.catalina.startup.Catalina - Server startup in 1954 ms
>
> Here is mention ajp13. It is not correct one, right?
>

The above logs mean that you do not have Tomcat-Native library, so
plain java (non-Apr) implementations of connectors are used.

Thus you are better to remove/comment the following line in server.xml
  <Listener className=3D"org.apache.catalina.core.AprLifecycleListener" />

( When Tomcat-Native is used, startup of 5.5 would look like the following:
[[[
05.04.2012 18:47:22 org.apache.catalina.core.AprLifecycleListener init
INFO: Loaded APR based Apache Tomcat Native library 1.1.22.
05.04.2012 18:47:22 org.apache.catalina.core.AprLifecycleListener init
INFO: APR capabilities: IPv6 [false], sendfile [true], accept filters
[false], random [true].
05.04.2012 18:47:23 org.apache.coyote.http11.Http11AprProtocol init
INFO: Initializing Coyote HTTP/1.1 on http-8080
05.04.2012 18:47:23 org.apache.coyote.ajp.AjpAprProtocol init
INFO: Initializing Coyote AJP/1.3 on ajp-8009
05.04.2012 18:47:23 org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 1578 ms
05.04.2012 18:47:23 org.apache.catalina.core.StandardService start
INFO: Starting service Catalina
05.04.2012 18:47:23 org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/5.5.35
05.04.2012 18:47:23 org.apache.catalina.core.StandardHost start
INFO: XML validation disabled
05.04.2012 18:47:24 org.apache.coyote.http11.Http11AprProtocol start
INFO: Starting Coyote HTTP/1.1 on http-8080
05.04.2012 18:47:24 org.apache.coyote.ajp.AjpAprProtocol start
INFO: Starting Coyote AJP/1.3 on ajp-8009
05.04.2012 18:47:24 org.apache.catalina.storeconfig.StoreLoader load
INFO: Find registry server-registry.xml at classpath resource
05.04.2012 18:47:24 org.apache.catalina.startup.Catalina start
INFO: Server startup in 1484 ms
]]]

Note that protocol implementation names are "Http11AprProtocol" and
"AjpAprProtocol" )



> Is it possible that during the shutting down of tomcat5 stopping
> operation will take more then 2 minutes?

It is possible, but you better take a thread dump (3 dumps separated
by several seconds) to look what Tomcat is actually doing.

How to do thread dumps is mentioned in the FAQ


> When I am commented out Listener section then during the stopping
> tomcat5 Failed is not mentioned
> but in stop.log file Exception is still there. How to avoid that
> Exception message will not be there?
>

You mean "java.net.ConnectException: Connection refused"  exception?

It means that shutdown script cannot connect to Tomcat shutdown port
to send it the shutdown command,  regardless of the reason.

If it is because Tomcat is already stopped (e.g. you tried to shut it
down twice in a row) then it is normal and is OK.  If it is because of
any other reason then it is bad.


Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233384-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 15:50:24 2012
Return-Path: <users-return-233384-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 98D8B9561
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 15:50:24 +0000 (UTC)
Received: (qmail 23154 invoked by uid 500); 5 Apr 2012 15:50:21 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 22946 invoked by uid 500); 5 Apr 2012 15:50:21 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 22936 invoked by uid 99); 5 Apr 2012 15:50:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 15:50:20 +0000
X-ASF-Spam-Status: No, hits=1.0 required=5.0
	tests=FREEMAIL_REPLY,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aldana@gmx.de designates 213.165.64.23 as permitted sender)
Received: from [213.165.64.23] (HELO mailout-de.gmx.net) (213.165.64.23)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 05 Apr 2012 15:50:13 +0000
Received: (qmail invoked by alias); 05 Apr 2012 15:49:52 -0000
Received: from unknown (EHLO [10.250.72.35]) [195.234.136.12]
  by mail.gmx.net (mp035) with SMTP; 05 Apr 2012 17:49:52 +0200
X-Authenticated: #3352531
X-Provags-ID: V01U2FsdGVkX1/noWY4f8nnhVPgDLl1G/5p/fgwR3ToZQT9sJhYhD
	FUfRJTLLlUQ3kO
Message-ID: <4F7DBD77.8040408@gmx.de>
Date: Thu, 05 Apr 2012 17:42:47 +0200
From: manuel aldana <aldana@gmx.de>
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:11.0) Gecko/20120329 Thunderbird/11.0.1
MIME-Version: 1.0
To: users@tomcat.apache.org
Subject: 500 HTTP-status forwarding broken (JSP rendering + Exception occurence)
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0

Inside web.xml I defined <error-page>500..., so 500-status is resolving 
to JSP error pages. I get inconsistent behaviour when an Exception 
occurs during JSP rendering.

1) JSP syntax error (e.g. broken XML):
===
-> 500 status is set correctly
-> forward to jsp-error page is done correctly and 500 returned to browser


2) JSP runtime error:
===
...
${model.causingNullPointerException}
...
-> 200 status
-> i.e. broken 500-forward to error.jsp
-> I get broken HTML inside browser


Second case is quite dangerous because we didn't see anything inside 
logs and 200 status was presented though we had production bug. Just 
accidently looking at catalina.log (stdout logging of all exception) 
covered this.

I checked source-code (6.0.35):
===
core.StandardHostValue:282:
...
response.setStatus(HttpServletResponse.SC_INTERNAL_SERVER_ERROR);

connector.Response:1457
...
if (isCommitted())
             return;
...

My assumption:
- In 1st case 500 forward + status setting works fine, because JSP 
rendering breaks from beginning and no content is flushed to output-buffer
- In 2nd case "some" of jsp is rendered and written to output-buffer and 
resetting-status is prohibited (see isCommitted() check)
=> i.e. there is no way forwarding to 500 status when error occurred 
during runtime of JSP rendering

I guess this is a bug (want to backup first before creating trace-ticket)?

Do you know a workaround for this? Currently I have workaround to have a 
special Filter checking for Exceptions and including 200 status. The bad 
thing is that still browser/users get returned 200 OK status, though 
error occurred , because resetting status isn't allowed.

Thanks for support.

-- 
  manuel aldana
  mail: maldana.geek@gmail.com | manuel@aldana-online.de
  blog: www.aldana-online.de


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233385-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 15:58:22 2012
Return-Path: <users-return-233385-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 03887988D
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 15:58:21 +0000 (UTC)
Received: (qmail 51050 invoked by uid 500); 5 Apr 2012 15:58:18 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 50988 invoked by uid 500); 5 Apr 2012 15:58:18 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 50979 invoked by uid 99); 5 Apr 2012 15:58:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 15:58:18 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of knst.kolinko@gmail.com designates 209.85.213.45 as permitted sender)
Received: from [209.85.213.45] (HELO mail-yw0-f45.google.com) (209.85.213.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 15:58:12 +0000
Received: by yhoo21 with SMTP id o21so986198yho.18
        for <users@tomcat.apache.org>; Thu, 05 Apr 2012 08:57:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=7mFxBxQmn7SpA3pSL6aY8XDgqxlqILQxEPVjU+EYwCk=;
        b=iwXITTzpC46b4Tk0+MD/ehU02S8SjD2Owg+vfS64hLNuw/wG/FoYMfFHDWgwLKd0vp
         MwGMxNRSzdkmhQZSOtNsDTvXHpZlD/Tm80iHDj9PpaHM/ucPZQ0pRIQqBoVifca0UFQl
         SweF/NAVWGs/W602c8azJ+O3UPCJR9IZdibjcmCtomW24hnpkXitbCd1nGp73cZUVMkK
         4VGORSqktVx0UIOErYKgt+zcQv0GL9I/Pu/VtTn/2fOJewjYaOjVbttcitT1OVrZhqjn
         G+xuSBPScW773ryxgVkzhPEe3x/acpJxgOIBG7hcBuix8TDcgWE76yrClYH6E4/F+FF5
         MvGQ==
MIME-Version: 1.0
Received: by 10.236.175.41 with SMTP id y29mr2726966yhl.60.1333641471588; Thu,
 05 Apr 2012 08:57:51 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Thu, 5 Apr 2012 08:57:51 -0700 (PDT)
In-Reply-To: <217DDBC2BB1E394CA9E7446337CBDEF20102DEDB4FA0@il-ex01.ad.checkpoint.com>
References: <217DDBC2BB1E394CA9E7446337CBDEF20102DEDB4F4A@il-ex01.ad.checkpoint.com>
	<4F7C81BB.1040804@apache.org>
	<217DDBC2BB1E394CA9E7446337CBDEF20102DEDB4FA0@il-ex01.ad.checkpoint.com>
Date: Thu, 5 Apr 2012 19:57:51 +0400
Message-ID: <CABzHfV=hqDq_UmjVpO0moj7jSGRxp2BXgEFzTp7noS+iJaOVzw@mail.gmail.com>
Subject: Re: Bug in Tomcat AJP Connector?
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

2012/4/5 Ofer Israeli <oferi@checkpoint.com>:
> Mark Thomas wrote:
>> On 04/04/2012 17:02, Ofer Israeli wrote:
>>
>> Once you have an OOME all bets are off. The JVM needs to be restarted.
>> There is no guarantee of reliable operation after an OOME.
>>
>> Mark
>
> Hi Mark,
> I agree that there in such a situation the JVM should be restarted, but i=
t isn't restarted by Tomcat. =A0On the other hand, Tomcat does take some pr=
ecautious actions and kills the accepting thread, but in such a case it sho=
uld also close the socket that thread is listening on otherwise it is leavi=
ng garbage around after the thread's death.
> Do you see any reason as not to close the listening socket?
>

1. Tomcat does not start JVM  thus it cannot restart it.

You need some external tool or script or admin to perform monitoring
and (re)starts.

2. OOM can happen at a random place. Once it happens, it is likely
that other places will also start to fail randomly. It is also likely
that your attempts to recover will fail as well.

Mark already mentioned it: "all bets are off".

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233386-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 16:01:07 2012
Return-Path: <users-return-233386-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1C91F9982
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 16:01:07 +0000 (UTC)
Received: (qmail 63235 invoked by uid 500); 5 Apr 2012 16:01:03 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 63153 invoked by uid 500); 5 Apr 2012 16:01:03 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 63143 invoked by uid 99); 5 Apr 2012 16:01:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 16:01:03 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [76.96.62.64] (HELO qmta07.westchester.pa.mail.comcast.net) (76.96.62.64)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 16:00:57 +0000
Received: from omta19.westchester.pa.mail.comcast.net ([76.96.62.98])
	by qmta07.westchester.pa.mail.comcast.net with comcast
	id uDvu1i00427AodY57G0cU9; Thu, 05 Apr 2012 16:00:36 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta19.westchester.pa.mail.comcast.net with comcast
	id uG0c1i00P38FjT13fG0cHL; Thu, 05 Apr 2012 16:00:36 +0000
Message-ID: <4F7DC1A3.7050208@christopherschultz.net>
Date: Thu, 05 Apr 2012 12:00:35 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Bug in Tomcat AJP Connector?
References: <217DDBC2BB1E394CA9E7446337CBDEF20102DEDB4F4A@il-ex01.ad.checkpoint.com> <4F7C81BB.1040804@apache.org> <217DDBC2BB1E394CA9E7446337CBDEF20102DEDB4FA0@il-ex01.ad.checkpoint.com> <CABzHfV=hqDq_UmjVpO0moj7jSGRxp2BXgEFzTp7noS+iJaOVzw@mail.gmail.com>
In-Reply-To: <CABzHfV=hqDq_UmjVpO0moj7jSGRxp2BXgEFzTp7noS+iJaOVzw@mail.gmail.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Konstantin,

On 4/5/12 11:57 AM, Konstantin Kolinko wrote:
> 1. Tomcat does not start JVM  thus it cannot restart it.
> 
> You need some external tool or script or admin to perform
> monitoring and (re)starts.

Asking Tomcat to restart itself after OOME would be like expecting you
to defibrillate yourself. It works in theory, but not in practice.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk99waMACgkQ9CaO5/Lv0PCVogCgtEiQFk+fuEAHKc3lXkNAM0Ak
MrAAnR+NKO5LK4EAmxviUTnBjTJGg7Sv
=5S+d
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233387-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 16:07:47 2012
Return-Path: <users-return-233387-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D010E9D09
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 16:07:47 +0000 (UTC)
Received: (qmail 89857 invoked by uid 500); 5 Apr 2012 16:07:44 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 89792 invoked by uid 500); 5 Apr 2012 16:07:44 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 89783 invoked by uid 99); 5 Apr 2012 16:07:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 16:07:44 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [76.96.59.243] (HELO qmta13.westchester.pa.mail.comcast.net) (76.96.59.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 16:07:36 +0000
Received: from omta17.westchester.pa.mail.comcast.net ([76.96.62.89])
	by qmta13.westchester.pa.mail.comcast.net with comcast
	id uEXC1i0081vXlb85DG7F4z; Thu, 05 Apr 2012 16:07:15 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta17.westchester.pa.mail.comcast.net with comcast
	id uG7F1i00R38FjT13dG7Fw7; Thu, 05 Apr 2012 16:07:15 +0000
Message-ID: <4F7DC332.7070402@christopherschultz.net>
Date: Thu, 05 Apr 2012 12:07:14 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: 500 HTTP-status forwarding broken (JSP rendering + Exception
 occurence)
References: <4F7DBD77.8040408@gmx.de>
In-Reply-To: <4F7DBD77.8040408@gmx.de>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Manuel,

On 4/5/12 11:42 AM, manuel aldana wrote:
> Inside web.xml I defined <error-page>500..., so 500-status is
> resolving to JSP error pages. I get inconsistent behaviour when an
> Exception occurs during JSP rendering.
> 
> 1) JSP syntax error (e.g. broken XML): === -> 500 status is set
> correctly -> forward to jsp-error page is done correctly and 500
> returned to browser
> 
> 
> 2) JSP runtime error: === ... ${model.causingNullPointerException} 
> ... -> 200 status -> i.e. broken 500-forward to error.jsp -> I get
> broken HTML inside browser

How much broken HTML do you get?

It's possible that the response has already been committed to the
client and there's no way to show the error page instead.

Check your log files for "Response already committed" or related errors.

> - In 2nd case "some" of jsp is rendered and written to
> output-buffer and resetting-status is prohibited (see isCommitted()
> check) => i.e. there is no way forwarding to 500 status when error
> occurred during runtime of JSP rendering

Correct.

> I guess this is a bug (want to backup first before creating
> trace-ticket)?

If this is a bug, it's in your webapp: you generate too much content
before you have any errors.

> Do you know a workaround for this?

Several options (I'm sure there are more):

1. Don't throw exceptions ;)
2. Increase your output buffer (negative performance considerations)
3. Buffer the *entire* response (negative performance considerations,
   requires additional code)

Honestly, #1 is the best policy IMO, since you really should have all
of your dangerous activities out of the way before you start
generating a response.

> Currently I have workaround to have a special Filter checking for
> Exceptions and including 200 status. The bad thing is that still
> browser/users get returned 200 OK status, though error occurred ,
> because resetting status isn't allowed.

I don't know how you will correct malformed HTML in that case.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk99wzIACgkQ9CaO5/Lv0PArgQCgxCY0TAXJffHwEbfqFYSquGnZ
q7oAni/aTXMjNnC/qbLxeQBixC1DbHW0
=S5iP
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233388-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 16:12:25 2012
Return-Path: <users-return-233388-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0CDE59EBD
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 16:12:25 +0000 (UTC)
Received: (qmail 4286 invoked by uid 500); 5 Apr 2012 16:12:21 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 4229 invoked by uid 500); 5 Apr 2012 16:12:21 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 4220 invoked by uid 99); 5 Apr 2012 16:12:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 16:12:21 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pid@pidster.com designates 74.125.82.43 as permitted sender)
Received: from [74.125.82.43] (HELO mail-wg0-f43.google.com) (74.125.82.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 16:12:13 +0000
Received: by wgbdr12 with SMTP id dr12so1249235wgb.0
        for <users@tomcat.apache.org>; Thu, 05 Apr 2012 09:11:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type;
        bh=M8B0RFmvPGtwE6x7nXyvRdpju3d8mcL+8kWGbuzerZQ=;
        b=q1oULGRmmDg340F406hLZs7/tamJm5gDU0l51nacQdlXd0yu6MEjMrZ9040AV0sFDY
         59jl2Cr3gIOCcgx3G4HuWh2N4GrU56+sGrz3fXEbb1Q3jFTSwo8HvHLC7odmV0UtNhV2
         cynIuS4ivy0EF/YqEeWwfdUDE+Xkg8Mz82iM4=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type:x-gm-message-state;
        bh=M8B0RFmvPGtwE6x7nXyvRdpju3d8mcL+8kWGbuzerZQ=;
        b=nkXI63JwjcKMjv4+73QfKYnLHgbMNcKVvtXoZJqF+5Ku0WjR6v3iKGQBb5LXg1AmI9
         Te27lK8+CK4S229IHfFmtTDt1GUtcDBnipy+lfSdWFkq89EB+Q6QHISBoGdvys+7Y1iY
         rNFaTxl3V+f4F9I0V5LPtngFVUBaCHEe+YdrDZbhCgT78NeXUPhpA7Xpb3zZagq9fwHj
         lA7wnJJmaIGwomcrkV2kERbXdd5WYluwOSTqVPWv10DU/sjyENAy3ihcvxjzUHH0qz6T
         RALMovCqj7yP4GN7lddvKeAo/aj0/abnNxzJBKxdOD1fxmmh5wM1FDTOfY9ngj74YpSo
         KViA==
Received: by 10.180.89.130 with SMTP id bo2mr6260950wib.17.1333642313443;
        Thu, 05 Apr 2012 09:11:53 -0700 (PDT)
Received: from Asura.local ([81.134.122.147])
        by mx.google.com with ESMTPS id 9sm18746583wid.2.2012.04.05.09.11.50
        (version=SSLv3 cipher=OTHER);
        Thu, 05 Apr 2012 09:11:52 -0700 (PDT)
Message-ID: <4F7DC43B.3050108@pidster.com>
Date: Thu, 05 Apr 2012 17:11:39 +0100
From: Pid <pid@pidster.com>
Organization: Pidster Inc
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Discrepancy between Tomcat's connection pool and tomcat's report
 on memory leaks
References: <1333547379.63979.YahooMailNeo@web122302.mail.ne1.yahoo.com> <4401822.257.1333548863561.JavaMail.daniel@cleveland> <1333554810.98186.YahooMailNeo@web122304.mail.ne1.yahoo.com>
In-Reply-To: <1333554810.98186.YahooMailNeo@web122304.mail.ne1.yahoo.com>
X-Enigmail-Version: 1.4
OpenPGP: id=62590808
Content-Type: multipart/signed; micalg=pgp-sha512;
 protocol="application/pgp-signature";
 boundary="------------enigB597771273F2E707518DC88C"
X-Gm-Message-State: ALoCoQn7Wmk0wbrKJTFBTWrMaYXLJrLUCS0hcKtxD+EaQj9ns56DVo6EKUpUC+Sx29FQoha3RAaj

--------------enigB597771273F2E707518DC88C
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

On 04/04/2012 16:53, Hermes Flying wrote:
>>> Which is indicating that the application deployed to "/GeneralApplica=
tion" is creating a thread named "H2 Log Writer >>GENERICAPPLICATION" and=
 never stopping it.  I do not believe that this would be associated with =
the pool created by Tomcat as that would >>be created as a global resourc=
e available to all applications and not specific to "/GeneralApplication"=
=2E
>>> I can't really say a whole lot more about what is going on, just that=
 this strikes me as odd.  If it were my app, I'd dig into this more and s=
ee what is >>creating that thread.  Possibly with a profiler or thread du=
mps.
>=20
> What is happening here (as I undestand it is the following):
> 1) My application uses Tomcat's connection pool from the data source
> 2) My application uses H2 as a file database. H2 starts back end(s) thr=
ead which is about logging (H2 logging) and possibly other tasks and that=
 is the thread that catalina complaints about
> 3) H2 remains open as long as there are open connections and is closed =
when the last connection is released
> 4) My application uses Tomcat's connection pool and as a result Tomcat =
"decides" when the data source should be disposed or when connections are=
 released (not my code).
> 5) I shutdown Tomcat.=20
> 6) The connection pool of Tomcat has still connections (e.g. idle) and =
so H2 does not shutdown. Hence it's lock file and related background thre=
ads are still running.
> 7) Tomcat shuts down my application but does not dispose off the connec=
tion pool (yet). I believe this happens because of the way Tomcat is bein=
g shut down (as sequence of actions I mean).
> 8) Since the connection pool has not been disposed, there are still con=
nections and as a result H2 is still running
> 9) Tomcat's memory leak detection mechanism detects H2 threads started =
from GenericApplication which uses H2 and gives the report in catalina.ou=
t. So Tomcat gives the report first and then proceeds with the shutdown (=
and this perhaps is not correct? I can't say)
> 10) Tomcat eventually shuts down.
> =20
> Is this scenario as I describe it, wrong?

If you define the DataSource in GlobalNamingResources the pool will be
started and stopped with the Tomcat lifecycle.

Applications have their own lifecycle inside Tomcat, they are started
after Tomcat (obviously) and stopped before Tomcat stops (also obviously)=
=2E

This is why the pool will not stop before your application, unless you
do something manual to change that.

If an application causes a thread to come into existence and allowing it
to have the WebappClassLoader as its context classloader value, but does
not shut it down, Tomcat complains.



> Should I somehow have configured the datasource to be "associated" with=
 my web application instead of a generic data source?

Maybe, you could test configuring the pool Resource in the Context,
where the ResourceLink currently is.


> Why?=20

So it doesn't cause a leak?


> Should I have shut the data source myself? How?
> If all what I describe is reasonable this seems to me like a "racing" c=
ondition. How should I mediate this?

Maybe the H2 devs will fix the classloader problem.


p

> Thank you for your time.
>  =20
>=20
> ________________________________
>  From: Daniel Mikusa <dmikusa@vmware.com>
> To: Hermes Flying <flyinghermes@yahoo.com>=20
> Sent: Wednesday, April 4, 2012 5:14 PM
> Subject: Re: Discrepancy between Tomcat's connection pool and tomcat's =
report on memory leaks
>  =20
> ----- Original Message -----
>>
>>
>> What I do is get the dataSource inside a ServletContextListener and
>> save it in servlet context (as part of a DAO Factory):
>>
>> public void contextInitialized(ServletContextEvent sce) {
>>
>> ServletContext context =3D sce.getServletContext();
>> DataSource dataSource =3D null;
>> try {
>> dataSource =3D (DataSource) new
>> InitialContext().lookup("java:/comp/env/jdbc/GenericDataSource");
>> context.setAttribute("daogenericfactory",
>> DAOGenericFactory.getInstance(dataSource));
>>
>> } catch (NamingException e) {
>> e.printStackTrace();
>> }
>>
>> }
>>
>>
>> The DAOGenericFactory just returns specific DAO objects passing in
>> their constructor the data source.
>> Each DAO instance has an member variable of DataSource and for action
>> to the database I do in order to get a connection:
>>
>> public Connection getConnection() throws Exception{
>> return dataSource.getConnection();
>> }
>>
>>
>> So I use the Connection this way and I always close the connections
>> in order to be returned back to the pool.
>> The only thing perhaps to mention is that I create new DAO objects
>> passing this data source (I don't reuse instances of DAO).
>> So I don't have a pool of my own. I just use DAO pattern .
>> This is happening in my web application GeneralApplication
>> Is this information adequate/clear?
>=20
> Definitely clear.  It just doesn't seem to match up with the output fro=
m the log files.  You're seeing
>=20
>     SEVERE: The web application [/GeneralApplication] appears to have
>     started a thread named [H2 Log Writer GENERICAPPLICATION] but has
>     failed to stop it. This is very likely to create a memory leak.
>=20
> Which is indicating that the application deployed to "/GeneralApplicati=
on" is creating a thread named "H2 Log Writer GENERICAPPLICATION" and nev=
er stopping it.  I do not believe that this would be associated with the =
pool created by Tomcat as that would be created as a global resource avai=
lable to all applications and not specific to "/GeneralApplication".
>=20
> I can't really say a whole lot more about what is going on, just that t=
his strikes me as odd.  If it were my app, I'd dig into this more and see=
 what is creating that thread.  Possibly with a profiler or thread dumps.=

>=20
>=20
>> Also how did you test it?=20
>=20
> I took a stock Tomcat 7 instance, added the <Resource/> tag you specifi=
ed to server.xml and added the <ResourceLink/> tag you specified to conte=
xt.xml.  I then deployed a test app that I have, it's a simple Grails app=
 that I routinely use to test database issues.  It just uses the JNDI con=
nection specified to do some basic database crud.
>=20
>=20
>> Did you use H2?=20
>=20
> Yes.  h2-1.3.161.jar
>=20
>=20
>> Because I don't get these errors in catalina.out intermittently but al=
ways.
>=20
> No errors in any of my log files.  I tested stopping the Tomcat instanc=
e, restarting it and undeploying the application.
>=20
> Dan
>=20
>=20
>=20
>>
>> Thank you
>>
>>
>>
>>
>>
>>
>> From: Daniel Mikusa <dmikusa@vmware.com>
>> To: Hermes Flying <flyinghermes@yahoo.com>
>> Sent: Wednesday, April 4, 2012 4:25 PM
>> Subject: Re: Discrepancy between Tomcat's connection pool and
>> tomcat's report on memory leaks
>>
>> ----- Original Message -----
>>>
>>>
>>> Hi Dan,
>>>
>>>
>>> The following entry is in server.xml
>>>
>>> <Resource name=3D"jdbc_GENERIS_RS" auth=3D"Container"
>>> type=3D"javax.sql.DataSource"
>>> driverClassName=3D"org.h2.Driver"
>>> url=3D"jdbc:h2:file:/opt/en/repos/tomcat/webapps/GeneralApplication/d=
b/internaldatabase;SCHEMA=3Dgenericschema"
>>> username=3D"root" password=3D"sa"
>>> maxActive=3D"20" maxIdle=3D"10" maxWait=3D"-1"
>>> />
>>>
>>>
>>> And the following entry is under $TOMCAT_HOME/conf/context.xml
>>>
>>> <ResourceLink name=3D"jdbc/GenericDataSource"
>>> global=3D"jdbc_GENERIS_RS"
>>> type=3D"javax.sql.DataSource"/>
>>>
>>>
>>>
>>> Do you need more details than these?
>>>
>>>
>>
>> Seems a little weird. The message is indicating that the threads
>> which have not stopped reside in the application
>> "[/GeneralApplication]". This would seem to imply that the
>> connection pool was created by the application. The configuration
>> that you've specified here would have the container creating the
>> connection pool, which shouldn't trigger messages like this.
>>
>> Are you sure your application is not creating a connection pool?
>>
>> As a side note, I tried the configuration you mentioned in a local
>> Tomcat instance and it worked fine, no errors.
>>
>> Dan
>>
>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>> From: Daniel Mikusa < dmikusa@vmware.com >
>>> To: Tomcat Users List < users@tomcat.apache.org >
>>> Sent: Wednesday, April 4, 2012 3:35 PM
>>> Subject: Re: Discrepancy between Tomcat's connection pool and
>>> tomcat's report on memory leaks
>>>
>>>
>>>
>>> ----- Original Message -----
>>>> Hi,
>>>>
>>>> I am using Tomcat 7.0.25 in a Linux machine
>>>>
>>>> I am using Tomcat's connection pool
>>>> (org.apache.tomcat.dbcp.dbcp.BasicDataSource). As database I am
>>>> using H2 as a file database.
>>>
>>> Where are you defining the connection pool? Can you include your
>>> configuration?
>>>
>>> Dan
>>>
>>>
>>>> All is ok, but I have the following problem.
>>>> On shutdown of Tomcat I see in catalina.out:
>>>>
>>>>
>>>> SEVERE: The web application [/GeneralApplication] appears to have
>>>> started a thread named [H2 Log Writer GENERICAPPLICATION] but has
>>>> failed to stop it. This is very likely to create a memory leak.
>>>> Apr 4, 2012 2:32:54 PM
>>>> org.apache.catalina.loader.WebappClassLoader
>>>> clearReferencesThreads
>>>> SEVERE: The web application [/GeneralApplication] appears to have
>>>> started a thread named [H2 File Lock Watchdog
>>>> /opt/en/repos/tomcat/webapps/GeneralApplication/db/internaldatabase.=
lock.db]
>>>> but has failed to stop it. This is very likely to create a memory
>>>> leak.
>>>>
>>>> Why do I get these messages?
>>>> As I understand these messages, H2 is still running on shutdown
>>>> and
>>>> the documentation they have says that the database will shutdown
>>>> once the last connection is closed (and the connections are
>>>> handled
>>>> by the pool i.e. Tomcat)
>>>>
>>>> Additionally the input from H2 dev is that these messages are a
>>>> Tomcat problem. Tomcat should have first disposed of the
>>>> connection
>>>> pool and then log the running threads.Their explanation seem
>>>> correct
>>>> to me.
>>>>
>>>> Is this a known issue? Why do I see these errors in catalina?
>>>> Should
>>>> I somehow dispose off the connection pool myself?
>>>>
>>>> Thank you for your time
>>>> Best Regards,
>>>> FH
>>>>
>>>
>>> ---------------------------------------------------------------------=

>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>
>>>
>>>
>>>
>>
>>
>>


--=20

[key:62590808]


--------------enigB597771273F2E707518DC88C
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.18 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iQIcBAEBCgAGBQJPfcRGAAoJEGoM2OGpOvr9PrQP/2BeJ/Hgp2gl1FoLHv/hS7Su
5V6PUq7FcLP547EYFESvvjEA7UQGfcl/yfgeUhc976dhWWrSSbFGgAn6ceiMgcbn
lqA4W+HY8BCea+aqx8Md5iVIcLP138o+ARX85Bm2h5yyaAI88Ut/Eho90XKKvzvd
gBl/yKo3Y5SS1wPC1RNZ4U5zmk0aHlULuWJtS51ji/kaW+F4aLrEYdj+hUD0p9CE
RDsm6wiDtP8zrE/f7Lxgg41bE8vBvLiG/DfuKeIDc1wep2+hwAVScd+gxAt1NqDq
jFmwDv8jbhi/RuuadS9GdVSrMctthwQAEyPD8xKJprSpuX277Q0dJtBTSktRzZ/c
NP9C7zdMKl2yfsUIJRyNRGN5M6ZZ0hZLInpmYzVzfVDxdVP97t7WCuTlhSAIt7lt
eKohZRl6m6RyMnCnJ6bn+TzjPP4pU29f8yCR1E8Xa7bjWTeXYX70nkQz5AR/jVw0
JC1ILJlLBeP5h2Yvi/Tzge+gaznXmV5iy+Syb2Kv+AmxVzMHwvzqF1/vh05LoH3D
fHLX2/ksETeuQl1vkjqXWgu0vJoHq4FLZTUVBA+YHZEybNsDGGk1B2moUW3xmy4n
zr9rYKmYH+i3K+6qrOPpNSKhTR5ASzzyr8mE6jQ0CPmjxfuHF4LSsBtUtY4HAT6a
q1fXahTKnI509Fi07QBW
=sZET
-----END PGP SIGNATURE-----

--------------enigB597771273F2E707518DC88C--

From users-return-233389-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 16:18:35 2012
Return-Path: <users-return-233389-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0F74C9094
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 16:18:34 +0000 (UTC)
Received: (qmail 23036 invoked by uid 500); 5 Apr 2012 16:18:31 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 22976 invoked by uid 500); 5 Apr 2012 16:18:31 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 22967 invoked by uid 99); 5 Apr 2012 16:18:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 16:18:31 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of knst.kolinko@gmail.com designates 209.85.161.173 as permitted sender)
Received: from [209.85.161.173] (HELO mail-gx0-f173.google.com) (209.85.161.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 16:18:25 +0000
Received: by ggnp2 with SMTP id p2so993392ggn.18
        for <users@tomcat.apache.org>; Thu, 05 Apr 2012 09:18:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=+l7jCEk1zC4zAUzngXUjsKa5A4izaQl/seqrPK2oLDI=;
        b=qY6AXw8zeJPqu+27wKdxZ5JFnj/UgSNicZ7vO8tNFM54b0tNd4C81bT/Lmg689F7JP
         wlZvrXW0CQVV4J9CEdu3D9GxYIxwiBCOxHNWwvfNav0/ssp4KO/MyIVD3TRspwFWuMaa
         IAawvHOV4+8tXJAU/siKZf1upb/SXEbyMuRB4RbWCSHvPqDFL0Zw+QCTjdLZN7cbTz5I
         T9HqCDcfcVfTyVc7pIpo2X+WflKEVgolEzg8rB0WBpQAOuyNnz8FTXzFukNVOKtUqWHN
         1NQZAcY3hq7VCgYa5j+wH+9zCIoSoN27sPnyeV0adUEt4AWolfvOY5/AEBC+0ctdKDn7
         0t/g==
MIME-Version: 1.0
Received: by 10.236.109.198 with SMTP id s46mr2797292yhg.43.1333642684588;
 Thu, 05 Apr 2012 09:18:04 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Thu, 5 Apr 2012 09:18:04 -0700 (PDT)
In-Reply-To: <4F7DC1A3.7050208@christopherschultz.net>
References: <217DDBC2BB1E394CA9E7446337CBDEF20102DEDB4F4A@il-ex01.ad.checkpoint.com>
	<4F7C81BB.1040804@apache.org>
	<217DDBC2BB1E394CA9E7446337CBDEF20102DEDB4FA0@il-ex01.ad.checkpoint.com>
	<CABzHfV=hqDq_UmjVpO0moj7jSGRxp2BXgEFzTp7noS+iJaOVzw@mail.gmail.com>
	<4F7DC1A3.7050208@christopherschultz.net>
Date: Thu, 5 Apr 2012 20:18:04 +0400
Message-ID: <CABzHfVkuvzKUAedSsD3KrfimDG5LCTzWuQFRq1EngGKcgMV6bw@mail.gmail.com>
Subject: Re: Bug in Tomcat AJP Connector?
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

2012/4/5 Christopher Schultz <chris@christopherschultz.net>:
>
> On 4/5/12 11:57 AM, Konstantin Kolinko wrote:
>> 1. Tomcat does not start JVM =A0thus it cannot restart it.
>>
>> You need some external tool or script or admin to perform
>> monitoring and (re)starts.
>
> Asking Tomcat to restart itself after OOME would be like expecting you
> to defibrillate yourself. It works in theory, but not in practice.
>

Yes.  It reminds me of that Bond movie

http://www.youtube.com/watch?v=3DJhm5up5NQwk

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233390-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 16:25:49 2012
Return-Path: <users-return-233390-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B5DB69580
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 16:25:49 +0000 (UTC)
Received: (qmail 48275 invoked by uid 500); 5 Apr 2012 16:25:46 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 48215 invoked by uid 500); 5 Apr 2012 16:25:46 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 48205 invoked by uid 99); 5 Apr 2012 16:25:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 16:25:46 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pid@pidster.com designates 74.125.82.41 as permitted sender)
Received: from [74.125.82.41] (HELO mail-wg0-f41.google.com) (74.125.82.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 16:25:38 +0000
Received: by wgbds1 with SMTP id ds1so1463722wgb.0
        for <users@tomcat.apache.org>; Thu, 05 Apr 2012 09:25:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type;
        bh=DvnXhx4cd5rAr2pUWDnoC0zluMR4zv4wdCUzNKDAv0Y=;
        b=d+y6TwfSdEvq3NlzSyH7hj+Dnc/M2ArXb+V1EBBkZeAMEVEMymFTOGcfFKOfvr31AD
         sPpd+zN1ky2gCfAlZ3n6IMWM/JzGdhsVAHOfasPCBnn+6xYtUCMo31BD9sHloNJufOth
         1WdJU5/+hyQzAhjhJa0t9ocP3wC/xoqnn/lvo=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type:x-gm-message-state;
        bh=DvnXhx4cd5rAr2pUWDnoC0zluMR4zv4wdCUzNKDAv0Y=;
        b=pSVDcM+SEDl0p+oZz0Q8289kSjCizDXYO3Mc15jvDOu5Wo+CkeQvO6DPSLnb2w2Wfj
         imsG7ama6SUrsI5ShQg1E+uphccnTqo/mmzMskyDcCgjAWRoejFsOq6BFlkri8Afn0Mm
         MrBUq341eVNKxRbijSlzFEo2Uj4nPx93wuZrZuwSmF0BIrUDo34LZCXbrvly0nKeYH7H
         onCA9ASFwP9rjWhylwJG/IpBJXmDJa3wBSsGo59kkhOWszu2aI7kZKeRALeXGXfpKhyG
         Q7hqSfTs0NSz5ajoVixqJanHwB3D77t1K705njNNraMfKrhhIpvfxbC1ujaRF6nXp2dc
         E1PQ==
Received: by 10.216.136.157 with SMTP id w29mr2126646wei.23.1333643117761;
        Thu, 05 Apr 2012 09:25:17 -0700 (PDT)
Received: from Asura.local ([81.134.122.147])
        by mx.google.com with ESMTPS id gd4sm18865238wib.6.2012.04.05.09.25.15
        (version=SSLv3 cipher=OTHER);
        Thu, 05 Apr 2012 09:25:16 -0700 (PDT)
Message-ID: <4F7DC767.3040108@pidster.com>
Date: Thu, 05 Apr 2012 17:25:11 +0100
From: Pid <pid@pidster.com>
Organization: Pidster Inc
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: SEVERE: Unable to start cluster.
References: <zarafa.4f7c651f.1095.7ca7df39672deef6@zarafix.ordix.de> <CABKrPsNQN_2KjH_PLfE49aoXjqgc451yFZFs-a0e0g9S3hMLpw@mail.gmail.com> <1333572948.35940.YahooMailNeo@web125504.mail.ne1.yahoo.com> <CABKrPsN0KV_Wox_0JuzMqhLfzZ9r7Jsg5-5OuWJbeFHfkxNRNQ@mail.gmail.com>
In-Reply-To: <CABKrPsN0KV_Wox_0JuzMqhLfzZ9r7Jsg5-5OuWJbeFHfkxNRNQ@mail.gmail.com>
X-Enigmail-Version: 1.4
OpenPGP: id=62590808
Content-Type: multipart/signed; micalg=pgp-sha512;
 protocol="application/pgp-signature";
 boundary="------------enig320C22CF5F8F87737FBB4627"
X-Gm-Message-State: ALoCoQncKA10zMUsFV4fUnqtc+2E9kvWRoZKJlruw/21nQHspMWejJ2g2900ygSVQfACLAgn8gmY

--------------enig320C22CF5F8F87737FBB4627
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

On 05/04/2012 15:13, Dhaval Jaiswal wrote:
> I have tested the below cluster manager; as per the instruction i have
> changed. However, when we try to deploy the apps on tomcat it was
> throwing error that
>=20
> WARNING: Unable to send map start message.
> Apr 5, 2012 1:37:12 PM org.apache.catalina.ha.session.BackupManager sta=
rt
> SEVERE: Unable to start BackupManager
> java.lang.RuntimeException: Unable to start replicated map.
>        at
> org.apache.catalina.tribes.tipis.AbstractReplicatedMap.init(AbstractRep=
licatedMap.java:230)
>=20
> Failed to start BackupManager:  java.lang.IllegalArgumentException:
> Listener already
> exists:{}[org.apache.catalina.tribes.tipis.LazyReplicatedMap]
>=20
>=20
>=20
> i am using below server.xml for all the 10 tomcats. Do i have to change=

> it for every tomcat. How would i fix it.
>=20
>=20
>=20
> <Cluster className=3D"org.apache.catalina.ha.tcp.SimpleTcpCluster"
> channelSendOptions=3D"6">
>         <Manager
> className=3D"org.apache.catalina.ha.session.BackupManager"
> expireSessionsOnShutdown=3D"false"
>                    notifyListenersOnReplication=3D"true" mapSendOptions=
=3D"6"/>
>=20
>             <Channel
> className=3D"org.apache.catalina.tribes.group.GroupChannel">
>              <Membership
> className=3D"org.apache.catalina.tribes.membership.McastService"
>                         address=3D"228.0.0.4"
>                         port=3D"45563"
>                         frequency=3D"500"
>                         dropTime=3D"30000"/>
>              <Receiver
> className=3D"org.apache.catalina.tribes.transport.nio.NioReceiver"
>                       address=3D"auto"
>                       port=3D"4000"
>                       selectorTimeout=3D"5000"
>                       timeout=3D"60000"
>                       maxThreads=3D"6"/>
>=20
>              <Sender
> className=3D"org.apache.catalina.tribes.transport.ReplicationTransmitte=
r">
>                   <Transport
> className=3D"org.apache.catalina.tribes.transport.nio.PooledParallelSen=
der" timeout=3D"60000"
> keepAliveCount=3D"0"/>
>              </Sender>
>              <Interceptor
> className=3D"org.apache.catalina.tribes.group.interceptors.TcpFailureDe=
tector"/>
>              <Interceptor
> className=3D"org.apache.catalina.tribes.group.interceptors.MessageDispa=
tch15Interceptor"/>
>             <!--  <Interceptor
> className=3D"org.apache.catalina.tribes.group.interceptors.ThroughputIn=
terceptor"/>
> -->
>            </Channel>
>          <Valve className=3D"org.apache.catalina.ha.tcp.ReplicationValv=
e"
>                =20
> filter=3D".*\.gif|.*\.js|.*\.jpeg|.*\.jpg|.*\.png|.*\.htm|.*\.html|.*\.=
css|.*\.txt"/>
>          <Valve
> className=3D"org.apache.catalina.ha.session.JvmRouteBinderValve"/>
>        <ClusterListener
> className=3D"org.apache.catalina.ha.session.ClusterSessionListener"/>
>        <ClusterListener
> className=3D"org.apache.catalina.ha.session.JvmRouteSessionIDBinderList=
ener"/>
>      </Cluster>


Wow.  That's pretty neat, I've never seen Tomcat start up with just the
cluster definition.

How about you:

1) remove all comments
2) remove all passwords
3) post the whole server.xml inline in your next reply


p


--=20

[key:62590808]


--------------enig320C22CF5F8F87737FBB4627
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.18 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iQIcBAEBCgAGBQJPfcdrAAoJEGoM2OGpOvr9T1kP/izgeZFhBWHNOfGe5EArCEM8
Eiz0Zlw4aLP09SmMuGuUh1pBQ7eCszfsENPUMiP38KnbiocjL3lzdUznh4kCoImR
NkFMeuFxXf84i69MEc0hcw6d0csNl2EM30cae3u0GtSzCGQ3DBF98Vpgy2yiUebo
1QQ5oLoqQ+VYpxvVhDcEtF+gLooc9FfmQEUXAh646BRhtBO5s60SOFo9uCXfUcEg
ojone6jkxYCVk7ZpvMySCs8hnIrghskHs+/rnfvml7AI/fl2CfBDuOz5sDIBwsUp
NF7sb6E5caaU8Uywna46JdjaZBNzEBdYua2hOyRmCz01k6IgMVknddt3cDTx2nfQ
0cCLgsGksS8o8UNoM8IulGKJqXXysm1T/wgjJRd3qZYNrMXzYJBlWoZsB3iOeGz9
6MDOZb1arA5mmK+CYhdzPv/KYcA++K2sg92dPKC8yiNLVpMdtBdpSUfDUOPOi9eP
CwK3rq3PJ5VEfkcr4DY+8clgzxGurMQruvCp9xwfkFylSquBptqY8xqwQ/RV1mA3
zHsOYCFb3DtG51dd1aW19QQBlNr9bjLcFp5U4eHtJgz+aE3BM1zir5T4AysXzh7T
8AOqGrii9UgbqDf48msNHgGBpAxYyeapeExXDpN81xBVQRl5MnDfxzEiM0CjJ5hM
1S2Af1FBCxR6ac7w8Smw
=R3xc
-----END PGP SIGNATURE-----

--------------enig320C22CF5F8F87737FBB4627--

From users-return-233391-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 17:28:42 2012
Return-Path: <users-return-233391-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 02A499967
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 17:28:41 +0000 (UTC)
Received: (qmail 38477 invoked by uid 500); 5 Apr 2012 17:28:37 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 38377 invoked by uid 500); 5 Apr 2012 17:28:37 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 38317 invoked by uid 99); 5 Apr 2012 17:28:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 17:28:37 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (nike.apache.org: transitioning domain of dhaval.jaiswal@via.com does not designate 209.85.161.173 as permitted sender)
Received: from [209.85.161.173] (HELO mail-gx0-f173.google.com) (209.85.161.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 17:28:30 +0000
Received: by ggnp2 with SMTP id p2so1073214ggn.18
        for <users@tomcat.apache.org>; Thu, 05 Apr 2012 10:28:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=via.com; s=google;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=r7/22QOnE+Ubaf93FtnvPd583k3717k4c/qzVDmtxJ8=;
        b=BQFAHq2NP1tOrAF+oRzV9OuVfbR8R3NbCJLVXVbQtcuH8JFGgvU6hX1U+UTxW10s1L
         t12P0vj39sPkbAwERlCCIL90G7rNWHllyK+6RXgTbgoswzpk2PFHcmLoDb5ZyleAKd+S
         GeD+EnLGrNt5OLD/eoGivpEi4acDG2NPMxj20=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:x-gm-message-state;
        bh=r7/22QOnE+Ubaf93FtnvPd583k3717k4c/qzVDmtxJ8=;
        b=ebn8+dDnWglRh5rnReM4fKkQlVEl5BkWR4hYVfA5yT6Yl7txlhVaZxzgudU8wrSMSG
         pol5eStC80MlWfhmuV7/BjeI5KwJhl7qj+IgQ1OxnIBMZLHlc3ZT3GbAy4DQWxddAkIC
         u2oELsvEJrP+4MJqD4BjLNq1PRzfBGJAExZsAdkRjtXMszlcltF1cGkTQxgHssIcAFjv
         P8auFW9wrc7O+3YCGsn1K4eIT22hlfIE/2/WBMCulGH7KvSecr+e7ju18+cI9ucZwf6H
         UiLYIT9Xa1njoiijVQcKne0qu2e2Pix5t7Nb+D/a60mCr6uSo3NPd5s4KhRgWtlG9FzV
         fIcw==
MIME-Version: 1.0
Received: by 10.60.22.70 with SMTP id b6mr5119346oef.5.1333646889031; Thu, 05
 Apr 2012 10:28:09 -0700 (PDT)
Received: by 10.182.209.34 with HTTP; Thu, 5 Apr 2012 10:28:08 -0700 (PDT)
In-Reply-To: <4F7DC767.3040108@pidster.com>
References: <zarafa.4f7c651f.1095.7ca7df39672deef6@zarafix.ordix.de>
	<CABKrPsNQN_2KjH_PLfE49aoXjqgc451yFZFs-a0e0g9S3hMLpw@mail.gmail.com>
	<1333572948.35940.YahooMailNeo@web125504.mail.ne1.yahoo.com>
	<CABKrPsN0KV_Wox_0JuzMqhLfzZ9r7Jsg5-5OuWJbeFHfkxNRNQ@mail.gmail.com>
	<4F7DC767.3040108@pidster.com>
Date: Thu, 5 Apr 2012 22:58:08 +0530
Message-ID: <CABKrPsMKvkZphpL+XRB=Y0B54_AM7+nTYUW5Uq3QiXUSSLBJaQ@mail.gmail.com>
Subject: Re: SEVERE: Unable to start cluster.
From: Dhaval Jaiswal <dhaval.jaiswal@via.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/mixed; boundary=e89a8fb20616139bb204bcf1ddab
X-Gm-Message-State: ALoCoQmMH035hXIZ0SZRzLFy0vJKeavaSLqOtAK39R3l577PeakCwRD7C+mJc48hxepzy95uMEJS

--e89a8fb20616139bb204bcf1ddab
Content-Type: multipart/related; boundary=e89a8fb20616139bb104bcf1ddaa

--e89a8fb20616139bb104bcf1ddaa
Content-Type: multipart/alternative; boundary=e89a8fb20616139bae04bcf1dda9

--e89a8fb20616139bae04bcf1dda9
Content-Type: text/plain; charset=ISO-8859-1

pfa server.xml

The same i am using for all the 10 tomcats.



On Thu, Apr 5, 2012 at 9:55 PM, Pid <pid@pidster.com> wrote:

> On 05/04/2012 15:13, Dhaval Jaiswal wrote:
> > I have tested the below cluster manager; as per the instruction i have
> > changed. However, when we try to deploy the apps on tomcat it was
> > throwing error that
> >
> > WARNING: Unable to send map start message.
> > Apr 5, 2012 1:37:12 PM org.apache.catalina.ha.session.BackupManager start
> > SEVERE: Unable to start BackupManager
> > java.lang.RuntimeException: Unable to start replicated map.
> >        at
> >
> org.apache.catalina.tribes.tipis.AbstractReplicatedMap.init(AbstractReplicatedMap.java:230)
> >
> > Failed to start BackupManager:  java.lang.IllegalArgumentException:
> > Listener already
> > exists:{}[org.apache.catalina.tribes.tipis.LazyReplicatedMap]
> >
> >
> >
> > i am using below server.xml for all the 10 tomcats. Do i have to change
> > it for every tomcat. How would i fix it.
> >
> >
> >
> > <Cluster className="org.apache.catalina.ha.tcp.SimpleTcpCluster"
> > channelSendOptions="6">
> >         <Manager
> > className="org.apache.catalina.ha.session.BackupManager"
> > expireSessionsOnShutdown="false"
> >                    notifyListenersOnReplication="true"
> mapSendOptions="6"/>
> >
> >             <Channel
> > className="org.apache.catalina.tribes.group.GroupChannel">
> >              <Membership
> > className="org.apache.catalina.tribes.membership.McastService"
> >                         address="228.0.0.4"
> >                         port="45563"
> >                         frequency="500"
> >                         dropTime="30000"/>
> >              <Receiver
> > className="org.apache.catalina.tribes.transport.nio.NioReceiver"
> >                       address="auto"
> >                       port="4000"
> >                       selectorTimeout="5000"
> >                       timeout="60000"
> >                       maxThreads="6"/>
> >
> >              <Sender
> > className="org.apache.catalina.tribes.transport.ReplicationTransmitter">
> >                   <Transport
> >
> className="org.apache.catalina.tribes.transport.nio.PooledParallelSender"
> timeout="60000"
> > keepAliveCount="0"/>
> >              </Sender>
> >              <Interceptor
> >
> className="org.apache.catalina.tribes.group.interceptors.TcpFailureDetector"/>
> >              <Interceptor
> >
> className="org.apache.catalina.tribes.group.interceptors.MessageDispatch15Interceptor"/>
> >             <!--  <Interceptor
> >
> className="org.apache.catalina.tribes.group.interceptors.ThroughputInterceptor"/>
> > -->
> >            </Channel>
> >          <Valve className="org.apache.catalina.ha.tcp.ReplicationValve"
> >
> >
> filter=".*\.gif|.*\.js|.*\.jpeg|.*\.jpg|.*\.png|.*\.htm|.*\.html|.*\.css|.*\.txt"/>
> >          <Valve
> > className="org.apache.catalina.ha.session.JvmRouteBinderValve"/>
> >        <ClusterListener
> > className="org.apache.catalina.ha.session.ClusterSessionListener"/>
> >        <ClusterListener
> >
> className="org.apache.catalina.ha.session.JvmRouteSessionIDBinderListener"/>
> >      </Cluster>
>
>
> Wow.  That's pretty neat, I've never seen Tomcat start up with just the
> cluster definition.
>
> How about you:
>
> 1) remove all comments
> 2) remove all passwords
> 3) post the whole server.xml inline in your next reply
>
>
> p
>
>
> --
>
> [key:62590808]
>
>


-- 

[image: Inline image 2] <http://www.via.com/>

*Dhaval* | Database & System

*E:* dhaval.jaiswal@via.com <ramya@via.com>| *T:* 080 4043 3000 | *M:* +91
- 8095 397 843

[image: all-icon.jpg] <http://www.via.com/>

--e89a8fb20616139bae04bcf1dda9
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

pfa server.xml <br><br>The same i am using for all the 10 tomcats. <br><br>=
<br><br><div class=3D"gmail_quote">On Thu, Apr 5, 2012 at 9:55 PM, Pid <spa=
n dir=3D"ltr">&lt;<a href=3D"mailto:pid@pidster.com">pid@pidster.com</a>&gt=
;</span> wrote:<br>
<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex"><div><div></div><div class=3D"h5">On 05/04/2=
012 15:13, Dhaval Jaiswal wrote:<br>
&gt; I have tested the below cluster manager; as per the instruction i have=
<br>
&gt; changed. However, when we try to deploy the apps on tomcat it was<br>
&gt; throwing error that<br>
&gt;<br>
&gt; WARNING: Unable to send map start message.<br>
&gt; Apr 5, 2012 1:37:12 PM org.apache.catalina.ha.session.BackupManager st=
art<br>
&gt; SEVERE: Unable to start BackupManager<br>
&gt; java.lang.RuntimeException: Unable to start replicated map.<br>
&gt; =A0 =A0 =A0 =A0at<br>
&gt; org.apache.catalina.tribes.tipis.AbstractReplicatedMap.init(AbstractRe=
plicatedMap.java:230)<br>
&gt;<br>
&gt; Failed to start BackupManager: =A0java.lang.IllegalArgumentException:<=
br>
&gt; Listener already<br>
&gt; exists:{}[org.apache.catalina.tribes.tipis.LazyReplicatedMap]<br>
&gt;<br>
&gt;<br>
&gt;<br>
&gt; i am using below server.xml for all the 10 tomcats. Do i have to chang=
e<br>
&gt; it for every tomcat. How would i fix it.<br>
&gt;<br>
&gt;<br>
&gt;<br>
&gt; &lt;Cluster className=3D&quot;org.apache.catalina.ha.tcp.SimpleTcpClus=
ter&quot;<br>
&gt; channelSendOptions=3D&quot;6&quot;&gt;<br>
&gt; =A0 =A0 =A0 =A0 &lt;Manager<br>
&gt; className=3D&quot;org.apache.catalina.ha.session.BackupManager&quot;<b=
r>
&gt; expireSessionsOnShutdown=3D&quot;false&quot;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0notifyListenersOnReplication=3D=
&quot;true&quot; mapSendOptions=3D&quot;6&quot;/&gt;<br>
&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 &lt;Channel<br>
&gt; className=3D&quot;org.apache.catalina.tribes.group.GroupChannel&quot;&=
gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0&lt;Membership<br>
&gt; className=3D&quot;org.apache.catalina.tribes.membership.McastService&q=
uot;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 address=3D&quot;228.0.=
0.4&quot;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 port=3D&quot;45563&quo=
t;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 frequency=3D&quot;500&=
quot;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 dropTime=3D&quot;30000=
&quot;/&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0&lt;Receiver<br>
&gt; className=3D&quot;org.apache.catalina.tribes.transport.nio.NioReceiver=
&quot;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 address=3D&quot;auto&quot;=
<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 port=3D&quot;4000&quot;<br=
>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 selectorTimeout=3D&quot;50=
00&quot;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 timeout=3D&quot;60000&quot=
;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 maxThreads=3D&quot;6&quot;=
/&gt;<br>
&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0&lt;Sender<br>
&gt; className=3D&quot;org.apache.catalina.tribes.transport.ReplicationTran=
smitter&quot;&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;Transport<br>
&gt; className=3D&quot;org.apache.catalina.tribes.transport.nio.PooledParal=
lelSender&quot; timeout=3D&quot;60000&quot;<br>
&gt; keepAliveCount=3D&quot;0&quot;/&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0&lt;/Sender&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0&lt;Interceptor<br>
&gt; className=3D&quot;org.apache.catalina.tribes.group.interceptors.TcpFai=
lureDetector&quot;/&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0&lt;Interceptor<br>
&gt; className=3D&quot;org.apache.catalina.tribes.group.interceptors.Messag=
eDispatch15Interceptor&quot;/&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0 &lt;!-- =A0&lt;Interceptor<br>
&gt; className=3D&quot;org.apache.catalina.tribes.group.interceptors.Throug=
hputInterceptor&quot;/&gt;<br>
&gt; --&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 =A0&lt;/Channel&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0&lt;Valve className=3D&quot;org.apache.catalina.ha.=
tcp.ReplicationValve&quot;<br>
&gt;<br>
&gt; filter=3D&quot;.*\.gif|.*\.js|.*\.jpeg|.*\.jpg|.*\.png|.*\.htm|.*\.htm=
l|.*\.css|.*\.txt&quot;/&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0&lt;Valve<br>
&gt; className=3D&quot;org.apache.catalina.ha.session.JvmRouteBinderValve&q=
uot;/&gt;<br>
&gt; =A0 =A0 =A0 =A0&lt;ClusterListener<br>
&gt; className=3D&quot;org.apache.catalina.ha.session.ClusterSessionListene=
r&quot;/&gt;<br>
&gt; =A0 =A0 =A0 =A0&lt;ClusterListener<br>
&gt; className=3D&quot;org.apache.catalina.ha.session.JvmRouteSessionIDBind=
erListener&quot;/&gt;<br>
&gt; =A0 =A0 =A0&lt;/Cluster&gt;<br>
<br>
<br>
</div></div>Wow. =A0That&#39;s pretty neat, I&#39;ve never seen Tomcat star=
t up with just the<br>
cluster definition.<br>
<br>
How about you:<br>
<br>
1) remove all comments<br>
2) remove all passwords<br>
3) post the whole server.xml inline in your next reply<br>
<br>
<br>
p<br>
<font color=3D"#888888"><br>
<br>
--<br>
<br>
[key:62590808]<br>
<br>
</font></blockquote></div><br><br clear=3D"all"><br>-- <br><table style=3D"=
border-collapse:collapse" border=3D"0" cellpadding=3D"0" cellspacing=3D"0">=
<tbody><tr><td rowspan=3D"5" style=3D"width:127.8pt;padding:0in 5.4pt 0in 5=
.4pt" valign=3D"top" width=3D"170">
<p><a href=3D"http://www.via.com/" target=3D"_blank"><span style=3D"color:b=
lue;text-decoration:none"><img src=3D"cid:image001.png@01CD1254.166F7B10" a=
lt=3D"Inline image 2" border=3D"0" height=3D"77" width=3D"145"></span></a><=
/p></td><td style=3D"width:351.0pt;padding:0in 5.4pt 0in 5.4pt" valign=3D"t=
op" width=3D"468">
<p><b><span style=3D"font-size:12.0pt;color:red">Dhaval</span></b> <span st=
yle=3D"color:#595959">| Database &amp; System </span><span style=3D"font-si=
ze:12.0pt;font-family:&quot;Times New Roman&quot;,&quot;serif&quot;"></span=
></p>
</td></tr><tr><td style=3D"width:351.0pt;padding:0in 5.4pt 0in 5.4pt" valig=
n=3D"top" width=3D"468"><p><b>E:</b><span style=3D"color:#595959"> dhaval.j=
aiswal<a href=3D"mailto:ramya@via.com" target=3D"_blank"><span style=3D"col=
or:blue">@via.com</span></a>| </span><b>T:</b><span style=3D"color:#595959"=
> 080 4043 3000 | </span><b>M:</b><span style=3D"color:#595959"> +91 - 8095=
 397 843</span><span style=3D"font-size:12.0pt;font-family:&quot;Times New =
Roman&quot;,&quot;serif&quot;"></span></p>
</td></tr><tr><td style=3D"width:351.0pt;padding:0in 5.4pt 0in 5.4pt" valig=
n=3D"top" width=3D"468"><p><a href=3D"http://www.via.com/" target=3D"_blank=
"><span style=3D"color:blue;text-decoration:none"><img src=3D"cid:image002.=
jpg@01CD1254.166F7B10" alt=3D"all-icon.jpg" border=3D"0" height=3D"57" widt=
h=3D"374"></span></a></p>
</td></tr></tbody></table><br>

--e89a8fb20616139bae04bcf1dda9--
--e89a8fb20616139bb104bcf1ddaa
Content-Type: image/png; name="image001.png"
Content-Transfer-Encoding: base64
Content-ID: <image001.png@01CD1254.166F7B10>
X-Attachment-Id: 6501cb0f3fb9fb41_0.1

iVBORw0KGgoAAAANSUhEUgAAAJEAAABNCAYAAACmJIZ3AAAgAElEQVR4Ae2dCZRdVZnvv3PuufOt
IZWZEEhCBqYwBInMiSijtDQqaqOvedrdaIurn7YtLm2fCq2t7bJ76dMWe/DZ9FsqIi02oogYIJAw
hRBIIAkEEiAhIUklqeHO03m//751kkogQJIqlha1k7rDmfbe3/7vb977eiHFRssoBQ6BAv4h3Dt6
6ygFHAWCiA6Fr3zVyt//iQVhr9VintW9tCWaMYuFVWt4XBXqZbT8/lMAwdJbsORFF1nypv9rgTUt
DH3zrELTY1ZnMH2/NZae51mzqfOhxWIx0/f9lUajsdf5crlsmUzGXT7KifZHtRF3HHABEoFFgBBw
qtUqgAJgHH81AIkUuk/X6k8lnU67d73s5kS7j4x+GLkUADhiNjG/xXWSyaTrawQscSV/v9zIc+Bz
3CtsWjLRulcPGAXRyIXMy3sGQMJGaKHAEg+sUqrYI48ss6fXrbPNL77oQOIDsP2XcDc3uuqjH7Wu
sV3u0lEQ7Z9iI++MDHFxIgBUzBfsn7/7XfvpT39q69evd+IqCAIn5l6p4xKBUYnH4/ahD31oFEQR
Qd5c7+g+KNWNas1+fdttdv33vmeVSsXGjR3ruJATZwM6z7500bkAvahaq5nE4GCxN8qJ9qXWiP7e
cgkWikX7+c9/7hTrXC5n9XrdgUhd1+dXKs6dCCfT+76W2ogDkec1rdqoW66ZsGocBbIeWrLOsYxv
NWuYX29Y3LAygpjlvSomb8PGV1NWTnKe2bZ/I/eVSPsHdmxAae7v77c1Tz3lrDX134fDHH7EEXbi
iSdae0d7iysBFnEbWWMCTbPR4kSCoZTrLOCLyogDEbBpmaP4tapYEX6SIwmznqDGNPOsHf9XOWxY
o9a0RjJllvKt0vSsENaNb9aaqxF5Rtj7gE6kPvb09FgCsdSfz9sHPvAB+9znPmfZtpw5vUjd1rWD
C98Rhs6vJBMvO+Aj0iUjDkShF7Omx+xB9svRFogzAZoEGMrUY5bD8VaMNQ0GZclazErMsNAHQD6s
eo/uOJh8I+TzAI9tMugo0J2dnbZ161Ybiz507rnn2uQph73ufoorSaxFXHtEORvVqTLgyYMGIGFZ
uFG8ULdyoWrJHjO/v2aF3u1WKnVbpdZv1b5ey+/aDnh6ra1e4o6ILK+bnn9AF4qz0D9GPJvN2qmn
nup0okKhYLt27drTDy5zIBFQmnzRf96dLoQqUEcplziTQh6VEcWJHLeGCwV+YB5EqKIk1jo7zObN
sVLehxXHLEEYx4+X4FRx8ypZyySR/YUtVl6xBtEmQo/k0gJDW3ubXXrppXbffffZtu3bnJl/1MyZ
dsYZp1uA+e7H9uYtkTc7hh6p0IlKasR6rJloQa1ucR+dBxDlUQiTc2fZ1H/4HPpQFh0oa5y09kaf
lRF28Qaxn7hn/csW2/b/da2NJx7U3I+J6yg3El4QZ8LBwrcttE9+8pP2rW99y5YvX26f/exn7aLz
z7cZM2ZYrn1AuZbSDT28AeVaYRL5iOThfvs73mGdYzodRUYUJ1KPYESw2ybYoPMEGwteysYdeTR2
WcrynJezPhbmuEaxH+JBvKa7DrdcLxbIHk8+R0dmkZ9IJZVKOb0okUiYzHx5rOV8bErXQVzV8Qfx
oaVoc0xWXHRO9z740EMjF0R4PAAJLDmAEPE+q/sVjuDul0JpiDLNxGbcEjGIBZ1kkvkQKBDRZJ6N
5AIoVEK49NIlS+3rX/+67dy5czd3aevocGZ95CsSxxGg5GgUNxJX6uvrczpVG9wqKiOOE6nDFhKp
RqlOoGDHPKnLPsACO86i8C0MEhAF5RuFETXRain0JwCUlkrUonNEn5H17pRGc2b9DTfc4KwzcSJX
AIvElScaARYVR0vepVTLZyT6yWut2FtTk26gjCwQAYJ0Io7ZDuep+jamjBOxHyUbsUXc0eJ1iKO8
KNEIvSCk944ZoYC3Vw3n5MjGUDToRTzWy5YtcyARiCJLa/r06dbe1uYuc7pQxLkAj4AkDqWQh8RZ
DcBFZWSBCHx4mKGhOBH+orjEmpeUELMyoGn3ZLW10rPiXIOPURasxRoJi9d8rpOsG/lFnERJZcoJ
6u3ttdNOO80p1tMAUQzgOE40AKDd1BgAkriTADVu3Ljdp0YWiNQtQh7Kl2nAbXpiWGfZwDEeMSBl
bMKNTdEhdVy+RTHzKuKtNxknHLLH98HhEVsklgSGGiKpHd3mfe97n51x1pkH1N9Kqbz7+hEGIiLU
eKPj8Jem17BSqm6ZSp+FzzyBmMP0QrtuYpXFOBeGJZRG3xJehxU3bbBih2edYEhgG7FlgLvEg7jN
nTvXHnzwQac4ywrbt4jbDC6Rgh3F0hKpPabs0IEI6hNRcIqZGwi1gbah17qR0bFWUyVfpZZwvTs5
uKl7f5ZK3LoHFqpTA531Bo+0Hta6yNVVg7Ukaxj0WGAlANV8fLVt+/TfW7JUpd6ypaoxq2GihUEJ
Cy5juUoH+tN2G9fXYzXFg1xFe7ej9U2V7Dmppoe0Z3dTaMdAM9x760r66g7SDx2Ibtd9fG1dHx3c
u5Y951vHh+R1gFbjJ4x3+UCPPfaYs87uuftuu+SSS6xDjtmBEjkYo+96F4BUZLWJk0XXHDKICDkh
OniJwwGK+BLiCUuic9URJUJzSIWNoIozGAsI+eHLU0x0vdisWaKx/+pF4ADRhJOZVictRvDUw9Ue
YGYVApmc1MkzPWZVU4q0ZDWKcQnNJlGBI/nUiSgLiFj7S5ZZFzpPpa2MF7viLLVGgkbGslbaEbf+
cXXrxGINq9TxisDWkCIEnSe8BYAqYA3oQ7ZcM2K3iu06MVnD4muixcsajDGrksjVUH2nbZamvzg7
fb4nOF/HM6wYnsY2Dl2k/RfpWwp9LkmAuKJJyW1DVjQJqUu+orede679MV7r//7FL+zuRYvs2i9+
0S68+GLnM8pk0i5KH1luEVeKLDSBaOKkyZZItEC1/1F8HS0HIpbwSblolq1QzTOQpFwWMKdLrCqI
l81nUOoAIJ/Nmw93KHJtHGsgWUZu4DwWgejTy4pmeA0/TxIdBXpaicCpV085IPnlAjAJLYN+44c1
ngnx62nMT7hPkoSpHCIqmbEiA6VBqeJ4LAeh7aoQGytXrYziDSQtqBKExTaLhYg3PscagEoDvW/R
IGv1C+cC7jf66GMBittV0Qt20YbMmKkWH9dlwWFjLejqxGkp5xO8FvMvTqxJzw5KBcsT8Cxu2mS2
c5d1oOTHAYqfSTJRcHqWaA39TsTQzWBfSluJ+PC+TTro7wOcKN/Xbzf/7GdWIIIfxAKrMTl/+pMb
7TYS1aQjtWGhdY0Z40IbkSItIEWfpZD/HxyTiaFIjxUz6EmQn8M0DJJjLXnlRbC6Lisz22LlXmZb
hnMp81KIjnLT2jLt1tyxw/I/v93a4Qg1Z2C/fK4J3wyz1YnVyK9cqFUsedpJlpp/kjWKBWsPs4w3
XAgW0AAoyaANX0/Dcuues9KDi61RgguiXIdwpMTUaTb20gssLABqOEYmlkOUwrXQlZoAPJFh8F98
1uq33Q5aAJ5m6+Cir5hxsQITAPYSo0E9vbssnptg2XcstPxbjrPw+OPM7+I54yA8LM1DX5BwgzmS
MSAFFEDAEXMvbrfEC9usufYFKz30uPU9+rhl+ndgMiMe4GwhnG1MET8OE6gP0LbDuV9pkg1u3sF8
rmCe33LLLfYIZv4YovkxQhkpgKzKdjA+27dvt2clRfhTLlFk7suLLTNfjKCCdReVQ+JEkol15eFU
RdysJc48zXLnXWg7UWLTtT7SMJKcT6G8Vi1dYQ0blYcbn7PK6mes+dgKRjRqxp53EQ1VBuLCQQiO
ppRElm2z3PvfaR3vvZyznGTwRXC8Y9amWS/2T0+KP/iRhYvvccTAKUvEGeYyc4a1XXM14oaZDxia
tKmJyEoQta9pFvKs8uJFlv/tXdbehFvtAyJx27gTS4FtRRmv4yfJnbPQ0h96ryXPOMPSk6bgRnCt
cuJMFp8ksAgrkRb3ci3HQWai+RNnWm5e63xx/SarPLTUYj/+b8svgxaNmnXAvfKxGvw3BoBkHuhp
Q1laE0TjlkJkKdgqQCUZF2mdlRrORs4pSW23viPupcJxgUcOyTS6o+6NyiGBiHGCUwToNnWr95Ss
sniNxS+6DEmlsMJ4p1QyqZj5UiAYc64Pp060MafMttJjy/nycqGvbqrZ+QQsPU2wbydAOWyq5U46
kQFEBg6cBwYWDwAEeopzGIZ5q658ioV7efPGdVgWBZq8ECL0PDE5pqVbMCYSj+J0IbqbDqqutmTO
En3wxT2efFXjikRKHWsun6hYc+JhNub9l1vH+99j/rQjHGgqPCFVqTuiB3BggRDmiG5G0ht/qTp6
GcdUl46rculP/ozDrWPGZea/5Vizf/+J9d/4C+uvI15wNaThoIqkV5o8VzcOVRl4VKNJmIecIgFB
5n60/kxAkRh2uuwAJxKY1OzIkx3Tffwp/DEOBV3lkEAkjdBnhlcSwKlasuK9D1lm40bzj5zhFMa4
tEbYSsBU9QAMTmSUaoAx/xgr/yfIFsrV8H2KLBoXKGTQyzV0o2OPtmD6dCLvzGyqEghcEAwlNoC9
+gmciI+vstSjK6zi1a0E202i5zTgkiFR/T2XI1aoEr5J0wmJ8CQRifllNdiWjr+8NXCZKix8bIdN
uOpKi/3pB62cIQOQxwbqfxzwsXpC1qbuVmxOYj5oajAUb9LAAByBCv0shltBnFZpu2UGrDrrOMtd
c5Ul0ynb8cObLNaP/phLoweKH7meuvYPyYuAQXNy6DxXfeyjdsUVV7hwRl2ZD+IsnKPprjjri09y
PDogQWudrQ7kE42fOKF1Ia+HBiIGwGOwfAYk2yhbcfML5t+91Br/c7oVUEbHcL7EX4BykKT1SVoZ
+oii2bMsPXaS1XZtUbtdw/Wu4t7pbLIuqweFFD0qc8pcBq5TmHUXiMk3GaAmo5WQiOJ7eelj1vf0
WqdYs/CFAW5aT65uQZuEAnIdFuQhKrQ0nBY7EAZ4rWF4VkH3KmA56Z7BoHbVwWU9nJHJS99rwQcv
t3wG1i+9AJ2rNNCvQBkDXAxGdndGHE9Fir1whG6Pgs0H/oe0uxZHTBKGSQC20thplr3qChu3/iXL
33E3liWuCeoNJLYddVrPGqrXJDrb2xYudEq1e+YAXQ/k+aVSafflhwR1Ea4GQQoohsU0M7GWt/Jd
9xIV73UOP5gChSrgVvAEp4vIJ9w/eao1TjoBoiKJIbIGPaK+WD1j4gKi4g3NSeOtetSRTnTEa6ir
cIUAyygu0QQIdHG4c6t5S1ZaJo9MTwNVZg+2kxuIJABvAzZZKo5rEAGK3GSBh6sB+aJZVBcgnbVH
O9QUgZ1L4VeY/YD5+JmW+Ju/sLCtJe9CRI0i4WkAEMMfRUVkC+ABFnD0QN7rIAdDFUz60ILreVfW
pZqgAHGCY4EMEmS8FH0Pke1dfpHlsXjiu0oo2/tfA8YTDrq47vESQx90n/UktYkiEbX5xc22ZcsW
lxqyZfNm6yMs8kolWj2rc4fEiaAhXl70BbjBdgg8ZXPBSk+utOSaVdZ23NluQHI0VfnOodgiMzfD
6MTbJln/mWeZd/tt8gyiQymllRkOlypB1aziXwywj3IdnDHLiqedaEp/8gBAPVECDAAATiDFVf6X
5PJHrP7ocgvbUbLRg8Rh8hm81X1pniMhw0WcCoBPSGYjsoSncQxflo4GsI1Uo58YCPDi2Q0Uy3qs
amOxKHtQ6hMXL7TkuElciwUI4Jwa7SjH/fSnAXqE52Z+l9XWP2s1THgfXS2gTw2sH5s6wbwxHdAh
YWmqlmSo8Hw/BYjUDrky0C7rZBbmTzjOJm56wZqVMkAUZXYPNdcdapFa0TLVXUQe3UZFuUQPLFlq
d999t1vIKGtM4kzlCFaBnHnmmXbWgnNs+owZ7lh0zn3h5ZBApP6JE0ljTJdCK7UlLNadt533Lrdx
x5/tlFhRTJyliViTBeDTiXjat/TsI21HhsQoiFUkFUNtFsGSDGiJgQ40vjGU31lHWGdbV0tcBApT
MFoAyDEVnush9kpPrrMi+dJKRJNjT+LjgApdEOeo8fyUm6GoxCi1TbhXOHWKdSxcwOOkvrtGDnq0
dAwUb7AXe/QJq954q/XdeZdVX3oRh2fTukBufPI061lwrCUuPcdyZ52DK6IdvYjnwL08fELyb0lP
UknmMjb16FlWv2sRdBWwhrowFrRXpYnpjoZsjy57xL75jW/YvaTKChxKUFNMTZ9jgOnxxx+3X+CQ
PIWc7I//1SfsgvPO323yR61rtT76doDvak5d4oiGpVGAG6SaBn1Fqy5ZYfXCDvnlGGWNdKvhjuAi
oMqsKZY8/miccQHcR3oKlyEiksz0OoMpUCXGjbfYqcchHWC9fJfTr4UeKanMKO7xt2y08j0PE3eF
6ADBi5QR1fE6i1qH1sQzabC4HYCJYVYSyrXihElWPxYLCo4RhuJkg//wgcHdEqsft81f/IZVv3uD
dW3cYF1Jwiu5glXadyEOnrDyTVhfn/2alW69A78RwAO0MTzZMdoqjhuT7NSMxE+RmToZfRKdSZNz
yAvTVJOa8dByoeUA6DOf+Yz9btEip1jLdFcGo2p2VhgmvY5pjdnDDz9sn/n0p52TsilWOqh5hwQi
9VFKYsCghwxgIDEEAeKrN1jjoccYGF3AH4iQKPLFKUC3EyZTJlruDFYcAL4mnEVKsugW42QM85t5
ag24QGL+icxWRCLndB9yxjEEiREJgvDJtdZYucaSAJgnACRxo0E91D2vUTSGEo1pORWJzcQ0sAC7
xqAmDptIKKfFsJV2u/cfD8ZjXb3tl9ZY/pC1Y6XG2vCzQ+QmOlcvIClkEb+EW1LPPW99N/3GuUOY
55jy6G6qD7GHYHZkkg5YIyRUgju5SfUa7T7w03SSvkpcSYRde+21toL4mUAi60x0LuFE7MMxqvVo
O8h6LEqBBnTyZPfu6rWvffVrzknprOeBBhyaOOMhEh1yOKLSWhsyppbEzN281cL7lllw7gIuaJm/
UYcZBkewWBxP44nHYRURdsDxx/g78VdDPCnnpwrgmjMPt8zh0xxXYkyxhlCqAZwvjgQn8gvoIIsf
ML9vJwq1xCXHBVa9H2CJoawrFOIjYlKAvliEs6XbbcIRUxCT6EjueS+fcwJg9c4lNhavuoe3Oo8z
LoGXPuvjkKONXrUbS46+IJqrDIaOKb/Jpy7XXERKg7BIy8Gn4WASEg90m1MdYB9e83Lq178yYY5f
/frX7AjyiI3F097A2lR+0UnzTrbTzzjTjj56juNWW7duswceuN8W33svFinGDLriS1s2240//rHN
41pxM5VDBJGaBFGYjT4J8TWChxIzsf6iVZY/bukXnkczOwq6ACzVJo7EPxUhuTl9mgUzjrDEhjVW
Juale2XFxcoIEthoZt4xdAa/km7hT34TWUZ6GJiy2otbrLJ4mTPdGxooRI1Y1suHmotfpTA/nUgO
ceCUYEnZOroYFRSJCW654w4rs+R4ClahBnjvQqMwxcvrnsMxire5ifeXhsYBRqlWckZEP47MUh4P
15TJ1nHlu/CVYatJvaoQHcvh3+IRPhzJvatvlBTDEoOmLcHiDg3Nizg09SlksXTJEgKoLQ+0AqtX
/MkVdtVffozl1FPdcVWokMdl777MfvSjH9n3v3e9i7Fpd7Ql6E+7duy0iYdNdu06RBBBVhqmgWXe
WQ/KYBaCJGH/O9ZvsMSyJywBiDwILZMSWUYf6IjYPSCK04jknOlWX73KChlEGgFLyWIjbSM2scPS
J891IlFqlIbPiUPdrkkMvRtPP2fh+o1kCRAV574motGxWcnsAyjQ1YnlEqNbhhNlsLaUNRDHl5N4
aoOln9hgFVlvA0UWjuu30w0AHYsBy/Q5wWDInN+VqloFo2wM8jw9dqalT51r8UsXWHD2OSjr1Mb9
dUBHc51IVhDUFbhoE3HqYfHGCPPXeV6Lb0c1H+q7egp5EVErVqxwCrTacjqZjR+7+i9t2oD1pb5J
b1K0fsKECXb11VdbDxbnv1x/vcuG1BLsdU8/PVQgQleBDDGAQ+DD+U0ElArmdOoFBviBBy122SUu
Sq1QF8yCF3gNsknASGA2V0/AE32LlNnA2sl9SNLw7YjAxpRjbCyK98A4YR5DcFnnKE11zhsiLHHT
bWQQFLCOUparJq2vgTnlKmkRy1Hs9byAOaVlBHCJNrigB4A8zP0y3CCdjlkHroByLOPcCfIPJcry
dsdZGNlmBbzL1VQCRbrdcohe/7DDLJg2Bd/W4RY/4jBLKEcnR7gmlXETInC+MXBEOESO/gYvcpXI
6JDgr0k/pM1VJpnAOhxFlldtwJOvfOv5b32rA5Bb6TqI20ZgEsd661vn28033WTaDELg0ntUBqZA
9PVg3jWz9H+PGHGKqhRTVpVWnn7GEshYja3CWQpbyNXCfwgHZzoB+XvkFAt6u63G7FM+j4+ntm3e
XGu2Zd2MF69vkVMWGSKTe+NbtlnPqtWgiplLIlEFuZ4k7lTTIB0M7TVyiEKtZiiB+DpiLSB2Vybd
I6HQDWZvAb9RvbPLYsfOtsQxcyw9/1jrYHVtE0ehDzfxIXYIED30H5wdkhyu3WqO2uzekZQS2RJV
KQhFd/cu9FVFhw9wKrj7Xv2lVZlAVCwVW/EzOHhk9utdfwJPVCTSFCuLVsXqnESanhGVIQBR9Kh9
3nGtV594xuJEqH1AJODIGy3SujbSBnl4PTzXzdkzLbgb/SbHDIGrNQhx5M48CWLL86yFiK0BkZ6C
vOOFhK1FD1h9WzezAo8w58vSxei7EzX7NOU1v9IuyOcaWIH7NNkppIFo8wBQyrWBQUfMZefi77n4
Aou992ILj5zmgIChTn/Q77hdqo7Ir2YGAFIeccwv4nm0mP5rSZJAkxAhiLlpKskgecPKAEBVXwfW
1i5EVAMwrFq50nZs77ax48ftBpBAIitOAFIKyLKHl7mdRGTFiXt1sEYtKmIIw1MkHvL9FsdKs3y3
C76Klcucg7xOnGnQ/YlTLZw12+UkpRUwxbz1xk+w5olz5K1xJFbfRWql04rfBVhlPXfcY210TnEx
bUAgH0sDnULDeHDDAhxk+VFZDE0+CdKzZGomy6H18tjwoout/btfscanP2E7jzwKMCh0QZ3UKGC4
9vFZ3+u0Q7neDTgrWTLCkcuLEqdTxElukBpec7XdgZdjb0gZ4DByKB59zDEOJF1YZ8vwAX3n29+2
TRs3Ok4U6UN6l9i64T9usFt+foszGAQs3T/n6KN3N3n4OBGD7eGJDu9/2Gz1Ogvnj7OAKVnDFI/T
OAEDfRgKMxh0qNnVYZlyN4Rn/2ySvMIJ44CQczO62S2063K9e6ufsuCZZ/mgSDeg4YSGQ8/Vgwdo
xZWvszDQLU6JiEEMlxGNCYyxNrIeu2ExqUsWmve1z9Em/FbUleWcU+zRleLwyzobIEkvdPtB8Cw9
TCE1fZTDVStvw20vWH5b2Ro4LlOqjKxGngJH0vX8vSFFUCdXC0PgvHecZ0vuvc9NmiIm/w9/+ENb
u3atnXfBBW6jKxkxeQAkBVzhkG4S1bQnkXZZ0xKj9kGcaPhApIFBwc5vetaaOB6TbzkVZRX5O+DH
aTJTxe41o1PzjrXumROx5rC0iKtlzzkTcUJUCX+Rrndyis67tATuqdy6yNLEqcpsXJUlwl5jEKvs
hqZsAXErAe1AikgrcVNDlCV4jo/jsoEm38NflYzKwz71MWsAIBUBX3seCa8NuKZ0PYknLYQkKdHV
TbfNL/Za5bnNZmvWWnn9GutfuZo42lSb+O3rgI6CskIP9bxxCHKYlbdZ4YyFCxe6WNgzWFkSbSqL
Fy+2O++801lg4jaywhQC0V5G+q68I4kxpZAodSUqwwoixKnl4xUS0Fbb5B19ZuOJUMvdQqkyGkrN
SDZJaztmthVnT7D0/ezer1ydM09tMXqnjTJaAE7OAVGhjvVUfGCFeQV2/u8k3FIgn4fkNJ2X8FNM
7WDGpa5ErSSJbkX9ggApLDIMiHN1vet8K8AZxX0E/AY5HT7ik48trzZ1itskFdhlsvQtXWZlLNPM
rh6rbt5khW07LNi62dLbeixYcIFzliq6L0tM6TEH01bR76AKLFoiSkCaPmOGfelLX7IvfP7ztvGF
F9yqVnmlBRoVxdaUS52Da0mEyS0gK+0Tn/iEnU5AdnAZNhBJ8ynhKGxkc9bxm/vN/7OnrD7+dEgH
BfHWek4LJqGNwUgmUtY+53hiTbgEjp9j9QmdTmzUFYVFtAQ1pUXQ+SS22e23mD2/Hs6BsON4WbIM
DqT4nYK8wtCBFinFKVaDBKTw9hC2CAFUqoB6PGWSpS96G2K0JZs8OI/WrNVR7pso8/BVV5+36hEr
fedGiz/4qNV7N1kDACVImu5pTyDqYjaO69sINkujU8iDjHPLSblWxVhrbyiQqE7Kssp555/H4oak
/dM3v+m814qbCWRisxWBhnNVjtX4PGnyJPvzq/7CPvKRP7c4k21wGTYQqRL82HhwEUs7e6xyz1Lz
Tz0JHSCNDiOnHPoRokyMSc7zzpNPtv5J0xBtOOZS+J7AmrIBJSacrEEh98mB7sXT2sz3EU1hLhNH
U0K+AKuR0KuU3AMtul86gIKiUs6b/CUJxiZmTjPf6WYAlPZE3FATQbFClYCYWPdXv2OFXy+2sVyT
aSdkMwbXRDOFzwmXQDbB9jYN60M/7AKgWjrFOkknBh16xI3ewBKZ7w38RAGrVs4mxWP2rFl2L6Ls
N7/9rQOTxJYAJc/78ccfb6effrotWLjQ5p54gjumZH35ihzgRINhaz+0UXQ6A2BKHegWt99rXX/6
HqsfPh2PtgaboRAB+SyHYkAczZ8+wwIcjL7PEiAaFuNEDVZa13UMUGzN81Zeud4FemPMhhZshqAH
1K+4LlWRvIYPhUiw6k+dNJ10XgDDZwWI5RtpSU8AAA/zSURBVD6Q20EZijAuxF7ZSrffYcl7HzYv
A9CyxAMZAHHGBhZeG8DcVsFC7QgsT7Jc//gcDln4mpgnlWlNXWsCDEEfXvMRLbAqVUa5WPL7KB4m
UaXwxeV/8gG78J3vtH4S0wQO6Z8y8zPax4jlQ7KqVSIQDq5u2EAkwkvuCyEKS8QJT3ir1ljz8GlO
55A1I2JqMCpcnBozyRLnLzR/ztHOdyJppw0Z5FyUcy4jcj+4wtLPvujElp4/VEXkqTuFnHoY2SpZ
ilUCwakj2LSAlBBg4QAr0Es7a6VuqHZcDGuf5hJ+1QddqVgpYr6jV5H2WiMjcnOGPCvEWqa7aqX2
DrjsiS6sIqJLp9Jgqd43prTqEQcRJxFAdi9ORMfrZd/GdhRobcU3uOTJ+X7++edtMkBrBVyVeQD6
NfNdUNPN78G3DO1nAUVqGioqOdN5KxLtjrHIkSa0ahbGUHsEpBC5lb7sQsTHZCfiWi3RoMEVRPHS
TissfdgS/X1OoW2dH7pXkZjm8oLSzJcmM1Xrx6T7qLTmoT61BqP1yjdEguipBDOnISmcwKyVJSrd
IlOGA2FT+PPmW+aSC1lsoLQXHsPp6Bl66htSaI+2IZTyHAHoxRc22r//67/a35Ar9MSqVa1m0DCF
QMqFott1/7LLLrN//OY/2lOr16hLcCmeA52iou4MW9GaebF18hBJgyB19v7lFnuBNBFqlBUlb7QS
5ZFohC0QAYcx81HmJMZ8Kcw655x6fHhsjVUff5JBKO/WR4ay4W5LFR5YVC6PrBgCqiG5zgKI1MiA
vigk4yJbyn3imEtIe8spBJ6z1kfYLhOknVe6xhZsFbhZKl+3bpZSxf7ofBv/1x8zmzbdMrgo5GtS
Ml/L2TiUvXi1Z0FD+iUOlBowz1csf9SuueYa+/KXv2w/u/lmW79hg3uAUkMEFOUVrVu3zuVcf5u9
HT985ZV2+22/Qulmx0voE5VhBBFiTB45Gi6LpkrudPAS8bGlK60P8knTaBKMTXAuxUg1sGAI9jPz
RWSZ0dzqQKTApGe9ADBU6kdWZrxg+MqlpSfpPEDg36uWgdO6WoagZl8FH5FYfoVBrm94iaQ5CMoF
4qr6Jx+1VmNoRsbIoc6c/3aL/49LUUTJQNjYzcraPGvwus3v7bPUtImWvOZK67zuU8bWrIhtLDoW
G9TgrCHeeSXhqe69i9o9HIWaaHScwVc/Njy3wSWlLVq0yMULZc4rMV97GkQNkNjr7u5218vR+Dyu
gP/9hS/YShyQGteo7IFTdGSI3kWKQGEMxEKRXKMmn9N9u0jgWmTeFW9jsMbgJ0FUqG8MXhJFThmF
SoGVF5r1rwxk0sXF6j1byBxcRR43S6Exm7WBgwi9pxutRgtAiUaSNF3SVol9Vdnq0+Vk67S4L6tM
Q3QXtoVwoStPcgXTUG0tQ5QUHnDsXyw0Qh6FitXXPov4rbslzWnF0jQh1GYGA8w5YoconZM/8ymr
zzyZLEt0PurMELjNTZli3jEzLcWqYD/RaWUStpP0J0RRlwUop6V0VYFTnREoW70imCxXAjVIQA6Z
8aD2auCpR0Hl3/z6dhLOHnAmvkz+XrjOyidWuU2vnCLN5Vodu+WlLdZfyCMgmDAAadOmTfaTG2+0
E+fNs2h7mWEDEW3FI61BY9021lacz0G1aIVVj1l6zTPWPOFUCAQ/0oUMrFvzhdzQrJceJKVTVpBU
ksrKtXh+1yESyQBU1Bbq7wsgnkIBuABDnEoDjp2FZUduDwPSxHxPSxHGdAeKUkl4DhYIb02eW6Lu
jAwAFhXWuD9BFmX/U2ttDCGbyvy30BcNsUCPrsQ12gvSd8oTPucxEy34s/fzXFpQ7jet68JB0Ho2
x0J+V8xHhvlwMKWc+LRF/EAcjQa1lPoBcYlXhvTYknXCxTXmw1EUQL3n7nucg1F0VhrKH6P3XP6+
99P2lEtGEzeeMGmCffm6a23xPYvtV7/8pft5K3Gsu+66y6XXTjtqhmvesIFIT1fSlZyFcmg5cOSS
VpQn9/b7bMIJ85yZ22IRXKdrVXQhJcCTTfySEcCT/OAq68f728ihqDI/NYs5oZe9ih5RY9+hGglk
SYCRIPdboQn3aK3nBkBuwaLYCANYY0DlpwrCiqUhpNbrJ7CsiKJYsR2dZdtmK//iNuucO5uL2oUf
jTlcjq8O6njLEce+nKE8HyZjsVSb05ckFci4dUq6xywO4HLe9m7M0DarsxOIOKTTitjwQf4n+bw8
tXcseY3kJ2VITiswOq7te/Xy0L9IsX7yyScdWJTqcem73mV/95WvWLSqVWa8RFk2k7ULzr/AFpyz
gEnj2w/+7d+cqNcWfQrWRiCi28NXmhBFCpqWd4ltV6Cyny+ad/9KdIZdzGvOYVJLRAz+UzxNKU/k
bVkdZ54tfsjt4pFAnseIMSD99ltKaOnaVk8OTY9ne3Au5fZI75IYRPlijZmwihkOEOEtziOeZb2a
dpzVJg8+nKYJUpNh0Yp33GnF391J+AbuxsVaSCDZUwKAZbheDBM+JJbjAVr96HKc+FsMLibDQJmR
bCYC+LgXy2bbP3zfGqxM0bLyfszkJi6MBCm9bm9JOU6BZnzOcRY/9hTSayXM3GzZb18P9oSAo5xq
+YgSpHa8lYDqYACJOzkOBZgEKG30qaQ07SCi4y49BJBFZfhAxEBrxvpwFq1lV0iiSvpDBo257ZkN
1nz4UadXwNnd7HbjqzHmz6kJHBdWGiuftOKTq9mPyrdO/AUJx96i5r/8HUHEnknsxAEn28UglROt
TSDk0yhihrNCyZSKrXgXQ8+wAToWFZaoFIgy+yEgIAvIgfYBUn39envpX/6fVZbcQyCQBQFylNLG
OO1IsGGop4WUpLOi8jkQhHAzBY/1IzVcaTl2R6nfdott/+y1lv7Zbyy+YYMTHy5CxYP0gzZuhTCr
iAvcEZszx8b81cetOfeEluOSY8NVBAhZouI6URHAolwivUfORR0X6CJPtb5HRTQcngKhfbEM/rSx
QcgM12rAuJx33S9Z5c7F1nnWGYwkmsS+nIXvcXUAn1Idq6yGQh50YtngTVanxP73p3AGJPCkGEj4
gFUQGwHb0zTzPQCaI4gUv0HYBY7j421WPrjP3kbVEtHqMSl28BBHYUxJjQ1ItQ25p42wRfgA4vTq
ay33wcsseM/5Fk6bTqoHxgKUE/m5c/dnGI8DZnMHz9zabSVSSo29jzqfWY8DMrQdm9bYRCL8SdcX
AQhLD0U7ZLazuRu6ExPlTFJjFh1F4JpFCLRlqItyprQMWtxI2w9LwX73u9/tktKiuJrqFGBU9CMy
9y+931lqWocmcA0uwwcizXIcW0KI4lwlJmYWMHnY0kWmbfbOB1ik9/eMwp5ZEDXM7clIB4rI7uxi
kv0lDnhWD/dq93u5B/ZXPGSnB1hR58mNRsTgUd72zeutq7dA+m0RYLMqhWbVPQKMcKsKuk7fznWI
tLxLKRlbDqyf34MTR8lSv1J1u4jTNLdutL5/ut683y625MVnW4Kl3bHOMc5M94hue1xv+LrqJOI1
n95gtXsftF1E9Ovb+2w8Kz8Cko2qBJDLS++z0rVfhTqIU8CTFteDHt05lhnlaTUWUf84XJJrHhsW
AIluAsJJJ51kS4hDyuL63e9+Z9ddd519+CMf5nddx7q0D20/U+B3YrXh1a2/vNUtMZLSLe6ln7fS
8uqoDBuIWsOsae3ClcglKbgty0kaaMDiudIPbozasdc7AsUKDJwM3RRWdyrFmnoAmGePQNQM6dr7
LU0spir/FOjMyVLb+KLlb7jJKjsZXHxVDeQRcx8QaakwCw2VUEaeRxJFllx/9BqsM2JKTbhUCpGl
X3F0pjg8J8azwzU4PB9dRfgC3Ynt9ZrEw5JlJgzcrYEVViDlNCz2A+KydbKEqJwah56FGEW5xplk
7Ru3WeE/bmaxgdADeeA+MQaswudcIwuzJr+bndkRHAMg2v+E2S8RXuNEri1nb3/72x14lCckznIj
ZvuiuxbZjKOOsiMOnwoNas6cl7NReUVKCZGXW1xJSWlHTJ++u5ZhA5EEjjYkd0WcB5op7iQ+kkYh
KLNNnw8w9lfaUE7RVqwqlzaD7qHApljvr11E+LrfoqU+8C23P6RTfkhsbmNrvWqboCnR0BoU/f5H
U8qvtiLmnmYqCxBC62PDiLQUMwaxrtCF+sE/3KKuWpcOoj0AFVHb+qLFXgJ0fIt0nJgQh8MSvzA6
YJresjkWs7e18ydAoo4YBgchUBHE6WjyiStjuaafimCipOGQrpUDlqpqG7JCnRJTF5Huqz0albWo
FFkteyr05W0FS6sfJZ9aXmvtjJaG+2SZxIobyjWgTdD1S9RyY0Rl/6MYXTFE79F80vDos4a0pYC8
8rt8F241SOtKdxf9eN1Fl7bgRH0ohK4+d3frjKvbtUG+Ko4xuCq6Tp9a31qvreN6peha9wfpENOY
YCjbA3/6ruCklGpVM9BTfWoVnueqj55BbTzLVT9w3NXvPkf3DOG7KqI04IiTWUx53bXX2fz58902
xIqFKZShK6QvdWCJCWxKC9F7qVxyYPv83/6tnUyox20I4Z7W0gEHPo6+jXgKMFH0T8CVgXL8CXPt
n/lZ8//6r5vtVvYTeJblXTKElIjmo3TLchNYJk+ebBdceKH7rdizFy5wc0OcCnbqyrCJsxE/IH+g
HRRvdauEea+y0efMWTPtr4ngCyRyIG5WfJLtfmSlySkpUTdr9mybReJaFxtwKQdJJbLc9HkURKLC
m6k4kSZ+ROGzy2BEHMta05/bVJ6TSlrTXo7aHUWcKyoex3WzdpqNdksbBVFEnTfJuzIbnTOX/kbp
HAJUy3moFcAtvUjkiM7rc1QcoMDUkG1BHD149P0PhQI4WTAyIo901GrnwIXDyBgUmFrKfktv0vUb
8LKvZJWsRJi82zL1z2LFR7T2bJQTRZR8U7zL+YE+AzAGl0hcObUbZVrAUYmOa5e0qz/+cWtn5Y6K
xNg9JPZHINr7ae6S0Zc3KwUEGinU4lQRgEQLfa9VWrsGiFNVCZW4LYAGCDUKojcrYl6h3wKLRJuA
oveoyHutbfhK/LBPHo91FZEmIEVlVJxFlBh9d+CR3iNuJBBF3GjihIl2zoIF7vdhpRMpVCJvdlRG
QRRRYvTdgSciw2AQKVb2XX6aKs7KlsgF0DVubHTpID+R2Jei7i66ifqlGJVsQX2XNvYqca7dTxv9
8HtAAcYNcYQic1BtEXikWIsL6bM4jzZxGLwfkR7ccgm0qtjDiaSRaxkIgUklcClRyi3RxK/QApGQ
NFp+/ykAM8B5iMPnoJoq8ES6kUSb/gSmqERKd2TB6Tj57K0rGmtXW/n5LaSOKvOXrAVyeLQWK671
YGJIoxiK6Ph7/e4C/7Kg2H87c8o8xtItL3D5WC6nhTF9PUWwiHSiwde/0vHdIBp84ejnUQocCAVG
TfwDodbota9Igf8Pa/KtBxUxRegAAAAASUVORK5CYII=
--e89a8fb20616139bb104bcf1ddaa
Content-Type: image/jpeg; name="image002.jpg"
Content-Transfer-Encoding: base64
Content-ID: <image002.jpg@01CD1254.166F7B10>
X-Attachment-Id: 6501cb0f3fb9fb41_0.2

/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAA8AAD/7gAOQWRvYmUA
ZMAAAAAB/9sAhAAGBAQEBQQGBQUGCQYFBgkLCAYGCAsMCgoLCgoMEAwMDAwMDBAMDg8QDw4MExMU
FBMTHBsbGxwfHx8fHx8fHx8fAQcHBw0MDRgQEBgaFREVGh8fHx8fHx8fHx8fHx8fHx8fHx8fHx8f
Hx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx//wAARCAA5AXYDAREAAhEBAxEB/8QAfQABAAEFAQEA
AAAAAAAAAAAAAAIBAwQFBgcIAQEAAAAAAAAAAAAAAAAAAAAAEAABAwMCBAQEAgcFCQAAAAABEQID
ABIEIQUxMhMGQSJCM1FSIwdhFHGBkaHSVRaxwiSUFWKCQ1Nzs7Q2FxEBAAAAAAAAAAAAAAAAAAAA
AP/aAAwDAQACEQMRAD8A+qaBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQ
KBQKBQKBQKBQKBQKCxMzOL3GGaJjEZa18TnkODleSRIxQWaAJoddeFBB0e5+a3IgHu2rC8ovsr9U
LZ6/m8LaCQZuF4Jnh6d7SW9Jy2BiOavU5i/UFNBoh40EBFutgByYC+1gLhA8C8OV5TrcHM0aF0Oq
nhQVdHufmtyIB7tqwvKL7K/VC2ev5vC2gkGbheCZ4ene0lvSctgYjmr1OYv1BTQaIeNBARbrYAcm
AvtYC4QPAvDleU63BzNGhdDqp4UFXR7n5rciAe7asLyi+yv1Qtnr+bwtoJBm4XgmeHp3tJb0nLYG
I5q9TmL9QU0GiHjQQEW62AHJgL7WAuEDwLw5XlOtwczRoXQ6qeFBV0e5+a3IgHu2rC8ovsr9ULZ6
/m8LaCQZuF4Jnh6d7SW9Jy2BiOavU5i/UFNBoh40EBFutgByYC+1gLhA8C8OV5TrcHM0aF0OqnhQ
VdHufmtyIB7tqwvKL7K/VC2ev5vC2gkGbheCZ4ene0lvSctgYjmr1OYv1BTQaIeNBARbrYAcmAvt
YC4QPAvDleU63BzNGhdDqp4UFXR7n5rciAe7asLyi+yv1Qtnr+bwtoJBm4XgmeHp3tJb0nLYGI5q
9TmL9QU0GiHjQQEW62AHJgL7WAuEDwLw5XlOtwczRoXQ6qeFBV0e5+a3IgHu2rC8ovsr9ULZ6/m8
LaCQZuF4Jnh6d7SW9Jy2BiOavU5i/UFNBoh40EBFutgByYC+1gLhA8C8OV5TrcHM0aF0OqnhQVdH
ufmtyIB7tqwvKL7K/VC2ev5vC2gkGbheCZ4ene0lvSctgYjmr1OYv1BTQaIeNBARbrYAcmAvtYC4
QPAvDleU63BzNGhdDqp4UFXR7n5rciAe7asLyi+yv1Qtnr+bwtoJBm4XgmeHp3tJb0nLYGI5q9Tm
L9QU0GiHjQQEW62AHJgL7WAuEDwLw5XlOtwczRoXQ6qeFBV0e5+a3IgHu2rC8ovsr9ULZ6/m8LaC
QZuF4Jnh6d7SW9Jy2BiOavU5i/UFNBoh40EBFutgByYC+1gLhA8C8OV5TrcHM0aF0OqnhQVdHufm
tyIB7tqwvKL7K/VC2ev5vC2gkGbheCZ4ene0lvSctgYjmr1OYv1BTQaIeNBARbrYAcmAvtYC4QPA
vDleU63BzNGhdDqp4UFXR7n5rciAe7asLyi+yv1Qtnr+bwtoJBm4XgmeHp3tJb0nLYGI5q9TmL9Q
U0GiHjQQEW62AHJgL7WAuEDwLw5XlOtwczRoXQ6qeFBV0e5+a3IgHu2rC8ovsr9ULZ6/m8LaCQZu
F4Jnh6d7SW9Jy2BiOavU5i/UFNBoh40EBFutgByYC+1gLhA8C8OV5TrcHM0aF0OqnhQVdHufmtyI
B7tqwvKL7K/VC2ev5vC2gkGbheCZ4ene0lvSctgYjmr1OYv1BTQaIeNBARbrYAcmAvtYC4QPAvDl
eU63BzNGhdDqp4UFXR7n5rciAe7asLyi+yv1Qtnr+bwtoJBm4XgmeHp3tJb0nLYGI5q9TmL9QU0G
iHjQQEW62AHJgL7WAuEDwLw5XlOtwczRoXQ6qeFBdDMywgyxmTqK1wjcAIr1tIv1dZpcqLrb4UGm
y++Ngw+4RsWVK6HMcGkSPakSvCtbevE/oSg3GZn4WFEZszIjx4h65XBg0/EkUGp2rvbtzdt0dtu3
ZJyZ2MMjnNY7po0gHzkAeNBvaBQKBQKDn9w7vx4d4OzYMBzdwjYZcrzdOGCMBS6WRHeB4AGg5/ZP
um/MwcrcMrbj+RxJgzIlx33PijkJ6b3RuAJb4Eg/qoO7xcrHy8aLJxpBLBM0PikbqHNcFBFBdoFA
oNbvu6T7fjQOx4myz5ORFjRB7i1gdK5LnEAlBQYbMzuGXcJcFmVhx5ELGyPBxZ3tteoCP60bSdKD
IczuuNpd18GYgKG9GaJf97qy/wBlBf2DdDuuzYm4mPonJZeY1uQqh1QfCgz6BQKBQc5vHfWx7fIy
GPJx8icSiOeLrsjMbdVeVVU+FBf2HvDZ93ZExuRBHnyAk4TZmyPCE+IRdNaDeUCgUCgUCgEgBToB
xNBGOWORt0bw9vzNII/dQSoFAoFBgb9u8Wz7RlblKwyMxmXmMFC4qAAD+JNByOL95e2ntcMvHycW
VvoLA9f1gj94oO02zcIdwwYcyHRkzQ4NJaS1QqOtJC/HWgyaBQKBQazuTf8AF2HaJdyyWueyMhoj
bxc5xQBfCgwdj742PdNom3Lqflm4rbsuKXmjB4Hh5g7wI40Frtbv3bu4s/KwseCSGTHF46nqYqL+
H6DQdNQedfefbNoOyR7lKy3cmyNhx5GoC9pUua/4gAEig8p20Ddt3xMfdM98UEjmxOypSZLG8BzH
QeHwFB9D9vdtbPsOEMbboQwFDJMdZJD8Xu8f7KDaUCgUCg8Y7yztxb3TmMfmTMZDkGEfUe1kbZ4g
7HeACgteqmg6nt/tR2diS7zhbrNiZO8RuG6NMcUh6ikSsF4JZa9RpQQ2D7fMiwc+DA3KXFx8qSbE
zIjHFKJGQyPjGsgJb5V4UHY7Bs0Gy7TBtkD3SQ49wY+TVyPeXp+q5KDYUCgUHK/cbPft+yY2dG0P
fi5sErWO4EsJKFKDyzA7xycTuqXuAQ9R0r5XnGLyGjqghLk9K/Cg6d/3ozXMcBtcYJBAJlcR+y0U
Hb9hf+n7X/0f7xoN/QKBQKDi+wNt7cl7R2+STHxZJnNcZnvaxzi+8rcTqtBr/ufibJh7Li5GFFBj
5zcuLoSQhrJE1uS1DQeiUCgUCg5nv7fNx2fasTIwHiOWbNhgeXND/I8OLgh+NtBgbZ9ztsl3DJxN
1EOA2Fz2xz9dkjXWutQtHmaaDI3vuztHc9ryMCPuCLE/MNsdPGVcGnmAX4jSgwPtgdowcV+3Y28t
zp5iZvyYIPTtKFzSPmbatB3lAoFAoPLvuj35tkuDk9vYK5E73NGRkNP04yx4cWj5j5UPwoN32l3N
2t3ZGyHJwoRusDBfDkMZI5waEL43OGo/eKDebN3JgZ28bns2NH0nbUWMJCBrg4ea0Dha4JQbqgUC
gUHLfcHdM/B2uJmNtjNzhyXGPJilBLA1FCgfE0HF7Zn7u7bMuf8A0sxHa2xuwcZx6jXB8gHTJeC4
sjPnYF0NBsuwN53Y72MV2yNxo8u+TO3Auc+Zzg0uDnvcfF2icNaD0ug84+4m1bl3L3PtWwY7XMxY
o3ZOVkWmxoe60leBIDUA+JoMnvbsDthna0s8MH5Wfa8ZxgmjS59gUNk+a4+PGgw/t7sndu4YuBu2
471kRYERacXBa4/UjjKDqeFrk/EkUHpVAoFAoOG707TG79xYn5a2GfIxJxkyPYXxStidHZHIhCc5
Rw10/Cg0Rxe6+1S5900OONXzt+vA4AJ9QhpHDS5zGFOLqDf/AG/3ne8jOzsHcI0jQ5kUhiMBWaVx
d5XF1wLltLVCeNB29AoFAoOR+57MZ/bkbcp7o8Y5cAnkYLnNYSQ5wHigoPFMtuMzKmbivdLjNe4Q
SPFrnMB8pI8CRQXtsi22TIc3cZ348AjeWPjZeTIB5Gp8CaD3TsJf6P2tf+T/AHjQb+gUCgUHzf25
ibTj7+2LuaGaPCZc2ZlrgQ8DQOTzJ+igh/pYz+43Y+w480uK+f8AwjXA3dMFVcfBB8aD6ToFAoFB
yH3Q2ndN12DHxtshdNlDMieAzS0BrxcT4AEig5lv2x76cA6TfIg92rhdIdTx1t1oH/y/vb+exftk
/hoNt2F273Ts/cWYzd3nIxjjjoZLTdGXF40CgEOT8KDv6BQKDk/uZ3HLsvbbzjvszMx35eF44tBB
L3D9DR+2g8BoLuJl5OHkMycWV0OREVjlYUc08NCKDL2Xe8/aN2h3LGkPXjdc9SfO0nzNd8Q6g+k8
DMhzcKDMgKw5EbZYz/svCigv0CgUHn/3pJHbWKhT/Ft/7b6DzLZCf6d7h1/4ON/5LKDc/aBzv6yj
CnWCX+wUHulAoLeTjY+VjyY+RG2WCVpZJG8K1zTxBFBKGKKGJkMTBHFG0NjY0IGtAQAAfCglQKBQ
KBQY26YLc/bsnCc8xtyI3Rl4CkBwRUoJtw8duScoMH5l0bYnS+JY0lwH7XGgvUCgUCgo9jHtLXtD
mni0hRQanYO2cHZ8E4jUyAZHy9SRjV85VNB4UDdu2cHccjb5nJCcCcZAaxjUenpdpwoNuGhoDWhA
NABwoFAoFAoNZh7K6LdM7PyMg5LsotEMLmgMhjYOVoUqSdS6gqzZnxb6dzhyXMhkh6M+FarHOBVs
jSvlIGhQa0GyoFAoFAoFAoFAoFAoMfM23bs5rW5uLDlNYSWCaNsgaTxS4FKDF/pjtr+U4f8Al4v4
aB/THbX8pw/8vF/DQP6Y7a/lOH/l4v4aDPgggghZDBG2KGMIyNgDWtHwAGgoJ0CgUGJum0bZuuOM
fccdmTCHB4Y8aBw0UftoNfF2T2pFDNBHtsLYsgNbOwKjg1wc1dfBwWgvbZ2p27teT+Z2/Aix8i0s
6jAVtPEak0G1oLE2bDC9zHtlJaGOJZDK8I91gQsa4ErxA4DUoNaCDtxx23Kyfy9VUx5j7PMiM1X0
Jz+laCQz4C8MtmUvbGvRlRXMvHmtS1OLuAOh10oIDc8YsD7J0LWPAOPOCkjrBpYqrzN4tGpQa0FX
bjjtuVk/l6qpjzH2eZEZqvoTn9K0EhnwF4ZbMpe2NejKiuZePNalqcXcAdDrpQQG54xYH2ToWseA
cecFJHWDSxVXmbxaNSg1oKu3HHbcrJ/L1VTHmPs8yIzVfQnP6VoJDPgLwy2ZS9sa9GVFcy8ea1LU
4u4A6HXSggNzxiwPsnQtY8A484KSOsGliqvM3i0alBrQVduOO25WT+XqqmPMfZ5kRmq+hOf0rQSG
fAXhlsyl7Y16MqK5l481qWpxdwB0OulBAbnjFgfZOhax4Bx5wUkdYNLFVeZvFo1KDWgq7ccdtysn
8vVVMeY+zzIjNV9Cc/pWgkM+AvDLZlL2xr0ZUVzLx5rUtTi7gDoddKCA3PGLA+ydC1jwDjzgpI6w
aWKq8zeLRqUGtBV2447blZP5eqqY8x9nmRGar6E5/StBIZ8BeGWzKXtjXoyormXjzWpanF3AHQ66
UEBueMWB9k6FrHgHHnBSR1g0sVV5m8WjUoNaCrtxx23Kyfy9VUx5j7PMiM1X0Jz+laCQz4C8MtmU
vbGvRlRXMvHmtS1OLuAOh10oIDc8YsD7J0LWPAOPOCkjrBpYqrzN4tGpQa0FXbjjtuVk/l6qpjzH
2eZEZqvoTn9K0EhnwF4ZbMpe2NejKiuZePNalqcXcAdDrpQQG54xYH2ToWseAcecFJHWDSxVXmbx
aNSg1oKu3HHbcrJ/L1VTHmPs8yIzVfQnP6VoJDPgLwy2ZS9sa9GVFcy8ea1LU4u4A6HXSggNzxiw
PsnQtY8A484KSOsGliqvM3i0alBrQVduOO25WT+XqqmPMfZ5kRmq+hOf0rQSGfAXhlsyl7Y16MqK
5l481qWpxdwB0OulBAbnjFgfZOhax4Bx5wUkdYNLFVeZvFo1KDWgq7ccdtysn8vVVMeY+zzIjNV9
Cc/pWgkM+AvDLZlL2xr0ZUVzLx5rUtTi7gDoddKCA3PGLA+ydC1jwDjzgpI6waWKq8zeLRqUGtBV
2447blZP5eqqY8x9nmRGar6E5/StBIZ8BeGWzKXtjXoyormXjzWpanF3AHQ66UEBueMWB9k6FrHg
HHnBSR1g0sVV5m8WjUoNaCrtxx23Kyfy9VUx5j7PMiM1X0Jz+laCQz4C8MtmUvbGvRlRXMvHmtS1
OLuAOh10oIDc8YsD7J0LWPAOPOCkjrBpYqrzN4tGpQa0FXbjjtuVk/l6qpjzH2eZEZqvoTn9K0Eh
nwF4ZbMpe2NejKiuZePNalqcXcAdDrpQQG54xYH2ToWseAcecFJHWDSxVXmbxaNSg1oKu3HHbcrJ
/L1VTHmPs8yIzVfQnP6VoJDPgLwy2ZS9sa9GVFcy8ea1LU4u4A6HXSggNzxiwPsnQtY8A484KSOs
GliqvM3i0alBrQXRlxFheGyI2TokGKQG6+xQ0tUtU8/KmqprQXqBQKBQKBQKBQKBQKBQKBQKBQKB
QKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKBQKD//Z
--e89a8fb20616139bb104bcf1ddaa--
--e89a8fb20616139bb204bcf1ddab
Content-Type: text/xml; charset=US-ASCII; name="server.xml"
Content-Disposition: attachment; filename="server.xml"
Content-Transfer-Encoding: base64
X-Attachment-Id: f_h0o2w2tg1

PD94bWwgdmVyc2lvbj0nMS4wJyBlbmNvZGluZz0ndXRmLTgnPz4KPCEtLQogIExpY2Vuc2VkIHRv
IHRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbiAoQVNGKSB1bmRlciBvbmUgb3IgbW9yZQog
IGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGUgZGlz
dHJpYnV0ZWQgd2l0aAogIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiByZWdh
cmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4KICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZSB0
byBZb3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMAogICh0aGUgIkxpY2Vu
c2UiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRo
CiAgdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQK
CiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoKICBVbmxl
c3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNv
ZnR3YXJlCiAgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24g
YW4gIkFTIElTIiBCQVNJUywKICBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBB
TlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICBTZWUgdGhlIExpY2Vuc2UgZm9y
IHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAgbGltaXRh
dGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCi0tPgo8IS0tIE5vdGU6ICBBICJTZXJ2ZXIiIGlzIG5v
dCBpdHNlbGYgYSAiQ29udGFpbmVyIiwgc28geW91IG1heSBub3QKICAgICBkZWZpbmUgc3ViY29t
cG9uZW50cyBzdWNoIGFzICJWYWx2ZXMiIGF0IHRoaXMgbGV2ZWwuCiAgICAgRG9jdW1lbnRhdGlv
biBhdCAvZG9jcy9jb25maWcvc2VydmVyLmh0bWwKIC0tPgo8U2VydmVyIHBvcnQ9IjgwMDUiIHNo
dXRkb3duPSJTSFVURE9XTiI+CgogIDwhLS1BUFIgbGlicmFyeSBsb2FkZXIuIERvY3VtZW50YXRp
b24gYXQgL2RvY3MvYXByLmh0bWwgLS0+CiAgPExpc3RlbmVyIGNsYXNzTmFtZT0ib3JnLmFwYWNo
ZS5jYXRhbGluYS5jb3JlLkFwckxpZmVjeWNsZUxpc3RlbmVyIiBTU0xFbmdpbmU9Im9uIiAvPgog
IDwhLS1Jbml0aWFsaXplIEphc3BlciBwcmlvciB0byB3ZWJhcHBzIGFyZSBsb2FkZWQuIERvY3Vt
ZW50YXRpb24gYXQgL2RvY3MvamFzcGVyLWhvd3RvLmh0bWwgLS0+CiAgPExpc3RlbmVyIGNsYXNz
TmFtZT0ib3JnLmFwYWNoZS5jYXRhbGluYS5jb3JlLkphc3Blckxpc3RlbmVyIiAvPgogIDwhLS0g
Sk1YIFN1cHBvcnQgZm9yIHRoZSBUb21jYXQgc2VydmVyLiBEb2N1bWVudGF0aW9uIGF0IC9kb2Nz
L25vbi1leGlzdGVudC5odG1sIC0tPgogIDxMaXN0ZW5lciBjbGFzc05hbWU9Im9yZy5hcGFjaGUu
Y2F0YWxpbmEubWJlYW5zLlNlcnZlckxpZmVjeWNsZUxpc3RlbmVyIiAvPgogIDxMaXN0ZW5lciBj
bGFzc05hbWU9Im9yZy5hcGFjaGUuY2F0YWxpbmEubWJlYW5zLkdsb2JhbFJlc291cmNlc0xpZmVj
eWNsZUxpc3RlbmVyIiAvPgoKICA8IS0tIEdsb2JhbCBKTkRJIHJlc291cmNlcwogICAgICAgRG9j
dW1lbnRhdGlvbiBhdCAvZG9jcy9qbmRpLXJlc291cmNlcy1ob3d0by5odG1sCiAgLS0+CiAgPEds
b2JhbE5hbWluZ1Jlc291cmNlcz4KICAgIDwhLS0gRWRpdGFibGUgdXNlciBkYXRhYmFzZSB0aGF0
IGNhbiBhbHNvIGJlIHVzZWQgYnkKICAgICAgICAgVXNlckRhdGFiYXNlUmVhbG0gdG8gYXV0aGVu
dGljYXRlIHVzZXJzCiAgICAtLT4KICAgIDxSZXNvdXJjZSBuYW1lPSJVc2VyRGF0YWJhc2UiIGF1
dGg9IkNvbnRhaW5lciIKICAgICAgICAgICAgICB0eXBlPSJvcmcuYXBhY2hlLmNhdGFsaW5hLlVz
ZXJEYXRhYmFzZSIKICAgICAgICAgICAgICBkZXNjcmlwdGlvbj0iVXNlciBkYXRhYmFzZSB0aGF0
IGNhbiBiZSB1cGRhdGVkIGFuZCBzYXZlZCIKICAgICAgICAgICAgICBmYWN0b3J5PSJvcmcuYXBh
Y2hlLmNhdGFsaW5hLnVzZXJzLk1lbW9yeVVzZXJEYXRhYmFzZUZhY3RvcnkiCiAgICAgICAgICAg
ICAgcGF0aG5hbWU9ImNvbmYvdG9tY2F0LXVzZXJzLnhtbCIgLz4KICAgIDxSZXNvdXJjZSBuYW1l
PSJqZGJjL0RCMSIgYXV0aD0iQ29udGFpbmVyIiB0eXBlPSJqYXZheC5zcWwuRGF0YVNvdXJjZSIK
ICAgICAgICBkcml2ZXJDbGFzc05hbWU9IiAgIiB1cmw9ImpkYmM6IgogICAgICAgIHVzZXJuYW1l
PSJ4eXoiIHBhc3N3b3JkPSJwYXNzd29yZCIKICAgICAgICBtYXhBY3RpdmU9IjE1MCIgbWF4SWRs
ZT0iMTAiIG1heFdhaXQ9IjMwMDAwIgogICAgICAgIHJlbW92ZUFiYW5kb25lZD0idHJ1ZSIgcmVt
b3ZlQWJhbmRvbmVkVGltZW91dD0iMTIwIiBsb2dBYmFuZG9uZWQ9InRydWUiIC8+CgoKICA8L0ds
b2JhbE5hbWluZ1Jlc291cmNlcz4KCiAgPCEtLSBBICJTZXJ2aWNlIiBpcyBhIGNvbGxlY3Rpb24g
b2Ygb25lIG9yIG1vcmUgIkNvbm5lY3RvcnMiIHRoYXQgc2hhcmUKICAgICAgIGEgc2luZ2xlICJD
b250YWluZXIiIE5vdGU6ICBBICJTZXJ2aWNlIiBpcyBub3QgaXRzZWxmIGEgIkNvbnRhaW5lciIs
IAogICAgICAgc28geW91IG1heSBub3QgZGVmaW5lIHN1YmNvbXBvbmVudHMgc3VjaCBhcyAiVmFs
dmVzIiBhdCB0aGlzIGxldmVsLgogICAgICAgRG9jdW1lbnRhdGlvbiBhdCAvZG9jcy9jb25maWcv
c2VydmljZS5odG1sCiAgIC0tPgogIDxTZXJ2aWNlIG5hbWU9IkNhdGFsaW5hIj4KICAKICAgIDwh
LS1UaGUgY29ubmVjdG9ycyBjYW4gdXNlIGEgc2hhcmVkIGV4ZWN1dG9yLCB5b3UgY2FuIGRlZmlu
ZSBvbmUgb3IgbW9yZSBuYW1lZCB0aHJlYWQgcG9vbHMtLT4KICAgIDwhLS0KICAgIDxFeGVjdXRv
ciBuYW1lPSJ0b21jYXRUaHJlYWRQb29sIiBuYW1lUHJlZml4PSJjYXRhbGluYS1leGVjLSIgCiAg
ICAgICAgbWF4VGhyZWFkcz0iMTUwIiBtaW5TcGFyZVRocmVhZHM9IjQiLz4KICAgIC0tPgogICAg
CiAgICAKICAgIDwhLS0gQSAiQ29ubmVjdG9yIiByZXByZXNlbnRzIGFuIGVuZHBvaW50IGJ5IHdo
aWNoIHJlcXVlc3RzIGFyZSByZWNlaXZlZAogICAgICAgICBhbmQgcmVzcG9uc2VzIGFyZSByZXR1
cm5lZC4gRG9jdW1lbnRhdGlvbiBhdCA6CiAgICAgICAgIEphdmEgSFRUUCBDb25uZWN0b3I6IC9k
b2NzL2NvbmZpZy9odHRwLmh0bWwgKGJsb2NraW5nICYgbm9uLWJsb2NraW5nKQogICAgICAgICBK
YXZhIEFKUCAgQ29ubmVjdG9yOiAvZG9jcy9jb25maWcvYWpwLmh0bWwKICAgICAgICAgQVBSIChI
VFRQL0FKUCkgQ29ubmVjdG9yOiAvZG9jcy9hcHIuaHRtbAogICAgICAgICBEZWZpbmUgYSBub24t
U1NMIEhUVFAvMS4xIENvbm5lY3RvciBvbiBwb3J0IDgwODAKICAgIC0tPgogICAgPENvbm5lY3Rv
ciBwb3J0PSI4MDgwIiBwcm90b2NvbD0iSFRUUC8xLjEiIAogICAgICAgICAgICAgICBjb25uZWN0
aW9uVGltZW91dD0iMjAwMDAiIAogICAgICAgICAgICAgICByZWRpcmVjdFBvcnQ9Ijg0NDMiIC8+
CiAgICA8IS0tIEEgIkNvbm5lY3RvciIgdXNpbmcgdGhlIHNoYXJlZCB0aHJlYWQgcG9vbC0tPgog
ICAgPCEtLQogICAgPENvbm5lY3RvciBleGVjdXRvcj0idG9tY2F0VGhyZWFkUG9vbCIKICAgICAg
ICAgICAgICAgcG9ydD0iODA4MCIgcHJvdG9jb2w9IkhUVFAvMS4xIiAKICAgICAgICAgICAgICAg
Y29ubmVjdGlvblRpbWVvdXQ9IjIwMDAwIiAKICAgICAgICAgICAgICAgcmVkaXJlY3RQb3J0PSI4
NDQzIiAvPgogICAgLS0+ICAgICAgICAgICAKICAgIDwhLS0gRGVmaW5lIGEgU1NMIEhUVFAvMS4x
IENvbm5lY3RvciBvbiBwb3J0IDg0NDMKICAgICAgICAgVGhpcyBjb25uZWN0b3IgdXNlcyB0aGUg
SlNTRSBjb25maWd1cmF0aW9uLCB3aGVuIHVzaW5nIEFQUiwgdGhlIAogICAgICAgICBjb25uZWN0
b3Igc2hvdWxkIGJlIHVzaW5nIHRoZSBPcGVuU1NMIHN0eWxlIGNvbmZpZ3VyYXRpb24KICAgICAg
ICAgZGVzY3JpYmVkIGluIHRoZSBBUFIgZG9jdW1lbnRhdGlvbiAtLT4KICAgIDwhLS0KICAgIDxD
b25uZWN0b3IgcG9ydD0iODQ0MyIgcHJvdG9jb2w9IkhUVFAvMS4xIiBTU0xFbmFibGVkPSJ0cnVl
IgogICAgICAgICAgICAgICBtYXhUaHJlYWRzPSIxNTAiIHNjaGVtZT0iaHR0cHMiIHNlY3VyZT0i
dHJ1ZSIKICAgICAgICAgICAgICAgY2xpZW50QXV0aD0iZmFsc2UiIHNzbFByb3RvY29sPSJUTFMi
IC8+CiAgICAtLT4KCiAgICA8IS0tIERlZmluZSBhbiBBSlAgMS4zIENvbm5lY3RvciBvbiBwb3J0
IDgwMDkgLS0+CiAgICA8Q29ubmVjdG9yIHBvcnQ9IjgwMDkiIHByb3RvY29sPSJBSlAvMS4zIiBy
ZWRpcmVjdFBvcnQ9Ijg0NDMiIGJhY2tsb2c9IjEwMCIgbWF4VGhyZWFkcz0iNDAwMDAiIC8+CgoK
ICAgIDwhLS0gQW4gRW5naW5lIHJlcHJlc2VudHMgdGhlIGVudHJ5IHBvaW50ICh3aXRoaW4gQ2F0
YWxpbmEpIHRoYXQgcHJvY2Vzc2VzCiAgICAgICAgIGV2ZXJ5IHJlcXVlc3QuICBUaGUgRW5naW5l
IGltcGxlbWVudGF0aW9uIGZvciBUb21jYXQgc3RhbmQgYWxvbmUKICAgICAgICAgYW5hbHl6ZXMg
dGhlIEhUVFAgaGVhZGVycyBpbmNsdWRlZCB3aXRoIHRoZSByZXF1ZXN0LCBhbmQgcGFzc2VzIHRo
ZW0KICAgICAgICAgb24gdG8gdGhlIGFwcHJvcHJpYXRlIEhvc3QgKHZpcnR1YWwgaG9zdCkuCiAg
ICAgICAgIERvY3VtZW50YXRpb24gYXQgL2RvY3MvY29uZmlnL2VuZ2luZS5odG1sIC0tPgoKICAg
IDwhLS0gWW91IHNob3VsZCBzZXQganZtUm91dGUgdG8gc3VwcG9ydCBsb2FkLWJhbGFuY2luZyB2
aWEgQUpQIGllIDoKICAgIDxFbmdpbmUgbmFtZT0iU3RhbmRhbG9uZSIgZGVmYXVsdEhvc3Q9Imxv
Y2FsaG9zdCIganZtUm91dGU9Imp2bTEiPiAgICAgICAgIAogICAgLS0+IAogICAgPEVuZ2luZSBu
YW1lPSJDYXRhbGluYSIgZGVmYXVsdEhvc3Q9ImxvY2FsaG9zdCIganZtUm91dGU9InQ1Ij4KCiAg
ICAgIDwhLS1Gb3IgY2x1c3RlcmluZywgcGxlYXNlIHRha2UgYSBsb29rIGF0IGRvY3VtZW50YXRp
b24gYXQ6CiAgICAgICAgICAvZG9jcy9jbHVzdGVyLWhvd3RvLmh0bWwgIChzaW1wbGUgaG93IHRv
KQogICAgICAgICAgL2RvY3MvY29uZmlnL2NsdXN0ZXIuaHRtbCAocmVmZXJlbmNlIGRvY3VtZW50
YXRpb24pIC0tPgogICAgICA8IS0tCiAgICAgIDxDbHVzdGVyIGNsYXNzTmFtZT0ib3JnLmFwYWNo
ZS5jYXRhbGluYS5oYS50Y3AuU2ltcGxlVGNwQ2x1c3RlciIvPgogICAgICAtLT4gICAgICAgIAog
ICAgICA8Q2x1c3RlciBjbGFzc05hbWU9Im9yZy5hcGFjaGUuY2F0YWxpbmEuaGEudGNwLlNpbXBs
ZVRjcENsdXN0ZXIiIGNoYW5uZWxTZW5kT3B0aW9ucz0iNiI+CiAgICAgICAgPE1hbmFnZXIgY2xh
c3NOYW1lPSJvcmcuYXBhY2hlLmNhdGFsaW5hLmhhLnNlc3Npb24uQmFja3VwTWFuYWdlciIgZXhw
aXJlU2Vzc2lvbnNPblNodXRkb3duPSJmYWxzZSIKICAgICAgICAgICAgICAgICAgIG5vdGlmeUxp
c3RlbmVyc09uUmVwbGljYXRpb249InRydWUiIG1hcFNlbmRPcHRpb25zPSI2Ii8+CgogICAgICAg
ICAgICA8Q2hhbm5lbCBjbGFzc05hbWU9Im9yZy5hcGFjaGUuY2F0YWxpbmEudHJpYmVzLmdyb3Vw
Lkdyb3VwQ2hhbm5lbCI+CiAgICAgICAgICAgICA8TWVtYmVyc2hpcCBjbGFzc05hbWU9Im9yZy5h
cGFjaGUuY2F0YWxpbmEudHJpYmVzLm1lbWJlcnNoaXAuTWNhc3RTZXJ2aWNlIgogICAgICAgICAg
ICAgICAgICAgICAgICBhZGRyZXNzPSIyMjguMC4wLjQiCiAgICAgICAgICAgICAgICAgICAgICAg
IHBvcnQ9IjQ1NTY0IgogICAgICAgICAgICAgICAgICAgICAgICBmcmVxdWVuY3k9IjUwMCIKICAg
ICAgICAgICAgICAgICAgICAgICAgZHJvcFRpbWU9IjMwMDAwIi8+CiAgICAgICAgICAgICA8UmVj
ZWl2ZXIgY2xhc3NOYW1lPSJvcmcuYXBhY2hlLmNhdGFsaW5hLnRyaWJlcy50cmFuc3BvcnQubmlv
Lk5pb1JlY2VpdmVyIgogICAgICAgICAgICAgICAgICAgICAgYWRkcmVzcz0iYXV0byIKICAgICAg
ICAgICAgICAgICAgICAgIHBvcnQ9IjQwMDAiCiAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Rv
clRpbWVvdXQ9IjUwMDAiCiAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0PSI2MDAwMCIKICAg
ICAgICAgICAgICAgICAgICAgIG1heFRocmVhZHM9IjYiLz4KCiAgICAgICAgICAgICA8U2VuZGVy
IGNsYXNzTmFtZT0ib3JnLmFwYWNoZS5jYXRhbGluYS50cmliZXMudHJhbnNwb3J0LlJlcGxpY2F0
aW9uVHJhbnNtaXR0ZXIiPgogICAgICAgICAgICAgICAgICA8VHJhbnNwb3J0IGNsYXNzTmFtZT0i
b3JnLmFwYWNoZS5jYXRhbGluYS50cmliZXMudHJhbnNwb3J0Lm5pby5Qb29sZWRQYXJhbGxlbFNl
bmRlciIgdGltZW91dD0iNjAwMDAiIGtlZXBBbGl2ZUNvdW50PSIwIi8+CiAgICAgICAgICAgICA8
L1NlbmRlcj4KICAgICAgICAgICAgIDxJbnRlcmNlcHRvciBjbGFzc05hbWU9Im9yZy5hcGFjaGUu
Y2F0YWxpbmEudHJpYmVzLmdyb3VwLmludGVyY2VwdG9ycy5UY3BGYWlsdXJlRGV0ZWN0b3IiLz4K
ICAgICAgICAgICAgIDxJbnRlcmNlcHRvciBjbGFzc05hbWU9Im9yZy5hcGFjaGUuY2F0YWxpbmEu
dHJpYmVzLmdyb3VwLmludGVyY2VwdG9ycy5NZXNzYWdlRGlzcGF0Y2gxNUludGVyY2VwdG9yIi8+
CiAgICAgICAgICAgIDwhLS0gIDxJbnRlcmNlcHRvciBjbGFzc05hbWU9Im9yZy5hcGFjaGUuY2F0
YWxpbmEudHJpYmVzLmdyb3VwLmludGVyY2VwdG9ycy5UaHJvdWdocHV0SW50ZXJjZXB0b3IiLz4g
LS0+CiAgICAgICAgICAgPC9DaGFubmVsPgogICAgICAgICA8VmFsdmUgY2xhc3NOYW1lPSJvcmcu
YXBhY2hlLmNhdGFsaW5hLmhhLnRjcC5SZXBsaWNhdGlvblZhbHZlIgogICAgICAgICAgICAgICAg
IGZpbHRlcj0iLipcLmdpZnwuKlwuanN8LipcLmpwZWd8LipcLmpwZ3wuKlwucG5nfC4qXC5odG18
LipcLmh0bWx8LipcLmNzc3wuKlwudHh0Ii8+CiAgICAgICAgIDxWYWx2ZSBjbGFzc05hbWU9Im9y
Zy5hcGFjaGUuY2F0YWxpbmEuaGEuc2Vzc2lvbi5Kdm1Sb3V0ZUJpbmRlclZhbHZlIi8+CiAgICAg
ICA8Q2x1c3Rlckxpc3RlbmVyIGNsYXNzTmFtZT0ib3JnLmFwYWNoZS5jYXRhbGluYS5oYS5zZXNz
aW9uLkNsdXN0ZXJTZXNzaW9uTGlzdGVuZXIiLz4gCiAgICAgICA8Q2x1c3Rlckxpc3RlbmVyIGNs
YXNzTmFtZT0ib3JnLmFwYWNoZS5jYXRhbGluYS5oYS5zZXNzaW9uLkp2bVJvdXRlU2Vzc2lvbklE
QmluZGVyTGlzdGVuZXIiLz4KICAgICA8L0NsdXN0ZXI+IAogICAgICA8IS0tIFRoZSByZXF1ZXN0
IGR1bXBlciB2YWx2ZSBkdW1wcyB1c2VmdWwgZGVidWdnaW5nIGluZm9ybWF0aW9uIGFib3V0CiAg
ICAgICAgICAgdGhlIHJlcXVlc3QgYW5kIHJlc3BvbnNlIGRhdGEgcmVjZWl2ZWQgYW5kIHNlbnQg
YnkgVG9tY2F0LgogICAgICAgICAgIERvY3VtZW50YXRpb24gYXQ6IC9kb2NzL2NvbmZpZy92YWx2
ZS5odG1sIC0tPgogICAgICA8IS0tCiAgICAgIDxWYWx2ZSBjbGFzc05hbWU9Im9yZy5hcGFjaGUu
Y2F0YWxpbmEudmFsdmVzLlJlcXVlc3REdW1wZXJWYWx2ZSIvPgogICAgICAtLT4KCiAgICAgIDwh
LS0gVGhpcyBSZWFsbSB1c2VzIHRoZSBVc2VyRGF0YWJhc2UgY29uZmlndXJlZCBpbiB0aGUgZ2xv
YmFsIEpOREkKICAgICAgICAgICByZXNvdXJjZXMgdW5kZXIgdGhlIGtleSAiVXNlckRhdGFiYXNl
Ii4gIEFueSBlZGl0cwogICAgICAgICAgIHRoYXQgYXJlIHBlcmZvcm1lZCBhZ2FpbnN0IHRoaXMg
VXNlckRhdGFiYXNlIGFyZSBpbW1lZGlhdGVseQogICAgICAgICAgIGF2YWlsYWJsZSBmb3IgdXNl
IGJ5IHRoZSBSZWFsbS4gIC0tPgogICAgICA8UmVhbG0gY2xhc3NOYW1lPSJvcmcuYXBhY2hlLmNh
dGFsaW5hLnJlYWxtLlVzZXJEYXRhYmFzZVJlYWxtIgogICAgICAgICAgICAgcmVzb3VyY2VOYW1l
PSJVc2VyRGF0YWJhc2UiLz4gCgogICAgICA8IS0tIERlZmluZSB0aGUgZGVmYXVsdCB2aXJ0dWFs
IGhvc3QKICAgICAgICAgICBOb3RlOiBYTUwgU2NoZW1hIHZhbGlkYXRpb24gd2lsbCBub3Qgd29y
ayB3aXRoIFhlcmNlcyAyLjIuCiAgICAgICAtLT4KICAgICAgPEhvc3QgbmFtZT0ibG9jYWxob3N0
IiAgYXBwQmFzZT0id2ViYXBwcyIKICAgICAgICAgICAgdW5wYWNrV0FScz0idHJ1ZSIgYXV0b0Rl
cGxveT0idHJ1ZSIKICAgICAgICAgICAgeG1sVmFsaWRhdGlvbj0iZmFsc2UiIHhtbE5hbWVzcGFj
ZUF3YXJlPSJmYWxzZSI+CgogICAgICAgIDwhLS0gU2luZ2xlU2lnbk9uIHZhbHZlLCBzaGFyZSBh
dXRoZW50aWNhdGlvbiBiZXR3ZWVuIHdlYiBhcHBsaWNhdGlvbnMKICAgICAgICAgICAgIERvY3Vt
ZW50YXRpb24gYXQ6IC9kb2NzL2NvbmZpZy92YWx2ZS5odG1sIC0tPgogICAgICAgIDwhLS0KICAg
ICAgICA8VmFsdmUgY2xhc3NOYW1lPSJvcmcuYXBhY2hlLmNhdGFsaW5hLmF1dGhlbnRpY2F0b3Iu
U2luZ2xlU2lnbk9uIiAvPgogICAgICAgIC0tPgoKICAgICAgICA8IS0tIEFjY2VzcyBsb2cgcHJv
Y2Vzc2VzIGFsbCBleGFtcGxlLgogICAgICAgICAgICAgRG9jdW1lbnRhdGlvbiBhdDogL2RvY3Mv
Y29uZmlnL3ZhbHZlLmh0bWwgLS0+CiAgICAgICAgPCEtLQogICAgICAgIDxWYWx2ZSBjbGFzc05h
bWU9Im9yZy5hcGFjaGUuY2F0YWxpbmEudmFsdmVzLkFjY2Vzc0xvZ1ZhbHZlIiBkaXJlY3Rvcnk9
ImxvZ3MiICAKICAgICAgICAgICAgICAgcHJlZml4PSJsb2NhbGhvc3RfYWNjZXNzX2xvZy4iIHN1
ZmZpeD0iLnR4dCIgcGF0dGVybj0iY29tbW9uIiByZXNvbHZlSG9zdHM9ImZhbHNlIi8+CiAgICAg
ICAgLS0+CgogICAgICA8L0hvc3Q+CiAgICA8L0VuZ2luZT4KICA8L1NlcnZpY2U+CjwvU2VydmVy
Pgo=

--e89a8fb20616139bb204bcf1ddab
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org
--e89a8fb20616139bb204bcf1ddab--

From users-return-233392-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 18:06:48 2012
Return-Path: <users-return-233392-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0B9569204
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 18:06:48 +0000 (UTC)
Received: (qmail 67186 invoked by uid 500); 5 Apr 2012 18:06:44 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 67041 invoked by uid 500); 5 Apr 2012 18:06:44 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 67030 invoked by uid 99); 5 Apr 2012 18:06:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 18:06:44 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [66.160.196.165] (HELO arizona.hanik.com) (66.160.196.165)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 18:06:37 +0000
Received: from workstation (71-211-179-36.hlrn.qwest.net [71.211.179.36])
	by arizona.hanik.com (Postfix) with ESMTPSA id DB17DA80043F
	for <users@tomcat.apache.org>; Thu,  5 Apr 2012 12:03:22 -0600 (MDT)
From: "Filip Hanik \(mailing lists\)" <devlists@hanik.com>
To: "'Tomcat Users List'" <users@tomcat.apache.org>
References: <217DDBC2BB1E394CA9E7446337CBDEF20102DEDB4F4A@il-ex01.ad.checkpoint.com>	<4F7C81BB.1040804@apache.org>	<217DDBC2BB1E394CA9E7446337CBDEF20102DEDB4FA0@il-ex01.ad.checkpoint.com>	<CABzHfV=hqDq_UmjVpO0moj7jSGRxp2BXgEFzTp7noS+iJaOVzw@mail.gmail.com>	<4F7DC1A3.7050208@christopherschultz.net> <CABzHfVkuvzKUAedSsD3KrfimDG5LCTzWuQFRq1EngGKcgMV6bw@mail.gmail.com>
In-Reply-To: <CABzHfVkuvzKUAedSsD3KrfimDG5LCTzWuQFRq1EngGKcgMV6bw@mail.gmail.com>
Subject: RE: Bug in Tomcat AJP Connector?
Date: Thu, 5 Apr 2012 12:06:20 -0600
Message-ID: <001501cd1356$cea5f3f0$6bf1dbd0$@hanik.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQHH6hC/4zSDLDeaftBkAeU7lVQAKgHI0qPfAVGmMy0BdLT0AAKLcaZBATI5KKWWVHJuoA==
Content-Language: en-us

> -----Original Message-----
> From: Konstantin Kolinko [mailto:knst.kolinko@gmail.com]
> Sent: Thursday, April 05, 2012 10:18 AM
> To: Tomcat Users List
> Subject: Re: Bug in Tomcat AJP Connector?
>=20
> 2012/4/5 Christopher Schultz <chris@christopherschultz.net>:
> >
> > On 4/5/12 11:57 AM, Konstantin Kolinko wrote:
> >> 1. Tomcat does not start JVM =A0thus it cannot restart it.
> >>
> >> You need some external tool or script or admin to perform
> >> monitoring and (re)starts.
> >
> > Asking Tomcat to restart itself after OOME would be like expecting =
you
> > to defibrillate yourself. It works in theory, but not in practice.
> >
>=20
> Yes.  It reminds me of that Bond movie
[Filip Hanik]=20
I would not discard this as a joke, software is headed that way, there =
are
solutions for this today, and more of them will come tomorrow.
Self healing - it's gonna be fairly important in the new paradigm

>=20
> http://www.youtube.com/watch?v=3DJhm5up5NQwk
>=20
> Best regards,
> Konstantin Kolinko
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233393-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 18:07:10 2012
Return-Path: <users-return-233393-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4D5C89243
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 18:07:10 +0000 (UTC)
Received: (qmail 71126 invoked by uid 500); 5 Apr 2012 18:07:07 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 70901 invoked by uid 500); 5 Apr 2012 18:07:06 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 70892 invoked by uid 99); 5 Apr 2012 18:07:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 18:07:06 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [76.96.62.24] (HELO qmta01.westchester.pa.mail.comcast.net) (76.96.62.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 18:06:59 +0000
Received: from omta21.westchester.pa.mail.comcast.net ([76.96.62.72])
	by qmta01.westchester.pa.mail.comcast.net with comcast
	id uHzY1i0031ZXKqc51J6f2T; Thu, 05 Apr 2012 18:06:39 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta21.westchester.pa.mail.comcast.net with comcast
	id uJ6f1i00K38FjT13hJ6fJn; Thu, 05 Apr 2012 18:06:39 +0000
Message-ID: <4F7DDF2E.9020509@christopherschultz.net>
Date: Thu, 05 Apr 2012 14:06:38 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Bug in Tomcat AJP Connector?
References: <217DDBC2BB1E394CA9E7446337CBDEF20102DEDB4F4A@il-ex01.ad.checkpoint.com> <4F7C81BB.1040804@apache.org> <217DDBC2BB1E394CA9E7446337CBDEF20102DEDB4FA0@il-ex01.ad.checkpoint.com> <CABzHfV=hqDq_UmjVpO0moj7jSGRxp2BXgEFzTp7noS+iJaOVzw@mail.gmail.com> <4F7DC1A3.7050208@christopherschultz.net> <CABzHfVkuvzKUAedSsD3KrfimDG5LCTzWuQFRq1EngGKcgMV6bw@mail.gmail.com>
In-Reply-To: <CABzHfVkuvzKUAedSsD3KrfimDG5LCTzWuQFRq1EngGKcgMV6bw@mail.gmail.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Konstantin,

On 4/5/12 12:18 PM, Konstantin Kolinko wrote:
> 2012/4/5 Christopher Schultz <chris@christopherschultz.net>:
>> 
>> On 4/5/12 11:57 AM, Konstantin Kolinko wrote:
>>> 1. Tomcat does not start JVM  thus it cannot restart it.
>>> 
>>> You need some external tool or script or admin to perform 
>>> monitoring and (re)starts.
>> 
>> Asking Tomcat to restart itself after OOME would be like
>> expecting you to defibrillate yourself. It works in theory, but
>> not in practice.
>> 
> 
> Yes.  It reminds me of that Bond movie
> 
> http://www.youtube.com/watch?v=Jhm5up5NQwk

:)

Note that he still didn't restart his own heart... he needed help.
Maybe her name was 'cron' ;)

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk993y4ACgkQ9CaO5/Lv0PAoCgCgsRm42v55a0XGWcfnJ/FF0Do8
AcMAmwWYowivPHKEsybuLmTie7FwV8eb
=2V9h
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233394-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 18:32:02 2012
Return-Path: <users-return-233394-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6D74A9CEF
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 18:32:02 +0000 (UTC)
Received: (qmail 52456 invoked by uid 500); 5 Apr 2012 18:31:58 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 52083 invoked by uid 500); 5 Apr 2012 18:31:57 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 52052 invoked by uid 99); 5 Apr 2012 18:31:57 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 18:31:57 +0000
Received: from localhost (HELO [192.168.23.9]) (127.0.0.1)
  (smtp-auth username markt, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 18:31:57 +0000
Message-ID: <4F7DE51B.7030801@apache.org>
Date: Thu, 05 Apr 2012 19:31:55 +0100
From: Mark Thomas <markt@apache.org>
User-Agent: Mozilla/5.0 (Windows NT 5.2; WOW64; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
CC: announce@apache.org, 
 Tomcat Announce List <announce@tomcat.apache.org>,
 Tomcat Developers List <dev@tomcat.apache.org>
Subject: [ANN] Apache Tomcat 7.0.27 released
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

The Apache Tomcat team announces the immediate availability of Apache
Tomcat 7.0.27

This release is includes significant new features as well as a number of
bug fixes compared to version 7.0.26. The notable changes include:
* Support for the WebSocket protocol (RFC6455). Both streaming and
  message based APIs are provided and the implementation currently
  fully passes the Autobahn test suite. Also included are several
  examples.
* A number of fixes to the HTTP NIO connector, particularly when using
  Comet.
* Improve the memory leak prevention and detection code so that it
  works well with JVMs from IBM.

Please refer to the change log for the complete list of changes:
http://tomcat.apache.org/tomcat-7.0-doc/changelog.html

Note that this version has 4 zip binaries: a generic one and three
bundled with Tomcat native binaries for Windows operating systems
running on different CPU architectures.

Downloads:
http://tomcat.apache.org/download-70.cgi

Migration guides from Apache Tomcat 5.5.x and 6.0.x:
http://tomcat.apache.org/migration.html

Thank you,

-- The Apache Tomcat Team

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233395-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 18:47:31 2012
Return-Path: <users-return-233395-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7A5BA9820
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 18:47:31 +0000 (UTC)
Received: (qmail 18648 invoked by uid 500); 5 Apr 2012 18:47:28 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 18575 invoked by uid 500); 5 Apr 2012 18:47:27 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 18566 invoked by uid 99); 5 Apr 2012 18:47:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 18:47:27 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aldana@gmx.de designates 213.165.64.23 as permitted sender)
Received: from [213.165.64.23] (HELO mailout-de.gmx.net) (213.165.64.23)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 05 Apr 2012 18:47:21 +0000
Received: (qmail invoked by alias); 05 Apr 2012 18:46:59 -0000
Received: from e178097056.adsl.alicedsl.de (EHLO [192.168.0.116]) [85.178.97.56]
  by mail.gmx.net (mp017) with SMTP; 05 Apr 2012 20:46:59 +0200
X-Authenticated: #3352531
X-Provags-ID: V01U2FsdGVkX194YfZoHld4aTavyXVWVK0WuJ620zwspSuvTSil+f
	+mhqpHHpIY2LFz
Message-ID: <4F7DE8A9.3080805@gmx.de>
Date: Thu, 05 Apr 2012 20:47:05 +0200
From: manuel aldana <aldana@gmx.de>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:10.0.2) Gecko/20120216 Thunderbird/10.0.2
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: 500 HTTP-status forwarding broken (JSP rendering + Exception
 occurence)
References: <4F7DBD77.8040408@gmx.de> <4F7DC332.7070402@christopherschultz.net>
In-Reply-To: <4F7DC332.7070402@christopherschultz.net>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Am 05.04.12 18:07, schrieb Christopher Schultz:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Manuel,
>
> On 4/5/12 11:42 AM, manuel aldana wrote:
>> Inside web.xml I defined<error-page>500..., so 500-status is
>> resolving to JSP error pages. I get inconsistent behaviour when an
>> Exception occurs during JSP rendering.
>>
>> 1) JSP syntax error (e.g. broken XML): === ->  500 status is set
>> correctly ->  forward to jsp-error page is done correctly and 500
>> returned to browser
>>
>>
>> 2) JSP runtime error: === ... ${model.causingNullPointerException}
>> ... ->  200 status ->  i.e. broken 500-forward to error.jsp ->  I get
>> broken HTML inside browser
> How much broken HTML do you get?
>
> It's possible that the response has already been committed to the
> client and there's no way to show the error page instead.
>
> Check your log files for "Response already committed" or related errors.
>
>> - In 2nd case "some" of jsp is rendered and written to
>> output-buffer and resetting-status is prohibited (see isCommitted()
>> check) =>  i.e. there is no way forwarding to 500 status when error
>> occurred during runtime of JSP rendering
> Correct.
>
>> I guess this is a bug (want to backup first before creating
>> trace-ticket)?
> If this is a bug, it's in your webapp: you generate too much content
> before you have any errors.

Inside JSP we have a backing model, which contains the dynamic data to 
be displayed inside JSP. Itself the model is held quite simple, but due 
to programming errors it can happen, that null-references occur. This is 
very rare, but we need to be notified somehow (due to explicit ERROR 
logging). The log to catalina.log isn't sufficient for our log setup (we 
use graylog2-server).

With bug@tomcat I meant that it error.jsp forwarding is not consistent 
between an exception at the "very start" of JSP rendering (e.g. syntax 
error) vs. error later during rendering. But I agree there is no way to 
"revert" status codes and content once bytes are sent to http-consumer.

>
>> Do you know a workaround for this?
> Several options (I'm sure there are more):
>
> 1. Don't throw exceptions ;)
> 2. Increase your output buffer (negative performance considerations)
> 3. Buffer the *entire* response (negative performance considerations,
>     requires additional code)
>
> Honestly, #1 is the best policy IMO, since you really should have all
> of your dangerous activities out of the way before you start
> generating a response.
1) see above. exception was NullPointerException, which was a plain bug 
in our code.
2 + 3) not an option for us as we have high traffic volume, the problem 
of exception is much more seldom, so that we don't want to sacrifice a 
fix here.

>
>> Currently I have workaround to have a special Filter checking for
>> Exceptions and including 200 status. The bad thing is that still
>> browser/users get returned 200 OK status, though error occurred ,
>> because resetting status isn't allowed.
> I don't know how you will correct malformed HTML in that case.
The malformed HTML wasn't an issue. Bad thing was that 1) we missed it 
in our log-infrastructure and 2) didn't see it on apache logs (because 
status was 200 OK), we monitor on 500 status codes.

What I will do create an interceptor which checks for the combination of 
200 status-code and exception. Alternatively I will see how to include 
tomcat logging plug to our used 
https://github.com/Graylog2/graylog2-server/wiki. This is cleaner but 
also higher effort, as I need to plugin logging-handling to tomcat.

Thanks for answer and happy easter.


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233396-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 19:41:09 2012
Return-Path: <users-return-233396-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A312597CC
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 19:41:09 +0000 (UTC)
Received: (qmail 25728 invoked by uid 500); 5 Apr 2012 19:41:06 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 25657 invoked by uid 500); 5 Apr 2012 19:41:06 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 25648 invoked by uid 99); 5 Apr 2012 19:41:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 19:41:06 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=FREEMAIL_FORGED_REPLYTO,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [98.138.91.59] (HELO nm19-vm0.bullet.mail.ne1.yahoo.com) (98.138.91.59)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 05 Apr 2012 19:40:55 +0000
Received: from [98.138.90.52] by nm19.bullet.mail.ne1.yahoo.com with NNFMP; 05 Apr 2012 19:40:34 -0000
Received: from [98.138.89.234] by tm5.bullet.mail.ne1.yahoo.com with NNFMP; 05 Apr 2012 19:40:34 -0000
Received: from [127.0.0.1] by omp1049.mail.ne1.yahoo.com with NNFMP; 05 Apr 2012 19:40:34 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 480930.47029.bm@omp1049.mail.ne1.yahoo.com
Received: (qmail 6418 invoked by uid 60001); 5 Apr 2012 19:40:34 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1333654834; bh=gbRs0LVT4YiZ34xFg5qcSJxP9iczgaZAiPKnwUtOATg=; h=X-YMail-OSG:Received:X-Mailer:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=wk8nq690E1F5qdWrID7xfxaSTeVaqNiYuo/f0SXsT7ytWzgkySBPOyFf44AoR3ZkUV0YWaWxT8sl93+tV4WiksJYWKKObC7eNX7aSeLR06SGpFEAgXtE8LGDsdn4LGBfa5wlApXSPoN9yv8BAm3xreHr1TfnInI1jwy4mHHUbiQ=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=nleKp3hTs73BExyMEO574TMwhW/Ma7Zs/V/m4q/CjdwvXMx4X67gUTBF14mbOkFOhFeD/hfvSTDkg+sjCGkkhiZkKl47viigfQy57FxyTWPkx7Vl1jXkcec8Oe+yL5T0Lev2x4yft62GpshWpRqPkpDNoLkCKZV/GV/YMKI+nT4=;
X-YMail-OSG: IuVN7d0VM1miW0KRf8iYhgxXyB8I5M4bpBjM0Sb07jLHSn7
 Vn1kuyRiVBtz2LrxDjvMQtsCALhlQyE.aD9yC3Ga8g3m8vQzYF4tYXKBPerB
 xbge6wwdm.Si6AaUsR960dLQiraagx_bSX7DprD2KuNdJgvFFsbJVjaN71tk
 fzN_8gGmqt3eeESW6ePP.E.EkBU7NbJ.zrZc_s9Ho9C_ko7Q0e.FiKmYX_tI
 ZmU1VW8z2ewCT5SndTdc1rxBjlXKskt4_67Vrh3741qRiiIIKbNcaRapueDp
 2ckoQss_qxr7HA1ujOc9f325NNAdarCoeXXJsSif5QiGr1qtMUTRIT9O5VKJ
 o8145sVv_LJW7ytj32PA1OUKRTdUy.LazhSW1dZ6gp.0iiqp5ECrGsLNRfD4
 mcjjypcYDgUymkLp6ydzwfPXLASxqV4aHOeKXqEy7kDyrrppnt8KJCwGR3IC
 0EijUX8yUpMiPVQ2Gkh7wyXDWxdp3lINpRkGHnmuWP.J612pbSnL0n5vpf7D
 wdyiNZnxKw41vr8WmS3SvLsCZGZP4OKJwcZZlSEear6VmXAi4
Received: from [71.129.46.96] by web125503.mail.ne1.yahoo.com via HTTP; Thu, 05 Apr 2012 12:40:34 PDT
X-Mailer: YahooMailWebService/0.8.117.340979
Message-ID: <1333654834.93600.YahooMailNeo@web125503.mail.ne1.yahoo.com>
Date: Thu, 5 Apr 2012 12:40:34 -0700 (PDT)
From: Mark Eggers <its_toasted@yahoo.com>
Reply-To: Mark Eggers <its_toasted@yahoo.com>
Subject: Connector warning message with native libraries
To: Tomcat Users List <users@tomcat.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Folks:=0A=0AI'm seeing a warning in my logs when I use request.secret for t=
he AJP=0Aconnector when I load the APR native libraries. The warning is:=0A=
=0AWARNING: [SetAllPropertiesRule]{Server/Service/Connector}=0A=A0 Setting =
property 'request.secret' to 'somesillypassword' did not find a=0A=A0 match=
ing property.=0A=0AI'm running a three node Tomcat cluster for testing with=
 the following=0Aconfiguraiton:=0A=0AOS: =A0 =A0 Fedora 15 32 bit=0AJVM: =
=A0 =A0java version "1.6.0_31"=0A=A0 =A0 =A0 =A0 Java(TM) SE Runtime Enviro=
nment (build 1.6.0_31-b04)=0A=A0 =A0 =A0 =A0 Java HotSpot(TM) Client VM (bu=
ild 20.6-b01, mixed mode, sharing)=0ATomcat: 6.0.35=0ANative: 1.1.22=0AAPR:=
 =A0 =A0apr-util-devel-1.3.12-1.fc15.i686 (Fedora RPM)=0ASSL: =A0 =A0openss=
l-devel-1.0.0g-1.fc15.i686 (Fedora RPM)=0A=0AIf I load the native libraries=
 with the following setenv.sh=0A(CATALINA_BASE and CATALINA_HOME are set in=
 a parent script):=0A=0A#!/bin/bash=0AJMX_PORT=3D9004=0ACATALINA_OPTS=3D"-D=
java.library.path=3D$CATALINA_HOME/bin/libs \=0A=A0 =A0 =A0 =A0 =A0 =A0 =A0=
 =A0-Dcom.sun.management.jmxremote \=0A=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0-Dcom=
.sun.management.jmxremote.port=3D$JMX_PORT \=0A=A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0-Dcom.sun.management.jmxremote.ssl=3Dfalse \=0A=A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0-Dcom.sun.management.jmxremote.authenticate=3Dfalse"=0AJAVA_OPTS=3D"=
-Dlog4j.home=3D$CATALINA_BASE/logs"=0Aexport CATALINA_OPTS JAVA_OPTS=0A=0AI=
 get the WARNING message above.=0A=0AIf I comment out the native libraries =
and run the following setenv.sh=0Ascript:=0A=0A#!/bin/bash=0AJMX_PORT=3D900=
4=0A# CATALINA_OPTS=3D"-Djava.library.path=3D$CATALINA_HOME/bin/libs \=0ACA=
TALINA_OPTS=3D"-Dcom.sun.management.jmxremote \=0A=A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0-Dcom.sun.management.jmxremote.port=3D$JMX_PORT \=0A=A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0-Dcom.sun.management.jmxremote.ssl=3Dfalse \=0A=A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0-Dcom.sun.management.jmxremote.authenticate=3Dfalse"=0AJ=
AVA_OPTS=3D"-Dlog4j.home=3D$CATALINA_BASE/logs"=0Aexport CATALINA_OPTS JAVA=
_OPTS=0A=0AI get a warning about not loading the native libraries, but no w=
arning=0Aabout the connector.=0A=0AHere's the snippet from my server.xml.=
=0A=0A<!-- Define an AJP 1.3 Connector on port 8019 -->=0A<Connector port=
=3D"8019" protocol=3D"AJP/1.3" redirectPort=3D"8453"=0A=A0 =A0 =A0 =A0reque=
st.secret=3D"somesillypassword"=0A=A0 =A0 =A0 =A0connectionTimeout=3D"60000=
0"=0A=A0 =A0 =A0 =A0URIEncoding=3D"UTF-8"/>=0A=0AI'll post the entire serve=
r.xml if people think it's appropriate, but=0Asince it has clustering and f=
arm deployment in it, it's a bit long.=0A=0AHere's the relevant portion of =
my workers.properties file:=0A=0Aworker.template.type=3Dajp13=0Aworker.temp=
late.host=3D192.168.0.254=0Aworker.template.socket_connect_timeout=3D5000=
=0Aworker.template.socket_keepalive=3Dtrue=0Aworker.template.ping_mode=3DA=
=0Aworker.template.ping_timeout=3D10000=0Aworker.template.connection_pool_m=
insize=3D0=0Aworker.template.connection_pool_timeout=3D600=0Aworker.templat=
e.reply_timeout=3D300000=0Aworker.template.recovery_options=3D3=0A=0Aworker=
.deimos.reference=3Dworker.template=0Aworker.deimos.port=3D8019=0A=0Aworker=
.lb.type=3Dlb=0Aworker.lb.error_escalation_time=3D0=0Aworker.lb.max_reply_t=
imeouts=3D10=0Aworker.lb.balance_workers=3Ddeimos,mars,phobos=0A=0A# work a=
round a security issue=0Aworker.lb.secret=3Dsomesillypassword=0A=0ASnippets=
 from httpd.conf:=0A=0A# uses default DocumentRoot=0A<VirtualHost *:80>=0AS=
erverName phoenix.mdeggers.org=0AServerAlias phoenix=0AServerAlias localhos=
t.localdomain=0AServerAlias localhost=0AJkMountFile /etc/httpd/conf.d/uriwo=
rkermap.properties=0A</VirtualHost>=0A=0AAnd snippets from uriworkermap.pro=
perties=0A=0A#=0A# RPets - a random pet generator / matcher / test applicat=
ion=0A#=0A/RPets=3Dlb=0A/RPets/*=3Dlb=0A=0AHere's the really odd thing. Eve=
n with the native libraries loaded and=0Athe warning message in catalina.ou=
t, the cluster works. I start up the=0Acluster and then go to http://localh=
ost/RPets, and the=0Aapplication works as expected.=0A=0AIf the warning is =
real and the attribute is discarded, I would expect=0Athe application to be=
 unavailable when the native libraries are loaded.=0A=0AIs this just a spur=
ious warning? I suspect that it is, because=0Aotherwise the Apache HTTPD - =
Tomcat AJP (via mod_jk 1.2.32) shouldn't=0Awork.=0A=0AAnd yes I know, with =
Tomcat 6.0.35 the attribute is no longer=0Anecessary.=0A=0AI also tried thi=
s with Tomcat 6.0.29 and got the same results (and=0Athere the attribute IS=
 necessary to avoid a security issue).=0A=0APuzzled . . . .=0A=0A/mde/=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233397-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 19:53:04 2012
Return-Path: <users-return-233397-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 694EE9C8A
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 19:53:04 +0000 (UTC)
Received: (qmail 70031 invoked by uid 500); 5 Apr 2012 19:53:01 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 69968 invoked by uid 500); 5 Apr 2012 19:53:00 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 69958 invoked by uid 99); 5 Apr 2012 19:53:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 19:53:00 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [76.96.59.228] (HELO qmta15.westchester.pa.mail.comcast.net) (76.96.59.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 19:52:53 +0000
Received: from omta17.westchester.pa.mail.comcast.net ([76.96.62.89])
	by qmta15.westchester.pa.mail.comcast.net with comcast
	id uHdj1i0031vXlb85FKsYgc; Thu, 05 Apr 2012 19:52:32 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta17.westchester.pa.mail.comcast.net with comcast
	id uKsY1i00U38FjT13dKsYLL; Thu, 05 Apr 2012 19:52:32 +0000
Message-ID: <4F7DF7FF.6050202@christopherschultz.net>
Date: Thu, 05 Apr 2012 15:52:31 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: 500 HTTP-status forwarding broken (JSP rendering + Exception
 occurence)
References: <4F7DBD77.8040408@gmx.de> <4F7DC332.7070402@christopherschultz.net> <4F7DE8A9.3080805@gmx.de>
In-Reply-To: <4F7DE8A9.3080805@gmx.de>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Manuel,

On 4/5/12 2:47 PM, manuel aldana wrote:
> Inside JSP we have a backing model, which contains the dynamic data
> to be displayed inside JSP. Itself the model is held quite simple,
> but due to programming errors it can happen, that null-references
> occur. This is very rare, but we need to be notified somehow (due
> to explicit ERROR logging). The log to catalina.log isn't
> sufficient for our log setup (we use graylog2-server).
> 
> With bug@tomcat I meant that it error.jsp forwarding is not
> consistent between an exception at the "very start" of JSP
> rendering (e.g. syntax error) vs. error later during rendering. But
> I agree there is no way to "revert" status codes and content once
> bytes are sent to http-consumer.

Right.... this can't possibly be attributed to a bug in Tomcat.
Instead, one might say that this is simply a fact of life for
streaming data applications. Your only recourse is bigger buffers.

> What I will do create an interceptor which checks for the
> combination of 200 status-code and exception.

I'm not sure how you would scan for that, other than a filter that
simply records all exceptions that are thrown (which is easy to do).

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk999/8ACgkQ9CaO5/Lv0PAc6ACgsUM0qx5VN6+6496za7tUWrtr
HggAn3pd1bX/Z8xlOrfBCGUummqvHQQw
=ZGL3
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233398-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 21:02:06 2012
Return-Path: <users-return-233398-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AF60192B8
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 21:02:06 +0000 (UTC)
Received: (qmail 93666 invoked by uid 500); 5 Apr 2012 21:02:03 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 93513 invoked by uid 500); 5 Apr 2012 21:02:03 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 93504 invoked by uid 99); 5 Apr 2012 21:02:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 21:02:03 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=FREEMAIL_FORGED_REPLYTO,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [98.138.90.67] (HELO nm4.bullet.mail.ne1.yahoo.com) (98.138.90.67)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 05 Apr 2012 21:01:53 +0000
Received: from [98.138.90.56] by nm4.bullet.mail.ne1.yahoo.com with NNFMP; 05 Apr 2012 21:01:31 -0000
Received: from [98.138.88.233] by tm9.bullet.mail.ne1.yahoo.com with NNFMP; 05 Apr 2012 21:01:31 -0000
Received: from [127.0.0.1] by omp1033.mail.ne1.yahoo.com with NNFMP; 05 Apr 2012 21:01:31 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 906599.62093.bm@omp1033.mail.ne1.yahoo.com
Received: (qmail 52315 invoked by uid 60001); 5 Apr 2012 21:01:31 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1333659691; bh=fjZixv+3yqEoXKmeMhSy7eCg1+gs5M59CdhE3FPHC20=; h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=UM60ZKw+FeROArMQ6WFKAVPd4nr7h0ahtid4t82XU9pDtXOJT87Ys9ccfbGQrNhcrnD+Leg7k4crVGyopDC7lz1ODgBmMUqbc2UiyMRDorqe/xQl84UOl5wmVIMUmt54BEx2U2jBV9fk2HyOOdlhDIuihhXaJT5rI20blO/MkII=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=fq56YfQip12ZPnggOyWutzHl1L2gtNi+GLDUdkgdJOLdSXNwujk6oyclNxTA7Tz1mBhwsg/nKtf14LP9CLm1oezr0vtJnFeumLY5AtJn1ZlZbWfnFsQS0XdK6mD+i5eM763II0+NijLVMDP8qSdVa6HWhwK+f81yTkh3OoQni7U=;
X-YMail-OSG: wAG8r0MVM1nvd_wjvFltgz6d3EKqSa_BGoZ.qYgj6pLaKrd
 LhDcXA4hDCdGemN5jaSODhy0DGe7R7hQZz977x0RFcAtrRawS7KtDnHCxRG8
 vvB1BdGxrP4nIFZNhUQ73.J_b3kxaRia1qEAW8.pH8DETLpiPXqyruc.6TlJ
 hjSaGHfFxoL0T8U6auQu4WHkyDDnmdaSVsxZlx17j3yQtNsBSKfkxbSNdh.Y
 G4Zw21hfyRf2jpadILy5sxZvXksrKVQ2Rp_GrPEu9T8_bwz91spFuJ6Z9MKw
 Uxxw9RexlnVQwowEDSn_ja9GXLKBc5GYy2.KuTFwnuNbapBKWYQKJChmYf_Y
 lgk9ExOz_gL7KSQGqRuZv3H5ROcMe5zv2qww_5wxVkFDYRZhgM7rUNJwjycv
 .6BBzbX1fUSgQEUgirtzegAqFcHRyWm3IXAVtW_WghvGgWPPPw1uaFjVn17w
 M8EAAnjgHRlADE0MLZVYQ0kf6
Received: from [71.129.46.96] by web125501.mail.ne1.yahoo.com via HTTP; Thu, 05 Apr 2012 14:01:31 PDT
X-Mailer: YahooMailWebService/0.8.117.340979
References: <zarafa.4f7c651f.1095.7ca7df39672deef6@zarafix.ordix.de> <CABKrPsNQN_2KjH_PLfE49aoXjqgc451yFZFs-a0e0g9S3hMLpw@mail.gmail.com> <1333572948.35940.YahooMailNeo@web125504.mail.ne1.yahoo.com> <CABKrPsN0KV_Wox_0JuzMqhLfzZ9r7Jsg5-5OuWJbeFHfkxNRNQ@mail.gmail.com> <4F7DC767.3040108@pidster.com> <CABKrPsMKvkZphpL+XRB=Y0B54_AM7+nTYUW5Uq3QiXUSSLBJaQ@mail.gmail.com>
Message-ID: <1333659691.97609.YahooMailNeo@web125501.mail.ne1.yahoo.com>
Date: Thu, 5 Apr 2012 14:01:31 -0700 (PDT)
From: Mark Eggers <its_toasted@yahoo.com>
Reply-To: Mark Eggers <its_toasted@yahoo.com>
Subject: Re: SEVERE: Unable to start cluster.
To: Tomcat Users List <users@tomcat.apache.org>
In-Reply-To: <CABKrPsMKvkZphpL+XRB=Y0B54_AM7+nTYUW5Uq3QiXUSSLBJaQ@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Response at the bottom:=0A=0A/mde/=0A=0A>________________________________=
=0A> From: Dhaval Jaiswal <dhaval.jaiswal@via.com>=0A>To: Tomcat Users List=
 <users@tomcat.apache.org> =0A>Sent: Thursday, April 5, 2012 10:28 AM=0A>Su=
bject: Re: SEVERE: Unable to start cluster.=0A> =0A>=0A>pfa server.xml =0A>=
=0A>The same i am using for all the 10 tomcats. =0A>=0A>=0A>=0A>=0A>On Thu,=
 Apr 5, 2012 at 9:55 PM, Pid <pid@pidster.com> wrote:=0A>=0A>On 05/04/2012 =
15:13, Dhaval Jaiswal wrote:=0A>>> I have tested the below cluster manager;=
 as per the instruction i have=0A>>> changed. However, when we try to deplo=
y the apps on tomcat it was=0A>>> throwing error that=0A>>>=0A>>> WARNING: =
Unable to send map start message.=0A>>> Apr 5, 2012 1:37:12 PM org.apache.c=
atalina.ha.session.BackupManager start=0A>>> SEVERE: Unable to start Backup=
Manager=0A>>> java.lang.RuntimeException: Unable to start replicated map.=
=0A>>> =A0 =A0 =A0 =A0at=0A>>> org.apache.catalina.tribes.tipis.AbstractRep=
licatedMap.init(AbstractReplicatedMap.java:230)=0A>>>=0A>>> Failed to start=
 BackupManager: =A0java.lang.IllegalArgumentException:=0A>>> Listener alrea=
dy=0A>>> exists:{}[org.apache.catalina.tribes.tipis.LazyReplicatedMap]=0A>>=
>=0A>>>=0A>>>=0A>>> i am using below server.xml for all the 10 tomcats. Do =
i have to change=0A>>> it for every tomcat. How would i fix it.=0A>>>=0A>>>=
=0A>>>=0A>>> <Cluster className=3D"org.apache.catalina.ha.tcp.SimpleTcpClus=
ter"=0A>>> channelSendOptions=3D"6">=0A>>> =A0 =A0 =A0 =A0 <Manager=0A>>> c=
lassName=3D"org.apache.catalina.ha.session.BackupManager"=0A>>> expireSessi=
onsOnShutdown=3D"false"=0A>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0notify=
ListenersOnReplication=3D"true" mapSendOptions=3D"6"/>=0A>>>=0A>>> =A0 =A0 =
=A0 =A0 =A0 =A0 <Channel=0A>>> className=3D"org.apache.catalina.tribes.grou=
p.GroupChannel">=0A>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0<Membership=0A>>> classNa=
me=3D"org.apache.catalina.tribes.membership.McastService"=0A>>> =A0 =A0 =A0=
 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 address=3D"228.0.0.4"=0A>>> =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 port=3D"45563"=0A>>> =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 frequency=3D"500"=0A>>> =A0 =A0 =A0 =A0=
 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 dropTime=3D"30000"/>=0A>>> =A0 =A0 =A0 =A0=
 =A0 =A0 =A0<Receiver=0A>>> className=3D"org.apache.catalina.tribes.transpo=
rt.nio.NioReceiver"=0A>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 addre=
ss=3D"auto"=0A>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 port=3D"4000"=
=0A>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 selectorTimeout=3D"5000"=
=0A>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 timeout=3D"60000"=0A>>> =
=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 maxThreads=3D"6"/>=0A>>>=0A>>> =
=A0 =A0 =A0 =A0 =A0 =A0 =A0<Sender=0A>>> className=3D"org.apache.catalina.t=
ribes.transport.ReplicationTransmitter">=0A>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 <Transport=0A>>> className=3D"org.apache.catalina.tribes.transport.=
nio.PooledParallelSender" timeout=3D"60000"=0A>>> keepAliveCount=3D"0"/>=0A=
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0</Sender>=0A>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0<=
Interceptor=0A>>> className=3D"org.apache.catalina.tribes.group.interceptor=
s.TcpFailureDetector"/>=0A>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0<Interceptor=0A>>>=
 className=3D"org.apache.catalina.tribes.group.interceptors.MessageDispatch=
15Interceptor"/>=0A>>> =A0 =A0 =A0 =A0 =A0 =A0 <!-- =A0<Interceptor=0A>>> c=
lassName=3D"org.apache.catalina.tribes.group.interceptors.ThroughputInterce=
ptor"/>=0A>>> -->=0A>>> =A0 =A0 =A0 =A0 =A0 =A0</Channel>=0A>>> =A0 =A0 =A0=
 =A0 =A0<Valve className=3D"org.apache.catalina.ha.tcp.ReplicationValve"=0A=
>>>=0A>>> filter=3D".*\.gif|.*\.js|.*\.jpeg|.*\.jpg|.*\.png|.*\.htm|.*\.htm=
l|.*\.css|.*\.txt"/>=0A>>> =A0 =A0 =A0 =A0 =A0<Valve=0A>>> className=3D"org=
.apache.catalina.ha.session.JvmRouteBinderValve"/>=0A>>> =A0 =A0 =A0 =A0<Cl=
usterListener=0A>>> className=3D"org.apache.catalina.ha.session.ClusterSess=
ionListener"/>=0A>>> =A0 =A0 =A0 =A0<ClusterListener=0A>>> className=3D"org=
.apache.catalina.ha.session.JvmRouteSessionIDBinderListener"/>=0A>>> =A0 =
=A0 =A0</Cluster>=0A>>=0A>>=0A>>Wow. =A0That's pretty neat, I've never seen=
 Tomcat start up with just the=0A>>cluster definition.=0A>>=0A>>How about y=
ou:=0A>>=0A>>1) remove all comments=0A>>2) remove all passwords=0A>>3) post=
 the whole server.xml inline in your next reply=0A=0A=0ADhaval,=0A=0A=0APle=
ase try to avoid posting in HTML. The font is sometimes difficult to read.=
=0A=0APlease don't cc me. I get the same message on the list, and with abou=
t 200 mail messages per day on this account I might overlook stuff if I get=
 a lot of duplicate messages.=0A=0APlease post stuff inline and not as atta=
chments. While I got the attached server.xml file, the list generally strip=
s attachments.=0A=0AAll that being said, here are my comments:=0A=0A<!-- Fr=
om your server.xml -->=0A<Listener=0A=A0 className=3D"org.apache.catalina.c=
ore.AprLifecycleListener" SSLEngine=3D"on" />=0A<Listener=0A=A0 className=
=3D"org.apache.catalina.core.JasperListener" />=0A<Listener=0A=A0 className=
=3D"org.apache.catalina.mbeans.ServerLifecycleListener" />=0A<Listener=0A=
=A0 className=3D"org.apache.catalina.mbeans.GlobalResourcesLifecycleListene=
r" />=0A=0ASo you've removed the memory leak prevention listener from your=
=0Aserver.xml? Is there any reason why you've done that?=0A=0A<!-- from you=
r server.xml -->=0A<Connector port=3D"8080" protocol=3D"HTTP/1.1"=A0=0A=A0 =
=A0 =A0 =A0 =A0 =A0connectionTimeout=3D"20000"=A0=0A=A0 =A0 =A0 =A0 =A0 =A0=
redirectPort=3D"8443" />=0A=0A<Connector port=3D"8009"=0A=A0 =A0 =A0 =A0 =
=A0 =A0protocol=3D"AJP/1.3"=0A=A0 =A0 =A0 =A0 =A0 =A0redirectPort=3D"8443"=
=0A=A0 =A0 =A0 =A0 =A0 =A0backlog=3D"100"=0A=A0 =A0 =A0 =A0 =A0 =A0maxThrea=
ds=3D"40000" />=0A=0ANo URIEncoding=3D"UTF-8" on your connectors? I checked=
 your web site and=0Athere doesn't seem to be any characters that would be=
=0Aimpacted. However, I was thinking that setting UTF-8 on all connectors=
=0Ais in general a good thing.=0A=0A40000 threads for the AJP connector wit=
h only a backlog of 100? I hope that=0A=0Aa) your Apache HTTPD server is co=
nfigured appropriately=0Ab) you can have this many file descriptors open=0A=
=0A<!-- from your server.xml -->=0A<Membership=0A=A0 =A0 =A0 =A0 =A0 =A0 cl=
assName=3D"org.apache.catalina.tribes.membership.McastService"=0A=A0 =A0 =
=A0 =A0 =A0 =A0 address=3D"228.0.0.4"=0A=A0 =A0 =A0 =A0 =A0 =A0 port=3D"455=
64"=0A=A0 =A0 =A0 =A0 =A0 =A0 frequency=3D"500"=0A=A0 =A0 =A0 =A0 =A0 =A0 d=
ropTime=3D"30000"/>=0A=0AYou said that you use this same server.xml for all=
 10=0ATomcats. However, in a previous message you said you were trying to=
=0Acluster 7 Tomcats (192.168.3.5 to 192.168.3.11). If you use the same=0Am=
ulticast address and port for all 10 Tomcats, then all 10 Tomcats=0Awill be=
 a part of the cluster.=0A=0A> I have tested the below cluster manager; as =
per the instruction i have=0A=0A> changed. However, when we try to deploy t=
he apps on tomcat it was=0A> throwing error that=A0=0A=0ADoes this mean tha=
t the cluster actually starts without your web=0Aapplication? If you've mod=
ified the logging.properties file, what does=0Athe cluster logging file say=
? Please post the information inline as the=0Amailing list tends to strip a=
ttachments.=0A=0AThe default dropTime is 3000 ms (3 seconds). Is your netwo=
rk busy=0A=0Aenough so that a 30 second drop time is reasonable? If it is, =
then=0Amaybe a better networking infrastructure is in order.=0A=0A<!-- from=
 your server.xml -->=0A<Sender=0A=A0 className=3D"org.apache.catalina.tribe=
s.transport.ReplicationTransmitter">=0A=A0 <Transport=0A=A0 className=3D"or=
g.apache.catalina.tribes.transport.nio.PooledParallelSender"=0A=A0 =A0 =A0 =
=A0 =A0 =A0 =A0timeout=3D"60000"=0A=A0 =A0 =A0 =A0 =A0 =A0 =A0keepAliveCoun=
t=3D"0"/>=0A</Sender>=0A=0AkeepAliveCount=3D"0" ?=0A=0AFrom the documentati=
on:=0A=0AThe number of requests that can go through the socket before the=
=0Asocket is closed, and reopened for the next request. The default value=
=0Ais -1, which is unlimited.=0A=0ASo you're saying here that NO requests c=
an go through the socket=0Abefore the socket is closed? At the best interpr=
etation, you'll get=0Aone message through the socket, then the socket close=
s and=0Areopens. This doesn't sound very performant.=0A=0AOther than that, =
your clustering setup does not look a lot different=0Athan mine. I place my=
 cluster in the <Host> element since I am=0Aexperimenting with farm deploym=
ent. Mine works even when changing from=0Athe DeltaManager (only three node=
 cluster) to the BackupManager.=0A=0AWhat is in your application's context.=
xml and web.xml files? Please=0Apost both (inline - the list tends to strip=
 attachments), with=0Acomments and sensitive information removed.=0A=0AI su=
spect that you have a listener defined in either context.xml or=0Aweb.xml.=
=0A=0AAll you really need to do to get session clustering to work is:=0A=0A=
1. <distributable/> in web.xml=0A2. Make sure that all session objects are =
serializalble.=0A=0AActually there is a bit more, but the above are the bas=
ics.=0A=0A. . . . just my two cents.=0A/mde/=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233399-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 21:18:21 2012
Return-Path: <users-return-233399-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5401F9EF0
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 21:18:21 +0000 (UTC)
Received: (qmail 50103 invoked by uid 500); 5 Apr 2012 21:18:18 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 50052 invoked by uid 500); 5 Apr 2012 21:18:18 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 50043 invoked by uid 99); 5 Apr 2012 21:18:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 21:18:18 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of oferi@checkpoint.com designates 194.29.34.68 as permitted sender)
Received: from [194.29.34.68] (HELO michael.checkpoint.com) (194.29.34.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 21:18:10 +0000
Received: from il-ex01.ad.checkpoint.com (il-ex01.ad.checkpoint.com [194.29.34.26])
	by michael.checkpoint.com (8.13.8/8.13.8) with ESMTP id q35LHkgD011669
	for <users@tomcat.apache.org>; Fri, 6 Apr 2012 00:17:46 +0300
X-CheckPoint: {4F7E198E-0-1B221DC2-5FFFF}
Received: from il-ex03.ad.checkpoint.com (194.29.34.71) by
 il-ex01.ad.checkpoint.com (194.29.34.26) with Microsoft SMTP Server (TLS) id
 8.3.213.0; Fri, 6 Apr 2012 00:17:46 +0300
Received: from il-ex01.ad.checkpoint.com ([126.0.0.2]) by
 il-ex03.ad.checkpoint.com ([194.29.34.71]) with mapi; Fri, 6 Apr 2012
 00:17:45 +0300
From: Ofer Israeli <oferi@checkpoint.com>
To: Tomcat Users List <users@tomcat.apache.org>
CC: Tomcat Users List <users@tomcat.apache.org>
Date: Fri, 6 Apr 2012 00:17:36 +0300
Subject: Re: Bug in Tomcat AJP Connector?
Thread-Topic: Bug in Tomcat AJP Connector?
Thread-Index: Ac0TcYrXFZVPu9cCTAWefT5W9TQx8Q==
Message-ID: <F4938ADA-CE56-43B9-A6BE-490EA47922CA@checkpoint.com>
References: <217DDBC2BB1E394CA9E7446337CBDEF20102DEDB4F4A@il-ex01.ad.checkpoint.com>
 <4F7C81BB.1040804@apache.org>
 <217DDBC2BB1E394CA9E7446337CBDEF20102DEDB4FA0@il-ex01.ad.checkpoint.com>
 <CABzHfV=hqDq_UmjVpO0moj7jSGRxp2BXgEFzTp7noS+iJaOVzw@mail.gmail.com>
In-Reply-To: <CABzHfV=hqDq_UmjVpO0moj7jSGRxp2BXgEFzTp7noS+iJaOVzw@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
x-kse-antivirus-interceptor-info: scan successful
x-kse-antivirus-info: Clean
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-KSE-AntiSpam-Interceptor-Info: protection disabled
X-Virus-Checked: Checked by ClamAV on apache.org

WQ0KDQpPbiA1INeR15DXpNeoIDIwMTIsIGF0IDE4OjU4LCAiS29uc3RhbnRpbiBLb2xpbmtvIiA8
a25zdC5rb2xpbmtvQGdtYWlsLmNvbT4gd3JvdGU6DQoNCj4gMjAxMi80LzUgT2ZlciBJc3JhZWxp
IDxvZmVyaUBjaGVja3BvaW50LmNvbT46DQo+PiBNYXJrIFRob21hcyB3cm90ZToNCj4+PiBPbiAw
NC8wNC8yMDEyIDE3OjAyLCBPZmVyIElzcmFlbGkgd3JvdGU6DQo+Pj4gDQo+Pj4gT25jZSB5b3Ug
aGF2ZSBhbiBPT01FIGFsbCBiZXRzIGFyZSBvZmYuIFRoZSBKVk0gbmVlZHMgdG8gYmUgcmVzdGFy
dGVkLg0KPj4+IFRoZXJlIGlzIG5vIGd1YXJhbnRlZSBvZiByZWxpYWJsZSBvcGVyYXRpb24gYWZ0
ZXIgYW4gT09NRS4NCj4+PiANCj4+PiBNYXJrDQo+PiANCj4+IEhpIE1hcmssDQo+PiBJIGFncmVl
IHRoYXQgdGhlcmUgaW4gc3VjaCBhIHNpdHVhdGlvbiB0aGUgSlZNIHNob3VsZCBiZSByZXN0YXJ0
ZWQsIGJ1dCBpdCBpc24ndCByZXN0YXJ0ZWQgYnkgVG9tY2F0LiAgT24gdGhlIG90aGVyIGhhbmQs
IFRvbWNhdCBkb2VzIHRha2Ugc29tZSBwcmVjYXV0aW91cyBhY3Rpb25zIGFuZCBraWxscyB0aGUg
YWNjZXB0aW5nIHRocmVhZCwgYnV0IGluIHN1Y2ggYSBjYXNlIGl0IHNob3VsZCBhbHNvIGNsb3Nl
IHRoZSBzb2NrZXQgdGhhdCB0aHJlYWQgaXMgbGlzdGVuaW5nIG9uIG90aGVyd2lzZSBpdCBpcyBs
ZWF2aW5nIGdhcmJhZ2UgYXJvdW5kIGFmdGVyIHRoZSB0aHJlYWQncyBkZWF0aC4NCj4+IERvIHlv
dSBzZWUgYW55IHJlYXNvbiBhcyBub3QgdG8gY2xvc2UgdGhlIGxpc3RlbmluZyBzb2NrZXQ/DQo+
PiANCj4gDQo+IDEuIFRvbWNhdCBkb2VzIG5vdCBzdGFydCBKVk0gIHRodXMgaXQgY2Fubm90IHJl
c3RhcnQgaXQuDQo+IA0KPiBZb3UgbmVlZCBzb21lIGV4dGVybmFsIHRvb2wgb3Igc2NyaXB0IG9y
IGFkbWluIHRvIHBlcmZvcm0gbW9uaXRvcmluZw0KPiBhbmQgKHJlKXN0YXJ0cy4NCj4gDQo+IDIu
IE9PTSBjYW4gaGFwcGVuIGF0IGEgcmFuZG9tIHBsYWNlLiBPbmNlIGl0IGhhcHBlbnMsIGl0IGlz
IGxpa2VseQ0KPiB0aGF0IG90aGVyIHBsYWNlcyB3aWxsIGFsc28gc3RhcnQgdG8gZmFpbCByYW5k
b21seS4gSXQgaXMgYWxzbyBsaWtlbHkNCj4gdGhhdCB5b3VyIGF0dGVtcHRzIHRvIHJlY292ZXIg
d2lsbCBmYWlsIGFzIHdlbGwuDQo+IA0KPiBNYXJrIGFscmVhZHkgbWVudGlvbmVkIGl0OiAiYWxs
IGJldHMgYXJlIG9mZiIuDQo+IA0KPiBCZXN0IHJlZ2FyZHMsDQo+IEtvbnN0YW50aW4gS29saW5r
bw0KPiANCkhpIEtvbnN0YW50aW4sDQoNCkkgYWdyZWUgcmVnYXJkaW5nIHRoZSBPT00gYnJpbmdp
bmcgVEMgdG8gYSBzdGF0ZSB3aGVyZSBpdCBtdXN0IGJlIHJlc3RvcmVkLCBidXQgbXkgcG9pbnQg
cmVtYWluczogaWYgdGhlcmUgaXMgY29kZSB0aGF0IGhhbmRsZXMgY2F0Y2hpbmcgdGhpcyBleGNl
cHRpb24gYW5kIHRlcm1pbmF0aW5nIHRoZSB0aHJlYWQsIHdoeSBub3QgdGVybWluYXRlIGdyYWNl
ZnVsbHkgYnkgY2xvc2luZyB0aGUgbGlzdGVuaW5nIHNvY2tldCBiZWZvcmUga2lsbGluZyB0aGUg
dGhyZWFkPw0KDQpCZXN0IHJlZ2FyZHMsDQpJZmVy
DQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IHVzZXJzLXVuc3Vi
c2NyaWJlQHRvbWNhdC5hcGFjaGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1t
YWlsOiB1c2Vycy1oZWxwQHRvbWNhdC5hcGFjaGUub3JnDQoN

From users-return-233400-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 21:28:21 2012
Return-Path: <users-return-233400-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5C521906A
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 21:28:21 +0000 (UTC)
Received: (qmail 90988 invoked by uid 500); 5 Apr 2012 21:28:17 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 90934 invoked by uid 500); 5 Apr 2012 21:28:17 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 90910 invoked by uid 99); 5 Apr 2012 21:28:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 21:28:17 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jieryn@gmail.com designates 209.85.213.45 as permitted sender)
Received: from [209.85.213.45] (HELO mail-yw0-f45.google.com) (209.85.213.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 21:28:09 +0000
Received: by yhoo21 with SMTP id o21so1291731yho.18
        for <users@tomcat.apache.org>; Thu, 05 Apr 2012 14:27:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=XtLerEmXq+4flPxlzLggd3R0NfN9LKaFd8ND15Clyfg=;
        b=wkD5nAMib8T04kEQscGn8VNR8ORzrvoXH7QOAopgYGSRvlfcbxyZ1ZkLM9sVW8TjGv
         3L6OPvc7TRH7nQfbScbdb6Wat15erWTWB4KvZKttrp7JDtbpSlRAxq0/KUWgsBsdoGDL
         NJinbvuR8StgnbvOicPXARW2tJP2as4ps2HbF6ElJmOm5OBSa8/2yj5/HonF669+agEh
         5QKc2qdXjxyOsXkabX01+4XduOW/DTY08kbQZPjdNaaotiQ+sjneQEPYLQztMfHij8zh
         xBxRWP5TUXg7aiyEV9Uh7MC0yn7vdg4trCE+1FrBIhjbuH3M1U0kzXloQyOpRX0l548c
         d+gQ==
MIME-Version: 1.0
Received: by 10.236.153.73 with SMTP id e49mr4332096yhk.4.1333661267049; Thu,
 05 Apr 2012 14:27:47 -0700 (PDT)
Received: by 10.220.60.207 with HTTP; Thu, 5 Apr 2012 14:27:46 -0700 (PDT)
Date: Thu, 5 Apr 2012 17:27:46 -0400
Message-ID: <CAArU9ia4DHPty2MKvbUW8qxCLg-+0Px68-Ve6FOrhVthxY=ypg@mail.gmail.com>
Subject: 7.0 doc 404
From: Jesse Farinacci <jieryn@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1

http://tomcat.apache.org/tomcat-7.0-doc/web-socket-howto.html

-Jesse

-- 
There are 10 types of people in this world, those
that can read binary and those that can not.

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233401-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 21:45:25 2012
Return-Path: <users-return-233401-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B67509FE3
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 21:45:25 +0000 (UTC)
Received: (qmail 54698 invoked by uid 500); 5 Apr 2012 21:45:22 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 54578 invoked by uid 500); 5 Apr 2012 21:45:22 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 54569 invoked by uid 99); 5 Apr 2012 21:45:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 21:45:22 +0000
X-ASF-Spam-Status: No, hits=1.0 required=5.0
	tests=SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (nike.apache.org: transitioning domain of terence@tmbsw.com does not designate 208.82.204.51 as permitted sender)
Received: from [208.82.204.51] (HELO secure.builders-agent.com) (208.82.204.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 21:45:12 +0000
Received: from [192.168.1.8] (208-191-157-48.lightspeed.austtx.sbcglobal.net [208.191.157.48])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by tmbsw.com (Postfix) with ESMTP id 9BFB71108002
	for <users@tomcat.apache.org>; Thu,  5 Apr 2012 16:44:51 -0500 (CDT)
Message-ID: <4F7E1256.10705@tmbsw.com>
Date: Thu, 05 Apr 2012 16:44:54 -0500
From: "Terence M. Bandoian" <terence@tmbsw.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2.4) Gecko/20100608 Thunderbird/3.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Problem with shutting down tomcat5.5.29
References: <CABzHfVnfGegj00S46g5ftz+XhEVTYndv_2ZWPOCY6cehUS6bhw@mail.gmail.com>
In-Reply-To: <CABzHfVnfGegj00S46g5ftz+XhEVTYndv_2ZWPOCY6cehUS6bhw@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

  On 1:59 PM, Konstantin Kolinko wrote:
> 2012/4/5 Petr Hracek<phracek2@gmail.com>:
>> What I see in the start.log file is:
>> 2012-04-05 15:28:04,557 [main] INFO
>> org.apache.coyote.http11.Http11BaseProtocol - Initializing Coyote
>> HTTP/1.1 on http-8080
>> 2012-04-05 15:28:04,560 [main] INFO
>> org.apache.catalina.startup.Catalina - Initialization processed in
>> 1062 ms
>> 2012-04-05 15:28:04,727 [main] INFO
>> org.apache.catalina.core.StandardService - Starting service Catalina
>> 2012-04-05 15:28:04,731 [main] INFO
>> org.apache.catalina.core.StandardEngine - Starting Servlet Engine:
>> Apache Tomcat/5.5.27
>> 2012-04-05 15:28:04,743 [main] INFO
>> org.apache.catalina.core.StandardHost - XML validation disabled
>> 2012-04-05 15:28:06,229 [main] INFO
>> org.apache.catalina.loader.WebappClassLoader -
>> validateJarFile(/opt/repgen/servlet/WEB-INF/lib/servlet.jar) - jar not
>> loaded. See Servlet Spec 2.3, section 9.7.2. Offending class:
>> javax/servlet/Servlet.class
> The above is bad. (Though not related to your original question).
> You should not have servlet.jar in your application. Servlet API is
> provided by Tomcat only. Tomcat had to ignore your jar.
>
>> 2012-04-05 15:28:06,312 [main] INFO
>> org.apache.coyote.http11.Http11BaseProtocol - Starting Coyote HTTP/1.1
>> on http-8080
>> 2012-04-05 15:28:06,423 [main] INFO
>> org.apache.jk.common.ChannelSocket - JK: ajp13 listening on
>> /127.0.0.1:8009
>> 2012-04-05 15:28:06,425 [main] INFO  org.apache.jk.server.JkMain - Jk
>> running ID=time=0/15  config=null
>> 2012-04-05 15:28:06,453 [main] INFO
>> org.apache.catalina.storeconfig.StoreLoader - Find registry
>> server-registry.xml at classpath resource
>> 2012-04-05 15:28:06,514 [main] INFO
>> org.apache.catalina.startup.Catalina - Server startup in 1954 ms
>>
>> Here is mention ajp13. It is not correct one, right?
>>
> The above logs mean that you do not have Tomcat-Native library, so
> plain java (non-Apr) implementations of connectors are used.
>
> Thus you are better to remove/comment the following line in server.xml
>    <Listener className=rg.apache.catalina.core.AprLifecycleListener" />
>
> ( When Tomcat-Native is used, startup of 5.5 would look like the following:
> [[[
> 05.04.2012 18:47:22 org.apache.catalina.core.AprLifecycleListener init
> INFO: Loaded APR based Apache Tomcat Native library 1.1.22.
> 05.04.2012 18:47:22 org.apache.catalina.core.AprLifecycleListener init
> INFO: APR capabilities: IPv6 [false], sendfile [true], accept filters
> [false], random [true].
> 05.04.2012 18:47:23 org.apache.coyote.http11.Http11AprProtocol init
> INFO: Initializing Coyote HTTP/1.1 on http-8080
> 05.04.2012 18:47:23 org.apache.coyote.ajp.AjpAprProtocol init
> INFO: Initializing Coyote AJP/1.3 on ajp-8009
> 05.04.2012 18:47:23 org.apache.catalina.startup.Catalina load
> INFO: Initialization processed in 1578 ms
> 05.04.2012 18:47:23 org.apache.catalina.core.StandardService start
> INFO: Starting service Catalina
> 05.04.2012 18:47:23 org.apache.catalina.core.StandardEngine start
> INFO: Starting Servlet Engine: Apache Tomcat/5.5.35
> 05.04.2012 18:47:23 org.apache.catalina.core.StandardHost start
> INFO: XML validation disabled
> 05.04.2012 18:47:24 org.apache.coyote.http11.Http11AprProtocol start
> INFO: Starting Coyote HTTP/1.1 on http-8080
> 05.04.2012 18:47:24 org.apache.coyote.ajp.AjpAprProtocol start
> INFO: Starting Coyote AJP/1.3 on ajp-8009
> 05.04.2012 18:47:24 org.apache.catalina.storeconfig.StoreLoader load
> INFO: Find registry server-registry.xml at classpath resource
> 05.04.2012 18:47:24 org.apache.catalina.startup.Catalina start
> INFO: Server startup in 1484 ms
> ]]]
>
> Note that protocol implementation names are "Http11AprProtocol" and
> "AjpAprProtocol" )
>
>
>
>> Is it possible that during the shutting down of tomcat5 stopping
>> operation will take more then 2 minutes?
> It is possible, but you better take a thread dump (3 dumps separated
> by several seconds) to look what Tomcat is actually doing.
>
> How to do thread dumps is mentioned in the FAQ
>
>
>> When I am commented out Listener section then during the stopping
>> tomcat5 Failed is not mentioned
>> but in stop.log file Exception is still there. How to avoid that
>> Exception message will not be there?
>>
> You mean "java.net.ConnectException: Connection refused"  exception?
>
> It means that shutdown script cannot connect to Tomcat shutdown port
> to send it the shutdown command,  regardless of the reason.
>
> If it is because Tomcat is already stopped (e.g. you tried to shut it
> down twice in a row) then it is normal and is OK.  If it is because of
> any other reason then it is bad.
>
>
> Best regards,
> Konstantin Kolinko


This may not be related to the shutdown problem but, if httpd is 
providing the connectivity to the user, is the <Connector> on port 8080 
necessary?

-Terence Bandoian


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233402-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 22:04:43 2012
Return-Path: <users-return-233402-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D2F7698E6
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 22:04:43 +0000 (UTC)
Received: (qmail 16071 invoked by uid 500); 5 Apr 2012 22:04:40 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 15989 invoked by uid 500); 5 Apr 2012 22:04:40 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 15976 invoked by uid 99); 5 Apr 2012 22:04:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 22:04:40 +0000
X-ASF-Spam-Status: No, hits=1.0 required=5.0
	tests=SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (athena.apache.org: transitioning domain of terence@tmbsw.com does not designate 208.82.204.51 as permitted sender)
Received: from [208.82.204.51] (HELO secure.builders-agent.com) (208.82.204.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 22:04:34 +0000
Received: from [192.168.1.8] (208-191-157-48.lightspeed.austtx.sbcglobal.net [208.191.157.48])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by tmbsw.com (Postfix) with ESMTP id E00171108002
	for <users@tomcat.apache.org>; Thu,  5 Apr 2012 17:04:13 -0500 (CDT)
Message-ID: <4F7E16E0.2080902@tmbsw.com>
Date: Thu, 05 Apr 2012 17:04:16 -0500
From: "Terence M. Bandoian" <terence@tmbsw.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2.4) Gecko/20100608 Thunderbird/3.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: 500 HTTP-status forwarding broken (JSP rendering + Exception
 occurence)
References: <4F7DC332.7070402@christopherschultz.net>
In-Reply-To: <4F7DC332.7070402@christopherschultz.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

  On 1:59 PM, Christopher Schultz wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Manuel,
>
> On 4/5/12 11:42 AM, manuel aldana wrote:
>> Inside web.xml I defined<error-page>500..., so 500-status is
>> resolving to JSP error pages. I get inconsistent behaviour when an
>> Exception occurs during JSP rendering.
>>
>> 1) JSP syntax error (e.g. broken XML): === ->  500 status is set
>> correctly ->  forward to jsp-error page is done correctly and 500
>> returned to browser
>>
>>
>> 2) JSP runtime error: === ... ${model.causingNullPointerException}
>> ... ->  200 status ->  i.e. broken 500-forward to error.jsp ->  I get
>> broken HTML inside browser
> How much broken HTML do you get?
>
> It's possible that the response has already been committed to the
> client and there's no way to show the error page instead.
>
> Check your log files for "Response already committed" or related errors.
>
>> - In 2nd case "some" of jsp is rendered and written to
>> output-buffer and resetting-status is prohibited (see isCommitted()
>> check) =>  i.e. there is no way forwarding to 500 status when error
>> occurred during runtime of JSP rendering
> Correct.
>
>> I guess this is a bug (want to backup first before creating
>> trace-ticket)?
> If this is a bug, it's in your webapp: you generate too much content
> before you have any errors.
>
>> Do you know a workaround for this?
> Several options (I'm sure there are more):
>
> 1. Don't throw exceptions ;)
> 2. Increase your output buffer (negative performance considerations)
> 3. Buffer the *entire* response (negative performance considerations,
>     requires additional code)
>
> Honestly, #1 is the best policy IMO, since you really should have all
> of your dangerous activities out of the way before you start
> generating a response.
>

++.  All processing that is likely to generate an exception should be 
completed before any output is generated.

-Terence Bandoian

>> Currently I have workaround to have a special Filter checking for
>> Exceptions and including 200 status. The bad thing is that still
>> browser/users get returned 200 OK status, though error occurred ,
>> because resetting status isn't allowed.
> I don't know how you will correct malformed HTML in that case.
>
> - -chris
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
> Comment: GPGTools - http://gpgtools.org
> Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/
>
> iEYEARECAAYFAk99wzIACgkQ9CaO5/Lv0PArgQCgxCY0TAXJffHwEbfqFYSquGnZ
> q7oAni/aTXMjNnC/qbLxeQBixC1DbHW0
> =S5iP
> -----END PGP SIGNATURE-----
>

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233403-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 22:12:26 2012
Return-Path: <users-return-233403-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6C7F99B9F
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 22:12:26 +0000 (UTC)
Received: (qmail 39262 invoked by uid 500); 5 Apr 2012 22:12:23 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 39214 invoked by uid 500); 5 Apr 2012 22:12:23 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 39205 invoked by uid 99); 5 Apr 2012 22:12:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 22:12:23 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of 2ndgenfilms@gmail.com designates 209.85.160.173 as permitted sender)
Received: from [209.85.160.173] (HELO mail-gy0-f173.google.com) (209.85.160.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 22:12:14 +0000
Received: by ghrr14 with SMTP id r14so1307284ghr.18
        for <users@tomcat.apache.org>; Thu, 05 Apr 2012 15:11:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=3HcUJJkNllJAIhX3lOkXi7aqpLWZKaNc/Mdmzb1g1tE=;
        b=BOCEhNJQBbpBFYop74OPpofl29n9recasdb+eaNBW8mrGos4T77/ezGmcL2RtxeUCY
         OlycSDgGjBb+jCT/0JaqhxW8D5iBK/HUSjIFS0pcwK0hWjWyHuea90yOY5mCIUFk/ZlN
         atd1l4jVpVc1CktyrQ97NwwlKWhkkEsRJuLieH2+S8aJVbZJu6GQtSK1ct/SWLQryyWM
         u/bnBWwymc4C3IDYq3C/CThWV9s91jTSc+kEcTO9SHp4K/9QZ/UxDKMKUfOaGtIHzee0
         54ehrTCfoV0CpbEq91H7wwgN5eLVpmn3JHfjymJ+5i2Rhg3li/VKHarnRUclxNzS/Pdt
         Shjg==
MIME-Version: 1.0
Received: by 10.236.183.201 with SMTP id q49mr4191519yhm.114.1333663913732;
 Thu, 05 Apr 2012 15:11:53 -0700 (PDT)
Received: by 10.236.9.102 with HTTP; Thu, 5 Apr 2012 15:11:53 -0700 (PDT)
In-Reply-To: <CABzHfVm_SYf0d4px-X2E-uON55nr4PE9seRFkLhPjFp6BAwykw@mail.gmail.com>
References: <CACGXvK2gJGkwpMAjGn=PMDeQ__cD9Hc5fiWcLmvWbgPNtJQB8w@mail.gmail.com>
	<CABzHfVm_SYf0d4px-X2E-uON55nr4PE9seRFkLhPjFp6BAwykw@mail.gmail.com>
Date: Thu, 5 Apr 2012 17:11:53 -0500
Message-ID: <CACGXvK2t1=rfVrE1J0SXvwLjgVBUnmXb9y-L9ccva690Cxqv3Q@mail.gmail.com>
Subject: Re: request.login() not persistent
From: Jerry Malcolm <2ndgenfilms@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=14dae9d70e88d3e8e704bcf5d38f

--14dae9d70e88d3e8e704bcf5d38f
Content-Type: text/plain; charset=ISO-8859-1

Konstantin,

I was using:

<META HTTP-EQUIV="Refresh" CONTENT="0; URL=/userhome">

I changed it per your comment to:

<%  response.sendRedirect( response.encodeRedirectURL( "/userhome" )); %>

It's working now, but I have no clue what's going on.  I guess I should
just be happy and move on.  But I am apparently missing something major
here, and I want to understand this.  So please educate me a bit....  I
completely understand the session philosophy and how the logon state is
maintained in the session.  When it was failing the session id did not
change between the logon page and the redirect target page.  So I'm
assuming the session wasn't dropped.  It's like the logged on state was not
saved in the session object.

Questions:

1) The <meta... html tag simply tells the browser when it reads the page to
'try again' at the new URL.  In my mind that is no different from the user
responding to something on a page and submitting a request for a new page.
Why is the session logged-on state information somehow lost in that
interaction when it is maintained if the user just hits a button and goes
to another page?

2) I assume the response.sendRedirect( ) with the encoded URL sends one of
the 301 or 303 or something response codes back, right?  In either case,
<meta... or 30x response code, why is the session info lost in one and not
the other?

3) The biggest concern I have is that it worked for several months on one
machine with the <meta... tag coding.  If it worked, then it stopped, now
it works again, and I don't know why, my assumption is that it's going to
stop working again for me sometime in the future.  What could I have done
that made it work at one time on one machine and then stop?

Thanks for the education.

Jerry



On Thu, Apr 5, 2012 at 7:35 AM, Konstantin Kolinko
<knst.kolinko@gmail.com>wrote:

> 2012/4/5 Jerry Malcolm <2ndgenfilms@gmail.com>:
> > I am using TC 7.0 on a couple of servers.  I have id/pw fields and a
> > 'login' button at the top of all guest pages on my site.  If the user
> > clicks the login, it goes to a guest page that does the request.login()
> > method call and then redirects to a protected page.  If the login fails,
> > the normal j_security login form stuff kicks in on the protected page and
> > the user logs in the old way.
> >
> > OK, this worked on one server for several months.  It never worked on the
> > other server.  On that server, the request.login() succeeded according to
> > the logs.  But when it redirected to the protected page, the j_security
> > login form would appear.  I could log in from there and everything was
> > fine.
> > (...)
>
> How do you perform your redirect?
> Do you call  HttpServletResponse.encodeRedirectURL( ) to encode
> sessionid in the redirection URL?
>
> Form authentication relies on sessions.  If new request does not
> belong to the same session (the correct session id is not send by
> client either in URL or with a cookie) then it does not have
> authentication.
>
>
> Best regards,
> Konstantin Kolinko
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>
>

--14dae9d70e88d3e8e704bcf5d38f--

From users-return-233404-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 22:28:37 2012
Return-Path: <users-return-233404-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 50DEB9E1C
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 22:28:37 +0000 (UTC)
Received: (qmail 89956 invoked by uid 500); 5 Apr 2012 22:28:34 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 89731 invoked by uid 500); 5 Apr 2012 22:28:33 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 89721 invoked by uid 99); 5 Apr 2012 22:28:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 22:28:33 +0000
X-ASF-Spam-Status: No, hits=1.0 required=5.0
	tests=SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (nike.apache.org: transitioning domain of terence@tmbsw.com does not designate 208.82.204.51 as permitted sender)
Received: from [208.82.204.51] (HELO secure.builders-agent.com) (208.82.204.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 22:28:24 +0000
Received: from [192.168.1.8] (208-191-157-48.lightspeed.austtx.sbcglobal.net [208.191.157.48])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by tmbsw.com (Postfix) with ESMTP id 516FF1108002
	for <users@tomcat.apache.org>; Thu,  5 Apr 2012 17:28:03 -0500 (CDT)
Message-ID: <4F7E1C75.50908@tmbsw.com>
Date: Thu, 05 Apr 2012 17:28:05 -0500
From: "Terence M. Bandoian" <terence@tmbsw.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2.4) Gecko/20100608 Thunderbird/3.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Discrepancy between Tomcat's connection pool and tomcat's report
 on memory leaks
References: <4F7DC43B.3050108@pidster.com>
In-Reply-To: <4F7DC43B.3050108@pidster.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

  On 1:59 PM, Pid wrote:
>
> If you define the DataSource in GlobalNamingResources the pool will be
> started and stopped with the Tomcat lifecycle.
>
> Applications have their own lifecycle inside Tomcat, they are started
> after Tomcat (obviously) and stopped before Tomcat stops (also obviously).
>
> This is why the pool will not stop before your application, unless you
> do something manual to change that.
>
> If an application causes a thread to come into existence and allowing it
> to have the WebappClassLoader as its context classloader value, but does
> not shut it down, Tomcat complains.

This is similar to the problem with JDBC 4.0 drivers.  The API docs state:

"Existing programs which currently load JDBC drivers using 
Class.forName() will continue to work without modification."

However, if you continue reading and read closely, it becomes apparent 
that drivers are automatically registered with DriverManager when a 
database connection is created.  In essence, a reference to a driver is 
implicitly created and it is the responsibility of the application to 
remove the reference.  This doesn't seem like good design to me but no 
fault to Tomcat.

-Terence Bandoian


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233405-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 22:30:01 2012
Return-Path: <users-return-233405-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E275891A0
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 22:30:01 +0000 (UTC)
Received: (qmail 97845 invoked by uid 500); 5 Apr 2012 22:29:58 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 97661 invoked by uid 500); 5 Apr 2012 22:29:58 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 97652 invoked by uid 99); 5 Apr 2012 22:29:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 22:29:58 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.138.91.161] (HELO nm1-vm4.bullet.mail.ne1.yahoo.com) (98.138.91.161)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 05 Apr 2012 22:29:49 +0000
Received: from [98.138.90.57] by nm1.bullet.mail.ne1.yahoo.com with NNFMP; 05 Apr 2012 22:29:27 -0000
Received: from [98.138.226.162] by tm10.bullet.mail.ne1.yahoo.com with NNFMP; 05 Apr 2012 22:29:27 -0000
Received: from [127.0.0.1] by omp1063.mail.ne1.yahoo.com with NNFMP; 05 Apr 2012 22:29:27 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 743876.9353.bm@omp1063.mail.ne1.yahoo.com
Received: (qmail 67138 invoked by uid 60001); 5 Apr 2012 22:29:27 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1333664967; bh=mVlwfF0TfXhly7dfAnHlbs5rRt2LBeOP69BzUf5R/5I=; h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=XQByOIy2CadNoKGtDbl62kHoVWklNhPqxaqARolbHQdVjCTBccRxRyyIJuYDd3m6c8MGD0IS7DfJiMnKmKnpdc/kxJBhkoKEOEp6wJaxLopjNWZrd8xpCuFyFI4gnOBaen/IadKOdz3vx+gqncARyxFGsg+lbM6s6Iq+kUwjwy4=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=PL4YaJDoBbizCTHIGFqSr88OTXvLtMFgMAWwBvKcqiRrM25/kohcgtGB7T/TAg1sCcXR2J+ELxbnNdYeXquAQv27Q6OigeuYEXyMFjD1XYoepeRZBMUFxjwfQG1Jnf/FuUruTLhEaxpBznKGgxRCsBM5wAbVtIIZ1PUU0VVxpFE=;
X-YMail-OSG: rWRBK8MVM1m_ty.5o._ZKyGbEXCvc093fNQzi.N58.PsS6M
 tnd3L68HB22jkNZPPkXBTr_5EgaoUH2NuPg._boLHvNPYYJrRs10d1_0ZcrW
 G2vEf1T4o8lLG6vLt3AI0fbdWuefr3lOdF3IKcgHpEoR_gnyqw2h4SOiBVw9
 Ahh5.IUDjC3XDhnuhqJ7xeEW1iT165Dk8WgPg0O3KoNL10Pgh0b757NF4k6d
 GvT8Jcuy.K_7c9kAUvNrfNaZDL9kCm_A6XIh8r_CUvHsoCXkoDUrHYwYTqfH
 Gx9nLEA1QemHMYIDEBV9o72TUbVbRQDGWpPTL6HC8lnd4c7luKJeRzOc5fWI
 2IJfRDxlnCpzSZeRn.hcAzd0Zjpf_N7KUj9H93LRkDFhgSHEFQF.oxNI.BRo
 X.FbfwZ4ohcu29WDmyK3.DSwQ2jeDdMjSjaRVlSDXIRwqY25uWPrwp0dw8rv
 98.yF_yx6sN330ZBmfuisGYxuuIE-
Received: from [71.129.46.96] by web125506.mail.ne1.yahoo.com via HTTP; Thu, 05 Apr 2012 15:29:27 PDT
X-Mailer: YahooMailWebService/0.8.117.340979
References: <1333654834.93600.YahooMailNeo@web125503.mail.ne1.yahoo.com>
Message-ID: <1333664967.61959.YahooMailNeo@web125506.mail.ne1.yahoo.com>
Date: Thu, 5 Apr 2012 15:29:27 -0700 (PDT)
From: Mark Eggers <its_toasted@yahoo.com>
Reply-To: Mark Eggers <its_toasted@yahoo.com>
Subject: Re: Connector warning message with native libraries
To: Tomcat Users List <users@tomcat.apache.org>
In-Reply-To: <1333654834.93600.YahooMailNeo@web125503.mail.ne1.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Replying to my own question.=0A=0ASee =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D COMMENT =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=0A=0A----- Ori=
ginal Message -----=0A=0A> From: Mark Eggers <its_toasted@yahoo.com>=0A> To=
: Tomcat Users List <users@tomcat.apache.org>=0A> Cc: =0A> Sent: Thursday, =
April 5, 2012 12:40 PM=0A> Subject: Connector warning message with native l=
ibraries=0A> =0A> Folks:=0A> =0A> I'm seeing a warning in my logs when I us=
e request.secret for the AJP=0A> connector when I load the APR native libra=
ries. The warning is:=0A> =0A> WARNING: [SetAllPropertiesRule]{Server/Servi=
ce/Connector}=0A> =A0 Setting property 'request.secret' to 'somesillypasswo=
rd' did =0A> not find a=0A> =A0 matching property.=0A> =0A> I'm running a t=
hree node Tomcat cluster for testing with the following=0A> configuraiton:=
=0A> =0A> OS: =A0 =A0 Fedora 15 32 bit=0A> JVM: =A0 =A0java version "1.6.0_=
31"=0A> =A0 =A0 =A0 =A0 Java(TM) SE Runtime Environment (build 1.6.0_31-b04=
)=0A> =A0 =A0 =A0 =A0 Java HotSpot(TM) Client VM (build 20.6-b01, mixed mod=
e, sharing)=0A> Tomcat: 6.0.35=0A> Native: 1.1.22=0A> APR: =A0 =A0apr-util-=
devel-1.3.12-1.fc15.i686 (Fedora RPM)=0A> SSL: =A0 =A0openssl-devel-1.0.0g-=
1.fc15.i686 (Fedora RPM)=0A> =0A=0A=0A> Here's the snippet from my server.x=
ml.=0A> =0A> <!-- Define an AJP 1.3 Connector on port 8019 -->=0A> <Connect=
or port=3D"8019" protocol=3D"AJP/1.3" =0A> redirectPort=3D"8453"=0A> =A0 =
=A0 =A0 =A0request.secret=3D"somesillypassword"=0A> =A0 =A0 =A0 =A0connecti=
onTimeout=3D"600000"=0A> =A0 =A0 =A0 =A0URIEncoding=3D"UTF-8"/>=0A>=A0=0A=
=0A=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D COMMENT =3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=0A=0A=0AIt helps to read the fine javadoc for org.=
apache.coyote.ajp.AjpAprProtocol.=0A=0AIn there you will find a protected s=
tring called requiredSecret (much like Tomcat 7.x).=0A=0AIndeed, changing r=
equest.secret to requiredSecret when loading the native libraries eliminate=
s the warning.=0A=0AHowever, a cursory glance at the online documentation d=
idn't reveal any mention of this requirement for the AjpAprProtocol. It's n=
ot a problem for Tomcat 7.x obviously since this is the same attribute for =
both AprProtocol and AjpAprProtocol.=0A=0AHowever, for Tomcat 6 this presen=
ts an issue.=0A=0ASo a note when loading the native libraries, using AjpApr=
Protocol, and Tomcat 6 with the "secret" attribute:=0A=0AChange request.sec=
ret=3D"somesillypassword" on the AJP/1.3 connector definition to requiredSe=
cret=3D"somesillypassword".=0A=0A=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D CO=
MMENT =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=0A=0A=0ASorry for th=
e bandwidth.=0A=0A. . . . just my two cents.=0A/mde/=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233406-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 22:45:15 2012
Return-Path: <users-return-233406-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E829698FE
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 22:45:14 +0000 (UTC)
Received: (qmail 44044 invoked by uid 500); 5 Apr 2012 22:45:11 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 43993 invoked by uid 500); 5 Apr 2012 22:45:11 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 43984 invoked by uid 99); 5 Apr 2012 22:45:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 22:45:11 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of knst.kolinko@gmail.com designates 209.85.161.173 as permitted sender)
Received: from [209.85.161.173] (HELO mail-gx0-f173.google.com) (209.85.161.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 22:45:05 +0000
Received: by ggnp2 with SMTP id p2so1314554ggn.18
        for <users@tomcat.apache.org>; Thu, 05 Apr 2012 15:44:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=MSWQnzi+HMO3fNvRdeQQnjhBf9igN6GCIjWIQe5XUic=;
        b=j8HwQaUtyqhluEJUw2QJLD4TO9ERJyjtjeXyqOmZDdYKJgb5GWCU7XDD5H6sU+CylF
         lVOCSyZB5yyXArVS+8yKMkMD1IhpU3pAjMWLlKf/1UXaxFMC+N0We+KR+sXKN8sE1bIO
         owIgsKzA38lOAxeqds6p0ok8/jMCxM5jarRRw5Leq1J5qsDX1lkvNZ9zXM2hX0f9vzAz
         EnyL2WR0tSQYso673Qyop/642+6piy+Fgiz2UkPJUVhAaoJO7Y0O6sGcDdRY88n00gj4
         eEG2zLnDIKuwSp9OeRW5ji3KExMIkdRHfKhTEYea7ueU9qhL17GLIMiQgy8z/m6zFrLL
         Z3Cg==
MIME-Version: 1.0
Received: by 10.236.192.164 with SMTP id i24mr1267888yhn.9.1333665884419; Thu,
 05 Apr 2012 15:44:44 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Thu, 5 Apr 2012 15:44:44 -0700 (PDT)
In-Reply-To: <F4938ADA-CE56-43B9-A6BE-490EA47922CA@checkpoint.com>
References: <217DDBC2BB1E394CA9E7446337CBDEF20102DEDB4F4A@il-ex01.ad.checkpoint.com>
	<4F7C81BB.1040804@apache.org>
	<217DDBC2BB1E394CA9E7446337CBDEF20102DEDB4FA0@il-ex01.ad.checkpoint.com>
	<CABzHfV=hqDq_UmjVpO0moj7jSGRxp2BXgEFzTp7noS+iJaOVzw@mail.gmail.com>
	<F4938ADA-CE56-43B9-A6BE-490EA47922CA@checkpoint.com>
Date: Fri, 6 Apr 2012 02:44:44 +0400
Message-ID: <CABzHfV=hScWNMoP7T-BiTzNNXCeCob4QCpNyjhdfkgoiTkd9DQ@mail.gmail.com>
Subject: Re: Bug in Tomcat AJP Connector?
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

2012/4/6 Ofer Israeli <oferi@checkpoint.com>:
> Hi Konstantin,
>
> I agree regarding the OOM bringing TC to a state where it must be restore=
d, but my point remains: if there is code that handles catching this except=
ion and terminating the thread, why not terminate gracefully by closing the=
 listening socket before killing the thread?
>

1. In theory one can configure several acceptor threads. Though it is
not recommended.
So one has to check the count before closing the socket.

2. The socket will be closed when Tomcat shuts down.
Just closing the socket - what will it improve?

Anyway you will need to shutdown this Tomcat instance before you can
start the second one, because you'll need to free the shutdown port
etc.

> if there is code that handles catching this exception and terminating the=
 thread

3. There is no such special code. The thread terminates by itself,
because its run() throws an exception and thus finishes execution.

There is ThreadGroup.uncaughtException() method in JRE which by
default prints the exception to stdout.


If you consider to propose a patch - feel free to file an enhancement
request in Bugzilla and attach it.

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233407-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 23:33:04 2012
Return-Path: <users-return-233407-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A92899809
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 23:33:04 +0000 (UTC)
Received: (qmail 67927 invoked by uid 500); 5 Apr 2012 23:33:01 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 67880 invoked by uid 500); 5 Apr 2012 23:33:01 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 67871 invoked by uid 99); 5 Apr 2012 23:33:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 23:33:01 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pid@pidster.com designates 74.125.82.173 as permitted sender)
Received: from [74.125.82.173] (HELO mail-we0-f173.google.com) (74.125.82.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 23:32:54 +0000
Received: by werp12 with SMTP id p12so1569588wer.18
        for <users@tomcat.apache.org>; Thu, 05 Apr 2012 16:32:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type;
        bh=c7UJBf4b5Frnurb3rUAe5KdVpfI9JzRdgdIny9bK6UM=;
        b=Od7J36rh6h35d/tRKKhtOIGYeW412wUVLV1V9NkFfQQuB3qN0Q7UgX/ECf+/50kDZn
         Jgm/rTdzH9hFynx7P4weSuWhEVgETN1oJS8NjcJ0ZMF39/6J32MRD63kzzR525hOo2pp
         OfWewuTRWZF82xBNCkTF87jrEJfLb9g005MXU=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type:x-gm-message-state;
        bh=c7UJBf4b5Frnurb3rUAe5KdVpfI9JzRdgdIny9bK6UM=;
        b=idDZb+p7OLCo1zxEbXfNkdm0/WzFsd+SXpJxZ9nXXB9BUICbXMd1Nu8RmxgHSeqhCM
         riCudbbUiSdW7UTu5HEzoPEwbGkzj2e3+9xdjB45z9XKI29x94x7+s9Em8zeYBPZPbc6
         CDWJCXf30d6hynYda4eFlGSL5P9gnBsHqMW9mg6wZMrxyODvOepozAPHvjQCiCgd9x+w
         Vu4uoIfKWB0uu/I3o0PZ58Kx3rJ1LuKHrUDhn24MuEFcKVPUadmLmRJ0z8i3IEMEcR10
         aYO+06lcdvfzzyE8lvpzyjrgoQ3LU+dfzYNxppeO2byzunh1hUHo/6QOmTPqAg0F3qg5
         1zfg==
Received: by 10.180.105.69 with SMTP id gk5mr17446042wib.3.1333668753294;
        Thu, 05 Apr 2012 16:32:33 -0700 (PDT)
Received: from Asura.local (cpc10-lewi14-2-0-cust355.2-4.cable.virginmedia.com. [82.4.249.100])
        by mx.google.com with ESMTPS id o2sm2106305wiv.11.2012.04.05.16.32.31
        (version=SSLv3 cipher=OTHER);
        Thu, 05 Apr 2012 16:32:32 -0700 (PDT)
Message-ID: <4F7E2B75.6080501@pidster.com>
Date: Fri, 06 Apr 2012 00:32:05 +0100
From: Pid <pid@pidster.com>
Organization: Pidster Inc
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: SEVERE: Unable to start cluster.
References: <zarafa.4f7c651f.1095.7ca7df39672deef6@zarafix.ordix.de> <CABKrPsNQN_2KjH_PLfE49aoXjqgc451yFZFs-a0e0g9S3hMLpw@mail.gmail.com> <1333572948.35940.YahooMailNeo@web125504.mail.ne1.yahoo.com> <CABKrPsN0KV_Wox_0JuzMqhLfzZ9r7Jsg5-5OuWJbeFHfkxNRNQ@mail.gmail.com> <4F7DC767.3040108@pidster.com> <CABKrPsMKvkZphpL+XRB=Y0B54_AM7+nTYUW5Uq3QiXUSSLBJaQ@mail.gmail.com>
In-Reply-To: <CABKrPsMKvkZphpL+XRB=Y0B54_AM7+nTYUW5Uq3QiXUSSLBJaQ@mail.gmail.com>
X-Enigmail-Version: 1.4
OpenPGP: id=62590808
Content-Type: multipart/signed; micalg=pgp-sha512;
 protocol="application/pgp-signature";
 boundary="------------enigA60CEFB2366B7BBB407E33E1"
X-Gm-Message-State: ALoCoQm/z5VOGuzdGv8YzX91HhJ012XChiRjNCrIYJHmVbvUUqvh4Q1BcKxXBzZrV8PvvlOHrSGh
X-Virus-Checked: Checked by ClamAV on apache.org

--------------enigA60CEFB2366B7BBB407E33E1
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

On 05/04/2012 18:28, Dhaval Jaiswal wrote:
> pfa server.xml

Sorry, not going to wade through all of those comments until you remove
them from the XML.


p


--=20

[key:62590808]


--------------enigA60CEFB2366B7BBB407E33E1
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.18 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iQIcBAEBCgAGBQJPfiuQAAoJEGoM2OGpOvr9GvEQAK108PHVJ/HahgoJVwpD1cGd
SNgm9oN4EjId1SXLG0Z+k9Otp+32hT+3L6eoWa/4XPyy++LRToGavvTPOQqYN/Ou
G5dkix6ov+mxvBWwNW1Zw1jr1sl39hkBl1RyMWM7OD96GhTGuEwL1hkAlXCpAWJ2
ozruSdXFKznPy6cX1LOuVQZ8PupKB5rQ31jwOvH5vqLvXGx7nyfj0pYzdNZXPCdB
by2KzHLEA+aIpeoGSlh+LVVAk7y8gvZ1+H25g2Ieroeual8xM7Vv631eiHQpuW0d
CLJ8Bh14HvQub+bXe2tOUguEiAlqpa6NP8xW3LTVRSHFO8WL1N+ByGQ7iJ+45Nam
LAA1udzhRTEjI3bZsnHWA+ynsVegYBYPvdqjE1kMkiN8lpzMrr/10l08o4CUchaH
52ylDo8pmT454X6OlqF/pBizT2xYWHncLan0ZxSwCORyWtchx2kSnO9AfjLzb88J
yrErPHLVtiHfu+ZIBb3WTDP8wWw2qhnY66J2v8HJ3KA3dDfoXOJ1KOMvg3ZJUzzc
gQb/PA35XzhzmGfzkJz7xpdzDC0rjZh5MZh/VCPa0Mx2GC3oj9Va4sWUQDQk5lkq
gZjRFmhUdfrb0bM2O6+zngV0eqS/TXkCqkpTNJ9vXfXZQeZm1VPagOPDj/CTxUUF
KkznNpIM6N2DOfaQmkdk
=UzTE
-----END PGP SIGNATURE-----

--------------enigA60CEFB2366B7BBB407E33E1--

From users-return-233408-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 23:37:01 2012
Return-Path: <users-return-233408-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DC5369875
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 23:37:00 +0000 (UTC)
Received: (qmail 76934 invoked by uid 500); 5 Apr 2012 23:36:57 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 76882 invoked by uid 500); 5 Apr 2012 23:36:57 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 76872 invoked by uid 99); 5 Apr 2012 23:36:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 23:36:57 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pid@pidster.com designates 74.125.82.43 as permitted sender)
Received: from [74.125.82.43] (HELO mail-wg0-f43.google.com) (74.125.82.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 23:36:49 +0000
Received: by wgbdr12 with SMTP id dr12so1494162wgb.0
        for <users@tomcat.apache.org>; Thu, 05 Apr 2012 16:36:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type;
        bh=zaimFtxbbc5XutmJErkzfinG+g62Z/i4w2I87VeAweo=;
        b=Yc5d9BtCoKkxb0PYOngpo9E0vQVhJ3JBiWsV/LJGe6eHa1jgcU2wG9oTFl8/ENN0o2
         7N7LyUU3lPWvszHLHCh9aIw4Lj8JiNKoG/1Bwc5EOHClgXN/2oAHSas5MJGyGuDpwpKM
         j1jin2z9Ku/SPFjBpY5ReBNzeBTA464UuPt9Y=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type:x-gm-message-state;
        bh=zaimFtxbbc5XutmJErkzfinG+g62Z/i4w2I87VeAweo=;
        b=T84z1+v03Saf6ZvDs9jWKJni4Rn8jo7aOSgIK0T7ZabJVMBNOCNJFxJpeIgq4U5u0R
         ufaa2SxBHtMphLFsAGTnk5xik6SguBwOP1P7Ekm43EsutAbfEZ1TBNDeG11Hdm7dDMiU
         uHDWnEs3D4uo3+s7TNp9udZDdYZzKVEz+GQbg96h1cK4sgi69wCkik67SWzLHa+VjbHX
         Apxa7cvaKnGUrxLAXHW+Jr0Y0rLhsDM4x9sMFYNBYbU/ykHS0wC//SFuniQfPej4GJXP
         bGrGSrL54Dm8G3vGuOsqU1mZHEBn1myk0KeDcz4IkbTzUSdUo2A8xrJEla3Nx0P74G+s
         cYow==
Received: by 10.216.137.74 with SMTP id x52mr2742087wei.77.1333668989430;
        Thu, 05 Apr 2012 16:36:29 -0700 (PDT)
Received: from Asura.local (cpc10-lewi14-2-0-cust355.2-4.cable.virginmedia.com. [82.4.249.100])
        by mx.google.com with ESMTPS id bx13sm1353842wib.10.2012.04.05.16.36.13
        (version=SSLv3 cipher=OTHER);
        Thu, 05 Apr 2012 16:36:27 -0700 (PDT)
Message-ID: <4F7E2C69.20100@pidster.com>
Date: Fri, 06 Apr 2012 00:36:09 +0100
From: Pid <pid@pidster.com>
Organization: Pidster Inc
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: SEVERE: Unable to start cluster.
References: <zarafa.4f7c651f.1095.7ca7df39672deef6@zarafix.ordix.de> <CABKrPsNQN_2KjH_PLfE49aoXjqgc451yFZFs-a0e0g9S3hMLpw@mail.gmail.com> <1333572948.35940.YahooMailNeo@web125504.mail.ne1.yahoo.com> <CABKrPsN0KV_Wox_0JuzMqhLfzZ9r7Jsg5-5OuWJbeFHfkxNRNQ@mail.gmail.com> <4F7DC767.3040108@pidster.com> <CABKrPsMKvkZphpL+XRB=Y0B54_AM7+nTYUW5Uq3QiXUSSLBJaQ@mail.gmail.com> <1333659691.97609.YahooMailNeo@web125501.mail.ne1.yahoo.com>
In-Reply-To: <1333659691.97609.YahooMailNeo@web125501.mail.ne1.yahoo.com>
X-Enigmail-Version: 1.4
OpenPGP: id=62590808
Content-Type: multipart/signed; micalg=pgp-sha512;
 protocol="application/pgp-signature";
 boundary="------------enig79B2EE384D19FD43028A16E9"
X-Gm-Message-State: ALoCoQmQpeTWWJI9iKkOh7oRenDFWH4IVCAXb0XvJJ3knJfszn0IpzMotB+UHdAcMOQ1hkt3qrFb

--------------enig79B2EE384D19FD43028A16E9
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

On 05/04/2012 22:01, Mark Eggers wrote:
> Response at the bottom:
>=20
> /mde/
>=20
>> ________________________________
>> From: Dhaval Jaiswal <dhaval.jaiswal@via.com>
>> To: Tomcat Users List <users@tomcat.apache.org>=20
>> Sent: Thursday, April 5, 2012 10:28 AM
>> Subject: Re: SEVERE: Unable to start cluster.
>>
>>
>> pfa server.xml=20
>>
>> The same i am using for all the 10 tomcats.=20
>>
>>
>>
>>
>> On Thu, Apr 5, 2012 at 9:55 PM, Pid <pid@pidster.com> wrote:
>>
>> On 05/04/2012 15:13, Dhaval Jaiswal wrote:
>>>> I have tested the below cluster manager; as per the instruction i ha=
ve
>>>> changed. However, when we try to deploy the apps on tomcat it was
>>>> throwing error that
>>>>
>>>> WARNING: Unable to send map start message.
>>>> Apr 5, 2012 1:37:12 PM org.apache.catalina.ha.session.BackupManager =
start
>>>> SEVERE: Unable to start BackupManager
>>>> java.lang.RuntimeException: Unable to start replicated map.
>>>>        at
>>>> org.apache.catalina.tribes.tipis.AbstractReplicatedMap.init(Abstract=
ReplicatedMap.java:230)
>>>>
>>>> Failed to start BackupManager:  java.lang.IllegalArgumentException:
>>>> Listener already
>>>> exists:{}[org.apache.catalina.tribes.tipis.LazyReplicatedMap]
>>>>
>>>>
>>>>
>>>> i am using below server.xml for all the 10 tomcats. Do i have to cha=
nge
>>>> it for every tomcat. How would i fix it.
>>>>
>>>>
>>>>
>>>> <Cluster className=3D"org.apache.catalina.ha.tcp.SimpleTcpCluster"
>>>> channelSendOptions=3D"6">
>>>>         <Manager
>>>> className=3D"org.apache.catalina.ha.session.BackupManager"
>>>> expireSessionsOnShutdown=3D"false"
>>>>                    notifyListenersOnReplication=3D"true" mapSendOpti=
ons=3D"6"/>
>>>>
>>>>             <Channel
>>>> className=3D"org.apache.catalina.tribes.group.GroupChannel">
>>>>              <Membership
>>>> className=3D"org.apache.catalina.tribes.membership.McastService"
>>>>                         address=3D"228.0.0.4"
>>>>                         port=3D"45563"
>>>>                         frequency=3D"500"
>>>>                         dropTime=3D"30000"/>
>>>>              <Receiver
>>>> className=3D"org.apache.catalina.tribes.transport.nio.NioReceiver"
>>>>                       address=3D"auto"
>>>>                       port=3D"4000"
>>>>                       selectorTimeout=3D"5000"
>>>>                       timeout=3D"60000"
>>>>                       maxThreads=3D"6"/>
>>>>
>>>>              <Sender
>>>> className=3D"org.apache.catalina.tribes.transport.ReplicationTransmi=
tter">
>>>>                   <Transport
>>>> className=3D"org.apache.catalina.tribes.transport.nio.PooledParallel=
Sender" timeout=3D"60000"
>>>> keepAliveCount=3D"0"/>
>>>>              </Sender>
>>>>              <Interceptor
>>>> className=3D"org.apache.catalina.tribes.group.interceptors.TcpFailur=
eDetector"/>
>>>>              <Interceptor
>>>> className=3D"org.apache.catalina.tribes.group.interceptors.MessageDi=
spatch15Interceptor"/>
>>>>             <!--  <Interceptor
>>>> className=3D"org.apache.catalina.tribes.group.interceptors.Throughpu=
tInterceptor"/>
>>>> -->
>>>>            </Channel>
>>>>          <Valve className=3D"org.apache.catalina.ha.tcp.ReplicationV=
alve"
>>>>
>>>> filter=3D".*\.gif|.*\.js|.*\.jpeg|.*\.jpg|.*\.png|.*\.htm|.*\.html|.=
*\.css|.*\.txt"/>
>>>>          <Valve
>>>> className=3D"org.apache.catalina.ha.session.JvmRouteBinderValve"/>
>>>>        <ClusterListener
>>>> className=3D"org.apache.catalina.ha.session.ClusterSessionListener"/=
>
>>>>        <ClusterListener
>>>> className=3D"org.apache.catalina.ha.session.JvmRouteSessionIDBinderL=
istener"/>
>>>>      </Cluster>
>>>
>>>
>>> Wow.  That's pretty neat, I've never seen Tomcat start up with just t=
he
>>> cluster definition.
>>>
>>> How about you:
>>>
>>> 1) remove all comments
>>> 2) remove all passwords
>>> 3) post the whole server.xml inline in your next reply
>=20
>=20
> Dhaval,
>=20
>=20
> Please try to avoid posting in HTML. The font is sometimes difficult to=
 read.
>=20
> Please don't cc me. I get the same message on the list, and with about =
200 mail messages per day on this account I might overlook stuff if I get=
 a lot of duplicate messages.
>=20
> Please post stuff inline and not as attachments. While I got the attach=
ed server.xml file, the list generally strips attachments.
>=20
> All that being said, here are my comments:
>=20
> <!-- From your server.xml -->
> <Listener
>   className=3D"org.apache.catalina.core.AprLifecycleListener" SSLEngine=
=3D"on" />
> <Listener
>   className=3D"org.apache.catalina.core.JasperListener" />
> <Listener
>   className=3D"org.apache.catalina.mbeans.ServerLifecycleListener" />
> <Listener
>   className=3D"org.apache.catalina.mbeans.GlobalResourcesLifecycleListe=
ner" />
>=20
> So you've removed the memory leak prevention listener from your
> server.xml? Is there any reason why you've done that?
>=20
> <!-- from your server.xml -->
> <Connector port=3D"8080" protocol=3D"HTTP/1.1"=20
>            connectionTimeout=3D"20000"=20
>            redirectPort=3D"8443" />
>=20
> <Connector port=3D"8009"
>            protocol=3D"AJP/1.3"
>            redirectPort=3D"8443"
>            backlog=3D"100"
>            maxThreads=3D"40000" />
>=20
> No URIEncoding=3D"UTF-8" on your connectors? I checked your web site an=
d
> there doesn't seem to be any characters that would be
> impacted. However, I was thinking that setting UTF-8 on all connectors
> is in general a good thing.
>=20
> 40000 threads for the AJP connector with only a backlog of 100? I hope =
that
>=20
> a) your Apache HTTPD server is configured appropriately
> b) you can have this many file descriptors open
>=20
> <!-- from your server.xml -->
> <Membership
>             className=3D"org.apache.catalina.tribes.membership.McastSer=
vice"
>             address=3D"228.0.0.4"
>             port=3D"45564"
>             frequency=3D"500"
>             dropTime=3D"30000"/>
>=20
> You said that you use this same server.xml for all 10
> Tomcats. However, in a previous message you said you were trying to
> cluster 7 Tomcats (192.168.3.5 to 192.168.3.11). If you use the same
> multicast address and port for all 10 Tomcats, then all 10 Tomcats
> will be a part of the cluster.
>=20
>> I have tested the below cluster manager; as per the instruction i have=

>=20
>> changed. However, when we try to deploy the apps on tomcat it was
>> throwing error that=20
>=20
> Does this mean that the cluster actually starts without your web
> application? If you've modified the logging.properties file, what does
> the cluster logging file say? Please post the information inline as the=

> mailing list tends to strip attachments.
>=20
> The default dropTime is 3000 ms (3 seconds). Is your network busy
>=20
> enough so that a 30 second drop time is reasonable? If it is, then
> maybe a better networking infrastructure is in order.
>=20
> <!-- from your server.xml -->
> <Sender
>   className=3D"org.apache.catalina.tribes.transport.ReplicationTransmit=
ter">
>   <Transport
>   className=3D"org.apache.catalina.tribes.transport.nio.PooledParallelS=
ender"
>              timeout=3D"60000"
>              keepAliveCount=3D"0"/>
> </Sender>
>=20
> keepAliveCount=3D"0" ?
>=20
> From the documentation:
>=20
> The number of requests that can go through the socket before the
> socket is closed, and reopened for the next request. The default value
> is -1, which is unlimited.
>=20
> So you're saying here that NO requests can go through the socket
> before the socket is closed? At the best interpretation, you'll get
> one message through the socket, then the socket closes and
> reopens. This doesn't sound very performant.
>=20
> Other than that, your clustering setup does not look a lot different
> than mine. I place my cluster in the <Host> element since I am
> experimenting with farm deployment. Mine works even when changing from
> the DeltaManager (only three node cluster) to the BackupManager.
>=20
> What is in your application's context.xml and web.xml files? Please
> post both (inline - the list tends to strip attachments), with
> comments and sensitive information removed.
>=20
> I suspect that you have a listener defined in either context.xml or
> web.xml.
>=20
> All you really need to do to get session clustering to work is:
>=20
> 1. <distributable/> in web.xml
> 2. Make sure that all session objects are serializalble.
>=20
> Actually there is a bit more, but the above are the basics.
>=20
> . . . . just my two cents.
> /mde/

+1 to all that.


p




--=20

[key:62590808]


--------------enig79B2EE384D19FD43028A16E9
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.18 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iQIcBAEBCgAGBQJPfixpAAoJEGoM2OGpOvr9GCIQAJC5da/4Vusdlcek+izkTlIY
VkFbPMDkPhNGfRFiwoIB9cse5sXEuBy+oXlbaRDh0K4GwCTa4qNBs9IaZU3wJaCS
9Og0Df1g41euPINP8q7kO8RL3qr6bEr3xEcTWz0plg3ArLnJ7SPsC0iYBMUMImaZ
T/QWgKfikUIm9oq5Hr6XGHkpSdlaIgft40wzaSEw3vbgAAsjP88GaHcWDUqSo9lm
YUDc5yKpv7lRjHtIzSNpupxhafWabNY0HuFmP4DDosWPZDiqJF8WWab9TwyF/uLp
5K88VqwUp0qW9HGqgolTQl1Qsj+XS9oKfuF+bcbze2IReRMqP9J0j+4VCYD2VpG6
nnahha21pP25MbHWsSTfR7vMlW0aD7jtsgQbgAiyXBqfOr9rIFuOJWaBZf3OTqRt
RCLuzfw2effewoaFAXtWXyPFA9tK9meHlYPBO+nGHh1lTNlDFo6S/R25j58wW9AL
kl8vUayMcMz3b460VwtzvhJlXr/Webqb60xmA9sEipISu7ImeoFbMvZdUGN/Zgm5
XL+/bvoT1K/AbxNvazNIxrQ4tEUOFCqERidEKDeCyo/2kyVvWCev/0lWsg0j1+Se
TzlDE515WVKEm0U367r2Yg1MBecdW2zxX5Kg7aXiYVOybk/J5dMseo9pfH1j2cN1
Wgt6/hYTlXF/Z+rz3wUO
=hrzT
-----END PGP SIGNATURE-----

--------------enig79B2EE384D19FD43028A16E9--

From users-return-233409-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr  5 23:45:48 2012
Return-Path: <users-return-233409-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 972709B27
	for <apmail-tomcat-users-archive@www.apache.org>; Thu,  5 Apr 2012 23:45:48 +0000 (UTC)
Received: (qmail 254 invoked by uid 500); 5 Apr 2012 23:45:45 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 182 invoked by uid 500); 5 Apr 2012 23:45:45 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 173 invoked by uid 99); 5 Apr 2012 23:45:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 23:45:45 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pid@pidster.com designates 74.125.82.41 as permitted sender)
Received: from [74.125.82.41] (HELO mail-wg0-f41.google.com) (74.125.82.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 Apr 2012 23:45:38 +0000
Received: by wgbds1 with SMTP id ds1so180608wgb.0
        for <users@tomcat.apache.org>; Thu, 05 Apr 2012 16:45:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type;
        bh=xE5ICMIGbYEBJYCotLPr51xMKj9uTTYmx7ioN08nDcc=;
        b=ttFY+RQ8cU23tXgwxFq6l/nGUJ/06WT3ZWY5ld4tjRzVkOmvtppYeXQgSDPU49hcbD
         ncUoi31lCG/uAhUJ3/JZOwh7MUYCLLOfRgDHgoqPwc+xrig6cdA/dTBIXGduigTFCA9g
         aWBrqs/4ma8ddHB2uKSOlziwPqpU1yxA0IeA8=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type:x-gm-message-state;
        bh=xE5ICMIGbYEBJYCotLPr51xMKj9uTTYmx7ioN08nDcc=;
        b=BJpLfDb7/7LwlzZ+xIBjkeWWLgIFPN8jwJ5vLBBmuVFkafkgfpX3G2tfkkHUgbRKBS
         9IfFTDEl/KuJXB9I1EfdG7xEEHlmNV4Q5ouM0BkophlQlxOiBWsF+4nrNBBI91EUGlUh
         IQ4w1i8Wxn7SudPCIQtu42PZQD/yNZmYZcjMSQXPmDfa0wNvFCdBkOFpkh/X70Fd4ulb
         GHaEEYDhcaM/XicUc5uCa3hMNNbkZbmtCGHsjRuFdg2XlZVpTLy2FdDBI/2itLeh5Xp2
         OvLC6AxWOzDZQG1W1P4XM4ogQpu2GTRc6k4scPFpML1YJvuN6mFyDhQZSFWg6/0KNAWg
         Dcyg==
Received: by 10.180.91.165 with SMTP id cf5mr7425700wib.2.1333669517907;
        Thu, 05 Apr 2012 16:45:17 -0700 (PDT)
Received: from Asura.local (cpc10-lewi14-2-0-cust355.2-4.cable.virginmedia.com. [82.4.249.100])
        by mx.google.com with ESMTPS id j3sm2314570wiw.1.2012.04.05.16.45.14
        (version=SSLv3 cipher=OTHER);
        Thu, 05 Apr 2012 16:45:16 -0700 (PDT)
Message-ID: <4F7E2E89.5040805@pidster.com>
Date: Fri, 06 Apr 2012 00:45:13 +0100
From: Pid <pid@pidster.com>
Organization: Pidster Inc
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Bug in Tomcat AJP Connector?
References: <217DDBC2BB1E394CA9E7446337CBDEF20102DEDB4F4A@il-ex01.ad.checkpoint.com> <4F7C81BB.1040804@apache.org> <217DDBC2BB1E394CA9E7446337CBDEF20102DEDB4FA0@il-ex01.ad.checkpoint.com> <CABzHfV=hqDq_UmjVpO0moj7jSGRxp2BXgEFzTp7noS+iJaOVzw@mail.gmail.com> <F4938ADA-CE56-43B9-A6BE-490EA47922CA@checkpoint.com>
In-Reply-To: <F4938ADA-CE56-43B9-A6BE-490EA47922CA@checkpoint.com>
X-Enigmail-Version: 1.4
OpenPGP: id=62590808
Content-Type: multipart/signed; micalg=pgp-sha512;
 protocol="application/pgp-signature";
 boundary="------------enig5DC86CB09872C5ABABD67B60"
X-Gm-Message-State: ALoCoQmu1xS7xuS25+TjKI80YJrt5dTiIGtx44KavSw0wjRnXt2VTlzyqN+KZrUkhhNZ2qNHq3Od

--------------enig5DC86CB09872C5ABABD67B60
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On 05/04/2012 22:17, Ofer Israeli wrote:
> Y
>=20
> On 5 =D7=91=D7=90=D7=A4=D7=A8 2012, at 18:58, "Konstantin Kolinko" <kns=
t.kolinko@gmail.com> wrote:
>=20
>> 2012/4/5 Ofer Israeli <oferi@checkpoint.com>:
>>> Mark Thomas wrote:
>>>> On 04/04/2012 17:02, Ofer Israeli wrote:
>>>>
>>>> Once you have an OOME all bets are off. The JVM needs to be restarte=
d.
>>>> There is no guarantee of reliable operation after an OOME.
>>>>
>>>> Mark
>>>
>>> Hi Mark,
>>> I agree that there in such a situation the JVM should be restarted, b=
ut it isn't restarted by Tomcat.  On the other hand, Tomcat does take som=
e precautious actions and kills the accepting thread, but in such a case =
it should also close the socket that thread is listening on otherwise it =
is leaving garbage around after the thread's death.
>>> Do you see any reason as not to close the listening socket?
>>>
>>
>> 1. Tomcat does not start JVM  thus it cannot restart it.
>>
>> You need some external tool or script or admin to perform monitoring
>> and (re)starts.
>>
>> 2. OOM can happen at a random place. Once it happens, it is likely
>> that other places will also start to fail randomly. It is also likely
>> that your attempts to recover will fail as well.
>>
>> Mark already mentioned it: "all bets are off".
>>
>> Best regards,
>> Konstantin Kolinko
>>
> Hi Konstantin,
>=20
> I agree regarding the OOM bringing TC to a state where it must be resto=
red, but my point remains: if there is code that handles catching this ex=
ception and terminating the thread, why not terminate gracefully by closi=
ng the listening socket before killing the thread?

And your point has been answered.  After an OOM the JVM is in an
unknown, unsafe state so a restart MUST occur to restore service.

Closing a socket gracefully after an OOM is a bit like trying to shut
one of the portholes on the Titanic, shortly after hearing a large
crashing sound.


There's only one place I know of where Tomcat attempts to interact with
OOM conditions and this is not one of them, so I don't believe it's safe
to say that Tomcat is deliberately handling this exception.

NB an OOM is an Error, not an Exception - it is a subclass of
VirtualMachineError, which is thrown to indicate that the Java Virtual
Machine is broken or has run out of resources necessary for it to
continue operating.

An Error is a subclass of Throwable that indicates serious problems that
a reasonable application should not try to catch.
</end-quote>

If anything, the locations where Tomcat catches a Throwable should be
modified so it does *not* catch Errors, rather than continuing to do so
and then attempting a trivial tidy-up.


p


--=20

[key:62590808]


--------------enig5DC86CB09872C5ABABD67B60
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.18 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iQIcBAEBCgAGBQJPfi6MAAoJEGoM2OGpOvr9IugP/jBVPCETlFXrmZt0zf4tZqJc
3KaKu6IM9nbERgNPTwZ5xYULNqTrE5kpzFN2b//eNgoixS0U9Q33jMi5f12w29eh
ZX9TqOj6hZ2PwkC5hkaCu1qYHmiUr+bO5WUJkJ7+GjvI8aeYvERxx6BndXpdOFWe
axhb2Hagm3gItu3eSHn3qBQcfuRuO7/CrI91JYSuit+Nnkq/egZ5k+PKajTZfvdT
Epz31Bw9DNFI1j5+0S/B6i0NjM3lCY/AAVizzZos4QVsc8iQYE54YBTsyEH1nhPN
D6YHe49KDRnoTzsKsIOkYea2iyj2Aqu7VRL6swTF7ZaHwdBSzCgvto7/kUTH0UoA
16kawqetqTL0QS55do/Tra0ufH42BsdDacJjiv5iz5YBEyz4ILlTCJ0MaI1q0H+g
r7wb9t0u6fOBeyzZavuDE4/5/aWV1K3SmxnOCq9L0Ktw5bhpdI/YNKRqaab7Qc09
ijtMh+o/gu6iYKZdoxlSpxLGuEZh9tFcvOhlVzQegF8rBSXEkjUPoFsoiV/5KEgc
rpfgMhgWd4sAdaxd3X77wn4mssmZb2WwaySgwsRh+MFQspMqX7Mm8QqR7mQYZM1V
VqodAmlANiVOJDokBIrVZL7QqUkttcA+I1iKsXM9N0mMl46zrJvSRUfWfLQUTInu
OKhOfk811HHQ5QB2xqUj
=qzpP
-----END PGP SIGNATURE-----

--------------enig5DC86CB09872C5ABABD67B60--

From users-return-233410-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr  6 00:09:14 2012
Return-Path: <users-return-233410-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E77D0931F
	for <apmail-tomcat-users-archive@www.apache.org>; Fri,  6 Apr 2012 00:09:13 +0000 (UTC)
Received: (qmail 72809 invoked by uid 500); 6 Apr 2012 00:09:10 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 72594 invoked by uid 500); 6 Apr 2012 00:09:10 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 72582 invoked by uid 99); 6 Apr 2012 00:09:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 00:09:10 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of knst.kolinko@gmail.com designates 74.125.82.173 as permitted sender)
Received: from [74.125.82.173] (HELO mail-we0-f173.google.com) (74.125.82.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 00:09:03 +0000
Received: by werp12 with SMTP id p12so1582994wer.18
        for <users@tomcat.apache.org>; Thu, 05 Apr 2012 17:08:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=ly5iXmzPWKtul5CcvVUry2YXCcfC4OYtDo5UU3n0vDs=;
        b=lCUltEf/yjeZcGXGmGS4C5Js1M/bvIGPBORdVG6ullcOCJWV1nKKPg7tSMB09HMMKJ
         q2DwXQQMwLQUvvtJ5ubJOKoNzaZQgArSKUvL+YBcyZlfVs965g99R0KjkHI3aMxbkj9L
         1vc8XhQ4vsvufwS994guhuwXdIDFSpBMNoSfyfC/gSAvZ+syvJ9S9BGSjhIhZr21ERbe
         g6TaN5dwzaTVestr7PSPpSAnN1S6PoDJwZMZsisUTfNeprpGxTziiRON1OMQDD+ONmkn
         onWxU2rJB1XpJ/0Gb+yfCvMZJmbtK6i1p5gy6BJVwzUz6sE2YPQA4yQKoFowuTUhOiGL
         zFnA==
MIME-Version: 1.0
Received: by 10.180.96.168 with SMTP id dt8mr7311325wib.18.1333670921868; Thu,
 05 Apr 2012 17:08:41 -0700 (PDT)
Received: by 10.216.153.130 with HTTP; Thu, 5 Apr 2012 17:08:41 -0700 (PDT)
In-Reply-To: <CAArU9ia4DHPty2MKvbUW8qxCLg-+0Px68-Ve6FOrhVthxY=ypg@mail.gmail.com>
References: <CAArU9ia4DHPty2MKvbUW8qxCLg-+0Px68-Ve6FOrhVthxY=ypg@mail.gmail.com>
Date: Fri, 6 Apr 2012 04:08:41 +0400
Message-ID: <CABzHfV=3-LM0=aNFtX7QLizqXOkEg+QuoFft61nR+PkAuL4Grw@mail.gmail.com>
Subject: Re: 7.0 doc 404
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

2012/4/6 Jesse Farinacci <jieryn@gmail.com>:
> http://tomcat.apache.org/tomcat-7.0-doc/web-socket-howto.html
>

It is fixed now. Thank you.

(The live site updates itself once an hour, so you'll have to wait a while).

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233411-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr  6 02:11:36 2012
Return-Path: <users-return-233411-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EB51D9326
	for <apmail-tomcat-users-archive@www.apache.org>; Fri,  6 Apr 2012 02:11:35 +0000 (UTC)
Received: (qmail 41042 invoked by uid 500); 6 Apr 2012 02:11:32 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 40826 invoked by uid 500); 6 Apr 2012 02:11:32 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 40817 invoked by uid 99); 6 Apr 2012 02:11:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 02:11:32 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [216.82.241.196] (HELO mail46.messagelabs.com) (216.82.241.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 02:11:21 +0000
X-Env-Sender: Chuck.Caldarale@unisys.com
X-Msg-Ref: server-8.tower-46.messagelabs.com!1333678258!18771075!6
X-Originating-IP: [192.61.61.104]
X-StarScan-Version: 6.5.5; banners=-,-,-
X-VirusChecked: Checked
Received: (qmail 16314 invoked from network); 6 Apr 2012 02:10:59 -0000
Received: from unknown (HELO USEA-NAEDGE1.unisys.com) (192.61.61.104)
  by server-8.tower-46.messagelabs.com with RC4-SHA encrypted SMTP; 6 Apr 2012 02:10:59 -0000
Received: from usea-nahubcas2.na.uis.unisys.com (129.224.76.115) by
 USEA-NAEDGE1.unisys.com (192.61.61.104) with Microsoft SMTP Server (TLS) id
 8.3.83.0; Thu, 5 Apr 2012 21:10:26 -0500
Received: from USEA-EXCH8.na.uis.unisys.com ([129.224.76.41]) by
 usea-nahubcas2.na.uis.unisys.com ([129.224.76.115]) with mapi; Thu, 5 Apr
 2012 21:10:26 -0500
From: "Caldarale, Charles R" <Chuck.Caldarale@unisys.com>
To: Tomcat Users List <users@tomcat.apache.org>
Date: Thu, 5 Apr 2012 21:10:25 -0500
Subject: RE: request.login() not persistent
Thread-Topic: request.login() not persistent
Thread-Index: Ac0TeTFt9YjzXcUmQaGdiFW1pUBRywAINZfQ
Message-ID: <99C8B2929B39C24493377AC7A121E21FB016D9AC1D@USEA-EXCH8.na.uis.unisys.com>
References: <CACGXvK2gJGkwpMAjGn=PMDeQ__cD9Hc5fiWcLmvWbgPNtJQB8w@mail.gmail.com>
	<CABzHfVm_SYf0d4px-X2E-uON55nr4PE9seRFkLhPjFp6BAwykw@mail.gmail.com>
 <CACGXvK2t1=rfVrE1J0SXvwLjgVBUnmXb9y-L9ccva690Cxqv3Q@mail.gmail.com>
In-Reply-To: <CACGXvK2t1=rfVrE1J0SXvwLjgVBUnmXb9y-L9ccva690Cxqv3Q@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

> From: Jerry Malcolm [mailto:2ndgenfilms@gmail.com]=20
> Subject: Re: request.login() not persistent

> I was using:
> <META HTTP-EQUIV=3D"Refresh" CONTENT=3D"0; URL=3D/userhome">

> I changed it per your comment to:
> <% response.sendRedirect( response.encodeRedirectURL( "/userhome" )); %>

> It's like the logged on state was not saved in the session object.

Or more likely that this particular client disabled cookies, thus requiring=
 the sessionid to be included in the URL.  Using the encodeRedirectURL() me=
thod will do that, whereas the plain refresh will not.

 - Chuck


THIS COMMUNICATION MAY CONTAIN CONFIDENTIAL AND/OR OTHERWISE PROPRIETARY MA=
TERIAL and is thus for use only by the intended recipient. If you received =
this in error, please contact the sender and delete the e-mail and its atta=
chments from all computers.


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233412-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr  6 02:17:41 2012
Return-Path: <users-return-233412-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 18C5C95BB
	for <apmail-tomcat-users-archive@www.apache.org>; Fri,  6 Apr 2012 02:17:41 +0000 (UTC)
Received: (qmail 57270 invoked by uid 500); 6 Apr 2012 02:17:37 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 57165 invoked by uid 500); 6 Apr 2012 02:17:37 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 57154 invoked by uid 99); 6 Apr 2012 02:17:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 02:17:37 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of matt.m.munz@gmail.com designates 209.85.160.45 as permitted sender)
Received: from [209.85.160.45] (HELO mail-pb0-f45.google.com) (209.85.160.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 02:17:33 +0000
Received: by pbcuo5 with SMTP id uo5so2278419pbc.18
        for <users@tomcat.apache.org>; Thu, 05 Apr 2012 19:17:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=u6jiNyRzvbQxO45nxQBtOV7OeKNZ77u6tD08YW0jqy4=;
        b=z9PTPlCPobiDh3hTT4ygh2vq8E4UVTR5V7ek8SC+NWMt6IGI/S3RML+VqFkfEagrlm
         XIzvSFCz86T0wYsaR7S37AoqWtxHuPwITYKW7av73VkMlU2cofBkfUklfwEmKpaYkXwg
         TR2JMvkNrPMH11tpjrmYICx8FPnxPLjufya4gdsQn7y0U1OZQ4+Bz47lGQMy/+b/aoLP
         mT6WAXYxzZYrhXoh3JlvkAY/PZiroQiwIT1BYMMdSNIXnAUYakbUvJqe1YsUfTqs8e6r
         BI9CkAGQirgdWZ7W6VaD9t/YtSTPPbg2qxf1t9wKIdDguFhaUpYhCk5fBghRFCc/sbzd
         64Sg==
Received: by 10.68.74.197 with SMTP id w5mr11480160pbv.129.1333678632572;
        Thu, 05 Apr 2012 19:17:12 -0700 (PDT)
Received: from [10.0.1.15] (adsl-99-102-133-251.dsl.pltn13.sbcglobal.net. [99.102.133.251])
        by mx.google.com with ESMTPS id i8sm4840660pbi.47.2012.04.05.19.17.10
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 05 Apr 2012 19:17:11 -0700 (PDT)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1084)
Subject: Re: Tomcat 7 Maven plugin: deploy fails with tomcatManager status code:401, ReasonPhrase:Unauthorized
From: Matt Munz <matt.m.munz@gmail.com>
In-Reply-To: <CAPoyBqRO=i4sWqRxjOdj_J4Bky=mFhJD_d9MVxPPMCXAzP-gWA@mail.gmail.com>
Date: Thu, 5 Apr 2012 19:17:08 -0700
Content-Transfer-Encoding: quoted-printable
Message-Id: <80D886CA-1FC6-4231-9D10-ACA8DD2A37D3@gmail.com>
References: <51200CB4-D325-4019-A12A-5A0FDCC8987E@me.com> <0B75C850-2329-47A0-AEAF-A6B7CC14D35F@gmail.com> <CAPoyBqRbT3w_C=3DEomct-hRkKsVpUTBaEd9pjTFn3r=McLMfg@mail.gmail.com> <5E45D237-38F2-473F-A5FB-9D6367F1DDD6@gmail.com> <CAPoyBqTKZ3vABf6zqo2g9WXEa7yec1kVerSY3uwb8C8bOrLyrw@mail.gmail.com> <C24FEA44-BB75-4EE1-A4E2-81FDD4F84FB3@gmail.com> <CAPoyBqRO=i4sWqRxjOdj_J4Bky=mFhJD_d9MVxPPMCXAzP-gWA@mail.gmail.com>
To: "Tomcat Users List" <users@tomcat.apache.org>
X-Mailer: Apple Mail (2.1084)
X-Virus-Checked: Checked by ClamAV on apache.org

Olivier,

  OK.  Thanks.  So with the 2.0-SNAPSHOT version I am getting the same =
error (HTTP 401). [1]  Interestingly, the plugin output makes it look =
like the WAR file was uploaded but when I visit the Manager, I can see =
that it is not deployed.

  Do you have any thoughts about what I can do to debug this further?  =
I'd really like to get this working.

[1]
[INFO] Deploying war to http://localhost:8080/ =20
Uploading: http://localhost:8080/manager/html/deploy?path=3D%2F
Uploaded: http://localhost:8080/manager/html/deploy?path=3D%2F (9555 KB =
at 33760.1 KB/sec)
[INFO] tomcatManager status code:401, ReasonPhrase:Unauthorized

  Matt


On Apr 4, 2012, at 12:23 AM, Olivier Lamy wrote:

> Hello,
> Have a look here:
> http://tomcat.apache.org/maven-plugin-2.0-SNAPSHOT/snapshot-test.html
>=20
> 2012/4/4 Matt Munz <matt.m.munz@gmail.com>:
>> Olivier,
>>=20
>>  I made that change to settings.xml and now I'm getting a different =
error. [1]  How can I find out where this plugin is stored?  Perhaps =
there is a problem with the repository or my repository configuration.
>>=20
>> [1]
>> [WARNING] The POM for =
org.apache.tomcat.maven:tomcat7-maven-plugin:jar:2.0-SNAPSHOT is =
missing, no dependency information available
>> [WARNING] Failed to retrieve plugin descriptor for =
org.apache.tomcat.maven:tomcat7-maven-plugin:2.0-SNAPSHOT: Plugin =
org.apache.tomcat.maven:tomcat7-maven-plugin:2.0-SNAPSHOT or one of its =
dependencies could not be resolved: Failed to read artifact descriptor =
for org.apache.tomcat.maven:tomcat7-maven-plugin:jar:2.0-SNAPSHOT
>> ...
>> [WARNING] The POM for =
org.apache.tomcat.maven:tomcat7-maven-plugin:jar:2.0-SNAPSHOT is =
missing, no dependency information available
>> ...
>> [ERROR] Plugin =
org.apache.tomcat.maven:tomcat7-maven-plugin:2.0-SNAPSHOT or one of its =
dependencies could not be resolved: Failed to read artifact descriptor =
for org.apache.tomcat.maven:tomcat7-maven-plugin:jar:2.0-SNAPSHOT: Could =
not find artifact =
org.apache.tomcat.maven:tomcat7-maven-plugin:pom:2.0-SNAPSHOT -> [Help =
1]
>>=20
>>  Matt Munz
>>=20
>> On Apr 2, 2012, at 11:48 PM, Olivier Lamy wrote:
>>=20
>>> Hello,
>>> With version from codehaus manager url for tomcat7 is not correct.
>>> (see =
http://mojo.codehaus.org/tomcat-maven-plugin/examples/deployment-tomcat7.h=
tml)
>>>=20
>>> Regarding the plugin prefix trouble, you have two solutions to use =
the
>>> correct version:
>>>=20
>>> * use the full cli: mvn
>>> org.apache.tomcat.maven:tomcat7-maven-plugin:2.0-SNAPSHOT:deploy
>>> * configure your settings.xml with the entry
>>>=20
>>>  <pluginGroups>
>>>    <pluginGroup>org.apache.tomcat.maven</pluginGroup>
>>>  </pluginGroups>
>>>=20
>>>=20
>>> HTH,
>>> --
>>> Olivier Lamy
>>> Talend: http://coders.talend.com
>>> http://twitter.com/olamy | http://linkedin.com/in/olamy
>>>=20
>>> 2012/4/3 Matt Munz <matt.m.munz@gmail.com>:
>>>> Olivier,
>>>>=20
>>>>  After switching to 2.0-SNAPSHOT, I am still getting errors :(  =
First I got an error saying that the tomcat7 prefix was not found. [1]  =
Then I tried "mvn  tomcat:deploy -Dusername=3DAdministrator =
-Dpassword=3Da" and I got a 403 response from the manager.
>>>>=20
>>>> [1]
>>>> [ERROR] No plugin found for prefix 'tomcat7' in the current project =
and in the plugin groups [org.apache.maven.plugins, org.codehaus.mojo] =
available from the repositories [local (/Users/mattmunz/.m2/repository), =
central (http://repo1.maven.org/maven2)] -> [Help 1]
>>>> [2]
>>>> [ERROR] Failed to execute goal =
org.codehaus.mojo:tomcat-maven-plugin:1.1:deploy (default-cli) on =
project ...: Cannot invoke Tomcat manager: Server returned HTTP response =
code: 403 for URL: http://localhost:8080/manager/deploy?path=3D%2F...&war=3D=
 -> [Help 1]
>>>>=20
>>>>  Matt
>>>>=20
>>>> On Apr 2, 2012, at 4:16 AM, Olivier Lamy wrote:
>>>>=20
>>>>> Hello,
>>>>> I have fixed few things related to deployment in trunk.
>>>>> Could you test with current 2.0-SNAPSHOT ?
>>>>>=20
>>>>> Thanks
>>>>> --
>>>>> Olivier Lamy
>>>>> Talend: http://coders.talend.com
>>>>> http://twitter.com/olamy | http://linkedin.com/in/olamy
>>>>>=20
>>>>> 2012/4/2 Matt Munz <matt.m.munz@gmail.com>:
>>>>>> Hi all,
>>>>>>=20
>>>>>>  I'm trying to get the Tomcat 7 Maven plugin to work and I'm =
getting an authorization problem.[1]  Here's the command that I'm =
running. [2]  Here's the relevant snippet from tomcat-users.xml. [3]  =
=46rom the browser I am able to log on to the Manager with this account =
without problems.
>>>>>>=20
>>>>>>  Any help you could provide would be greatly appreciated.
>>>>>>=20
>>>>>> [1] tomcatManager status code:401, ReasonPhrase:Unauthorized
>>>>>> [2] mvn tomcat7:deploy -Dusername=3DAdministrator -Dpassword=3Da
>>>>>> [3]
>>>>>> <role rolename=3D"manager-gui"/>
>>>>>> <role rolename=3D"manager-script"/>
>>>>>> <role rolename=3D"manager-jmx"/>
>>>>>> <user username=3D"Administrator" password=3D"a" =
roles=3D"manager-gui,manager-script,manager-jmx"/>
>>>>>>=20
>>>>>>  Matt Munz
>>>>>>  matt.m.munz@gmail.com
>>>>>>=20
>>>>>>=20
>>>>>>=20
>>>>>>=20
>>>>>=20
>>>>> =
---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>>>=20
>>>>=20
>>>>=20
>>>> =
---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>>=20
>>>=20
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>=20
>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>> For additional commands, e-mail: users-help@tomcat.apache.org
>>=20
>=20
>=20
>=20
> --=20
> Olivier Lamy
> Talend: http://coders.talend.com
> http://twitter.com/olamy | http://linkedin.com/in/olamy
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233413-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr  6 03:28:33 2012
Return-Path: <users-return-233413-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 47691999B
	for <apmail-tomcat-users-archive@www.apache.org>; Fri,  6 Apr 2012 03:28:33 +0000 (UTC)
Received: (qmail 90086 invoked by uid 500); 6 Apr 2012 03:28:29 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 90030 invoked by uid 500); 6 Apr 2012 03:28:29 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 89982 invoked by uid 99); 6 Apr 2012 03:28:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 03:28:27 +0000
X-ASF-Spam-Status: No, hits=1.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sahmed1020@gmail.com designates 209.85.216.173 as permitted sender)
Received: from [209.85.216.173] (HELO mail-qc0-f173.google.com) (209.85.216.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 03:28:22 +0000
Received: by qcsc20 with SMTP id c20so1524667qcs.18
        for <users@tomcat.apache.org>; Thu, 05 Apr 2012 20:28:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=dbgj2QDMR5JFwcvM8DZWiUzQGirMELqzRrhnwFvmOeI=;
        b=bdX/7IyWi1hXxhWfNjhCaYQGEnN9/G9GnJNlkowMWzmXv3uHZqZwcw1t0uy62d0dCP
         6jqVd+Bz9zrXzdZGFb+TLAr8uYfn6SVviruPSbqyKbHM5GT4O3QeW2M1zwL3tuuDeUDu
         NsRuTdX8ivG5AU+bgCR+gWm8TElGNgKh7sqlhA7uPsUfnBtt+rjSxUgAkMkFd3izvBBB
         pDQVOiw5+JeWcLknqZwEh+UvJdLJSERq6g00apjjtEskBmXpoghpbkpOZ3O5hX6KUWPk
         Ud6tqJ+77RAGI61whkafgnze54p7EhxU/ssxdbu70F9tPQDWSp8Egi+xjvv8jPBxF1ND
         KMvg==
Received: by 10.224.213.196 with SMTP id gx4mr7239723qab.95.1333682881236;
 Thu, 05 Apr 2012 20:28:01 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.68.135 with HTTP; Thu, 5 Apr 2012 20:27:41 -0700 (PDT)
In-Reply-To: <17972289.150.1333543571938.JavaMail.daniel@cleveland>
References: <CAG2rwuNhHZUZYe2=wzgUkT4XdwWrgSv5gRm=S4ydymAMXGVG+A@mail.gmail.com>
 <17972289.150.1333543571938.JavaMail.daniel@cleveland>
From: S Ahmed <sahmed1020@gmail.com>
Date: Thu, 5 Apr 2012 23:27:41 -0400
Message-ID: <CAG2rwuNc6NOT-S6=bxnqXuZhw+LMdDysH8SmZGcxJhTaxrq6fQ@mail.gmail.com>
Subject: Re: jdbc pool properties
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=20cf30050dae610d7c04bcfa3e6d
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf30050dae610d7c04bcfa3e6d
Content-Type: text/plain; charset=ISO-8859-1

Daniel,

Your suggestion seems to have worked so far, thanks!

testOnBorrow="true" and "validationQuery=SELECT 1"

On Wed, Apr 4, 2012 at 8:46 AM, Daniel Mikusa <dmikusa@vmware.com> wrote:

>
>
> ----- Original Message -----
> > My db connections seem to be lost after an extended period of
> > inactivity
>
> There could be a number of reasons that this occurs.  Perhaps a network
> issue is causing them to be disconnected or the database may be timing them
> out.  At any rate, it's not likely that the problem would be caused by the
> "removeAbandoned" / "abandonedTimeout" settings, unless you application is
> not properly returning connections to the connection pool.
>
>
> https://tomcat.apache.org/tomcat-7.0-doc/jndi-datasource-examples-howto.html#Preventing_database_connection_pool_leaks
>
>
> > (for a web application).  And the only way to get the connections to
> > work
> > again is to restart tomcat.
> >
> > My tomcat.jdbc.pool.Datasource settings have:
> >
> >  <property name="maxActive" value="100"/>
> >         <property name="maxIdle" value="30"/>
> >         <property name="maxWait" value="1000"/>
> >         <property name="defaultAutoCommit" value="true"/>
> >         <property name="removeAbandoned" value="true"/>
> >         <property name="removeAbandonedTimeout" value="60"/>
> >
>
> You probably want to add testOnBorrow="true" and "validationQuery=SELECT
> 1"  (or some other valid query for your DB).  See the following link for an
> explanation of those properties.
>
>  https://commons.apache.org/dbcp/configuration.html
>
> This will cause your connections to be validated prior to their use by
> your application.  Stale connections will be removed and replaced with new,
> working connections.
>
> >
> > Is it the removedAbonded and abandonedTimeout?  Does it mean "after
> > 60
> > seconds, remove the connection from the pool?
>
> No.  See either of the links I've referenced above for an explanation of
> these settings.
>
> >
> > I guess what I need is a minActive setting then?
> >
>
> There's no "minActive" setting.  You have "minIdle", but I don't think
> that would help here.
>
> Dan
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>
>

--20cf30050dae610d7c04bcfa3e6d--

From users-return-233414-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr  6 05:05:45 2012
Return-Path: <users-return-233414-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DE5779DD4
	for <apmail-tomcat-users-archive@www.apache.org>; Fri,  6 Apr 2012 05:05:44 +0000 (UTC)
Received: (qmail 93450 invoked by uid 500); 6 Apr 2012 05:05:41 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 93140 invoked by uid 500); 6 Apr 2012 05:05:37 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 93084 invoked by uid 99); 6 Apr 2012 05:05:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 05:05:35 +0000
X-ASF-Spam-Status: No, hits=1.0 required=5.0
	tests=SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (nike.apache.org: transitioning domain of terence@tmbsw.com does not designate 208.82.204.51 as permitted sender)
Received: from [208.82.204.51] (HELO secure.builders-agent.com) (208.82.204.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 05:05:26 +0000
Received: from [192.168.1.8] (208-191-157-48.lightspeed.austtx.sbcglobal.net [208.191.157.48])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by tmbsw.com (Postfix) with ESMTP id F35291108001
	for <users@tomcat.apache.org>; Fri,  6 Apr 2012 00:05:04 -0500 (CDT)
Message-ID: <4F7E7984.9010005@tmbsw.com>
Date: Fri, 06 Apr 2012 00:05:08 -0500
From: "Terence M. Bandoian" <terence@tmbsw.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2.4) Gecko/20100608 Thunderbird/3.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Discrepancy between Tomcat's connection pool and tomcat's report
 on memory leaks
References: <4F7E1C75.50908@tmbsw.com>
In-Reply-To: <4F7E1C75.50908@tmbsw.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

  On 1:59 PM, Terence M. Bandoian wrote:
>  On 1:59 PM, Pid wrote:
>>
>> If you define the DataSource in GlobalNamingResources the pool will be
>> started and stopped with the Tomcat lifecycle.
>>
>> Applications have their own lifecycle inside Tomcat, they are started
>> after Tomcat (obviously) and stopped before Tomcat stops (also 
>> obviously).
>>
>> This is why the pool will not stop before your application, unless you
>> do something manual to change that.
>>
>> If an application causes a thread to come into existence and allowing it
>> to have the WebappClassLoader as its context classloader value, but does
>> not shut it down, Tomcat complains.
>
> This is similar to the problem with JDBC 4.0 drivers.  The API docs 
> state:
>
> "Existing programs which currently load JDBC drivers using 
> Class.forName() will continue to work without modification."
>
> However, if you continue reading and read closely, it becomes apparent 
> that drivers are automatically registered with DriverManager when a 
> database connection is created.  In essence, a reference to a driver 
> is implicitly created and it is the responsibility of the application 
> to remove the reference.  This doesn't seem like good design to me but 
> no fault to Tomcat.
>
> -Terence Bandoian
>


Correction.  Drivers automatically register themselves with 
DriverManager when the driver class is loaded.

-Terence Bandoian


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233415-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr  6 09:51:32 2012
Return-Path: <users-return-233415-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E8CF497C8
	for <apmail-tomcat-users-archive@www.apache.org>; Fri,  6 Apr 2012 09:51:31 +0000 (UTC)
Received: (qmail 78539 invoked by uid 500); 6 Apr 2012 09:51:28 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 77992 invoked by uid 500); 6 Apr 2012 09:51:26 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 77957 invoked by uid 99); 6 Apr 2012 09:51:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 09:51:25 +0000
X-ASF-Spam-Status: No, hits=0.9 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [216.139.250.139] (HELO joe.nabble.com) (216.139.250.139)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 09:51:19 +0000
Received: from alf.nabble.com ([192.168.236.21])
	by joe.nabble.com with esmtp (Exim 4.72)
	(envelope-from <lmhelp1@orange.fr>)
	id 1SG5on-00018Q-IG
	for users@tomcat.apache.org; Fri, 06 Apr 2012 02:50:57 -0700
Date: Fri, 6 Apr 2012 02:50:57 -0700 (PDT)
From: =?UTF-8?Q?L=C3=A9a_Massiot?= <lmhelp1@orange.fr>
To: users@tomcat.apache.org
Message-ID: <1333705857484-4692232.post@n6.nabble.com>
In-Reply-To: <4F7DA677.3060205@christopherschultz.net>
References: <1333360773430-4678428.post@n6.nabble.com> <CABzHfVn5uKEF9RKGUkqGGq56DLNFhRFm6Y_PUSUq--x3=yMpvw@mail.gmail.com> <1333363527730-4678513.post@n6.nabble.com> <4F7A11D7.80205@christopherschultz.net> <1333444940374-4681421.post@n6.nabble.com> <4F7AE221.10605@ice-sa.com> <1333549942374-4686704.post@n6.nabble.com> <1333564099167-4687332.post@n6.nabble.com> <4F7DA677.3060205@christopherschultz.net>
Subject: Re: Tomcat6 - Context - aliases
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Christopher Schultz-2 wrote
> Do you really need crossContext="true" here?

I guess not since - as I just tested - removing it doesn't change
anything... Thank you.

So I removed the "crossContext" attribute (and the "path" attribute) and the
new contents of "an_alias_1.xml" are:
-------------------------------------------------------------------------------------- 
< Context docBase="/home/d1" / > 
-------------------------------------------------------------------------------------- 


Christopher Schultz-2 wrote
> This is the first time you mentioned webapp "w". Is that the "main"
> webapp?

Yes.


Christopher Schultz-2 wrote
> Why is that a problem?

Actually I realized that even with the previous mechanism I used (using the
"aliases" attribute of the "Context" element of the "w/WEB-INF/context.xml"
file), I could directly retrieve a resource by typing its exact URL in a
browser and without having to identify in any way prior to the retrieval...


Christopher Schultz-2 wrote
> 
> If you want /w/an_alias_1, then re-name your context deployment
> descriptor:
> 
> $ mv an_alias_1.xml w\#an_alias_1.xml 
> 
... Actually, this is what I did but I didn't want to complicate my answer.
Thank you.


Christopher Schultz-2 wrote
> 
> Maybe you just want to make it "look" like the resource "belongs"
> to the webapp. 
> 

To the Webapp "w", yes.

Thank you for your comments and your interest.
Best regards.

--
View this message in context: http://tomcat.10.n6.nabble.com/Tomcat6-Context-aliases-tp4678430p4692232.html
Sent from the Tomcat - User mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233416-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr  6 10:04:34 2012
Return-Path: <users-return-233416-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 89E1D9D2A
	for <apmail-tomcat-users-archive@www.apache.org>; Fri,  6 Apr 2012 10:04:34 +0000 (UTC)
Received: (qmail 17961 invoked by uid 500); 6 Apr 2012 10:04:31 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 17868 invoked by uid 500); 6 Apr 2012 10:04:30 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 17831 invoked by uid 99); 6 Apr 2012 10:04:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 10:04:29 +0000
X-ASF-Spam-Status: No, hits=0.9 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [216.139.250.139] (HELO joe.nabble.com) (216.139.250.139)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 10:04:22 +0000
Received: from alf.nabble.com ([192.168.236.21])
	by joe.nabble.com with esmtp (Exim 4.72)
	(envelope-from <lmhelp1@orange.fr>)
	id 1SG61R-0001nR-Nx
	for users@tomcat.apache.org; Fri, 06 Apr 2012 03:04:01 -0700
Date: Fri, 6 Apr 2012 03:04:01 -0700 (PDT)
From: =?UTF-8?Q?L=C3=A9a_Massiot?= <lmhelp1@orange.fr>
To: users@tomcat.apache.org
Message-ID: <1333706641731-4692256.post@n6.nabble.com>
In-Reply-To: <85DA62F108ABD4439B9B6A3AB2B2880F01F613A7@BLR-EC-MBX5.wipro.com>
References: <85DA62F108ABD4439B9B6A3AB2B2880F01F613A7@BLR-EC-MBX5.wipro.com>
Subject: Re: Accessing USB drive content from pages served from tomcat6
  server
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hello Souvik,

BTW, it's not Konstantin who had a problem but me.

Try this:

1) Create a "usb_1.xml" file in "/etc/tomcat6/Catalina/localhost/" (the OS
being Debian Squeeze) with the following contents:
< Context docBase=3D"/media/WCF/usb_1" / >=20
(Think about removing the extra spaces I added above).

2) (Optional) Restart Tomcat.
"usb_1.xml" should normally be deployed.

3) Then try accessing a resource in "/media/WCF/usb_1/" by typing in your
browser a URL starting with:
http://<hostname>[:8080]/usb_1/<a_resource_in_/media/WCF/usb_1>

Best regards.
L=C3=A9a

--
View this message in context: http://tomcat.10.n6.nabble.com/Accessing-USB-=
drive-content-from-pages-served-from-tomcat6-server-tp4684002p4692256.html
Sent from the Tomcat - User mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233417-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr  6 11:16:20 2012
Return-Path: <users-return-233417-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 59F829A7D
	for <apmail-tomcat-users-archive@www.apache.org>; Fri,  6 Apr 2012 11:16:20 +0000 (UTC)
Received: (qmail 57680 invoked by uid 500); 6 Apr 2012 11:16:16 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 57541 invoked by uid 500); 6 Apr 2012 11:16:16 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 57524 invoked by uid 99); 6 Apr 2012 11:16:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 11:16:16 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 147.91.1.120 is neither permitted nor denied by domain of ognjen.d.blagojevic@gmail.com)
Received: from [147.91.1.120] (HELO afrodita.rcub.bg.ac.rs) (147.91.1.120)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 11:16:10 +0000
Received: from [IPv6:2001:4170:0:4::66] (unknown [IPv6:2001:4170:0:4::66])
	by afrodita.rcub.bg.ac.rs (Postfix) with ESMTP id 18B8B1919FB6
	for <users@tomcat.apache.org>; Fri,  6 Apr 2012 13:15:47 +0200 (CEST)
Message-ID: <4F7ED061.2030409@gmail.com>
Date: Fri, 06 Apr 2012 13:15:45 +0200
From: Ognjen Blagojevic <ognjen.d.blagojevic@gmail.com>
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Problem tomcat
References: <CANhTVFNNhu=B-fjUnbnq-7tw7C44ENexm0WrRbWAHTKPTq2c+Q@mail.gmail.com>
In-Reply-To: <CANhTVFNNhu=B-fjUnbnq-7tw7C44ENexm0WrRbWAHTKPTq2c+Q@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-RCUB-MailScanner-Information: Please contact the ISP for more information
X-RCUB-MailScanner-ID: 18B8B1919FB6.A922E
X-RCUB-MailScanner: Found to be clean
X-RCUB-MailScanner-SpamCheck: not spam, SpamAssassin (not cached, score=-2.6,
	required 5, autolearn=not spam, BAYES_00 -2.60, NO_RELAYS -0.00)
X-Virus-Checked: Checked by ClamAV on apache.org

Fairouz,

On 4.4.2012 17:25, Fairouz Fakhfakh wrote:
> I use  Tomcat 6 and java 5.

Good to know. Send us exact versions for both. OS type and version could 
also be informative.


> I have a problem by clicking on a button to access a JSP page.

Which button? If the button is on the HTML/JSP page, please send us that 
page so we can understand what is going on.


> java.lang.NoSuchMethodError:
> org.eclipse.jdt.internal.compiler.env.NameEnvironmentAnswer.<init>(Lorg/eclipse/jdt/internal/compiler/env/IBinaryType;)V

Smells like a classpath issue.


-Ognjen

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233418-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr  6 11:30:02 2012
Return-Path: <users-return-233418-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2106C9C1D
	for <apmail-tomcat-users-archive@www.apache.org>; Fri,  6 Apr 2012 11:30:02 +0000 (UTC)
Received: (qmail 89056 invoked by uid 500); 6 Apr 2012 11:29:58 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 88957 invoked by uid 500); 6 Apr 2012 11:29:58 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 88947 invoked by uid 99); 6 Apr 2012 11:29:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 11:29:58 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (nike.apache.org: transitioning domain of dhaval.jaiswal@via.com does not designate 209.85.214.173 as permitted sender)
Received: from [209.85.214.173] (HELO mail-ob0-f173.google.com) (209.85.214.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 11:29:50 +0000
Received: by obbup19 with SMTP id up19so3833192obb.18
        for <users@tomcat.apache.org>; Fri, 06 Apr 2012 04:29:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=via.com; s=google;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=nGZZpzRDVcGEAmzqWP8SfZEo0xklzsZyFvm2r1E8VYk=;
        b=Zi7YHu6aKWI7wVmfHbZ9Hsi4xjC/T3omluOLoWdyHjliV9rAXvSaVvjFWs3Sk7dx2d
         GLv+DZWSstmQRhiSBBcDhjlZhJtjKfopfKgzfFYimxYmzm7CtzuX7vaIuUiEVCi7lVAL
         0+VqcDLAC9NFbcwLSwm2CPJAgf5SrSPp2Lscw=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:x-gm-message-state;
        bh=nGZZpzRDVcGEAmzqWP8SfZEo0xklzsZyFvm2r1E8VYk=;
        b=Hkl8autgRkPfYp3SB7MuHuItNrc5QVtbE5lVOSpMQ9RQvBGcqkOS6BJFUylKkXNLbE
         xcHiH17HDWTQEpJdKlKSKxhRxSCr69IKMTLXFsVJdjF+vW2Afi0V+jvT2oR8jtnAHMQu
         8ymcPAQ6Y8qPV9Hm8LofNDsCraNOQwN1jZPqBvs+NeDxt+/cq+xRwJYU2ANUC6LAL6qP
         +19JNOsYTeDTbjq30MHjXvTC10Qnc/kC0/RSRogaFmwnHHwUGnqkJG+YpdYCJVakq2uc
         N3wKHnKPZ7k5wvOnv9IKjdLGo67OnM2alYS7VkSoyEw9FWes1c6P/B+py78UF0TXhE7W
         y5ow==
MIME-Version: 1.0
Received: by 10.182.136.104 with SMTP id pz8mr8801676obb.3.1333711769503; Fri,
 06 Apr 2012 04:29:29 -0700 (PDT)
Received: by 10.182.75.165 with HTTP; Fri, 6 Apr 2012 04:29:29 -0700 (PDT)
In-Reply-To: <1333659691.97609.YahooMailNeo@web125501.mail.ne1.yahoo.com>
References: <zarafa.4f7c651f.1095.7ca7df39672deef6@zarafix.ordix.de>
	<CABKrPsNQN_2KjH_PLfE49aoXjqgc451yFZFs-a0e0g9S3hMLpw@mail.gmail.com>
	<1333572948.35940.YahooMailNeo@web125504.mail.ne1.yahoo.com>
	<CABKrPsN0KV_Wox_0JuzMqhLfzZ9r7Jsg5-5OuWJbeFHfkxNRNQ@mail.gmail.com>
	<4F7DC767.3040108@pidster.com>
	<CABKrPsMKvkZphpL+XRB=Y0B54_AM7+nTYUW5Uq3QiXUSSLBJaQ@mail.gmail.com>
	<1333659691.97609.YahooMailNeo@web125501.mail.ne1.yahoo.com>
Date: Fri, 6 Apr 2012 16:59:29 +0530
Message-ID: <CABKrPsPDj_dKZQwOFkeuy6h+brjar-m+tuqH6pMx_hkqUNdFQQ@mail.gmail.com>
Subject: Re: SEVERE: Unable to start cluster.
From: Dhaval Jaiswal <dhaval.jaiswal@via.com>
To: Tomcat Users List <users@tomcat.apache.org>, Mark Eggers <its_toasted@yahoo.com>
Content-Type: multipart/related; boundary=e89a8f643ce641077004bd00f8f9
X-Gm-Message-State: ALoCoQlJ2Y9K+70mBX5bbNF1kHTqqkQRHrlG8tr1uZw17UZkspbM7Kc91jQ4HS4rONM57b84nKfZ

--e89a8f643ce641077004bd00f8f9
Content-Type: multipart/alternative; boundary=e89a8f643ce641076e04bd00f8f8

--e89a8f643ce641076e04bd00f8f8
Content-Type: text/plain; charset=ISO-8859-1

*
Yes we have <distributable/> in web.xml*

*

Below is the full server.xml for all the tomcats.*

<?xml version='1.0' encoding='utf-8'?>
<Server port="8005" shutdown="SHUTDOWN">

  <Listener className="org.apache.catalina.core.AprLifecycleListener"
SSLEngine="on" />
  <Listener className="org.apache.catalina.core.JasperListener" />
  <Listener className="org.apache.catalina.mbeans.ServerLifecycleListener"
/>
  <Listener
className="org.apache.catalina.mbeans.GlobalResourcesLifecycleListener" />

  <GlobalNamingResources>
    <Resource name="UserDatabase" auth="Container"
              type="org.apache.catalina.UserDatabase"
              description="User database that can be updated and saved"
              factory="org.apache.catalina.users.MemoryUserDatabaseFactory"
              pathname="conf/tomcat-users.xml" />
    <Resource name="xyz" auth="Container" type="javax.sql.DataSource"
        driverClassName="xyz.Driver" url="jdbc url"
        username="xyz" password="xyz"
        maxActive="150" maxIdle="10" maxWait="30000"
        removeAbandoned="true" removeAbandonedTimeout="120"
logAbandoned="true" />


  </GlobalNamingResources>

  <Service name="Catalina">


    <Connector port="8080" protocol="HTTP/1.1"
               connectionTimeout="20000"
               redirectPort="8443" />
    <Connector port="8443" protocol="HTTP/1.1" SSLEnabled="true"
               maxThreads="150" scheme="https" secure="true"
               clientAuth="false" sslProtocol="TLS" />

    <Connector port="8009" protocol="AJP/1.3" redirectPort="8443"
backlog="100" maxThreads="40000" />


    <Engine name="Catalina" defaultHost="localhost" jvmRoute="t5">

      <Cluster className="org.apache.catalina.ha.tcp.SimpleTcpCluster"
channelSendOptions="6">
        <Manager className="org.apache.catalina.ha.session.BackupManager"
expireSessionsOnShutdown="false"
                   notifyListenersOnReplication="true" mapSendOptions="6"/>

            <Channel
className="org.apache.catalina.tribes.group.GroupChannel">
             <Membership
className="org.apache.catalina.tribes.membership.McastService"
                        address="228.0.0.4"
                        port="45564"
                        frequency="500"
                        dropTime="30000"/>
             <Receiver
className="org.apache.catalina.tribes.transport.nio.NioReceiver"
                      address="auto"
                      port="4000"
                      selectorTimeout="5000"
                      timeout="60000"
                      maxThreads="6"/>

             <Sender
className="org.apache.catalina.tribes.transport.ReplicationTransmitter">
                  <Transport
className="org.apache.catalina.tribes.transport.nio.PooledParallelSender"
timeout="60000" keepAliveCount="0"/>
             </Sender>
             <Interceptor
className="org.apache.catalina.tribes.group.interceptors.TcpFailureDetector"/>
             <Interceptor
className="org.apache.catalina.tribes.group.interceptors.MessageDispatch15Interceptor"/>

           </Channel>
         <Valve className="org.apache.catalina.ha.tcp.ReplicationValve"

filter=".*\.gif|.*\.js|.*\.jpeg|.*\.jpg|.*\.png|.*\.htm|.*\.html|.*\.css|.*\.txt"/>
         <Valve
className="org.apache.catalina.ha.session.JvmRouteBinderValve"/>
       <ClusterListener
className="org.apache.catalina.ha.session.ClusterSessionListener"/>
       <ClusterListener
className="org.apache.catalina.ha.session.JvmRouteSessionIDBinderListener"/>
     </Cluster>
      <Realm className="org.apache.catalina.realm.UserDatabaseRealm"
             resourceName="UserDatabase"/>

      <Host name="localhost"  appBase="webapps"
            unpackWARs="true" autoDeploy="true"
            xmlValidation="false" xmlNamespaceAware="false">

      </Host>
    </Engine>
  </Service>
</Server>



*
Below is the context.xml*


<?xml version='1.0' encoding='utf-8'?>

<Context>

    <WatchedResource>WEB-INF/web.xml</WatchedResource>

    <ResourceLink name="xyz" global="xyz" type="javax.sql.DataSource"/>
</Context>



still it is throwing error while deploying apps.


WARNING: Unable to send map start message.
 Apr 5, 2012 1:37:12 PM org.apache.catalina.ha.session.BackupManager start
 SEVERE: Unable to start BackupManager
 java.lang.RuntimeException: Unable to start replicated map.
        at
 org.apache.catalina.tribes.tipis.AbstractReplicatedMap.init(AbstractReplicatedMap.java:230)

 Failed to start BackupManager:  java.lang.IllegalArgumentException:
 Listener already
 exists:{}[org.apache.catalina.tribes.tipis.LazyReplicatedMap]










On Fri, Apr 6, 2012 at 2:31 AM, Mark Eggers <its_toasted@yahoo.com> wrote:

> Response at the bottom:
>
> /mde/
>
> >________________________________
> > From: Dhaval Jaiswal <dhaval.jaiswal@via.com>
> >To: Tomcat Users List <users@tomcat.apache.org>
> >Sent: Thursday, April 5, 2012 10:28 AM
> >Subject: Re: SEVERE: Unable to start cluster.
> >
> >
> >pfa server.xml
> >
> >The same i am using for all the 10 tomcats.
> >
> >
> >
> >
> >On Thu, Apr 5, 2012 at 9:55 PM, Pid <pid@pidster.com> wrote:
> >
> >On 05/04/2012 15:13, Dhaval Jaiswal wrote:
> >>> I have tested the below cluster manager; as per the instruction i have
> >>> changed. However, when we try to deploy the apps on tomcat it was
> >>> throwing error that
> >>>
> >>> WARNING: Unable to send map start message.
> >>> Apr 5, 2012 1:37:12 PM org.apache.catalina.ha.session.BackupManager
> start
> >>> SEVERE: Unable to start BackupManager
> >>> java.lang.RuntimeException: Unable to start replicated map.
> >>>        at
> >>>
> org.apache.catalina.tribes.tipis.AbstractReplicatedMap.init(AbstractReplicatedMap.java:230)
> >>>
> >>> Failed to start BackupManager:  java.lang.IllegalArgumentException:
> >>> Listener already
> >>> exists:{}[org.apache.catalina.tribes.tipis.LazyReplicatedMap]
> >>>
> >>>
> >>>
> >>> i am using below server.xml for all the 10 tomcats. Do i have to change
> >>> it for every tomcat. How would i fix it.
> >>>
> >>>
> >>>
> >>> <Cluster className="org.apache.catalina.ha.tcp.SimpleTcpCluster"
> >>> channelSendOptions="6">
> >>>         <Manager
> >>> className="org.apache.catalina.ha.session.BackupManager"
> >>> expireSessionsOnShutdown="false"
> >>>                    notifyListenersOnReplication="true"
> mapSendOptions="6"/>
> >>>
> >>>             <Channel
> >>> className="org.apache.catalina.tribes.group.GroupChannel">
> >>>              <Membership
> >>> className="org.apache.catalina.tribes.membership.McastService"
> >>>                         address="228.0.0.4"
> >>>                         port="45563"
> >>>                         frequency="500"
> >>>                         dropTime="30000"/>
> >>>              <Receiver
> >>> className="org.apache.catalina.tribes.transport.nio.NioReceiver"
> >>>                       address="auto"
> >>>                       port="4000"
> >>>                       selectorTimeout="5000"
> >>>                       timeout="60000"
> >>>                       maxThreads="6"/>
> >>>
> >>>              <Sender
> >>>
> className="org.apache.catalina.tribes.transport.ReplicationTransmitter">
> >>>                   <Transport
> >>>
> className="org.apache.catalina.tribes.transport.nio.PooledParallelSender"
> timeout="60000"
> >>> keepAliveCount="0"/>
> >>>              </Sender>
> >>>              <Interceptor
> >>>
> className="org.apache.catalina.tribes.group.interceptors.TcpFailureDetector"/>
> >>>              <Interceptor
> >>>
> className="org.apache.catalina.tribes.group.interceptors.MessageDispatch15Interceptor"/>
> >>>             <!--  <Interceptor
> >>>
> className="org.apache.catalina.tribes.group.interceptors.ThroughputInterceptor"/>
> >>> -->
> >>>            </Channel>
> >>>          <Valve className="org.apache.catalina.ha.tcp.ReplicationValve"
> >>>
> >>>
> filter=".*\.gif|.*\.js|.*\.jpeg|.*\.jpg|.*\.png|.*\.htm|.*\.html|.*\.css|.*\.txt"/>
> >>>          <Valve
> >>> className="org.apache.catalina.ha.session.JvmRouteBinderValve"/>
> >>>        <ClusterListener
> >>> className="org.apache.catalina.ha.session.ClusterSessionListener"/>
> >>>        <ClusterListener
> >>>
> className="org.apache.catalina.ha.session.JvmRouteSessionIDBinderListener"/>
> >>>      </Cluster>
> >>
> >>
> >>Wow.  That's pretty neat, I've never seen Tomcat start up with just the
> >>cluster definition.
> >>
> >>How about you:
> >>
> >>1) remove all comments
> >>2) remove all passwords
> >>3) post the whole server.xml inline in your next reply
>
>
> Dhaval,
>
>
> Please try to avoid posting in HTML. The font is sometimes difficult to
> read.
>
> Please don't cc me. I get the same message on the list, and with about 200
> mail messages per day on this account I might overlook stuff if I get a lot
> of duplicate messages.
>
> Please post stuff inline and not as attachments. While I got the attached
> server.xml file, the list generally strips attachments.
>
> All that being said, here are my comments:
>
> <!-- From your server.xml -->
> <Listener
>   className="org.apache.catalina.core.AprLifecycleListener" SSLEngine="on"
> />
> <Listener
>   className="org.apache.catalina.core.JasperListener" />
> <Listener
>   className="org.apache.catalina.mbeans.ServerLifecycleListener" />
> <Listener
>   className="org.apache.catalina.mbeans.GlobalResourcesLifecycleListener"
> />
>
> So you've removed the memory leak prevention listener from your
> server.xml? Is there any reason why you've done that?
>
> <!-- from your server.xml -->
> <Connector port="8080" protocol="HTTP/1.1"
>            connectionTimeout="20000"
>            redirectPort="8443" />
>
> <Connector port="8009"
>            protocol="AJP/1.3"
>            redirectPort="8443"
>            backlog="100"
>            maxThreads="40000" />
>
> No URIEncoding="UTF-8" on your connectors? I checked your web site and
> there doesn't seem to be any characters that would be
> impacted. However, I was thinking that setting UTF-8 on all connectors
> is in general a good thing.
>
> 40000 threads for the AJP connector with only a backlog of 100? I hope that
>
> a) your Apache HTTPD server is configured appropriately
> b) you can have this many file descriptors open
>
> <!-- from your server.xml -->
> <Membership
>             className="org.apache.catalina.tribes.membership.McastService"
>             address="228.0.0.4"
>             port="45564"
>             frequency="500"
>             dropTime="30000"/>
>
> You said that you use this same server.xml for all 10
> Tomcats. However, in a previous message you said you were trying to
> cluster 7 Tomcats (192.168.3.5 to 192.168.3.11). If you use the same
> multicast address and port for all 10 Tomcats, then all 10 Tomcats
> will be a part of the cluster.
>
> > I have tested the below cluster manager; as per the instruction i have
>
> > changed. However, when we try to deploy the apps on tomcat it was
> > throwing error that
>
> Does this mean that the cluster actually starts without your web
> application? If you've modified the logging.properties file, what does
> the cluster logging file say? Please post the information inline as the
> mailing list tends to strip attachments.
>
> The default dropTime is 3000 ms (3 seconds). Is your network busy
>
> enough so that a 30 second drop time is reasonable? If it is, then
> maybe a better networking infrastructure is in order.
>
> <!-- from your server.xml -->
> <Sender
>   className="org.apache.catalina.tribes.transport.ReplicationTransmitter">
>   <Transport
>   className="org.apache.catalina.tribes.transport.nio.PooledParallelSender"
>              timeout="60000"
>              keepAliveCount="0"/>
> </Sender>
>
> keepAliveCount="0" ?
>
> From the documentation:
>
> The number of requests that can go through the socket before the
> socket is closed, and reopened for the next request. The default value
> is -1, which is unlimited.
>
> So you're saying here that NO requests can go through the socket
> before the socket is closed? At the best interpretation, you'll get
> one message through the socket, then the socket closes and
> reopens. This doesn't sound very performant.
>
> Other than that, your clustering setup does not look a lot different
> than mine. I place my cluster in the <Host> element since I am
> experimenting with farm deployment. Mine works even when changing from
> the DeltaManager (only three node cluster) to the BackupManager.
>
> What is in your application's context.xml and web.xml files? Please
> post both (inline - the list tends to strip attachments), with
> comments and sensitive information removed.
>
> I suspect that you have a listener defined in either context.xml or
> web.xml.
>
> All you really need to do to get session clustering to work is:
>
> 1. <distributable/> in web.xml
> 2. Make sure that all session objects are serializalble.
>
> Actually there is a bit more, but the above are the basics.
>
> . . . . just my two cents.
> /mde/
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>
>


-- 

[image: Inline image 2] <http://www.via.com/>

*Dhaval* | Database & System

*E:* dhaval.jaiswal@via.com <ramya@via.com>| *T:* 080 4043 3000 | *M:* +91
- 8095 397 843

[image: all-icon.jpg] <http://www.via.com/>

--e89a8f643ce641076e04bd00f8f8
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

<b><br>Yes we have &lt;distributable/&gt; in web.xml</b><br>
<br><b><br><br>Below is the full server.xml for all the tomcats.</b><br><br=
>&lt;?xml version=3D&#39;1.0&#39; encoding=3D&#39;utf-8&#39;?&gt;<br>&lt;Se=
rver port=3D&quot;8005&quot; shutdown=3D&quot;SHUTDOWN&quot;&gt;<br><br>=A0=
 &lt;Listener className=3D&quot;org.apache.catalina.core.AprLifecycleListen=
er&quot; SSLEngine=3D&quot;on&quot; /&gt;<br>
=A0 &lt;Listener className=3D&quot;org.apache.catalina.core.JasperListener&=
quot; /&gt;<br>=A0 &lt;Listener className=3D&quot;org.apache.catalina.mbean=
s.ServerLifecycleListener&quot; /&gt;<br>=A0 &lt;Listener className=3D&quot=
;org.apache.catalina.mbeans.GlobalResourcesLifecycleListener&quot; /&gt;<br=
>
<br>=A0 &lt;GlobalNamingResources&gt;<br>=A0=A0=A0 &lt;Resource name=3D&quo=
t;UserDatabase&quot; auth=3D&quot;Container&quot;<br>=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0 type=3D&quot;org.apache.catalina.UserDatabase&quot;<br>=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 description=3D&quot;User database t=
hat can be updated and saved&quot;<br>
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 factory=3D&quot;org.apache.catalina=
.users.MemoryUserDatabaseFactory&quot;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0 pathname=3D&quot;conf/tomcat-users.xml&quot; /&gt;<br>=A0=A0=A0 &lt;=
Resource name=3D&quot;xyz&quot; auth=3D&quot;Container&quot; type=3D&quot;j=
avax.sql.DataSource&quot;<br>
=A0=A0=A0=A0=A0=A0=A0 driverClassName=3D&quot;xyz.Driver&quot; url=3D&quot;=
jdbc url&quot;<br>=A0=A0=A0=A0=A0=A0=A0 username=3D&quot;xyz&quot; password=
=3D&quot;xyz&quot;<br>=A0=A0=A0=A0=A0=A0=A0 maxActive=3D&quot;150&quot; max=
Idle=3D&quot;10&quot; maxWait=3D&quot;30000&quot;<br>
=A0=A0=A0=A0=A0=A0=A0 removeAbandoned=3D&quot;true&quot; removeAbandonedTim=
eout=3D&quot;120&quot; logAbandoned=3D&quot;true&quot; /&gt;<br><br>=A0=A0=
=A0 <br>=A0 &lt;/GlobalNamingResources&gt;<br><br>=A0 &lt;Service name=3D&q=
uot;Catalina&quot;&gt;<br>=A0 <br>
=A0=A0=A0 <br>=A0=A0=A0 &lt;Connector port=3D&quot;8080&quot; protocol=3D&q=
uot;HTTP/1.1&quot; <br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 connectio=
nTimeout=3D&quot;20000&quot; <br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
 redirectPort=3D&quot;8443&quot; /&gt;<br>=A0=A0=A0 &lt;Connector port=3D&q=
uot;8443&quot; protocol=3D&quot;HTTP/1.1&quot; SSLEnabled=3D&quot;true&quot=
;<br>
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 maxThreads=3D&quot;150&quot; sch=
eme=3D&quot;https&quot; secure=3D&quot;true&quot;<br>=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0 clientAuth=3D&quot;false&quot; sslProtocol=3D&quot;TL=
S&quot; /&gt;<br><br>=A0=A0=A0 &lt;Connector port=3D&quot;8009&quot; protoc=
ol=3D&quot;AJP/1.3&quot; redirectPort=3D&quot;8443&quot; backlog=3D&quot;10=
0&quot; maxThreads=3D&quot;40000&quot; /&gt;<br>
<br><br>=A0=A0=A0 &lt;Engine name=3D&quot;Catalina&quot; defaultHost=3D&quo=
t;localhost&quot; jvmRoute=3D&quot;t5&quot;&gt;<br><br>=A0=A0=A0=A0=A0 &lt;=
Cluster className=3D&quot;org.apache.catalina.ha.tcp.SimpleTcpCluster&quot;=
 channelSendOptions=3D&quot;6&quot;&gt;<br>
=A0=A0=A0=A0=A0=A0=A0 &lt;Manager className=3D&quot;org.apache.catalina.ha.=
session.BackupManager&quot; expireSessionsOnShutdown=3D&quot;false&quot;<br=
>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 notifyListenersOnRe=
plication=3D&quot;true&quot; mapSendOptions=3D&quot;6&quot;/&gt;<br>
<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;Channel className=3D&quot;org.apa=
che.catalina.tribes.group.GroupChannel&quot;&gt;<br>=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0 &lt;Membership className=3D&quot;org.apache.catalina.tribes=
.membership.McastService&quot;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 address=3D&quot;228.0.0.4&quot;<br>
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 port=
=3D&quot;45564&quot;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0 frequency=3D&quot;500&quot;<br>=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 dropTime=3D&quot;30000&quot;/=
&gt;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;Receiver className=3D&quot=
;org.apache.catalina.tribes.transport.nio.NioReceiver&quot;<br>
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 address=3D&=
quot;auto&quot;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0 port=3D&quot;4000&quot;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0 selectorTimeout=3D&quot;5000&quot;<br>=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 timeout=3D&quot;6000=
0&quot;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 =
maxThreads=3D&quot;6&quot;/&gt;<br>
<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;Sender className=3D&quot;org.a=
pache.catalina.tribes.transport.ReplicationTransmitter&quot;&gt;<br>=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;Transport className=3D&qu=
ot;org.apache.catalina.tribes.transport.nio.PooledParallelSender&quot; time=
out=3D&quot;60000&quot; keepAliveCount=3D&quot;0&quot;/&gt;<br>
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/Sender&gt;<br>=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0 &lt;Interceptor className=3D&quot;org.apache.catalina.tr=
ibes.group.interceptors.TcpFailureDetector&quot;/&gt;<br>=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0 &lt;Interceptor className=3D&quot;org.apache.catalina.tr=
ibes.group.interceptors.MessageDispatch15Interceptor&quot;/&gt;<br>
<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 &lt;/Channel&gt;<br>=A0=A0=A0=A0=A0=A0=
=A0=A0 &lt;Valve className=3D&quot;org.apache.catalina.ha.tcp.ReplicationVa=
lve&quot;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 filter=3D&quo=
t;.*\.gif|.*\.js|.*\.jpeg|.*\.jpg|.*\.png|.*\.htm|.*\.html|.*\.css|.*\.txt&=
quot;/&gt;<br>
=A0=A0=A0=A0=A0=A0=A0=A0 &lt;Valve className=3D&quot;org.apache.catalina.ha=
.session.JvmRouteBinderValve&quot;/&gt;<br>=A0=A0=A0=A0=A0=A0 &lt;ClusterLi=
stener className=3D&quot;org.apache.catalina.ha.session.ClusterSessionListe=
ner&quot;/&gt; <br>=A0=A0=A0=A0=A0=A0 &lt;ClusterListener className=3D&quot=
;org.apache.catalina.ha.session.JvmRouteSessionIDBinderListener&quot;/&gt;<=
br>
=A0=A0=A0=A0 &lt;/Cluster&gt; <br>=A0=A0=A0=A0=A0 &lt;Realm className=3D&qu=
ot;org.apache.catalina.realm.UserDatabaseRealm&quot;<br>=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0 resourceName=3D&quot;UserDatabase&quot;/&gt; <br><br>=A0=
=A0=A0=A0=A0 &lt;Host name=3D&quot;localhost&quot;=A0 appBase=3D&quot;webap=
ps&quot;<br>
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 unpackWARs=3D&quot;true&quot; autoDeploy=
=3D&quot;true&quot;<br>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 xmlValidation=3D&q=
uot;false&quot; xmlNamespaceAware=3D&quot;false&quot;&gt;<br><br>=A0=A0=A0=
=A0=A0 &lt;/Host&gt;<br>=A0=A0=A0 &lt;/Engine&gt;<br>=A0 &lt;/Service&gt;<b=
r>
&lt;/Server&gt;<br><br><br><br><b><br>Below is the context.xml</b><br><br><=
br>&lt;?xml version=3D&#39;1.0&#39; encoding=3D&#39;utf-8&#39;?&gt;<br><br>=
&lt;Context&gt;<br><br>=A0=A0=A0 &lt;WatchedResource&gt;WEB-INF/web.xml&lt;=
/WatchedResource&gt;<br>
=A0=A0=A0 <br>=A0=A0=A0 &lt;ResourceLink name=3D&quot;xyz&quot; global=3D&q=
uot;xyz&quot; type=3D&quot;javax.sql.DataSource&quot;/&gt;<br>&lt;/Context&=
gt;<br><br><br><br>still it is throwing error while deploying apps. <br><br=
><br>WARNING: Unable to send map start message.<br>
=A0Apr 5, 2012 1:37:12 PM org.apache.catalina.ha.session.BackupManager star=
t<br>=A0SEVERE: Unable to start BackupManager<br>=A0java.lang.RuntimeExcept=
ion: Unable to start replicated map.<br>=A0=A0=A0=A0=A0=A0=A0 at<br>=A0org.=
apache.catalina.tribes.tipis.AbstractReplicatedMap.init(AbstractReplicatedM=
ap.java:230)<br>
<br>=A0Failed to start BackupManager:=A0 java.lang.IllegalArgumentException=
:<br>=A0Listener already<br>=A0exists:{}[org.apache.catalina.tribes.tipis.L=
azyReplicatedMap]<br><br><br><br><br><br><br><br><br><br><br><div class=3D"=
gmail_quote">
On Fri, Apr 6, 2012 at 2:31 AM, Mark Eggers <span dir=3D"ltr">&lt;<a href=
=3D"mailto:its_toasted@yahoo.com">its_toasted@yahoo.com</a>&gt;</span> wrot=
e:<br><blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-l=
eft:1px #ccc solid;padding-left:1ex">
Response at the bottom:<br>
<br>
/mde/<br>
<br>
&gt;________________________________<br>
<div class=3D"im">&gt; From: Dhaval Jaiswal &lt;<a href=3D"mailto:dhaval.ja=
iswal@via.com">dhaval.jaiswal@via.com</a>&gt;<br>
&gt;To: Tomcat Users List &lt;<a href=3D"mailto:users@tomcat.apache.org">us=
ers@tomcat.apache.org</a>&gt;<br>
</div>&gt;Sent: Thursday, April 5, 2012 10:28 AM<br>
<div class=3D"im">&gt;Subject: Re: SEVERE: Unable to start cluster.<br>
&gt;<br>
&gt;<br>
</div><div><div></div><div class=3D"h5">&gt;pfa server.xml<br>
&gt;<br>
&gt;The same i am using for all the 10 tomcats.<br>
&gt;<br>
&gt;<br>
&gt;<br>
&gt;<br>
&gt;On Thu, Apr 5, 2012 at 9:55 PM, Pid &lt;<a href=3D"mailto:pid@pidster.c=
om">pid@pidster.com</a>&gt; wrote:<br>
&gt;<br>
&gt;On 05/04/2012 15:13, Dhaval Jaiswal wrote:<br>
&gt;&gt;&gt; I have tested the below cluster manager; as per the instructio=
n i have<br>
&gt;&gt;&gt; changed. However, when we try to deploy the apps on tomcat it =
was<br>
&gt;&gt;&gt; throwing error that<br>
&gt;&gt;&gt;<br>
&gt;&gt;&gt; WARNING: Unable to send map start message.<br>
&gt;&gt;&gt; Apr 5, 2012 1:37:12 PM org.apache.catalina.ha.session.BackupMa=
nager start<br>
&gt;&gt;&gt; SEVERE: Unable to start BackupManager<br>
&gt;&gt;&gt; java.lang.RuntimeException: Unable to start replicated map.<br=
>
&gt;&gt;&gt; =A0 =A0 =A0 =A0at<br>
&gt;&gt;&gt; org.apache.catalina.tribes.tipis.AbstractReplicatedMap.init(Ab=
stractReplicatedMap.java:230)<br>
&gt;&gt;&gt;<br>
&gt;&gt;&gt; Failed to start BackupManager: =A0java.lang.IllegalArgumentExc=
eption:<br>
&gt;&gt;&gt; Listener already<br>
&gt;&gt;&gt; exists:{}[org.apache.catalina.tribes.tipis.LazyReplicatedMap]<=
br>
&gt;&gt;&gt;<br>
&gt;&gt;&gt;<br>
&gt;&gt;&gt;<br>
&gt;&gt;&gt; i am using below server.xml for all the 10 tomcats. Do i have =
to change<br>
&gt;&gt;&gt; it for every tomcat. How would i fix it.<br>
&gt;&gt;&gt;<br>
&gt;&gt;&gt;<br>
&gt;&gt;&gt;<br>
&gt;&gt;&gt; &lt;Cluster className=3D&quot;org.apache.catalina.ha.tcp.Simpl=
eTcpCluster&quot;<br>
&gt;&gt;&gt; channelSendOptions=3D&quot;6&quot;&gt;<br>
&gt;&gt;&gt; =A0 =A0 =A0 =A0 &lt;Manager<br>
&gt;&gt;&gt; className=3D&quot;org.apache.catalina.ha.session.BackupManager=
&quot;<br>
&gt;&gt;&gt; expireSessionsOnShutdown=3D&quot;false&quot;<br>
&gt;&gt;&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0notifyListenersOnReplic=
ation=3D&quot;true&quot; mapSendOptions=3D&quot;6&quot;/&gt;<br>
&gt;&gt;&gt;<br>
&gt;&gt;&gt; =A0 =A0 =A0 =A0 =A0 =A0 &lt;Channel<br>
&gt;&gt;&gt; className=3D&quot;org.apache.catalina.tribes.group.GroupChanne=
l&quot;&gt;<br>
&gt;&gt;&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0&lt;Membership<br>
&gt;&gt;&gt; className=3D&quot;org.apache.catalina.tribes.membership.McastS=
ervice&quot;<br>
&gt;&gt;&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 address=3D&quo=
t;228.0.0.4&quot;<br>
&gt;&gt;&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 port=3D&quot;4=
5563&quot;<br>
&gt;&gt;&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 frequency=3D&q=
uot;500&quot;<br>
&gt;&gt;&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 dropTime=3D&qu=
ot;30000&quot;/&gt;<br>
&gt;&gt;&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0&lt;Receiver<br>
&gt;&gt;&gt; className=3D&quot;org.apache.catalina.tribes.transport.nio.Nio=
Receiver&quot;<br>
&gt;&gt;&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 address=3D&quot;au=
to&quot;<br>
&gt;&gt;&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 port=3D&quot;4000&=
quot;<br>
&gt;&gt;&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 selectorTimeout=3D=
&quot;5000&quot;<br>
&gt;&gt;&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 timeout=3D&quot;60=
000&quot;<br>
&gt;&gt;&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 maxThreads=3D&quot=
;6&quot;/&gt;<br>
&gt;&gt;&gt;<br>
&gt;&gt;&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0&lt;Sender<br>
&gt;&gt;&gt; className=3D&quot;org.apache.catalina.tribes.transport.Replica=
tionTransmitter&quot;&gt;<br>
&gt;&gt;&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 &lt;Transport<br>
&gt;&gt;&gt; className=3D&quot;org.apache.catalina.tribes.transport.nio.Poo=
ledParallelSender&quot; timeout=3D&quot;60000&quot;<br>
&gt;&gt;&gt; keepAliveCount=3D&quot;0&quot;/&gt;<br>
&gt;&gt;&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0&lt;/Sender&gt;<br>
&gt;&gt;&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0&lt;Interceptor<br>
&gt;&gt;&gt; className=3D&quot;org.apache.catalina.tribes.group.interceptor=
s.TcpFailureDetector&quot;/&gt;<br>
&gt;&gt;&gt; =A0 =A0 =A0 =A0 =A0 =A0 =A0&lt;Interceptor<br>
&gt;&gt;&gt; className=3D&quot;org.apache.catalina.tribes.group.interceptor=
s.MessageDispatch15Interceptor&quot;/&gt;<br>
&gt;&gt;&gt; =A0 =A0 =A0 =A0 =A0 =A0 &lt;!-- =A0&lt;Interceptor<br>
&gt;&gt;&gt; className=3D&quot;org.apache.catalina.tribes.group.interceptor=
s.ThroughputInterceptor&quot;/&gt;<br>
&gt;&gt;&gt; --&gt;<br>
&gt;&gt;&gt; =A0 =A0 =A0 =A0 =A0 =A0&lt;/Channel&gt;<br>
&gt;&gt;&gt; =A0 =A0 =A0 =A0 =A0&lt;Valve className=3D&quot;org.apache.cata=
lina.ha.tcp.ReplicationValve&quot;<br>
&gt;&gt;&gt;<br>
&gt;&gt;&gt; filter=3D&quot;.*\.gif|.*\.js|.*\.jpeg|.*\.jpg|.*\.png|.*\.htm=
|.*\.html|.*\.css|.*\.txt&quot;/&gt;<br>
&gt;&gt;&gt; =A0 =A0 =A0 =A0 =A0&lt;Valve<br>
&gt;&gt;&gt; className=3D&quot;org.apache.catalina.ha.session.JvmRouteBinde=
rValve&quot;/&gt;<br>
&gt;&gt;&gt; =A0 =A0 =A0 =A0&lt;ClusterListener<br>
&gt;&gt;&gt; className=3D&quot;org.apache.catalina.ha.session.ClusterSessio=
nListener&quot;/&gt;<br>
&gt;&gt;&gt; =A0 =A0 =A0 =A0&lt;ClusterListener<br>
&gt;&gt;&gt; className=3D&quot;org.apache.catalina.ha.session.JvmRouteSessi=
onIDBinderListener&quot;/&gt;<br>
&gt;&gt;&gt; =A0 =A0 =A0&lt;/Cluster&gt;<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;Wow. =A0That&#39;s pretty neat, I&#39;ve never seen Tomcat start up=
 with just the<br>
&gt;&gt;cluster definition.<br>
&gt;&gt;<br>
&gt;&gt;How about you:<br>
&gt;&gt;<br>
&gt;&gt;1) remove all comments<br>
&gt;&gt;2) remove all passwords<br>
&gt;&gt;3) post the whole server.xml inline in your next reply<br>
<br>
<br>
</div></div>Dhaval,<br>
<br>
<br>
Please try to avoid posting in HTML. The font is sometimes difficult to rea=
d.<br>
<br>
Please don&#39;t cc me. I get the same message on the list, and with about =
200 mail messages per day on this account I might overlook stuff if I get a=
 lot of duplicate messages.<br>
<br>
Please post stuff inline and not as attachments. While I got the attached s=
erver.xml file, the list generally strips attachments.<br>
<br>
All that being said, here are my comments:<br>
<br>
&lt;!-- From your server.xml --&gt;<br>
&lt;Listener<br>
=A0 className=3D&quot;org.apache.catalina.core.AprLifecycleListener&quot; S=
SLEngine=3D&quot;on&quot; /&gt;<br>
&lt;Listener<br>
=A0 className=3D&quot;org.apache.catalina.core.JasperListener&quot; /&gt;<b=
r>
&lt;Listener<br>
=A0 className=3D&quot;org.apache.catalina.mbeans.ServerLifecycleListener&qu=
ot; /&gt;<br>
&lt;Listener<br>
=A0 className=3D&quot;org.apache.catalina.mbeans.GlobalResourcesLifecycleLi=
stener&quot; /&gt;<br>
<br>
So you&#39;ve removed the memory leak prevention listener from your<br>
server.xml? Is there any reason why you&#39;ve done that?<br>
<br>
&lt;!-- from your server.xml --&gt;<br>
&lt;Connector port=3D&quot;8080&quot; protocol=3D&quot;HTTP/1.1&quot;=A0<br=
>
=A0 =A0 =A0 =A0 =A0 =A0connectionTimeout=3D&quot;20000&quot;=A0<br>
=A0 =A0 =A0 =A0 =A0 =A0redirectPort=3D&quot;8443&quot; /&gt;<br>
<br>
&lt;Connector port=3D&quot;8009&quot;<br>
=A0 =A0 =A0 =A0 =A0 =A0protocol=3D&quot;AJP/1.3&quot;<br>
=A0 =A0 =A0 =A0 =A0 =A0redirectPort=3D&quot;8443&quot;<br>
=A0 =A0 =A0 =A0 =A0 =A0backlog=3D&quot;100&quot;<br>
=A0 =A0 =A0 =A0 =A0 =A0maxThreads=3D&quot;40000&quot; /&gt;<br>
<br>
No URIEncoding=3D&quot;UTF-8&quot; on your connectors? I checked your web s=
ite and<br>
there doesn&#39;t seem to be any characters that would be<br>
impacted. However, I was thinking that setting UTF-8 on all connectors<br>
is in general a good thing.<br>
<br>
40000 threads for the AJP connector with only a backlog of 100? I hope that=
<br>
<br>
a) your Apache HTTPD server is configured appropriately<br>
b) you can have this many file descriptors open<br>
<br>
&lt;!-- from your server.xml --&gt;<br>
<div class=3D"im">&lt;Membership<br>
=A0 =A0 =A0 =A0 =A0 =A0 className=3D&quot;org.apache.catalina.tribes.member=
ship.McastService&quot;<br>
=A0 =A0 =A0 =A0 =A0 =A0 address=3D&quot;228.0.0.4&quot;<br>
</div>=A0 =A0 =A0 =A0 =A0 =A0 port=3D&quot;45564&quot;<br>
<div class=3D"im">=A0 =A0 =A0 =A0 =A0 =A0 frequency=3D&quot;500&quot;<br>
=A0 =A0 =A0 =A0 =A0 =A0 dropTime=3D&quot;30000&quot;/&gt;<br>
<br>
</div>You said that you use this same server.xml for all 10<br>
Tomcats. However, in a previous message you said you were trying to<br>
cluster 7 Tomcats (192.168.3.5 to 192.168.3.11). If you use the same<br>
multicast address and port for all 10 Tomcats, then all 10 Tomcats<br>
will be a part of the cluster.<br>
<div class=3D"im"><br>
&gt; I have tested the below cluster manager; as per the instruction i have=
<br>
<br>
&gt; changed. However, when we try to deploy the apps on tomcat it was<br>
&gt; throwing error that=A0<br>
<br>
</div>Does this mean that the cluster actually starts without your web<br>
application? If you&#39;ve modified the logging.properties file, what does<=
br>
the cluster logging file say? Please post the information inline as the<br>
mailing list tends to strip attachments.<br>
<br>
The default dropTime is 3000 ms (3 seconds). Is your network busy<br>
<br>
enough so that a 30 second drop time is reasonable? If it is, then<br>
maybe a better networking infrastructure is in order.<br>
<br>
&lt;!-- from your server.xml --&gt;<br>
<div class=3D"im">&lt;Sender<br>
=A0 className=3D&quot;org.apache.catalina.tribes.transport.ReplicationTrans=
mitter&quot;&gt;<br>
=A0 &lt;Transport<br>
=A0 className=3D&quot;org.apache.catalina.tribes.transport.nio.PooledParall=
elSender&quot;<br>
=A0 =A0 =A0 =A0 =A0 =A0 =A0timeout=3D&quot;60000&quot;<br>
=A0 =A0 =A0 =A0 =A0 =A0 =A0keepAliveCount=3D&quot;0&quot;/&gt;<br>
&lt;/Sender&gt;<br>
<br>
</div>keepAliveCount=3D&quot;0&quot; ?<br>
<br>
>From the documentation:<br>
<br>
The number of requests that can go through the socket before the<br>
socket is closed, and reopened for the next request. The default value<br>
is -1, which is unlimited.<br>
<br>
So you&#39;re saying here that NO requests can go through the socket<br>
before the socket is closed? At the best interpretation, you&#39;ll get<br>
one message through the socket, then the socket closes and<br>
reopens. This doesn&#39;t sound very performant.<br>
<br>
Other than that, your clustering setup does not look a lot different<br>
than mine. I place my cluster in the &lt;Host&gt; element since I am<br>
experimenting with farm deployment. Mine works even when changing from<br>
the DeltaManager (only three node cluster) to the BackupManager.<br>
<br>
What is in your application&#39;s context.xml and web.xml files? Please<br>
post both (inline - the list tends to strip attachments), with<br>
comments and sensitive information removed.<br>
<br>
I suspect that you have a listener defined in either context.xml or<br>
web.xml.<br>
<br>
All you really need to do to get session clustering to work is:<br>
<br>
1. &lt;distributable/&gt; in web.xml<br>
2. Make sure that all session objects are serializalble.<br>
<br>
Actually there is a bit more, but the above are the basics.<br>
<div><div></div><div class=3D"h5"><br>
. . . . just my two cents.<br>
/mde/<br>
<br>
<br>
---------------------------------------------------------------------<br>
To unsubscribe, e-mail: <a href=3D"mailto:users-unsubscribe@tomcat.apache.o=
rg">users-unsubscribe@tomcat.apache.org</a><br>
For additional commands, e-mail: <a href=3D"mailto:users-help@tomcat.apache=
.org">users-help@tomcat.apache.org</a><br>
<br>
</div></div></blockquote></div><br><br clear=3D"all"><br>-- <br><table styl=
e=3D"border-collapse:collapse" border=3D"0" cellpadding=3D"0" cellspacing=
=3D"0"><tbody><tr><td rowspan=3D"5" style=3D"width:127.8pt;padding:0in 5.4p=
t 0in 5.4pt" valign=3D"top" width=3D"170">
<p><a href=3D"http://www.via.com/" target=3D"_blank"><span style=3D"color:b=
lue;text-decoration:none"><img src=3D"cid:image001.png@01CD1254.166F7B10" a=
lt=3D"Inline image 2" height=3D"77" width=3D"145" border=3D"0"></span></a><=
/p></td><td style=3D"width:351.0pt;padding:0in 5.4pt 0in 5.4pt" valign=3D"t=
op" width=3D"468">
<p><b><span style=3D"font-size:12.0pt;color:red">Dhaval</span></b> <span st=
yle=3D"color:#595959">| Database &amp; System </span><span style=3D"font-si=
ze:12.0pt;font-family:&quot;Times New Roman&quot;,&quot;serif&quot;"></span=
></p>
</td></tr><tr><td style=3D"width:351.0pt;padding:0in 5.4pt 0in 5.4pt" valig=
n=3D"top" width=3D"468"><p><b>E:</b><span style=3D"color:#595959"> dhaval.j=
aiswal<a href=3D"mailto:ramya@via.com" target=3D"_blank"><span style=3D"col=
or:blue">@via.com</span></a>| </span><b>T:</b><span style=3D"color:#595959"=
> 080 4043 3000 | </span><b>M:</b><span style=3D"color:#595959"> +91 - 8095=
 397 843</span><span style=3D"font-size:12.0pt;font-family:&quot;Times New =
Roman&quot;,&quot;serif&quot;"></span></p>
</td></tr><tr><td style=3D"width:351.0pt;padding:0in 5.4pt 0in 5.4pt" valig=
n=3D"top" width=3D"468"><p><a href=3D"http://www.via.com/" target=3D"_blank=
"><span style=3D"color:blue;text-decoration:none"><img src=3D"cid:image002.=
jpg@01CD1254.166F7B10" alt=3D"all-icon.jpg" height=3D"57" width=3D"374" bor=
der=3D"0"></span></a></p>
</td></tr></tbody></table><br>

--e89a8f643ce641076e04bd00f8f8--
--e89a8f643ce641077004bd00f8f9--

From users-return-233419-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr  6 11:41:54 2012
Return-Path: <users-return-233419-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 620829F75
	for <apmail-tomcat-users-archive@www.apache.org>; Fri,  6 Apr 2012 11:41:54 +0000 (UTC)
Received: (qmail 23210 invoked by uid 500); 6 Apr 2012 11:41:51 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 23134 invoked by uid 500); 6 Apr 2012 11:41:50 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 23125 invoked by uid 99); 6 Apr 2012 11:41:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 11:41:50 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of randy.very.gray@gmail.com designates 209.85.210.193 as permitted sender)
Received: from [209.85.210.193] (HELO mail-iy0-f193.google.com) (209.85.210.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 11:41:44 +0000
Received: by iaae16 with SMTP id e16so736618iaa.0
        for <users@tomcat.apache.org>; Fri, 06 Apr 2012 04:41:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=AIk3TdZUbv4+DfDMjUxvIvs5GKTOSaXsJAn3iw3DLuA=;
        b=iD97W7AVj/URnslL8zfjTi9AcpcGQ1QcB2mC6vAf+9s3OnSEwYak4PcD60413ROfy5
         vCE9gAkcoGCBOlDdh4eZhpDRD0B7dxIRQMBKghvwrlxtODFj5eMqFq+lPhhEGhtoh1a+
         ZwErebKjKEUjE4tayHAdW6Hd+mr3Z9jHkfAmnpB6eHRu5e/JIajC5+x29UZN6w+G+yGl
         CCNZTAEZZ/tuR6Q32+7ilr0WfXZELXsjt4pn5vR8sti5HeInjNxCnj09X6RDIa2+fnNh
         bXtP5jzQyKHcNfiojbx1B9hinJ4RkeIxtJ1yzG8FzysoBjbcnPWw7UgUfr+++vlk7iRR
         yNhg==
MIME-Version: 1.0
Received: by 10.50.94.200 with SMTP id de8mr7531746igb.21.1333712483642; Fri,
 06 Apr 2012 04:41:23 -0700 (PDT)
Received: by 10.231.6.199 with HTTP; Fri, 6 Apr 2012 04:41:23 -0700 (PDT)
Date: Fri, 6 Apr 2012 14:41:23 +0300
Message-ID: <CANrWu+TaWd7dAnyGNPqUWfFg=DnbXTvXdB94_kaTw5pFZHDUhA@mail.gmail.com>
Subject: Prevent cleartext keystore/truststore passwords via JMX
From: Randy Gray <randy.very.gray@gmail.com>
To: users@tomcat.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,

I've been upgrading from Tomcat 6 to Tomcat 7 (7.27) and I've noticed
that the keystore and truststore passwords=A0are exposed via JMX in
cleartext (in the bean JIoEndpoint).
This was not the case in Tomcat 6, for example JIoEndpoint bean which
was exposed had much fewer attributes.
I have specified the passwords as attributes in the HTTPS connector
tag in server.xml.

Here an example with an otherwise unmodified Tomcat 7:
http://postimage.org/image/400y2pqsr/

How can I prevent that data to be exposed (as cleartext), as well as
the keystore and truststore path?

Thanks

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233420-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr  6 13:19:31 2012
Return-Path: <users-return-233420-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 33A889B48
	for <apmail-tomcat-users-archive@www.apache.org>; Fri,  6 Apr 2012 13:19:31 +0000 (UTC)
Received: (qmail 73627 invoked by uid 500); 6 Apr 2012 13:19:27 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 73536 invoked by uid 500); 6 Apr 2012 13:19:27 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 73527 invoked by uid 99); 6 Apr 2012 13:19:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 13:19:27 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of v.dymikha@msk.teztour.com designates 194.165.24.66 as permitted sender)
Received: from [194.165.24.66] (HELO mail2.teztour.com) (194.165.24.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 13:19:20 +0000
X-Bogosity: Unsure, tests=bogofilter, spamicity=0.458761, version=1.2.2
Received: from [10.1.1.101] (account v.dymikha@mail2.teztour.com HELO [10.1.1.101])
  by mail2.teztour.com (CommuniGate Pro SMTP 5.3.9)
  with ESMTPSA id 54757148 for users@tomcat.apache.org; Fri, 06 Apr 2012 17:18:59 +0400
Message-ID: <1333718339.19305.74.camel@twotower>
Subject: Where can I find slow query log produced by tomcat-jdbc?
From: Vladimir Dymikha <v.dymikha@msk.teztour.com>
Reply-To: v.dymikha@msk.teztour.com
To: users@tomcat.apache.org
Date: Fri, 06 Apr 2012 17:18:59 +0400
Organization: TezTour
Content-Type: text/plain; charset="UTF-8"
X-Mailer: Evolution 3.2.3 
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Pool works nice, but
I get empty logs/pool.2012-04-06.log
No debug messages, no slow query's.
Configuration below

-----------------------------------------------------------
datasource.xml:

<bean id="dataSourceOnline"
class="org.apache.tomcat.jdbc.pool.DataSource"
destroy-method="close"    
      p:driverClassName="oracle.jdbc.driver.OracleDriver"
      p:url="${jdbcPortalUrl}"
      p:username="${jdbcUser}"
      p:password="${jdbcPass}"   

p:connectionProperties="oracle.jdbc.defaultNChar=true;oracle.jdbc.convertNcharLiterals=true;oracle.jdbc.ReadTimeout=${jdbcTimeOut};"

p:jdbcInterceptors="SlowQueryReport(threshold=10);ConnectionState;StatementFinalizer"
      p:initialSize="10"
      p:minIdle="10"
      p:maxIdle="100"
      p:maxActive="5000"
      p:maxWait="6000"
      p:jmxEnabled="true"
      p:removeAbandoned="true"
      p:removeAbandonedTimeout="130"
      p:logAbandoned="true"
      p:testOnBorrow="false"
      p:testOnReturn="false"
      p:testWhileIdle="false"   
      p:useEquals="false"
      p:fairQueue="false"   
      p:timeBetweenEvictionRunsMillis="30000"
      p:minEvictableIdleTimeMillis="30000"
      p:validationInterval="1800000"
      p:validationQuery="SELECT 1 FROM DUAL"   
  />
-------------------------------------------------------
${catalina.home}/conf/logging.properties:

handlers = 1catalina.org.apache.juli.FileHandler,
2localhost.org.apache.juli.FileHandler,
3manager.org.apache.juli.FileHandler,
4host-manager.org.apache.juli.FileHandler,
5pool.org.apache.juli.FileHandler,, java.util.logging.ConsoleHandler

5pool.org.apache.juli.FileHandler.level = ALL
5pool.org.apache.juli.FileHandler.directory = ${catalina.base}/logs
5pool.org.apache.juli.FileHandler.prefix = pool.

org.apache.tomcat.jdbc.level = ALL
org.apache.tomcat.jdbc.handlers = 5pool.org.apache.juli.FileHandler
-------------------------------------------------------



---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233421-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr  6 13:42:28 2012
Return-Path: <users-return-233421-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0A6639F2B
	for <apmail-tomcat-users-archive@www.apache.org>; Fri,  6 Apr 2012 13:42:28 +0000 (UTC)
Received: (qmail 38170 invoked by uid 500); 6 Apr 2012 13:42:24 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 38077 invoked by uid 500); 6 Apr 2012 13:42:24 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 38067 invoked by uid 99); 6 Apr 2012 13:42:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 13:42:24 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aw@ice-sa.com designates 212.85.38.228 as permitted sender)
Received: from [212.85.38.228] (HELO tor.combios.es) (212.85.38.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 13:42:16 +0000
Received: from [192.168.245.129] (p549E0EBB.dip0.t-ipconnect.de [84.158.14.187])
	by tor.combios.es (Postfix) with ESMTPA id B9235DA069D
	for <users@tomcat.apache.org>; Fri,  6 Apr 2012 15:41:52 +0200 (CEST)
Message-ID: <4F7EF29D.7090004@ice-sa.com>
Date: Fri, 06 Apr 2012 15:41:49 +0200
From: =?ISO-8859-1?Q?Andr=E9_Warnier?= <aw@ice-sa.com>
Reply-To: Tomcat Users List <users@tomcat.apache.org>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Tomcat6 - Context - aliases
References: <1333360773430-4678428.post@n6.nabble.com> <CABzHfVn5uKEF9RKGUkqGGq56DLNFhRFm6Y_PUSUq--x3=yMpvw@mail.gmail.com> <1333363527730-4678513.post@n6.nabble.com> <4F7A11D7.80205@christopherschultz.net> <1333444940374-4681421.post@n6.nabble.com> <4F7AE221.10605@ice-sa.com> <1333549942374-4686704.post@n6.nabble.com> <1333564099167-4687332.post@n6.nabble.com> <4F7DA677.3060205@christopherschultz.net> <1333705857484-4692232.post@n6.nabble.com>
In-Reply-To: <1333705857484-4692232.post@n6.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

La,

La Massiot wrote:
...
> 
> Actually I realized that even with the previous mechanism I used (using the
> "aliases" attribute of the "Context" element of the "w/WEB-INF/context.xml"
> file), I could directly retrieve a resource by typing its exact URL in a
> browser and without having to identify in any way prior to the retrieval...
> 
I think that what we are missing here, is what exactly you are trying to achieve.
And personally (no offense intended) I have the feeling that what you are trying to do is 
fairly simple and classic, but that the way you are going about it makes it complicated 
and probably unsafe.

Let me try to summarise.

1) upload of documents/files :
- Users are able to access the webserver and to upload files/documents to it.
You have not told us how that works, if there are several users or just one, if all users 
are uploading to the same location, if this capability is restricted (login) and so on..
- when a user uploads a file/document, this file/document gets written somewhere on the 
webserver. Where ? are there several upload locations ? and how is it decided what gets 
written where ? if 2 users upload a file/document with the same filename, does the second 
one overwrite the first ?

2) download of files/documents :
- Users can (should) login to the webserver, and after that they are able to download 
files/documents.  Do all users have access to all uploaded documents ? should it be so 
that each user (or group of users) only gets access to "his own" documents ? When a gicen 
user logs in, does he get a list of all the documents ? or a list of only "his" documents ?
Does your application ("/w" ?) build a list of the files, as a html page with links, on 
which the user can just click to download a file/document ? and if so, what does bother 
you about the exact "look" of that link ? the user does not see the URL, he sees only what 
you choose to display, right ? iow in the link :
<a href="/an_alias_1/file_1.txt">file_1.txt</a>
the user only see the "file_1.txt" part, right ?
And if the link was :
<a href="/w/something-else-altogether/12345">file_1.txt</a>
the user would still only see "file_1.txt", right ?

So, if I summarise, the only part which is somewhat iffy, is that in your mechanism via 
Context, you are providing a URL which allows any user to just use that URL to retrieve a 
document (his or someone else's), without even having to login.

But this is a logical consequence of building a context "from scratch", outside of you 
"/w" context, and having Tomcat serve it, without any kind of security protecting that 
location.

In other words, why not store the documents in a directory below your "/w" context (which 
would be protected by the web.xml of the "/w" context, and provide the user with a link like :
<a href="/w/files/userx/file_1.txt">file_1.txt</a>

I guess that I don't see why you would have to go through the bother of creating another 
Context on-the-fly (and then one without any access-control whatsovever).

Of course, you /could/ store the files somewhere else, but then if that is a separate 
Tomcat context, you would need a separate authentication - or a cross-context 
authentication.  And if that location is not a Tomcat context, then you would need your 
webapp to also retrieve and deliver the files to the clients (which is quite simple, and 
is the way I would have looked at it in the first place; and this would allow you to 
control who can access what).

By the way, have you looked at the DAV application available for Tomcat ?
See : http://wiki.apache.org/tomcat/Tomcat/WebDav









---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233422-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr  6 13:58:07 2012
Return-Path: <users-return-233422-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 83E81958F
	for <apmail-tomcat-users-archive@www.apache.org>; Fri,  6 Apr 2012 13:58:07 +0000 (UTC)
Received: (qmail 78124 invoked by uid 500); 6 Apr 2012 13:58:04 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 78069 invoked by uid 500); 6 Apr 2012 13:58:04 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 78060 invoked by uid 99); 6 Apr 2012 13:58:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 13:58:04 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.91.2.13] (HELO smtp-outbound-2.vmware.com) (208.91.2.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 13:57:56 +0000
Received: from sc9-mailhost1.vmware.com (sc9-mailhost1.vmware.com [10.113.161.71])
	by smtp-outbound-2.vmware.com (Postfix) with ESMTP id A178B283D0
	for <users@tomcat.apache.org>; Fri,  6 Apr 2012 06:57:35 -0700 (PDT)
Received: from zimbra-prod-mta-1.vmware.com (zimbra-prod-mta-1.vmware.com [10.113.160.173])
	by sc9-mailhost1.vmware.com (Postfix) with ESMTP id 9DA46180A8
	for <users@tomcat.apache.org>; Fri,  6 Apr 2012 06:57:35 -0700 (PDT)
Received: from localhost (localhost.localdomain [127.0.0.1])
	by zimbra-prod-mta-1.vmware.com (Postfix) with ESMTP id 998777C72C
	for <users@tomcat.apache.org>; Fri,  6 Apr 2012 06:57:35 -0700 (PDT)
X-Virus-Scanned: amavisd-new at zimbra-prod-mta-1.vmware.com
Received: from zimbra-prod-mta-1.vmware.com ([127.0.0.1])
	by localhost (zimbra-prod-mta-1.vmware.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id bV-1jVWMBqxu for <users@tomcat.apache.org>;
	Fri,  6 Apr 2012 06:57:35 -0700 (PDT)
Received: from zimbra-prod-mbox-5.vmware.com (zimbra-prod-mbox-5.vmware.com [10.113.160.194])
	by zimbra-prod-mta-1.vmware.com (Postfix) with ESMTP id 88C2F7C6E1
	for <users@tomcat.apache.org>; Fri,  6 Apr 2012 06:57:35 -0700 (PDT)
Date: Fri, 6 Apr 2012 06:57:35 -0700 (PDT)
From: Daniel Mikusa <dmikusa@vmware.com>
To: Tomcat Users List <users@tomcat.apache.org>
Message-ID: <10438132.90.1333720651782.JavaMail.daniel@cleveland>
In-Reply-To: <1333718339.19305.74.camel@twotower>
Subject: Re: Where can I find slow query log produced by tomcat-jdbc?
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Originating-IP: [24.160.217.1]
X-Mailer: Zimbra 7.1.3_GA_3374 (Zimbra Desktop/7.1.4_11273_Linux)
X-Virus-Checked: Checked by ClamAV on apache.org

----- Original Message -----
> Pool works nice, but
> I get empty logs/pool.2012-04-06.log
> No debug messages, no slow query's.
> Configuration below

Maybe you have really fast queries?

I believe if you set "threshold=-1", it should log all queries.  Not something you'd want to do in production, but it might help to further troubleshoot the issue.

Dan


> 
> -----------------------------------------------------------
> datasource.xml:
> 
> <bean id="dataSourceOnline"
> class="org.apache.tomcat.jdbc.pool.DataSource"
> destroy-method="close"
>       p:driverClassName="oracle.jdbc.driver.OracleDriver"
>       p:url="${jdbcPortalUrl}"
>       p:username="${jdbcUser}"
>       p:password="${jdbcPass}"
> 
> p:connectionProperties="oracle.jdbc.defaultNChar=true;oracle.jdbc.convertNcharLiterals=true;oracle.jdbc.ReadTimeout=${jdbcTimeOut};"
> 
> p:jdbcInterceptors="SlowQueryReport(threshold=10);ConnectionState;StatementFinalizer"
>       p:initialSize="10"
>       p:minIdle="10"
>       p:maxIdle="100"
>       p:maxActive="5000"
>       p:maxWait="6000"
>       p:jmxEnabled="true"
>       p:removeAbandoned="true"
>       p:removeAbandonedTimeout="130"
>       p:logAbandoned="true"
>       p:testOnBorrow="false"
>       p:testOnReturn="false"
>       p:testWhileIdle="false"
>       p:useEquals="false"
>       p:fairQueue="false"
>       p:timeBetweenEvictionRunsMillis="30000"
>       p:minEvictableIdleTimeMillis="30000"
>       p:validationInterval="1800000"
>       p:validationQuery="SELECT 1 FROM DUAL"
>   />
> -------------------------------------------------------
> ${catalina.home}/conf/logging.properties:
> 
> handlers = 1catalina.org.apache.juli.FileHandler,
> 2localhost.org.apache.juli.FileHandler,
> 3manager.org.apache.juli.FileHandler,
> 4host-manager.org.apache.juli.FileHandler,
> 5pool.org.apache.juli.FileHandler,, java.util.logging.ConsoleHandler
> 
> 5pool.org.apache.juli.FileHandler.level = ALL
> 5pool.org.apache.juli.FileHandler.directory = ${catalina.base}/logs
> 5pool.org.apache.juli.FileHandler.prefix = pool.
> 
> org.apache.tomcat.jdbc.level = ALL
> org.apache.tomcat.jdbc.handlers = 5pool.org.apache.juli.FileHandler
> -------------------------------------------------------
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233423-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr  6 14:00:28 2012
Return-Path: <users-return-233423-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8B6EF9725
	for <apmail-tomcat-users-archive@www.apache.org>; Fri,  6 Apr 2012 14:00:28 +0000 (UTC)
Received: (qmail 90018 invoked by uid 500); 6 Apr 2012 14:00:25 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 89905 invoked by uid 500); 6 Apr 2012 14:00:25 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 89895 invoked by uid 99); 6 Apr 2012 14:00:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 14:00:25 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.91.2.13] (HELO smtp-outbound-2.vmware.com) (208.91.2.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 14:00:17 +0000
Received: from sc9-mailhost2.vmware.com (sc9-mailhost2.vmware.com [10.113.161.72])
	by smtp-outbound-2.vmware.com (Postfix) with ESMTP id DC2CB28176
	for <users@tomcat.apache.org>; Fri,  6 Apr 2012 06:59:56 -0700 (PDT)
Received: from zimbra-prod-mta-1.vmware.com (zimbra-prod-mta-1.vmware.com [10.113.160.173])
	by sc9-mailhost2.vmware.com (Postfix) with ESMTP id D90F8B0395
	for <users@tomcat.apache.org>; Fri,  6 Apr 2012 06:59:56 -0700 (PDT)
Received: from localhost (localhost.localdomain [127.0.0.1])
	by zimbra-prod-mta-1.vmware.com (Postfix) with ESMTP id D44A67C7F8
	for <users@tomcat.apache.org>; Fri,  6 Apr 2012 06:59:56 -0700 (PDT)
X-Virus-Scanned: amavisd-new at zimbra-prod-mta-1.vmware.com
Received: from zimbra-prod-mta-1.vmware.com ([127.0.0.1])
	by localhost (zimbra-prod-mta-1.vmware.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 5kul1beZcTqM for <users@tomcat.apache.org>;
	Fri,  6 Apr 2012 06:59:56 -0700 (PDT)
Received: from zimbra-prod-mbox-5.vmware.com (zimbra-prod-mbox-5.vmware.com [10.113.160.194])
	by zimbra-prod-mta-1.vmware.com (Postfix) with ESMTP id C41AA7C7EE
	for <users@tomcat.apache.org>; Fri,  6 Apr 2012 06:59:56 -0700 (PDT)
Date: Fri, 6 Apr 2012 06:59:56 -0700 (PDT)
From: Daniel Mikusa <dmikusa@vmware.com>
To: Tomcat Users List <users@tomcat.apache.org>
Message-ID: <924777.97.1333720795922.JavaMail.daniel@cleveland>
In-Reply-To: <1333718339.19305.74.camel@twotower>
Subject: Re: Where can I find slow query log produced by tomcat-jdbc?
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Originating-IP: [24.160.217.1]
X-Mailer: Zimbra 7.1.3_GA_3374 (Zimbra Desktop/7.1.4_11273_Linux)
X-Virus-Checked: Checked by ClamAV on apache.org

Just saw this too. 

  https://issues.apache.org/bugzilla/show_bug.cgi?id=51237

You might want to check what version you are using.

Dan


----- Original Message -----
> Pool works nice, but
> I get empty logs/pool.2012-04-06.log
> No debug messages, no slow query's.
> Configuration below
> 
> -----------------------------------------------------------
> datasource.xml:
> 
> <bean id="dataSourceOnline"
> class="org.apache.tomcat.jdbc.pool.DataSource"
> destroy-method="close"
>       p:driverClassName="oracle.jdbc.driver.OracleDriver"
>       p:url="${jdbcPortalUrl}"
>       p:username="${jdbcUser}"
>       p:password="${jdbcPass}"
> 
> p:connectionProperties="oracle.jdbc.defaultNChar=true;oracle.jdbc.convertNcharLiterals=true;oracle.jdbc.ReadTimeout=${jdbcTimeOut};"
> 
> p:jdbcInterceptors="SlowQueryReport(threshold=10);ConnectionState;StatementFinalizer"
>       p:initialSize="10"
>       p:minIdle="10"
>       p:maxIdle="100"
>       p:maxActive="5000"
>       p:maxWait="6000"
>       p:jmxEnabled="true"
>       p:removeAbandoned="true"
>       p:removeAbandonedTimeout="130"
>       p:logAbandoned="true"
>       p:testOnBorrow="false"
>       p:testOnReturn="false"
>       p:testWhileIdle="false"
>       p:useEquals="false"
>       p:fairQueue="false"
>       p:timeBetweenEvictionRunsMillis="30000"
>       p:minEvictableIdleTimeMillis="30000"
>       p:validationInterval="1800000"
>       p:validationQuery="SELECT 1 FROM DUAL"
>   />
> -------------------------------------------------------
> ${catalina.home}/conf/logging.properties:
> 
> handlers = 1catalina.org.apache.juli.FileHandler,
> 2localhost.org.apache.juli.FileHandler,
> 3manager.org.apache.juli.FileHandler,
> 4host-manager.org.apache.juli.FileHandler,
> 5pool.org.apache.juli.FileHandler,, java.util.logging.ConsoleHandler
> 
> 5pool.org.apache.juli.FileHandler.level = ALL
> 5pool.org.apache.juli.FileHandler.directory = ${catalina.base}/logs
> 5pool.org.apache.juli.FileHandler.prefix = pool.
> 
> org.apache.tomcat.jdbc.level = ALL
> org.apache.tomcat.jdbc.handlers = 5pool.org.apache.juli.FileHandler
> -------------------------------------------------------
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233424-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr  6 15:34:04 2012
Return-Path: <users-return-233424-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 227369E08
	for <apmail-tomcat-users-archive@www.apache.org>; Fri,  6 Apr 2012 15:34:04 +0000 (UTC)
Received: (qmail 44564 invoked by uid 500); 6 Apr 2012 15:34:00 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 44497 invoked by uid 500); 6 Apr 2012 15:34:00 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 44486 invoked by uid 99); 6 Apr 2012 15:34:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 15:34:00 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [76.96.62.80] (HELO qmta08.westchester.pa.mail.comcast.net) (76.96.62.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 15:33:51 +0000
Received: from omta24.westchester.pa.mail.comcast.net ([76.96.62.76])
	by qmta08.westchester.pa.mail.comcast.net with comcast
	id ufS81i0041ei1Bg58fZWN7; Fri, 06 Apr 2012 15:33:30 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta24.westchester.pa.mail.comcast.net with comcast
	id ufZW1i01x38FjT13kfZWui; Fri, 06 Apr 2012 15:33:30 +0000
Message-ID: <4F7F0CCB.7060003@christopherschultz.net>
Date: Fri, 06 Apr 2012 11:33:31 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: request.login() not persistent
References: <CACGXvK2gJGkwpMAjGn=PMDeQ__cD9Hc5fiWcLmvWbgPNtJQB8w@mail.gmail.com> <CABzHfVm_SYf0d4px-X2E-uON55nr4PE9seRFkLhPjFp6BAwykw@mail.gmail.com> <CACGXvK2t1=rfVrE1J0SXvwLjgVBUnmXb9y-L9ccva690Cxqv3Q@mail.gmail.com>
In-Reply-To: <CACGXvK2t1=rfVrE1J0SXvwLjgVBUnmXb9y-L9ccva690Cxqv3Q@mail.gmail.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Jerry,

On 4/5/12 6:11 PM, Jerry Malcolm wrote:
> Konstantin,
> 
> I was using:
> 
> <META HTTP-EQUIV="Refresh" CONTENT="0; URL=/userhome">
> 
> I changed it per your comment to:
> 
> <%  response.sendRedirect( response.encodeRedirectURL( "/userhome"
> )); %>

A more minimal change would have been this:

<META HTTP-EQUIV="Refresh" CONTENT="0; URL=<%=
response.encodeURL("/userhome") %>">

I always use request.getContextPath() + ... when building URLs, too:
that makes them relocatable. So the entire incantation would be:

<META HTTP-EQUIV="Refresh" CONTENT="0; URL=<%=
response.encodeURL(request.getContextPath() + "/userhome") %>" />

(I used <meta /> as an XHTML tag instead of <meta>, there. I dunno
what your content-type actually is, though).

You'll also want to make sure that your login <form> encodes any
session id information into the "action" attribute, in case a session
already exists. Otherwise, your webapp won't work unless cookies are
enabled.

> It's working now, but I have no clue what's going on.

Read the javadoc for HttpServletResponse.encodeURL and
HttpServletResponse.encodeRedirectURL.

> But I am apparently missing something major here, and I want to
> understand this.  So please educate me a bit...

Your client probably does not have the session id after you call
login(). The javadoc for login() doesn't say anything about
communicating a session id to the client, and I couldn't find in the
spec document itself any mention of cookies and the login() method
(though I didn't look terribly hard).

I suspect that login() does not automatically set a "Set-Cookie"
header on the response: you may have to do that yourself. You can tell
easily by rolling-back your changes and looking at the HTTP traffic
between your client and server during the login/login-again conversation.

> I completely understand the session philosophy and how the logon
> state is maintained in the session.  When it was failing the
> session id did not change between the logon page and the redirect
> target page.

As measured by what?

> So I'm assuming the session wasn't dropped.  It's like the logged
> on state was not saved in the session object.

According to the servlet spec, having a session and being logged-in
are equivalent, as long as authentication has occurred once for form
authentication.

> 1) The <meta... html tag simply tells the browser when it reads the
> page to 'try again' at the new URL.  In my mind that is no
> different from the user responding to something on a page and
> submitting a request for a new page. Why is the session logged-on
> state information somehow lost in that interaction when it is
> maintained if the user just hits a button and goes to another
> page?

Possibly because you are not properly encoding the session id in the
URL, coupled with loss or absence of the session cookie being sent in
the response.

> 2) I assume the response.sendRedirect( ) with the encoded URL sends
> one of the 301 or 303 or something response codes back, right?  In
> either case, <meta... or 30x response code, why is the session info
> lost in one and not the other?

See above.

> 3) The biggest concern I have is that it worked for several months
> on one machine with the <meta... tag coding.  If it worked, then it
> stopped, now it works again, and I don't know why, my assumption is
> that it's going to stop working again for me sometime in the
> future.  What could I have done that made it work at one time on
> one machine and then stop?

There could be several reasons, but the easiest thing that could have
happened, as Chuck suggests, is that cookies were disabled on the client.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk9/DMsACgkQ9CaO5/Lv0PDQrgCgttz9YAJh0E/Irq0cupx/kO1o
ElAAn1mfiiQr90SU3pw9LMf95l41rzl+
=HMeM
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233425-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr  6 15:41:20 2012
Return-Path: <users-return-233425-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0C88890E9
	for <apmail-tomcat-users-archive@www.apache.org>; Fri,  6 Apr 2012 15:41:20 +0000 (UTC)
Received: (qmail 65083 invoked by uid 500); 6 Apr 2012 15:41:16 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 65013 invoked by uid 500); 6 Apr 2012 15:41:16 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 65003 invoked by uid 99); 6 Apr 2012 15:41:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 15:41:16 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [76.96.62.40] (HELO qmta04.westchester.pa.mail.comcast.net) (76.96.62.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 15:41:10 +0000
Received: from omta05.westchester.pa.mail.comcast.net ([76.96.62.43])
	by qmta04.westchester.pa.mail.comcast.net with comcast
	id ufes1i0020vyq2s54fgqVF; Fri, 06 Apr 2012 15:40:50 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta05.westchester.pa.mail.comcast.net with comcast
	id ufgp1i01038FjT13RfgqtR; Fri, 06 Apr 2012 15:40:50 +0000
Message-ID: <4F7F0E83.8080601@christopherschultz.net>
Date: Fri, 06 Apr 2012 11:40:51 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Accessing USB drive content from pages served from tomcat6  server
References: <85DA62F108ABD4439B9B6A3AB2B2880F01F613A7@BLR-EC-MBX5.wipro.com>
In-Reply-To: <85DA62F108ABD4439B9B6A3AB2B2880F01F613A7@BLR-EC-MBX5.wipro.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Souvik,

On 4/4/12 12:23 AM, souvik.datta@wipro.com wrote:
> I have a NPAPI plugin which gets a notification from my middleware 
> whenever a USB MSD device is connected to the system. The HTML
> page which loads the plug-in then plays the Media
> (audio/video/pictures) that are present in the USB drive. This html
> page is served from a local tomcat server (the same PC to which the
> USB MSD device has been connected). To enable access to USB Device
> from the HTML page (served from tomcat6 server), I have added
> following lines in /etc/tomcat6/server.xml (in Ubuntu 10.10):
> 
> <Context path="/usb_0" docBase="/media/WCF/usb_0/"/>

So, first, you shouldn't put <Context> in server.xml. Search the
archives and read the Tomcat User Guide for many reasons why not. La
has the proper prescription for how to deploy a context outside of
your appBase.

> When I am pluggin in the first USB device (which is mounted at 
> /media/WCF/usb_0), I am able to access the device content from my 
> HTML page (served from my tomcat6 server ) but when I am
> connecting the second USB device which is mounted at
> /media/WCF/usb_1, I am not able to access its content.

What do you mean "not able to access its content"? Do you get 404s?
500s? Does the thread hang? Does the JVM crash?

Tomcat caches certain information about the contexts it deploys. I
suspect that by removing the webapp's docBase (or suddenly having it
appear out of nowhere when a USB device is connected) is surprising to
say the least.

> In the browser when I am trying to check the content of 
> http://localhost:8080/usb_1/ by typing the URL in the address bar,
> I am getting error resource not available. For usb_0, I am able to
> see the resources.

Does usb_0 always work and usb_1 never works? What happens when both
devices are connected *before* you start Tomcat? What about when
neither of them are connected beforehand? What about starting Tomcat
with no USB devices, then trying to access the resources, then
attaching the devices and trying again?

All of those things would be good to know in order to help you out.

Honestly, I'm not sure why you'd want to run a web server off a device
which isn't guaranteed to be available.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk9/DoMACgkQ9CaO5/Lv0PBfAACfVXlHAj4e5uNvBdXCZr2tkb+W
WhgAn29GaUK25ShtOA4J0nvpGMgMPhRU
=MQjC
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233426-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr  6 15:43:13 2012
Return-Path: <users-return-233426-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2E54A918A
	for <apmail-tomcat-users-archive@www.apache.org>; Fri,  6 Apr 2012 15:43:13 +0000 (UTC)
Received: (qmail 72742 invoked by uid 500); 6 Apr 2012 15:43:09 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 72593 invoked by uid 500); 6 Apr 2012 15:43:09 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 72583 invoked by uid 99); 6 Apr 2012 15:43:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 15:43:09 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [76.96.62.48] (HELO qmta05.westchester.pa.mail.comcast.net) (76.96.62.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 15:43:01 +0000
Received: from omta15.westchester.pa.mail.comcast.net ([76.96.62.87])
	by qmta05.westchester.pa.mail.comcast.net with comcast
	id ub3w1i00E1swQuc55fihzX; Fri, 06 Apr 2012 15:42:41 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta15.westchester.pa.mail.comcast.net with comcast
	id ufih1i01y38FjT13bfihwi; Fri, 06 Apr 2012 15:42:41 +0000
Message-ID: <4F7F0EF2.6090603@christopherschultz.net>
Date: Fri, 06 Apr 2012 11:42:42 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Problem tomcat
References: <CANhTVFNNhu=B-fjUnbnq-7tw7C44ENexm0WrRbWAHTKPTq2c+Q@mail.gmail.com> <4F7ED061.2030409@gmail.com>
In-Reply-To: <4F7ED061.2030409@gmail.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Ognjen,

On 4/6/12 7:15 AM, Ognjen Blagojevic wrote:
> Fairouz,
> 
> On 4.4.2012 17:25, Fairouz Fakhfakh wrote:
>> I use  Tomcat 6 and java 5.
> 
> Good to know. Send us exact versions for both. OS type and version
> could also be informative.
> 
> 
>> I have a problem by clicking on a button to access a JSP page.
> 
> Which button? If the button is on the HTML/JSP page, please send us
> that page so we can understand what is going on.
> 
> 
>> java.lang.NoSuchMethodError: 
>> org.eclipse.jdt.internal.compiler.env.NameEnvironmentAnswer.<init>(Lorg/eclipse/jdt/internal/compiler/env/IBinaryType;)V
>>
>
>> 
> Smells like a classpath issue.

Or using class files compiled for another version of either JDT or Tomcat.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk9/DvIACgkQ9CaO5/Lv0PDdhACffqrPzgqNp62aT0PUiDihzkGK
yUkAoIZWW7ik33Jg1HPKSnvMITXJghcv
=OOWv
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233427-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr  6 15:52:39 2012
Return-Path: <users-return-233427-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 38641968C
	for <apmail-tomcat-users-archive@www.apache.org>; Fri,  6 Apr 2012 15:52:39 +0000 (UTC)
Received: (qmail 95719 invoked by uid 500); 6 Apr 2012 15:52:35 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 95649 invoked by uid 500); 6 Apr 2012 15:52:35 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 95639 invoked by uid 99); 6 Apr 2012 15:52:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 15:52:35 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [76.96.59.243] (HELO qmta13.westchester.pa.mail.comcast.net) (76.96.59.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 15:52:30 +0000
Received: from omta10.westchester.pa.mail.comcast.net ([76.96.62.28])
	by qmta13.westchester.pa.mail.comcast.net with comcast
	id ufr71i0030cZkys5DfsAE6; Fri, 06 Apr 2012 15:52:10 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta10.westchester.pa.mail.comcast.net with comcast
	id ufs91i02J38FjT13WfsAmJ; Fri, 06 Apr 2012 15:52:10 +0000
Message-ID: <4F7F1128.4010002@christopherschultz.net>
Date: Fri, 06 Apr 2012 11:52:08 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Prevent cleartext keystore/truststore passwords via JMX
References: <CANrWu+TaWd7dAnyGNPqUWfFg=DnbXTvXdB94_kaTw5pFZHDUhA@mail.gmail.com>
In-Reply-To: <CANrWu+TaWd7dAnyGNPqUWfFg=DnbXTvXdB94_kaTw5pFZHDUhA@mail.gmail.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Randy,

On 4/6/12 7:41 AM, Randy Gray wrote:
> Hi,
> 
> I've been upgrading from Tomcat 6 to Tomcat 7 (7.27) and I've
> noticed that the keystore and truststore passwords are exposed via
> JMX in cleartext (in the bean JIoEndpoint). This was not the case
> in Tomcat 6, for example JIoEndpoint bean which was exposed had
> much fewer attributes. I have specified the passwords as attributes
> in the HTTPS connector tag in server.xml.
> 
> Here an example with an otherwise unmodified Tomcat 7: 
> http://postimage.org/image/400y2pqsr/
> 
> How can I prevent that data to be exposed (as cleartext), as well
> as the keystore and truststore path?

I can think of a couple of options:

1. Modify org/apache/catalina/connector/mbeans-descriptors.xml
   and suppress access to these fields (though they aren't specifically
   in there, and MbeansDescriptorsIntrospectionSource.java doesn't seem
   to consult the mbeans-descrioptors.xml files). I've never done this,
   so I can't say whether or not it will work.

2. Use TLS for JMX connections. Technically speaking, this will not
   transmit your credentials in "cleartext", though anyone who can
   connect can read your credentials. See below.

3. Use client certificates and/or username/password authentication to
   access your JMX connector. Anyone who can connect to those resources
   will probably be able to connect to other things, so having your
   trustStore password is probably the least of your worries.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk9/ESgACgkQ9CaO5/Lv0PCnjQCfbUzxll2yk5usNQlQrBkvNh7R
DCIAoJPEG65KmenExYgGtVpgGG7J880c
=9y5M
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233428-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr  6 18:10:21 2012
Return-Path: <users-return-233428-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0110099E1
	for <apmail-tomcat-users-archive@www.apache.org>; Fri,  6 Apr 2012 18:10:20 +0000 (UTC)
Received: (qmail 16118 invoked by uid 500); 6 Apr 2012 18:10:17 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 15962 invoked by uid 500); 6 Apr 2012 18:10:17 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 15953 invoked by uid 99); 6 Apr 2012 18:10:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 18:10:17 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [76.96.59.211] (HELO QMTA11.westchester.pa.mail.comcast.net) (76.96.59.211)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 18:09:58 +0000
Received: from omta21.westchester.pa.mail.comcast.net ([76.96.62.72])
	by QMTA11.westchester.pa.mail.comcast.net with comcast
	id ui8s1i0021ZXKqc5Bi9d6T; Fri, 06 Apr 2012 18:09:37 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta21.westchester.pa.mail.comcast.net with comcast
	id ui9d1i00E38FjT13hi9dfQ; Fri, 06 Apr 2012 18:09:37 +0000
Message-ID: <4F7F3160.6010200@christopherschultz.net>
Date: Fri, 06 Apr 2012 14:09:36 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: jdbc pool properties
References: <17972289.150.1333543571938.JavaMail.daniel@cleveland>
In-Reply-To: <17972289.150.1333543571938.JavaMail.daniel@cleveland>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Daniel,

On 4/4/12 8:46 AM, Daniel Mikusa wrote:
> ----- Original Message -----
>> My db connections seem to be lost after an extended period of 
>> inactivity (for a web application). And the only way to get the 
>> connections to work again is to restart tomcat.
>> 
>> My tomcat.jdbc.pool.Datasource settings have:
>> 
>> <property name="maxActive" value="100"/> <property name="maxIdle"
>> value="30"/> <property name="maxWait" value="1000"/> <property
>> name="defaultAutoCommit" value="true"/> <property
>> name="removeAbandoned" value="true"/> <property
>> name="removeAbandonedTimeout" value="60"/>
> 
> You probably want to add testOnBorrow="true" and 
> "validationQuery=SELECT 1"  (or some other valid query for your
> DB).

+1

> See the following link for an explanation of those properties.
> 
> https://commons.apache.org/dbcp/configuration.html

- -1

This is the wrong documentation for tomcat-pool. You're looking for
http://tomcat.apache.org/tomcat-7.0-doc/jdbc-pool.html

On the other hand, there was no mention of a Tomcat version, what type
of pool is actually being used (I inferred tomcat-pool from the
subject line as well as the use of "tomcat.jdbc.pool.DataSource") and
the use of <property> elements seems antiquated, so I must admit I'm a
little confused.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk9/MWAACgkQ9CaO5/Lv0PCcOgCeJcRA6Oq2KcVSDE6vIAmQ+5Ji
lJUAoL4QiLp1oZSBVkiaFYTrJTlK6Gkv
=wFzD
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233429-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr  6 20:59:21 2012
Return-Path: <users-return-233429-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 62DA89DA2
	for <apmail-tomcat-users-archive@www.apache.org>; Fri,  6 Apr 2012 20:59:21 +0000 (UTC)
Received: (qmail 95123 invoked by uid 500); 6 Apr 2012 20:59:18 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 94916 invoked by uid 500); 6 Apr 2012 20:59:17 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 94905 invoked by uid 99); 6 Apr 2012 20:59:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 20:59:17 +0000
X-ASF-Spam-Status: No, hits=1.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sahmed1020@gmail.com designates 209.85.214.173 as permitted sender)
Received: from [209.85.214.173] (HELO mail-ob0-f173.google.com) (209.85.214.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 20:59:13 +0000
Received: by obbup19 with SMTP id up19so4522316obb.18
        for <users@tomcat.apache.org>; Fri, 06 Apr 2012 13:58:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=iYyU68fRganL0w+4RF8MYJJ4E8gLtxt5dCxIzXJySQ8=;
        b=IVa8S/n+CQmqdYO8ld6eD7XQ+ytaH0vsc7ilHioeq04wmodsjawiz1FL/JLXGYv54p
         lzQU+GaBcHL5yRXk/sz4wSHZ2O8Iq0BrRYtiS2eS6QXPpjsaOxR6Xbyj5EVIdWm647H6
         FGIE55lGWnm5BfJDUemgFBCfQt3Xd+39XOXBdYsnFKLQU+Y1pQNMbOfuCyPk9gbpGyOX
         0vkHvEtuvlMnAhR/e/cLxva1ji4v8X9xtPk5J60tlcf1wc77FvX/i/YpuCTVMgRrWCgk
         Rn+mKqn77TAtBahX1CnWMkZK/S17FNZSLjtnwdY2PZp7S1Kw69S+SvODsCebAq7Rz7cb
         090g==
Received: by 10.60.14.4 with SMTP id l4mr10904184oec.39.1333745932225; Fri, 06
 Apr 2012 13:58:52 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.182.7.133 with HTTP; Fri, 6 Apr 2012 13:58:32 -0700 (PDT)
In-Reply-To: <4F7F3160.6010200@christopherschultz.net>
References: <17972289.150.1333543571938.JavaMail.daniel@cleveland> <4F7F3160.6010200@christopherschultz.net>
From: S Ahmed <sahmed1020@gmail.com>
Date: Fri, 6 Apr 2012 16:58:32 -0400
Message-ID: <CAG2rwuN1xrWSYcomScvo2B0gz1k-SAfjPyfKpcsnWmis9uvUig@mail.gmail.com>
Subject: Re: jdbc pool properties
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=e89a8fb1f54682cdf404bd08ec66
X-Virus-Checked: Checked by ClamAV on apache.org

--e89a8fb1f54682cdf404bd08ec66
Content-Type: text/plain; charset=ISO-8859-1

I'm using tomcat 7, in a spring mvc application.  The properties is in my
spring-context.xml file.

 <bean id="dataSource" class="org.apache.tomcat.jdbc.pool.DataSource"
destroy-method="close">
        <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
        <property name="url" value="jdbc:mysql://localhost/mydb"/>
        <property name="username" value="testuser"/>
        <property name="password" value="abc"/>

        <property name="maxActive" value="100"/>
        <property name="maxIdle" value="30"/>
        <property name="maxWait" value="1000"/>
        <property name="defaultAutoCommit" value="true"/>
        <property name="removeAbandoned" value="true"/>
        <property name="removeAbandonedTimeout" value="60"/>

        <property name="testOnBorrow" value="true" />
        <property name="validationQuery" value="SELECT 1" />

    </bean>

On Fri, Apr 6, 2012 at 2:09 PM, Christopher Schultz <
chris@christopherschultz.net> wrote:

> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Daniel,
>
> On 4/4/12 8:46 AM, Daniel Mikusa wrote:
> > ----- Original Message -----
> >> My db connections seem to be lost after an extended period of
> >> inactivity (for a web application). And the only way to get the
> >> connections to work again is to restart tomcat.
> >>
> >> My tomcat.jdbc.pool.Datasource settings have:
> >>
> >> <property name="maxActive" value="100"/> <property name="maxIdle"
> >> value="30"/> <property name="maxWait" value="1000"/> <property
> >> name="defaultAutoCommit" value="true"/> <property
> >> name="removeAbandoned" value="true"/> <property
> >> name="removeAbandonedTimeout" value="60"/>
> >
> > You probably want to add testOnBorrow="true" and
> > "validationQuery=SELECT 1"  (or some other valid query for your
> > DB).
>
> +1
>
> > See the following link for an explanation of those properties.
> >
> > https://commons.apache.org/dbcp/configuration.html
>
> - -1
>
> This is the wrong documentation for tomcat-pool. You're looking for
> http://tomcat.apache.org/tomcat-7.0-doc/jdbc-pool.html
>
> On the other hand, there was no mention of a Tomcat version, what type
> of pool is actually being used (I inferred tomcat-pool from the
> subject line as well as the use of "tomcat.jdbc.pool.DataSource") and
> the use of <property> elements seems antiquated, so I must admit I'm a
> little confused.
>
> - -chris
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
> Comment: GPGTools - http://gpgtools.org
> Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/
>
> iEYEARECAAYFAk9/MWAACgkQ9CaO5/Lv0PCcOgCeJcRA6Oq2KcVSDE6vIAmQ+5Ji
> lJUAoL4QiLp1oZSBVkiaFYTrJTlK6Gkv
> =wFzD
> -----END PGP SIGNATURE-----
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>
>

--e89a8fb1f54682cdf404bd08ec66--

From users-return-233430-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr  6 21:16:56 2012
Return-Path: <users-return-233430-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B30B897ED
	for <apmail-tomcat-users-archive@www.apache.org>; Fri,  6 Apr 2012 21:16:55 +0000 (UTC)
Received: (qmail 42635 invoked by uid 500); 6 Apr 2012 21:16:52 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 42426 invoked by uid 500); 6 Apr 2012 21:16:52 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 42415 invoked by uid 99); 6 Apr 2012 21:16:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 21:16:52 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of fairouz.fakhfakh@gmail.com designates 209.85.214.45 as permitted sender)
Received: from [209.85.214.45] (HELO mail-bk0-f45.google.com) (209.85.214.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 21:16:45 +0000
Received: by bkcjg9 with SMTP id jg9so2729878bkc.18
        for <users@tomcat.apache.org>; Fri, 06 Apr 2012 14:16:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=43PYosda13yEjPZwp5M9MPu4hkLp8smgn5dGhDBnq7E=;
        b=nfi3+3o4AgQA/CoIZYWZoWMWhB+hxvwFDoVjJoGXKuaeLv0ZCQ37HFLBsxE5kzMSGd
         M7n43PRG6J4jsce7/RdrGzBWUgFn62CQSM7iddjwIO0iWSekcP/OYAJp8aDNIPZ0hiT5
         HlYKeXSU5IlJhsE0lvfw/JsJtMbdrYeSAfMnjelyZSMVdJlD5uX8WiE4C80dE2MqdCmi
         tGp9gYJvSPX6IV1r43Twuftx9vqkikSnmKl0DhYZdOjLO1FlrkTdXpLIh2iDl/3RWro/
         nwSU9JGi0FVo6hTAAHzWcCfWYDvSjftY7orRKyg4Ni73YXvcFF0ylu8oYyt6dCxYsEwk
         A44Q==
MIME-Version: 1.0
Received: by 10.204.157.134 with SMTP id b6mr3737405bkx.88.1333746985183; Fri,
 06 Apr 2012 14:16:25 -0700 (PDT)
Received: by 10.205.127.14 with HTTP; Fri, 6 Apr 2012 14:16:25 -0700 (PDT)
Date: Fri, 6 Apr 2012 22:16:25 +0100
Message-ID: <CANhTVFMPjndcr8cp8zH0yfUwHuxiy=Fj=55GUdheohe6DzCbSA@mail.gmail.com>
Subject: can't find handler for element type
From: Fairouz Fakhfakh <fairouz.fakhfakh@gmail.com>
To: users@tomcat.apache.org
Content-Type: multipart/alternative; boundary=0015175cd05e45a93204bd092bce

--0015175cd05e45a93204bd092bce
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hello,
I use  Tomcat 5.5 and java 5.
I use: " mmclient-webinterface-bin.war "  version1.2  from the site:
http://www.semwebcentral.org/frs/?group_id=3D44

I have a problem by clicking on a button to access a JSP page.
I get the following error in the log file of juddi:

[http-8083-Processor25] ERROR org.juddi.handler.HandlerMaker - can't find
handler for element type "capability_search"
knowing that: "capability_search" is a java class.

In in the command prompt of Tomcat, I get the following error:
ERROR [http-8083-Processor23] (StandardWrapperValve.java:253) -
"Servlet.service
()" pour la servlet UDDIMatchMakerServlet a g=DAn=DAr=DA une exception

Please, have you any idea about this problem?
Thank you very much in advance.

--0015175cd05e45a93204bd092bce--

From users-return-233431-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr  6 21:24:51 2012
Return-Path: <users-return-233431-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 879869F74
	for <apmail-tomcat-users-archive@www.apache.org>; Fri,  6 Apr 2012 21:24:51 +0000 (UTC)
Received: (qmail 62981 invoked by uid 500); 6 Apr 2012 21:24:48 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 62907 invoked by uid 500); 6 Apr 2012 21:24:47 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 62895 invoked by uid 99); 6 Apr 2012 21:24:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 21:24:47 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of knst.kolinko@gmail.com designates 209.85.161.173 as permitted sender)
Received: from [209.85.161.173] (HELO mail-gx0-f173.google.com) (209.85.161.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 Apr 2012 21:24:42 +0000
Received: by ggnp2 with SMTP id p2so1725654ggn.18
        for <users@tomcat.apache.org>; Fri, 06 Apr 2012 14:24:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=0+tV5qd7p3PZk6M8v11+r7QishTSP9uuwhzYgcQCcDQ=;
        b=fn4OmuXhwT5wABfQgJRUhRxyk+PzuEyw5f9oSHMsqs5yhDHxByUKydQOAjbOAtoOwE
         zP29Taloiwrum74uGUZJ2XUcqoVhmpK6uSlJVzW12zdCOapyaWWVaKE9Hk+apwGMDrr0
         qkB4wP7vOstDv1y67mcTQZOCSsF7X4p6BQs+M3adUEi2yYV5M0XrJYw9TZH4FT+vx3c/
         +s31XExBzEDvM7OVh1SHXjvdqrqr2EKnKI2UnxFam3k2EF4yQIcBEtbetSJJNg5k/cbq
         dBRfVxZXErSxiYELKXf14q5MoOblcke8rQ0eJgbnWqDX2nsvhpS+qUssBhJ06xcyTd3t
         KAYQ==
MIME-Version: 1.0
Received: by 10.236.193.41 with SMTP id j29mr8202079yhn.14.1333747462116; Fri,
 06 Apr 2012 14:24:22 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Fri, 6 Apr 2012 14:24:22 -0700 (PDT)
In-Reply-To: <CANhTVFMPjndcr8cp8zH0yfUwHuxiy=Fj=55GUdheohe6DzCbSA@mail.gmail.com>
References: <CANhTVFMPjndcr8cp8zH0yfUwHuxiy=Fj=55GUdheohe6DzCbSA@mail.gmail.com>
Date: Sat, 7 Apr 2012 01:24:22 +0400
Message-ID: <CABzHfVnPpMrs5o+81U57Us3z-UujB6PjqgSrfk5yEtRrnRrUqw@mail.gmail.com>
Subject: Re: can't find handler for element type
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

2012/4/7 Fairouz Fakhfakh <fairouz.fakhfakh@gmail.com>:
> Hello,
> I use =A0Tomcat 5.5 and java 5.
> I use: " mmclient-webinterface-bin.war " =A0version1.2 =A0from the site:
> http://www.semwebcentral.org/frs/?group_id=3D44
>
> I have a problem by clicking on a button to access a JSP page.
> I get the following error in the log file of juddi:
>
> [http-8083-Processor25] ERROR org.juddi.handler.HandlerMaker - can't find
> handler for element type "capability_search"
> knowing that: "capability_search" is a java class.
>
> In in the command prompt of Tomcat, I get the following error:
> ERROR [http-8083-Processor23] (StandardWrapperValve.java:253) -
> "Servlet.service
> ()" pour la servlet UDDIMatchMakerServlet a g=DAn=DAr=DA une exception
>
> Please, have you any idea about this problem?

No. It is not something from Tomcat.

It should be something specific to that web application or framework
that it is using. The error message was printed by
"org.juddi.handler.HandlerMaker" class.

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233432-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sat Apr  7 04:03:24 2012
Return-Path: <users-return-233432-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2B07191D0
	for <apmail-tomcat-users-archive@www.apache.org>; Sat,  7 Apr 2012 04:03:24 +0000 (UTC)
Received: (qmail 88133 invoked by uid 500); 7 Apr 2012 04:03:20 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 87873 invoked by uid 500); 7 Apr 2012 04:03:20 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 87856 invoked by uid 99); 7 Apr 2012 04:03:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Apr 2012 04:03:19 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.91.198.75] (HELO wipro-blr-out02.wipro.com) (203.91.198.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Apr 2012 04:03:15 +0000
X-AuditID: cb5bdd58-b7b45ae000001d45-6e-4f7fbc6b408a
Received: from BLR-OUT-EDG01.wipro.com ( [203.91.193.31])
	(using TLS with cipher AES128-SHA (AES128-SHA/128 bits))
	(Client did not present a certificate)
	by wipro-blr-out02.wipro.com (Symantec Mail Security) with SMTP id E5.27.07493.B6CBF7F4; Sat,  7 Apr 2012 09:32:51 +0530 (IST)
Received: from BLR-EC-MBX1.wipro.com (10.208.51.111) by
 BLR-OUT-EDG01.wipro.com (203.91.193.31) with Microsoft SMTP Server (TLS) id
 14.1.289.1; Sat, 7 Apr 2012 09:32:50 +0530
Received: from BLR-EC-MBX5.wipro.com ([169.254.5.54]) by BLR-EC-MBX1.wipro.com
 ([169.254.1.83]) with mapi id 14.01.0289.001; Sat, 7 Apr 2012 09:32:50 +0530
From: <souvik.datta@wipro.com>
To: <users@tomcat.apache.org>, <chris@christopherschultz.net>
Subject: RE: Accessing USB drive content from pages served from tomcat6
  server
Thread-Topic: Accessing USB drive content from pages served from tomcat6
  server
Thread-Index: Ac0SGsC/XI/fLQa+R1adPIraGT12VQBwsqWAACVrFO8=
Date: Sat, 7 Apr 2012 04:02:50 +0000
Message-ID: <85DA62F108ABD4439B9B6A3AB2B2880F01F62915@BLR-EC-MBX5.wipro.com>
References: <85DA62F108ABD4439B9B6A3AB2B2880F01F613A7@BLR-EC-MBX5.wipro.com>,<4F7F0E83.8080601@christopherschultz.net>
In-Reply-To: <4F7F0E83.8080601@christopherschultz.net>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-originating-ip: [10.208.50.22]
Content-Type: text/plain; charset="iso-8859-1"
content-transfer-encoding: quoted-printable
MIME-Version: 1.0
X-Brightmail-Tracker: AAAAAQAAAZE=
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Chris,

Thanks a lot for responding to my post. 

[Chris]What do you mean "not able to access its content"? Do you get 404s?
500s? Does the thread hang? Does the JVM crash?

[Souvik]: When I am trying to access the content of usb_1, I am getting 404=
 error.
Here are the details:
HTTP Status 404
message < This is blank>
description The requested resource () is not available.

[Souvik] 

[Chris]Q:What about starting Tomcat with no USB devices, then trying to acce=
ss the resources, then attaching the devices and trying again?
Ans: Only usb_0 works.

[Chris]Q:What happens when both devices are connected *before* you start Tom=
cat?
Ans: Only in this case I could access both the devices. 

[Chris] Honestly, I'm not sure why you'd want to run a web server off a devi=
ce
which isn't guaranteed to be available.

[Souvik] Actually I am developing a HTML5 App which would run on an embedded=
 target. One of the functionalities of the application is to allow user to p=
layback and browse the media content available in an USB stick. Since I am u=
sing Webkit browser so some features of HTML5 do not run from file:// url an=
d therefore the pages need to be served from a local web server. I have chos=
en tomcat for that.

So it seems to achieve my goal, I need to first connect usb sticks to all th=
e available usb ports on my target and then start tomcat6. As mentioned by y=
ou,is the server keeping this information in the cache so that in future whe=
n a USB device is connected to a port, it is able to make that out?
Is this understanding correct?

Regards,
Souvik
________________________________________
From: Christopher Schultz [chris@christopherschultz.net]
Sent: Friday, April 06, 2012 9:10 PM
To: Tomcat Users List
Subject: Re: Accessing USB drive content from pages served from tomcat6  ser=
ver

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Souvik,

On 4/4/12 12:23 AM, souvik.datta@wipro.com wrote:
> I have a NPAPI plugin which gets a notification from my middleware
> whenever a USB MSD device is connected to the system. The HTML
> page which loads the plug-in then plays the Media
> (audio/video/pictures) that are present in the USB drive. This html
> page is served from a local tomcat server (the same PC to which the
> USB MSD device has been connected). To enable access to USB Device
> from the HTML page (served from tomcat6 server), I have added
> following lines in /etc/tomcat6/server.xml (in Ubuntu 10.10):
>
> <Context path=3D"/usb_0" docBase=3D"/media/WCF/usb_0/"/>

So, first, you shouldn't put <Context> in server.xml. Search the
archives and read the Tomcat User Guide for many reasons why not. L=E9a
has the proper prescription for how to deploy a context outside of
your appBase.

> When I am pluggin in the first USB device (which is mounted at
> /media/WCF/usb_0), I am able to access the device content from my
> HTML page (served from my tomcat6 server ) but when I am
> connecting the second USB device which is mounted at
> /media/WCF/usb_1, I am not able to access its content.

What do you mean "not able to access its content"? Do you get 404s?
500s? Does the thread hang? Does the JVM crash?

Tomcat caches certain information about the contexts it deploys. I
suspect that by removing the webapp's docBase (or suddenly having it
appear out of nowhere when a USB device is connected) is surprising to
say the least.

> In the browser when I am trying to check the content of
> http://localhost:8080/usb_1/ by typing the URL in the address bar,
> I am getting error resource not available. For usb_0, I am able to
> see the resources.

Does usb_0 always work and usb_1 never works? What happens when both
devices are connected *before* you start Tomcat? What about when
neither of them are connected beforehand? What about starting Tomcat
with no USB devices, then trying to access the resources, then
attaching the devices and trying again?

All of those things would be good to know in order to help you out.

Honestly, I'm not sure why you'd want to run a web server off a device
which isn't guaranteed to be available.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk9/DoMACgkQ9CaO5/Lv0PBfAACfVXlHAj4e5uNvBdXCZr2tkb+W
WhgAn29GaUK25ShtOA4J0nvpGMgMPhRU
=3DMQjC
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


Please do not print this email unless it is absolutely necessary. =0A=
=0A=
The information contained in this electronic message and any attachments to=
 this message are intended for the exclusive use of the addressee(s) and may=
 contain proprietary, confidential or privileged information. If you are not=
 the intended recipient, you should not disseminate, distribute or copy this=
 e-mail. Please notify the sender immediately and destroy all copies of this=
 message and any attachments. =0A=
=0A=
WARNING: Computer viruses can be transmitted via email. The recipient should=
 check this email and any attachments for the presence of viruses. The compa=
ny accepts no liability for any damage caused by any virus transmitted by th=
is email. =0A=
=0A=
www.wipro.com

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233433-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sat Apr  7 16:11:26 2012
Return-Path: <users-return-233433-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1251C9764
	for <apmail-tomcat-users-archive@www.apache.org>; Sat,  7 Apr 2012 16:11:26 +0000 (UTC)
Received: (qmail 7944 invoked by uid 500); 7 Apr 2012 16:11:22 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 7877 invoked by uid 500); 7 Apr 2012 16:11:22 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 7867 invoked by uid 99); 7 Apr 2012 16:11:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Apr 2012 16:11:22 +0000
X-ASF-Spam-Status: No, hits=2.8 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS,URIBL_BLACK
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of knst.kolinko@gmail.com designates 209.85.161.173 as permitted sender)
Received: from [209.85.161.173] (HELO mail-gx0-f173.google.com) (209.85.161.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Apr 2012 16:11:15 +0000
Received: by ggnp2 with SMTP id p2so1868618ggn.18
        for <users@tomcat.apache.org>; Sat, 07 Apr 2012 09:10:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=/SLZU+O/mkgOqbRnL1yYMxoHr6jImBPE59yRGFf7FVc=;
        b=QuCcwWSE8dDejb2DmGn1MHZTj2bVczEsCC9AI2dPt9cnTt3bhEYnxpsRJqtXeApoUp
         mKoBXNO/c1vtNbd2Pzy9o/Rxip+f/RJJVT6JMtX17jTPyXsExE4ocPr7jFgRqE+wA/lF
         Ja50i9cG+OY+TV5zXE8qhOwiqmW6qmu4on/QlyhYprDy+x7c/1LYlsjA46ml3ernNaur
         FDifmH43HwSxhCzN8R35g4vMkIfgFWgelFQrkXXcPqT/5pCX4qhKR+XfT/tt9oRWX21A
         XGeQjEjU3Do14tPwOBMoM56wweYslaXEoaFC+vvJ1HQereWedjMXVgJ98dVfInoSbhXC
         xmxg==
MIME-Version: 1.0
Received: by 10.236.193.41 with SMTP id j29mr1393534yhn.14.1333815054697; Sat,
 07 Apr 2012 09:10:54 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Sat, 7 Apr 2012 09:10:54 -0700 (PDT)
In-Reply-To: <85DA62F108ABD4439B9B6A3AB2B2880F01F62915@BLR-EC-MBX5.wipro.com>
References: <85DA62F108ABD4439B9B6A3AB2B2880F01F613A7@BLR-EC-MBX5.wipro.com>
	<4F7F0E83.8080601@christopherschultz.net>
	<85DA62F108ABD4439B9B6A3AB2B2880F01F62915@BLR-EC-MBX5.wipro.com>
Date: Sat, 7 Apr 2012 20:10:54 +0400
Message-ID: <CABzHfVnr3k78XBaShw-kPX2GvQT4B-s-7k2wfeTbGSHhLJK=Ew@mail.gmail.com>
Subject: Re: Accessing USB drive content from pages served from tomcat6 server
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

2012/4/7  <souvik.datta@wipro.com>:
> Hello Chris,
>
> Thanks a lot for responding to my post.
>
> [Chris]What do you mean "not able to access its content"? Do you get 404s=
?
> 500s? Does the thread hang? Does the JVM crash?
>
> [Souvik]: When I am trying to access the content of usb_1, I am getting 4=
04 error.
> Here are the details:
> HTTP Status 404
> message < This is blank>
> description The requested resource () is not available.
>
> [Souvik]
>
> [Chris]Q:What about starting Tomcat with no USB devices, then trying to a=
ccess the resources, then attaching the devices and trying again?
> Ans: Only usb_0 works.
>
> [Chris]Q:What happens when both devices are connected *before* you start =
Tomcat?
> Ans: Only in this case I could access both the devices.
>
> [Chris] Honestly, I'm not sure why you'd want to run a web server off a d=
evice
> which isn't guaranteed to be available.
>
> [Souvik] Actually I am developing a HTML5 App which would run on an embed=
ded target. One of the functionalities of the application is to allow user =
to playback and browse the media content available in an USB stick. Since I=
 am using Webkit browser so some features of HTML5 do not run from file:// =
url and therefore the pages need to be served from a local web server. I ha=
ve chosen tomcat for that.
>
> So it seems to achieve my goal, I need to first connect usb sticks to all=
 the available usb ports on my target and then start tomcat6. As mentioned =
by you,is the server keeping this information in the cache so that in futur=
e when a USB device is connected to a port, it is able to make that out?
> Is this understanding correct?

1. You are (ab)using Tomcat Autodeployment feature.

If docbase of a webapp is not readable, it really cannot start. (Just
a guess. If you looked at the logs your would see it more clearly).

2. It is possible to control deployment process via JMX. That is to
deploy new contexts when needed - the Manager webapp does that.

But I think that using contexts to display those USB sticks is not a
good thing. One thing to beware is that when application is undeployed
 all its contents is deleted (so you risk to delete all data from that
USB stick).

I think it would be better to write a servlet that will serve static
files from the stick. It should not be hard. It might be based on
Tomcat's DefaultServlet,  but actually yours can be more simple:

1. You do not need to use servlet API to get the resources. You have
to use direct file access using java.io.
2. Your access is read-only. You do not need to support writing.

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233434-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sat Apr  7 16:35:22 2012
Return-Path: <users-return-233434-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AA93F9A9B
	for <apmail-tomcat-users-archive@www.apache.org>; Sat,  7 Apr 2012 16:35:22 +0000 (UTC)
Received: (qmail 52137 invoked by uid 500); 7 Apr 2012 16:35:19 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 51909 invoked by uid 500); 7 Apr 2012 16:35:19 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 51900 invoked by uid 99); 7 Apr 2012 16:35:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Apr 2012 16:35:19 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=FREEMAIL_FORGED_REPLYTO,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.138.91.169] (HELO nm9-vm4.bullet.mail.ne1.yahoo.com) (98.138.91.169)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 07 Apr 2012 16:35:11 +0000
Received: from [98.138.90.49] by nm9.bullet.mail.ne1.yahoo.com with NNFMP; 07 Apr 2012 16:34:49 -0000
Received: from [98.138.88.232] by tm2.bullet.mail.ne1.yahoo.com with NNFMP; 07 Apr 2012 16:34:49 -0000
Received: from [127.0.0.1] by omp1032.mail.ne1.yahoo.com with NNFMP; 07 Apr 2012 16:34:49 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 844289.79218.bm@omp1032.mail.ne1.yahoo.com
Received: (qmail 87595 invoked by uid 60001); 7 Apr 2012 16:34:49 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1333816489; bh=S+CklYS4Y46qTzSPHMLXAUu5TZDrt6YK6BGjDkFZP+I=; h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=odLsmXvDyZxmCVgFZbLWIcyxhiXb7DFNzAeDLCmujU5Bo4NJSX1WUMjk8RJX4T1GOe72+9/TfJxmjUbk+09D8OVtoo7il5E9Zps11FIhNtGyOznt+aoMWCS6UmOvwWGyvwUfHYYZEApEePDoR8POEkYgazA+bHxJsUQhhlNxUpE=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=zIvQKFCUqfevLmPY1FTFshnjIrVD+Rvkv0+UNkjuNXRMfqMkP2E4qjkMrHgyUB4KZ0YXP1txAGAc8JINc8CLbJsdoQ1GmHTOy37z27KBjqGEwuUrGyXISYifqZKs8I00FUZWJ+pthF5gOm1QRJil+r8ruxl2AgW0Wo3gmkxql20=;
X-YMail-OSG: ukXqcGQVM1lJs3zX6Ap4sBIMlOjmHi1MOJ_ErMlKodefwsv
 GMXlDdEE5it9276Ue6FE2Y.FT810kI4UwD2R2DQ5YI7bteVR3aMk5oRjkLFc
 Za8w19aLFkUp7KGj7anvfXGnQvzM33YLGPbx0d6Hwxlb3Shf4ydn9rzkJxJ5
 Fbex0naRcSP8lV5E9aiTjjEr60fKTWpyYUR.bAzpag7z0m7mDMKz3WN5fXw_
 w0s1OC1Cx6uf0kz89wNpWTw4.iIkXLKS4dG3GId_HySv8L5iBvMapgKO_g20
 xnBveKaY.GqP97_2YFqLuTEcT0eM00ZGUCvLaRzcBiGy1.O9F9g5iOIWYAjN
 NpzNcKS.KGGb.xceJ3l8CpcZObSxlpYgSXBY6qXVNirL_iJYwQxiTVSFIetw
 pVoDGjrk.8FlDR4wrkUYSp_lgFCPtCNhekPRY0GdsATwzTiZiSBx7Z2fYM1i
 LQ_lDCOrCHsdDmnnhiSwei_Py
Received: from [71.129.46.96] by web125515.mail.ne1.yahoo.com via HTTP; Sat, 07 Apr 2012 09:34:49 PDT
X-Mailer: YahooMailWebService/0.8.117.340979
References: <zarafa.4f7c651f.1095.7ca7df39672deef6@zarafix.ordix.de> <CABKrPsNQN_2KjH_PLfE49aoXjqgc451yFZFs-a0e0g9S3hMLpw@mail.gmail.com> <1333572948.35940.YahooMailNeo@web125504.mail.ne1.yahoo.com> <CABKrPsN0KV_Wox_0JuzMqhLfzZ9r7Jsg5-5OuWJbeFHfkxNRNQ@mail.gmail.com> <4F7DC767.3040108@pidster.com> <CABKrPsMKvkZphpL+XRB=Y0B54_AM7+nTYUW5Uq3QiXUSSLBJaQ@mail.gmail.com> <1333659691.97609.YahooMailNeo@web125501.mail.ne1.yahoo.com> <CABKrPsPDj_dKZQwOFkeuy6h+brjar-m+tuqH6pMx_hkqUNdFQQ@mail.gmail.com>
Message-ID: <1333816489.69490.YahooMailNeo@web125515.mail.ne1.yahoo.com>
Date: Sat, 7 Apr 2012 09:34:49 -0700 (PDT)
From: Mark Eggers <its_toasted@yahoo.com>
Reply-To: Mark Eggers <its_toasted@yahoo.com>
Subject: Re: SEVERE: Unable to start cluster.
To: Tomcat Users List <users@tomcat.apache.org>
In-Reply-To: <CABKrPsPDj_dKZQwOFkeuy6h+brjar-m+tuqH6pMx_hkqUNdFQQ@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

>________________________________=0A> From: Dhaval Jaiswal <dhaval.jaiswal@=
via.com>=0A>To: Tomcat Users List <users@tomcat.apache.org>; Mark Eggers <i=
ts_toasted@yahoo.com> =0A>Sent: Friday, April 6, 2012 4:29 AM=0A>Subject: R=
e: SEVERE: Unable to start cluster.=0A> =0A>=0A>=0A>Yes we have <distributa=
ble/> in web.xml=0A>=0A>=0A>=0A>Below is the full server.xml for all the to=
mcats.=0A>=0A><?xml version=3D'1.0' encoding=3D'utf-8'?>=0A><Server port=3D=
"8005" shutdown=3D"SHUTDOWN">=0A>=0A>=A0 <Listener className=3D"org.apache.=
catalina.core.AprLifecycleListener" SSLEngine=3D"on" />=0A>=A0 <Listener cl=
assName=3D"org.apache.catalina.core.JasperListener" />=0A>=A0 <Listener cla=
ssName=3D"org.apache.catalina.mbeans.ServerLifecycleListener" />=0A>=A0 <Li=
stener className=3D"org.apache.catalina.mbeans.GlobalResourcesLifecycleList=
ener" />=0A>=0A>=A0 <GlobalNamingResources>=0A>=A0=A0=A0 <Resource name=3D"=
UserDatabase" auth=3D"Container"=0A>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
 type=3D"org.apache.catalina.UserDatabase"=0A>=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0 description=3D"User database that can be updated and saved"=0A=
>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 factory=3D"org.apache.catalina.use=
rs.MemoryUserDatabaseFactory"=0A>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 pa=
thname=3D"conf/tomcat-users.xml" />=0A>=A0=A0=A0 <Resource name=3D"xyz" aut=
h=3D"Container" type=3D"javax.sql.DataSource"=0A>=A0=A0=A0=A0=A0=A0=A0 driv=
erClassName=3D"xyz.Driver" url=3D"jdbc url"=0A>=A0=A0=A0=A0=A0=A0=A0 userna=
me=3D"xyz" password=3D"xyz"=0A>=A0=A0=A0=A0=A0=A0=A0 maxActive=3D"150" maxI=
dle=3D"10" maxWait=3D"30000"=0A>=A0=A0=A0=A0=A0=A0=A0 removeAbandoned=3D"tr=
ue" removeAbandonedTimeout=3D"120" logAbandoned=3D"true" />=0A>=0A>=A0=A0=
=A0 =0A>=A0 </GlobalNamingResources>=0A>=0A>=A0 <Service name=3D"Catalina">=
=0A>=A0 =0A>=A0=A0=A0 =0A>=A0=A0=A0 <Connector port=3D"8080" protocol=3D"HT=
TP/1.1" =0A>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 connectionTimeout=3D=
"20000" =0A>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 redirectPort=3D"8443=
" />=0A>=A0=A0=A0 <Connector port=3D"8443" protocol=3D"HTTP/1.1" SSLEnabled=
=3D"true"=0A>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 maxThreads=3D"150" =
scheme=3D"https" secure=3D"true"=0A>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0 clientAuth=3D"false" sslProtocol=3D"TLS" />=0A>=0A>=A0=A0=A0 <Connector=
 port=3D"8009" protocol=3D"AJP/1.3" redirectPort=3D"8443" backlog=3D"100" m=
axThreads=3D"40000" />=0A>=0A>=0A>=A0=A0=A0 <Engine name=3D"Catalina" defau=
ltHost=3D"localhost" jvmRoute=3D"t5">=0A>=0A>=A0=A0=A0=A0=A0 <Cluster class=
Name=3D"org.apache.catalina.ha.tcp.SimpleTcpCluster" channelSendOptions=3D"=
6">=0A>=A0=A0=A0=A0=A0=A0=A0 <Manager className=3D"org.apache.catalina.ha.s=
ession.BackupManager" expireSessionsOnShutdown=3D"false"=0A>=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 notifyListenersOnReplication=3D"tru=
e" mapSendOptions=3D"6"/>=0A>=0A>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 <Channel=
 className=3D"org.apache.catalina.tribes.group.GroupChannel">=0A>=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0 <Membership className=3D"org.apache.catalina.tr=
ibes.membership.McastService"=0A>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0 address=3D"228.0.0.4"=0A>=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 port=3D"45564"=0A>=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 frequency=
=3D"500"=0A>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0 dropTime=3D"30000"/>=0A>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 <Receiv=
er className=3D"org.apache.catalina.tribes.transport.nio.NioReceiver"=0A>=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 address=3D"=
auto"=0A>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 po=
rt=3D"4000"=0A>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0 selectorTimeout=3D"5000"=0A>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0 timeout=3D"60000"=0A>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 maxThreads=3D"6"/>=0A>=0A>=A0=A0=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0 <Sender className=3D"org.apache.catalina.tribes.trans=
port.ReplicationTransmitter">=0A>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0=A0=A0 <Transport className=3D"org.apache.catalina.tribes.transport.nio.=
PooledParallelSender" timeout=3D"60000" keepAliveCount=3D"0"/>=0A>=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0 </Sender>=0A>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=
=A0 <Interceptor className=3D"org.apache.catalina.tribes.group.interceptors=
.TcpFailureDetector"/>=0A>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 <Interceptor=
 className=3D"org.apache.catalina.tribes.group.interceptors.MessageDispatch=
15Interceptor"/>=0A>=0A>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 </Channel>=0A>=A0=A0=
=A0=A0=A0=A0=A0=A0 <Valve className=3D"org.apache.catalina.ha.tcp.Replicati=
onValve"=0A>=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 filter=3D".*\.=
gif|.*\.js|.*\.jpeg|.*\.jpg|.*\.png|.*\.htm|.*\.html|.*\.css|.*\.txt"/>=0A>=
=A0=A0=A0=A0=A0=A0=A0=A0 <Valve className=3D"org.apache.catalina.ha.session=
.JvmRouteBinderValve"/>=0A>=A0=A0=A0=A0=A0=A0 <ClusterListener className=3D=
"org.apache.catalina.ha.session.ClusterSessionListener"/> =0A>=A0=A0=A0=A0=
=A0=A0 <ClusterListener className=3D"org.apache.catalina.ha.session.JvmRout=
eSessionIDBinderListener"/>=0A>=A0=A0=A0=A0 </Cluster> =0A>=A0=A0=A0=A0=A0 =
<Realm className=3D"org.apache.catalina.realm.UserDatabaseRealm"=0A>=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 resourceName=3D"UserDatabase"/> =0A>=0A>=A0=
=A0=A0=A0=A0 <Host name=3D"localhost"=A0 appBase=3D"webapps"=0A>=A0=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0 unpackWARs=3D"true" autoDeploy=3D"true"=0A>=A0=A0=
=A0=A0=A0=A0=A0=A0=A0=A0=A0 xmlValidation=3D"false" xmlNamespaceAware=3D"fa=
lse">=0A>=0A>=A0=A0=A0=A0=A0 </Host>=0A>=A0=A0=A0 </Engine>=0A>=A0 </Servic=
e>=0A></Server>=0A>=0A>=0A>=0A>=0A>Below is the context.xml=0A>=0A>=0A><?xm=
l version=3D'1.0' encoding=3D'utf-8'?>=0A>=0A><Context>=0A>=0A>=A0=A0=A0 <W=
atchedResource>WEB-INF/web.xml</WatchedResource>=0A>=A0=A0=A0 =0A>=A0=A0=A0=
 <ResourceLink name=3D"xyz" global=3D"xyz" type=3D"javax.sql.DataSource"/>=
=0A></Context>=0A>=0A>=0A>=0A>still it is throwing error while deploying ap=
ps. =0A>=0A>=0A>WARNING: Unable to send map start message.=0A>=A0Apr 5, 201=
2 1:37:12 PM org.apache.catalina.ha.session.BackupManager start=0A>=A0SEVER=
E: Unable to start BackupManager=0A>=A0java.lang.RuntimeException: Unable t=
o start replicated map.=0A>=A0=A0=A0=A0=A0=A0=A0 at=0A>=A0org.apache.catali=
na.tribes.tipis.AbstractReplicatedMap.init(AbstractReplicatedMap.java:230)=
=0A>=0A>=A0Failed to start BackupManager:=A0 java.lang.IllegalArgumentExcep=
tion:=0A>=A0Listener already=0A>=A0exists:{}[org.apache.catalina.tribes.tip=
is.LazyReplicatedMap]=0A=0A=0AOK,=0A=0ALet's go through this again. I've de=
leted my last response since none of that=0Aseems to have made it into your=
 current configuration.=0A=0A1. Add the leak prevention listener back to yo=
ur server.xml=0A=0A<Listener=0A=A0 className=3D"org.apache.catalina.core.Jr=
eMemoryLeakPreventionListener"/>=0A=0A2. If you are not using the HTTP/1.1 =
connector, comment it out.=0A=0A<!--=0A<Connector port=3D"8080" protocol=3D=
"HTTP/1.1"=A0=0A=A0 =A0 =A0 =A0 =A0 =A0connectionTimeout=3D"20000"=A0=0A=A0=
 =A0 =A0 =A0 =A0 =A0redirectPort=3D"8443" />=0A-->=0A=0A3. If you are not u=
sing the SSL connector, comment it out.=0A=0A<!--=0A<Connector port=3D"8443=
" protocol=3D"HTTP/1.1" SSLEnabled=3D"true"=0A=A0 =A0 =A0 =A0 =A0 =A0maxThr=
eads=3D"150" scheme=3D"https" secure=3D"true"=0A=A0 =A0 =A0 =A0 =A0 =A0clie=
ntAuth=3D"false" sslProtocol=3D"TLS" />=0A-->=0A=0A4. Fix your AJP connecto=
r by:=0A=0Aa) Reducing the number of threads. You currently have 40,000 thr=
eads=0A=A0 =A0per AJP connector times 10 Tomcats. These threads will never =
time=0A=A0 =A0out.=0Ab) Add URIEncoding=3D"UTF-8" to your connector=0Ac) Se=
t a reasonable connectionTimeout value in milliseconds and match=0A=A0 =A0t=
hat with connection_pool_timeout in seconds in your=0A=A0 =A0workers.proper=
ties file. Otherwise the connection between Apache=0A=A0 =A0HTTD and Tomcat=
 will never close even when idle.=0A=0A<!-- Define an AJP 1.3 Connector on =
port 8009 -->=0A<Connector port=3D"8009"=0A =A0 protocol=3D"AJP/1.3"=0A =A0=
 redirectPort=3D"8453"=0A=A0 =A0 =A0 =A0 =A0 =A0connectionTimeout=3D"600000=
"=0A=A0 =A0 =A0 =A0 =A0 =A0URIEncoding=3D"UTF-8"/>=0A=0AThe time above (600=
 seconds, 10 minutes) was taken from the example=0Aconnector settings found=
 in the latest Tomcat connectors source. It's=0Aa good default set by knowl=
edgeable people.=0A=0A5. Fix your drop time in your Membership element to b=
e something=0A=A0 =A0reasonable and/or improve your network infrastructure.=
=0A=0A<Membership=0A=A0 =A0 =A0 className=3D"org.apache.catalina.tribes.mem=
bership.McastService"=0A=A0 =A0 =A0 address=3D"228.0.0.4"=0A=A0 =A0 =A0 por=
t=3D"45564"=0A=A0 =A0 =A0 frequency=3D"500"=0A=A0 =A0 =A0 dropTime=3D"10000=
"/>=0A=0A10 seconds should be reasonable.=0A=0ANow, on to the other informa=
tion:=0A=0AThe context.xml that you posted looks a lot like the context.xml=
 from=0A$CATALINA_BASE/conf/context.xml.=0A=0AFirst of all, in general do N=
OT edit this file. If you want a default=0Aresource for every application o=
n a particular Tomcat host, then add=0Athat information to a context.xml.de=
fault file in=0A$CATALINA_BASE/conf/Catalina/[host].=0A=0AFor example, if y=
ou want this in every application:=0A=0A<ResourceLink=0A=A0 name=3D"xyz"=0A=
=A0 global=3D"xyz"=0A=A0 type=3D"javax.sql.DataSource"/>=0A=0AAnd you only =
have the following host defined in server.xml:=0A=0A<Host name=3D"localhost=
"=0A=A0 =A0 =A0 appBase=3D"webapps"=0A=A0 =A0 =A0 unpackWARs=3D"true"=0A=A0=
 =A0 =A0 autoDeploy=3D"true"=0A=A0 =A0 =A0 xmlValidation=3D"false"=0A=A0 =
=A0 =A0 xmlNamespaceAware=3D"false">=0A</Host>=0A=0AThen you would place th=
e following context.xml.default=0A=0A<?xml version=3D"1.0" encoding=3D"UTF-=
8"?>=0A<Context>=0A=A0 <ResourceLink=0A=A0 =A0 name=3D"xyz"=0A=A0 =A0 globa=
l=3D"xyz"=0A=A0 =A0 type=3D"javax.sql.DataSource"/>=0A</Context>=0A=0Ain $C=
ATALINA_BASE/conf/Catalina/localhost.=0A=0AThis is NOT the normal place for=
 ResourceLink definitions. The normal=0Aplace is either:=0A=0AMETA-INF/cont=
ext.xml=0A=0Aof the web application (which will then be copied to the follo=
wing)=0A=0A$CATALINA_BASE/conf/Catalina/localhost/appname.xml=0A=0Aor direc=
tly in the file above.=0A=0APlease read the documentation at:=0A=0Ahttp://t=
omcat.apache.org/tomcat-6.0-doc/config/context.html=0A=0AIn a previous mess=
age, I had recommended that you edit the default=0Alogging.properties file =
so that you could track cluster messages=0Aseparately from the rest of cata=
lina.out.=0A=0AIf you have not done this, then please modify the logging.pr=
operties=0Afile as previously posted.=0A=0ATODO:=0A=0A1. Please clean up th=
e server.xml file as noted above=0A2. Please clean up the context.xml file =
as noted above=0A3. Please modify the logging.properties file as noted prev=
iously=0A4. Please post the following inline=0A=A0 =A0a) complete context.x=
ml from your web application with sensitive=0A=A0 =A0 =A0 information remov=
ed=0A=A0 =A0b) complete web.xml from your web application with sensitive=0A=
=A0 =A0 =A0 information removed=0A=A0 =A0c) contents of the cluster.[date].=
log file before adding your=0A=A0 =A0 =A0 application=0A=0AAs Mark Thomas p=
ointed out in another thread, simply taking the=0Adefault cluster configura=
tion from:=0A=0Ahttp://tomcat.apache.org/tomcat-6.0-doc/cluster-howto.html=
=0A=0Aand replacing DeltaManager with BackupManager works. I have done this=
=0Aas well on a small (4 node) cluster. This works fine with my random=0Ape=
t generator test application.=0A=0AOTHER NOTES:=0A=0AThese notes are import=
ant if you wish to continue to receive responses=0Afrom volunteers on the m=
ailing list (at least in my opinion).=0A=0A1. Do not CC the person who repl=
ied to your question unless=0A=A0 =A0specifically asked to.=0A=0A2. Do not =
post HTML mail.=0A=0A3. Do not top post, since this makes it very difficult=
 to follow the=0A=A0 =A0thread of the conversation. Having to scroll up and=
 down the mail=0A=A0 =A0message to figure out the context of a complex disc=
ussion is one=0A=A0 =A0sure way to reduce participation by many on the mail=
ing list.=0A=0A4. Do not hijack threads. If you have a new question, start =
a new mail=0A=A0 =A0message=0A=0A5. Do not start multiple threads on the sa=
me topic. The answer will=0A=A0 =A0not be generated any faster.=0A=0A6. Pos=
t the final resolution to the mailing list so we can point=0A=A0 =A0people =
to the archives the next time this comes up. Consider=0A=A0 =A0writing a Wi=
ki article if there is consensus on the mailing list.=0A=0A7. Thank the peo=
ple for their help. I do this on a volunteer basis (as=0A=A0 =A0I suspect m=
ost others here do). Thanks for the effort is nice.=0A=0A8. Put in at least=
 as much effort as the people on the mailing list.=0A=0AThis last one is re=
ally important. This means (and the list is not=0Acomplete):=0A=0Aa. Read t=
he documentation=0Ab. Ask specific questions=0Ac. Provide complete details=
=0Ad. When someone asks for information, please supply it=0A=0AI'm not a mi=
nd reader, I don't know your environment, and I don't know=0Ayour applicati=
on. When I ask for information it's because I am=0Ainterested in helping, a=
nd interested in the answer. Without this=0Ainformation I am essentially bl=
ind. OK, sometimes with the=0Ainformation, I am essentially blind, but that=
's why there are lots of=0Aeyes in this mailing list. Someone will at least=
 have an idea.=0A=0A. . . just my (long) 2 cents.=0A/mde/=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233435-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sat Apr  7 16:38:48 2012
Return-Path: <users-return-233435-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 880CE9B60
	for <apmail-tomcat-users-archive@www.apache.org>; Sat,  7 Apr 2012 16:38:48 +0000 (UTC)
Received: (qmail 60712 invoked by uid 500); 7 Apr 2012 16:38:45 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 60652 invoked by uid 500); 7 Apr 2012 16:38:45 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 60643 invoked by uid 99); 7 Apr 2012 16:38:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Apr 2012 16:38:45 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of knst.kolinko@gmail.com designates 209.85.213.173 as permitted sender)
Received: from [209.85.213.173] (HELO mail-yx0-f173.google.com) (209.85.213.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Apr 2012 16:38:38 +0000
Received: by yenr5 with SMTP id r5so1871482yen.18
        for <users@tomcat.apache.org>; Sat, 07 Apr 2012 09:38:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=E05DGd7AA+eoNufZlMZhldybKtCua3wcmWQBb0jhnvk=;
        b=YMR0HnohOCnCRHAgfTBV28gmxVUaJSHBx9WUQmBc8lQfcWwg32fJ6TlLlXK9BsM+O2
         Ni0oEPkHQhzxyts37LfKP4wixsoZe92BXL85CKZRepRX+kxRiYc1GDtIMNp8z8VvQJBf
         pBq2kz0icKtRCxjjYP980QgUnpZGLsdPeGKoC7lncx4J4jChhR/Wx62ea4smfsvQ0Oju
         5h0eo/lwvpv7ouSQdQGr52JSYYA5fe2lsgxaZkD789sxNWKw/iao6zpjbyQ4dm13x1UE
         eoyH8qtNgKoz64JI7+0ST8Ovp0actXTJNPsju0Q9zcxVxcDoF6+RSbCd3Ogu17y9a1vj
         vPTw==
MIME-Version: 1.0
Received: by 10.236.193.41 with SMTP id j29mr1439530yhn.14.1333816697795; Sat,
 07 Apr 2012 09:38:17 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Sat, 7 Apr 2012 09:38:17 -0700 (PDT)
In-Reply-To: <CACGXvK2t1=rfVrE1J0SXvwLjgVBUnmXb9y-L9ccva690Cxqv3Q@mail.gmail.com>
References: <CACGXvK2gJGkwpMAjGn=PMDeQ__cD9Hc5fiWcLmvWbgPNtJQB8w@mail.gmail.com>
	<CABzHfVm_SYf0d4px-X2E-uON55nr4PE9seRFkLhPjFp6BAwykw@mail.gmail.com>
	<CACGXvK2t1=rfVrE1J0SXvwLjgVBUnmXb9y-L9ccva690Cxqv3Q@mail.gmail.com>
Date: Sat, 7 Apr 2012 20:38:17 +0400
Message-ID: <CABzHfVnLNp4KHbH6GtPJejNWm1mMOmAxRN8oC2T_kKW-etU75g@mail.gmail.com>
Subject: Re: request.login() not persistent
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

2012/4/6 Jerry Malcolm <2ndgenfilms@gmail.com>:
>
> Questions:
>
> 1) The <meta... html tag simply tells the browser when it reads the page =
to
> 'try again' at the new URL. =A0In my mind that is no different from the u=
ser
> responding to something on a page and submitting a request for a new page=
.
> Why is the session logged-on state information somehow lost in that
> interaction when it is maintained if the user just hits a button and goes
> to another page?
>
> 2) I assume the response.sendRedirect( ) with the encoded URL sends one o=
f
> the 301 or 303 or something response codes back, right? =A0In either case=
,
> <meta... or 30x response code, why is the session info lost in one and no=
t
> the other?
>
> 3) The biggest concern I have is that it worked for several months on one
> machine with the <meta... tag coding. =A0If it worked, then it stopped, n=
ow
> it works again, and I don't know why, my assumption is that it's going to
> stop working again for me sometime in the future. =A0What could I have do=
ne
> that made it work at one time on one machine and then stop?
>

1. When the client accesses the webapp second time it has to provide
session id to Tomcat.  The session id can be provided via Cookie:
header in the request or via sessionid "path parameter" in the URL.

If none of provided values matches existing session, Tomcat creates a new o=
ne.

Your "refresh" meta tag does not include sessionid, so when refresh
happens the information can come only from a cookie  and apparently
the value is absent or not correct.

Chris already answered how to modify your HTML page.

2. When a user is authenticated, recent Tomcat versions change the
sessionid value. All data are migrated to the new session id, so
nothing is lost, but the new id has to be sent to the client.

The id is sent via "Set-Cookie" response header.  If the client does
not receive the header it might be that
a. setHeader() failed, because some response data has already been
sent to the client and thus no more headers can be added before the
response text,
b. The headers have been cleared before sending the response.
c. The client browser does not respect the Set-Cookie header (the
cookies are disabled in the browser),
d. Tomcat is behind a proxy (e.g. HTTPD) and the path in the
set-cookie header does not match the address that client requested.
(Misconfigured reverse proxy)
e. Several Set-Cookie headers are received.


3. The client can have several different "sessionid" cookies. That is
because a cookie is scoped to a "path" on the server. Each webapp has
its own path.  The "path" value is sent in Set-Cookie response header,
 but it is usually not included in the "Cookie" response header.

Thus Tomcat usually sees several session cookies and have to find the
applicable one between them.

Clearing the cookies for your server in the browser sometimes can
change behaviour. (I cannot clearly say why it could help, because
those cookies should not be persistent, but in some situations some
people said that it helped).



You need to use some tool to see those response and request headers.
E.g. for Firefox you can use Firebug plugin's Network tab or Live Http
Headers plugin.

https://addons.mozilla.org/en-US/firefox/addon/firebug/
https://addons.mozilla.org/ru/firefox/addon/live-http-headers/

It is also possible to capture and inspect network traffic with some
sniffing tools like Wireshark or Fiddler.  It is also possible to
configure Tomcat to print specific headers into its access log.


Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233436-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sat Apr  7 19:52:33 2012
Return-Path: <users-return-233436-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 85BFA9C75
	for <apmail-tomcat-users-archive@www.apache.org>; Sat,  7 Apr 2012 19:52:33 +0000 (UTC)
Received: (qmail 11405 invoked by uid 500); 7 Apr 2012 19:52:30 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 11167 invoked by uid 500); 7 Apr 2012 19:52:30 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 11158 invoked by uid 99); 7 Apr 2012 19:52:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Apr 2012 19:52:29 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aw@ice-sa.com designates 212.85.38.228 as permitted sender)
Received: from [212.85.38.228] (HELO tor.combios.es) (212.85.38.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 Apr 2012 19:52:20 +0000
Received: from [192.168.245.129] (p549E0190.dip0.t-ipconnect.de [84.158.1.144])
	by tor.combios.es (Postfix) with ESMTPA id 479B7DA053C
	for <users@tomcat.apache.org>; Sat,  7 Apr 2012 21:51:57 +0200 (CEST)
Message-ID: <4F809AD9.90407@ice-sa.com>
Date: Sat, 07 Apr 2012 21:51:53 +0200
From: =?ISO-8859-1?Q?Andr=E9_Warnier?= <aw@ice-sa.com>
Reply-To: Tomcat Users List <users@tomcat.apache.org>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Tomcat6 - Context - aliases
References: <1333360773430-4678428.post@n6.nabble.com> <CABzHfVn5uKEF9RKGUkqGGq56DLNFhRFm6Y_PUSUq--x3=yMpvw@mail.gmail.com> <1333363527730-4678513.post@n6.nabble.com> <4F7A11D7.80205@christopherschultz.net> <1333444940374-4681421.post@n6.nabble.com> <4F7AE221.10605@ice-sa.com> <1333549942374-4686704.post@n6.nabble.com> <1333564099167-4687332.post@n6.nabble.com> <4F7DA677.3060205@christopherschultz.net> <1333705857484-4692232.post@n6.nabble.com> <4F7EF29D.7090004@ice-sa.com>
In-Reply-To: <4F7EF29D.7090004@ice-sa.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit

Andr Warnier wrote:
> La,
> 
> La Massiot wrote:
> ...
>>
>> Actually I realized that even with the previous mechanism I used 
>> (using the
>> "aliases" attribute of the "Context" element of the 
>> "w/WEB-INF/context.xml"
>> file), I could directly retrieve a resource by typing its exact URL in a
>> browser and without having to identify in any way prior to the 
>> retrieval...
>>
> I think that what we are missing here, is what exactly you are trying to 
> achieve.
> And personally (no offense intended) I have the feeling that what you 
> are trying to do is fairly simple and classic, but that the way you are 
> going about it makes it complicated and probably unsafe.
> 
> Let me try to summarise.
> 
> 1) upload of documents/files :
> - Users are able to access the webserver and to upload files/documents 
> to it.
> You have not told us how that works, if there are several users or just 
> one, if all users are uploading to the same location, if this capability 
> is restricted (login) and so on..
> - when a user uploads a file/document, this file/document gets written 
> somewhere on the webserver. Where ? are there several upload locations ? 
> and how is it decided what gets written where ? if 2 users upload a 
> file/document with the same filename, does the second one overwrite the 
> first ?
> 
> 2) download of files/documents :
> - Users can (should) login to the webserver, and after that they are 
> able to download files/documents.  Do all users have access to all 
> uploaded documents ? should it be so that each user (or group of users) 
> only gets access to "his own" documents ? When a gicen user logs in, 
> does he get a list of all the documents ? or a list of only "his" 
> documents ?
> Does your application ("/w" ?) build a list of the files, as a html page 
> with links, on which the user can just click to download a file/document 
> ? and if so, what does bother you about the exact "look" of that link ? 
> the user does not see the URL, he sees only what you choose to display, 
> right ? iow in the link :
> <a href="/an_alias_1/file_1.txt">file_1.txt</a>
> the user only see the "file_1.txt" part, right ?
> And if the link was :
> <a href="/w/something-else-altogether/12345">file_1.txt</a>
> the user would still only see "file_1.txt", right ?
> 
> So, if I summarise, the only part which is somewhat iffy, is that in 
> your mechanism via Context, you are providing a URL which allows any 
> user to just use that URL to retrieve a document (his or someone 
> else's), without even having to login.
> 
> But this is a logical consequence of building a context "from scratch", 
> outside of you "/w" context, and having Tomcat serve it, without any 
> kind of security protecting that location.
> 
> In other words, why not store the documents in a directory below your 
> "/w" context (which would be protected by the web.xml of the "/w" 
> context, and provide the user with a link like :
> <a href="/w/files/userx/file_1.txt">file_1.txt</a>
> 
> I guess that I don't see why you would have to go through the bother of 
> creating another Context on-the-fly (and then one without any 
> access-control whatsovever).
> 
> Of course, you /could/ store the files somewhere else, but then if that 
> is a separate Tomcat context, you would need a separate authentication - 
> or a cross-context authentication.  And if that location is not a Tomcat 
> context, then you would need your webapp to also retrieve and deliver 
> the files to the clients (which is quite simple, and is the way I would 
> have looked at it in the first place; and this would allow you to 
> control who can access what).
> 
> By the way, have you looked at the DAV application available for Tomcat ?
> See : http://wiki.apache.org/tomcat/Tomcat/WebDav
> 
> 
Addendum, triggered by a response from Konstantin to another recent post on this list :
Do you know that when a Context is undeployed by Tomcat, all its files are deleted ?
An "undeploy" of a Context does not generally happen by itself, but with your method 
consisting of creating a new context on-the-fly, if ever an undeploy did happen, all the 
uploaded files in that Context would be deleted.  Probably not what you want to risk.
There are some things like that which are difficult to explain to users of your 
application.. ;-)


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233437-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sun Apr  8 07:44:04 2012
Return-Path: <users-return-233437-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0E1449FEF
	for <apmail-tomcat-users-archive@www.apache.org>; Sun,  8 Apr 2012 07:44:04 +0000 (UTC)
Received: (qmail 21394 invoked by uid 500); 8 Apr 2012 07:44:00 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 21290 invoked by uid 500); 8 Apr 2012 07:43:58 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 21270 invoked by uid 99); 8 Apr 2012 07:43:57 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Apr 2012 07:43:57 +0000
Received: from localhost (HELO mail-gy0-f173.google.com) (127.0.0.1)
  (smtp-auth username olamy, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Apr 2012 07:43:56 +0000
Received: by ghrr14 with SMTP id r14so1963867ghr.18
        for <users@tomcat.apache.org>; Sun, 08 Apr 2012 00:43:55 -0700 (PDT)
Received: by 10.236.144.133 with SMTP id n5mr2643618yhj.54.1333871035919; Sun,
 08 Apr 2012 00:43:55 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.100.33.16 with HTTP; Sun, 8 Apr 2012 00:43:35 -0700 (PDT)
In-Reply-To: <CBA2FB65.D678%leigh.anderson@betfair.com>
References: <CAPoyBqRkjgKApxNk_SfrKMX8GPB1d6MZj-c-nVgpZ+JjZL0D=g@mail.gmail.com>
 <CBA2FB65.D678%leigh.anderson@betfair.com>
From: Olivier Lamy <olamy@apache.org>
Date: Sun, 8 Apr 2012 09:43:35 +0200
Message-ID: <CAPoyBqQsbjfYexJp_yNsS+diOcyhtUNU7fFzASBo4yvfs8rNnw@mail.gmail.com>
Subject: Re: Tomcat7-maven-plugin 2.0-beta1 and useSeparateTomcatClassloader
 fails with run goal
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hello Leigh,
Thanks for creating issue.
Until now I tried to reproduce the issue but I failed.
I wonder if you could attach a build log using -e mvn flag.

2012/4/5 Leigh Anderson <Leigh.Anderson@betfair.com>:
> Hi Olivier,
>
> I'm not able to run this with tomcat6 as it's a Servlet 3.0 project. I'll
> get the issue created -- should have some time next week to put together =
a
> sample project.
>
>
> Thanks,
> Leigh
>
> On 04/04/2012 11:36, "Olivier Lamy" <olamy@apache.org> wrote:
>
>>Hello,
>>Looks to be an issue (does that work with tomcat6:run ?)
>>Could you create an issue here:
>>https://issues.apache.org/jira/browse/MTOMCAT (if possible with a
>>small sample project to reproduce).
>>
>>Thanks
>>--
>>Olivier Lamy
>>Talend: http://coders.talend.com
>>http://twitter.com/olamy | http://linkedin.com/in/olamy
>>
>>2012/4/3 Leigh Anderson <Leigh.Anderson@betfair.com>:
>>> Hi All,
>>>
>>> I'm trying to start a web application with 'mvn tomcat7:run'. It seems
>>> that with the configuration below it fails with the following error:
>>>
>>>
>>> =A0 =A0 =A0 =A0[INFO]
>>> -----------------------------------------------------------------------=
-
>>> =A0 =A0 =A0 =A0[ERROR] Failed to execute goal
>>> org.apache.tomcat.maven:tomcat7-maven-plugin:2.0-beta-1:run
>>>(default-cli)
>>> on project mantis-test-web-app: No such archiver: 'jar'. -> [Help 1]
>>> =A0 =A0 =A0 =A0[ERROR]
>>> =A0 =A0 =A0 =A0[ERROR] To see the full stack trace of the errors, re-ru=
n Maven
>>>with the
>>> -e switch.
>>> =A0 =A0 =A0 =A0[ERROR] Re-run Maven using the -X switch to enable full =
debug
>>>logging.
>>>
>>> I have also tried
>>> =A0 =A0 =A0 =A0* 'mvn tomcat:run-war', which seems to get past this poi=
nt, but
>>>then the
>>> application will not start because the 'additionalClasspathDir' propert=
y
>>> is not supported by the 'run-war' goal.
>>> =A0 =A0 =A0 =A0* removing 'useSeparateTomcatClassLoader' which then doe=
sn't
>>>load the
>>> Spring instrumenting class loader required to use AspectJ LTW, specifie=
d
>>> in
>>> context.xml. I have confirmed that I get the same 'no such archiver'
>>>error
>>> if I remove the
>>> context.xml, so I don't believe this to be the cause.
>>>
>>> Is there something I've missed in the configuration?
>>>
>>> Cheers,
>>> Leigh
>>>
>>>
>>>
>>>
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<plugin>
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<groupId>org.apache.tomc=
at.maven</groupId>
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<artifactId>tomcat7-mave=
n-plugin</artifactId>
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<version>2.0-beta-1</ver=
sion>
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<configuration>
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<systemPropertie=
s>
>>>
>>><log4j.defaultInitOverride>true</log4j.defaultInitOverride>
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<HOSTNAM=
E>localhost</HOSTNAME>
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<port.ht=
tp>9090</port.http>
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<port.ht=
tps>8443</port.https>
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0</systemProperti=
es>
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<port>9090</port=
>
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<httpsPort>8443<=
/httpsPort>
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<path>/</path>
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<useTestClasspat=
h>false</useTestClasspath>
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<additionalClass=
pathDirs>
>>>
>>>
>>><additionalClasspathDir>${project.basedir}/config</additionalClasspathDi=
r
>>>>
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0</additionalClas=
spathDirs>
>>>
>>> <useSeparateTomcatClassLoader>true</useSeparateTomcatClassLoader>
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0</configuration>
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<dependencies>
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<dependency>
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<groupId=
>org.springframework</groupId>
>>>
>>>
>>><artifactId>spring-instrument-tomcat</artifactId>
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<version=
>${spring.version}</version>
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0</dependency>
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0</dependencies>
>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0</plugin>
>>>
>>>
>>>
>>> _______________________________________________________________________=
_
>>> In order to protect our email recipients, Betfair Group use SkyScan fro=
m
>>> MessageLabs to scan all Incoming and Outgoing mail for viruses.
>>>
>>> _______________________________________________________________________=
_
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>For additional commands, e-mail: users-help@tomcat.apache.org
>>
>
>
> ________________________________________________________________________
> In order to protect our email recipients, Betfair Group use SkyScan from
> MessageLabs to scan all Incoming and Outgoing mail for viruses.
>
> ________________________________________________________________________
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>



--=20
Olivier Lamy
Talend: http://coders.talend.com
http://twitter.com/olamy | http://linkedin.com/in/olamy

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233438-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sun Apr  8 16:33:24 2012
Return-Path: <users-return-233438-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2720E97B7
	for <apmail-tomcat-users-archive@www.apache.org>; Sun,  8 Apr 2012 16:33:24 +0000 (UTC)
Received: (qmail 8616 invoked by uid 500); 8 Apr 2012 16:33:20 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 8385 invoked by uid 500); 8 Apr 2012 16:33:20 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 8375 invoked by uid 99); 8 Apr 2012 16:33:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Apr 2012 16:33:20 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of oferi@checkpoint.com designates 194.29.34.68 as permitted sender)
Received: from [194.29.34.68] (HELO michael.checkpoint.com) (194.29.34.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Apr 2012 16:33:13 +0000
Received: from il-ex01.ad.checkpoint.com (il-ex01.ad.checkpoint.com [194.29.34.26])
	by michael.checkpoint.com (8.13.8/8.13.8) with ESMTP id q38GWnM3013639
	for <users@tomcat.apache.org>; Sun, 8 Apr 2012 19:32:50 +0300
X-CheckPoint: {4F81CB1D-0-1B221DC2-5FFFF}
Received: from il-ex01.ad.checkpoint.com ([126.0.0.2]) by
 il-ex01.ad.checkpoint.com ([126.0.0.2]) with mapi; Sun, 8 Apr 2012 19:32:48
 +0300
From: Ofer Israeli <oferi@checkpoint.com>
To: Tomcat Users List <users@tomcat.apache.org>
Date: Sun, 8 Apr 2012 19:32:45 +0300
Subject: RE: Bug in Tomcat AJP Connector?
Thread-Topic: Bug in Tomcat AJP Connector?
Thread-Index: Ac0Tfch78E+9hhkWTOSiDCJqMdu4CQCJqbcw
Message-ID: <217DDBC2BB1E394CA9E7446337CBDEF20102DEDB51E1@il-ex01.ad.checkpoint.com>
References: <217DDBC2BB1E394CA9E7446337CBDEF20102DEDB4F4A@il-ex01.ad.checkpoint.com>
	<4F7C81BB.1040804@apache.org>
	<217DDBC2BB1E394CA9E7446337CBDEF20102DEDB4FA0@il-ex01.ad.checkpoint.com>
	<CABzHfV=hqDq_UmjVpO0moj7jSGRxp2BXgEFzTp7noS+iJaOVzw@mail.gmail.com>
	<F4938ADA-CE56-43B9-A6BE-490EA47922CA@checkpoint.com>
 <CABzHfV=hScWNMoP7T-BiTzNNXCeCob4QCpNyjhdfkgoiTkd9DQ@mail.gmail.com>
In-Reply-To: <CABzHfV=hScWNMoP7T-BiTzNNXCeCob4QCpNyjhdfkgoiTkd9DQ@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
x-kse-antivirus-interceptor-info: scan successful
x-kse-antivirus-info: Clean
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org


2012/4/6 Konstantin Kolinko <knst.kolinko@gmail.com>:
> 2012/4/6 Ofer Israeli <oferi@checkpoint.com>:
> > Hi Konstantin,
> >
> > I agree regarding the OOM bringing TC to a state where it must be
> restored, but my point remains: if there is code that handles catching th=
is
> exception and terminating the thread, why not terminate gracefully by
> closing the listening socket before killing the thread?
> >
>=20
> 1. In theory one can configure several acceptor threads. Though it is not
> recommended.
> So one has to check the count before closing the socket.

This sounds like the reason for not closing the socket.  Is this a TC confi=
guration?
=20
> 2. The socket will be closed when Tomcat shuts down.
> Just closing the socket - what will it improve?
>=20
> Anyway you will need to shutdown this Tomcat instance before you can star=
t
> the second one, because you'll need to free the shutdown port etc.

The point is to do proper cleanup when terminating a thread.  One good reas=
on for this is the strange situation the system is left in where you can se=
e that the Tomcat process is listening on port 8009 via netstat, yet it act=
ually isn't listening on that port as the acceptor thread has died.  This m=
akes it very difficult to troubleshoot as the system is showing "false" inf=
ormation.

> > if there is code that handles catching this exception and terminating
> > the thread
>=20
> 3. There is no such special code. The thread terminates by itself, becaus=
e its
> run() throws an exception and thus finishes execution.
>=20
> There is ThreadGroup.uncaughtException() method in JRE which by default
> prints the exception to stdout.

I see specific Tomcat code that catches Throwable, prints out this exceptio=
n and then terminates the thread in ThreadPool:
                            ThreadPool.log.error(sm.getString
                                ("threadpool.thread_error", t, toRun.toStri=
ng()));
By the way, this is not relevant only for OOME, but also for any other exce=
ption that was not handled and reached this code.

> If you consider to propose a patch - feel free to file an enhancement req=
uest
> in Bugzilla and attach it.

In accordance with your comments on the above, I'll file a patch if it look=
s in place.

Thanks,
Ofer

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233439-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sun Apr  8 16:42:12 2012
Return-Path: <users-return-233439-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3B53D9B41
	for <apmail-tomcat-users-archive@www.apache.org>; Sun,  8 Apr 2012 16:42:12 +0000 (UTC)
Received: (qmail 32484 invoked by uid 500); 8 Apr 2012 16:42:09 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 32275 invoked by uid 500); 8 Apr 2012 16:42:09 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 32266 invoked by uid 99); 8 Apr 2012 16:42:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Apr 2012 16:42:09 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of oferi@checkpoint.com designates 194.29.34.68 as permitted sender)
Received: from [194.29.34.68] (HELO michael.checkpoint.com) (194.29.34.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Apr 2012 16:42:02 +0000
Received: from il-ex01.ad.checkpoint.com (il-ex01.ad.checkpoint.com [194.29.34.26])
	by michael.checkpoint.com (8.13.8/8.13.8) with ESMTP id q38Gfe3R014524
	for <users@tomcat.apache.org>; Sun, 8 Apr 2012 19:41:40 +0300
X-CheckPoint: {4F81CD2F-0-1B221DC2-5FFFF}
Received: from il-ex01.ad.checkpoint.com ([126.0.0.2]) by
 il-ex01.ad.checkpoint.com ([126.0.0.2]) with mapi; Sun, 8 Apr 2012 19:41:39
 +0300
From: Ofer Israeli <oferi@checkpoint.com>
To: Tomcat Users List <users@tomcat.apache.org>
Date: Sun, 8 Apr 2012 19:41:38 +0300
Subject: RE: Bug in Tomcat AJP Connector?
Thread-Topic: Bug in Tomcat AJP Connector?
Thread-Index: Ac0ThkCUtAgdK0IhSaix1V4AxpEvLwCH7q0w
Message-ID: <217DDBC2BB1E394CA9E7446337CBDEF20102DEDB51E4@il-ex01.ad.checkpoint.com>
References: <217DDBC2BB1E394CA9E7446337CBDEF20102DEDB4F4A@il-ex01.ad.checkpoint.com>
 <4F7C81BB.1040804@apache.org>
 <217DDBC2BB1E394CA9E7446337CBDEF20102DEDB4FA0@il-ex01.ad.checkpoint.com>
 <CABzHfV=hqDq_UmjVpO0moj7jSGRxp2BXgEFzTp7noS+iJaOVzw@mail.gmail.com>
 <F4938ADA-CE56-43B9-A6BE-490EA47922CA@checkpoint.com>
 <4F7E2E89.5040805@pidster.com>
In-Reply-To: <4F7E2E89.5040805@pidster.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
x-kse-antivirus-interceptor-info: scan successful
x-kse-antivirus-info: Clean
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

MjAxMi80LzYgUGlkIDxwaWRAcGlkc3Rlci5jb20+Og0KPiBPbiAwNS8wNC8yMDEyIDIyOjE3LCBP
ZmVyIElzcmFlbGkgd3JvdGU6DQo+ID4gWQ0KPiA+DQo+ID4gT24gNSDXkdeQ16TXqCAyMDEyLCBh
dCAxODo1OCwgIktvbnN0YW50aW4gS29saW5rbyIgPGtuc3Qua29saW5rb0BnbWFpbC5jb20+DQo+
IHdyb3RlOg0KPiA+DQo+ID4+IDIwMTIvNC81IE9mZXIgSXNyYWVsaSA8b2ZlcmlAY2hlY2twb2lu
dC5jb20+Og0KPiA+Pj4gTWFyayBUaG9tYXMgd3JvdGU6DQo+ID4+Pj4gT24gMDQvMDQvMjAxMiAx
NzowMiwgT2ZlciBJc3JhZWxpIHdyb3RlOg0KPiA+Pj4+DQo+ID4+Pj4gT25jZSB5b3UgaGF2ZSBh
biBPT01FIGFsbCBiZXRzIGFyZSBvZmYuIFRoZSBKVk0gbmVlZHMgdG8gYmUNCj4gcmVzdGFydGVk
Lg0KPiA+Pj4+IFRoZXJlIGlzIG5vIGd1YXJhbnRlZSBvZiByZWxpYWJsZSBvcGVyYXRpb24gYWZ0
ZXIgYW4gT09NRS4NCj4gPj4+Pg0KPiA+Pj4+IE1hcmsNCj4gPj4+DQo+ID4+PiBIaSBNYXJrLA0K
PiA+Pj4gSSBhZ3JlZSB0aGF0IHRoZXJlIGluIHN1Y2ggYSBzaXR1YXRpb24gdGhlIEpWTSBzaG91
bGQgYmUgcmVzdGFydGVkLCBidXQgaXQNCj4gaXNuJ3QgcmVzdGFydGVkIGJ5IFRvbWNhdC4gIE9u
IHRoZSBvdGhlciBoYW5kLCBUb21jYXQgZG9lcyB0YWtlIHNvbWUNCj4gcHJlY2F1dGlvdXMgYWN0
aW9ucyBhbmQga2lsbHMgdGhlIGFjY2VwdGluZyB0aHJlYWQsIGJ1dCBpbiBzdWNoIGEgY2FzZSBp
dCBzaG91bGQNCj4gYWxzbyBjbG9zZSB0aGUgc29ja2V0IHRoYXQgdGhyZWFkIGlzIGxpc3Rlbmlu
ZyBvbiBvdGhlcndpc2UgaXQgaXMgbGVhdmluZyBnYXJiYWdlDQo+IGFyb3VuZCBhZnRlciB0aGUg
dGhyZWFkJ3MgZGVhdGguDQo+ID4+PiBEbyB5b3Ugc2VlIGFueSByZWFzb24gYXMgbm90IHRvIGNs
b3NlIHRoZSBsaXN0ZW5pbmcgc29ja2V0Pw0KPiA+Pj4NCj4gPj4NCj4gPj4gMS4gVG9tY2F0IGRv
ZXMgbm90IHN0YXJ0IEpWTSAgdGh1cyBpdCBjYW5ub3QgcmVzdGFydCBpdC4NCj4gPj4NCj4gPj4g
WW91IG5lZWQgc29tZSBleHRlcm5hbCB0b29sIG9yIHNjcmlwdCBvciBhZG1pbiB0byBwZXJmb3Jt
IG1vbml0b3JpbmcNCj4gPj4gYW5kIChyZSlzdGFydHMuDQo+ID4+DQo+ID4+IDIuIE9PTSBjYW4g
aGFwcGVuIGF0IGEgcmFuZG9tIHBsYWNlLiBPbmNlIGl0IGhhcHBlbnMsIGl0IGlzIGxpa2VseQ0K
PiA+PiB0aGF0IG90aGVyIHBsYWNlcyB3aWxsIGFsc28gc3RhcnQgdG8gZmFpbCByYW5kb21seS4g
SXQgaXMgYWxzbyBsaWtlbHkNCj4gPj4gdGhhdCB5b3VyIGF0dGVtcHRzIHRvIHJlY292ZXIgd2ls
bCBmYWlsIGFzIHdlbGwuDQo+ID4+DQo+ID4+IE1hcmsgYWxyZWFkeSBtZW50aW9uZWQgaXQ6ICJh
bGwgYmV0cyBhcmUgb2ZmIi4NCj4gPj4NCj4gPj4gQmVzdCByZWdhcmRzLA0KPiA+PiBLb25zdGFu
dGluIEtvbGlua28NCj4gPj4NCj4gPiBIaSBLb25zdGFudGluLA0KPiA+DQo+ID4gSSBhZ3JlZSBy
ZWdhcmRpbmcgdGhlIE9PTSBicmluZ2luZyBUQyB0byBhIHN0YXRlIHdoZXJlIGl0IG11c3QgYmUN
Cj4gcmVzdG9yZWQsIGJ1dCBteSBwb2ludCByZW1haW5zOiBpZiB0aGVyZSBpcyBjb2RlIHRoYXQg
aGFuZGxlcyBjYXRjaGluZyB0aGlzDQo+IGV4Y2VwdGlvbiBhbmQgdGVybWluYXRpbmcgdGhlIHRo
cmVhZCwgd2h5IG5vdCB0ZXJtaW5hdGUgZ3JhY2VmdWxseSBieQ0KPiBjbG9zaW5nIHRoZSBsaXN0
ZW5pbmcgc29ja2V0IGJlZm9yZSBraWxsaW5nIHRoZSB0aHJlYWQ/DQo+IA0KPiBBbmQgeW91ciBw
b2ludCBoYXMgYmVlbiBhbnN3ZXJlZC4gIEFmdGVyIGFuIE9PTSB0aGUgSlZNIGlzIGluIGFuDQo+
IHVua25vd24sIHVuc2FmZSBzdGF0ZSBzbyBhIHJlc3RhcnQgTVVTVCBvY2N1ciB0byByZXN0b3Jl
IHNlcnZpY2UuDQo+IA0KPiBDbG9zaW5nIGEgc29ja2V0IGdyYWNlZnVsbHkgYWZ0ZXIgYW4gT09N
IGlzIGEgYml0IGxpa2UgdHJ5aW5nIHRvIHNodXQgb25lIG9mIHRoZQ0KPiBwb3J0aG9sZXMgb24g
dGhlIFRpdGFuaWMsIHNob3J0bHkgYWZ0ZXIgaGVhcmluZyBhIGxhcmdlIGNyYXNoaW5nIHNvdW5k
Lg0KPiANCj4gDQo+IFRoZXJlJ3Mgb25seSBvbmUgcGxhY2UgSSBrbm93IG9mIHdoZXJlIFRvbWNh
dCBhdHRlbXB0cyB0byBpbnRlcmFjdCB3aXRoDQo+IE9PTSBjb25kaXRpb25zIGFuZCB0aGlzIGlz
IG5vdCBvbmUgb2YgdGhlbSwgc28gSSBkb24ndCBiZWxpZXZlIGl0J3Mgc2FmZSB0byBzYXkNCj4g
dGhhdCBUb21jYXQgaXMgZGVsaWJlcmF0ZWx5IGhhbmRsaW5nIHRoaXMgZXhjZXB0aW9uLg0KPiAN
Cj4gTkIgYW4gT09NIGlzIGFuIEVycm9yLCBub3QgYW4gRXhjZXB0aW9uIC0gaXQgaXMgYSBzdWJj
bGFzcyBvZg0KPiBWaXJ0dWFsTWFjaGluZUVycm9yLCB3aGljaCBpcyB0aHJvd24gdG8gaW5kaWNh
dGUgdGhhdCB0aGUgSmF2YSBWaXJ0dWFsDQo+IE1hY2hpbmUgaXMgYnJva2VuIG9yIGhhcyBydW4g
b3V0IG9mIHJlc291cmNlcyBuZWNlc3NhcnkgZm9yIGl0IHRvIGNvbnRpbnVlDQo+IG9wZXJhdGlu
Zy4NCj4gDQo+IEFuIEVycm9yIGlzIGEgc3ViY2xhc3Mgb2YgVGhyb3dhYmxlIHRoYXQgaW5kaWNh
dGVzIHNlcmlvdXMgcHJvYmxlbXMgdGhhdCBhDQo+IHJlYXNvbmFibGUgYXBwbGljYXRpb24gc2hv
dWxkIG5vdCB0cnkgdG8gY2F0Y2guDQo+IDwvZW5kLXF1b3RlPg0KPiANCj4gSWYgYW55dGhpbmcs
IHRoZSBsb2NhdGlvbnMgd2hlcmUgVG9tY2F0IGNhdGNoZXMgYSBUaHJvd2FibGUgc2hvdWxkIGJl
DQo+IG1vZGlmaWVkIHNvIGl0IGRvZXMgKm5vdCogY2F0Y2ggRXJyb3JzLCByYXRoZXIgdGhhbiBj
b250aW51aW5nIHRvIGRvIHNvIGFuZA0KPiB0aGVuIGF0dGVtcHRpbmcgYSB0cml2aWFsIHRpZHkt
dXAuDQo+IA0KPiANCj4gcA0KDQpUaGFua3MgZm9yIHlvdXIgaW5wdXQgLSB5b3UncmUgcmlnaHQg
cmVnYXJkaW5nIHRoZSBlcnJvciBhbmQgdGhlIGZhY3QgdGhhdCBUb21jYXQgaXMgaW5kZWVkIGNh
dGNoaW5nIGEgVGhyb3dhYmxlIGFuZCBub3QgYW4gRXhjZXB0aW9uLiAgSSBhc3N1bWUgdGhhdCBp
ZiB0aGUgVGhyb3dhYmxlIHdlcmUgbm90IGNhdWdodCwgdGhlbiB0aGUgdGhyZWFkIHdvdWxkIGRp
ZSBpbiBhbnkgY2FzZS4gIEFsdGhvdWdoIHN0YXRlZCBiZWZvcmUgdGhhdCBUb21jYXQgY291bGQg
bm90IGtpbGwgaXRzZWxmIGluIHN1Y2ggYSBzaXR1YXRpb24sIEkgc3RpbGwgd29uZGVyIGlmIGl0
IHdvdWxkIGJlIHBvc3NpYmxlIHRvIGRvIHNvLiAgT3IgdGFraW5nIGEgZGlmZmVyZW50IHBlcnNw
ZWN0aXZlIG9uIHRoaXM6IGlmIHRoZSBKVk0gc3BlY2lmaWNhdGlvbiBpcyBzdWNoIHRoYXQgaXQg
Y2Fubm90IGJlIHRydXN0ZWQgdG8gY29udGludWUgcnVubmluZyBhZnRlciBhbiBPT00sIHRoZW4g
d2h5IGRvZXMgaXQgbm90IGtpbGwgaXRzZWxmIG9yIHJlc3RhcnQgaXRzZWxmPw0KDQpUaGFua3Ms
DQpPZmVyIA0K
DQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IHVzZXJzLXVuc3Vi
c2NyaWJlQHRvbWNhdC5hcGFjaGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1t
YWlsOiB1c2Vycy1oZWxwQHRvbWNhdC5hcGFjaGUub3JnDQoN

From users-return-233440-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sun Apr  8 20:14:52 2012
Return-Path: <users-return-233440-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5ED099021
	for <apmail-tomcat-users-archive@www.apache.org>; Sun,  8 Apr 2012 20:14:52 +0000 (UTC)
Received: (qmail 10448 invoked by uid 500); 8 Apr 2012 20:14:49 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 10205 invoked by uid 500); 8 Apr 2012 20:14:48 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 10195 invoked by uid 99); 8 Apr 2012 20:14:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Apr 2012 20:14:48 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [80.237.132.197] (HELO wp190.webpack.hosteurope.de) (80.237.132.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 08 Apr 2012 20:14:43 +0000
Received: from p3e9eece9.dip.t-dialin.net ([62.158.236.233] helo=[10.1.1.251]); authenticated
	by wp190.webpack.hosteurope.de running ExIM with esmtpa
	id 1SGyVB-0004gP-H7; Sun, 08 Apr 2012 22:14:21 +0200
Message-ID: <4F81F19C.3020504@mayr-stefan.de>
Date: Sun, 08 Apr 2012 22:14:20 +0200
From: Stefan Mayr <stefan@mayr-stefan.de>
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: users@tomcat.apache.org
Subject: Re: Bug in Tomcat AJP Connector?
References: <217DDBC2BB1E394CA9E7446337CBDEF20102DEDB4F4A@il-ex01.ad.checkpoint.com> <4F7C81BB.1040804@apache.org> <217DDBC2BB1E394CA9E7446337CBDEF20102DEDB4FA0@il-ex01.ad.checkpoint.com> <CABzHfV=hqDq_UmjVpO0moj7jSGRxp2BXgEFzTp7noS+iJaOVzw@mail.gmail.com> <F4938ADA-CE56-43B9-A6BE-490EA47922CA@checkpoint.com> <4F7E2E89.5040805@pidster.com> <217DDBC2BB1E394CA9E7446337CBDEF20102DEDB51E4@il-ex01.ad.checkpoint.com>
In-Reply-To: <217DDBC2BB1E394CA9E7446337CBDEF20102DEDB51E4@il-ex01.ad.checkpoint.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-bounce-key: webpack.hosteurope.de;stefan@mayr-stefan.de;1333916083;47b3cfc1;
X-Virus-Checked: Checked by ClamAV on apache.org

Am 08.04.2012 18:41, schrieb Ofer Israeli:
> 2012/4/6 Pid<pid@pidster.com>:
>> On 05/04/2012 22:17, Ofer Israeli wrote:
>>> Y
>>>
>>> On 5  2012, at 18:58, "Konstantin Kolinko"<knst.kolinko@gmail.com>
>> wrote:
>>>
>>>> 2012/4/5 Ofer Israeli<oferi@checkpoint.com>:
>>>>> Mark Thomas wrote:
>>>>>> On 04/04/2012 17:02, Ofer Israeli wrote:
>>>>>>
>>>>>> Once you have an OOME all bets are off. The JVM needs to be
>> restarted.
>>>>>> There is no guarantee of reliable operation after an OOME.
>>>>>>
>>>>>> Mark
>>>>>
>>>>> Hi Mark,
>>>>> I agree that there in such a situation the JVM should be restarted, but it
>> isn't restarted by Tomcat.  On the other hand, Tomcat does take some
>> precautious actions and kills the accepting thread, but in such a case it should
>> also close the socket that thread is listening on otherwise it is leaving garbage
>> around after the thread's death.
>>>>> Do you see any reason as not to close the listening socket?
>>>>>
>>>>
>>>> 1. Tomcat does not start JVM  thus it cannot restart it.
>>>>
>>>> You need some external tool or script or admin to perform monitoring
>>>> and (re)starts.
>>>>
>>>> 2. OOM can happen at a random place. Once it happens, it is likely
>>>> that other places will also start to fail randomly. It is also likely
>>>> that your attempts to recover will fail as well.
>>>>
>>>> Mark already mentioned it: "all bets are off".
>>>>
>>>> Best regards,
>>>> Konstantin Kolinko
>>>>
>>> Hi Konstantin,
>>>
>>> I agree regarding the OOM bringing TC to a state where it must be
>> restored, but my point remains: if there is code that handles catching this
>> exception and terminating the thread, why not terminate gracefully by
>> closing the listening socket before killing the thread?
>>
>> And your point has been answered.  After an OOM the JVM is in an
>> unknown, unsafe state so a restart MUST occur to restore service.
>>
>> Closing a socket gracefully after an OOM is a bit like trying to shut one of the
>> portholes on the Titanic, shortly after hearing a large crashing sound.
>>
>>
>> There's only one place I know of where Tomcat attempts to interact with
>> OOM conditions and this is not one of them, so I don't believe it's safe to say
>> that Tomcat is deliberately handling this exception.
>>
>> NB an OOM is an Error, not an Exception - it is a subclass of
>> VirtualMachineError, which is thrown to indicate that the Java Virtual
>> Machine is broken or has run out of resources necessary for it to continue
>> operating.
>>
>> An Error is a subclass of Throwable that indicates serious problems that a
>> reasonable application should not try to catch.
>> </end-quote>
>>
>> If anything, the locations where Tomcat catches a Throwable should be
>> modified so it does *not* catch Errors, rather than continuing to do so and
>> then attempting a trivial tidy-up.
>>
>>
>> p
>
> Thanks for your input - you're right regarding the error and the fact that Tomcat is indeed catching a Throwable and not an Exception.  I assume that if the Throwable were not caught, then the thread would die in any case.  Although stated before that Tomcat could not kill itself in such a situation, I still wonder if it would be possible to do so.  Or taking a different perspective on this: if the JVM specification is such that it cannot be trusted to continue running after an OOM, then why does it not kill itself or restart itself?
>

I guess you can do this with some vendor specific JVM arguments as 
SUNs/Oracles -XX:OnOutOfMemoryError: 
http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html

Different findings like "kill -9 %p" let me suspect that you can use %p 
as a variable for your current pid. With that you can either kill your 
current instance and let your monitoring handle the rest or try to 
initiate the restart by yourself.

Give it a try

	Stefan





---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233441-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  9 08:19:26 2012
Return-Path: <users-return-233441-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 885D59168
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  9 Apr 2012 08:19:26 +0000 (UTC)
Received: (qmail 94321 invoked by uid 500); 9 Apr 2012 08:19:23 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 93830 invoked by uid 500); 9 Apr 2012 08:19:19 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 93809 invoked by uid 99); 9 Apr 2012 08:19:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2012 08:19:18 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of oferi@checkpoint.com designates 194.29.34.68 as permitted sender)
Received: from [194.29.34.68] (HELO michael.checkpoint.com) (194.29.34.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2012 08:19:13 +0000
Received: from il-ex01.ad.checkpoint.com (il-ex01.ad.checkpoint.com [194.29.34.26])
	by michael.checkpoint.com (8.13.8/8.13.8) with ESMTP id q398IeSQ012598
	for <users@tomcat.apache.org>; Mon, 9 Apr 2012 11:18:43 +0300
X-CheckPoint: {4F82A8C2-0-1B221DC2-5FFFF}
Received: from il-ex01.ad.checkpoint.com ([126.0.0.2]) by
 il-ex01.ad.checkpoint.com ([126.0.0.2]) with mapi; Mon, 9 Apr 2012 11:18:30
 +0300
From: Ofer Israeli <oferi@checkpoint.com>
To: Tomcat Users List <users@tomcat.apache.org>
Date: Mon, 9 Apr 2012 11:18:28 +0300
Subject: RE: Bug in Tomcat AJP Connector?
Thread-Topic: Bug in Tomcat AJP Connector?
Thread-Index: Ac0VxEwm/0S1++U2QA+UjnVCm5GrogAZOiXg
Message-ID: <217DDBC2BB1E394CA9E7446337CBDEF20102DEDB524D@il-ex01.ad.checkpoint.com>
References: <217DDBC2BB1E394CA9E7446337CBDEF20102DEDB4F4A@il-ex01.ad.checkpoint.com>
 <4F7C81BB.1040804@apache.org>
 <217DDBC2BB1E394CA9E7446337CBDEF20102DEDB4FA0@il-ex01.ad.checkpoint.com>
 <CABzHfV=hqDq_UmjVpO0moj7jSGRxp2BXgEFzTp7noS+iJaOVzw@mail.gmail.com>
 <F4938ADA-CE56-43B9-A6BE-490EA47922CA@checkpoint.com>
 <4F7E2E89.5040805@pidster.com>
 <217DDBC2BB1E394CA9E7446337CBDEF20102DEDB51E4@il-ex01.ad.checkpoint.com>
 <4F81F19C.3020504@mayr-stefan.de>
In-Reply-To: <4F81F19C.3020504@mayr-stefan.de>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
x-kse-antivirus-interceptor-info: scan successful
x-kse-antivirus-info: Clean
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

T24gMDgvMDQvMjAxMiAyMzoxNCwgU3RlZmFuIE1heXIgPHN0ZWZhbkBtYXlyLXN0ZWZhbi5kZT4g
d3JvdGU6DQo+IEFtIDA4LjA0LjIwMTIgMTg6NDEsIHNjaHJpZWIgT2ZlciBJc3JhZWxpOg0KPiA+
IDIwMTIvNC82IFBpZDxwaWRAcGlkc3Rlci5jb20+Og0KPiA+PiBPbiAwNS8wNC8yMDEyIDIyOjE3
LCBPZmVyIElzcmFlbGkgd3JvdGU6DQo+ID4+PiBZDQo+ID4+Pg0KPiA+Pj4gT24gNSDXkdeQ16TX
qCAyMDEyLCBhdCAxODo1OCwgIktvbnN0YW50aW4NCj4gPj4+IEtvbGlua28iPGtuc3Qua29saW5r
b0BnbWFpbC5jb20+DQo+ID4+IHdyb3RlOg0KPiA+Pj4NCj4gPj4+PiAyMDEyLzQvNSBPZmVyIElz
cmFlbGk8b2ZlcmlAY2hlY2twb2ludC5jb20+Og0KPiA+Pj4+PiBNYXJrIFRob21hcyB3cm90ZToN
Cj4gPj4+Pj4+IE9uIDA0LzA0LzIwMTIgMTc6MDIsIE9mZXIgSXNyYWVsaSB3cm90ZToNCj4gPj4+
Pj4+DQo+ID4+Pj4+PiBPbmNlIHlvdSBoYXZlIGFuIE9PTUUgYWxsIGJldHMgYXJlIG9mZi4gVGhl
IEpWTSBuZWVkcyB0byBiZQ0KPiA+PiByZXN0YXJ0ZWQuDQo+ID4+Pj4+PiBUaGVyZSBpcyBubyBn
dWFyYW50ZWUgb2YgcmVsaWFibGUgb3BlcmF0aW9uIGFmdGVyIGFuIE9PTUUuDQo+ID4+Pj4+Pg0K
PiA+Pj4+Pj4gTWFyaw0KPiA+Pj4+Pg0KPiA+Pj4+PiBIaSBNYXJrLA0KPiA+Pj4+PiBJIGFncmVl
IHRoYXQgdGhlcmUgaW4gc3VjaCBhIHNpdHVhdGlvbiB0aGUgSlZNIHNob3VsZCBiZQ0KPiA+Pj4+
PiByZXN0YXJ0ZWQsIGJ1dCBpdA0KPiA+PiBpc24ndCByZXN0YXJ0ZWQgYnkgVG9tY2F0LiAgT24g
dGhlIG90aGVyIGhhbmQsIFRvbWNhdCBkb2VzIHRha2Ugc29tZQ0KPiA+PiBwcmVjYXV0aW91cyBh
Y3Rpb25zIGFuZCBraWxscyB0aGUgYWNjZXB0aW5nIHRocmVhZCwgYnV0IGluIHN1Y2ggYQ0KPiA+
PiBjYXNlIGl0IHNob3VsZCBhbHNvIGNsb3NlIHRoZSBzb2NrZXQgdGhhdCB0aHJlYWQgaXMgbGlz
dGVuaW5nIG9uDQo+ID4+IG90aGVyd2lzZSBpdCBpcyBsZWF2aW5nIGdhcmJhZ2UgYXJvdW5kIGFm
dGVyIHRoZSB0aHJlYWQncyBkZWF0aC4NCj4gPj4+Pj4gRG8geW91IHNlZSBhbnkgcmVhc29uIGFz
IG5vdCB0byBjbG9zZSB0aGUgbGlzdGVuaW5nIHNvY2tldD8NCj4gPj4+Pj4NCj4gPj4+Pg0KPiA+
Pj4+IDEuIFRvbWNhdCBkb2VzIG5vdCBzdGFydCBKVk0gIHRodXMgaXQgY2Fubm90IHJlc3RhcnQg
aXQuDQo+ID4+Pj4NCj4gPj4+PiBZb3UgbmVlZCBzb21lIGV4dGVybmFsIHRvb2wgb3Igc2NyaXB0
IG9yIGFkbWluIHRvIHBlcmZvcm0NCj4gPj4+PiBtb25pdG9yaW5nIGFuZCAocmUpc3RhcnRzLg0K
PiA+Pj4+DQo+ID4+Pj4gMi4gT09NIGNhbiBoYXBwZW4gYXQgYSByYW5kb20gcGxhY2UuIE9uY2Ug
aXQgaGFwcGVucywgaXQgaXMgbGlrZWx5DQo+ID4+Pj4gdGhhdCBvdGhlciBwbGFjZXMgd2lsbCBh
bHNvIHN0YXJ0IHRvIGZhaWwgcmFuZG9tbHkuIEl0IGlzIGFsc28NCj4gPj4+PiBsaWtlbHkgdGhh
dCB5b3VyIGF0dGVtcHRzIHRvIHJlY292ZXIgd2lsbCBmYWlsIGFzIHdlbGwuDQo+ID4+Pj4NCj4g
Pj4+PiBNYXJrIGFscmVhZHkgbWVudGlvbmVkIGl0OiAiYWxsIGJldHMgYXJlIG9mZiIuDQo+ID4+
Pj4NCj4gPj4+PiBCZXN0IHJlZ2FyZHMsDQo+ID4+Pj4gS29uc3RhbnRpbiBLb2xpbmtvDQo+ID4+
Pj4NCj4gPj4+IEhpIEtvbnN0YW50aW4sDQo+ID4+Pg0KPiA+Pj4gSSBhZ3JlZSByZWdhcmRpbmcg
dGhlIE9PTSBicmluZ2luZyBUQyB0byBhIHN0YXRlIHdoZXJlIGl0IG11c3QgYmUNCj4gPj4gcmVz
dG9yZWQsIGJ1dCBteSBwb2ludCByZW1haW5zOiBpZiB0aGVyZSBpcyBjb2RlIHRoYXQgaGFuZGxl
cw0KPiA+PiBjYXRjaGluZyB0aGlzIGV4Y2VwdGlvbiBhbmQgdGVybWluYXRpbmcgdGhlIHRocmVh
ZCwgd2h5IG5vdCB0ZXJtaW5hdGUNCj4gPj4gZ3JhY2VmdWxseSBieSBjbG9zaW5nIHRoZSBsaXN0
ZW5pbmcgc29ja2V0IGJlZm9yZSBraWxsaW5nIHRoZSB0aHJlYWQ/DQo+ID4+DQo+ID4+IEFuZCB5
b3VyIHBvaW50IGhhcyBiZWVuIGFuc3dlcmVkLiAgQWZ0ZXIgYW4gT09NIHRoZSBKVk0gaXMgaW4g
YW4NCj4gPj4gdW5rbm93biwgdW5zYWZlIHN0YXRlIHNvIGEgcmVzdGFydCBNVVNUIG9jY3VyIHRv
IHJlc3RvcmUgc2VydmljZS4NCj4gPj4NCj4gPj4gQ2xvc2luZyBhIHNvY2tldCBncmFjZWZ1bGx5
IGFmdGVyIGFuIE9PTSBpcyBhIGJpdCBsaWtlIHRyeWluZyB0byBzaHV0DQo+ID4+IG9uZSBvZiB0
aGUgcG9ydGhvbGVzIG9uIHRoZSBUaXRhbmljLCBzaG9ydGx5IGFmdGVyIGhlYXJpbmcgYSBsYXJn
ZSBjcmFzaGluZw0KPiBzb3VuZC4NCj4gPj4NCj4gPj4NCj4gPj4gVGhlcmUncyBvbmx5IG9uZSBw
bGFjZSBJIGtub3cgb2Ygd2hlcmUgVG9tY2F0IGF0dGVtcHRzIHRvIGludGVyYWN0DQo+ID4+IHdp
dGggT09NIGNvbmRpdGlvbnMgYW5kIHRoaXMgaXMgbm90IG9uZSBvZiB0aGVtLCBzbyBJIGRvbid0
IGJlbGlldmUNCj4gPj4gaXQncyBzYWZlIHRvIHNheSB0aGF0IFRvbWNhdCBpcyBkZWxpYmVyYXRl
bHkgaGFuZGxpbmcgdGhpcyBleGNlcHRpb24uDQo+ID4+DQo+ID4+IE5CIGFuIE9PTSBpcyBhbiBF
cnJvciwgbm90IGFuIEV4Y2VwdGlvbiAtIGl0IGlzIGEgc3ViY2xhc3Mgb2YNCj4gPj4gVmlydHVh
bE1hY2hpbmVFcnJvciwgd2hpY2ggaXMgdGhyb3duIHRvIGluZGljYXRlIHRoYXQgdGhlIEphdmEN
Cj4gPj4gVmlydHVhbCBNYWNoaW5lIGlzIGJyb2tlbiBvciBoYXMgcnVuIG91dCBvZiByZXNvdXJj
ZXMgbmVjZXNzYXJ5IGZvcg0KPiA+PiBpdCB0byBjb250aW51ZSBvcGVyYXRpbmcuDQo+ID4+DQo+
ID4+IEFuIEVycm9yIGlzIGEgc3ViY2xhc3Mgb2YgVGhyb3dhYmxlIHRoYXQgaW5kaWNhdGVzIHNl
cmlvdXMgcHJvYmxlbXMNCj4gPj4gdGhhdCBhIHJlYXNvbmFibGUgYXBwbGljYXRpb24gc2hvdWxk
IG5vdCB0cnkgdG8gY2F0Y2guDQo+ID4+IDwvZW5kLXF1b3RlPg0KPiA+Pg0KPiA+PiBJZiBhbnl0
aGluZywgdGhlIGxvY2F0aW9ucyB3aGVyZSBUb21jYXQgY2F0Y2hlcyBhIFRocm93YWJsZSBzaG91
bGQgYmUNCj4gPj4gbW9kaWZpZWQgc28gaXQgZG9lcyAqbm90KiBjYXRjaCBFcnJvcnMsIHJhdGhl
ciB0aGFuIGNvbnRpbnVpbmcgdG8gZG8NCj4gPj4gc28gYW5kIHRoZW4gYXR0ZW1wdGluZyBhIHRy
aXZpYWwgdGlkeS11cC4NCj4gPj4NCj4gPj4NCj4gPj4gcA0KPiA+DQo+ID4gVGhhbmtzIGZvciB5
b3VyIGlucHV0IC0geW91J3JlIHJpZ2h0IHJlZ2FyZGluZyB0aGUgZXJyb3IgYW5kIHRoZSBmYWN0
IHRoYXQNCj4gVG9tY2F0IGlzIGluZGVlZCBjYXRjaGluZyBhIFRocm93YWJsZSBhbmQgbm90IGFu
IEV4Y2VwdGlvbi4gIEkgYXNzdW1lIHRoYXQgaWYNCj4gdGhlIFRocm93YWJsZSB3ZXJlIG5vdCBj
YXVnaHQsIHRoZW4gdGhlIHRocmVhZCB3b3VsZCBkaWUgaW4gYW55IGNhc2UuDQo+IEFsdGhvdWdo
IHN0YXRlZCBiZWZvcmUgdGhhdCBUb21jYXQgY291bGQgbm90IGtpbGwgaXRzZWxmIGluIHN1Y2gg
YSBzaXR1YXRpb24sIEkNCj4gc3RpbGwgd29uZGVyIGlmIGl0IHdvdWxkIGJlIHBvc3NpYmxlIHRv
IGRvIHNvLiAgT3IgdGFraW5nIGEgZGlmZmVyZW50IHBlcnNwZWN0aXZlDQo+IG9uIHRoaXM6IGlm
IHRoZSBKVk0gc3BlY2lmaWNhdGlvbiBpcyBzdWNoIHRoYXQgaXQgY2Fubm90IGJlIHRydXN0ZWQg
dG8gY29udGludWUNCj4gcnVubmluZyBhZnRlciBhbiBPT00sIHRoZW4gd2h5IGRvZXMgaXQgbm90
IGtpbGwgaXRzZWxmIG9yIHJlc3RhcnQgaXRzZWxmPw0KPiA+DQo+IA0KPiBJIGd1ZXNzIHlvdSBj
YW4gZG8gdGhpcyB3aXRoIHNvbWUgdmVuZG9yIHNwZWNpZmljIEpWTSBhcmd1bWVudHMgYXMNCj4g
U1VOcy9PcmFjbGVzIC1YWDpPbk91dE9mTWVtb3J5RXJyb3I6DQo+IGh0dHA6Ly93d3cub3JhY2xl
LmNvbS90ZWNobmV0d29yay9qYXZhL2phdmFzZS90ZWNoL3Ztb3B0aW9ucy1qc3AtDQo+IDE0MDEw
Mi5odG1sDQo+IA0KPiBEaWZmZXJlbnQgZmluZGluZ3MgbGlrZSAia2lsbCAtOSAlcCIgbGV0IG1l
IHN1c3BlY3QgdGhhdCB5b3UgY2FuIHVzZSAlcCBhcyBhDQo+IHZhcmlhYmxlIGZvciB5b3VyIGN1
cnJlbnQgcGlkLiBXaXRoIHRoYXQgeW91IGNhbiBlaXRoZXIga2lsbCB5b3VyIGN1cnJlbnQNCj4g
aW5zdGFuY2UgYW5kIGxldCB5b3VyIG1vbml0b3JpbmcgaGFuZGxlIHRoZSByZXN0IG9yIHRyeSB0
byBpbml0aWF0ZSB0aGUgcmVzdGFydA0KPiBieSB5b3Vyc2VsZi4NCj4gDQo+IEdpdmUgaXQgYSB0
cnkNCj4gDQo+IAlTdGVmYW4NCj4gDQpUaGFua3MgU3RlZmFuIC0gd2lsbCBsb29rIGludG8gdGhp
cyBvcHRpb24uDQoNCg==
DQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IHVzZXJzLXVuc3Vi
c2NyaWJlQHRvbWNhdC5hcGFjaGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1t
YWlsOiB1c2Vycy1oZWxwQHRvbWNhdC5hcGFjaGUub3JnDQoN

From users-return-233442-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  9 10:12:56 2012
Return-Path: <users-return-233442-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 91B3A956B
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  9 Apr 2012 10:12:56 +0000 (UTC)
Received: (qmail 23183 invoked by uid 500); 9 Apr 2012 10:12:53 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 23016 invoked by uid 500); 9 Apr 2012 10:12:53 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 22995 invoked by uid 99); 9 Apr 2012 10:12:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2012 10:12:52 +0000
X-ASF-Spam-Status: No, hits=0.9 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [216.139.250.139] (HELO joe.nabble.com) (216.139.250.139)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2012 10:12:47 +0000
Received: from alf.nabble.com ([192.168.236.21])
	by joe.nabble.com with esmtp (Exim 4.72)
	(envelope-from <lmhelp1@orange.fr>)
	id 1SHBaE-0004zM-95
	for users@tomcat.apache.org; Mon, 09 Apr 2012 03:12:26 -0700
Date: Mon, 9 Apr 2012 03:12:26 -0700 (PDT)
From: =?UTF-8?Q?L=C3=A9a_Massiot?= <lmhelp1@orange.fr>
To: users@tomcat.apache.org
Message-ID: <1333966346271-4715558.post@n6.nabble.com>
In-Reply-To: <4F809AD9.90407@ice-sa.com>
References: <1333363527730-4678513.post@n6.nabble.com> <4F7A11D7.80205@christopherschultz.net> <1333444940374-4681421.post@n6.nabble.com> <4F7AE221.10605@ice-sa.com> <1333549942374-4686704.post@n6.nabble.com> <1333564099167-4687332.post@n6.nabble.com> <4F7DA677.3060205@christopherschultz.net> <1333705857484-4692232.post@n6.nabble.com> <4F7EF29D.7090004@ice-sa.com> <4F809AD9.90407@ice-sa.com>
Subject: Re: Tomcat6 - Context - aliases
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

@Andr=C3=A9 Warnier: Thank you for your detailed answer.

As of your objections:

1) We don't agree with each other. I *DO* care about what URLs look like:=
=20
a) in general, b) for some reasons related to the user's speaking language,
c) for search engines, d) ...=20
The URL of a link can be seen in many circumstances and is used in various
ways both by humans and bots.

2) I want the resources (files and other things like databases) to be store=
d
outside the servlets container and more precisely on another partition,
especially if data get erased when the context which contains them is
undeployed!


Andr=C3=A9 Warnier wrote
>  Do you know that when a Context is undeployed by Tomcat, all its files
> are deleted ?
This is certainly not what I want. I would expect Tomcat to provide a
mechanism for it not to happen. (See my questions at the end of this post).


Andr=C3=A9 Warnier wrote
> with your method consisting of creating a new context on-the-fly
Am I? I put "an_alias_1.xml" in "/etc/tomcat6/Catalina/localhost/" once and
only once (never touch it again afterwards).


Andr=C3=A9 Warnier wrote
> But this is a logical consequence of building a context "from scratch",
> outside of you "/w" context, and having Tomcat serve it, without any kind
> of security protecting that location.=20
It's not exactly my full responsibility. I'm looking for a solution,
remember. I'm not especially keen on that solution.


Andr=C3=A9 Warnier wrote
> An "undeploy" of a Context does not generally happen by itself
What is the probability of such an event occurring? If it's like a "rm -R"
on the directory, I'll forget about it.

So, given your thoughtful observations, here are my questions:
1) Can you tell me how to test a context undeployment in command line (not
via Tomcat Manager please)?
2) Is there any way, I can prevent a context to be undeployed ever (like
setting a specific option in a configuration file, in "an_alias_1.xml" for
example)?
3) Is there any good example illustrating how to do a cross context
authentication you can point me to?

Thank you for helping and best regards.

--
View this message in context: http://tomcat.10.n6.nabble.com/Tomcat6-Contex=
t-aliases-tp4678430p4715558.html
Sent from the Tomcat - User mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233443-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  9 11:16:35 2012
Return-Path: <users-return-233443-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5E7069557
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  9 Apr 2012 11:16:35 +0000 (UTC)
Received: (qmail 67886 invoked by uid 500); 9 Apr 2012 11:16:32 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 67827 invoked by uid 500); 9 Apr 2012 11:16:31 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 67817 invoked by uid 99); 9 Apr 2012 11:16:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2012 11:16:31 +0000
X-ASF-Spam-Status: No, hits=0.9 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [216.139.250.139] (HELO joe.nabble.com) (216.139.250.139)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2012 11:16:26 +0000
Received: from alf.nabble.com ([192.168.236.21])
	by joe.nabble.com with esmtp (Exim 4.72)
	(envelope-from <lmhelp1@orange.fr>)
	id 1SHCZp-0008NR-Em
	for users@tomcat.apache.org; Mon, 09 Apr 2012 04:16:05 -0700
Date: Mon, 9 Apr 2012 04:16:05 -0700 (PDT)
From: =?UTF-8?Q?L=C3=A9a_Massiot?= <lmhelp1@orange.fr>
To: users@tomcat.apache.org
Message-ID: <1333970165444-4715649.post@n6.nabble.com>
In-Reply-To: <1333966346271-4715558.post@n6.nabble.com>
References: <4F7A11D7.80205@christopherschultz.net> <1333444940374-4681421.post@n6.nabble.com> <4F7AE221.10605@ice-sa.com> <1333549942374-4686704.post@n6.nabble.com> <1333564099167-4687332.post@n6.nabble.com> <4F7DA677.3060205@christopherschultz.net> <1333705857484-4692232.post@n6.nabble.com> <4F7EF29D.7090004@ice-sa.com> <4F809AD9.90407@ice-sa.com> <1333966346271-4715558.post@n6.nabble.com>
Subject: Re: Tomcat6 - Context - aliases
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I edited my previous post at 1:14 PM 2012/04/09.
Thanks.

--
View this message in context: http://tomcat.10.n6.nabble.com/Tomcat6-Context-aliases-tp4678430p4715649.html
Sent from the Tomcat - User mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233444-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  9 12:54:35 2012
Return-Path: <users-return-233444-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9C00299E8
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  9 Apr 2012 12:54:35 +0000 (UTC)
Received: (qmail 65364 invoked by uid 500); 9 Apr 2012 12:54:32 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 65142 invoked by uid 500); 9 Apr 2012 12:54:32 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 65131 invoked by uid 99); 9 Apr 2012 12:54:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2012 12:54:32 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [195.50.194.148] (HELO mx6.playtech.com) (195.50.194.148)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2012 12:54:21 +0000
Received: from EE-EXCH3.EE.playtech.corp (194.126.102.178) by mx6.playtech.com
 (195.50.194.148) with Microsoft SMTP Server (TLS) id 14.1.270.1; Mon, 9 Apr
 2012 15:53:03 +0300
Received: from il-exch1.IL.playtech.corp (192.168.7.34) by
 EE-EXCH3.EE.playtech.corp (192.168.3.32) with Microsoft SMTP Server (TLS) id
 14.2.283.3; Mon, 9 Apr 2012 15:53:56 +0300
Received: from il-exch1.IL.playtech.corp ([192.168.7.34]) by il-exch1
 ([192.168.7.34]) with mapi; Mon, 9 Apr 2012 15:53:53 +0300
From: Vyacheslav Trainin <Vyacheslav.Trainin@playtech.com>
To: "'users@tomcat.apache.org'" <users@tomcat.apache.org>
Date: Mon, 9 Apr 2012 15:53:52 +0300
Subject: tomcat asynchronous invocation problem
Thread-Topic: tomcat asynchronous invocation problem
Thread-Index: Ac0WT8+tYk70cfR6TemtvP65+g20rA==
Message-ID: <DCAEB2F31E665B4081B49A6DE402946130F7022A25@il-exch1>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: yes
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/signed; protocol="application/x-pkcs7-signature";
	micalg=SHA1; boundary="----=_NextPart_000_059C_01CD1668.F6317A60"
MIME-Version: 1.0

------=_NextPart_000_059C_01CD1668.F6317A60
Content-Type: multipart/alternative;
	boundary="----=_NextPart_001_059D_01CD1668.F6317A60"


------=_NextPart_001_059D_01CD1668.F6317A60
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi,

 

We encountered a problem during asynchronous operations (tomcat 7 with
servlet 3). 

Description:  

One client continuously sends post requests to the server. On the server
side for each request created AsyncContext with timeout 20 seconds:

AsyncContext asyncContext = req.startAsync(req, resp);

      asyncContext.setTimeout(20000);

As expected after approximately 20 sec the requests are completed. Then
another client also begins to send requests to the server but in this case
they are explicitly completed after 500 milliseconds. Something like this:

AsyncContext asyncContext = req.startAsync(req, resp);

      asyncContext.setTimeout(20000);

      

      try {

         Thread.sleep(500);

      } catch (Exception e) {

      }

 

      asyncContext.complete();

 

The problem is that after running the second client all the requested
waiting for timeout (from the first client) are stuck and not released
(onTimeout method of AsyncEvent is not called) until the second client stops
sending requests.

It looks like the problem occurs on Linux but not on Windows.

 

Below is a simple test that may help to reproduce this issue. The following
servlet accepts URL parameter "complete".

When "complete=1" the request will be completed after 500ms.

Otherwise the request will wait till timeout (20 seconds).

 

Run client that periodically sends requests to /servlet?complete=0. (I have
tested it with 10 parallel threads that run in a loop)

Then run another client that periodically sends requests to
/servlet?complete=1 (This client can use only a single thread)

See that the first client does not receive any responses while the second
client is running.

 

 

public class WebTestServlet extends HttpServlet {

    private static final Logger LOG =
LoggerFactory.getLogger(WebTestServlet.class);

 

    @Override

    protected void service(final HttpServletRequest req, final
HttpServletResponse resp) throws ServletException, IOException {

        LOG.debug("Received request: {}", req);

        final long startTime = System.currentTimeMillis();

        String isComplete = req.getParameter("complete");

 

        AsyncContext asyncContext = req.startAsync(req, resp);

        asyncContext.setTimeout(20000);

        asyncContext.addListener(new AsyncListener() {

            public void onTimeout(AsyncEvent event) throws IOException {

                long duration = System.currentTimeMillis() - startTime;

                LOG.debug("Async Timeout. Request: {}. Waiting time: {}",
event.getSuppliedRequest(), duration);

                event.getAsyncContext().complete();

            }

 

            public void onStartAsync(AsyncEvent event) throws IOException {

                LOG.debug("Start async. Request: {}",
event.getSuppliedRequest());

            }

 

            public void onError(AsyncEvent event) throws IOException {

                LOG.debug("Error occured. Request: {}. Error: {}",
event.getSuppliedRequest(), event.getThrowable());

            }

 

            public void onComplete(AsyncEvent event) throws IOException {

                long duration = System.currentTimeMillis() - startTime;

                LOG.debug("Async Complete. Request: {}. Request process
time: {}", event.getSuppliedRequest(), duration);

            }

        }, req, resp);

 

        if ("1".equals(isComplete)) {

            try {

                Thread.sleep(500);

            } catch (Exception e) {

            }

 

            asyncContext.complete();

        }

    }

}

 

Regards,

Slava

 

 


------=_NextPart_001_059D_01CD1668.F6317A60
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" =
xmlns:o=3D"urn:schemas-microsoft-com:office:office" =
xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns:m=3D"http://schemas.microsoft.com/office/2004/12/omml" =
xmlns=3D"http://www.w3.org/TR/REC-html40"><head><meta =
http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dus-ascii"><meta name=3DGenerator content=3D"Microsoft Word 14 =
(filtered medium)"><style><!--
/* Font Definitions */
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:purple;
	text-decoration:underline;}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{mso-style-priority:99;
	mso-style-link:"Balloon Text Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:8.0pt;
	font-family:"Tahoma","sans-serif";}
span.EmailStyle17
	{mso-style-type:personal;
	font-family:"Calibri","sans-serif";
	color:windowtext;}
span.EmailStyle18
	{mso-style-type:personal;
	font-family:"Calibri","sans-serif";
	color:#1F497D;}
span.EmailStyle19
	{mso-style-type:personal-reply;
	font-family:"Calibri","sans-serif";
	color:#1F497D;}
span.BalloonTextChar
	{mso-style-name:"Balloon Text Char";
	mso-style-priority:99;
	mso-style-link:"Balloon Text";
	font-family:"Tahoma","sans-serif";}
.MsoChpDefault
	{mso-style-type:export-only;
	font-size:10.0pt;}
@page WordSection1
	{size:8.5in 11.0in;
	margin:1.0in 1.0in 1.0in 1.0in;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]--></head><body lang=3DEN-US link=3Dblue =
vlink=3Dpurple><div class=3DWordSection1><p class=3DMsoNormal><span =
style=3D'color:#1F497D'>Hi,<o:p></o:p></span></p><p =
class=3DMsoNormal><span =
style=3D'color:#1F497D'><o:p>&nbsp;</o:p></span></p><p =
class=3DMsoNormal>We encountered a problem during asynchronous =
operations (tomcat 7 with servlet 3). <o:p></o:p></p><p =
class=3DMsoNormal><u>Description: &nbsp;<o:p></o:p></u></p><p =
class=3DMsoNormal>One client continuously sends post requests to the =
server. On the server side for each request created AsyncContext with =
timeout 20 seconds:<o:p></o:p></p><p class=3DMsoNormal =
style=3D'text-indent:.5in;text-autospace:none'><span =
style=3D'font-size:10.0pt;font-family:"Courier =
New";color:black;background:silver;mso-highlight:silver'>AsyncContext</sp=
an><span style=3D'font-size:10.0pt;font-family:"Courier =
New";color:black'> asyncContext =3D req.startAsync(req, =
resp);</span><span style=3D'font-size:10.0pt;font-family:"Courier =
New"'><o:p></o:p></span></p><p class=3DMsoNormal =
style=3D'text-autospace:none'><span =
style=3D'font-size:10.0pt;font-family:"Courier =
New";color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
asyncContext.setTimeout(20000);</span><span =
style=3D'font-size:10.0pt;font-family:"Courier =
New"'><o:p></o:p></span></p><p class=3DMsoNormal>As expected after =
approximately 20 sec the requests are completed. Then another client =
also begins to send requests to the server but in this case they are =
explicitly completed after 500 milliseconds. Something like =
this:<o:p></o:p></p><p class=3DMsoNormal =
style=3D'text-indent:.5in;text-autospace:none'><span =
style=3D'font-size:10.0pt;font-family:"Courier =
New";color:black;background:silver;mso-highlight:silver'>AsyncContext</sp=
an><span style=3D'font-size:10.0pt;font-family:"Courier =
New";color:black'> asyncContext =3D req.startAsync(req, =
resp);</span><span style=3D'font-size:10.0pt;font-family:"Courier =
New"'><o:p></o:p></span></p><p class=3DMsoNormal =
style=3D'text-autospace:none'><span =
style=3D'font-size:10.0pt;font-family:"Courier =
New";color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
asyncContext.setTimeout(20000);<o:p></o:p></span></p><p =
class=3DMsoNormal style=3D'text-autospace:none'><span =
style=3D'font-size:10.0pt;font-family:"Courier =
New";color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
<o:p></o:p></span></p><p class=3DMsoNormal =
style=3D'text-autospace:none'><span =
style=3D'font-size:10.0pt;font-family:"Courier =
New";color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><b><span =
style=3D'font-size:10.0pt;font-family:"Courier =
New";color:#7F0055'>try</span></b><span =
style=3D'font-size:10.0pt;font-family:"Courier New";color:black'> =
{</span><span style=3D'font-size:10.0pt;font-family:"Courier =
New"'><o:p></o:p></span></p><p class=3DMsoNormal =
style=3D'text-autospace:none'><span =
style=3D'font-size:10.0pt;font-family:"Courier =
New";color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
Thread.<i>sleep</i>(500);</span><span =
style=3D'font-size:10.0pt;font-family:"Courier =
New"'><o:p></o:p></span></p><p class=3DMsoNormal =
style=3D'text-autospace:none'><span =
style=3D'font-size:10.0pt;font-family:"Courier =
New";color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } </span><b><span =
style=3D'font-size:10.0pt;font-family:"Courier =
New";color:#7F0055'>catch</span></b><span =
style=3D'font-size:10.0pt;font-family:"Courier New";color:black'> =
(Exception e) {</span><span =
style=3D'font-size:10.0pt;font-family:"Courier =
New"'><o:p></o:p></span></p><p class=3DMsoNormal =
style=3D'text-autospace:none'><span =
style=3D'font-size:10.0pt;font-family:"Courier =
New";color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span><span =
style=3D'font-size:10.0pt;font-family:"Courier =
New"'><o:p></o:p></span></p><p class=3DMsoNormal =
style=3D'text-autospace:none'><span =
style=3D'font-size:10.0pt;font-family:"Courier =
New";color:black'><o:p>&nbsp;</o:p></span></p><p class=3DMsoNormal =
style=3D'text-autospace:none'><span =
style=3D'font-size:10.0pt;font-family:"Courier =
New";color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
asyncContext.complete();</span><span =
style=3D'font-size:10.0pt;font-family:"Courier =
New"'><o:p></o:p></span></p><p class=3DMsoNormal><o:p>&nbsp;</o:p></p><p =
class=3DMsoNormal>The problem is that after running the second client =
all the requested waiting for timeout (from the first client) are stuck =
and not released (onTimeout method of AsyncEvent is not called) until =
the second client stops sending requests.<o:p></o:p></p><p =
class=3DMsoNormal>It looks like the problem occurs on Linux but not on =
Windows.<o:p></o:p></p><p class=3DMsoNormal><o:p>&nbsp;</o:p></p><p =
class=3DMsoNormal>Below is a simple test that may help to reproduce this =
issue. The following servlet accepts URL parameter =
&#8220;complete&#8221;.<o:p></o:p></p><p class=3DMsoNormal>When =
&#8220;complete=3D1&#8221; the request will be completed after =
500ms.<o:p></o:p></p><p class=3DMsoNormal>Otherwise the request will =
wait till timeout (20 seconds).<o:p></o:p></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><p class=3DMsoNormal>Run client =
that periodically sends requests to /servlet?complete=3D0. (I have =
tested it with 10 parallel threads that run in a loop)<o:p></o:p></p><p =
class=3DMsoNormal>Then run another client that periodically sends =
requests to /servlet?complete=3D1 (This client can use only a single =
thread)<o:p></o:p></p><p class=3DMsoNormal>See that the first client =
does not receive any responses while the second client is =
running.<o:p></o:p></p><p class=3DMsoNormal><span =
style=3D'color:#1F497D'><o:p>&nbsp;</o:p></span></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><p class=3DMsoNormal>public class =
WebTestServlet extends HttpServlet {<o:p></o:p></p><p =
class=3DMsoNormal>&nbsp;&nbsp;&nbsp; private static final Logger LOG =3D =
LoggerFactory.getLogger(WebTestServlet.class);<o:p></o:p></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><p =
class=3DMsoNormal>&nbsp;&nbsp;&nbsp; @Override<o:p></o:p></p><p =
class=3DMsoNormal>&nbsp;&nbsp;&nbsp; protected void service(final =
HttpServletRequest req, final HttpServletResponse resp) throws =
ServletException, IOException {<o:p></o:p></p><p =
class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
LOG.debug(&quot;Received request: {}&quot;, req);<o:p></o:p></p><p =
class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; final long =
startTime =3D System.currentTimeMillis();<o:p></o:p></p><p =
class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String =
isComplete =3D req.getParameter(&quot;complete&quot;);<o:p></o:p></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><p =
class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
AsyncContext asyncContext =3D req.startAsync(req, =
resp);<o:p></o:p></p><p =
class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
asyncContext.setTimeout(20000);<o:p></o:p></p><p =
class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
asyncContext.addListener(new AsyncListener() {<o:p></o:p></p><p =
class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp; public void onTimeout(AsyncEvent event) throws IOException =
{<o:p></o:p></p><p =
class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; long duration =3D =
System.currentTimeMillis() - startTime;<o:p></o:p></p><p =
class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LOG.debug(&quot;Async Timeout. =
Request: {}. Waiting time: {}&quot;, event.getSuppliedRequest(), =
duration);<o:p></o:p></p><p =
class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
event.getAsyncContext().complete();<o:p></o:p></p><p =
class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp; }<o:p></o:p></p><p class=3DMsoNormal><o:p>&nbsp;</o:p></p><p =
class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp; public void onStartAsync(AsyncEvent event) throws =
IOException {<o:p></o:p></p><p =
class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LOG.debug(&quot;Start async. =
Request: {}&quot;, event.getSuppliedRequest());<o:p></o:p></p><p =
class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp; }<o:p></o:p></p><p class=3DMsoNormal><o:p>&nbsp;</o:p></p><p =
class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp; public void onError(AsyncEvent event) throws IOException =
{<o:p></o:p></p><p =
class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LOG.debug(&quot;Error occured. =
Request: {}. Error: {}&quot;, event.getSuppliedRequest(), =
event.getThrowable());<o:p></o:p></p><p =
class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp; }<o:p></o:p></p><p class=3DMsoNormal><o:p>&nbsp;</o:p></p><p =
class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp; public void onComplete(AsyncEvent event) throws IOException =
{<o:p></o:p></p><p =
class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; long duration =3D =
System.currentTimeMillis() - startTime;<o:p></o:p></p><p =
class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LOG.debug(&quot;Async Complete. =
Request: {}. Request process time: {}&quot;, event.getSuppliedRequest(), =
duration);<o:p></o:p></p><p =
class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp; }<o:p></o:p></p><p =
class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }, req, =
resp);<o:p></o:p></p><p class=3DMsoNormal><o:p>&nbsp;</o:p></p><p =
class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if =
(&quot;1&quot;.equals(isComplete)) {<o:p></o:p></p><p =
class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp; try {<o:p></o:p></p><p =
class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Thread.sleep(500);<o:p></o:p></p><p =
class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp; } catch (Exception e) {<o:p></o:p></p><p =
class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp; }<o:p></o:p></p><p class=3DMsoNormal><o:p>&nbsp;</o:p></p><p =
class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp; asyncContext.complete();<o:p></o:p></p><p =
class=3DMsoNormal>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; =
}<o:p></o:p></p><p class=3DMsoNormal>&nbsp;&nbsp;&nbsp; =
}<o:p></o:p></p><p class=3DMsoNormal>}<o:p></o:p></p><p =
class=3DMsoNormal><span =
style=3D'color:#1F497D'><o:p>&nbsp;</o:p></span></p><p =
class=3DMsoNormal>Regards,<o:p></o:p></p><p =
class=3DMsoNormal>Slava<o:p></o:p></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p></div></body></html>
------=_NextPart_001_059D_01CD1668.F6317A60--

------=_NextPart_000_059C_01CD1668.F6317A60
Content-Type: application/pkcs7-signature; name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKzTCCAwMw
ggJsAhEAuS9gzIifoXpGCbhbcGyKrzANBgkqhkiG9w0BAQUFADCBwTELMAkGA1UEBhMCVVMxFzAV
BgNVBAoTDlZlcmlTaWduLCBJbmMuMTwwOgYDVQQLEzNDbGFzcyAyIFB1YmxpYyBQcmltYXJ5IENl
cnRpZmljYXRpb24gQXV0aG9yaXR5IC0gRzIxOjA4BgNVBAsTMShjKSAxOTk4IFZlcmlTaWduLCBJ
bmMuIC0gRm9yIGF1dGhvcml6ZWQgdXNlIG9ubHkxHzAdBgNVBAsTFlZlcmlTaWduIFRydXN0IE5l
dHdvcmswHhcNOTgwNTE4MDAwMDAwWhcNMjgwODAxMjM1OTU5WjCBwTELMAkGA1UEBhMCVVMxFzAV
BgNVBAoTDlZlcmlTaWduLCBJbmMuMTwwOgYDVQQLEzNDbGFzcyAyIFB1YmxpYyBQcmltYXJ5IENl
cnRpZmljYXRpb24gQXV0aG9yaXR5IC0gRzIxOjA4BgNVBAsTMShjKSAxOTk4IFZlcmlTaWduLCBJ
bmMuIC0gRm9yIGF1dGhvcml6ZWQgdXNlIG9ubHkxHzAdBgNVBAsTFlZlcmlTaWduIFRydXN0IE5l
dHdvcmswgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAKeIASF0LOcaA/CY4Zc8DyEI8Zzbl+ma
/MIEBhO+X1LIzB4sElYsuAFpLMyZH62wlq55BPITOcF7mLoILOjChBMsqmnpCfTHqQKkQsIjT0rY
8A6i+zFsyeZvmScH9eb0THiebetGhvq5hslU8rLEr9RGHFrJFTD/DWz1LQ5tzn93AgMBAAEwDQYJ
KoZIhvcNAQEFBQADgYEAci75f9HxcfvEnvbFXlGKQJi4aPibHIPY4p29/+2h5mbqLwn0ytfqpSuV
9iRghk1ELoOlxC2g0654aW9y2myuCPBjkjfmu8QwF613zEk1qs/Yj9G+txiWR3NqVCI0ZC22FptZ
W7RRWTqzCxT0Et9noPStMmResUZyJ4wSe8VEtK4wggOiMIIDC6ADAgECAhA7h9gNabNnBYcvrtBp
U4c0MA0GCSqGSIb3DQEBBQUAMIHBMQswCQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIElu
Yy4xPDA6BgNVBAsTM0NsYXNzIDIgUHVibGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3Jp
dHkgLSBHMjE6MDgGA1UECxMxKGMpIDE5OTggVmVyaVNpZ24sIEluYy4gLSBGb3IgYXV0aG9yaXpl
ZCB1c2Ugb25seTEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazAeFw0wMDA4MjAwMDAw
MDBaFw0xMzA4MTkyMzU5NTlaMIGrMRQwEgYDVQQKEwtBZGFjb20gUy5BLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazE5MDcGA1UECxMwVGVybXMgb2YgdXNlIGF0IGh0dHBzOi8vc2Vj
LmFkYWNvbS5jb20vcnBhIChjKTAwMTcwNQYDVQQDEy5BZGFjb20gQ2xhc3MgMiBPblNpdGUgSW5k
aXZpZHVhbCBTdWJzY3JpYmVyIENBMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDNNBG4BUKG
HfD9XjgTIsscGWYKFkKbSi4gM3d0Cik1SG2DoxO88uzepMutsehB1t3vH5y89WkfrcgyEgvOV8KR
WZ7priOmkyUAB4UJo7SGui20pi3bf0YtbXIfir4b6g5s3GleHss6IMOfv+D2O7R/Ny/CYd4m8jOm
n19k4t2cXQIDAQABo4GuMIGrMBEGCWCGSAGG+EIBAQQEAwIBBjAPBgNVHRMECDAGAQH/AgEAMAsG
A1UdDwQEAwIBBjBCBgNVHSAEOzA5MDcGC2CGSAGG+EUBBxcCMCgwJgYIKwYBBQUHAgEWGmh0dHBz
Oi8vc2VjLmFkYWNvbS5jb20vcnBhMDQGA1UdHwQtMCswKaAnoCWGI2h0dHA6Ly9jcmwudmVyaXNp
Z24uY29tL3BjYTItZzIuY3JsMA0GCSqGSIb3DQEBBQUAA4GBAJhqcoc51gvRVZzHlh8r/zXMXv9t
VfugLWVutrKEQT2ivPMD95C1L17cDEOVRQ+X9eflsdEPjzoJ8iBsZ6WmgQT5zxiE175WX5EoyDQR
t1/ZBKuLL/mTBQQn5mm0FwJy2JXfksxsBEkQUBIOsSr1xG76cygG6P1ur6GGUzqtXLsPMIIEHDCC
A4WgAwIBAgIQIUxQsxsBBRh0dh/L3LmudDANBgkqhkiG9w0BAQUFADCBqzEUMBIGA1UEChMLQWRh
Y29tIFMuQS4xHzAdBgNVBAsTFlZlcmlTaWduIFRydXN0IE5ldHdvcmsxOTA3BgNVBAsTMFRlcm1z
IG9mIHVzZSBhdCBodHRwczovL3NlYy5hZGFjb20uY29tL3JwYSAoYykwMDE3MDUGA1UEAxMuQWRh
Y29tIENsYXNzIDIgT25TaXRlIEluZGl2aWR1YWwgU3Vic2NyaWJlciBDQTAeFw0xMTEyMDgwMDAw
MDBaFw0xMjEyMDcyMzU5NTlaMIGxMSIwIAYDVQQKDBlQbGF5dGVjaCBTb2Z0d2FyZSBMaW1pdGVk
MQswCQYDVQQLDAJJVDExMC8GA1UECwwoVGVybXMgb2YgdXNlIGF0IHNlYy5hZGFjb20uY29tL3Jw
YSAoYykwODEbMBkGA1UEAwwSVnlhY2hlc2xhdiBUcmFpbmluMS4wLAYJKoZIhvcNAQkBFh92eWFj
aGVzbGF2LnRyYWluaW5AcGxheXRlY2guY29tMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKC
AQEA3B+jRnAJee3enFZEMJ0U+aqNWRCl/e7Dv0CnSNUysgydT9MjLilhSKvJlD/tHukuT8fLJdNk
qxx8CVILRWUUrATIB+VfcCoHMq+/kr4tja6KvqgAquaDwHaKwhFvWNyJQsX4LuQTH0yHtQMQfgEk
bqQZ4HzkUPL5UbuFzf5q80fynGd8Nu8TIonteVFv3PUjCpY5IUM5l8RP7I3EaehGX6tkPYeFAvOx
kmP3GYJtg9ngHxQTJBzxBfzBylodW8jdbix16KIYZTGXottGGZiS98re1WooRa7UlxZQWFbz3EWx
SMaE3uy9QUpB1jw5hnnDkOrDpGYKaT87cup0ljCLbQIDAQABo4G0MIGxMAkGA1UdEwQCMAAwQQYD
VR0gBDowODA2BgpghkgBhvhFAQcaMCgwJgYIKwYBBQUHAgEWGmh0dHBzOi8vc2VjLmFkYWNvbS5j
b20vcnBhMAsGA1UdDwQEAwIFoDARBglghkgBhvhCAQEEBAMCB4AwQQYDVR0fBDowODA2oDSgMoYw
aHR0cDovL2NybC5hZGFjb20uY29tL09uU2l0ZVB1YmxpYy9MYXRlc3RDUkwuY3JsMA0GCSqGSIb3
DQEBBQUAA4GBAIdCyGwDWzQFgqTjGQNcjMcAqCGrG8fOYXhUHXmdufyo7e/ce5D2Uh4mLK+AE6PD
jQhZlKh8EMBgg4cEGHTgrsbGVAqee0oXzh0BoY+WDTMc3GoUdVA46TyouptVAHpX522TSebu89ee
UCGkupMHk2Xb9+SQtZG5/+NHh8QcTMIgMYIErTCCBKkCAQEwgcAwgasxFDASBgNVBAoTC0FkYWNv
bSBTLkEuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3JrMTkwNwYDVQQLEzBUZXJtcyBv
ZiB1c2UgYXQgaHR0cHM6Ly9zZWMuYWRhY29tLmNvbS9ycGEgKGMpMDAxNzA1BgNVBAMTLkFkYWNv
bSBDbGFzcyAyIE9uU2l0ZSBJbmRpdmlkdWFsIFN1YnNjcmliZXIgQ0ECECFMULMbAQUYdHYfy9y5
rnQwCQYFKw4DAhoFAKCCAsEwGAYJKoZIhvcNAQkDMQsGCSqGSIb3DQEHATAcBgkqhkiG9w0BCQUx
DxcNMTIwNDA5MTI1MzUyWjAjBgkqhkiG9w0BCQQxFgQU4h1QC5tFGULQg2obYgSZC9eIDeowgbcG
CSqGSIb3DQEJDzGBqTCBpjALBglghkgBZQMEASowCwYJYIZIAWUDBAEWMAoGCCqGSIb3DQMHMAsG
CWCGSAFlAwQBAjAOBggqhkiG9w0DAgICAIAwBwYFKw4DAgcwDQYIKoZIhvcNAwICAUAwDQYIKoZI
hvcNAwICASgwBwYFKw4DAhowCwYJYIZIAWUDBAIDMAsGCWCGSAFlAwQCAjALBglghkgBZQMEAgEw
CgYIKoZIhvcNAgUwgdEGCSsGAQQBgjcQBDGBwzCBwDCBqzEUMBIGA1UEChMLQWRhY29tIFMuQS4x
HzAdBgNVBAsTFlZlcmlTaWduIFRydXN0IE5ldHdvcmsxOTA3BgNVBAsTMFRlcm1zIG9mIHVzZSBh
dCBodHRwczovL3NlYy5hZGFjb20uY29tL3JwYSAoYykwMDE3MDUGA1UEAxMuQWRhY29tIENsYXNz
IDIgT25TaXRlIEluZGl2aWR1YWwgU3Vic2NyaWJlciBDQQIQIUxQsxsBBRh0dh/L3LmudDCB0wYL
KoZIhvcNAQkQAgsxgcOggcAwgasxFDASBgNVBAoTC0FkYWNvbSBTLkEuMR8wHQYDVQQLExZWZXJp
U2lnbiBUcnVzdCBOZXR3b3JrMTkwNwYDVQQLEzBUZXJtcyBvZiB1c2UgYXQgaHR0cHM6Ly9zZWMu
YWRhY29tLmNvbS9ycGEgKGMpMDAxNzA1BgNVBAMTLkFkYWNvbSBDbGFzcyAyIE9uU2l0ZSBJbmRp
dmlkdWFsIFN1YnNjcmliZXIgQ0ECECFMULMbAQUYdHYfy9y5rnQwDQYJKoZIhvcNAQEBBQAEggEA
HrqYf1NpNSdPJa3Rmk4usdRk+r30cggzApenNFbzs3+/0Yh+uGa2k43Csi4+qsDovN7vgxTuBCBb
NSQ06VfyI1bFCIwINaBrPgp3kL3G31fdRIVxDMhpuMYwrp8gWDTgynaXlR7ibJCkvRhdAde4K043
OBhzOpiodY3NBbVZIuw6sjP0dEsaRCdJtjeBYvyJTKtfbMlkAshNHCc0JUuP85tfNfHFdvUBDvwU
IQi5osNa9EfWjfAXthXbnnXe/RNqDAbdcwrkcn/5vUauEv8m15bwnMUIyqEGy3ZDsA2IwOdkHWdl
mJjv3t7u2EYy7yuaz7XT/vpFszOPv693jhvaLwAAAAAAAA==

------=_NextPart_000_059C_01CD1668.F6317A60--

From users-return-233445-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  9 15:28:02 2012
Return-Path: <users-return-233445-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B08C19E84
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  9 Apr 2012 15:28:02 +0000 (UTC)
Received: (qmail 82863 invoked by uid 500); 9 Apr 2012 15:27:58 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 82807 invoked by uid 500); 9 Apr 2012 15:27:58 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 82798 invoked by uid 99); 9 Apr 2012 15:27:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2012 15:27:58 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [76.96.62.32] (HELO qmta03.westchester.pa.mail.comcast.net) (76.96.62.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2012 15:27:51 +0000
Received: from omta23.westchester.pa.mail.comcast.net ([76.96.62.74])
	by qmta03.westchester.pa.mail.comcast.net with comcast
	id vml51i0011c6gX853rTXBR; Mon, 09 Apr 2012 15:27:31 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta23.westchester.pa.mail.comcast.net with comcast
	id vrTW1i01L38FjT13jrTWV9; Mon, 09 Apr 2012 15:27:31 +0000
Message-ID: <4F82FFEC.7030608@christopherschultz.net>
Date: Mon, 09 Apr 2012 11:27:40 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Tomcat6 - Context - aliases
References: <1333363527730-4678513.post@n6.nabble.com> <4F7A11D7.80205@christopherschultz.net> <1333444940374-4681421.post@n6.nabble.com> <4F7AE221.10605@ice-sa.com> <1333549942374-4686704.post@n6.nabble.com> <1333564099167-4687332.post@n6.nabble.com> <4F7DA677.3060205@christopherschultz.net> <1333705857484-4692232.post@n6.nabble.com> <4F7EF29D.7090004@ice-sa.com> <4F809AD9.90407@ice-sa.com> <1333966346271-4715558.post@n6.nabble.com>
In-Reply-To: <1333966346271-4715558.post@n6.nabble.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

La,

On 4/9/12 6:12 AM, La Massiot wrote:
> 1) We don't agree with each other. I *DO* care about what URLs look
> like: a) in general, b) for some reasons related to the user's
> speaking language, c) for search engines, d) ... The URL of a link
> can be seen in many circumstances and is used in various ways both
> by humans and bots.
> 
> 2) I want the resources (files and other things like databases) to
> be stored outside the servlets container and more precisely on
> another partition, especially if data get erased when the context
> which contains them is undeployed!

If you want to control the URL and the location of your files, why
don't you just write a simple file-fetching servlet? They are
dead-simple to write: then you have complete control over both URL and
location of files, and you don't have to worry about your uploaded
files being deleted because you can store them completely
independently of your webapp's deployment directory(ies).

Also, it will work across all versions of all servlet containers, and
you don't have to rely on some vendor-specific configuration.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+C/+wACgkQ9CaO5/Lv0PCkbgCfX0J8o/F6Dfx30QWeNwWR++jO
KC0AoLL6v3w04tmsag+ahHcib6b83Lc4
=bWUL
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233446-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  9 17:38:00 2012
Return-Path: <users-return-233446-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 74D2D9B96
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  9 Apr 2012 17:38:00 +0000 (UTC)
Received: (qmail 91880 invoked by uid 500); 9 Apr 2012 17:37:57 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 91683 invoked by uid 500); 9 Apr 2012 17:37:57 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 91673 invoked by uid 99); 9 Apr 2012 17:37:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2012 17:37:56 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pid@pidster.com designates 209.85.212.169 as permitted sender)
Received: from [209.85.212.169] (HELO mail-wi0-f169.google.com) (209.85.212.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2012 17:37:50 +0000
Received: by wibhm17 with SMTP id hm17so2198995wib.0
        for <users@tomcat.apache.org>; Mon, 09 Apr 2012 10:37:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type;
        bh=l8xQMXntBUomxEKBE4tpj3e6iKG4SvD/obGk1Iu9eLo=;
        b=WV9rIMRhac3L+xoXdvrK23n9B/i9OE3zU+tqnbahJdoy9uDLCUY/T7EdkxeKGQ4vUI
         aHlMCocuU/+NmZ1Ijr1+VAp7GwnxZqT6S0pxiWZELzKrDqzPRREKhrX6PDY6uHirK8C1
         CN2S2j4VQFg1ERgXKPxdO/+bqadj8z0GAhG84=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type:x-gm-message-state;
        bh=l8xQMXntBUomxEKBE4tpj3e6iKG4SvD/obGk1Iu9eLo=;
        b=nwoWJ6zXyXfFv3pEk2mOgVTlOvMcY89s0r2mccddO7c6XV9psBENphVwRHpb/EYy8d
         KAyUmr/T6BzE5Dz0g8GxjY6MBt79RrnaZ+Lx05V8QshPlogrofQRLzhJnjGY4e+06g6Y
         6Hzsid2r3beO2Be/5Ioo+263f2GlZNEZpahIy+V1vMgT8xE80/mWx6PtV6MdyZOros6D
         TJagBWZm+eP4phpRGtF7UG0EJxYfj2NBf1BzPxQCwsUoxKmHnwkb+8ZVpPuedtSe2qvA
         +KDnsfNyGCep4orym0Zs2ur3QP49QBCz2/m/Edby1VKVU9f0XLGjuCVZ8qKxbV2wXI2f
         B9Vw==
Received: by 10.216.131.2 with SMTP id l2mr4512841wei.3.1333993047731;
        Mon, 09 Apr 2012 10:37:27 -0700 (PDT)
Received: from Asura.local (cpc10-lewi14-2-0-cust355.2-4.cable.virginmedia.com. [82.4.249.100])
        by mx.google.com with ESMTPS id j3sm51386964wiw.1.2012.04.09.10.37.25
        (version=SSLv3 cipher=OTHER);
        Mon, 09 Apr 2012 10:37:26 -0700 (PDT)
Message-ID: <4F831E50.1060106@pidster.com>
Date: Mon, 09 Apr 2012 18:37:20 +0100
From: Pid <pid@pidster.com>
Organization: Pidster Inc
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: tomcat asynchronous invocation problem
References: <DCAEB2F31E665B4081B49A6DE402946130F7022A25@il-exch1>
In-Reply-To: <DCAEB2F31E665B4081B49A6DE402946130F7022A25@il-exch1>
X-Enigmail-Version: 1.4
OpenPGP: id=62590808
Content-Type: multipart/signed; micalg=pgp-sha512;
 protocol="application/pgp-signature";
 boundary="------------enigD79BD375D8E1771AE350DCD1"
X-Gm-Message-State: ALoCoQlto+vRKsyT5/qFkOqKfH/CZ50+JH928YQDFPcokE1D2+nC3+B9zhOTArY62LXCCilIpkIx
X-Virus-Checked: Checked by ClamAV on apache.org

--------------enigD79BD375D8E1771AE350DCD1
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable

On 09/04/2012 13:53, Vyacheslav Trainin wrote:
> Hi,
>=20
> =20
>=20
> We encountered a problem during asynchronous operations (tomcat 7 with
> servlet 3).

Exactly which version of Tomcat 7.0?
Same for Java version?
Same for OS version(s)?


p


> _Description:  _
>=20
> One client continuously sends post requests to the server. On the serve=
r
> side for each request created AsyncContext with timeout 20 seconds:
>=20
> AsyncContextasyncContext =3D req.startAsync(req, resp);
>=20
>       asyncContext.setTimeout(20000);
>=20
> As expected after approximately 20 sec the requests are completed. Then=

> another client also begins to send requests to the server but in this
> case they are explicitly completed after 500 milliseconds. Something
> like this:
>=20
> AsyncContextasyncContext =3D req.startAsync(req, resp);
>=20
>       asyncContext.setTimeout(20000);
>=20
>     =20
>=20
>       *try*{
>=20
>          Thread./sleep/(500);
>=20
>       } *catch*(Exception e) {
>=20
>       }
>=20
> =20
>=20
>       asyncContext.complete();
>=20
> =20
>=20
> The problem is that after running the second client all the requested
> waiting for timeout (from the first client) are stuck and not released
> (onTimeout method of AsyncEvent is not called) until the second client
> stops sending requests.
>=20
> It looks like the problem occurs on Linux but not on Windows.
>=20
> =20
>=20
> Below is a simple test that may help to reproduce this issue. The
> following servlet accepts URL parameter =93complete=94.
>=20
> When =93complete=3D1=94 the request will be completed after 500ms.
>=20
> Otherwise the request will wait till timeout (20 seconds).
>=20
> =20
>=20
> Run client that periodically sends requests to /servlet?complete=3D0. (=
I
> have tested it with 10 parallel threads that run in a loop)
>=20
> Then run another client that periodically sends requests to
> /servlet?complete=3D1 (This client can use only a single thread)
>=20
> See that the first client does not receive any responses while the
> second client is running.
>=20
> =20
>=20
> =20
>=20
> public class WebTestServlet extends HttpServlet {
>=20
>     private static final Logger LOG =3D
> LoggerFactory.getLogger(WebTestServlet.class);
>=20
> =20
>=20
>     @Override
>=20
>     protected void service(final HttpServletRequest req, final
> HttpServletResponse resp) throws ServletException, IOException {
>=20
>         LOG.debug("Received request: {}", req);
>=20
>         final long startTime =3D System.currentTimeMillis();
>=20
>         String isComplete =3D req.getParameter("complete");
>=20
> =20
>=20
>         AsyncContext asyncContext =3D req.startAsync(req, resp);
>=20
>         asyncContext.setTimeout(20000);
>=20
>         asyncContext.addListener(new AsyncListener() {
>=20
>             public void onTimeout(AsyncEvent event) throws IOException =
{
>=20
>                 long duration =3D System.currentTimeMillis() - startTim=
e;
>=20
>                 LOG.debug("Async Timeout. Request: {}. Waiting time:
> {}", event.getSuppliedRequest(), duration);
>=20
>                 event.getAsyncContext().complete();
>=20
>             }
>=20
> =20
>=20
>             public void onStartAsync(AsyncEvent event) throws IOExcepti=
on {
>=20
>                 LOG.debug("Start async. Request: {}",
> event.getSuppliedRequest());
>=20
>             }
>=20
> =20
>=20
>             public void onError(AsyncEvent event) throws IOException {
>=20
>                 LOG.debug("Error occured. Request: {}. Error: {}",
> event.getSuppliedRequest(), event.getThrowable());
>=20
>             }
>=20
> =20
>=20
>             public void onComplete(AsyncEvent event) throws IOException=
 {
>=20
>                 long duration =3D System.currentTimeMillis() - startTim=
e;
>=20
>                 LOG.debug("Async Complete. Request: {}. Request process=

> time: {}", event.getSuppliedRequest(), duration);
>=20
>             }
>=20
>         }, req, resp);
>=20
> =20
>=20
>         if ("1".equals(isComplete)) {
>=20
>             try {
>=20
>                 Thread.sleep(500);
>=20
>             } catch (Exception e) {
>=20
>             }
>=20
> =20
>=20
>             asyncContext.complete();
>=20
>         }
>=20
>     }
>=20
> }
>=20
> =20
>=20
> Regards,
>=20
> Slava
>=20
> =20
>=20
> =20
>=20


--=20

[key:62590808]


--------------enigD79BD375D8E1771AE350DCD1
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.18 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iQIcBAEBCgAGBQJPgx5ZAAoJEGoM2OGpOvr9D2AP/2G1YS199PT3ETRUsVaJ1ChQ
qN/n3/funB5e12VnypggG9/ASjd3wPMEC3zSdVpBVulSKwodzZqd0kPH/Zna+Tzs
M+wbAGlNJJ0Oq/opf0muWm37Uy8Ukd+ApdTymKKcgL3YID9LgEF2z+M20RG7+hjb
qJCZ0bR5ORHf2jiRCGXFdZT/M+vclsRe/1eab3+Y3o4EoBB4Tkcep9nxuUnMKPmY
+Kv9Z5TJZBOzPC2mXXjj+LQxJOQp3xRhs7TfsU4cM/HAL3bhXGfHjQOepH6j4Ner
OVCgLIUMG4QA2srkFbC5J1XboVrJej3W9yGXNy3n6F++r/4SfgtoRLM+3jlY2x5e
7C5HZ77+JVf40xafiCrf5TXGMuSMU/+GeBZQ3eH9Sip26cqpumFgEnuJtUMZJmkc
J/mscunGZm6yOmHbAfx6F6fxQOX40Op7JQk9x42MPpBz6Kn5iGnAnr5qiIxMyMbj
xfJw1OET84UZPhb1vrYC1g1QN1UKJ1h5cPE5jC3tjqYx6HWkFfjIUlPir2utiM96
LqrmmtX/Slx9Ich7l//l8B7HjGuZFjbD35oV1RZN79v3tvl83DuzSgard+9OkFoq
DHnsnKr+EGTn4EC8Y67UMB/AAyKQSnlHsHfYWEoewcAtyTo0jPWgehm23+dYDD30
peAj4O5dy0uPE234h8DD
=nJU3
-----END PGP SIGNATURE-----

--------------enigD79BD375D8E1771AE350DCD1--

From users-return-233447-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr  9 22:06:15 2012
Return-Path: <users-return-233447-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6B48E981D
	for <apmail-tomcat-users-archive@www.apache.org>; Mon,  9 Apr 2012 22:06:15 +0000 (UTC)
Received: (qmail 17120 invoked by uid 500); 9 Apr 2012 22:06:11 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 17062 invoked by uid 500); 9 Apr 2012 22:06:11 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 17053 invoked by uid 99); 9 Apr 2012 22:06:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2012 22:06:11 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aw@ice-sa.com designates 212.85.38.228 as permitted sender)
Received: from [212.85.38.228] (HELO tor.combios.es) (212.85.38.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 Apr 2012 22:06:02 +0000
Received: from [192.168.245.129] (p549E0D8C.dip0.t-ipconnect.de [84.158.13.140])
	by tor.combios.es (Postfix) with ESMTPA id CA3EDDA0056
	for <users@tomcat.apache.org>; Tue, 10 Apr 2012 00:05:38 +0200 (CEST)
Message-ID: <4F835D2A.8010406@ice-sa.com>
Date: Tue, 10 Apr 2012 00:05:30 +0200
From: =?UTF-8?B?QW5kcsOpIFdhcm5pZXI=?= <aw@ice-sa.com>
Reply-To: Tomcat Users List <users@tomcat.apache.org>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Tomcat6 - Context - aliases
References: <1333363527730-4678513.post@n6.nabble.com> <4F7A11D7.80205@christopherschultz.net> <1333444940374-4681421.post@n6.nabble.com> <4F7AE221.10605@ice-sa.com> <1333549942374-4686704.post@n6.nabble.com> <1333564099167-4687332.post@n6.nabble.com> <4F7DA677.3060205@christopherschultz.net> <1333705857484-4692232.post@n6.nabble.com> <4F7EF29D.7090004@ice-sa.com> <4F809AD9.90407@ice-sa.com> <1333966346271-4715558.post@n6.nabble.com>
In-Reply-To: <1333966346271-4715558.post@n6.nabble.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit

La Massiot wrote:
> @Andr Warnier: Thank you for your detailed answer.
> 
> As of your objections:
> 
> 1) We don't agree with each other. I *DO* care about what URLs look like: 
> a) in general, b) for some reasons related to the user's speaking language,
> c) for search engines, d) ... 

One cannot argue with convictions.

> The URL of a link can be seen in many circumstances and is used in various
> ways both by humans and bots.

I would point out nevertheless that, in the case of an application such as the one you 
describe, you probably do /not/ want bots to be able to point directly to the documents 
uploaded by users.  In particular since you seem to want the documents to be acessed via a 
link which contains the original name of the file uploaded by the user.  One may easily 
consider this as at least a lack of privacy.

> 
> 2) I want the resources (files and other things like databases) to be stored
> outside the servlets container and more precisely on another partition,
> especially if data get erased when the context which contains them is
> undeployed!

That is a good idea in general.  One of the reasons is, that there is no guarantee that 
the location where the application is stored, is even writeable (apart from initially 
putting the application there of course); another being that you may not have room enough 
there for the uploaded files.

> 
> 
> Andr Warnier wrote
>>  Do you know that when a Context is undeployed by Tomcat, all its files
>> are deleted ?
> This is certainly not what I want. I would expect Tomcat to provide a
> mechanism for it not to happen. (See my questions at the end of this post).
> 
See http://tomcat.apache.org/tomcat-7.0-doc/config/host.html#Automatic_Application_Deployment
(but remember, this is Tomcat-centric; other servlet containers may have other rules, as 
long as they match the Servlet Specification).

> 
> Andr Warnier wrote
>> with your method consisting of creating a new context on-the-fly
> Am I? I put "an_alias_1.xml" in "/etc/tomcat6/Catalina/localhost/" once and
> only once (never touch it again afterwards).
> 
That was not totally clear.  What is also not clear, is how and when you do that.
Any way, when you create such a Context file, in effect you are creating a new web 
application.  To have the container protect this application in any way (iow controlling 
access to the user fils stored there), you would need to also have, in the application's 
"docBase", a WEB-INF subdirectory containing a web.xml file which describes the security 
constraints of that application.

> 
> Andr Warnier wrote
>> But this is a logical consequence of building a context "from scratch",
>> outside of you "/w" context, and having Tomcat serve it, without any kind
>> of security protecting that location.
See above.  That is what I meant.

> It's not exactly my full responsibility. I'm looking for a solution,
> remember. I'm not especially keen on that solution.
> 
I thought that you were the one developing that application ?

See Christopher's answer.

> 
> Andr Warnier wrote
>> An "undeploy" of a Context does not generally happen by itself
> What is the probability of such an event occurring? If it's like a "rm -R"
> on the directory, I'll forget about it.
> 
> So, given your thoughtful observations, here are my questions:
> 1) Can you tell me how to test a context undeployment in command line (not
> via Tomcat Manager please)?

Yes, using the Tomcat Manager is the easiest way.
One can also invoke the function of the Tomcat Manager, via command-line tools (wget, 
curl, etc..).
And as indicated in the page mentioned above, it can also happen when modifying your 
Context file, modifying a directory etc..

My point is : accidents happen. But one doesn't have to make it easy for them to happen. 
You will have a directory where users upload their own files, perhaps many of them, and 
perhaps files that they would very much like not to loose.  Putting these files at risk to 
be deleted, due to a misconfiguration or by an operator action which is not necessarily as 
evident as "rm -R" does not seem like a good idea.

Nobody can decide for you what your real priorities are, between having "nice" URL's, and 
creating a system that is safe, controlled, and easy to manage.
You have not explained how users upload their files.  Presumably, it is via a POST, to a 
servlet you have created.  That servlet knows where to store the files that are uploaded, 
via some parameter which it reads somewhere.
Christoper's (and my own) suggestion is to create a similar servlet that serves to 
download the files, and which would use the same parameter to know where to download them 
from.
(And, this parameter could be stored in either the web.xml of the application, or in a 
properties file, as explained by the article to which I pointed you earlier.)
Tomcat itself would not know where the files are stored, so it could not "undeploy" them.
Access control to the download (just as for the upload) would be done by the container 
protection of this application.
And the application itself could impose further constraints to who can upload or download 
files.
And since you control the application, and through which URL it is to be accessed, you are 
still free to make the URLs as nice as possible.

> 2) Is there any way, I can prevent a context to be undeployed ever (like
> setting a specific option in a configuration file, in "an_alias_1.xml" for
> example)?
Look in the doc for "autodeploy" and "deployIgnore".  But again, I believe that this is 
Tomcat-specific (and even maybe version-specific).

> 3) Is there any good example illustrating how to do a cross context
> authentication you can point me to?
>
Look here : http://tomcat.apache.org/tomcat-7.0-doc/config/host.html#Single_Sign_On


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233448-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 10 06:42:54 2012
Return-Path: <users-return-233448-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7664C98F8
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 10 Apr 2012 06:42:54 +0000 (UTC)
Received: (qmail 6702 invoked by uid 500); 10 Apr 2012 06:42:50 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 6342 invoked by uid 500); 10 Apr 2012 06:42:44 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 6299 invoked by uid 99); 10 Apr 2012 06:42:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 06:42:43 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [195.50.194.148] (HELO mx6.playtech.com) (195.50.194.148)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 06:42:33 +0000
Received: from EE-EXCH2.EE.playtech.corp (194.126.102.178) by mx6.playtech.com
 (195.50.194.148) with Microsoft SMTP Server (TLS) id 14.1.270.1; Tue, 10 Apr
 2012 09:41:14 +0300
Received: from il-exch1.IL.playtech.corp (192.168.7.34) by
 ee-exch2.ee.playtech.corp (192.168.3.16) with Microsoft SMTP Server (TLS) id
 14.2.247.3; Tue, 10 Apr 2012 09:42:06 +0300
Received: from il-exch1.IL.playtech.corp ([192.168.7.34]) by il-exch1
 ([192.168.7.34]) with mapi; Tue, 10 Apr 2012 09:42:05 +0300
From: Vyacheslav Trainin <Vyacheslav.Trainin@playtech.com>
To: "'users@tomcat.apache.org'" <users@tomcat.apache.org>
Date: Tue, 10 Apr 2012 09:42:04 +0300
Subject: RE: tomcat asynchronous invocation problem
Thread-Topic: tomcat asynchronous invocation problem
Thread-Index: Ac0Wd4dVaM2v2j7zR6KMUqxA1zveVgAZ+//w
Message-ID: <DCAEB2F31E665B4081B49A6DE402946130F7022A5A@il-exch1>
References: <DCAEB2F31E665B4081B49A6DE402946130F7022A25@il-exch1>
 <4F831E50.1060106@pidster.com>
In-Reply-To: <4F831E50.1060106@pidster.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: yes
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/signed; protocol="application/x-pkcs7-signature";
	micalg=SHA1; boundary="----=_NextPart_000_05E9_01CD16FE.2FB41E10"
MIME-Version: 1.0

------=_NextPart_000_05E9_01CD16FE.2FB41E10
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

I reproduced it on:
	- tomcat-7.0.23 and 7.0.25
	- java 64 bit 1.6.0_18 and  1.6.0_29
	- Linux CentOS release 5.6 (Final) 64 bit



-----Original Message-----
From: Pid [mailto:pid@pidster.com] 
Sent: Monday, April 09, 2012 8:37 PM
To: Tomcat Users List
Subject: Re: tomcat asynchronous invocation problem

On 09/04/2012 13:53, Vyacheslav Trainin wrote:
> Hi,
> 
>  
> 
> We encountered a problem during asynchronous operations (tomcat 7 with 
> servlet 3).

Exactly which version of Tomcat 7.0?
Same for Java version?
Same for OS version(s)?


p


> _Description:  _
> 
> One client continuously sends post requests to the server. On the 
> server side for each request created AsyncContext with timeout 20 seconds:
> 
> AsyncContextasyncContext = req.startAsync(req, resp);
> 
>       asyncContext.setTimeout(20000);
> 
> As expected after approximately 20 sec the requests are completed. 
> Then another client also begins to send requests to the server but in 
> this case they are explicitly completed after 500 milliseconds. 
> Something like this:
> 
> AsyncContextasyncContext = req.startAsync(req, resp);
> 
>       asyncContext.setTimeout(20000);
> 
>      
> 
>       *try*{
> 
>          Thread./sleep/(500);
> 
>       } *catch*(Exception e) {
> 
>       }
> 
>  
> 
>       asyncContext.complete();
> 
>  
> 
> The problem is that after running the second client all the requested 
> waiting for timeout (from the first client) are stuck and not released 
> (onTimeout method of AsyncEvent is not called) until the second client 
> stops sending requests.
> 
> It looks like the problem occurs on Linux but not on Windows.
> 
>  
> 
> Below is a simple test that may help to reproduce this issue. The 
> following servlet accepts URL parameter "complete".
> 
> When "complete=1" the request will be completed after 500ms.
> 
> Otherwise the request will wait till timeout (20 seconds).
> 
>  
> 
> Run client that periodically sends requests to /servlet?complete=0. (I 
> have tested it with 10 parallel threads that run in a loop)
> 
> Then run another client that periodically sends requests to
> /servlet?complete=1 (This client can use only a single thread)
> 
> See that the first client does not receive any responses while the 
> second client is running.
> 
>  
> 
>  
> 
> public class WebTestServlet extends HttpServlet {
> 
>     private static final Logger LOG =
> LoggerFactory.getLogger(WebTestServlet.class);
> 
>  
> 
>     @Override
> 
>     protected void service(final HttpServletRequest req, final 
> HttpServletResponse resp) throws ServletException, IOException {
> 
>         LOG.debug("Received request: {}", req);
> 
>         final long startTime = System.currentTimeMillis();
> 
>         String isComplete = req.getParameter("complete");
> 
>  
> 
>         AsyncContext asyncContext = req.startAsync(req, resp);
> 
>         asyncContext.setTimeout(20000);
> 
>         asyncContext.addListener(new AsyncListener() {
> 
>             public void onTimeout(AsyncEvent event) throws IOException 
> {
> 
>                 long duration = System.currentTimeMillis() - 
> startTime;
> 
>                 LOG.debug("Async Timeout. Request: {}. Waiting time:
> {}", event.getSuppliedRequest(), duration);
> 
>                 event.getAsyncContext().complete();
> 
>             }
> 
>  
> 
>             public void onStartAsync(AsyncEvent event) throws 
> IOException {
> 
>                 LOG.debug("Start async. Request: {}", 
> event.getSuppliedRequest());
> 
>             }
> 
>  
> 
>             public void onError(AsyncEvent event) throws IOException {
> 
>                 LOG.debug("Error occured. Request: {}. Error: {}", 
> event.getSuppliedRequest(), event.getThrowable());
> 
>             }
> 
>  
> 
>             public void onComplete(AsyncEvent event) throws 
> IOException {
> 
>                 long duration = System.currentTimeMillis() - 
> startTime;
> 
>                 LOG.debug("Async Complete. Request: {}. Request 
> process
> time: {}", event.getSuppliedRequest(), duration);
> 
>             }
> 
>         }, req, resp);
> 
>  
> 
>         if ("1".equals(isComplete)) {
> 
>             try {
> 
>                 Thread.sleep(500);
> 
>             } catch (Exception e) {
> 
>             }
> 
>  
> 
>             asyncContext.complete();
> 
>         }
> 
>     }
> 
> }
> 
>  
> 
> Regards,
> 
> Slava
> 
>  
> 
>  
> 


-- 

[key:62590808]


------=_NextPart_000_05E9_01CD16FE.2FB41E10
Content-Type: application/pkcs7-signature; name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKzTCCAwMw
ggJsAhEAuS9gzIifoXpGCbhbcGyKrzANBgkqhkiG9w0BAQUFADCBwTELMAkGA1UEBhMCVVMxFzAV
BgNVBAoTDlZlcmlTaWduLCBJbmMuMTwwOgYDVQQLEzNDbGFzcyAyIFB1YmxpYyBQcmltYXJ5IENl
cnRpZmljYXRpb24gQXV0aG9yaXR5IC0gRzIxOjA4BgNVBAsTMShjKSAxOTk4IFZlcmlTaWduLCBJ
bmMuIC0gRm9yIGF1dGhvcml6ZWQgdXNlIG9ubHkxHzAdBgNVBAsTFlZlcmlTaWduIFRydXN0IE5l
dHdvcmswHhcNOTgwNTE4MDAwMDAwWhcNMjgwODAxMjM1OTU5WjCBwTELMAkGA1UEBhMCVVMxFzAV
BgNVBAoTDlZlcmlTaWduLCBJbmMuMTwwOgYDVQQLEzNDbGFzcyAyIFB1YmxpYyBQcmltYXJ5IENl
cnRpZmljYXRpb24gQXV0aG9yaXR5IC0gRzIxOjA4BgNVBAsTMShjKSAxOTk4IFZlcmlTaWduLCBJ
bmMuIC0gRm9yIGF1dGhvcml6ZWQgdXNlIG9ubHkxHzAdBgNVBAsTFlZlcmlTaWduIFRydXN0IE5l
dHdvcmswgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAKeIASF0LOcaA/CY4Zc8DyEI8Zzbl+ma
/MIEBhO+X1LIzB4sElYsuAFpLMyZH62wlq55BPITOcF7mLoILOjChBMsqmnpCfTHqQKkQsIjT0rY
8A6i+zFsyeZvmScH9eb0THiebetGhvq5hslU8rLEr9RGHFrJFTD/DWz1LQ5tzn93AgMBAAEwDQYJ
KoZIhvcNAQEFBQADgYEAci75f9HxcfvEnvbFXlGKQJi4aPibHIPY4p29/+2h5mbqLwn0ytfqpSuV
9iRghk1ELoOlxC2g0654aW9y2myuCPBjkjfmu8QwF613zEk1qs/Yj9G+txiWR3NqVCI0ZC22FptZ
W7RRWTqzCxT0Et9noPStMmResUZyJ4wSe8VEtK4wggOiMIIDC6ADAgECAhA7h9gNabNnBYcvrtBp
U4c0MA0GCSqGSIb3DQEBBQUAMIHBMQswCQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIElu
Yy4xPDA6BgNVBAsTM0NsYXNzIDIgUHVibGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3Jp
dHkgLSBHMjE6MDgGA1UECxMxKGMpIDE5OTggVmVyaVNpZ24sIEluYy4gLSBGb3IgYXV0aG9yaXpl
ZCB1c2Ugb25seTEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazAeFw0wMDA4MjAwMDAw
MDBaFw0xMzA4MTkyMzU5NTlaMIGrMRQwEgYDVQQKEwtBZGFjb20gUy5BLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazE5MDcGA1UECxMwVGVybXMgb2YgdXNlIGF0IGh0dHBzOi8vc2Vj
LmFkYWNvbS5jb20vcnBhIChjKTAwMTcwNQYDVQQDEy5BZGFjb20gQ2xhc3MgMiBPblNpdGUgSW5k
aXZpZHVhbCBTdWJzY3JpYmVyIENBMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDNNBG4BUKG
HfD9XjgTIsscGWYKFkKbSi4gM3d0Cik1SG2DoxO88uzepMutsehB1t3vH5y89WkfrcgyEgvOV8KR
WZ7priOmkyUAB4UJo7SGui20pi3bf0YtbXIfir4b6g5s3GleHss6IMOfv+D2O7R/Ny/CYd4m8jOm
n19k4t2cXQIDAQABo4GuMIGrMBEGCWCGSAGG+EIBAQQEAwIBBjAPBgNVHRMECDAGAQH/AgEAMAsG
A1UdDwQEAwIBBjBCBgNVHSAEOzA5MDcGC2CGSAGG+EUBBxcCMCgwJgYIKwYBBQUHAgEWGmh0dHBz
Oi8vc2VjLmFkYWNvbS5jb20vcnBhMDQGA1UdHwQtMCswKaAnoCWGI2h0dHA6Ly9jcmwudmVyaXNp
Z24uY29tL3BjYTItZzIuY3JsMA0GCSqGSIb3DQEBBQUAA4GBAJhqcoc51gvRVZzHlh8r/zXMXv9t
VfugLWVutrKEQT2ivPMD95C1L17cDEOVRQ+X9eflsdEPjzoJ8iBsZ6WmgQT5zxiE175WX5EoyDQR
t1/ZBKuLL/mTBQQn5mm0FwJy2JXfksxsBEkQUBIOsSr1xG76cygG6P1ur6GGUzqtXLsPMIIEHDCC
A4WgAwIBAgIQIUxQsxsBBRh0dh/L3LmudDANBgkqhkiG9w0BAQUFADCBqzEUMBIGA1UEChMLQWRh
Y29tIFMuQS4xHzAdBgNVBAsTFlZlcmlTaWduIFRydXN0IE5ldHdvcmsxOTA3BgNVBAsTMFRlcm1z
IG9mIHVzZSBhdCBodHRwczovL3NlYy5hZGFjb20uY29tL3JwYSAoYykwMDE3MDUGA1UEAxMuQWRh
Y29tIENsYXNzIDIgT25TaXRlIEluZGl2aWR1YWwgU3Vic2NyaWJlciBDQTAeFw0xMTEyMDgwMDAw
MDBaFw0xMjEyMDcyMzU5NTlaMIGxMSIwIAYDVQQKDBlQbGF5dGVjaCBTb2Z0d2FyZSBMaW1pdGVk
MQswCQYDVQQLDAJJVDExMC8GA1UECwwoVGVybXMgb2YgdXNlIGF0IHNlYy5hZGFjb20uY29tL3Jw
YSAoYykwODEbMBkGA1UEAwwSVnlhY2hlc2xhdiBUcmFpbmluMS4wLAYJKoZIhvcNAQkBFh92eWFj
aGVzbGF2LnRyYWluaW5AcGxheXRlY2guY29tMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKC
AQEA3B+jRnAJee3enFZEMJ0U+aqNWRCl/e7Dv0CnSNUysgydT9MjLilhSKvJlD/tHukuT8fLJdNk
qxx8CVILRWUUrATIB+VfcCoHMq+/kr4tja6KvqgAquaDwHaKwhFvWNyJQsX4LuQTH0yHtQMQfgEk
bqQZ4HzkUPL5UbuFzf5q80fynGd8Nu8TIonteVFv3PUjCpY5IUM5l8RP7I3EaehGX6tkPYeFAvOx
kmP3GYJtg9ngHxQTJBzxBfzBylodW8jdbix16KIYZTGXottGGZiS98re1WooRa7UlxZQWFbz3EWx
SMaE3uy9QUpB1jw5hnnDkOrDpGYKaT87cup0ljCLbQIDAQABo4G0MIGxMAkGA1UdEwQCMAAwQQYD
VR0gBDowODA2BgpghkgBhvhFAQcaMCgwJgYIKwYBBQUHAgEWGmh0dHBzOi8vc2VjLmFkYWNvbS5j
b20vcnBhMAsGA1UdDwQEAwIFoDARBglghkgBhvhCAQEEBAMCB4AwQQYDVR0fBDowODA2oDSgMoYw
aHR0cDovL2NybC5hZGFjb20uY29tL09uU2l0ZVB1YmxpYy9MYXRlc3RDUkwuY3JsMA0GCSqGSIb3
DQEBBQUAA4GBAIdCyGwDWzQFgqTjGQNcjMcAqCGrG8fOYXhUHXmdufyo7e/ce5D2Uh4mLK+AE6PD
jQhZlKh8EMBgg4cEGHTgrsbGVAqee0oXzh0BoY+WDTMc3GoUdVA46TyouptVAHpX522TSebu89ee
UCGkupMHk2Xb9+SQtZG5/+NHh8QcTMIgMYIErTCCBKkCAQEwgcAwgasxFDASBgNVBAoTC0FkYWNv
bSBTLkEuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3JrMTkwNwYDVQQLEzBUZXJtcyBv
ZiB1c2UgYXQgaHR0cHM6Ly9zZWMuYWRhY29tLmNvbS9ycGEgKGMpMDAxNzA1BgNVBAMTLkFkYWNv
bSBDbGFzcyAyIE9uU2l0ZSBJbmRpdmlkdWFsIFN1YnNjcmliZXIgQ0ECECFMULMbAQUYdHYfy9y5
rnQwCQYFKw4DAhoFAKCCAsEwGAYJKoZIhvcNAQkDMQsGCSqGSIb3DQEHATAcBgkqhkiG9w0BCQUx
DxcNMTIwNDEwMDY0MjA0WjAjBgkqhkiG9w0BCQQxFgQUWFVB4yeHzRMUPRYoB8+gosol9yswgbcG
CSqGSIb3DQEJDzGBqTCBpjALBglghkgBZQMEASowCwYJYIZIAWUDBAEWMAoGCCqGSIb3DQMHMAsG
CWCGSAFlAwQBAjAOBggqhkiG9w0DAgICAIAwBwYFKw4DAgcwDQYIKoZIhvcNAwICAUAwDQYIKoZI
hvcNAwICASgwBwYFKw4DAhowCwYJYIZIAWUDBAIDMAsGCWCGSAFlAwQCAjALBglghkgBZQMEAgEw
CgYIKoZIhvcNAgUwgdEGCSsGAQQBgjcQBDGBwzCBwDCBqzEUMBIGA1UEChMLQWRhY29tIFMuQS4x
HzAdBgNVBAsTFlZlcmlTaWduIFRydXN0IE5ldHdvcmsxOTA3BgNVBAsTMFRlcm1zIG9mIHVzZSBh
dCBodHRwczovL3NlYy5hZGFjb20uY29tL3JwYSAoYykwMDE3MDUGA1UEAxMuQWRhY29tIENsYXNz
IDIgT25TaXRlIEluZGl2aWR1YWwgU3Vic2NyaWJlciBDQQIQIUxQsxsBBRh0dh/L3LmudDCB0wYL
KoZIhvcNAQkQAgsxgcOggcAwgasxFDASBgNVBAoTC0FkYWNvbSBTLkEuMR8wHQYDVQQLExZWZXJp
U2lnbiBUcnVzdCBOZXR3b3JrMTkwNwYDVQQLEzBUZXJtcyBvZiB1c2UgYXQgaHR0cHM6Ly9zZWMu
YWRhY29tLmNvbS9ycGEgKGMpMDAxNzA1BgNVBAMTLkFkYWNvbSBDbGFzcyAyIE9uU2l0ZSBJbmRp
dmlkdWFsIFN1YnNjcmliZXIgQ0ECECFMULMbAQUYdHYfy9y5rnQwDQYJKoZIhvcNAQEBBQAEggEA
Zyb7SzfnnVlyeFLag7xlhoUuF2smZuoOXSLhSE5GEPmC8pALSPybx1V7rhdfPH9zKcytKhpFnSp0
wqXa7gFrpgyk+1NebHpNA9iq3IyuJtmRrgPrfsXk3pL+E/MFbQHsiyIzEQzWs3DUcu9Oo4ycTATP
2FAUBiSjca54Vbiu1sEMBKMYpGoQZRCzPvc7gCeyy8h91TaBXswONH5ob0VA9t9Jc7UuVg2fRJ5w
EpgZ7NDAj5zS34S22aoM43w/t95kiIQ7f9xyi77eZIeESQKayomRDcpPQAa9NXuVK+p32Hfle3SC
QuuovRID6P5NCMyoZ/BG5hn09iBPLfXoDcgnjgAAAAAAAA==

------=_NextPart_000_05E9_01CD16FE.2FB41E10--

From users-return-233449-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 10 07:53:27 2012
Return-Path: <users-return-233449-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C98F49AFF
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 10 Apr 2012 07:53:27 +0000 (UTC)
Received: (qmail 81726 invoked by uid 500); 10 Apr 2012 07:53:24 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 81271 invoked by uid 500); 10 Apr 2012 07:53:19 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 81200 invoked by uid 99); 10 Apr 2012 07:53:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 07:53:17 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [80.12.242.68] (HELO smtpout.wanadoo.co.uk) (80.12.242.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 07:53:12 +0000
Received: from mail.homeinbox.net ([2.29.17.88])
	by mwinf5d57 with ME
	id w7so1i00X1u0MFm037soWK; Tue, 10 Apr 2012 09:52:49 +0200
Received: from localhost (localhost [127.0.0.1])
	by mail.homeinbox.net (Postfix) with ESMTP id 3C11CEAB537
	for <users@tomcat.apache.org>; Tue, 10 Apr 2012 08:52:48 +0100 (BST)
X-Virus-Scanned: Debian amavisd-new at homeinbox.net
Received: from mail.homeinbox.net ([127.0.0.1])
	by localhost (mail.homeinbox.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 4VmbtUR1hFsM for <users@tomcat.apache.org>;
	Tue, 10 Apr 2012 08:52:30 +0100 (BST)
Received: from [192.168.23.207] (unknown [2.29.17.88])
	(using TLSv1 with cipher RC4-MD5 (128/128 bits))
	(No client certificate requested)
	by mail.homeinbox.net (Postfix) with ESMTPSA id 6C40DEAB531
	for <users@tomcat.apache.org>; Tue, 10 Apr 2012 08:52:30 +0100 (BST)
References: <DCAEB2F31E665B4081B49A6DE402946130F7022A25@il-exch1> <4F831E50.1060106@pidster.com> <DCAEB2F31E665B4081B49A6DE402946130F7022A5A@il-exch1>
User-Agent: K-9 Mail for Android
In-Reply-To: <DCAEB2F31E665B4081B49A6DE402946130F7022A5A@il-exch1>
MIME-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 8bit
Subject: RE: tomcat asynchronous invocation problem
From: Mark Thomas <markt@apache.org>
Date: Tue, 10 Apr 2012 08:52:27 +0100
To: Tomcat Users List <users@tomcat.apache.org>
Message-ID: <f0b33abe-4266-4bfa-b4f4-fc44477c1f1c@email.android.com>
X-Virus-Checked: Checked by ClamAV on apache.org



Vyacheslav Trainin <Vyacheslav.Trainin@playtech.com> wrote:

>I reproduced it on:
>	- tomcat-7.0.23 and 7.0.25
>	- java 64 bit 1.6.0_18 and  1.6.0_29
>	- Linux CentOS release 5.6 (Final) 64 bit

One one other question - which connector were you using? BIO, NIO, or APR/native? HTTP or AJP?

With that information it looks like you have enough here to open a bug report in Bugzilla.

Mark


>
>
>
>-----Original Message-----
>From: Pid [mailto:pid@pidster.com] 
>Sent: Monday, April 09, 2012 8:37 PM
>To: Tomcat Users List
>Subject: Re: tomcat asynchronous invocation problem
>
>On 09/04/2012 13:53, Vyacheslav Trainin wrote:
>> Hi,
>> 
>>  
>> 
>> We encountered a problem during asynchronous operations (tomcat 7
>with 
>> servlet 3).
>
>Exactly which version of Tomcat 7.0?
>Same for Java version?
>Same for OS version(s)?
>
>
>p
>
>
>> _Description:  _
>> 
>> One client continuously sends post requests to the server. On the 
>> server side for each request created AsyncContext with timeout 20
>seconds:
>> 
>> AsyncContextasyncContext = req.startAsync(req, resp);
>> 
>>       asyncContext.setTimeout(20000);
>> 
>> As expected after approximately 20 sec the requests are completed. 
>> Then another client also begins to send requests to the server but in
>
>> this case they are explicitly completed after 500 milliseconds. 
>> Something like this:
>> 
>> AsyncContextasyncContext = req.startAsync(req, resp);
>> 
>>       asyncContext.setTimeout(20000);
>> 
>>      
>> 
>>       *try*{
>> 
>>          Thread./sleep/(500);
>> 
>>       } *catch*(Exception e) {
>> 
>>       }
>> 
>>  
>> 
>>       asyncContext.complete();
>> 
>>  
>> 
>> The problem is that after running the second client all the requested
>
>> waiting for timeout (from the first client) are stuck and not
>released 
>> (onTimeout method of AsyncEvent is not called) until the second
>client 
>> stops sending requests.
>> 
>> It looks like the problem occurs on Linux but not on Windows.
>> 
>>  
>> 
>> Below is a simple test that may help to reproduce this issue. The 
>> following servlet accepts URL parameter "complete".
>> 
>> When "complete=1" the request will be completed after 500ms.
>> 
>> Otherwise the request will wait till timeout (20 seconds).
>> 
>>  
>> 
>> Run client that periodically sends requests to /servlet?complete=0.
>(I 
>> have tested it with 10 parallel threads that run in a loop)
>> 
>> Then run another client that periodically sends requests to
>> /servlet?complete=1 (This client can use only a single thread)
>> 
>> See that the first client does not receive any responses while the 
>> second client is running.
>> 
>>  
>> 
>>  
>> 
>> public class WebTestServlet extends HttpServlet {
>> 
>>     private static final Logger LOG =
>> LoggerFactory.getLogger(WebTestServlet.class);
>> 
>>  
>> 
>>     @Override
>> 
>>     protected void service(final HttpServletRequest req, final 
>> HttpServletResponse resp) throws ServletException, IOException {
>> 
>>         LOG.debug("Received request: {}", req);
>> 
>>         final long startTime = System.currentTimeMillis();
>> 
>>         String isComplete = req.getParameter("complete");
>> 
>>  
>> 
>>         AsyncContext asyncContext = req.startAsync(req, resp);
>> 
>>         asyncContext.setTimeout(20000);
>> 
>>         asyncContext.addListener(new AsyncListener() {
>> 
>>             public void onTimeout(AsyncEvent event) throws
>IOException 
>> {
>> 
>>                 long duration = System.currentTimeMillis() - 
>> startTime;
>> 
>>                 LOG.debug("Async Timeout. Request: {}. Waiting time:
>> {}", event.getSuppliedRequest(), duration);
>> 
>>                 event.getAsyncContext().complete();
>> 
>>             }
>> 
>>  
>> 
>>             public void onStartAsync(AsyncEvent event) throws 
>> IOException {
>> 
>>                 LOG.debug("Start async. Request: {}", 
>> event.getSuppliedRequest());
>> 
>>             }
>> 
>>  
>> 
>>             public void onError(AsyncEvent event) throws IOException
>{
>> 
>>                 LOG.debug("Error occured. Request: {}. Error: {}", 
>> event.getSuppliedRequest(), event.getThrowable());
>> 
>>             }
>> 
>>  
>> 
>>             public void onComplete(AsyncEvent event) throws 
>> IOException {
>> 
>>                 long duration = System.currentTimeMillis() - 
>> startTime;
>> 
>>                 LOG.debug("Async Complete. Request: {}. Request 
>> process
>> time: {}", event.getSuppliedRequest(), duration);
>> 
>>             }
>> 
>>         }, req, resp);
>> 
>>  
>> 
>>         if ("1".equals(isComplete)) {
>> 
>>             try {
>> 
>>                 Thread.sleep(500);
>> 
>>             } catch (Exception e) {
>> 
>>             }
>> 
>>  
>> 
>>             asyncContext.complete();
>> 
>>         }
>> 
>>     }
>> 
>> }
>> 
>>  
>> 
>> Regards,
>> 
>> Slava
>> 
>>  
>> 
>>  
>> 
>
>
>-- 
>
>[key:62590808]


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233450-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 10 08:06:05 2012
Return-Path: <users-return-233450-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C419D908B
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 10 Apr 2012 08:06:05 +0000 (UTC)
Received: (qmail 16897 invoked by uid 500); 10 Apr 2012 08:06:02 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 16850 invoked by uid 500); 10 Apr 2012 08:06:02 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 16822 invoked by uid 99); 10 Apr 2012 08:06:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 08:06:01 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [195.50.194.148] (HELO mx6.playtech.com) (195.50.194.148)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 08:05:53 +0000
Received: from EE-EXCH2.EE.playtech.corp (194.126.102.178) by mx6.playtech.com
 (195.50.194.148) with Microsoft SMTP Server (TLS) id 14.1.270.1; Tue, 10 Apr
 2012 11:04:35 +0300
Received: from il-exch1.IL.playtech.corp (192.168.7.34) by
 ee-exch2.ee.playtech.corp (192.168.3.16) with Microsoft SMTP Server (TLS) id
 14.2.247.3; Tue, 10 Apr 2012 11:05:27 +0300
Received: from il-exch1.IL.playtech.corp ([192.168.7.34]) by il-exch1
 ([192.168.7.34]) with mapi; Tue, 10 Apr 2012 11:05:25 +0300
From: Vyacheslav Trainin <Vyacheslav.Trainin@playtech.com>
To: "'users@tomcat.apache.org'" <users@tomcat.apache.org>
Date: Tue, 10 Apr 2012 11:05:24 +0300
Subject: RE: tomcat asynchronous invocation problem
Thread-Topic: tomcat asynchronous invocation problem
Thread-Index: Ac0W7wcDQfttP8KQQyKc+RFTrUvWuQAAIfqg
Message-ID: <DCAEB2F31E665B4081B49A6DE402946130F7022A92@il-exch1>
References: <DCAEB2F31E665B4081B49A6DE402946130F7022A25@il-exch1>
 <4F831E50.1060106@pidster.com>
 <DCAEB2F31E665B4081B49A6DE402946130F7022A5A@il-exch1>
 <f0b33abe-4266-4bfa-b4f4-fc44477c1f1c@email.android.com>
In-Reply-To: <f0b33abe-4266-4bfa-b4f4-fc44477c1f1c@email.android.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: yes
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/signed; protocol="application/x-pkcs7-signature";
	micalg=SHA1; boundary="----=_NextPart_000_05FF_01CD1709.D3D41AD0"
MIME-Version: 1.0

------=_NextPart_000_05FF_01CD1709.D3D41AD0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: 7bit

I use NIO connector.


-----Original Message-----
From: Mark Thomas [mailto:markt@apache.org]
Sent: Tuesday, April 10, 2012 10:52 AM
To: Tomcat Users List
Subject: RE: tomcat asynchronous invocation problem



Vyacheslav Trainin <Vyacheslav.Trainin@playtech.com> wrote:

>I reproduced it on:
>	- tomcat-7.0.23 and 7.0.25
>	- java 64 bit 1.6.0_18 and  1.6.0_29
>	- Linux CentOS release 5.6 (Final) 64 bit

One one other question - which connector were you using? BIO, NIO, or 
APR/native? HTTP or AJP?

With that information it looks like you have enough here to open a bug report 
in Bugzilla.

Mark


>
>
>
>-----Original Message-----
>From: Pid [mailto:pid@pidster.com]
>Sent: Monday, April 09, 2012 8:37 PM
>To: Tomcat Users List
>Subject: Re: tomcat asynchronous invocation problem
>
>On 09/04/2012 13:53, Vyacheslav Trainin wrote:
>> Hi,
>>
>>
>>
>> We encountered a problem during asynchronous operations (tomcat 7
>with
>> servlet 3).
>
>Exactly which version of Tomcat 7.0?
>Same for Java version?
>Same for OS version(s)?
>
>
>p
>
>
>> _Description:  _
>>
>> One client continuously sends post requests to the server. On the
>> server side for each request created AsyncContext with timeout 20
>seconds:
>>
>> AsyncContextasyncContext = req.startAsync(req, resp);
>>
>>       asyncContext.setTimeout(20000);
>>
>> As expected after approximately 20 sec the requests are completed.
>> Then another client also begins to send requests to the server but in
>
>> this case they are explicitly completed after 500 milliseconds.
>> Something like this:
>>
>> AsyncContextasyncContext = req.startAsync(req, resp);
>>
>>       asyncContext.setTimeout(20000);
>>
>>
>>
>>       *try*{
>>
>>          Thread./sleep/(500);
>>
>>       } *catch*(Exception e) {
>>
>>       }
>>
>>
>>
>>       asyncContext.complete();
>>
>>
>>
>> The problem is that after running the second client all the requested
>
>> waiting for timeout (from the first client) are stuck and not
>released
>> (onTimeout method of AsyncEvent is not called) until the second
>client
>> stops sending requests.
>>
>> It looks like the problem occurs on Linux but not on Windows.
>>
>>
>>
>> Below is a simple test that may help to reproduce this issue. The
>> following servlet accepts URL parameter "complete".
>>
>> When "complete=1" the request will be completed after 500ms.
>>
>> Otherwise the request will wait till timeout (20 seconds).
>>
>>
>>
>> Run client that periodically sends requests to /servlet?complete=0.
>(I
>> have tested it with 10 parallel threads that run in a loop)
>>
>> Then run another client that periodically sends requests to
>> /servlet?complete=1 (This client can use only a single thread)
>>
>> See that the first client does not receive any responses while the
>> second client is running.
>>
>>
>>
>>
>>
>> public class WebTestServlet extends HttpServlet {
>>
>>     private static final Logger LOG =
>> LoggerFactory.getLogger(WebTestServlet.class);
>>
>>
>>
>>     @Override
>>
>>     protected void service(final HttpServletRequest req, final
>> HttpServletResponse resp) throws ServletException, IOException {
>>
>>         LOG.debug("Received request: {}", req);
>>
>>         final long startTime = System.currentTimeMillis();
>>
>>         String isComplete = req.getParameter("complete");
>>
>>
>>
>>         AsyncContext asyncContext = req.startAsync(req, resp);
>>
>>         asyncContext.setTimeout(20000);
>>
>>         asyncContext.addListener(new AsyncListener() {
>>
>>             public void onTimeout(AsyncEvent event) throws
>IOException
>> {
>>
>>                 long duration = System.currentTimeMillis() -
>> startTime;
>>
>>                 LOG.debug("Async Timeout. Request: {}. Waiting time:
>> {}", event.getSuppliedRequest(), duration);
>>
>>                 event.getAsyncContext().complete();
>>
>>             }
>>
>>
>>
>>             public void onStartAsync(AsyncEvent event) throws
>> IOException {
>>
>>                 LOG.debug("Start async. Request: {}",
>> event.getSuppliedRequest());
>>
>>             }
>>
>>
>>
>>             public void onError(AsyncEvent event) throws IOException
>{
>>
>>                 LOG.debug("Error occured. Request: {}. Error: {}",
>> event.getSuppliedRequest(), event.getThrowable());
>>
>>             }
>>
>>
>>
>>             public void onComplete(AsyncEvent event) throws
>> IOException {
>>
>>                 long duration = System.currentTimeMillis() -
>> startTime;
>>
>>                 LOG.debug("Async Complete. Request: {}. Request
>> process
>> time: {}", event.getSuppliedRequest(), duration);
>>
>>             }
>>
>>         }, req, resp);
>>
>>
>>
>>         if ("1".equals(isComplete)) {
>>
>>             try {
>>
>>                 Thread.sleep(500);
>>
>>             } catch (Exception e) {
>>
>>             }
>>
>>
>>
>>             asyncContext.complete();
>>
>>         }
>>
>>     }
>>
>> }
>>
>>
>>
>> Regards,
>>
>> Slava
>>
>>
>>
>>
>>
>
>
>--
>
>[key:62590808]


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


------=_NextPart_000_05FF_01CD1709.D3D41AD0
Content-Type: application/pkcs7-signature; name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKzTCCAwMw
ggJsAhEAuS9gzIifoXpGCbhbcGyKrzANBgkqhkiG9w0BAQUFADCBwTELMAkGA1UEBhMCVVMxFzAV
BgNVBAoTDlZlcmlTaWduLCBJbmMuMTwwOgYDVQQLEzNDbGFzcyAyIFB1YmxpYyBQcmltYXJ5IENl
cnRpZmljYXRpb24gQXV0aG9yaXR5IC0gRzIxOjA4BgNVBAsTMShjKSAxOTk4IFZlcmlTaWduLCBJ
bmMuIC0gRm9yIGF1dGhvcml6ZWQgdXNlIG9ubHkxHzAdBgNVBAsTFlZlcmlTaWduIFRydXN0IE5l
dHdvcmswHhcNOTgwNTE4MDAwMDAwWhcNMjgwODAxMjM1OTU5WjCBwTELMAkGA1UEBhMCVVMxFzAV
BgNVBAoTDlZlcmlTaWduLCBJbmMuMTwwOgYDVQQLEzNDbGFzcyAyIFB1YmxpYyBQcmltYXJ5IENl
cnRpZmljYXRpb24gQXV0aG9yaXR5IC0gRzIxOjA4BgNVBAsTMShjKSAxOTk4IFZlcmlTaWduLCBJ
bmMuIC0gRm9yIGF1dGhvcml6ZWQgdXNlIG9ubHkxHzAdBgNVBAsTFlZlcmlTaWduIFRydXN0IE5l
dHdvcmswgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAKeIASF0LOcaA/CY4Zc8DyEI8Zzbl+ma
/MIEBhO+X1LIzB4sElYsuAFpLMyZH62wlq55BPITOcF7mLoILOjChBMsqmnpCfTHqQKkQsIjT0rY
8A6i+zFsyeZvmScH9eb0THiebetGhvq5hslU8rLEr9RGHFrJFTD/DWz1LQ5tzn93AgMBAAEwDQYJ
KoZIhvcNAQEFBQADgYEAci75f9HxcfvEnvbFXlGKQJi4aPibHIPY4p29/+2h5mbqLwn0ytfqpSuV
9iRghk1ELoOlxC2g0654aW9y2myuCPBjkjfmu8QwF613zEk1qs/Yj9G+txiWR3NqVCI0ZC22FptZ
W7RRWTqzCxT0Et9noPStMmResUZyJ4wSe8VEtK4wggOiMIIDC6ADAgECAhA7h9gNabNnBYcvrtBp
U4c0MA0GCSqGSIb3DQEBBQUAMIHBMQswCQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIElu
Yy4xPDA6BgNVBAsTM0NsYXNzIDIgUHVibGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3Jp
dHkgLSBHMjE6MDgGA1UECxMxKGMpIDE5OTggVmVyaVNpZ24sIEluYy4gLSBGb3IgYXV0aG9yaXpl
ZCB1c2Ugb25seTEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazAeFw0wMDA4MjAwMDAw
MDBaFw0xMzA4MTkyMzU5NTlaMIGrMRQwEgYDVQQKEwtBZGFjb20gUy5BLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazE5MDcGA1UECxMwVGVybXMgb2YgdXNlIGF0IGh0dHBzOi8vc2Vj
LmFkYWNvbS5jb20vcnBhIChjKTAwMTcwNQYDVQQDEy5BZGFjb20gQ2xhc3MgMiBPblNpdGUgSW5k
aXZpZHVhbCBTdWJzY3JpYmVyIENBMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDNNBG4BUKG
HfD9XjgTIsscGWYKFkKbSi4gM3d0Cik1SG2DoxO88uzepMutsehB1t3vH5y89WkfrcgyEgvOV8KR
WZ7priOmkyUAB4UJo7SGui20pi3bf0YtbXIfir4b6g5s3GleHss6IMOfv+D2O7R/Ny/CYd4m8jOm
n19k4t2cXQIDAQABo4GuMIGrMBEGCWCGSAGG+EIBAQQEAwIBBjAPBgNVHRMECDAGAQH/AgEAMAsG
A1UdDwQEAwIBBjBCBgNVHSAEOzA5MDcGC2CGSAGG+EUBBxcCMCgwJgYIKwYBBQUHAgEWGmh0dHBz
Oi8vc2VjLmFkYWNvbS5jb20vcnBhMDQGA1UdHwQtMCswKaAnoCWGI2h0dHA6Ly9jcmwudmVyaXNp
Z24uY29tL3BjYTItZzIuY3JsMA0GCSqGSIb3DQEBBQUAA4GBAJhqcoc51gvRVZzHlh8r/zXMXv9t
VfugLWVutrKEQT2ivPMD95C1L17cDEOVRQ+X9eflsdEPjzoJ8iBsZ6WmgQT5zxiE175WX5EoyDQR
t1/ZBKuLL/mTBQQn5mm0FwJy2JXfksxsBEkQUBIOsSr1xG76cygG6P1ur6GGUzqtXLsPMIIEHDCC
A4WgAwIBAgIQIUxQsxsBBRh0dh/L3LmudDANBgkqhkiG9w0BAQUFADCBqzEUMBIGA1UEChMLQWRh
Y29tIFMuQS4xHzAdBgNVBAsTFlZlcmlTaWduIFRydXN0IE5ldHdvcmsxOTA3BgNVBAsTMFRlcm1z
IG9mIHVzZSBhdCBodHRwczovL3NlYy5hZGFjb20uY29tL3JwYSAoYykwMDE3MDUGA1UEAxMuQWRh
Y29tIENsYXNzIDIgT25TaXRlIEluZGl2aWR1YWwgU3Vic2NyaWJlciBDQTAeFw0xMTEyMDgwMDAw
MDBaFw0xMjEyMDcyMzU5NTlaMIGxMSIwIAYDVQQKDBlQbGF5dGVjaCBTb2Z0d2FyZSBMaW1pdGVk
MQswCQYDVQQLDAJJVDExMC8GA1UECwwoVGVybXMgb2YgdXNlIGF0IHNlYy5hZGFjb20uY29tL3Jw
YSAoYykwODEbMBkGA1UEAwwSVnlhY2hlc2xhdiBUcmFpbmluMS4wLAYJKoZIhvcNAQkBFh92eWFj
aGVzbGF2LnRyYWluaW5AcGxheXRlY2guY29tMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKC
AQEA3B+jRnAJee3enFZEMJ0U+aqNWRCl/e7Dv0CnSNUysgydT9MjLilhSKvJlD/tHukuT8fLJdNk
qxx8CVILRWUUrATIB+VfcCoHMq+/kr4tja6KvqgAquaDwHaKwhFvWNyJQsX4LuQTH0yHtQMQfgEk
bqQZ4HzkUPL5UbuFzf5q80fynGd8Nu8TIonteVFv3PUjCpY5IUM5l8RP7I3EaehGX6tkPYeFAvOx
kmP3GYJtg9ngHxQTJBzxBfzBylodW8jdbix16KIYZTGXottGGZiS98re1WooRa7UlxZQWFbz3EWx
SMaE3uy9QUpB1jw5hnnDkOrDpGYKaT87cup0ljCLbQIDAQABo4G0MIGxMAkGA1UdEwQCMAAwQQYD
VR0gBDowODA2BgpghkgBhvhFAQcaMCgwJgYIKwYBBQUHAgEWGmh0dHBzOi8vc2VjLmFkYWNvbS5j
b20vcnBhMAsGA1UdDwQEAwIFoDARBglghkgBhvhCAQEEBAMCB4AwQQYDVR0fBDowODA2oDSgMoYw
aHR0cDovL2NybC5hZGFjb20uY29tL09uU2l0ZVB1YmxpYy9MYXRlc3RDUkwuY3JsMA0GCSqGSIb3
DQEBBQUAA4GBAIdCyGwDWzQFgqTjGQNcjMcAqCGrG8fOYXhUHXmdufyo7e/ce5D2Uh4mLK+AE6PD
jQhZlKh8EMBgg4cEGHTgrsbGVAqee0oXzh0BoY+WDTMc3GoUdVA46TyouptVAHpX522TSebu89ee
UCGkupMHk2Xb9+SQtZG5/+NHh8QcTMIgMYIErTCCBKkCAQEwgcAwgasxFDASBgNVBAoTC0FkYWNv
bSBTLkEuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3JrMTkwNwYDVQQLEzBUZXJtcyBv
ZiB1c2UgYXQgaHR0cHM6Ly9zZWMuYWRhY29tLmNvbS9ycGEgKGMpMDAxNzA1BgNVBAMTLkFkYWNv
bSBDbGFzcyAyIE9uU2l0ZSBJbmRpdmlkdWFsIFN1YnNjcmliZXIgQ0ECECFMULMbAQUYdHYfy9y5
rnQwCQYFKw4DAhoFAKCCAsEwGAYJKoZIhvcNAQkDMQsGCSqGSIb3DQEHATAcBgkqhkiG9w0BCQUx
DxcNMTIwNDEwMDgwNTIzWjAjBgkqhkiG9w0BCQQxFgQUFRBJCq1hFDPBIJA1hHOpyB2YJeUwgbcG
CSqGSIb3DQEJDzGBqTCBpjALBglghkgBZQMEASowCwYJYIZIAWUDBAEWMAoGCCqGSIb3DQMHMAsG
CWCGSAFlAwQBAjAOBggqhkiG9w0DAgICAIAwBwYFKw4DAgcwDQYIKoZIhvcNAwICAUAwDQYIKoZI
hvcNAwICASgwBwYFKw4DAhowCwYJYIZIAWUDBAIDMAsGCWCGSAFlAwQCAjALBglghkgBZQMEAgEw
CgYIKoZIhvcNAgUwgdEGCSsGAQQBgjcQBDGBwzCBwDCBqzEUMBIGA1UEChMLQWRhY29tIFMuQS4x
HzAdBgNVBAsTFlZlcmlTaWduIFRydXN0IE5ldHdvcmsxOTA3BgNVBAsTMFRlcm1zIG9mIHVzZSBh
dCBodHRwczovL3NlYy5hZGFjb20uY29tL3JwYSAoYykwMDE3MDUGA1UEAxMuQWRhY29tIENsYXNz
IDIgT25TaXRlIEluZGl2aWR1YWwgU3Vic2NyaWJlciBDQQIQIUxQsxsBBRh0dh/L3LmudDCB0wYL
KoZIhvcNAQkQAgsxgcOggcAwgasxFDASBgNVBAoTC0FkYWNvbSBTLkEuMR8wHQYDVQQLExZWZXJp
U2lnbiBUcnVzdCBOZXR3b3JrMTkwNwYDVQQLEzBUZXJtcyBvZiB1c2UgYXQgaHR0cHM6Ly9zZWMu
YWRhY29tLmNvbS9ycGEgKGMpMDAxNzA1BgNVBAMTLkFkYWNvbSBDbGFzcyAyIE9uU2l0ZSBJbmRp
dmlkdWFsIFN1YnNjcmliZXIgQ0ECECFMULMbAQUYdHYfy9y5rnQwDQYJKoZIhvcNAQEBBQAEggEA
GAZBzOcY+sbhV8gDwjkacigTbmdGZCtXTZUFokK5bCBHACIxXi6hQSTOM7dQbEEOnHPfK4lGlcmS
1j2FTz/5Gs8qWy+b/k1gCJbp/jhSdUkx2bmEGNOWxAiAq4xOmrajC2cmZUjGapObfui02aGacQHu
m05wrSvex7ygXqXbgQHzxq15ood0BeOFxuoYGjD8d273Mx358MPH5uxVDJnq/N0+vOii4YDrqGQI
JDDl8TgZTbBK7dZb9d1jBlJhDEQAQeFWwz5U9tNFvxe1X/NWAbQ/rIJi0xy3ZIsB9IxdOCk95Fsm
9CjXWkI95GIucLQh223RlZ9/oQLaLAM6nRbSgQAAAAAAAA==

------=_NextPart_000_05FF_01CD1709.D3D41AD0--

From users-return-233451-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 10 08:37:28 2012
Return-Path: <users-return-233451-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 40BD69C08
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 10 Apr 2012 08:37:28 +0000 (UTC)
Received: (qmail 9944 invoked by uid 500); 10 Apr 2012 08:37:24 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 9866 invoked by uid 500); 10 Apr 2012 08:37:24 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 9835 invoked by uid 99); 10 Apr 2012 08:37:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 08:37:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [195.89.38.218] (HELO mailhost.tradar.com) (195.89.38.218)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 08:37:16 +0000
Received: from UK-CRO-s004.tradar.com ([fe80::9503:fc2:d897:11d5]) by UK-CRO-s004.tradar.com ([fe80::9503:fc2:d897:11d5%11]) with mapi; Tue, 10 Apr 2012 09:36:36 +0100
From: Nick Porter <nick.porter@tradar.com>
To: "users@tomcat.apache.org" <users@tomcat.apache.org>
Content-Class: urn:content-classes:message
Date: Tue, 10 Apr 2012 09:36:34 +0100
Subject: Problems uploading huge files >2GB to Tomcat app.
Thread-Topic: Problems uploading huge files >2GB to Tomcat app.
Thread-Index: Ac0TOBGy2AfcTkNGQAmO97tzq58XYg==
Message-ID: <C145BA96AD0C234E9319A75A4FCDA5792BF2342461@UK-CRO-s004.tradar.com>
Accept-Language: en-US, en-GB
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US, en-GB
Content-Type: text/plain; charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org




Hi all. New to Tomcat and not a developer but I have been trying to deploy =
a website using Debian6, Tomcat 6.0.35 hosting the OpenCMS 8.0.1 app. The w=
ebsite and the OpenCMS app has a facility to upload files however I only se=
em to be able to upload files that are less than 2GB. I did read that there=
 used to be a 2GB bug in Tomcat a few versions ago but that this had since =
been resolved.

The errors I am seeing are a mixture of  400 Bad Request and 413 Request En=
tity too Large.

I'm connecting directly to Tomcat and the app/site on the HTTP/1.1 connecto=
r, port 8080.

I could be wrong but I can't see anything untoward in the logs located at /=
var/log/tomcat6/

The chaps over at the OpenCMS mail list assure me that OpenCMS is capable o=
f handling files of this size so I'm guessing my Tomcat config is in some w=
ay causing the problem.

I've expanded the memory for the heap in the /etc/defaults/tomcat6 file wit=
h;

JAVA_OPTS=3D"-Djava.awt.headless=3Dtrue -Xmx512m -XX:+UseConcMarkSweepGC"

...and added the maxPostSize=3D"0" to the HTTP connector but I'm still see =
these errors.

Here's my connector settings from server.xml

    <Connector port=3D"8080" protocol=3D"HTTP/1.1"
               connectionTimeout=3D"20000"
               URIEncoding=3D"UTF-8"
               maxPostSize=3D"0"
               redirectPort=3D"8443" />

The only other settings I found relating to the size of a POST were the pac=
ketSize attribute but believe this is only relevant to the AJP connector.

I'm at a loss as to what to try next so have come here as a last resort. Ca=
n anybody give me any pointers or advice on how I can further investigate a=
nd resolve this problem?

Thx.
--
np




--
Tradar Limited  is a limited company registered in England and Wales. Regis=
tered number: 3431380.
Registered office: 20-21 Jockey's Fields, London. WC1R 4BW



---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233452-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 10 10:48:23 2012
Return-Path: <users-return-233452-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B789D96EA
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 10 Apr 2012 10:48:23 +0000 (UTC)
Received: (qmail 55392 invoked by uid 500); 10 Apr 2012 10:48:20 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 55336 invoked by uid 500); 10 Apr 2012 10:48:20 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 55310 invoked by uid 99); 10 Apr 2012 10:48:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 10:48:19 +0000
X-ASF-Spam-Status: No, hits=-2.8 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sandeep.kaur2@rsa.com designates 128.222.32.20 as permitted sender)
Received: from [128.222.32.20] (HELO mexforward.lss.emc.com) (128.222.32.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 10:48:12 +0000
Received: from hop04-l1d11-si01.isus.emc.com (HOP04-L1D11-SI01.isus.emc.com [10.254.111.54])
	by mexforward.lss.emc.com (Switch-3.4.3/Switch-3.4.3) with ESMTP id q3AAloDT028810
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO);
	Tue, 10 Apr 2012 06:47:51 -0400
Received: from mailhub.lss.emc.com (mailhubhoprd02.lss.emc.com [10.254.221.253]) by hop04-l1d11-si01.isus.emc.com (RSA Interceptor); Tue, 10 Apr 2012 06:47:37 -0400
Received: from mxhub24.corp.emc.com (mxhub24.corp.emc.com [128.222.70.136])
	by mailhub.lss.emc.com (Switch-3.4.3/Switch-3.4.3) with ESMTP id q3AAlaKT009101;
	Tue, 10 Apr 2012 06:47:36 -0400
Received: from MX03A.corp.emc.com ([169.254.1.29]) by mxhub24.corp.emc.com
 ([128.222.70.136]) with mapi; Tue, 10 Apr 2012 06:47:35 -0400
From: <sandeep.kaur2@rsa.com>
To: <users-info@tomcat.apache.org>
Date: Tue, 10 Apr 2012 06:50:49 -0400
Subject: Tomcat7: French Chars not properly displaying
Thread-Topic: Tomcat7: French Chars not properly displaying
Thread-Index: Ac0XB8pFbYUpuO70RwGzjUE06dvvBw==
Message-ID: <EDD800F0B629B24FA547EB5F5631E9D12EDCCCBFF7@MX03A.corp.emc.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: yes
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: multipart/signed; protocol="application/x-pkcs7-signature";
	micalg=SHA1; boundary="----=_NextPart_000_001F_01CD1735.E404D580"
MIME-Version: 1.0
X-EMM-MHVC: 1
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_001F_01CD1735.E404D580
Content-Type: multipart/alternative;
	boundary="----=_NextPart_001_0020_01CD1735.E404D580"


------=_NextPart_001_0020_01CD1735.E404D580
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi,

 

In our product, we were using the default tomcat 6 installation to store our
web pages and used to get the French character displayed properly using our
AGENT configuration.

 

However, as we upgraded from tomcat 6 to tomcat 7, the French characters are
not getting displayed  using the same agent configuration and moving the
WebPages back to tomcat 6 make the characters displayed properly in French
format on the browser.

 

I tried googling if there is any difference in tomcat configuration files
when compared to tomcat 6 and tomcat 7 (specifically server.xml) but could
not find the exact cause of the issue.

 

Could you please throw some light with your knowledge and expertise

 

Regards,

Sandeep Kaur |Software Quality Engineer 

 


------=_NextPart_001_0020_01CD1735.E404D580
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" =
xmlns:o=3D"urn:schemas-microsoft-com:office:office" =
xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns:x=3D"urn:schemas-microsoft-com:office:excel" =
xmlns:p=3D"urn:schemas-microsoft-com:office:powerpoint" =
xmlns:a=3D"urn:schemas-microsoft-com:office:access" =
xmlns:dt=3D"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882" =
xmlns:s=3D"uuid:BDC6E3F0-6DA3-11d1-A2A3-00AA00C14882" =
xmlns:rs=3D"urn:schemas-microsoft-com:rowset" xmlns:z=3D"#RowsetSchema" =
xmlns:b=3D"urn:schemas-microsoft-com:office:publisher" =
xmlns:ss=3D"urn:schemas-microsoft-com:office:spreadsheet" =
xmlns:c=3D"urn:schemas-microsoft-com:office:component:spreadsheet" =
xmlns:odc=3D"urn:schemas-microsoft-com:office:odc" =
xmlns:oa=3D"urn:schemas-microsoft-com:office:activation" =
xmlns:html=3D"http://www.w3.org/TR/REC-html40" =
xmlns:q=3D"http://schemas.xmlsoap.org/soap/envelope/" =
xmlns:rtc=3D"http://microsoft.com/officenet/conferencing" =
xmlns:D=3D"DAV:" xmlns:Repl=3D"http://schemas.microsoft.com/repl/" =
xmlns:mt=3D"http://schemas.microsoft.com/sharepoint/soap/meetings/" =
xmlns:x2=3D"http://schemas.microsoft.com/office/excel/2003/xml" =
xmlns:ppda=3D"http://www.passport.com/NameSpace.xsd" =
xmlns:ois=3D"http://schemas.microsoft.com/sharepoint/soap/ois/" =
xmlns:dir=3D"http://schemas.microsoft.com/sharepoint/soap/directory/" =
xmlns:ds=3D"http://www.w3.org/2000/09/xmldsig#" =
xmlns:dsp=3D"http://schemas.microsoft.com/sharepoint/dsp" =
xmlns:udc=3D"http://schemas.microsoft.com/data/udc" =
xmlns:xsd=3D"http://www.w3.org/2001/XMLSchema" =
xmlns:sub=3D"http://schemas.microsoft.com/sharepoint/soap/2002/1/alerts/"=
 xmlns:ec=3D"http://www.w3.org/2001/04/xmlenc#" =
xmlns:sp=3D"http://schemas.microsoft.com/sharepoint/" =
xmlns:sps=3D"http://schemas.microsoft.com/sharepoint/soap/" =
xmlns:xsi=3D"http://www.w3.org/2001/XMLSchema-instance" =
xmlns:udcs=3D"http://schemas.microsoft.com/data/udc/soap" =
xmlns:udcxf=3D"http://schemas.microsoft.com/data/udc/xmlfile" =
xmlns:udcp2p=3D"http://schemas.microsoft.com/data/udc/parttopart" =
xmlns:wf=3D"http://schemas.microsoft.com/sharepoint/soap/workflow/" =
xmlns:dsss=3D"http://schemas.microsoft.com/office/2006/digsig-setup" =
xmlns:dssi=3D"http://schemas.microsoft.com/office/2006/digsig" =
xmlns:mdssi=3D"http://schemas.openxmlformats.org/package/2006/digital-sig=
nature" =
xmlns:mver=3D"http://schemas.openxmlformats.org/markup-compatibility/2006=
" xmlns:m=3D"http://schemas.microsoft.com/office/2004/12/omml" =
xmlns:mrels=3D"http://schemas.openxmlformats.org/package/2006/relationshi=
ps" xmlns:spwp=3D"http://microsoft.com/sharepoint/webpartpages" =
xmlns:ex12t=3D"http://schemas.microsoft.com/exchange/services/2006/types"=
 =
xmlns:ex12m=3D"http://schemas.microsoft.com/exchange/services/2006/messag=
es" =
xmlns:pptsl=3D"http://schemas.microsoft.com/sharepoint/soap/SlideLibrary/=
" =
xmlns:spsl=3D"http://microsoft.com/webservices/SharePointPortalServer/Pub=
lishedLinksService" xmlns:Z=3D"urn:schemas-microsoft-com:" =
xmlns:st=3D"&#1;" xmlns=3D"http://www.w3.org/TR/REC-html40"><head><meta =
http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dus-ascii"><meta name=3DGenerator content=3D"Microsoft Word 12 =
(filtered medium)"><style><!--
/* Font Definitions */
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:"Trebuchet MS";
	panose-1:2 11 6 3 2 2 2 2 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:purple;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal-compose;
	font-family:"Calibri","sans-serif";
	color:windowtext;}
.MsoChpDefault
	{mso-style-type:export-only;}
@page WordSection1
	{size:8.5in 11.0in;
	margin:1.0in 1.0in 1.0in 1.0in;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]--></head><body lang=3DEN-US link=3Dblue =
vlink=3Dpurple><div class=3DWordSection1><p =
class=3DMsoNormal>Hi,<o:p></o:p></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><p class=3DMsoNormal>In our =
product, we were using the default tomcat 6 installation to store our =
web pages and used to get the French character displayed properly using =
our AGENT configuration.<o:p></o:p></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><p class=3DMsoNormal>However, as =
we upgraded from tomcat 6 to tomcat 7, the French characters are not =
getting displayed&nbsp; using the same agent configuration and moving =
the WebPages back to tomcat 6 make the characters displayed properly in =
French format on the browser.<o:p></o:p></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><p class=3DMsoNormal>I tried =
googling if there is any difference in tomcat configuration files when =
compared to tomcat 6 and tomcat 7 (specifically server.xml) but could =
not find the exact cause of the issue.<o:p></o:p></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><p class=3DMsoNormal>Could you =
please throw some light with your knowledge and =
expertise<o:p></o:p></p><p class=3DMsoNormal><o:p>&nbsp;</o:p></p><p =
class=3DMsoNormal><span style=3D'font-size:10.0pt;font-family:"Trebuchet =
MS","sans-serif"'>Regards,<o:p></o:p></span></p><p =
class=3DMsoNormal><span style=3D'font-size:10.0pt;font-family:"Trebuchet =
MS","sans-serif"'>Sandeep Kaur |Software Quality Engineer =
<o:p></o:p></span></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p></div></body></html>
------=_NextPart_001_0020_01CD1735.E404D580--

------=_NextPart_000_001F_01CD1735.E404D580
Content-Type: application/x-pkcs7-signature; name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIYsDCCA2Ew
ggJJoAMCAQICEAoBAQEAAAJ8AAAACgAAAAIwDQYJKoZIhvcNAQEFBQAwOjEZMBcGA1UEChMQUlNB
IFNlY3VyaXR5IEluYzEdMBsGA1UECxMUUlNBIFNlY3VyaXR5IDIwNDggVjMwHhcNMDEwMjIyMjAz
OTIzWhcNMjYwMjIyMjAzOTIzWjA6MRkwFwYDVQQKExBSU0EgU2VjdXJpdHkgSW5jMR0wGwYDVQQL
ExRSU0EgU2VjdXJpdHkgMjA0OCBWMzCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALeP
VXHSgN17aXmn8BhQMjxiZ/YKlQfd5hvzntnSQVRrrZ98vhnN+0arQWgeGOpVyC+ReIko+ycpYP/f
j4w7yUmbtaSUzgHqPrVje38m/RndwCG9hNEtT0bDTtzYNzk7KK/LnRrqK68hpcEjIri4G1oTh1eD
0fAg5+hPI0KwAKV9ienpYXOUmHEmvC1q4PdN8PG2KjgxgQ0p4QDBUQ9MUvgEWqp9ctO4hyq7YxAD
KrOhTw1aXka3PQ71dOyZn/k9JIGIpt1gVOiVNj3GCZOaoxKAAFWZGUe90KV8w7r7H/f1D/isubX0
N5gTGN6FW7cMgjuHb5U5WDDabgFoFyLMwAsCAwEAAaNjMGEwDwYDVR0TAQH/BAUwAwEB/zAOBgNV
HQ8BAf8EBAMCAQYwHwYDVR0jBBgwFoAUB8NRMKSq6UWuNST6/yQsM9CxnYwwHQYDVR0OBBYEFAfD
UTCkqulFrjUk+v8kLDPQsZ2MMA0GCSqGSIb3DQEBBQUAA4IBAQBfPoZ2brg1PE42HB55mL/91RIR
eVIO7jGJvN1/+dHGFSHoigFUDTr7VLnWY9SxqpZNokJN1FMfixDef2W+YBMncYikc+OEY9GkVeFQ
k+YbDnnQZ7xGyL8/Fw2V5saQad7ntC/elX3QEj89Pn9NPxRo9RFQ1cH0kKUIHTFg/2CMI1QKr/6h
bsXReipoeM8eggogtB+t5YWyamh1Tq0lN5SFvr2h1Oq3DEs8negSAPBfrA3hrHBjc/d/eZ8yJUJ0
BYAov73BJJZYFbEXIemJS9sHiGf0Fa1wPi9NhTvCt9v+mGgjieF0D970xYRjKRvMywfJAKSp18Ii
T2fXd+wgBWHeMIIEzDCCA7SgAwIBAgIQfwkpTisxI69dQcDR3n6N2TANBgkqhkiG9w0BAQUFADA6
MRkwFwYDVQQKExBSU0EgU2VjdXJpdHkgSW5jMR0wGwYDVQQLExRSU0EgU2VjdXJpdHkgMjA0OCBW
MzAeFw0xMTAzMDMyMDUyMTVaFw0xOTA0MDExNDQ1MzlaMIGXMQswCQYDVQQGEwJVUzEWMBQGA1UE
CBMNTWFzc2FjaHVzZXR0czEQMA4GA1UEBxMHQmVkZm9yZDEZMBcGA1UEChMQUlNBIFNlY3VyaXR5
IExMQzElMCMGA1UECxMcR2xvYmFsIFNlY3VyaXR5IE9yZ2FuaXphdGlvbjEcMBoGA1UEAxMTUlNB
IENvcnBvcmF0ZSBDQSB2MjCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALaLCcEh7lhj
dqYo6ryZ8oHK4kJRmQuxfwMa/3PE1Vd4U7U5x15UuSX+qd78hnEdR6yGGxhmY8U2SDG31u+yJD9o
OpXFQm6/A4xzItwfcs6SD3Gt6nI/Oa6M0M/7MjPqSc1aUUm2NFiyb6DjotYLDzeAVCqF+4V/Dgc2
QdO1FZeFUCcb5lMqkVAr+O3uAEZEmtD3Cr06YavA38fxeWCiPoheUuWuAQcvOdEnSzJFm6GM8yBJ
l9J1cAibE6c4DCl+eHj4M+O/ON2fFVb/lQdS4xO7cSZ9fKGCI7kWr0/7ssSjPsIIGpg0hLRZ35aZ
fCK1fFLi9VKvIcTYTrA8Gf9bIGsCAwEAAaOCAW4wggFqMB8GA1UdIwQYMBaAFAfDUTCkqulFrjUk
+v8kLDPQsZ2MMBIGA1UdEwEB/wQIMAYBAf8CAQMwcAYDVR0fBGkwZzBloGOgYYZfaHR0cDovL3d3
dy5yc2FzZWN1cml0eS5jb20vcHJvZHVjdHMva2Vvbi9yZXBvc2l0b3J5L2NlcnRpZmljYXRlX3N0
YXR1cy9SU0FfU2VjdXJpdHlfMjA0OF92My5DUkwwHQYDVR0OBBYEFHMbOEsly1qOvQLs310p9hB0
DtiYMIGRBgNVHSAEgYkwgYYwgYMGCSqGSIb3DQUGATB2MC4GCCsGAQUFBwIBFiJodHRwOi8vY2Eu
cnNhc2VjdXJpdHkuY29tL0NQUy5odG1sMEQGCCsGAQUFBwICMDgwFxYQUlNBIFNlY3VyaXR5IExM
QzADAgEBGh1DUFMgSW5jb3Jwb3JhdGVkIGJ5IHJlZmVyZW5jZTAOBgNVHQ8BAf8EBAMCAYYwDQYJ
KoZIhvcNAQEFBQADggEBAHGIVCAjCZ+z2vRElolRsLsz4L/js0Zm019rr/+eFks5VnSf5T0HJj7Z
tzjtna/+O5b01L8L6Fz64Yui+h/cnxvDwQrhzajbiMiN/JFH+kNOUJ9LcInBkmu45d98h+EQw3Yz
XwfnHYaXLArfgeY3CP8AYi0pxXEXf0bH8Prl+P0n4SOUqxh6J0GIz/haW1+usvMscB7lCpJ2loo9
+TmRn3WQrokgr1ILm/3apel6ydpkoFUxEoP5a1806Z7SD9KljN+Vc9o521VkMtnzLlDEkn05by/p
QNdlidY7eV7xcpCvuI6qFzyfHdI3G0/Vao0L0os6lEwb5PSa1IysLlHT0uUwggT+MIID5qADAgEC
AhBiTV1a7zr4E+gcgJ4lG6TBMA0GCSqGSIb3DQEBBQUAMIGXMQswCQYDVQQGEwJVUzEWMBQGA1UE
CBMNTWFzc2FjaHVzZXR0czEQMA4GA1UEBxMHQmVkZm9yZDEZMBcGA1UEChMQUlNBIFNlY3VyaXR5
IExMQzElMCMGA1UECxMcR2xvYmFsIFNlY3VyaXR5IE9yZ2FuaXphdGlvbjEcMBoGA1UEAxMTUlNB
IENvcnBvcmF0ZSBDQSB2MjAeFw0xMTAzMTAyMjQwMDRaFw0xOTAyMjgyMTU2MzNaMIGeMQswCQYD
VQQGEwJVUzEWMBQGA1UECBMNTWFzc2FjaHVzZXR0czEQMA4GA1UEBxMHQmVkZm9yZDEZMBcGA1UE
ChMQUlNBIFNlY3VyaXR5IExMQzElMCMGA1UECxMcR2xvYmFsIFNlY3VyaXR5IE9yZ2FuaXphdGlv
bjEjMCEGA1UEAxMaUlNBIENsYXNzIDIgUGVyc29uYWwgQ0EgdjIwggEiMA0GCSqGSIb3DQEBAQUA
A4IBDwAwggEKAoIBAQDNEVsNPFZOP83bMzCpUDGnf/5IDIQvVRhDHkyrkbv5X1ih4xdTsSdzTDrj
LUxIzC7nJswCv+jBaWWm1YoqzBXqQl2/Hl6T5Bt3HBT302GSYamtKcCWve25DoJav+dJd9U/XkCq
SSNN7DNVXkJrKC7Zq7OS6/O308pZNkCRJJfMRrodgSx1NoQYZJCfufTOshslVSVhj3Ar274qmuf8
iqM0RR5OMpm7t2dtHzvYJPHR3+HwfQ+s64YBC7NBrBLOYMeq8tzkPKzyITXhwopgbM6gbp+Z8qX5
/lo4Y3OEm7ED51iDqdruRoRnfTQGKdZJT7IYGLH+x0roRKmYKP/2HRNpAgMBAAGjggE7MIIBNzAP
BgNVHRMECDAGAQH/AgECMIGRBgNVHSAEgYkwgYYwgYMGCSqGSIb3DQUHAjB2MC4GCCsGAQUFBwIB
FiJodHRwOi8vY2EucnNhc2VjdXJpdHkuY29tL0NQUy5odG1sMEQGCCsGAQUFBwICMDgwFxYQUlNB
IFNlY3VyaXR5IExMQzADAgEBGh1DUFMgSW5jb3Jwb3JhdGVkIGJ5IHJlZmVyZW5jZTBABgNVHR8E
OTA3MDWgM6Axhi9odHRwOi8vY3JsLnJzYXNlY3VyaXR5LmNvbS9SU0FDb3Jwb3JhdGVDQXYyLmNy
bDAOBgNVHQ8BAf8EBAMCAYYwHQYDVR0OBBYEFBQw62v19Em1aFJ1ptu9rlvIrH1MMB8GA1UdIwQY
MBaAFHMbOEsly1qOvQLs310p9hB0DtiYMA0GCSqGSIb3DQEBBQUAA4IBAQCPepLT4buLa9p5VwF1
OW2YUwliCqxecs0CxRGJVR4cwvOuMeXxutP+m51n3vzseGkM0d1fmA9JTz8X+5LFdRD12Iw124oj
79QA7NKhO/xoPgbo0QxgnvHS15o94BPvFiZE6QGUjkHs9/hDvU+eIx7OG+Kzxt47vZZef+fJF0+s
ZgEDIMXXPXAtJW3xg/JhPrl4z0L7gmjgO+KxV0cyxaDrk6SEW5zZCqAcLehnW7MH8vvlzMsQ6pVr
f1g8xMCJonyxow9AwXGyQ0z1866qbJ8t+nQC/sGx3msJVHQg1JyjOWF4PMm8DdeUt+qUrSFRLY4J
MroY51gM90nnhtijtleCMIIFsTCCBJmgAwIBAgIRAKh93GZo93oAFocH2CHEqHUwDQYJKoZIhvcN
AQEFBQAwgZ4xCzAJBgNVBAYTAlVTMRYwFAYDVQQIEw1NYXNzYWNodXNldHRzMRAwDgYDVQQHEwdC
ZWRmb3JkMRkwFwYDVQQKExBSU0EgU2VjdXJpdHkgTExDMSUwIwYDVQQLExxHbG9iYWwgU2VjdXJp
dHkgT3JnYW5pemF0aW9uMSMwIQYDVQQDExpSU0EgQ2xhc3MgMiBQZXJzb25hbCBDQSB2MjAeFw0x
MjAzMzAwNzM2MjVaFw0xNDAzMzAwNzM2MjVaMIHlMRMwEQYKCZImiZPyLGQBGRYDY29tMRMwEQYK
CZImiZPyLGQBGRYDZW1jMRgwFgYDVQQKEw9FTUMgQ29ycG9yYXRpb24xDDAKBgNVBAsTA1JTQTEV
MBMGA1UECxMMQXNpYS9QYWNpZmljMRQwEgYDVQQLEwtFbmdpbmVlcmluZzEPMA0GA1UEBRMGMTA3
Njk3MRYwFAYKCZImiZPyLGQBARMGa2F1cnMyMRUwEwYDVQQDEwxTYW5kZWVwIEthdXIxJDAiBgkq
hkiG9w0BCQEWFXNhbmRlZXAua2F1cjJAcnNhLmNvbTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCC
AQoCggEBANsy4iQyy1RdbX1diZTzfZgQZ9o6tIJxjbOaDdLcjyVaT09Lt1LoULuQ2qMYpo5/xX8K
8JIP/E9f0sqHYorYs6UU2cNe0qJ5CbP15qmJb28NEWCeeSkZttL4cdS8mkg0U23Zlml0XPegxO2M
aKV/ssfBGzuhglHES/rpuoscYrAnBYkmWzQEUbnyhY1g/aA1Ba1gW/quzlJpldfNDe5vNEKdP0FL
xcLxFKcM7QFnMiAsLR0g39MBXvBTpisD1SN0Z24rKNAkXQvQIDIOxU5ckKtJ4DE1op7AC4Jd5Wvk
ERCqNiMEzaacVKOCmjFng43YBn1e5oqYZwCAmkmw53tYMhcCAwEAAaOCAZ8wggGbMB8GA1UdIwQY
MBaAFBQw62v19Em1aFJ1ptu9rlvIrH1MMIGRBgNVHSAEgYkwgYYwgYMGCSqGSIb3DQUHBTB2MC4G
CCsGAQUFBwIBFiJodHRwOi8vY2EucnNhc2VjdXJpdHkuY29tL0NQUy5odG1sMEQGCCsGAQUFBwIC
MDgwFxYQUlNBIFNlY3VyaXR5IExMQzADAgEBGh1DUFMgSW5jb3Jwb3JhdGVkIGJ5IHJlZmVyZW5j
ZTApBgNVHSUEIjAgBgorBgEEAYI3FAICBggrBgEFBQcDAgYIKwYBBQUHAwQwQAYDVR0RBDkwN4EV
c2FuZGVlcC5rYXVyMkByc2EuY29toB4GCisGAQQBgjcUAgOgEAwOa2F1cnMyQGVtYy5jb20wDgYD
VR0PAQH/BAQDAgeAMEgGA1UdHwRBMD8wPaA7oDmGN2h0dHA6Ly9jcmwucnNhc2VjdXJpdHkuY29t
OjgwL1JTQUNsYXNzMlBlcnNvbmFsQ0F2Mi5jcmwwHQYDVR0OBBYEFM9NJk+6f8xbHgLrJu8KY4/R
apN2MA0GCSqGSIb3DQEBBQUAA4IBAQAhqTYaM0iqiomxM6mo+9V+iWwOPZocGIgGjCj099eFdpEP
1ZykUc17UMXEwU5tILYoUKkiPqYpUX0aJImgj2O47C0+fDCfAG2IYjvRlAPZ4sUDpdcS96EXoMLY
biF6TcTvsmSkD1+N5qe9CMgSn6UhHEhA/6ZmP55LXybjIzDkAY9MNkCLyVKTWqfuFf71TaV7Sgrn
dicDm4E6Faf3jhr50gGWiIgjhn8iZL21PzVvHvwtJe1p5a2Cj5wS8NwBet7VZIFuThxGYKVUYkh8
wyksj91hCuOROsZPLVvjU2jnFBsbxVLNtx8H80z6qkFK/PtJqny3RirCOXCudIMTkIZ+MIIFwDCC
BKigAwIBAgIQDW7plqWAUizuLv0HT2Ij/jANBgkqhkiG9w0BAQUFADCBnjELMAkGA1UEBhMCVVMx
FjAUBgNVBAgTDU1hc3NhY2h1c2V0dHMxEDAOBgNVBAcTB0JlZGZvcmQxGTAXBgNVBAoTEFJTQSBT
ZWN1cml0eSBMTEMxJTAjBgNVBAsTHEdsb2JhbCBTZWN1cml0eSBPcmdhbml6YXRpb24xIzAhBgNV
BAMTGlJTQSBDbGFzcyAyIFBlcnNvbmFsIENBIHYyMB4XDTEyMDMzMDA3MzYyOVoXDTE0MDMzMDA3
MzYxNlowgekxEzARBgoJkiaJk/IsZAEZFgNjb20xEzARBgoJkiaJk/IsZAEZFgNlbWMxGDAWBgNV
BAoTD0VNQyBDb3Jwb3JhdGlvbjEMMAoGA1UECxMDUlNBMRUwEwYDVQQLEwxBc2lhL1BhY2lmaWMx
FDASBgNVBAsTC0VuZ2luZWVyaW5nMQ8wDQYDVQQFEwYxMDc2OTcxFjAUBgoJkiaJk/IsZAEBEwZr
YXVyczIxGTAXBgNVBAMTEFNhbmRlZXAgS2F1ci1FbmMxJDAiBgkqhkiG9w0BCQEWFXNhbmRlZXAu
a2F1cjJAcnNhLmNvbTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKbjjN7suS0/73xi
cKSP1ihq9gr0J4cODCKGmHucfA6MhxSsV5olRTYYfw2LOZY1Z2V+h6vSZb6vdt9HPR8ryK6jTfmm
qvYfZIbbgOT8Vkypu0wG/kn53TziCse9e4GzbDTkqS53mA7xPqy/SveSo9A31i+Icpv7MFmpfgvZ
jg1BHsFOg+TYq/VQbFNDPRR1ExzTqi8OuJCgwZ+w+44IUb2HI3L7pap+sJPRPH9SLWyxn7pcen5t
rzkinQ52ILiekSxyXVBnNdQk5s8BNcnf3Kj7xDJyWMLrLmXqkuxYsG0pzfYCWM4kgbcGuUuAwacv
e/1Ms2lHsJZLsvuko0367gUCAwEAAaOCAaswggGnMDUGA1UdJQQuMCwGCisGAQQBgjcUAgIGCCsG
AQUFBwMCBggrBgEFBQcDBAYKKwYBBAGCNwoDBDAfBgNVHSMEGDAWgBQUMOtr9fRJtWhSdabbva5b
yKx9TDCBkQYDVR0gBIGJMIGGMIGDBgkqhkiG9w0FBwUwdjAuBggrBgEFBQcCARYiaHR0cDovL2Nh
LnJzYXNlY3VyaXR5LmNvbS9DUFMuaHRtbDBEBggrBgEFBQcCAjA4MBcWEFJTQSBTZWN1cml0eSBM
TEMwAwIBARodQ1BTIEluY29ycG9yYXRlZCBieSByZWZlcmVuY2UwQAYDVR0RBDkwN4EVc2FuZGVl
cC5rYXVyMkByc2EuY29toB4GCisGAQQBgjcUAgOgEAwOa2F1cnMyQGVtYy5jb20wSAYDVR0fBEEw
PzA9oDugOYY3aHR0cDovL2NybC5yc2FzZWN1cml0eS5jb206ODAvUlNBQ2xhc3MyUGVyc29uYWxD
QXYyLmNybDAdBgNVHQ4EFgQURiFZvhBY5OQ6oxA+M2ApTRbQBF8wDgYDVR0PAQH/BAQDAgM4MA0G
CSqGSIb3DQEBBQUAA4IBAQCIUnMyjEb5LUMmTN08LjZdHApicIbJpdIpK8WoaWwz2/QcIbpyJRyk
5TKfxGJYmsNDLtwfRAVWL/sW+Pdjk0RrzhjmliMRe9GA0WSiq3kKdxbUcVzbtejX+L3Fh/ooiAQt
4G0D0AGBIDCVM9sCGZt550OD9N2/Pz98/vwROjxG2PLUa9JVqsz0ooqaYHPmtx+CJfJ7iLFh145T
kav5r+EkIfR7WxGPjHm/INVXNSU1Ip0XSNY1YIPUyMq+5yJtTwdE6ctNNWfN299HvfPaW7cOxhhe
/GNqAX9ERm8uTHjCbvdora/s+PuyZhQPI4cKPXgBKv9LBJcs2/0rnCOTKtfgMYIENjCCBDICAQEw
gbQwgZ4xCzAJBgNVBAYTAlVTMRYwFAYDVQQIEw1NYXNzYWNodXNldHRzMRAwDgYDVQQHEwdCZWRm
b3JkMRkwFwYDVQQKExBSU0EgU2VjdXJpdHkgTExDMSUwIwYDVQQLExxHbG9iYWwgU2VjdXJpdHkg
T3JnYW5pemF0aW9uMSMwIQYDVQQDExpSU0EgQ2xhc3MgMiBQZXJzb25hbCBDQSB2MgIRAKh93GZo
93oAFocH2CHEqHUwCQYFKw4DAhoFAKCCAlYwGAYJKoZIhvcNAQkDMQsGCSqGSIb3DQEHATAcBgkq
hkiG9w0BCQUxDxcNMTIwNDEwMTA1MDQ4WjAjBgkqhkiG9w0BCQQxFgQU6WejfQUSChb6Jjndpkt9
UQ6whrAwZwYJKoZIhvcNAQkPMVowWDAKBggqhkiG9w0DBzAOBggqhkiG9w0DAgICAIAwDQYIKoZI
hvcNAwICAUAwBwYFKw4DAgcwDQYIKoZIhvcNAwICASgwBwYFKw4DAhowCgYIKoZIhvcNAgUwgcQG
CSsGAQQBgjcQBDGBtjCBszCBnjELMAkGA1UEBhMCVVMxFjAUBgNVBAgTDU1hc3NhY2h1c2V0dHMx
EDAOBgNVBAcTB0JlZGZvcmQxGTAXBgNVBAoTEFJTQSBTZWN1cml0eSBMTEMxJTAjBgNVBAsTHEds
b2JhbCBTZWN1cml0eSBPcmdhbml6YXRpb24xIzAhBgNVBAMTGlJTQSBDbGFzcyAyIFBlcnNvbmFs
IENBIHYyAhANbumWpYBSLO4u/QdPYiP+MIHGBgsqhkiG9w0BCRACCzGBtqCBszCBnjELMAkGA1UE
BhMCVVMxFjAUBgNVBAgTDU1hc3NhY2h1c2V0dHMxEDAOBgNVBAcTB0JlZGZvcmQxGTAXBgNVBAoT
EFJTQSBTZWN1cml0eSBMTEMxJTAjBgNVBAsTHEdsb2JhbCBTZWN1cml0eSBPcmdhbml6YXRpb24x
IzAhBgNVBAMTGlJTQSBDbGFzcyAyIFBlcnNvbmFsIENBIHYyAhANbumWpYBSLO4u/QdPYiP+MA0G
CSqGSIb3DQEBAQUABIIBAGN8+D139PiqaKjSwIwKKCZ7GXLgrtCLk0fIcl0frVp55M7pCy3gS8fb
/lZDHG9W+IaI3uVQI2ClK6CPNwmuNil0594M8j3e+NC7qyKuxOOUQ1eYZLraNVb1tlLrw/SFXP6F
jQnb6k+QtiX3txRxmGe635GsVMn9qiwEI8vhXVBFSPWuNWbuMlZMJXu4ZHyQmEnI3Ik+my50y4B1
KT2mQaorglbOnV/1Z4CF7/nPDCFY3ZB6N5323t6NeqqKRJkcufxJILGY16QFVnEm85JHnjgeOJLY
hR8uAe88AHnJZHOw7JxDwAN2AtGfUQlNCu8eC2L0bz3pZzGAtCmTYuoIi4gAAAAAAAA=

------=_NextPart_000_001F_01CD1735.E404D580--

From users-return-233453-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 10 10:56:08 2012
Return-Path: <users-return-233453-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CDA09990C
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 10 Apr 2012 10:56:08 +0000 (UTC)
Received: (qmail 74396 invoked by uid 500); 10 Apr 2012 10:56:05 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 74339 invoked by uid 500); 10 Apr 2012 10:56:05 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 74330 invoked by uid 99); 10 Apr 2012 10:56:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 10:56:05 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Ehsan.Sadeghi@jotne.com designates 195.139.163.200 as permitted sender)
Received: from [195.139.163.200] (HELO jotneexch.jotne.intra) (195.139.163.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 10:55:59 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CD1708.7623EF50"
Subject: Distributing Tomcat
Date: Tue, 10 Apr 2012 12:55:36 +0200
Message-ID: <121C9D6B8C22084C8E1062778602C1C702BA7C0E@jotneexch.jotne.intra>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Distributing Tomcat
Thread-Index: Ac0XCHXvdJBtw2TYTVuEEQRDTbPUyQ==
From: "Ehsan Sadeghi" <Ehsan.Sadeghi@jotne.com>
To: <users@tomcat.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01CD1708.7623EF50
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: base64

SGVsbG8sDQpJIHdhbnRlZCB0byBrbm93IGlmIGl0IGlzIGxlZ2FsIHRvIGNyZWF0ZSBhIHBhY2th
Z2UgKHppcCBmaWxlKSB0aGF0IGluY2x1ZGVzIFRvbWNhdCBhbmQgYSB3ZWJhcHAgYW5kIGRpc3Ry
aWJ1dGUgaXQ/DQoNCkNoZWVycywNCkVoc2FuIFNhZGVnaGkNCg0KDQo=

------_=_NextPart_001_01CD1708.7623EF50--

From users-return-233454-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 10 11:02:25 2012
Return-Path: <users-return-233454-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DD0D39A66
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 10 Apr 2012 11:02:25 +0000 (UTC)
Received: (qmail 90728 invoked by uid 500); 10 Apr 2012 11:02:22 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 90530 invoked by uid 500); 10 Apr 2012 11:02:22 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 90514 invoked by uid 99); 10 Apr 2012 11:02:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 11:02:22 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [213.157.18.194] (HELO komm3.srs-management.de) (213.157.18.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 11:02:15 +0000
Received: from SRS-EXCH-02.bensheim.srs ([192.168.101.15]) by
 SRS-EXCH-02.bensheim.srs ([192.168.101.15]) with mapi; Tue, 10 Apr 2012
 13:00:44 +0200
From: =?iso-8859-1?Q?Thomas_Strau=DF?= <t.strauss@srs-management.de>
To: Tomcat Users List <users@tomcat.apache.org>
Date: Tue, 10 Apr 2012 13:01:43 +0200
Subject: AW: FormAuthentication Valve changes fail with RequestListeners?
Thread-Topic: FormAuthentication Valve changes fail with RequestListeners?
Thread-Index: Ac0OZbVvyp4v+pOyRhGQHuL1l+W6qwDH6PJAADsTwIABJdWLwA==
Message-ID: <983BCB8DEFCDA248B640B2F6373CAE8D6DC8F52402@SRS-EXCH-02.bensheim.srs>
References: <983BCB8DEFCDA248B640B2F6373CAE8D6DC8F52285@SRS-EXCH-02.bensheim.srs>
	<CABzHfVkwa9tuH+QkSDteZRQ3_q85PWbkSHqSAaU5pvvLB57iwA@mail.gmail.com>
	<983BCB8DEFCDA248B640B2F6373CAE8D6DC8F522C7@SRS-EXCH-02.bensheim.srs>
 <CABzHfVnoJ1hk77=FuhcKpFVBJGFoDoGPLhgpKQyxWL3AvmM42A@mail.gmail.com>
 <983BCB8DEFCDA248B640B2F6373CAE8D6DC8F52345@SRS-EXCH-02.bensheim.srs>
 <983BCB8DEFCDA248B640B2F6373CAE8D6DC8F52385@SRS-EXCH-02.bensheim.srs>
In-Reply-To: <983BCB8DEFCDA248B640B2F6373CAE8D6DC8F52385@SRS-EXCH-02.bensheim.srs>
Accept-Language: de-DE
Content-Language: de-DE
X-MS-Has-Attach: yes
X-MS-TNEF-Correlator:
acceptlanguage: de-DE
Content-Type: multipart/signed; protocol="application/x-pkcs7-signature";
	micalg=SHA1; boundary="----=_NextPart_000_0C53_01CD171A.13C7EB70"
MIME-Version: 1.0

------=_NextPart_000_0C53_01CD171A.13C7EB70
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,

we still see this issue. Did our test data reveal anything that you =
found
problematic?

Thank you for the support, and Happy Easter to all who celebrated!

Mit freundlichen Gr=FC=DFen

Thomas Strau=DF

SRS PaperDynamix=AE=20
WE MAKE PAPER WORK

SRS-Management GmbH=20
Berliner Ring 93
64625 Bensheim=20
T +49 6251 85 424 - 20=20
F +49 6251 85 424 - 14
M +49 174 2110912

www.srs-management.de
www.srs-paperdynamix.de

HRB 25262 AG Darmstadt
Gesch=E4ftsf=FChrer: Detlev Homilius, Thomas Strau=DF



> -----Urspr=FCngliche Nachricht-----
> Von: Thomas Strau=DF [mailto:t.strauss@srs-management.de]
> Gesendet: Mittwoch, 4. April 2012 16:47
> An: Tomcat Users List
> Betreff: AW: FormAuthentication Valve changes fail with =
RequestListeners?
>=20
> Repeating the message because I signed it (again, *sigh*), causing =
trouble
> - sorry.
>=20
> Hi,
>=20
> we have done the tests and got the following results (7.0.11 and =
7.0.26).
>=20
> Thank you for taking the time:
>=20
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D Tomcat 7.0.11
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> First call to portal:
>=20
> ["http-bio-8080"-exec-3                | INFO  | 30-03 16:47:29:005]  =
>>
> requestInitialized
> =
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
i
> al
> ized(PortalRequestListener.java:52)]
> ["http-bio-8080"-exec-3                | INFO  | 30-03 16:47:29:005]
> PortalRequest thread: 39 - "http-bio-8080"-exec-3
> =
[de.srs.pen.portal.utils.server.servlet.PortalRequest.set(PortalRequest.j=
a
> va
> :45)]
> ["http-bio-8080"-exec-3                | TRACE | 30-03 16:47:30:186]
> Request Listener: Request Initialized
> =
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
i
> al
> ized(PortalRequestListener.java:60)]
> ["http-bio-8080"-exec-3                | TRACE | 30-03 16:47:30:187]
> requested URI:/portal-srs-standard/
> =
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
i
> al
> ized(PortalRequestListener.java:62)]
> ["http-bio-8080"-exec-3                | TRACE | 30-03 16:47:30:187]
> httpSession ID: 2D7D25B19BDC1A64DFFD61BBFD93CE7F
> =
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
i
> al
> ized(PortalRequestListener.java:63)]
> ["http-bio-8080"-exec-3                | TRACE | 30-03 16:47:30:187]
> principal:no principal
> =
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
i
> al
> ized(PortalRequestListener.java:66)]
> ["http-bio-8080"-exec-3                | TRACE | 30-03 16:47:30:187]
> stack
> trace:
> =
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
i
> al
> ized(PortalRequestListener.java:67)]
> java.lang.Exception
>         at
> =
de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestIniti=
a
> li
> zed(PortalRequestListener.java:67)
>         at
> =
org.apache.catalina.core.StandardContext.fireRequestInitEvent(StandardCon=
t
> ex
> t.java:5903)
>         at
> =
org.apache.catalina.authenticator.FormAuthenticator.forwardToLoginPage(Fo=
r
> mA
> uthenticator.java:372)
>         at
> =
org.apache.catalina.authenticator.FormAuthenticator.authenticate(FormAuth=
e
> nt
> icator.java:267)
>         at
> =
org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorB=
a
> se
> .java:556)
>         at
> =
org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)=

>         at
> =
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:=
1
> 64
> )
>         at
> =
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:=
1
> 00
> )
>         at
> =
org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)=

>         at
> =
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.j=
a
> va
> :118)
>         at
> =
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:39=
4
> )
>         at
> =
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:243=
)
>         at
> =
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(H=
t
> tp
> 11Protocol.java:188)
>         at
> =
org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.ja=
v
> a:
> 302)
>         at
> =
java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor=
.
> ja
> va:886)
>         at
> =
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.jav=
a
> :9
> 08)
>         at java.lang.Thread.run(Thread.java:662)
>=20
>=20
> Credentials provided, login done
>=20
> ["http-bio-8080"-exec-3                | TRACE | 30-03 16:47:47:246]
> Request Listener: Request Initialized
> =
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
i
> al
> ized(PortalRequestListener.java:60)]
> ["http-bio-8080"-exec-3                | TRACE | 30-03 16:47:50:803]
> requested URI:/portal-srs-standard/
> =
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
i
> al
> ized(PortalRequestListener.java:62)]
> ["http-bio-8080"-exec-3                | TRACE | 30-03 16:47:50:803]
> httpSession ID: 17E5174AC9E99DC97A44B0967E3E0219
> =
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
i
> al
> ized(PortalRequestListener.java:63)]
> ["http-bio-8080"-exec-3                | TRACE | 30-03 16:47:50:804]
> principal:srs/m.strauss
> =
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
i
> al
> ized(PortalRequestListener.java:66)]
> ["http-bio-8080"-exec-3                | TRACE | 30-03 16:47:50:804]
> stack
> trace:
> =
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
i
> al
> ized(PortalRequestListener.java:67)]
> java.lang.Exception
>         at
> =
de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestIniti=
a
> li
> zed(PortalRequestListener.java:67)
>         at
> =
org.apache.catalina.core.StandardContext.fireRequestInitEvent(StandardCon=
t
> ex
> t.java:5903)
>         at
> =
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve=
.
> ja
> va:160)
>         at
> =
org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorB=
a
> se
> .java:591)
>         at
> =
org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)=

>         at
> =
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:=
1
> 64
> )
>         at
> =
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:=
1
> 00
> )
>         at
> =
org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)=

>         at
> =
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.j=
a
> va
> :118)
>         at
> =
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:39=
4
> )
>         at
> =
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:243=
)
>         at
> =
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(H=
t
> tp
> 11Protocol.java:188)
>         at
> =
org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.ja=
v
> a:
> 302)
>         at
> =
java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor=
.
> ja
> va:886)
>         at
> =
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.jav=
a
> :9
> 08)
>         at java.lang.Thread.run(Thread.java:662)
>=20
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D Tomcat 7.0.26
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
>=20
> [http-bio-8080-exec-3                  | TRACE | 30-03 17:12:11:030]
> Request Listener: Request Initialized
> =
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
i
> al
> ized(PortalRequestListener.java:60)]
> [http-bio-8080-exec-3                  | TRACE | 30-03 17:12:11:813]
> requested URI:/portal-srs-standard/
> =
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
i
> al
> ized(PortalRequestListener.java:62)]
> [http-bio-8080-exec-3                  | TRACE | 30-03 17:12:11:814]
> httpSession ID: AC7A464173A57BD6CB8602A906EFB0EF
> =
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
i
> al
> ized(PortalRequestListener.java:63)]
> [http-bio-8080-exec-3                  | TRACE | 30-03 17:12:11:814]
> principal:no principal
> =
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
i
> al
> ized(PortalRequestListener.java:66)]
> [http-bio-8080-exec-3                  | TRACE | 30-03 17:12:11:833]
> stack
> trace:
> =
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
i
> al
> ized(PortalRequestListener.java:67)]
> java.lang.Exception
>         at
> =
de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestIniti=
a
> li
> zed(PortalRequestListener.java:67)
>         at
> =
org.apache.catalina.core.StandardContext.fireRequestInitEvent(StandardCon=
t
> ex
> t.java:5934)
>         at
> =
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:=
1
> 64
> )
>         at
> =
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:=
9
> 8)
>         at
> =
org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)=

>         at
> =
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.j=
a
> va
> :118)
>         at
> =
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:40=
7
> )
>         at
> =
org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Pr=
o
> ce
> ssor.java:987)
>         at
> =
org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(Abst=
r
> ac
> tProtocol.java:579)
>         at
> =
org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.ja=
v
> a:
> 307)
>         at
> =
java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor=
.
> ja
> va:886)
>         at
> =
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.jav=
a
> :9
> 08)
>         at java.lang.Thread.run(Thread.java:662)
> [http-bio-8080-exec-3                  | INFO  | 30-03 17:12:12:745]  =
<<
> requestInitialized
> =
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
i
> al
> ized(PortalRequestListener.java:93)]
>=20
>=20
>=20
> [http-bio-8080-exec-7                  | INFO  | 30-03 17:13:26:084]
> PortalRequest thread: 28 - http-bio-8080-exec-7
> =
[de.srs.pen.portal.utils.server.servlet.PortalRequest.set(PortalRequest.j=
a
> va
> :45)]
> [http-bio-8080-exec-7                  | TRACE | 30-03 17:13:44:622]
> Request Listener: Request Initialized
> =
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
i
> al
> ized(PortalRequestListener.java:60)]
> [http-bio-8080-exec-7                  | TRACE | 30-03 17:13:45:263]
> requested URI:/portal-srs-standard/j_security_check
> =
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
i
> al
> ized(PortalRequestListener.java:62)]
> [http-bio-8080-exec-7                  | TRACE | 30-03 17:13:45:486]
> httpSession ID: AC7A464173A57BD6CB8602A906EFB0EF
> =
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
i
> al
> ized(PortalRequestListener.java:63)]
> [http-bio-8080-exec-7                  | TRACE | 30-03 17:13:46:007]
> principal:no principal
> =
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
i
> al
> ized(PortalRequestListener.java:66)]
> [http-bio-8080-exec-7                  | TRACE | 30-03 17:13:46:831]
> stack
> trace:
> =
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
i
> al
> ized(PortalRequestListener.java:67)]
> java.lang.Exception
>         at
> =
de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestIniti=
a
> li
> zed(PortalRequestListener.java:67)
>         at
> =
org.apache.catalina.core.StandardContext.fireRequestInitEvent(StandardCon=
t
> ex
> t.java:5934)
>         at
> =
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:=
1
> 64
> )
>         at
> =
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:=
9
> 8)
>         at
> =
org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)=

>         at
> =
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.j=
a
> va
> :118)
>         at
> =
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:40=
7
> )
>         at
> =
org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Pr=
o
> ce
> ssor.java:987)
>         at
> =
org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(Abst=
r
> ac
> tProtocol.java:579)
>         at
> =
org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.ja=
v
> a:
> 307)
>         at
> =
java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor=
.
> ja
> va:886)
>         at
> =
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.jav=
a
> :9
> 08)
>         at java.lang.Thread.run(Thread.java:662)
> [http-bio-8080-exec-7                  | INFO  | 30-03 17:13:49:228]  =
<<
> requestInitialized
> =
[de.srs.pen.portal.utils.server.servlet.PortalRequestListener.requestInit=
i
> al
> ized(PortalRequestListener.java:93)]
>=20
>=20
> Mit freundlichen Gr=FC=DFen
>=20
> Thomas Strau=DF
>=20
> SRS PaperDynamix=AE
> WE MAKE PAPER WORK
>=20
> SRS-Management GmbH
> Berliner Ring 93
> 64625 Bensheim
> T +49 6251 85 424 - 20
> F +49 6251 85 424 - 14
> M +49 174 2110912
>=20
> www.srs-management.de
> www.srs-paperdynamix.de
>=20
> HRB 25262 AG Darmstadt
> Gesch=E4ftsf=FChrer: Detlev Homilius, Thomas Strau=DF
>=20
>=20
>=20
> > -----Urspr=FCngliche Nachricht-----
> > Von: Konstantin Kolinko [mailto:knst.kolinko@gmail.com]
> > Gesendet: Freitag, 30. M=E4rz 2012 13:10
> > An: Tomcat Users List
> > Betreff: Re: FormAuthentication Valve changes fail with
> RequestListeners?
> >
> > 2012/3/30 Thomas Strau=DF <t.strauss@srs-management.de>:
> > > Hi,
> > >
> > > thank you for the information.
> > >
> > > We have not succeeded so far. I want to give you some more
> > > information what happens, the context.xml and the web.xml
> > >
> > > What we have changed versus the existing setup, working on 7.0.11
> > > - We have moved the login.jsp into the protection domain (was
> > > outside before). This did not remove the issue.
> > > - We have changed the preemptiveAuthentication setting. This did =
not
> > > remove the issue.
> > >
> > > This is the flow through the system that we can see:
> > >
> > > Client sends request to /portal
> > >
> > >        /portal is not protected
> > >        /portal/jsp/main.jsp is welcome page and protected (see
> > > web.xml)
> > >        portal context configures formauthentication on the
> > > protection domain
> > >        Tomcat redirects/forwards incoming call to /jsp/login.jsp
> > > (protected
> > > resource)
> > >
> > > FormAuthentication Valve is called
> > > Request Listener is called (expected: principal is null -> OK!)
> >
> > What is stacktrace at this point inside the listener?
> > (e.g. (new Exception()).printStackTrace());
> >
> > Maybe you can compare 7.0.26 and 7.0.11.
> >
> >
> > IIRC there was some refactoring with regards to where the valves are
> > placed and how listeners are called  In 7.0.22 changelog:
> >
> > "Error handling and request listeners are now handled in the
> > StandardHostValve to ensure they wrap all Context level activity."
> >
> > Maybe something was missed there.
> >
> > > jsp/login.jsp is displayed, waiting for user User adds =
information,
> > > press submit Client sends request to j_security_check is initiated
> > > by browser with form data
> > >
> > > (something happens here?)
> > >
> > > Realm is called: Authentication succeeds, realm creates principal
> > >        Realm provides its own implementation of Principal Object
> > >        Realm uses different table-structure than original =
DataSource
> > > Realm
> > >
> > > (something happens here?)
> > >
> > > Request Listener is called (expected: principal is not null ->
> > > FAILS!)
> > >
> > > (something happens here?)
> > >
> > > jsp/main.jsp is called, principal in request is not null -> can be
> > > dumped to the JSP view
> > >
> > >
> > > Following here is the used context.xml
> > > (...)
> > >
> >
> > BTW, if you want to run under debugger, the tips are here:
> > https://wiki.apache.org/tomcat/FAQ/Developing#Debugging
> >
> > Best regards,
> > Konstantin Kolinko
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> > For additional commands, e-mail: users-help@tomcat.apache.org
> >
> >
> > --
> > This message has been scanned for viruses and dangerous content by
> > MailScanner, and is believed to be clean.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>=20
>=20
> --
> This message has been scanned for viruses and dangerous content by
> MailScanner, and is believed to be clean.


------=_NextPart_000_0C53_01CD171A.13C7EB70
Content-Type: application/x-pkcs7-signature; name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIU/jCCBjQw
ggQcoAMCAQICASAwDQYJKoZIhvcNAQEFBQAwfTELMAkGA1UEBhMCSUwxFjAUBgNVBAoTDVN0YXJ0
Q29tIEx0ZC4xKzApBgNVBAsTIlNlY3VyZSBEaWdpdGFsIENlcnRpZmljYXRlIFNpZ25pbmcxKTAn
BgNVBAMTIFN0YXJ0Q29tIENlcnRpZmljYXRpb24gQXV0aG9yaXR5MB4XDTA3MTAyNDIxMDI1NVoX
DTE3MTAyNDIxMDI1NVowgYwxCzAJBgNVBAYTAklMMRYwFAYDVQQKEw1TdGFydENvbSBMdGQuMSsw
KQYDVQQLEyJTZWN1cmUgRGlnaXRhbCBDZXJ0aWZpY2F0ZSBTaWduaW5nMTgwNgYDVQQDEy9TdGFy
dENvbSBDbGFzcyAyIFByaW1hcnkgSW50ZXJtZWRpYXRlIENsaWVudCBDQTCCASIwDQYJKoZIhvcN
AQEBBQADggEPADCCAQoCggEBAMsohUWcASz7GfKrpTOMKqANy9BV7V0igWdGxA8IU77L3aTxErQ+
fcxtDYZ36Z6GH0YFn7fq5RADteP0AYzrCA+EQTfi8q1+kA3m0nwtwXG94M5sIqsvs7lRP1aycBke
/s5g9hJHryZ2acScnzczjBCAo7X1v5G3yw8MDP2m2RCye0KfgZ4nODerZJVzhAlOD9YejvAXZqHk
sw56HzElVIoYSZ3q4+RJuPXXfIoyby+Y2m1E+YzX5iCZXBx05gk6MKAW1vaw4/v2OOLy6FZH3XHH
tOkzUreG//CsFnB9+uaYSlR65cdGzTsmoIK8WH1ygoXhRBm98SD7Hf/r3FELNvUCAwEAAaOCAa0w
ggGpMA8GA1UdEwEB/wQFMAMBAf8wDgYDVR0PAQH/BAQDAgEGMB0GA1UdDgQWBBSuVYNv7DHKufcd
+q9rMfPIHeOsuzAfBgNVHSMEGDAWgBROC+8apEBbpRdphzDKNGhD0EGu8jBmBggrBgEFBQcBAQRa
MFgwJwYIKwYBBQUHMAGGG2h0dHA6Ly9vY3NwLnN0YXJ0c3NsLmNvbS9jYTAtBggrBgEFBQcwAoYh
aHR0cDovL3d3dy5zdGFydHNzbC5jb20vc2ZzY2EuY3J0MFsGA1UdHwRUMFIwJ6AloCOGIWh0dHA6
Ly93d3cuc3RhcnRzc2wuY29tL3Nmc2NhLmNybDAnoCWgI4YhaHR0cDovL2NybC5zdGFydHNzbC5j
b20vc2ZzY2EuY3JsMIGABgNVHSAEeTB3MHUGCysGAQQBgbU3AQIBMGYwLgYIKwYBBQUHAgEWImh0
dHA6Ly93d3cuc3RhcnRzc2wuY29tL3BvbGljeS5wZGYwNAYIKwYBBQUHAgEWKGh0dHA6Ly93d3cu
c3RhcnRzc2wuY29tL2ludGVybWVkaWF0ZS5wZGYwDQYJKoZIhvcNAQEFBQADggIBADqpJw3I07QW
ke9plNBpxUxcffc7nUrIQpJHDci91DFG7fVhHRkMZ1J+BKg5UNUxIFJ2Z9B90Micc/NXcs7kPBRd
n6XGO/vPc87Y6R+cWS9Nc9+fp3Enmsm94OxOwI9wn8qnr/6o3mD4noP9JphwUPTXwHovjavRnhUQ
HLfo/i2NG0XXgTHXS2Xm0kVUozXqpYpAdumMiB/vezj1QHQJDmUdPYMcp+reg9901zkyT3fDW/iv
JVv6pWtkh6Pw2ytZT7mvg7YhX3V50Nv860cV11mocUVcqBLv0gcT+HBDYtbuvexNftwNQKD5193A
7zN4vG7CTYkXxytSjKuXrpEatEiFPxWgb84nVj25SU5q/r1Xhwby6mLhkbaXslkVtwEWT3Van49r
KjlK4XrUKYYWtnfzq6aSak5u0Vpxd1rY79tWhD3EdCvOhNz/QplNa+VkIsrcp7+8ZhP1l1b2U6Ma
xIVteuVMD3X0vziIwr7jxYae9FZjbxlpUemqXjcC0QaFfN7qI0JsQMALL7iGRBg7K0CoOBzECdD3
fuZil5kU/LP9cr1BK31U0Uy651bFnAMMMkqhAChIbn0ei72VnbpSsrrSdF0BAGYQ8vyHae5aCg+H
75dVCV33K6FuxZrf09yTz+Vx/PkdRUYkXmZz/OTfyJXsUOUXrym6KvI2rYpccSk5MIIG9TCCBd2g
AwIBAgICCT8wDQYJKoZIhvcNAQEFBQAwgYwxCzAJBgNVBAYTAklMMRYwFAYDVQQKEw1TdGFydENv
bSBMdGQuMSswKQYDVQQLEyJTZWN1cmUgRGlnaXRhbCBDZXJ0aWZpY2F0ZSBTaWduaW5nMTgwNgYD
VQQDEy9TdGFydENvbSBDbGFzcyAyIFByaW1hcnkgSW50ZXJtZWRpYXRlIENsaWVudCBDQTAeFw0x
MDA2MzAxODE1NDdaFw0xMjA3MDEwOTM2NDFaMIHlMSAwHgYDVQQNExcyMTk5MjItZEtzMFk0eWsx
WFR3ajd5VzELMAkGA1UEBhMCREUxDzANBgNVBAgTBkhlc3NlbjERMA8GA1UEBxMIQmVuc2hlaW0x
HDAaBgNVBAoTE1NSUy1NYW5hZ2VtZW50IEdtYkgxLTArBgNVBAsTJFN0YXJ0Q29tIFZlcmlmaWVk
IENlcnRpZmljYXRlIE1lbWJlcjEXMBUGA1UEAxMOVGhvbWFzIFN0cmF1c3MxKjAoBgkqhkiG9w0B
CQEWG3Quc3RyYXVzc0BzcnMtbWFuYWdlbWVudC5kZTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCC
AQoCggEBAMan/r/869arZeTbuRAtXtkWdVLfZc4yZmoQSmi1o7hsvieLKpQsFzdgn1mZmkbWmSZE
4GskdOlFcEBMOpnn8RrSsuvC1tHTEObUXIJVe9xL1M1u99SdmmkRvbnkDB+EZL/5G96SsW5IpJFk
tXBQuTYqhRJZKBjJr2Vx1zdjY4WrTBcdd8Go7LDRXwIjF2ARHSu7BPy63BMbErnUhfAG8Pzd2koO
MttLKLle+uigut0mgVvV4ORDwg0L6xGQ/ryh577Au5iFT2NjmISBRPNVMbQ12lhfd1Y1FcGCsqTq
JWDagb9pbjpo5fUFrLWciRMyC+r91UpB5YNiVcX0X1NaLq8CAwEAAaOCAwQwggMAMAkGA1UdEwQC
MAAwCwYDVR0PBAQDAgSwMB0GA1UdJQQWMBQGCCsGAQUFBwMCBggrBgEFBQcDBDAdBgNVHQ4EFgQU
SFBSKK/gXGz7+UpP4+T3aj/IhrEwHwYDVR0jBBgwFoAUrlWDb+wxyrn3HfqvazHzyB3jrLswJgYD
VR0RBB8wHYEbdC5zdHJhdXNzQHNycy1tYW5hZ2VtZW50LmRlMIIBQgYDVR0gBIIBOTCCATUwggEx
BgsrBgEEAYG1NwECAjCCASAwLgYIKwYBBQUHAgEWImh0dHA6Ly93d3cuc3RhcnRzc2wuY29tL3Bv
bGljeS5wZGYwNAYIKwYBBQUHAgEWKGh0dHA6Ly93d3cuc3RhcnRzc2wuY29tL2ludGVybWVkaWF0
ZS5wZGYwgbcGCCsGAQUFBwICMIGqMBQWDVN0YXJ0Q29tIEx0ZC4wAwIBARqBkUxpbWl0ZWQgTGlh
YmlsaXR5LCBzZWUgc2VjdGlvbiAqTGVnYWwgTGltaXRhdGlvbnMqIG9mIHRoZSBTdGFydENvbSBD
ZXJ0aWZpY2F0aW9uIEF1dGhvcml0eSBQb2xpY3kgYXZhaWxhYmxlIGF0IGh0dHA6Ly93d3cuc3Rh
cnRzc2wuY29tL3BvbGljeS5wZGYwYwYDVR0fBFwwWjAroCmgJ4YlaHR0cDovL3d3dy5zdGFydHNz
bC5jb20vY3J0dTItY3JsLmNybDAroCmgJ4YlaHR0cDovL2NybC5zdGFydHNzbC5jb20vY3J0dTIt
Y3JsLmNybDCBjgYIKwYBBQUHAQEEgYEwfzA5BggrBgEFBQcwAYYtaHR0cDovL29jc3Auc3RhcnRz
c2wuY29tL3N1Yi9jbGFzczIvY2xpZW50L2NhMEIGCCsGAQUFBzAChjZodHRwOi8vd3d3LnN0YXJ0
c3NsLmNvbS9jZXJ0cy9zdWIuY2xhc3MyLmNsaWVudC5jYS5jcnQwIwYDVR0SBBwwGoYYaHR0cDov
L3d3dy5zdGFydHNzbC5jb20vMA0GCSqGSIb3DQEBBQUAA4IBAQDExaKVxBLZk7M94nEhKkhuqg4n
QiQ9kWG5jJH9qH23x8HrFYVOK0uZ7RJlyYZzblZRH1VhyiJEIGRwCYHy5fslfFYZVs6vJcJ5BSvj
H9yRmAs+JZNABl6dQ5VLjIIJv6rTHiOycrD93Ge1LOk+sg+WSCIEGHazvvU4HMqoeyhtZSKfGvOb
ShFMov1CkzJHHl9U1NWZXuhVp2WPsMCp2oQGUr8fy2hyPzqhfjse31zlkjDFCIgKw/ygnkjmqtJq
e9pjv5CLxjXJX7WJzuEP/4N4krQlLzHyL2LHgbn7AQ3Uw6XSjnfFavtaZo0hzS7tfuKCbGwIzP5e
5PplYumjubJPMIIHyTCCBbGgAwIBAgIBATANBgkqhkiG9w0BAQUFADB9MQswCQYDVQQGEwJJTDEW
MBQGA1UEChMNU3RhcnRDb20gTHRkLjErMCkGA1UECxMiU2VjdXJlIERpZ2l0YWwgQ2VydGlmaWNh
dGUgU2lnbmluZzEpMCcGA1UEAxMgU3RhcnRDb20gQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwHhcN
MDYwOTE3MTk0NjM2WhcNMzYwOTE3MTk0NjM2WjB9MQswCQYDVQQGEwJJTDEWMBQGA1UEChMNU3Rh
cnRDb20gTHRkLjErMCkGA1UECxMiU2VjdXJlIERpZ2l0YWwgQ2VydGlmaWNhdGUgU2lnbmluZzEp
MCcGA1UEAxMgU3RhcnRDb20gQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwggIiMA0GCSqGSIb3DQEB
AQUAA4ICDwAwggIKAoICAQDBiNsJvGxGfHiflXu1M5DycmLWwTYgIiRezul38kMKogZkpMyONvg4
5iPwbm2xPN1yo4UcodM9tDMr0y+v/uqwQVlntsQGfQqedIXWeUyAN3rfOQVSWff0G0ZDpNKFhdLD
cfN1YjS6LIp/Ho/u7TTQEceWzVI9ujPW3U3eCztKS5/CJi/6tRYccjV3yjxd5srhJosaNnZcAdt0
FCX+7bWgiA/deMotHweXMAEtcnn6RtYTKqi5pquDSR3l8u/d5AGOGAqPY1MWhWKpDhk6zLVmpsJr
dAfkK+F2PrRt2PZE4XNiHzvEvqBTViVsUQn3qqvKv3b9bZvzndu/PWa8DFaqr5hIlTpL36dYUNk4
dalb6kMMAv+Z6+hsTXBbKWWc3apdzK8BMewM69KN6Oqce+Zu9ydmDBpI125C4z/eIT574Q1w+2Oq
qGwaVLRcJXrJosmLFqa7LH4XXgVNWG4SHQHuEhANxjJ/GP/89PrNbpHoNkm+Gkhpi8KWTRoSsmkX
wQqQ1vp5Iki/untp+HDH+no32NgN0nZPV/+Qt+OR0t3vwmC3Zzrd/qqc8NSLf3Iizsafl7b4r4qg
EKjZ+xjGtrVcUjyJthkqcwEKDwOzEmDyei+B26Nu/yYwl/WL3YlXtq09s68rxbd2AvCl1iuahhQq
cvbjM4xdCUsT37uMdBNSSwIDAQABo4ICUjCCAk4wDAYDVR0TBAUwAwEB/zALBgNVHQ8EBAMCAa4w
HQYDVR0OBBYEFE4L7xqkQFulF2mHMMo0aEPQQa7yMGQGA1UdHwRdMFswLKAqoCiGJmh0dHA6Ly9j
ZXJ0LnN0YXJ0Y29tLm9yZy9zZnNjYS1jcmwuY3JsMCugKaAnhiVodHRwOi8vY3JsLnN0YXJ0Y29t
Lm9yZy9zZnNjYS1jcmwuY3JsMIIBXQYDVR0gBIIBVDCCAVAwggFMBgsrBgEEAYG1NwEBATCCATsw
LwYIKwYBBQUHAgEWI2h0dHA6Ly9jZXJ0LnN0YXJ0Y29tLm9yZy9wb2xpY3kucGRmMDUGCCsGAQUF
BwIBFilodHRwOi8vY2VydC5zdGFydGNvbS5vcmcvaW50ZXJtZWRpYXRlLnBkZjCB0AYIKwYBBQUH
AgIwgcMwJxYgU3RhcnQgQ29tbWVyY2lhbCAoU3RhcnRDb20pIEx0ZC4wAwIBARqBl0xpbWl0ZWQg
TGlhYmlsaXR5LCByZWFkIHRoZSBzZWN0aW9uICpMZWdhbCBMaW1pdGF0aW9ucyogb2YgdGhlIFN0
YXJ0Q29tIENlcnRpZmljYXRpb24gQXV0aG9yaXR5IFBvbGljeSBhdmFpbGFibGUgYXQgaHR0cDov
L2NlcnQuc3RhcnRjb20ub3JnL3BvbGljeS5wZGYwEQYJYIZIAYb4QgEBBAQDAgAHMDgGCWCGSAGG
+EIBDQQrFilTdGFydENvbSBGcmVlIFNTTCBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTANBgkqhkiG
9w0BAQUFAAOCAgEAFmyZ9GYMNPXQhV59CuzaEE44HF7fpiUFS5Eyweg78T3dRAlbB0mKKctmArex
mvclmAk8jhvh3TaHK0u7aNM5Zj2gJsfyOZEdUauCe37Vzlrk4gNXcGmXCPleWKYK34wGmkUWFjgK
Xlf2Ysd6AgXmvB618p70qSmD+LIU424oh0TDkBreOKk8rENNZEXO3SipXPJzewT4F+irsfMuXGRu
czE6Eri8sxHkfY+BUZo7jYn0TZNmezwD7dOaHZrzZVD1oNB1ny+v8OqCQ5j4aZyJecRDjkZy42Q2
Eq/3JR44iZB3fsNrarnDy0RLrHiQi+fHLB5LEUTINFInzQpdn4XBidUaePKVEFMy3YCEZnXZtWgo
+2EuvoSoOMCZEoalHmdkrQYuL6lwhceWD3yJZfWOQ1QOq92lgDmUYMA0yZZwLKMS9R9Ie70cfmu3
nZD0Ijuu+PwqyvqCUqDvr0tVk+vBtfAii6w0TiYiBKGHLHVKt+V9E9e4DGTANtLJL4YSjCMJwRuC
O3NJo2pXh5Tl1njFmUNj403gdy3hZZlyaQQaRwnmDwFWJPsfvw55qVguucQJAX6Vum0ABj6y6koQ
OdjQK/W/7HW/lwLFCRsI3FU34oH7N4RDYiDK51ZLZer+bMEkkyShNOsF/5oirpt9P/FlUQqmMGqz
9IgcgA38corog14xggQmMIIEIgIBATCBkzCBjDELMAkGA1UEBhMCSUwxFjAUBgNVBAoTDVN0YXJ0
Q29tIEx0ZC4xKzApBgNVBAsTIlNlY3VyZSBEaWdpdGFsIENlcnRpZmljYXRlIFNpZ25pbmcxODA2
BgNVBAMTL1N0YXJ0Q29tIENsYXNzIDIgUHJpbWFyeSBJbnRlcm1lZGlhdGUgQ2xpZW50IENBAgIJ
PzAJBgUrDgMCGgUAoIICZzAYBgkqhkiG9w0BCQMxCwYJKoZIhvcNAQcBMBwGCSqGSIb3DQEJBTEP
Fw0xMjA0MTAxMTAxNDNaMCMGCSqGSIb3DQEJBDEWBBTdpL8QpNWeDXCAvgpHqUGlAabdKzCBpAYJ
KwYBBAGCNxAEMYGWMIGTMIGMMQswCQYDVQQGEwJJTDEWMBQGA1UEChMNU3RhcnRDb20gTHRkLjEr
MCkGA1UECxMiU2VjdXJlIERpZ2l0YWwgQ2VydGlmaWNhdGUgU2lnbmluZzE4MDYGA1UEAxMvU3Rh
cnRDb20gQ2xhc3MgMiBQcmltYXJ5IEludGVybWVkaWF0ZSBDbGllbnQgQ0ECAgk/MIGmBgsqhkiG
9w0BCRACCzGBlqCBkzCBjDELMAkGA1UEBhMCSUwxFjAUBgNVBAoTDVN0YXJ0Q29tIEx0ZC4xKzAp
BgNVBAsTIlNlY3VyZSBEaWdpdGFsIENlcnRpZmljYXRlIFNpZ25pbmcxODA2BgNVBAMTL1N0YXJ0
Q29tIENsYXNzIDIgUHJpbWFyeSBJbnRlcm1lZGlhdGUgQ2xpZW50IENBAgIJPzCBtwYJKoZIhvcN
AQkPMYGpMIGmMAsGCWCGSAFlAwQBKjALBglghkgBZQMEARYwCgYIKoZIhvcNAwcwCwYJYIZIAWUD
BAECMA4GCCqGSIb3DQMCAgIAgDAHBgUrDgMCBzANBggqhkiG9w0DAgIBQDANBggqhkiG9w0DAgIB
KDAHBgUrDgMCGjALBglghkgBZQMEAgMwCwYJYIZIAWUDBAICMAsGCWCGSAFlAwQCATAKBggqhkiG
9w0CBTANBgkqhkiG9w0BAQEFAASCAQB38WADp9l/fAF1WQZhvh2Dip8IGveVRaTpXy8VG/3BA+TA
kbaPRi+kuBM1njdAJrf5FGZveAoQweCF+zg8mU2kWtSyKxsplyZqhQpSOLKSf9u6J0YU5WhrmAvP
K4zCW77DH21q30I1+9sC5/B7LeOw2eAoWQDJyyX39jfkhkpHY9G61mL4bQ9OSUTkf1H0Z0DLy/b4
sfs/KO46PwEOO246Ac1rvbp+yAMjE5AfSh70WhElIx7Wd1YEVMh1MdncdAPmElZDSGRbpk38TWpn
mV6dfAqxL4w9n7lUHj199aajGzyM7M3X8zC5AI4wEgQVR01Yi42Am5k9NLh5MldZNVGYAAAAAAAA

------=_NextPart_000_0C53_01CD171A.13C7EB70--

From users-return-233455-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 10 11:35:08 2012
Return-Path: <users-return-233455-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0CBAF9130
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 10 Apr 2012 11:35:08 +0000 (UTC)
Received: (qmail 82332 invoked by uid 500); 10 Apr 2012 11:35:04 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 82266 invoked by uid 500); 10 Apr 2012 11:35:04 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 82257 invoked by uid 99); 10 Apr 2012 11:35:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 11:35:04 +0000
X-ASF-Spam-Status: No, hits=-2.8 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sandeep.kaur2@rsa.com designates 128.222.32.20 as permitted sender)
Received: from [128.222.32.20] (HELO mexforward.lss.emc.com) (128.222.32.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 11:34:56 +0000
Received: from hop04-l1d11-si01.isus.emc.com (HOP04-L1D11-SI01.isus.emc.com [10.254.111.54])
	by mexforward.lss.emc.com (Switch-3.4.3/Switch-3.4.3) with ESMTP id q3ABYRS4015618
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <users@tomcat.apache.org>; Tue, 10 Apr 2012 07:34:34 -0400
Received: from mailhub.lss.emc.com (mailhub.lss.emc.com [10.254.221.145]) by hop04-l1d11-si01.isus.emc.com (RSA Interceptor) for <users@tomcat.apache.org>; Tue, 10 Apr 2012 07:34:10 -0400
Received: from mxhub30.corp.emc.com (mxhub30.corp.emc.com [128.222.70.170])
	by mailhub.lss.emc.com (Switch-3.4.3/Switch-3.4.3) with ESMTP id q3ABY9Fc031466
	for <users@tomcat.apache.org>; Tue, 10 Apr 2012 07:34:09 -0400
Received: from MX03A.corp.emc.com ([169.254.1.29]) by mxhub30.corp.emc.com
 ([128.222.70.170]) with mapi; Tue, 10 Apr 2012 07:34:08 -0400
From: <sandeep.kaur2@rsa.com>
To: <users@tomcat.apache.org>
Date: Tue, 10 Apr 2012 07:37:23 -0400
Subject: Tomcat7: French Chars not properly displaying
Thread-Topic: Tomcat7: French Chars not properly displaying
Thread-Index: Ac0XB8pFbYUpuO70RwGzjUE06dvvBwABnalg
Message-ID: <EDD800F0B629B24FA547EB5F5631E9D12EDCCCBFFE@MX03A.corp.emc.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: yes
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: multipart/signed; protocol="application/x-pkcs7-signature";
	micalg=SHA1; boundary="----=_NextPart_000_00C4_01CD173C.655CF580"
MIME-Version: 1.0
X-EMM-MHVC: 1
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_00C4_01CD173C.655CF580
Content-Type: multipart/alternative;
	boundary="----=_NextPart_001_00C5_01CD173C.655CF580"


------=_NextPart_001_00C5_01CD173C.655CF580
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi,

 

In our product, we were using the default tomcat 6 installation to store our
web pages and used to get the French character displayed properly using our
AGENT configuration.

 

However, as we upgraded from tomcat 6 to tomcat 7, the French characters are
not getting displayed  using the same agent configuration and moving the
WebPages back to tomcat 6 make the characters displayed properly in French
format on the browser.

 

I tried googling if there is any difference in tomcat configuration files
when compared to tomcat 6 and tomcat 7 (specifically server.xml) but could
not find the exact cause of the issue.

 

Could you please throw some light with your knowledge and expertise

 

Regards,

Sandeep Kaur |Software Quality Engineer 

 


------=_NextPart_001_00C5_01CD173C.655CF580
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<html xmlns:v=3D"urn:schemas-microsoft-com:vml" =
xmlns:o=3D"urn:schemas-microsoft-com:office:office" =
xmlns:w=3D"urn:schemas-microsoft-com:office:word" =
xmlns:x=3D"urn:schemas-microsoft-com:office:excel" =
xmlns:p=3D"urn:schemas-microsoft-com:office:powerpoint" =
xmlns:a=3D"urn:schemas-microsoft-com:office:access" =
xmlns:dt=3D"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882" =
xmlns:s=3D"uuid:BDC6E3F0-6DA3-11d1-A2A3-00AA00C14882" =
xmlns:rs=3D"urn:schemas-microsoft-com:rowset" xmlns:z=3D"#RowsetSchema" =
xmlns:b=3D"urn:schemas-microsoft-com:office:publisher" =
xmlns:ss=3D"urn:schemas-microsoft-com:office:spreadsheet" =
xmlns:c=3D"urn:schemas-microsoft-com:office:component:spreadsheet" =
xmlns:odc=3D"urn:schemas-microsoft-com:office:odc" =
xmlns:oa=3D"urn:schemas-microsoft-com:office:activation" =
xmlns:html=3D"http://www.w3.org/TR/REC-html40" =
xmlns:q=3D"http://schemas.xmlsoap.org/soap/envelope/" =
xmlns:rtc=3D"http://microsoft.com/officenet/conferencing" =
xmlns:D=3D"DAV:" xmlns:Repl=3D"http://schemas.microsoft.com/repl/" =
xmlns:mt=3D"http://schemas.microsoft.com/sharepoint/soap/meetings/" =
xmlns:x2=3D"http://schemas.microsoft.com/office/excel/2003/xml" =
xmlns:ppda=3D"http://www.passport.com/NameSpace.xsd" =
xmlns:ois=3D"http://schemas.microsoft.com/sharepoint/soap/ois/" =
xmlns:dir=3D"http://schemas.microsoft.com/sharepoint/soap/directory/" =
xmlns:ds=3D"http://www.w3.org/2000/09/xmldsig#" =
xmlns:dsp=3D"http://schemas.microsoft.com/sharepoint/dsp" =
xmlns:udc=3D"http://schemas.microsoft.com/data/udc" =
xmlns:xsd=3D"http://www.w3.org/2001/XMLSchema" =
xmlns:sub=3D"http://schemas.microsoft.com/sharepoint/soap/2002/1/alerts/"=
 xmlns:ec=3D"http://www.w3.org/2001/04/xmlenc#" =
xmlns:sp=3D"http://schemas.microsoft.com/sharepoint/" =
xmlns:sps=3D"http://schemas.microsoft.com/sharepoint/soap/" =
xmlns:xsi=3D"http://www.w3.org/2001/XMLSchema-instance" =
xmlns:udcs=3D"http://schemas.microsoft.com/data/udc/soap" =
xmlns:udcxf=3D"http://schemas.microsoft.com/data/udc/xmlfile" =
xmlns:udcp2p=3D"http://schemas.microsoft.com/data/udc/parttopart" =
xmlns:wf=3D"http://schemas.microsoft.com/sharepoint/soap/workflow/" =
xmlns:dsss=3D"http://schemas.microsoft.com/office/2006/digsig-setup" =
xmlns:dssi=3D"http://schemas.microsoft.com/office/2006/digsig" =
xmlns:mdssi=3D"http://schemas.openxmlformats.org/package/2006/digital-sig=
nature" =
xmlns:mver=3D"http://schemas.openxmlformats.org/markup-compatibility/2006=
" xmlns:m=3D"http://schemas.microsoft.com/office/2004/12/omml" =
xmlns:mrels=3D"http://schemas.openxmlformats.org/package/2006/relationshi=
ps" xmlns:spwp=3D"http://microsoft.com/sharepoint/webpartpages" =
xmlns:ex12t=3D"http://schemas.microsoft.com/exchange/services/2006/types"=
 =
xmlns:ex12m=3D"http://schemas.microsoft.com/exchange/services/2006/messag=
es" =
xmlns:pptsl=3D"http://schemas.microsoft.com/sharepoint/soap/SlideLibrary/=
" =
xmlns:spsl=3D"http://microsoft.com/webservices/SharePointPortalServer/Pub=
lishedLinksService" xmlns:Z=3D"urn:schemas-microsoft-com:" =
xmlns:st=3D"&#1;" xmlns=3D"http://www.w3.org/TR/REC-html40"><head><meta =
http-equiv=3DContent-Type content=3D"text/html; =
charset=3Dus-ascii"><meta name=3DGenerator content=3D"Microsoft Word 12 =
(filtered medium)"><style><!--
/* Font Definitions */
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:"Trebuchet MS";
	panose-1:2 11 6 3 2 2 2 2 2 4;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-priority:99;
	color:purple;
	text-decoration:underline;}
span.EmailStyle17
	{mso-style-type:personal;
	font-family:"Calibri","sans-serif";
	color:windowtext;}
span.EmailStyle18
	{mso-style-type:personal-reply;
	font-family:"Calibri","sans-serif";
	color:#1F497D;}
.MsoChpDefault
	{mso-style-type:export-only;
	font-size:10.0pt;}
@page WordSection1
	{size:8.5in 11.0in;
	margin:1.0in 1.0in 1.0in 1.0in;}
div.WordSection1
	{page:WordSection1;}
--></style><!--[if gte mso 9]><xml>
<o:shapedefaults v:ext=3D"edit" spidmax=3D"1026" />
</xml><![endif]--><!--[if gte mso 9]><xml>
<o:shapelayout v:ext=3D"edit">
<o:idmap v:ext=3D"edit" data=3D"1" />
</o:shapelayout></xml><![endif]--></head><body lang=3DEN-US link=3Dblue =
vlink=3Dpurple><div class=3DWordSection1><p =
class=3DMsoNormal>Hi,<o:p></o:p></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><p class=3DMsoNormal>In our =
product, we were using the default tomcat 6 installation to store our =
web pages and used to get the French character displayed properly using =
our AGENT configuration.<o:p></o:p></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><p class=3DMsoNormal>However, as =
we upgraded from tomcat 6 to tomcat 7, the French characters are not =
getting displayed&nbsp; using the same agent configuration and moving =
the WebPages back to tomcat 6 make the characters displayed properly in =
French format on the browser.<o:p></o:p></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><p class=3DMsoNormal>I tried =
googling if there is any difference in tomcat configuration files when =
compared to tomcat 6 and tomcat 7 (specifically server.xml) but could =
not find the exact cause of the issue.<o:p></o:p></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p><p class=3DMsoNormal>Could you =
please throw some light with your knowledge and =
expertise<o:p></o:p></p><p class=3DMsoNormal><o:p>&nbsp;</o:p></p><p =
class=3DMsoNormal><span style=3D'font-size:10.0pt;font-family:"Trebuchet =
MS","sans-serif"'>Regards,<o:p></o:p></span></p><p =
class=3DMsoNormal><span style=3D'font-size:10.0pt;font-family:"Trebuchet =
MS","sans-serif"'>Sandeep Kaur |Software Quality Engineer =
<o:p></o:p></span></p><p =
class=3DMsoNormal><o:p>&nbsp;</o:p></p></div></body></html>
------=_NextPart_001_00C5_01CD173C.655CF580--

------=_NextPart_000_00C4_01CD173C.655CF580
Content-Type: application/x-pkcs7-signature; name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIYsDCCA2Ew
ggJJoAMCAQICEAoBAQEAAAJ8AAAACgAAAAIwDQYJKoZIhvcNAQEFBQAwOjEZMBcGA1UEChMQUlNB
IFNlY3VyaXR5IEluYzEdMBsGA1UECxMUUlNBIFNlY3VyaXR5IDIwNDggVjMwHhcNMDEwMjIyMjAz
OTIzWhcNMjYwMjIyMjAzOTIzWjA6MRkwFwYDVQQKExBSU0EgU2VjdXJpdHkgSW5jMR0wGwYDVQQL
ExRSU0EgU2VjdXJpdHkgMjA0OCBWMzCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALeP
VXHSgN17aXmn8BhQMjxiZ/YKlQfd5hvzntnSQVRrrZ98vhnN+0arQWgeGOpVyC+ReIko+ycpYP/f
j4w7yUmbtaSUzgHqPrVje38m/RndwCG9hNEtT0bDTtzYNzk7KK/LnRrqK68hpcEjIri4G1oTh1eD
0fAg5+hPI0KwAKV9ienpYXOUmHEmvC1q4PdN8PG2KjgxgQ0p4QDBUQ9MUvgEWqp9ctO4hyq7YxAD
KrOhTw1aXka3PQ71dOyZn/k9JIGIpt1gVOiVNj3GCZOaoxKAAFWZGUe90KV8w7r7H/f1D/isubX0
N5gTGN6FW7cMgjuHb5U5WDDabgFoFyLMwAsCAwEAAaNjMGEwDwYDVR0TAQH/BAUwAwEB/zAOBgNV
HQ8BAf8EBAMCAQYwHwYDVR0jBBgwFoAUB8NRMKSq6UWuNST6/yQsM9CxnYwwHQYDVR0OBBYEFAfD
UTCkqulFrjUk+v8kLDPQsZ2MMA0GCSqGSIb3DQEBBQUAA4IBAQBfPoZ2brg1PE42HB55mL/91RIR
eVIO7jGJvN1/+dHGFSHoigFUDTr7VLnWY9SxqpZNokJN1FMfixDef2W+YBMncYikc+OEY9GkVeFQ
k+YbDnnQZ7xGyL8/Fw2V5saQad7ntC/elX3QEj89Pn9NPxRo9RFQ1cH0kKUIHTFg/2CMI1QKr/6h
bsXReipoeM8eggogtB+t5YWyamh1Tq0lN5SFvr2h1Oq3DEs8negSAPBfrA3hrHBjc/d/eZ8yJUJ0
BYAov73BJJZYFbEXIemJS9sHiGf0Fa1wPi9NhTvCt9v+mGgjieF0D970xYRjKRvMywfJAKSp18Ii
T2fXd+wgBWHeMIIEzDCCA7SgAwIBAgIQfwkpTisxI69dQcDR3n6N2TANBgkqhkiG9w0BAQUFADA6
MRkwFwYDVQQKExBSU0EgU2VjdXJpdHkgSW5jMR0wGwYDVQQLExRSU0EgU2VjdXJpdHkgMjA0OCBW
MzAeFw0xMTAzMDMyMDUyMTVaFw0xOTA0MDExNDQ1MzlaMIGXMQswCQYDVQQGEwJVUzEWMBQGA1UE
CBMNTWFzc2FjaHVzZXR0czEQMA4GA1UEBxMHQmVkZm9yZDEZMBcGA1UEChMQUlNBIFNlY3VyaXR5
IExMQzElMCMGA1UECxMcR2xvYmFsIFNlY3VyaXR5IE9yZ2FuaXphdGlvbjEcMBoGA1UEAxMTUlNB
IENvcnBvcmF0ZSBDQSB2MjCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBALaLCcEh7lhj
dqYo6ryZ8oHK4kJRmQuxfwMa/3PE1Vd4U7U5x15UuSX+qd78hnEdR6yGGxhmY8U2SDG31u+yJD9o
OpXFQm6/A4xzItwfcs6SD3Gt6nI/Oa6M0M/7MjPqSc1aUUm2NFiyb6DjotYLDzeAVCqF+4V/Dgc2
QdO1FZeFUCcb5lMqkVAr+O3uAEZEmtD3Cr06YavA38fxeWCiPoheUuWuAQcvOdEnSzJFm6GM8yBJ
l9J1cAibE6c4DCl+eHj4M+O/ON2fFVb/lQdS4xO7cSZ9fKGCI7kWr0/7ssSjPsIIGpg0hLRZ35aZ
fCK1fFLi9VKvIcTYTrA8Gf9bIGsCAwEAAaOCAW4wggFqMB8GA1UdIwQYMBaAFAfDUTCkqulFrjUk
+v8kLDPQsZ2MMBIGA1UdEwEB/wQIMAYBAf8CAQMwcAYDVR0fBGkwZzBloGOgYYZfaHR0cDovL3d3
dy5yc2FzZWN1cml0eS5jb20vcHJvZHVjdHMva2Vvbi9yZXBvc2l0b3J5L2NlcnRpZmljYXRlX3N0
YXR1cy9SU0FfU2VjdXJpdHlfMjA0OF92My5DUkwwHQYDVR0OBBYEFHMbOEsly1qOvQLs310p9hB0
DtiYMIGRBgNVHSAEgYkwgYYwgYMGCSqGSIb3DQUGATB2MC4GCCsGAQUFBwIBFiJodHRwOi8vY2Eu
cnNhc2VjdXJpdHkuY29tL0NQUy5odG1sMEQGCCsGAQUFBwICMDgwFxYQUlNBIFNlY3VyaXR5IExM
QzADAgEBGh1DUFMgSW5jb3Jwb3JhdGVkIGJ5IHJlZmVyZW5jZTAOBgNVHQ8BAf8EBAMCAYYwDQYJ
KoZIhvcNAQEFBQADggEBAHGIVCAjCZ+z2vRElolRsLsz4L/js0Zm019rr/+eFks5VnSf5T0HJj7Z
tzjtna/+O5b01L8L6Fz64Yui+h/cnxvDwQrhzajbiMiN/JFH+kNOUJ9LcInBkmu45d98h+EQw3Yz
XwfnHYaXLArfgeY3CP8AYi0pxXEXf0bH8Prl+P0n4SOUqxh6J0GIz/haW1+usvMscB7lCpJ2loo9
+TmRn3WQrokgr1ILm/3apel6ydpkoFUxEoP5a1806Z7SD9KljN+Vc9o521VkMtnzLlDEkn05by/p
QNdlidY7eV7xcpCvuI6qFzyfHdI3G0/Vao0L0os6lEwb5PSa1IysLlHT0uUwggT+MIID5qADAgEC
AhBiTV1a7zr4E+gcgJ4lG6TBMA0GCSqGSIb3DQEBBQUAMIGXMQswCQYDVQQGEwJVUzEWMBQGA1UE
CBMNTWFzc2FjaHVzZXR0czEQMA4GA1UEBxMHQmVkZm9yZDEZMBcGA1UEChMQUlNBIFNlY3VyaXR5
IExMQzElMCMGA1UECxMcR2xvYmFsIFNlY3VyaXR5IE9yZ2FuaXphdGlvbjEcMBoGA1UEAxMTUlNB
IENvcnBvcmF0ZSBDQSB2MjAeFw0xMTAzMTAyMjQwMDRaFw0xOTAyMjgyMTU2MzNaMIGeMQswCQYD
VQQGEwJVUzEWMBQGA1UECBMNTWFzc2FjaHVzZXR0czEQMA4GA1UEBxMHQmVkZm9yZDEZMBcGA1UE
ChMQUlNBIFNlY3VyaXR5IExMQzElMCMGA1UECxMcR2xvYmFsIFNlY3VyaXR5IE9yZ2FuaXphdGlv
bjEjMCEGA1UEAxMaUlNBIENsYXNzIDIgUGVyc29uYWwgQ0EgdjIwggEiMA0GCSqGSIb3DQEBAQUA
A4IBDwAwggEKAoIBAQDNEVsNPFZOP83bMzCpUDGnf/5IDIQvVRhDHkyrkbv5X1ih4xdTsSdzTDrj
LUxIzC7nJswCv+jBaWWm1YoqzBXqQl2/Hl6T5Bt3HBT302GSYamtKcCWve25DoJav+dJd9U/XkCq
SSNN7DNVXkJrKC7Zq7OS6/O308pZNkCRJJfMRrodgSx1NoQYZJCfufTOshslVSVhj3Ar274qmuf8
iqM0RR5OMpm7t2dtHzvYJPHR3+HwfQ+s64YBC7NBrBLOYMeq8tzkPKzyITXhwopgbM6gbp+Z8qX5
/lo4Y3OEm7ED51iDqdruRoRnfTQGKdZJT7IYGLH+x0roRKmYKP/2HRNpAgMBAAGjggE7MIIBNzAP
BgNVHRMECDAGAQH/AgECMIGRBgNVHSAEgYkwgYYwgYMGCSqGSIb3DQUHAjB2MC4GCCsGAQUFBwIB
FiJodHRwOi8vY2EucnNhc2VjdXJpdHkuY29tL0NQUy5odG1sMEQGCCsGAQUFBwICMDgwFxYQUlNB
IFNlY3VyaXR5IExMQzADAgEBGh1DUFMgSW5jb3Jwb3JhdGVkIGJ5IHJlZmVyZW5jZTBABgNVHR8E
OTA3MDWgM6Axhi9odHRwOi8vY3JsLnJzYXNlY3VyaXR5LmNvbS9SU0FDb3Jwb3JhdGVDQXYyLmNy
bDAOBgNVHQ8BAf8EBAMCAYYwHQYDVR0OBBYEFBQw62v19Em1aFJ1ptu9rlvIrH1MMB8GA1UdIwQY
MBaAFHMbOEsly1qOvQLs310p9hB0DtiYMA0GCSqGSIb3DQEBBQUAA4IBAQCPepLT4buLa9p5VwF1
OW2YUwliCqxecs0CxRGJVR4cwvOuMeXxutP+m51n3vzseGkM0d1fmA9JTz8X+5LFdRD12Iw124oj
79QA7NKhO/xoPgbo0QxgnvHS15o94BPvFiZE6QGUjkHs9/hDvU+eIx7OG+Kzxt47vZZef+fJF0+s
ZgEDIMXXPXAtJW3xg/JhPrl4z0L7gmjgO+KxV0cyxaDrk6SEW5zZCqAcLehnW7MH8vvlzMsQ6pVr
f1g8xMCJonyxow9AwXGyQ0z1866qbJ8t+nQC/sGx3msJVHQg1JyjOWF4PMm8DdeUt+qUrSFRLY4J
MroY51gM90nnhtijtleCMIIFsTCCBJmgAwIBAgIRAKh93GZo93oAFocH2CHEqHUwDQYJKoZIhvcN
AQEFBQAwgZ4xCzAJBgNVBAYTAlVTMRYwFAYDVQQIEw1NYXNzYWNodXNldHRzMRAwDgYDVQQHEwdC
ZWRmb3JkMRkwFwYDVQQKExBSU0EgU2VjdXJpdHkgTExDMSUwIwYDVQQLExxHbG9iYWwgU2VjdXJp
dHkgT3JnYW5pemF0aW9uMSMwIQYDVQQDExpSU0EgQ2xhc3MgMiBQZXJzb25hbCBDQSB2MjAeFw0x
MjAzMzAwNzM2MjVaFw0xNDAzMzAwNzM2MjVaMIHlMRMwEQYKCZImiZPyLGQBGRYDY29tMRMwEQYK
CZImiZPyLGQBGRYDZW1jMRgwFgYDVQQKEw9FTUMgQ29ycG9yYXRpb24xDDAKBgNVBAsTA1JTQTEV
MBMGA1UECxMMQXNpYS9QYWNpZmljMRQwEgYDVQQLEwtFbmdpbmVlcmluZzEPMA0GA1UEBRMGMTA3
Njk3MRYwFAYKCZImiZPyLGQBARMGa2F1cnMyMRUwEwYDVQQDEwxTYW5kZWVwIEthdXIxJDAiBgkq
hkiG9w0BCQEWFXNhbmRlZXAua2F1cjJAcnNhLmNvbTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCC
AQoCggEBANsy4iQyy1RdbX1diZTzfZgQZ9o6tIJxjbOaDdLcjyVaT09Lt1LoULuQ2qMYpo5/xX8K
8JIP/E9f0sqHYorYs6UU2cNe0qJ5CbP15qmJb28NEWCeeSkZttL4cdS8mkg0U23Zlml0XPegxO2M
aKV/ssfBGzuhglHES/rpuoscYrAnBYkmWzQEUbnyhY1g/aA1Ba1gW/quzlJpldfNDe5vNEKdP0FL
xcLxFKcM7QFnMiAsLR0g39MBXvBTpisD1SN0Z24rKNAkXQvQIDIOxU5ckKtJ4DE1op7AC4Jd5Wvk
ERCqNiMEzaacVKOCmjFng43YBn1e5oqYZwCAmkmw53tYMhcCAwEAAaOCAZ8wggGbMB8GA1UdIwQY
MBaAFBQw62v19Em1aFJ1ptu9rlvIrH1MMIGRBgNVHSAEgYkwgYYwgYMGCSqGSIb3DQUHBTB2MC4G
CCsGAQUFBwIBFiJodHRwOi8vY2EucnNhc2VjdXJpdHkuY29tL0NQUy5odG1sMEQGCCsGAQUFBwIC
MDgwFxYQUlNBIFNlY3VyaXR5IExMQzADAgEBGh1DUFMgSW5jb3Jwb3JhdGVkIGJ5IHJlZmVyZW5j
ZTApBgNVHSUEIjAgBgorBgEEAYI3FAICBggrBgEFBQcDAgYIKwYBBQUHAwQwQAYDVR0RBDkwN4EV
c2FuZGVlcC5rYXVyMkByc2EuY29toB4GCisGAQQBgjcUAgOgEAwOa2F1cnMyQGVtYy5jb20wDgYD
VR0PAQH/BAQDAgeAMEgGA1UdHwRBMD8wPaA7oDmGN2h0dHA6Ly9jcmwucnNhc2VjdXJpdHkuY29t
OjgwL1JTQUNsYXNzMlBlcnNvbmFsQ0F2Mi5jcmwwHQYDVR0OBBYEFM9NJk+6f8xbHgLrJu8KY4/R
apN2MA0GCSqGSIb3DQEBBQUAA4IBAQAhqTYaM0iqiomxM6mo+9V+iWwOPZocGIgGjCj099eFdpEP
1ZykUc17UMXEwU5tILYoUKkiPqYpUX0aJImgj2O47C0+fDCfAG2IYjvRlAPZ4sUDpdcS96EXoMLY
biF6TcTvsmSkD1+N5qe9CMgSn6UhHEhA/6ZmP55LXybjIzDkAY9MNkCLyVKTWqfuFf71TaV7Sgrn
dicDm4E6Faf3jhr50gGWiIgjhn8iZL21PzVvHvwtJe1p5a2Cj5wS8NwBet7VZIFuThxGYKVUYkh8
wyksj91hCuOROsZPLVvjU2jnFBsbxVLNtx8H80z6qkFK/PtJqny3RirCOXCudIMTkIZ+MIIFwDCC
BKigAwIBAgIQDW7plqWAUizuLv0HT2Ij/jANBgkqhkiG9w0BAQUFADCBnjELMAkGA1UEBhMCVVMx
FjAUBgNVBAgTDU1hc3NhY2h1c2V0dHMxEDAOBgNVBAcTB0JlZGZvcmQxGTAXBgNVBAoTEFJTQSBT
ZWN1cml0eSBMTEMxJTAjBgNVBAsTHEdsb2JhbCBTZWN1cml0eSBPcmdhbml6YXRpb24xIzAhBgNV
BAMTGlJTQSBDbGFzcyAyIFBlcnNvbmFsIENBIHYyMB4XDTEyMDMzMDA3MzYyOVoXDTE0MDMzMDA3
MzYxNlowgekxEzARBgoJkiaJk/IsZAEZFgNjb20xEzARBgoJkiaJk/IsZAEZFgNlbWMxGDAWBgNV
BAoTD0VNQyBDb3Jwb3JhdGlvbjEMMAoGA1UECxMDUlNBMRUwEwYDVQQLEwxBc2lhL1BhY2lmaWMx
FDASBgNVBAsTC0VuZ2luZWVyaW5nMQ8wDQYDVQQFEwYxMDc2OTcxFjAUBgoJkiaJk/IsZAEBEwZr
YXVyczIxGTAXBgNVBAMTEFNhbmRlZXAgS2F1ci1FbmMxJDAiBgkqhkiG9w0BCQEWFXNhbmRlZXAu
a2F1cjJAcnNhLmNvbTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAKbjjN7suS0/73xi
cKSP1ihq9gr0J4cODCKGmHucfA6MhxSsV5olRTYYfw2LOZY1Z2V+h6vSZb6vdt9HPR8ryK6jTfmm
qvYfZIbbgOT8Vkypu0wG/kn53TziCse9e4GzbDTkqS53mA7xPqy/SveSo9A31i+Icpv7MFmpfgvZ
jg1BHsFOg+TYq/VQbFNDPRR1ExzTqi8OuJCgwZ+w+44IUb2HI3L7pap+sJPRPH9SLWyxn7pcen5t
rzkinQ52ILiekSxyXVBnNdQk5s8BNcnf3Kj7xDJyWMLrLmXqkuxYsG0pzfYCWM4kgbcGuUuAwacv
e/1Ms2lHsJZLsvuko0367gUCAwEAAaOCAaswggGnMDUGA1UdJQQuMCwGCisGAQQBgjcUAgIGCCsG
AQUFBwMCBggrBgEFBQcDBAYKKwYBBAGCNwoDBDAfBgNVHSMEGDAWgBQUMOtr9fRJtWhSdabbva5b
yKx9TDCBkQYDVR0gBIGJMIGGMIGDBgkqhkiG9w0FBwUwdjAuBggrBgEFBQcCARYiaHR0cDovL2Nh
LnJzYXNlY3VyaXR5LmNvbS9DUFMuaHRtbDBEBggrBgEFBQcCAjA4MBcWEFJTQSBTZWN1cml0eSBM
TEMwAwIBARodQ1BTIEluY29ycG9yYXRlZCBieSByZWZlcmVuY2UwQAYDVR0RBDkwN4EVc2FuZGVl
cC5rYXVyMkByc2EuY29toB4GCisGAQQBgjcUAgOgEAwOa2F1cnMyQGVtYy5jb20wSAYDVR0fBEEw
PzA9oDugOYY3aHR0cDovL2NybC5yc2FzZWN1cml0eS5jb206ODAvUlNBQ2xhc3MyUGVyc29uYWxD
QXYyLmNybDAdBgNVHQ4EFgQURiFZvhBY5OQ6oxA+M2ApTRbQBF8wDgYDVR0PAQH/BAQDAgM4MA0G
CSqGSIb3DQEBBQUAA4IBAQCIUnMyjEb5LUMmTN08LjZdHApicIbJpdIpK8WoaWwz2/QcIbpyJRyk
5TKfxGJYmsNDLtwfRAVWL/sW+Pdjk0RrzhjmliMRe9GA0WSiq3kKdxbUcVzbtejX+L3Fh/ooiAQt
4G0D0AGBIDCVM9sCGZt550OD9N2/Pz98/vwROjxG2PLUa9JVqsz0ooqaYHPmtx+CJfJ7iLFh145T
kav5r+EkIfR7WxGPjHm/INVXNSU1Ip0XSNY1YIPUyMq+5yJtTwdE6ctNNWfN299HvfPaW7cOxhhe
/GNqAX9ERm8uTHjCbvdora/s+PuyZhQPI4cKPXgBKv9LBJcs2/0rnCOTKtfgMYIENjCCBDICAQEw
gbQwgZ4xCzAJBgNVBAYTAlVTMRYwFAYDVQQIEw1NYXNzYWNodXNldHRzMRAwDgYDVQQHEwdCZWRm
b3JkMRkwFwYDVQQKExBSU0EgU2VjdXJpdHkgTExDMSUwIwYDVQQLExxHbG9iYWwgU2VjdXJpdHkg
T3JnYW5pemF0aW9uMSMwIQYDVQQDExpSU0EgQ2xhc3MgMiBQZXJzb25hbCBDQSB2MgIRAKh93GZo
93oAFocH2CHEqHUwCQYFKw4DAhoFAKCCAlYwGAYJKoZIhvcNAQkDMQsGCSqGSIb3DQEHATAcBgkq
hkiG9w0BCQUxDxcNMTIwNDEwMTEzNzIyWjAjBgkqhkiG9w0BCQQxFgQUllo5pA5crXtc6BNwvITm
T4hBA7MwZwYJKoZIhvcNAQkPMVowWDAKBggqhkiG9w0DBzAOBggqhkiG9w0DAgICAIAwDQYIKoZI
hvcNAwICAUAwBwYFKw4DAgcwDQYIKoZIhvcNAwICASgwBwYFKw4DAhowCgYIKoZIhvcNAgUwgcQG
CSsGAQQBgjcQBDGBtjCBszCBnjELMAkGA1UEBhMCVVMxFjAUBgNVBAgTDU1hc3NhY2h1c2V0dHMx
EDAOBgNVBAcTB0JlZGZvcmQxGTAXBgNVBAoTEFJTQSBTZWN1cml0eSBMTEMxJTAjBgNVBAsTHEds
b2JhbCBTZWN1cml0eSBPcmdhbml6YXRpb24xIzAhBgNVBAMTGlJTQSBDbGFzcyAyIFBlcnNvbmFs
IENBIHYyAhANbumWpYBSLO4u/QdPYiP+MIHGBgsqhkiG9w0BCRACCzGBtqCBszCBnjELMAkGA1UE
BhMCVVMxFjAUBgNVBAgTDU1hc3NhY2h1c2V0dHMxEDAOBgNVBAcTB0JlZGZvcmQxGTAXBgNVBAoT
EFJTQSBTZWN1cml0eSBMTEMxJTAjBgNVBAsTHEdsb2JhbCBTZWN1cml0eSBPcmdhbml6YXRpb24x
IzAhBgNVBAMTGlJTQSBDbGFzcyAyIFBlcnNvbmFsIENBIHYyAhANbumWpYBSLO4u/QdPYiP+MA0G
CSqGSIb3DQEBAQUABIIBAE+doqf7Vr9zqxOueitoCN9mpOhnPAibcKPdjY1MCTYM/8nxyErCYEMi
pdoCoLsInVP5iYGGxr2Sp8SfysDZhUNInRRV5u6InVkZq2VIOO+07TPiVmtl2ObopsiAY87A2O/v
P90HBD3pE9tmENI+oSFHduG91NGOlAOCrQnxEK+X1Ijr3QTlEMJLie8LPGVJofjKLAlVf44rmilm
jYdmxRK/j+tPq5Vf3BVq+8+xlwJu1gRKe+rVImfhCFM3NItGF6S6U2q05TltsYUaYWNGqUmqTGdz
OUmDEeZoWiU2ZKx+fz2QvjLtMjwBh1w7FnhKGc4Np+GndQrr2Vo05nC7gtgAAAAAAAA=

------=_NextPart_000_00C4_01CD173C.655CF580--

From users-return-233456-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 10 11:48:45 2012
Return-Path: <users-return-233456-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6D67992DE
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 10 Apr 2012 11:48:45 +0000 (UTC)
Received: (qmail 10451 invoked by uid 500); 10 Apr 2012 11:48:42 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 10388 invoked by uid 500); 10 Apr 2012 11:48:41 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 10379 invoked by uid 99); 10 Apr 2012 11:48:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 11:48:41 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of knst.kolinko@gmail.com designates 209.85.161.173 as permitted sender)
Received: from [209.85.161.173] (HELO mail-gx0-f173.google.com) (209.85.161.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 11:48:37 +0000
Received: by ggnp2 with SMTP id p2so2757272ggn.18
        for <users@tomcat.apache.org>; Tue, 10 Apr 2012 04:48:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=ks9TyjoxeEW/GOpkIE+r8duEWyZ1+XUI/cV/HMCnMA0=;
        b=K0zD83O2J9MVDc5Bc+ftiF2Skvhe50cB1j/OgHZLh9Y67PY252S23T7cXHQo2/PcK2
         kArL0KudvBh3Jk0uptwYUMm3uMTfPoi/+hSgNmHh/E4cc1/Ugm2n1gHx17CLPHnaCZzR
         FNJV89yeLR/jjwYwexG/wocfN3XsyGfcOLJE3u5OC8RzdiWW1y2dYq51C1cK0snJ/t3W
         yLDGgQFW/B7dBZ5vPevQ18xJiQgQ4V9mNjUb79CuE+KgqiVP+lyQYUQuLscb/VsUkHlb
         ydDlGssP2dw1jaE9NmRZhPCxGTD3ftOxhR/jGWhxGf1VZghPeu+fmTmj3KiikaYq3uXO
         SWRA==
MIME-Version: 1.0
Received: by 10.236.181.41 with SMTP id k29mr4951450yhm.14.1334058496480; Tue,
 10 Apr 2012 04:48:16 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Tue, 10 Apr 2012 04:48:16 -0700 (PDT)
In-Reply-To: <EDD800F0B629B24FA547EB5F5631E9D12EDCCCBFFE@MX03A.corp.emc.com>
References: <EDD800F0B629B24FA547EB5F5631E9D12EDCCCBFFE@MX03A.corp.emc.com>
Date: Tue, 10 Apr 2012 15:48:16 +0400
Message-ID: <CABzHfV=0xXdTO37QiFw08vh0w3vXqEn7XcG2h_eLDuyZ0x88Lg@mail.gmail.com>
Subject: Re: Tomcat7: French Chars not properly displaying
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

2012/4/10  <sandeep.kaur2@rsa.com>:
> Hi,
>
> In our product, we were using the default tomcat 6 installation to store =
our
> web pages and used to get the French character displayed properly using o=
ur
> AGENT configuration.
>

What is "AGENT"?

>
> However, as we upgraded from tomcat 6 to tomcat 7, the French characters =
are
> not getting displayed=A0 using the same agent configuration and moving th=
e
> WebPages back to tomcat 6 make the characters displayed properly in Frenc=
h
> format on the browser.
>
>
>
> I tried googling if there is any difference in tomcat configuration files
> when compared to tomcat 6 and tomcat 7 (specifically server.xml) but coul=
d
> not find the exact cause of the issue.
>
>
>
> Could you please throw some light with your knowledge and expertise
>

1. You cannot use the same server.xml in Tomcat 6 and Tomcat 7. You
have to start from default server.xml and add changes as needed.

2. Migration guide:
http://tomcat.apache.org/migration.html

3. There is character encodings page in the FAQ:
http://wiki.apache.org/tomcat/FAQ/CharacterEncoding

4. Maybe you can write a sample web application that demonstrates the issue=
?
Things may go wrong in many places. You have to isolate the step that
goes wrong.

Check that your pages are rendered with correct Content-Type (that
includes charset value). Check that URIEncoding is configured on
Connector and that both POST and GET responses work with French
characters.

It that is OK you can go deeper, e.g. to check that you can write and
read the data correctly with your database.

I do not remember any differences between Tomcat 6 and 7 that can
cause such an issue.

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233457-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 10 12:11:35 2012
Return-Path: <users-return-233457-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 512CA9A34
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 10 Apr 2012 12:11:35 +0000 (UTC)
Received: (qmail 72440 invoked by uid 500); 10 Apr 2012 12:11:31 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 72216 invoked by uid 500); 10 Apr 2012 12:11:31 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 72205 invoked by uid 99); 10 Apr 2012 12:11:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 12:11:31 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of qballer@gmail.com designates 209.85.161.173 as permitted sender)
Received: from [209.85.161.173] (HELO mail-gx0-f173.google.com) (209.85.161.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 12:11:25 +0000
Received: by ggnp2 with SMTP id p2so2771226ggn.18
        for <users@tomcat.apache.org>; Tue, 10 Apr 2012 05:11:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type;
        bh=R+yv9LLGJO/EFIF3ThSkbptbIpVzrxd1Su63t5wKDcY=;
        b=l/i5xmkObPo8KdZScKwqvqwoaxuvvu5RpL/g2JDAFBcvlDrXe67DvIOxkpo2APmdND
         sIJm7AMc/4jejLubAkCKrORz8xw+Eoi9qq5oe7KP3bZB3diDhHP3lomI/mfY5AWhlMgl
         GGr/erdleqUWr5pwKiBItNzdbsAezHmy0xQsA17XCW37QBvWsoeh+nRaHSal0vuF2YLe
         Ai5MyA0eyprDr8XtixxFPT4CETebwZ93jObR9//c2rltWnnMywqD2vi/YkNnV0Gx0q/2
         ELPVvU3JQNfhlmLKqbDyJmC+g0CmL6TuPthc94GfzK8D517yNZHj9ukPhEpmS+4pkJSt
         7h3A==
MIME-Version: 1.0
Received: by 10.101.152.32 with SMTP id e32mr2960697ano.68.1334059864706; Tue,
 10 Apr 2012 05:11:04 -0700 (PDT)
Received: by 10.147.40.20 with HTTP; Tue, 10 Apr 2012 05:11:04 -0700 (PDT)
In-Reply-To: <CAPZZA0rYdg2yB4PuLRLYybgiddM7Mdg_sNqG6bR_V73bpwymzg@mail.gmail.com>
References: <CAPZZA0rq298daEajvZc709KeBbr43oyxvifiMdKMTg0hu7dZtA@mail.gmail.com>
	<4F5A7EAB.3000103@kippdata.de>
	<CAPZZA0rYdg2yB4PuLRLYybgiddM7Mdg_sNqG6bR_V73bpwymzg@mail.gmail.com>
Date: Tue, 10 Apr 2012 15:11:04 +0300
Message-ID: <CAPZZA0p4Tho9MirLg2pG9o5BWORh7UNNbd=pFJY21ab2RE7Bbg@mail.gmail.com>
Subject: Re: Non page pool issue will not go away, please help.
From: Doron Tsur <qballer@gmail.com>
To: Rainer Jung <rainer.jung@kippdata.de>
Cc: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=00504502dc4e584fd204bd52040f
X-Virus-Checked: Checked by ClamAV on apache.org

--00504502dc4e584fd204bd52040f
Content-Type: text/plain; charset=ISO-8859-1

Switching to Blocking IO from Non Blocking IO seems to have solved the
issue. I don't know why, does anybody have ideas?

On Sat, Mar 10, 2012 at 2:57 AM, Doron Tsur <qballer@gmail.com> wrote:

> This customer has two cluster nodes. This helps the server to be more
> available. They are identical in any way and both have this issue.  The
> server is a simple HTTP put get server. It uses some SSL and zipping but
> nothing fancy. Since the configuration are always the same nothing is
> special in the TCP layer. regarding TCP connection state I wouldn't know, I
> let tomcat do most of the job. I kick in to action when objects are formed,
> way after TCP.
>
> No direct memory either.
> No native code.
> It's java, tomcat and HTTP mostly.
>
>
> Anything strange in the output of "netstat -an"?
>> To many connections of some kind? Unusual TCP connection states?
>>
>> Regards,
>>
>> Rainer
>>
>
>

--00504502dc4e584fd204bd52040f--

From users-return-233458-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 10 12:39:49 2012
Return-Path: <users-return-233458-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F11F09FFE
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 10 Apr 2012 12:39:48 +0000 (UTC)
Received: (qmail 51407 invoked by uid 500); 10 Apr 2012 12:39:45 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 51197 invoked by uid 500); 10 Apr 2012 12:39:45 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 51188 invoked by uid 99); 10 Apr 2012 12:39:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 12:39:45 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of knst.kolinko@gmail.com designates 209.85.160.173 as permitted sender)
Received: from [209.85.160.173] (HELO mail-gy0-f173.google.com) (209.85.160.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 12:39:40 +0000
Received: by ghrr14 with SMTP id r14so2794887ghr.18
        for <users@tomcat.apache.org>; Tue, 10 Apr 2012 05:39:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=/Rj3KMyW7NaKy7FZY4enEo35E8i1yZ9W2rbvAku2Rr8=;
        b=Yxfyew66jcsSfkhpVtmBs0iulQWyZtEdtbow9Z53XjCJLk+wM2ALp3HvYc4xI088dz
         YCn49TIprgzHOK4zvHzBb43h5YbfC50H3LlYx/0sxVW+saBFh/iMg6Di4vHLhdGoH1wn
         sigaAX+jmO5cK9NAs2W8mZ6Q/c8enzmAle0bmcYKncv2D9OLZk2YtrAtCCW/7L/Zl9Ce
         C9W+ErvaXGwxqMNuvo2LMRXiehar/Bq1VP5rAxxxMpehOeFHeKeag33rjiTDbUs9JeVf
         bIsf2razm7JpJI46gnnw9HluMTNkG0L0r2E/KyN8TrY57s+f9wt3VCcWIc4dMD/kETD4
         Eomg==
MIME-Version: 1.0
Received: by 10.236.73.232 with SMTP id v68mr7825996yhd.48.1334061559671; Tue,
 10 Apr 2012 05:39:19 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Tue, 10 Apr 2012 05:39:19 -0700 (PDT)
In-Reply-To: <C145BA96AD0C234E9319A75A4FCDA5792BF2342461@UK-CRO-s004.tradar.com>
References: <C145BA96AD0C234E9319A75A4FCDA5792BF2342461@UK-CRO-s004.tradar.com>
Date: Tue, 10 Apr 2012 16:39:19 +0400
Message-ID: <CABzHfVn4kz73ua3SS_0TtftHyg7hnQvF_rEYJHUp_bbZK2w0uw@mail.gmail.com>
Subject: Re: Problems uploading huge files >2GB to Tomcat app.
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

2012/4/10 Nick Porter <nick.porter@tradar.com>:
>
> Hi all. New to Tomcat and not a developer but I have been trying to deplo=
y a website using Debian6, Tomcat 6.0.35 hosting the OpenCMS 8.0.1 app. The=
 website and the OpenCMS app has a facility to upload files however I only =
seem to be able to upload files that are less than 2GB. I did read that the=
re used to be a 2GB bug in Tomcat a few versions ago but that this had sinc=
e been resolved.
>
> The errors I am seeing are a mixture of =A0400 Bad Request and 413 Reques=
t Entity too Large.
>
> I'm connecting directly to Tomcat and the app/site on the HTTP/1.1 connec=
tor, port 8080.
>
> I could be wrong but I can't see anything untoward in the logs located at=
 /var/log/tomcat6/
>
> The chaps over at the OpenCMS mail list assure me that OpenCMS is capable=
 of handling files of this size so I'm guessing my Tomcat config is in some=
 way causing the problem.
>
> I've expanded the memory for the heap in the /etc/defaults/tomcat6 file w=
ith;
>
> JAVA_OPTS=3D"-Djava.awt.headless=3Dtrue -Xmx512m -XX:+UseConcMarkSweepGC"
>
> ...and added the maxPostSize=3D"0" to the HTTP connector but I'm still se=
e these errors.
>
> Here's my connector settings from server.xml
>
> =A0 =A0<Connector port=3D"8080" protocol=3D"HTTP/1.1"
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 connectionTimeout=3D"20000"
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 URIEncoding=3D"UTF-8"
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 maxPostSize=3D"0"
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 redirectPort=3D"8443" />
>
> The only other settings I found relating to the size of a POST were the p=
acketSize attribute but believe this is only relevant to the AJP connector.
>
> I'm at a loss as to what to try next so have come here as a last resort. =
Can anybody give me any pointers or advice on how I can further investigate=
 and resolve this problem?
>

1. Tomcat 6 does not handle file upload by itself (if you are using
Content-Type=3D"multipart/form-data"). It can only provide
request.getInputStream() and something else has to consume it.

Usually that will be Apache Commons Fileupload library, but you will
have to check what OpenMS uses.

I do not remember what default configuration of Fileupload library is.
Certainly such big files have to go into a temporary folder, but I do
not remember whether it is configured by default.  Tomcat startup
script sets java.io.tmpdir property to point to "$CATALINA_BASE/temp".

Are you able to upload big files that are more than 512Mb, but less than 2G=
b?

The file upload form - does it come from OpenCMS?


2. It is possible to configure "connectionUploadTimeout" and
"disableUploadTimeout" on a Connector. I cannot say for sure how much
relevant are they  to those 400 and 413 errors.

Do 400 vs 413 errors change randomly?


3. If FORM authentication is used, it usually saves request before
displaying the login form.  This request is saved in memory and its
size is very limited (several Kb).

If your session expires when you submit your file I think you will see
an error because of that limit.


4. If file size is >2Gb then the method
"response.setContentLength(int)" cannot be used. One has to use
response.setHeader("Content-Length", Long.toString(length));  That is
the only thing in API that I remember that is relevant to handling
files > 2Gb.


Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233459-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 10 14:55:50 2012
Return-Path: <users-return-233459-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F2B0A9F3A
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 10 Apr 2012 14:55:49 +0000 (UTC)
Received: (qmail 84533 invoked by uid 500); 10 Apr 2012 14:55:46 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 84464 invoked by uid 500); 10 Apr 2012 14:55:46 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 84452 invoked by uid 99); 10 Apr 2012 14:55:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 14:55:46 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [195.89.38.218] (HELO mailhost.tradar.com) (195.89.38.218)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 14:55:41 +0000
Received: from UK-CRO-s004.tradar.com ([fe80::9503:fc2:d897:11d5]) by UK-CRO-s004.tradar.com ([fe80::9503:fc2:d897:11d5%11]) with mapi; Tue, 10 Apr 2012 15:55:05 +0100
From: Nick Porter <nick.porter@tradar.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Class: urn:content-classes:message
Date: Tue, 10 Apr 2012 15:55:04 +0100
Subject: RE: Problems uploading huge files >2GB to Tomcat app.
Thread-Topic: Problems uploading huge files >2GB to Tomcat app.
Thread-Index: Ac0XFxTRVzrVv2MCQWOXnsecfpu9FwADGD8Q
Message-ID: <C145BA96AD0C234E9319A75A4FCDA5792BF2342619@UK-CRO-s004.tradar.com>
References: <C145BA96AD0C234E9319A75A4FCDA5792BF2342461@UK-CRO-s004.tradar.com>
 <CABzHfVn4kz73ua3SS_0TtftHyg7hnQvF_rEYJHUp_bbZK2w0uw@mail.gmail.com>
In-Reply-To: <CABzHfVn4kz73ua3SS_0TtftHyg7hnQvF_rEYJHUp_bbZK2w0uw@mail.gmail.com>
Accept-Language: en-US, en-GB
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US, en-GB
Content-Type: text/plain; charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org



Thanks for replying Konstantin. See my responses to your questions below.
--
np



--
Tradar Limited  is a limited company registered in England and Wales. Regis=
tered number: 3431380.
Registered office: 20-21 Jockey's Fields, London. WC1R 4BW

-----Original Message-----
From: Konstantin Kolinko [mailto:knst.kolinko@gmail.com]
Sent: 10 April 2012 13:39
To: Tomcat Users List
Subject: Re: Problems uploading huge files >2GB to Tomcat app.

2012/4/10 Nick Porter <nick.porter@tradar.com>:
>
> Hi all. New to Tomcat and not a developer but I have been trying to deplo=
y a website using Debian6, Tomcat 6.0.35 hosting the OpenCMS 8.0.1 app. The=
 website and the OpenCMS app has a facility to upload files however I only =
seem to be able to upload files that are less than 2GB. I did read that the=
re used to be a 2GB bug in Tomcat a few versions ago but that this had sinc=
e been resolved.
>
> The errors I am seeing are a mixture of  400 Bad Request and 413 Request =
Entity too Large.
>
> I'm connecting directly to Tomcat and the app/site on the HTTP/1.1 connec=
tor, port 8080.
>
> I could be wrong but I can't see anything untoward in the logs located
> at /var/log/tomcat6/
>
> The chaps over at the OpenCMS mail list assure me that OpenCMS is capable=
 of handling files of this size so I'm guessing my Tomcat config is in some=
 way causing the problem.
>
> I've expanded the memory for the heap in the /etc/defaults/tomcat6
> file with;
>
> JAVA_OPTS=3D"-Djava.awt.headless=3Dtrue -Xmx512m -XX:+UseConcMarkSweepGC"
>
> ...and added the maxPostSize=3D"0" to the HTTP connector but I'm still se=
e these errors.
>
> Here's my connector settings from server.xml
>
>    <Connector port=3D"8080" protocol=3D"HTTP/1.1"
>               connectionTimeout=3D"20000"
>               URIEncoding=3D"UTF-8"
>               maxPostSize=3D"0"
>               redirectPort=3D"8443" />
>
> The only other settings I found relating to the size of a POST were the p=
acketSize attribute but believe this is only relevant to the AJP connector.
>
> I'm at a loss as to what to try next so have come here as a last resort. =
Can anybody give me any pointers or advice on how I can further investigate=
 and resolve this problem?
>

1. Tomcat 6 does not handle file upload by itself (if you are using Content=
-Type=3D"multipart/form-data"). It can only provide
request.getInputStream() and something else has to consume it.

Usually that will be Apache Commons Fileupload library, but you will have t=
o check what OpenMS uses.

[NP] I'm pretty sure OpenCMS is handling it. I don't have Apache installed =
in my test rig and can upload smaller files.

I do not remember what default configuration of Fileupload library is.
Certainly such big files have to go into a temporary folder, but I do not r=
emember whether it is configured by default.  Tomcat startup script sets ja=
va.io.tmpdir property to point to "$CATALINA_BASE/temp".

Are you able to upload big files that are more than 512Mb, but less than 2G=
b?

[NP] Yes. I've been able to upload a 1.9ish GB file but anything over 2GB a=
nd it fails.

The file upload form - does it come from OpenCMS?

[NP] Yes.

2. It is possible to configure "connectionUploadTimeout" and "disableUpload=
Timeout" on a Connector. I cannot say for sure how much relevant are they  =
to those 400 and 413 errors.

[NP] I've tried these but they had no effect.

Do 400 vs 413 errors change randomly?

[NP] Yes. I can fathom no pattern to them. In fact, the only way I can actu=
ally see them is to packet trace the HTTP exchange.

3. If FORM authentication is used, it usually saves request before displayi=
ng the login form.  This request is saved in memory and its size is very li=
mited (several Kb).

If your session expires when you submit your file I think you will see an e=
rror because of that limit.

[NP] Don't think this is it. Not seeing any login issues.

4. If file size is >2Gb then the method
"response.setContentLength(int)" cannot be used. One has to use response.se=
tHeader("Content-Length", Long.toString(length));  That is the only thing i=
n API that I remember that is relevant to handling files > 2Gb.

[NP] Can't say on this one.


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233460-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 10 15:01:44 2012
Return-Path: <users-return-233460-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DA9DB924A
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 10 Apr 2012 15:01:43 +0000 (UTC)
Received: (qmail 9981 invoked by uid 500); 10 Apr 2012 15:01:40 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 9775 invoked by uid 500); 10 Apr 2012 15:01:40 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 9763 invoked by uid 99); 10 Apr 2012 15:01:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 15:01:40 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aw@ice-sa.com designates 212.85.38.228 as permitted sender)
Received: from [212.85.38.228] (HELO tor.combios.es) (212.85.38.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 15:01:33 +0000
Received: from [192.168.245.129] (p549E8CC7.dip0.t-ipconnect.de [84.158.140.199])
	by tor.combios.es (Postfix) with ESMTPA id 5A231DA0392
	for <users@tomcat.apache.org>; Tue, 10 Apr 2012 17:01:11 +0200 (CEST)
Message-ID: <4F844B30.6040603@ice-sa.com>
Date: Tue, 10 Apr 2012 17:01:04 +0200
From: =?ISO-8859-1?Q?Andr=E9_Warnier?= <aw@ice-sa.com>
Reply-To: Tomcat Users List <users@tomcat.apache.org>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Tomcat7: French Chars not properly displaying
References: <EDD800F0B629B24FA547EB5F5631E9D12EDCCCBFFE@MX03A.corp.emc.com>
In-Reply-To: <EDD800F0B629B24FA547EB5F5631E9D12EDCCCBFFE@MX03A.corp.emc.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

sandeep.kaur2@rsa.com wrote:
...
In addition to Konstantin's comments..

Can you specify the exact platform OS on which this happens ?

If you installed Tomcat from a package, make sure that there are no differences between 
your Tomcat6 and Tomcat7 startup scripts, in terms of the "locale" settings of the process 
which runs Tomcat.
(Under Unix/Linux, look for "LANG" and "LC_*" variables)

Some badly-written applications open Java streams without specifying their encoding.  This 
causes the stream to default to the default encoding of the process which runs Tomcat, and 
if there is a mismatch between the data encoding, and the stream on which this data is 
sent/received, you would see problems of this nature.

Of course, the reason may be something totally different.  Data displayed on a web page 
may go through a lot of steps, each of which could potentially corrupt it.  So if it is 
not the above, try to provide as many details as possible about where this displayed data 
cpomes from, and what steps it is going through before appearing in the browser.



---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233461-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 10 15:04:23 2012
Return-Path: <users-return-233461-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D43579353
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 10 Apr 2012 15:04:23 +0000 (UTC)
Received: (qmail 27449 invoked by uid 500); 10 Apr 2012 15:04:20 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 27375 invoked by uid 500); 10 Apr 2012 15:04:20 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 27365 invoked by uid 99); 10 Apr 2012 15:04:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 15:04:19 +0000
X-ASF-Spam-Status: No, hits=0.9 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [216.139.250.139] (HELO joe.nabble.com) (216.139.250.139)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 15:04:14 +0000
Received: from alf.nabble.com ([192.168.236.21])
	by joe.nabble.com with esmtp (Exim 4.72)
	(envelope-from <lmhelp1@orange.fr>)
	id 1SHcbo-0000Nb-NE
	for users@tomcat.apache.org; Tue, 10 Apr 2012 08:03:52 -0700
Date: Tue, 10 Apr 2012 08:03:52 -0700 (PDT)
From: =?UTF-8?Q?L=C3=A9a_Massiot?= <lmhelp1@orange.fr>
To: users@tomcat.apache.org
Message-ID: <1334070232710-4756364.post@n6.nabble.com>
In-Reply-To: <4F835D2A.8010406@ice-sa.com>
References: <1333444940374-4681421.post@n6.nabble.com> <4F7AE221.10605@ice-sa.com> <1333549942374-4686704.post@n6.nabble.com> <1333564099167-4687332.post@n6.nabble.com> <4F7DA677.3060205@christopherschultz.net> <1333705857484-4692232.post@n6.nabble.com> <4F7EF29D.7090004@ice-sa.com> <4F809AD9.90407@ice-sa.com> <1333966346271-4715558.post@n6.nabble.com> <4F835D2A.8010406@ice-sa.com>
Subject: Re: Tomcat6 - Context - aliases
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hello and thank you for your answers.


Christopher Schultz-2 wrote
> why don't you just write a simple file-fetching servlet? They are
> dead-simple to write
This looks very interesting.=20


Andr=C3=A9 Warnier wrote
> you probably do /not/ want bots to be able to point directly to the
> documents uploaded by users
Yes indeed. Thanks for pointing this out. I was just speaking in general.


Andr=C3=A9 Warnier wrote
> Presumably, it is via a POST, to a servlet you have created.  That servle=
t
> knows where to store the files that are uploaded, via some parameter whic=
h
> it reads somewhere.
Yes.


Andr=C3=A9 Warnier wrote
> Christoper's (and my own) suggestion is to create a similar servlet that
> serves to download the files, and which would use the same parameter to
> know where to download them from.
Again, it looks very interesting. Maybe it's what I've been looking for fro=
m
the beginning.

To @Andr=C3=A9 Warnier: Thank you for the two references "Automatic Applica=
tion
Deployment" and "Single Sign On".

If any of you two can post the code of the file-fetching servlet, it would
be great.

Thanks and best regards.

--
View this message in context: http://tomcat.10.n6.nabble.com/Tomcat6-Contex=
t-aliases-tp4678430p4756364.html
Sent from the Tomcat - User mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233462-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 10 15:08:59 2012
Return-Path: <users-return-233462-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 26E209910
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 10 Apr 2012 15:08:59 +0000 (UTC)
Received: (qmail 44896 invoked by uid 500); 10 Apr 2012 15:08:55 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 44708 invoked by uid 500); 10 Apr 2012 15:08:55 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 44699 invoked by uid 99); 10 Apr 2012 15:08:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 15:08:55 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aw@ice-sa.com designates 212.85.38.228 as permitted sender)
Received: from [212.85.38.228] (HELO tor.combios.es) (212.85.38.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 15:08:46 +0000
Received: from [192.168.245.129] (p549E8CC7.dip0.t-ipconnect.de [84.158.140.199])
	by tor.combios.es (Postfix) with ESMTPA id 31CC4DA065C
	for <users@tomcat.apache.org>; Tue, 10 Apr 2012 17:08:25 +0200 (CEST)
Message-ID: <4F844CE2.3010704@ice-sa.com>
Date: Tue, 10 Apr 2012 17:08:18 +0200
From: =?windows-1252?Q?Andr=E9_Warnier?= <aw@ice-sa.com>
Reply-To: Tomcat Users List <users@tomcat.apache.org>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Problems uploading huge files >2GB to Tomcat app.
References: <C145BA96AD0C234E9319A75A4FCDA5792BF2342461@UK-CRO-s004.tradar.com> <CABzHfVn4kz73ua3SS_0TtftHyg7hnQvF_rEYJHUp_bbZK2w0uw@mail.gmail.com> <C145BA96AD0C234E9319A75A4FCDA5792BF2342619@UK-CRO-s004.tradar.com>
In-Reply-To: <C145BA96AD0C234E9319A75A4FCDA5792BF2342619@UK-CRO-s004.tradar.com>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 7bit

Just a note in the text below.

Nick Porter wrote:
> 
...

> 
> 1. Tomcat 6 does not handle file upload by itself (if you are using Content-Type="multipart/form-data"). It can only provide
> request.getInputStream() and something else has to consume it.
> 
> Usually that will be Apache Commons Fileupload library, but you will have to check what OpenMS uses.
> 
> [NP] I'm pretty sure OpenCMS is handling it. I don't have Apache installed in my test rig and can upload smaller files.
> 
"Apache Commons Fileupload" is an add-on java library for Apache Tomcat (or other java 
servlet engines), and has nothing to do with Apache httpd.
It may be used by openCMS to realise their file upload functionality.

That is why Konstantin was mentioning it.  There may be a parameter to set, in order for 
FileUpload to allow more than 2 GB.
See here : http://commons.apache.org/fileupload/



---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233463-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 10 15:23:06 2012
Return-Path: <users-return-233463-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7535891D0
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 10 Apr 2012 15:23:06 +0000 (UTC)
Received: (qmail 11115 invoked by uid 500); 10 Apr 2012 15:23:03 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 11055 invoked by uid 500); 10 Apr 2012 15:23:03 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 11044 invoked by uid 99); 10 Apr 2012 15:23:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 15:23:03 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aw@ice-sa.com designates 212.85.38.228 as permitted sender)
Received: from [212.85.38.228] (HELO tor.combios.es) (212.85.38.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 15:22:55 +0000
Received: from [192.168.245.129] (p549E8CC7.dip0.t-ipconnect.de [84.158.140.199])
	by tor.combios.es (Postfix) with ESMTPA id 244C3DA0655
	for <users@tomcat.apache.org>; Tue, 10 Apr 2012 17:22:34 +0200 (CEST)
Message-ID: <4F845033.8010307@ice-sa.com>
Date: Tue, 10 Apr 2012 17:22:27 +0200
From: =?UTF-8?B?QW5kcsOpIFdhcm5pZXI=?= <aw@ice-sa.com>
Reply-To: Tomcat Users List <users@tomcat.apache.org>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Tomcat6 - Context - aliases
References: <1333444940374-4681421.post@n6.nabble.com> <4F7AE221.10605@ice-sa.com> <1333549942374-4686704.post@n6.nabble.com> <1333564099167-4687332.post@n6.nabble.com> <4F7DA677.3060205@christopherschultz.net> <1333705857484-4692232.post@n6.nabble.com> <4F7EF29D.7090004@ice-sa.com> <4F809AD9.90407@ice-sa.com> <1333966346271-4715558.post@n6.nabble.com> <4F835D2A.8010406@ice-sa.com> <1334070232710-4756364.post@n6.nabble.com>
In-Reply-To: <1334070232710-4756364.post@n6.nabble.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit

La Massiot wrote:
...

> 
> If any of you two can post the code of the file-fetching servlet, it would
> be great.
> 


http://lmgtfy.com/?q=java+file+download+servlet

:-)

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233464-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 10 15:29:07 2012
Return-Path: <users-return-233464-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A2CBE92F9
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 10 Apr 2012 15:29:07 +0000 (UTC)
Received: (qmail 40402 invoked by uid 500); 10 Apr 2012 15:29:03 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 40357 invoked by uid 500); 10 Apr 2012 15:29:03 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 40345 invoked by uid 99); 10 Apr 2012 15:29:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 15:29:03 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pid@pidster.com designates 209.85.215.173 as permitted sender)
Received: from [209.85.215.173] (HELO mail-ey0-f173.google.com) (209.85.215.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 15:28:59 +0000
Received: by eaaf11 with SMTP id f11so2290415eaa.18
        for <users@tomcat.apache.org>; Tue, 10 Apr 2012 08:28:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type;
        bh=ccISZw/e1+mSMpNGLOvo2WLewfX25IGUSPhySUtBfQU=;
        b=RN+AeaNVmOl/Y511l+bQI/6LUN0HnhzVQCWfsYC5Ehw91RgX24ngcP8rnvg2Rwv7pv
         J7V9ErLTRCl0uojZVmAvoSzg5HpXH4cxYuZT9WYzBUekJe3sTCOoYSYdIudX9wwWMhzk
         yUZaznzj2b3z+l6tFPJopLXHTN0RwNuBQcFFM=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type:x-gm-message-state;
        bh=ccISZw/e1+mSMpNGLOvo2WLewfX25IGUSPhySUtBfQU=;
        b=DneaZ2Q6++f3JZezsoagmzhYMIwtm48LV6IZVCVp4TV+oLGlp+Waxooq8+AVvLKt65
         JdgnCvChm8ooJYmZqJiSyNl4F+fd2gwR85dOKrPc3tv2T6z/OCIEMmn/S+91P6UtIsw4
         s4k/Km9D3Xqbg49iG3nWIl91g2sQw1Aj/CoE5KScwjpZEoM94d/AftE5o3EnmZqQ3AKt
         bdZDkg+gahiYKB+CF04UiGxeiWw+ghjg70wzxihdpT10T/OrhGD6qcVQDWf1RoQEMVds
         Q/embZm7E0euQaLwCcGz4O9BoY+K8qXo6+YK7a7M/hsqqktpX+mJbPDchc0ajA+ltzJc
         A7Eg==
Received: by 10.14.39.195 with SMTP id d43mr1455380eeb.28.1334071717228;
        Tue, 10 Apr 2012 08:28:37 -0700 (PDT)
Received: from Asura.local ([81.134.122.147])
        by mx.google.com with ESMTPS id r44sm84925468eef.2.2012.04.10.08.28.33
        (version=SSLv3 cipher=OTHER);
        Tue, 10 Apr 2012 08:28:35 -0700 (PDT)
Message-ID: <4F8451A4.2030508@pidster.com>
Date: Tue, 10 Apr 2012 16:28:36 +0100
From: Pid <pid@pidster.com>
Organization: Pidster Inc
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Bug in Tomcat AJP Connector?
References: <217DDBC2BB1E394CA9E7446337CBDEF20102DEDB4F4A@il-ex01.ad.checkpoint.com> <4F7C81BB.1040804@apache.org> <217DDBC2BB1E394CA9E7446337CBDEF20102DEDB4FA0@il-ex01.ad.checkpoint.com> <CABzHfV=hqDq_UmjVpO0moj7jSGRxp2BXgEFzTp7noS+iJaOVzw@mail.gmail.com> <F4938ADA-CE56-43B9-A6BE-490EA47922CA@checkpoint.com> <4F7E2E89.5040805@pidster.com> <217DDBC2BB1E394CA9E7446337CBDEF20102DEDB51E4@il-ex01.ad.checkpoint.com> <4F81F19C.3020504@mayr-stefan.de> <217DDBC2BB1E394CA9E7446337CBDEF20102DEDB524D@il-ex01.ad.checkpoint.com>
In-Reply-To: <217DDBC2BB1E394CA9E7446337CBDEF20102DEDB524D@il-ex01.ad.checkpoint.com>
X-Enigmail-Version: 1.4
OpenPGP: id=62590808
Content-Type: multipart/signed; micalg=pgp-sha512;
 protocol="application/pgp-signature";
 boundary="------------enig764D7B8FBC21CB2AFE153876"
X-Gm-Message-State: ALoCoQkuGZMiU1s74+gumSHIjfax54t0XBQdOLspliVW/hXsimreT9gerYPc491plBhEWH6ncCcX
X-Virus-Checked: Checked by ClamAV on apache.org

--------------enig764D7B8FBC21CB2AFE153876
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On 09/04/2012 09:18, Ofer Israeli wrote:
> On 08/04/2012 23:14, Stefan Mayr <stefan@mayr-stefan.de> wrote:
>> Am 08.04.2012 18:41, schrieb Ofer Israeli:
>>> 2012/4/6 Pid<pid@pidster.com>:
>>>> On 05/04/2012 22:17, Ofer Israeli wrote:
>>>>> Y
>>>>>
>>>>> On 5 =D7=91=D7=90=D7=A4=D7=A8 2012, at 18:58, "Konstantin
>>>>> Kolinko"<knst.kolinko@gmail.com>
>>>> wrote:
>>>>>
>>>>>> 2012/4/5 Ofer Israeli<oferi@checkpoint.com>:
>>>>>>> Mark Thomas wrote:
>>>>>>>> On 04/04/2012 17:02, Ofer Israeli wrote:
>>>>>>>>
>>>>>>>> Once you have an OOME all bets are off. The JVM needs to be
>>>> restarted.
>>>>>>>> There is no guarantee of reliable operation after an OOME.
>>>>>>>>
>>>>>>>> Mark
>>>>>>>
>>>>>>> Hi Mark,
>>>>>>> I agree that there in such a situation the JVM should be
>>>>>>> restarted, but it
>>>> isn't restarted by Tomcat.  On the other hand, Tomcat does take some=

>>>> precautious actions and kills the accepting thread, but in such a
>>>> case it should also close the socket that thread is listening on
>>>> otherwise it is leaving garbage around after the thread's death.
>>>>>>> Do you see any reason as not to close the listening socket?
>>>>>>>
>>>>>>
>>>>>> 1. Tomcat does not start JVM  thus it cannot restart it.
>>>>>>
>>>>>> You need some external tool or script or admin to perform
>>>>>> monitoring and (re)starts.
>>>>>>
>>>>>> 2. OOM can happen at a random place. Once it happens, it is likely=

>>>>>> that other places will also start to fail randomly. It is also
>>>>>> likely that your attempts to recover will fail as well.
>>>>>>
>>>>>> Mark already mentioned it: "all bets are off".
>>>>>>
>>>>>> Best regards,
>>>>>> Konstantin Kolinko
>>>>>>
>>>>> Hi Konstantin,
>>>>>
>>>>> I agree regarding the OOM bringing TC to a state where it must be
>>>> restored, but my point remains: if there is code that handles
>>>> catching this exception and terminating the thread, why not terminat=
e
>>>> gracefully by closing the listening socket before killing the thread=
?
>>>>
>>>> And your point has been answered.  After an OOM the JVM is in an
>>>> unknown, unsafe state so a restart MUST occur to restore service.
>>>>
>>>> Closing a socket gracefully after an OOM is a bit like trying to shu=
t
>>>> one of the portholes on the Titanic, shortly after hearing a large c=
rashing
>> sound.
>>>>
>>>>
>>>> There's only one place I know of where Tomcat attempts to interact
>>>> with OOM conditions and this is not one of them, so I don't believe
>>>> it's safe to say that Tomcat is deliberately handling this exception=
=2E
>>>>
>>>> NB an OOM is an Error, not an Exception - it is a subclass of
>>>> VirtualMachineError, which is thrown to indicate that the Java
>>>> Virtual Machine is broken or has run out of resources necessary for
>>>> it to continue operating.
>>>>
>>>> An Error is a subclass of Throwable that indicates serious problems
>>>> that a reasonable application should not try to catch.
>>>> </end-quote>
>>>>
>>>> If anything, the locations where Tomcat catches a Throwable should b=
e
>>>> modified so it does *not* catch Errors, rather than continuing to do=

>>>> so and then attempting a trivial tidy-up.
>>>>
>>>>
>>>> p
>>>
>>> Thanks for your input - you're right regarding the error and the fact=
 that
>> Tomcat is indeed catching a Throwable and not an Exception.  I assume =
that if
>> the Throwable were not caught, then the thread would die in any case.
>> Although stated before that Tomcat could not kill itself in such a sit=
uation, I
>> still wonder if it would be possible to do so.  Or taking a different =
perspective
>> on this: if the JVM specification is such that it cannot be trusted to=
 continue
>> running after an OOM, then why does it not kill itself or restart itse=
lf?
>>>
>>
>> I guess you can do this with some vendor specific JVM arguments as
>> SUNs/Oracles -XX:OnOutOfMemoryError:
>> http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-
>> 140102.html
>>
>> Different findings like "kill -9 %p" let me suspect that you can use %=
p as a
>> variable for your current pid. With that you can either kill your curr=
ent
>> instance and let your monitoring handle the rest or try to initiate th=
e restart
>> by yourself.
>>
>> Give it a try
>>
>> 	Stefan
>>
> Thanks Stefan - will look into this option.

Be careful using that option; if you are also producing a heap dump you
should wait until the heap dump has finished writing before stopping the
process, or the heap will be incomplete & therefore useless.


p


--=20

[key:62590808]


--------------enig764D7B8FBC21CB2AFE153876
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.18 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iQIcBAEBCgAGBQJPhFGpAAoJEGoM2OGpOvr9evoP/16jd2qZ9mVUHpY0paP72zA7
u0t4k6JlMmWAPYpFJZuV6Nln7dVy1CiR/j5ZdlHcFxYXVg12J8i4RNT20iI4Rloe
xvGLGKbWLZHjRnBPnHVboYuDTK3+9NQ2bjSt4bjakO+lFR12N/SlCGZeJ2NddLLh
MFQ4SiDSDTg1hwQuesIwO+77VwGCDZYNLejLoUP2ajysWERy1geeZ/qnmOo0vAD2
GxeWMRvnxkgCnGd3a+7tjYWgpVa2aGTU6Ane2JuE2mNszkpSvOe/beb82HjDLBIA
Wl0QmywpxvSPOSSI4gnXYl64QoEyXN8c+qFMYtm2HwTNMXVr33KALoZhO58V6gD2
O9+m/3t4qrdOAkD5qmmNo6qeWIjDmdioleS3XsJWdsYVV3WAwNZlwqHS+5DEldCm
uSVptUzyfgIv9OK0t7MgAik4PK8bem5ipUFHYHa4qBkpxx3PFsD8tnX+AJwOnMC9
HnovBCG3sEwy15pNly/6UlKfZb92cXz9Hzok4moizv9Voa2K1yKp6FgjTEFYnLW0
Vb+hlg6Q8T20GHpxdjFTXIQAFvh52z+WZJRUVWc5zqFbW0fXIB0CrMP34BBydV5F
Wxv8T/ua2POnLRiUgYjP5bq9x5QGfcvPr/rcQmrsgfYcu2H1e3Nk6ZFcfNW8QSUA
eWMZEIY/lYfX3oinQ3X5
=jBzp
-----END PGP SIGNATURE-----

--------------enig764D7B8FBC21CB2AFE153876--

From users-return-233465-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 10 15:31:58 2012
Return-Path: <users-return-233465-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A383796EA
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 10 Apr 2012 15:31:58 +0000 (UTC)
Received: (qmail 64188 invoked by uid 500); 10 Apr 2012 15:31:55 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 64134 invoked by uid 500); 10 Apr 2012 15:31:55 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 64125 invoked by uid 99); 10 Apr 2012 15:31:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 15:31:54 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pid@pidster.com designates 209.85.215.173 as permitted sender)
Received: from [209.85.215.173] (HELO mail-ey0-f173.google.com) (209.85.215.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 15:31:48 +0000
Received: by eaaf11 with SMTP id f11so2291701eaa.18
        for <users@tomcat.apache.org>; Tue, 10 Apr 2012 08:31:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type;
        bh=8/VJdmWiJWzGAXfv42T1eR2igMH+6RT+X+jEEFQnbeA=;
        b=GmJipxmvztp/0mc3VjRrBB6P0jgrFGByS7Zzpka2d3LvGdagB4r58H4FB0oJBakvSc
         kT+kShbyMriu5mmOucaeMg6aSDzio/l5/tt1hR0CVXskxZAnBzbHViGXDVPhCG3Jk5hU
         KggUH+dpJJPCCBD1uHJrTWSPlpZ9F+DDQDmdY=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type:x-gm-message-state;
        bh=8/VJdmWiJWzGAXfv42T1eR2igMH+6RT+X+jEEFQnbeA=;
        b=PV02CI9+JesA0vGLmcmJiOl5dCdxYmluAJIcsISS7/dZs5sHTDpv3lg94rwWKNkhDb
         r8knmxw+ny5WQyjqVeDzpES4cITlSNaoF1lDTnrQdq2MSVBtJqzRw8lUK5mDfwMQacTy
         jJnSsd2F7QyErPiEnFq9KkxmhFpFTkO0ZezK33XJNriCLYTMKfOq7tbtHBvMRV4OdRRd
         h3QApRIp7u4r+jxgbJsOGZYVHK9KFETQ/EqlQ4x+VoXPIVIabrratTnSEDioaVJ6YpPb
         bYnSI6t6/8wfnyYSwUj1DyvErJ+uqWObyF761khI6ZP4eAcqbkHqlFejHdShRImyMUSV
         npHA==
Received: by 10.213.5.11 with SMTP id 11mr730119ebt.60.1334071887135;
        Tue, 10 Apr 2012 08:31:27 -0700 (PDT)
Received: from Asura.local ([81.134.122.147])
        by mx.google.com with ESMTPS id n55sm84950083eef.6.2012.04.10.08.31.24
        (version=SSLv3 cipher=OTHER);
        Tue, 10 Apr 2012 08:31:25 -0700 (PDT)
Message-ID: <4F845254.7060401@pidster.com>
Date: Tue, 10 Apr 2012 16:31:32 +0100
From: Pid <pid@pidster.com>
Organization: Pidster Inc
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Non page pool issue will not go away, please help.
References: <CAPZZA0rq298daEajvZc709KeBbr43oyxvifiMdKMTg0hu7dZtA@mail.gmail.com> <4F5A7EAB.3000103@kippdata.de> <CAPZZA0rYdg2yB4PuLRLYybgiddM7Mdg_sNqG6bR_V73bpwymzg@mail.gmail.com> <CAPZZA0p4Tho9MirLg2pG9o5BWORh7UNNbd=pFJY21ab2RE7Bbg@mail.gmail.com>
In-Reply-To: <CAPZZA0p4Tho9MirLg2pG9o5BWORh7UNNbd=pFJY21ab2RE7Bbg@mail.gmail.com>
X-Enigmail-Version: 1.4
OpenPGP: id=62590808
Content-Type: multipart/signed; micalg=pgp-sha512;
 protocol="application/pgp-signature";
 boundary="------------enig60E76F6D9782CA77C544E954"
X-Gm-Message-State: ALoCoQniLSKf7d5bNpVJMHy7EXiPERNqvTPPZSuQ6+uBz7pR7bKgYEqH2hv1l1AuHTUupTqNscIa
X-Virus-Checked: Checked by ClamAV on apache.org

--------------enig60E76F6D9782CA77C544E954
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

On 10/04/2012 13:11, Doron Tsur wrote:
> Switching to Blocking IO from Non Blocking IO seems to have solved the
> issue. I don't know why, does anybody have ideas?

Try the latest version of Tomcat.  There were patches to the Connector
code in versions subsequent to 7.0.23.


p


--=20

[key:62590808]


--------------enig60E76F6D9782CA77C544E954
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.18 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iQIcBAEBCgAGBQJPhFJUAAoJEGoM2OGpOvr95OAQAKpVZRFZZGAK+X3qJ4KxeJVS
lNx8YlWBjx3gJimlHJ7SRQJ4ZZA32l8mMTPSIPF6Zrot5liuaBdU5RF91tbcsj4t
CLcAx/PjbGCCuy//Oz1Z9blv4YHAyz2QkoQmOvzstdnoHUouZseOwV24kRRmKSVL
rOO5aY6DJ6fdE5+ma1Bh/4NMgoGqOapc49SiaGSe8aD6gE6YFR+kvFmxmst+wjK+
nQqJo9A+DnLHd5mk8Eh31GGKLPrBgUcjwRsise8KMH8eYjtuMRitbqWXLCJQX3fh
jR1s/cH7ZqrdhE94J/jcb16dnPX/yPAqW3XtlfUYoCo3z2bVTdZe8ZYOocidBRGt
je1Cm/qqmuQBc0U0VZXwTpsWbhWourxKhTBCsJZYI9uLajRUBh0pEeF/LS0Vo9AW
eJ1DzbWJ6uN6myphQoLk4nOFteJy5lW7DB6kuOofuUeDTvjdJyTi+nHPpjASUEjA
zQXnqMPth2O8uGyQ8CID+VDw69ypWW+XmKOVuumTRxil6QgoISZHfDb2UA0J0Pa5
TBBdsDdfxgKJNg5XFnf0W9qQqyI+17JuBp/mBFkJdRjPxk98alXopgMcRpZzBxD1
f+lWHy5VrO1R7xDMSfC4ff1b0lZEWlA9oVJhkjjNgoUO3pbOtXqx2kue0AaXriLQ
3AKY3NgOWERLC8h3ZrB2
=yjSI
-----END PGP SIGNATURE-----

--------------enig60E76F6D9782CA77C544E954--

From users-return-233466-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 10 16:31:47 2012
Return-Path: <users-return-233466-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C9B31910F
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 10 Apr 2012 16:31:47 +0000 (UTC)
Received: (qmail 5063 invoked by uid 500); 10 Apr 2012 16:31:44 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 4893 invoked by uid 500); 10 Apr 2012 16:31:44 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 4883 invoked by uid 99); 10 Apr 2012 16:31:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 16:31:44 +0000
X-ASF-Spam-Status: No, hits=0.9 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [216.139.250.139] (HELO joe.nabble.com) (216.139.250.139)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 16:31:39 +0000
Received: from alf.nabble.com ([192.168.236.21])
	by joe.nabble.com with esmtp (Exim 4.72)
	(envelope-from <lmhelp1@orange.fr>)
	id 1SHdyP-0007ez-Gp
	for users@tomcat.apache.org; Tue, 10 Apr 2012 09:31:17 -0700
Date: Tue, 10 Apr 2012 09:31:17 -0700 (PDT)
From: =?UTF-8?Q?L=C3=A9a_Massiot?= <lmhelp1@orange.fr>
To: users@tomcat.apache.org
Message-ID: <1334075477507-4762217.post@n6.nabble.com>
In-Reply-To: <4F845033.8010307@ice-sa.com>
References: <1333549942374-4686704.post@n6.nabble.com> <1333564099167-4687332.post@n6.nabble.com> <4F7DA677.3060205@christopherschultz.net> <1333705857484-4692232.post@n6.nabble.com> <4F7EF29D.7090004@ice-sa.com> <4F809AD9.90407@ice-sa.com> <1333966346271-4715558.post@n6.nabble.com> <4F835D2A.8010406@ice-sa.com> <1334070232710-4756364.post@n6.nabble.com> <4F845033.8010307@ice-sa.com>
Subject: Re: Tomcat6 - Context - aliases
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

@Andr=C3=A9 Warnier: Thank you.

--
View this message in context: http://tomcat.10.n6.nabble.com/Tomcat6-Contex=
t-aliases-tp4678430p4762217.html
Sent from the Tomcat - User mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233467-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 10 16:46:36 2012
Return-Path: <users-return-233467-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F0A599859
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 10 Apr 2012 16:46:35 +0000 (UTC)
Received: (qmail 56483 invoked by uid 500); 10 Apr 2012 16:46:32 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 56243 invoked by uid 500); 10 Apr 2012 16:46:32 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 56232 invoked by uid 99); 10 Apr 2012 16:46:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 16:46:32 +0000
X-ASF-Spam-Status: No, hits=4.7 required=5.0
	tests=FREEMAIL_FORGED_REPLYTO,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [98.139.91.226] (HELO nm24-vm0.bullet.mail.sp2.yahoo.com) (98.139.91.226)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 10 Apr 2012 16:46:21 +0000
Received: from [98.139.91.62] by nm24.bullet.mail.sp2.yahoo.com with NNFMP; 10 Apr 2012 16:45:59 -0000
Received: from [72.30.22.33] by tm2.bullet.mail.sp2.yahoo.com with NNFMP; 10 Apr 2012 16:45:59 -0000
Received: from [127.0.0.1] by omp1061.mail.sp2.yahoo.com with NNFMP; 10 Apr 2012 16:45:59 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 728329.92358.bm@omp1061.mail.sp2.yahoo.com
Received: (qmail 55324 invoked by uid 60001); 10 Apr 2012 16:45:59 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1334076359; bh=rLEXpaICatdGLn2yLTxZAc+DVJ+j+vdH+wYqKmwW2Q8=; h=X-YMail-OSG:Received:X-Mailer:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type; b=eLh2uyxSG2Y2irV3eDWSOZa/GNiJ1VJFdsEqzrxnmRJhyBtVq4HvB4MYpCTvj6aNVpP44XARi+91yA6UTeUVyyO9/PXfEv8Hoz7RplJ9xknLTiX8C3/JwE3vXqBni9dMsBuyYMCA8T1vDQ99qdtsaQSzHG3g6HSa0oxU72IyE/4=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type;
  b=CPKe1q8rHgDc18abyxf20ubg5V2iUEI8x/1nd1H9E5Pc5Bfl7iPn8yTBKBCL+M+QpDv7UTsGPfHao8oCcGLRiRu3NJsQmf19T0Br0zo4FkrWxSkbPfpM27oUJAhKygCcfwBE4eE1NT5zfxS0qCMoJXwJk6q0zQZqCsyIPGgo0sM=;
X-YMail-OSG: WF91gboVM1nSBcWoDmVgm4aUuYl1K2WXQ1.WTds55liGfOE
 QXlYpU1SdeOmlLmLM94Ti_pqA8Qsv2oeT1C0p2CHPp.QqA.6c2G.fzyilKSx
 owbGxBqaMFDEatbasSU4y9FYv7vFASwRwiCgUs6JnbduqhLXQAGuqG2BdsiA
 D66bh_jifQR2GR1R_JR975v0xEeePaUHFVt8NysLADvybp6THHWraDkYOmX6
 2ou4QZD.X6FpfotRNDvIoVu133LxZv7ZoEdElTKebCFIKSY1ZRe9msQIY279
 noBQh7wJA7m3ZTfRstSHezkOrcMFJRIML6_DRG0h.rxDTIIRsjFiOXtayXYH
 KQFA08JqU8A.uxmuER2AtJbAXJIIcJqFjs8FcCS9QWK_u5._7X0W2B517FG.
 yA3zcErrgxbEzCiwpAGGMaBzJKn6Cm.S3NEyRwiinAKZhM489JpZpkJm73r3
 5yDl1
Received: from [64.102.249.9] by web110415.mail.gq1.yahoo.com via HTTP; Tue, 10 Apr 2012 09:45:59 PDT
X-Mailer: YahooMailWebService/0.8.117.340979
Message-ID: <1334076359.55188.YahooMailNeo@web110415.mail.gq1.yahoo.com>
Date: Tue, 10 Apr 2012 09:45:59 -0700 (PDT)
From: peter nightingale <peterdnight@yahoo.com>
Reply-To: peter nightingale <peterdnight@yahoo.com>
Subject: 7.0.25 to 7.0.27 requires -Xmx32m to go to -Xmx512m
To: "users@tomcat.apache.org" <users@tomcat.apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="853938150-2106160660-1334076359=:55188"

--853938150-2106160660-1334076359=:55188
Content-Type: text/plain; charset=us-ascii

I recently updated from 7.0.25. I was able to start with -Xmx32m. After 
getting 7.0.27 - I ended up needing to go all the way to -Xmx512m. Note 
that the OOM only occured on startup. After starting up and attaching 
with JConsole - Heap was very small.


I was able to get 7.0.27 back to to -Xmx32m by updating catalina.properties with:
tomcat.util.scan.DefaultJarScanner.jarsToSkip=*.jar

Rolled back to 7.0.25 ;)

- Peter
--853938150-2106160660-1334076359=:55188--

From users-return-233468-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 10 17:46:54 2012
Return-Path: <users-return-233468-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 44EC79F9B
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 10 Apr 2012 17:46:54 +0000 (UTC)
Received: (qmail 83251 invoked by uid 500); 10 Apr 2012 17:46:50 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 83072 invoked by uid 500); 10 Apr 2012 17:46:50 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 83063 invoked by uid 99); 10 Apr 2012 17:46:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 17:46:50 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rc46fi@googlemail.com designates 209.85.161.173 as permitted sender)
Received: from [209.85.161.173] (HELO mail-gx0-f173.google.com) (209.85.161.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 17:46:46 +0000
Received: by ggnp2 with SMTP id p2so53079ggn.18
        for <users@tomcat.apache.org>; Tue, 10 Apr 2012 10:46:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=0U50CWZCsSaYhDpXm77Qgisp6I4eKcUD+MkbIVzuZj8=;
        b=yyhCZKShp6PL9hTWjrH/thzKd1xKdkfEpxnvmhTXJeFcbI8MM1xZWdShCdXXvKrwro
         9h9l4C77j+Q7YGK9hxExWaaEFGthnYMjOZYJF63GrMjUYyNMwloHUNeQBBpnLZDlQe01
         x4mihlf0/pH/cSFgBdEw3ipKpKENHiFQcMxWhEtBy1Xfe3OgHMikX3tpryHsTytPtxU+
         g/lpFqkTQY4A0n/yDFMFCEMRwa4zYQrDeI/nzPlBH6eqf1KuEu/Q3rXQWO3mOUOhyHnV
         hOu4hopsvL5VaxzhWVa7rmTp3egigcrnAXQg1NlMqPNo6GpLmhlH1qFK2aGEirvQi7vw
         kTUg==
MIME-Version: 1.0
Received: by 10.50.196.165 with SMTP id in5mr3320946igc.8.1334079985429; Tue,
 10 Apr 2012 10:46:25 -0700 (PDT)
Received: by 10.43.133.10 with HTTP; Tue, 10 Apr 2012 10:46:25 -0700 (PDT)
Date: Tue, 10 Apr 2012 19:46:25 +0200
Message-ID: <CAC7UXK9pSQwx6q69kXvNY8x3Bcv+F7tC7Ex3KQVDReDoeNag2A@mail.gmail.com>
Subject: Problems w/ TLS (record-splitting)
From: "Gregor S." <rc46fi@googlemail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

Hi guys,

I know, it's actually not a Tomcat-problem, but I was wondering if one
of those guru hanging around in this mailing-list could give me a hint
on how to handle this problem.

As some of you might be aware, Firefox (from on version 9.x) cannot
handle TLS-records which are served from a server if they are split
into multiple parts.

This behaviour is documented here:
https://bugzilla.mozilla.org/show_bug.cgi?id=702111

Since some of our clients are using Firefox, I just can't lean back
and tell them "well, that's a Firefox-bug, get a decent browser" -
unfortunately.

We are using Apache Tomcat 6.0.24 on Scientific Linux release 6.2
(Carbon), Tomcat is running as a demon via jsvc, and Tomcat is using
the Apache Portable Runtime (APR).

I went through all docs I could find on the net, hoping, there was
some screw I could turn to switch off TLS record splitting on the
server side, but I couldn't find anything.

Our scenario is as follows:

- SSL connection
- user is prompted for ID / password via FormLogin (j_security_check)

And then we get the message

"The connection was reset"
"The connection to the server was reset while the page was loading."

Does any of you guys have an idea, if there is any Tomcat
configuration-parameter I could try to overcome this behaviour?

IE Chrome (both all versions) are working like charm.

Thanks in advance!

Gregor
-- 
just because you're paranoid, don't mean they're not after you...
gpgp-fp: 3DB13F197F8A0360814885D1F1F1E2EFAD509AFD
skype:rc46fi
gplus.to/gregor
twitter.com/#/2smart4u

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233469-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 10 17:47:00 2012
Return-Path: <users-return-233469-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 87FD59FB4
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 10 Apr 2012 17:47:00 +0000 (UTC)
Received: (qmail 86128 invoked by uid 500); 10 Apr 2012 17:46:57 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 86059 invoked by uid 500); 10 Apr 2012 17:46:57 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 86050 invoked by uid 99); 10 Apr 2012 17:46:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 17:46:56 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of knst.kolinko@gmail.com designates 209.85.213.45 as permitted sender)
Received: from [209.85.213.45] (HELO mail-yw0-f45.google.com) (209.85.213.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 17:46:51 +0000
Received: by yhoo21 with SMTP id o21so46920yho.18
        for <users@tomcat.apache.org>; Tue, 10 Apr 2012 10:46:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=BBybQnl0U05JiBP5tzSxYq4ZbbhDiw5i0FxkAkW8xuI=;
        b=W5RbxzEBs7YL2pYIb7RHo8OdThmsC9yDPZJEA8Fo+PNHyjFCumjQ33dNJNrcORlU4w
         bWIA55p5jyUjKa6QTZM/gbuAAGx4UzsE4OnYnyNeYjgVVligAZhEdruNlr/ubHP/z1gc
         jR1//HE8EtIrkZjR5VsnbvgDfjvsJNvbLrYuQu90la8y5Ovp59+6FBx7EybOtqEapKcn
         4YQz1cmliZUUfjlj6602bD3I3+BGDpOgPpY6KzDWvHzjbnPX6TpJAreZ4qBawF5g5SOL
         xFviRTsUKSbMp4x49iyDqev7890VWrM+EUsxoZsNVfVoJjNLHTNwOauC8o0i+qc/foiy
         owqQ==
MIME-Version: 1.0
Received: by 10.236.46.233 with SMTP id r69mr10386981yhb.65.1334079991206;
 Tue, 10 Apr 2012 10:46:31 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Tue, 10 Apr 2012 10:46:31 -0700 (PDT)
In-Reply-To: <C145BA96AD0C234E9319A75A4FCDA5792BF2342619@UK-CRO-s004.tradar.com>
References: <C145BA96AD0C234E9319A75A4FCDA5792BF2342461@UK-CRO-s004.tradar.com>
	<CABzHfVn4kz73ua3SS_0TtftHyg7hnQvF_rEYJHUp_bbZK2w0uw@mail.gmail.com>
	<C145BA96AD0C234E9319A75A4FCDA5792BF2342619@UK-CRO-s004.tradar.com>
Date: Tue, 10 Apr 2012 21:46:31 +0400
Message-ID: <CABzHfVnbCw6SANWKEj3C34OjftjXSZS-bdj4xA3vqoM_avRD3A@mail.gmail.com>
Subject: Re: Problems uploading huge files >2GB to Tomcat app.
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

2012/4/10 Nick Porter <nick.porter@tradar.com>:
>
> [NP] Yes. I can fathom no pattern to them. In fact, the only way I can actually see them is to packet trace the HTTP exchange.

You do not have AccessLogValve configured?!

I did the following to test how the standard Manager application
handles it.  In 6.0.x and then in current 7.0.x.

1. Configured AccessLogValve in server.xml as following, to print
content-length headers of request and response:

 <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs"
   prefix="localhost_access_log." suffix=".txt"
   pattern='%h %l %u %t "%r" %s %b in:[%{content-length}i]
out:[%{content-length}o]'
  />

2. Prepared a two files by concatenating several copies of a zip
archive and renaming it to *.war.

"test.war" is 127,586,991 bytes
"test1.war" is 2,314,844,070 bytes

3. Started Tomcat, logged in into manager and tried to upload the
files as new web applications.

I am using Firefox 11.0, IE 8.0 both on Windows XP.


The results:
1). Uploading test.war (127Mb) in Firefox 11
Tomcat 6.0: OK
The first zip in concatenated file was unzipped as a new webapp.

Tomcat 7.0 Error 500, message
java.lang.IllegalStateException:
org.apache.tomcat.util.http.fileupload.FileUploadBase$SizeLimitExceededException:
the request was rejected because its size (127587196) exceeds the
configured maximum (52428800)

This behaviour of Tomcat 7 is expected, because of setting in its web.xml:
    <multipart-config>
      <!-- 50MB max -->
      <max-file-size>52428800</max-file-size>
      <max-request-size>52428800</max-request-size>
      <file-size-threshold>0</file-size-threshold>
    </multipart-config>

Access log:
Tomcat 6
127.0.0.1 - tomcat [10/Apr/2012:21:20:27 +0400] "POST
/manager/html/upload?org.apache.catalina.filters.CSRF_NONCE=772A4FDB8109600ACA1BB00FBDE37F07
HTTP/1.1" 200 16044 in:[127587194] out:[-]

Tomcat 7
127.0.0.1 - username [10/Apr/2012:21:17:57 +0400] "POST
/manager/html/upload?org.apache.catalina.filters.CSRF_NONCE=011354881097F245EB93726CF9F99CFE
HTTP/1.1" 500 2972 in:[127587196] out:[2972]

So everything is OK.


2). Uploading test1.war (>2Gb):

Both Tomcat 6 and Tomcat 7 close request immediately, responding with
status 400.

Looking into access log I see wrong value of content-length header
from the request.
The value is different between Firefox and IE, but both are wrong,
being negative.
(Apparently the browsers have different coding for
"multipart/form-data", with different overhead).  The values are the
same for Tomcat 6 and 7.

This is from Tomcat 7 access log:

[[[
127.0.0.1 - - [10/Apr/2012:21:08:31 +0400] "POST
/manager/html/upload?org.apache.catalina.filters.CSRF_NONCE=B5B161E96A5566CCE5FA70AB6477B2B9
HTTP/1.1" 400 - in:[-1980123022] out:[-]

127.0.0.1 - - [10/Apr/2012:21:09:24 +0400] "POST
/manager/html/upload?org.apache.catalina.filters.CSRF_NONCE=2B89705754F848DE99DED1259DC376C1
HTTP/1.1" 400 - in:[-198012301] out:[-]
]]]

The first negative value is from Firefox. The second one is from IE.


I'll try to debug it later.

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233470-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 10 17:54:22 2012
Return-Path: <users-return-233470-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CDC8599A8
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 10 Apr 2012 17:54:22 +0000 (UTC)
Received: (qmail 20506 invoked by uid 500); 10 Apr 2012 17:54:19 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 20449 invoked by uid 500); 10 Apr 2012 17:54:19 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 20439 invoked by uid 99); 10 Apr 2012 17:54:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 17:54:19 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [76.96.62.56] (HELO qmta06.westchester.pa.mail.comcast.net) (76.96.62.56)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 17:54:13 +0000
Received: from omta01.westchester.pa.mail.comcast.net ([76.96.62.11])
	by qmta06.westchester.pa.mail.comcast.net with comcast
	id wHs21i0030EZKEL56HtseN; Tue, 10 Apr 2012 17:53:52 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta01.westchester.pa.mail.comcast.net with comcast
	id wHtr1i00g38FjT13MHtsh1; Tue, 10 Apr 2012 17:53:52 +0000
Message-ID: <4F8473AE.2020005@christopherschultz.net>
Date: Tue, 10 Apr 2012 13:53:50 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Distributing Tomcat
References: <121C9D6B8C22084C8E1062778602C1C702BA7C0E@jotneexch.jotne.intra>
In-Reply-To: <121C9D6B8C22084C8E1062778602C1C702BA7C0E@jotneexch.jotne.intra>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Ehsan,

On 4/10/12 6:55 AM, Ehsan Sadeghi wrote:
> I wanted to know if it is legal to create a package (zip file)
> that includes Tomcat and a webapp and distribute it?

http://tomcat.apache.org/legal.html

You should probably read the Apache Software License 2.0, which is the
current license under which Tomcat is released. You can find a link to
it from the above page.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+Ec64ACgkQ9CaO5/Lv0PBBtgCcCCpcyV8v1MyQ4cOq49tTlFMb
jLEAoLIVE1SAuhxqth+ay/A3BNkr3K5h
=n0Z/
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233471-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 10 18:01:27 2012
Return-Path: <users-return-233471-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8E4D59C26
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 10 Apr 2012 18:01:27 +0000 (UTC)
Received: (qmail 46785 invoked by uid 500); 10 Apr 2012 18:01:24 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 46585 invoked by uid 500); 10 Apr 2012 18:01:24 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 46576 invoked by uid 99); 10 Apr 2012 18:01:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 18:01:24 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aw@ice-sa.com designates 212.85.38.228 as permitted sender)
Received: from [212.85.38.228] (HELO tor.combios.es) (212.85.38.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 18:01:15 +0000
Received: from [192.168.245.129] (p549E0932.dip0.t-ipconnect.de [84.158.9.50])
	by tor.combios.es (Postfix) with ESMTPA id 3CBC8DA004A
	for <users@tomcat.apache.org>; Tue, 10 Apr 2012 20:00:53 +0200 (CEST)
Message-ID: <4F84754F.5000508@ice-sa.com>
Date: Tue, 10 Apr 2012 20:00:47 +0200
From: =?ISO-8859-1?Q?Andr=E9_Warnier?= <aw@ice-sa.com>
Reply-To: Tomcat Users List <users@tomcat.apache.org>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Problems uploading huge files >2GB to Tomcat app.
References: <C145BA96AD0C234E9319A75A4FCDA5792BF2342461@UK-CRO-s004.tradar.com>	<CABzHfVn4kz73ua3SS_0TtftHyg7hnQvF_rEYJHUp_bbZK2w0uw@mail.gmail.com>	<C145BA96AD0C234E9319A75A4FCDA5792BF2342619@UK-CRO-s004.tradar.com> <CABzHfVnbCw6SANWKEj3C34OjftjXSZS-bdj4xA3vqoM_avRD3A@mail.gmail.com>
In-Reply-To: <CABzHfVnbCw6SANWKEj3C34OjftjXSZS-bdj4xA3vqoM_avRD3A@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Konstantin Kolinko wrote:
...

> 
> This is from Tomcat 7 access log:
> 
> [[[
> 127.0.0.1 - - [10/Apr/2012:21:08:31 +0400] "POST
> /manager/html/upload?org.apache.catalina.filters.CSRF_NONCE=B5B161E96A5566CCE5FA70AB6477B2B9
> HTTP/1.1" 400 - in:[-1980123022] out:[-]
> 
> 127.0.0.1 - - [10/Apr/2012:21:09:24 +0400] "POST
> /manager/html/upload?org.apache.catalina.filters.CSRF_NONCE=2B89705754F848DE99DED1259DC376C1
> HTTP/1.1" 400 - in:[-198012301] out:[-]
> ]]]
> 
> The first negative value is from Firefox. The second one is from IE.
> 
> 
There is also a factor 10 difference between them, notice ?
That cannot just be a different transfer-encoding. Or else Microsoft have invented a 
really good compression method.


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233472-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 10 18:03:22 2012
Return-Path: <users-return-233472-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D12C49D59
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 10 Apr 2012 18:03:22 +0000 (UTC)
Received: (qmail 57257 invoked by uid 500); 10 Apr 2012 18:03:19 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 57173 invoked by uid 500); 10 Apr 2012 18:03:19 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 57164 invoked by uid 99); 10 Apr 2012 18:03:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 18:03:19 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [76.96.62.96] (HELO qmta09.westchester.pa.mail.comcast.net) (76.96.62.96)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 18:03:11 +0000
Received: from omta22.westchester.pa.mail.comcast.net ([76.96.62.73])
	by qmta09.westchester.pa.mail.comcast.net with comcast
	id wHJP1i0051ap0As59J2qF6; Tue, 10 Apr 2012 18:02:50 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta22.westchester.pa.mail.comcast.net with comcast
	id wJ2p1i00Q38FjT13iJ2qYD; Tue, 10 Apr 2012 18:02:50 +0000
Message-ID: <4F8475C8.6070702@christopherschultz.net>
Date: Tue, 10 Apr 2012 14:02:48 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: 7.0.25 to 7.0.27 requires -Xmx32m to go to -Xmx512m
References: <1334076359.55188.YahooMailNeo@web110415.mail.gq1.yahoo.com>
In-Reply-To: <1334076359.55188.YahooMailNeo@web110415.mail.gq1.yahoo.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Peter,

On 4/10/12 12:45 PM, peter nightingale wrote:
> I recently updated from 7.0.25. I was able to start with -Xmx32m.
> After getting 7.0.27 - I ended up needing to go all the way to
> -Xmx512m. Note that the OOM only occured on startup. After starting
> up and attaching with JConsole - Heap was very small.

Can you configure your JVM to dump the heap on OOME and then post it
somewhere?

I'm developing on Mac OS X and I have 7.0.27 running with a
(system-default) heap size of 128MiB that doesn't bust the heap during
startup.

What webapp version are you running? Mine happen to be 2.4-spec, which
I don't think includes any annotation-scanning, so that may be a big
difference.

> I was able to get 7.0.27 back to to -Xmx32m by updating
> catalina.properties with: 
> tomcat.util.scan.DefaultJarScanner.jarsToSkip=*.jar

You also might be able to put this into your <Context> element:

<JarScanner scanClassPath="false" />

> Rolled back to 7.0.25 ;)

:(

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+EdcgACgkQ9CaO5/Lv0PD+OACfYxSfz3rlggVUHQYPPx9CVdGc
jNoAn3PRIi73K2J3opTYm9QDDbOCcYWr
=xT4O
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233473-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 10 18:06:36 2012
Return-Path: <users-return-233473-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4B63B9E9F
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 10 Apr 2012 18:06:36 +0000 (UTC)
Received: (qmail 73187 invoked by uid 500); 10 Apr 2012 18:06:33 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 72967 invoked by uid 500); 10 Apr 2012 18:06:33 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 72957 invoked by uid 99); 10 Apr 2012 18:06:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 18:06:33 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [76.96.62.16] (HELO qmta01.westchester.pa.mail.comcast.net) (76.96.62.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 18:06:25 +0000
Received: from omta21.westchester.pa.mail.comcast.net ([76.96.62.72])
	by qmta01.westchester.pa.mail.comcast.net with comcast
	id wHCU1i0081ZXKqc51J653p; Tue, 10 Apr 2012 18:06:05 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta21.westchester.pa.mail.comcast.net with comcast
	id wJ651i00V38FjT13hJ65Jp; Tue, 10 Apr 2012 18:06:05 +0000
Message-ID: <4F84768C.9050703@christopherschultz.net>
Date: Tue, 10 Apr 2012 14:06:04 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Problems w/ TLS (record-splitting)
References: <CAC7UXK9pSQwx6q69kXvNY8x3Bcv+F7tC7Ex3KQVDReDoeNag2A@mail.gmail.com>
In-Reply-To: <CAC7UXK9pSQwx6q69kXvNY8x3Bcv+F7tC7Ex3KQVDReDoeNag2A@mail.gmail.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Gregor,

On 4/10/12 1:46 PM, Gregor S. wrote:
> We are using Apache Tomcat 6.0.24 on Scientific Linux release 6.2 
> (Carbon), Tomcat is running as a demon via jsvc, and Tomcat is
> using the Apache Portable Runtime (APR).

What version of APR are you using? Which Connector?

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+EdowACgkQ9CaO5/Lv0PAwHACcCPGL2sal2aSW0KOCQUPsE5Nv
ZUkAniw1J9wR+AbQD2V3Fm0Rt9Pm81E2
=0+Aq
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233474-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 10 18:22:23 2012
Return-Path: <users-return-233474-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F3B4E974A
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 10 Apr 2012 18:22:22 +0000 (UTC)
Received: (qmail 32508 invoked by uid 500); 10 Apr 2012 18:22:19 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 32462 invoked by uid 500); 10 Apr 2012 18:22:19 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 32453 invoked by uid 99); 10 Apr 2012 18:22:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 18:22:19 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of knst.kolinko@gmail.com designates 209.85.161.173 as permitted sender)
Received: from [209.85.161.173] (HELO mail-gx0-f173.google.com) (209.85.161.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 18:22:13 +0000
Received: by ggnp2 with SMTP id p2so82603ggn.18
        for <users@tomcat.apache.org>; Tue, 10 Apr 2012 11:21:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=XeoZUPPH4/QB4qQx/dZ16tDNvbLknqile+zlnsol/9A=;
        b=zK/rq/dQiYBG3o0rHC8ZPd5RbOBMEa/oVDrs2yM3OK/W/pyaBQfe5Pw2hAh9BrrTPH
         BLnzbS+N5czwLMeYzBVf/UzzRdRQg7/OkuNL8MRLk0J4Q83Z1SET1Ta5XGtPSBJviK6j
         eXBvI/qXYEoxGhVicoxw2Vb88ymqjRyg7XdK2uSB0l8JsEOA/9zdiAQtTb6zqXnNrP1/
         tgfv4kiDyaXuKvgzx2W2f4GbWpe4idz1zRrLCpq4x/vzP4F9wr49WSCzyJdgH/OHpZBh
         J5CT53eyyfihsN1H+nJMhY89FOHPgM2KT1jVp5JsnMmgUKzvbD+1TpTbM4qUSswAV3B/
         Bl6Q==
MIME-Version: 1.0
Received: by 10.236.46.233 with SMTP id r69mr10497644yhb.65.1334082112982;
 Tue, 10 Apr 2012 11:21:52 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Tue, 10 Apr 2012 11:21:52 -0700 (PDT)
In-Reply-To: <4F84754F.5000508@ice-sa.com>
References: <C145BA96AD0C234E9319A75A4FCDA5792BF2342461@UK-CRO-s004.tradar.com>
	<CABzHfVn4kz73ua3SS_0TtftHyg7hnQvF_rEYJHUp_bbZK2w0uw@mail.gmail.com>
	<C145BA96AD0C234E9319A75A4FCDA5792BF2342619@UK-CRO-s004.tradar.com>
	<CABzHfVnbCw6SANWKEj3C34OjftjXSZS-bdj4xA3vqoM_avRD3A@mail.gmail.com>
	<4F84754F.5000508@ice-sa.com>
Date: Tue, 10 Apr 2012 22:21:52 +0400
Message-ID: <CABzHfVkTtfOq_guC+0v+=07rKpajzCe=HoGt-fHu4cs3Bi=ASQ@mail.gmail.com>
Subject: Re: Problems uploading huge files >2GB to Tomcat app.
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

2012/4/10 Andr=E9 Warnier <aw@ice-sa.com>:
> Konstantin Kolinko wrote:
> ...
>>
>> This is from Tomcat 7 access log:
>>
>> [[[
>> 127.0.0.1 - - [10/Apr/2012:21:08:31 +0400] "POST
>>
>> /manager/html/upload?org.apache.catalina.filters.CSRF_NONCE=3DB5B161E96A=
5566CCE5FA70AB6477B2B9
>> HTTP/1.1" 400 - in:[-1980123022] out:[-]
>>
>> 127.0.0.1 - - [10/Apr/2012:21:09:24 +0400] "POST
>>
>> /manager/html/upload?org.apache.catalina.filters.CSRF_NONCE=3D2B89705754=
F848DE99DED1259DC376C1
>> HTTP/1.1" 400 - in:[-198012301] out:[-]
>> ]]]
>>
>> The first negative value is from Firefox. The second one is from IE.
>>
>>
> There is also a factor 10 difference between them, notice ?
> That cannot just be a different transfer-encoding. Or else Microsoft have
> invented a really good compression method.
>

;) They are negative values. So if you compare them the Firefox one is
smaller.  I think that one would have to test with several files to
get several data points to confirm the trend.

Here are Firefox bugs regarding upload:of files >2Gb:
https://bugzilla.mozilla.org/show_bug.cgi?id=3D215450
https://bugzilla.mozilla.org/show_bug.cgi?id=3D660159

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233475-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 10 18:27:13 2012
Return-Path: <users-return-233475-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 544579D4B
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 10 Apr 2012 18:27:13 +0000 (UTC)
Received: (qmail 56025 invoked by uid 500); 10 Apr 2012 18:27:10 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 55819 invoked by uid 500); 10 Apr 2012 18:27:09 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 55807 invoked by uid 99); 10 Apr 2012 18:27:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 18:27:09 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [76.96.62.96] (HELO qmta09.westchester.pa.mail.comcast.net) (76.96.62.96)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 18:27:03 +0000
Received: from omta15.westchester.pa.mail.comcast.net ([76.96.62.87])
	by qmta09.westchester.pa.mail.comcast.net with comcast
	id wBwG1i0021swQuc59JSjE1; Tue, 10 Apr 2012 18:26:43 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta15.westchester.pa.mail.comcast.net with comcast
	id wJSj1i00G38FjT13bJSjsT; Tue, 10 Apr 2012 18:26:43 +0000
Message-ID: <4F847B62.9020600@christopherschultz.net>
Date: Tue, 10 Apr 2012 14:26:42 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Problems uploading huge files >2GB to Tomcat app.
References: <C145BA96AD0C234E9319A75A4FCDA5792BF2342461@UK-CRO-s004.tradar.com> <CABzHfVn4kz73ua3SS_0TtftHyg7hnQvF_rEYJHUp_bbZK2w0uw@mail.gmail.com> <C145BA96AD0C234E9319A75A4FCDA5792BF2342619@UK-CRO-s004.tradar.com> <CABzHfVnbCw6SANWKEj3C34OjftjXSZS-bdj4xA3vqoM_avRD3A@mail.gmail.com>
In-Reply-To: <CABzHfVnbCw6SANWKEj3C34OjftjXSZS-bdj4xA3vqoM_avRD3A@mail.gmail.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Konstantin,

On 4/10/12 1:46 PM, Konstantin Kolinko wrote:
> 2). Uploading test1.war (>2Gb):
> 
> Both Tomcat 6 and Tomcat 7 close request immediately, responding
> with status 400.
> 
> Looking into access log I see wrong value of content-length header 
> from the request. The value is different between Firefox and IE,
> but both are wrong, being negative. (Apparently the browsers have
> different coding for "multipart/form-data", with different
> overhead).  The values are the same for Tomcat 6 and 7.
> 
> This is from Tomcat 7 access log:
> 
> [[[ 127.0.0.1 - - [10/Apr/2012:21:08:31 +0400] "POST 
> /manager/html/upload?org.apache.catalina.filters.CSRF_NONCE=B5B161E96A5566CCE5FA70AB6477B2B9
>
> 
HTTP/1.1" 400 - in:[-1980123022] out:[-]
> 
> 127.0.0.1 - - [10/Apr/2012:21:09:24 +0400] "POST 
> /manager/html/upload?org.apache.catalina.filters.CSRF_NONCE=2B89705754F848DE99DED1259DC376C1
>
> 
HTTP/1.1" 400 - in:[-198012301] out:[-]
> ]]]
> 
> The first negative value is from Firefox. The second one is from
> IE.

This page seems to suggest that uploading files larger than 2GiB is
problematic in most web browsers:
http://www.motobit.com/help/scptutl/pa98.htm

Firefox definitely cannot currently upload files bigger than 2^31-1
bytes: https://bugzilla.mozilla.org/show_bug.cgi?id=215450

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+Ee2IACgkQ9CaO5/Lv0PCfPgCcC8n6VoRjx6POYn+tOzx43HMM
0C8An2gfF3rNv8TCTjD5dUKPUWwYEwV0
=wd94
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233476-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 10 19:57:50 2012
Return-Path: <users-return-233476-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F22E2993D
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 10 Apr 2012 19:57:49 +0000 (UTC)
Received: (qmail 80161 invoked by uid 500); 10 Apr 2012 19:57:46 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 80087 invoked by uid 500); 10 Apr 2012 19:57:46 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 80078 invoked by uid 99); 10 Apr 2012 19:57:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 19:57:46 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rc46fi@googlemail.com designates 209.85.213.45 as permitted sender)
Received: from [209.85.213.45] (HELO mail-yw0-f45.google.com) (209.85.213.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 19:57:41 +0000
Received: by yhoo21 with SMTP id o21so151695yho.18
        for <users@tomcat.apache.org>; Tue, 10 Apr 2012 12:57:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=Xq3okSwW5X3lBcOhxtSV64SyGQU1UbCgZCMJP9bHS+c=;
        b=GCz0ZeeEDMPBQp/YSSBW+D5sgKhE5/JmVoarqinysZQxyPZppk6MnEmWqesOxOstfJ
         lOKW6qGTGSmOxL6VdzHGV1EknRmN8u10D+ySYO2u+I2t7LP5+m6P5rzKhlyKULW/AV5I
         8ICc41KUdXEEOi1aqgsIqk93YxQ8NyTEPSHTQpWTV4AfporAav0sOhFgbkYxRRV5FtDQ
         +ECFXtI9gAXzKWUSdkdWHjiqJ2Fwab5haNfK9U0MZ1M3+edC0jsbUrFLjLDW96xg6lLo
         SpNWpTwpkfIZa9fxYEr5ulWa93jJj/H9R1M9PlpzcqIDtrSr41pvzP2CytUUgiTop2HZ
         3L/A==
MIME-Version: 1.0
Received: by 10.50.219.194 with SMTP id pq2mr89405igc.18.1334087841018; Tue,
 10 Apr 2012 12:57:21 -0700 (PDT)
Received: by 10.43.133.10 with HTTP; Tue, 10 Apr 2012 12:57:20 -0700 (PDT)
In-Reply-To: <4F84768C.9050703@christopherschultz.net>
References: <CAC7UXK9pSQwx6q69kXvNY8x3Bcv+F7tC7Ex3KQVDReDoeNag2A@mail.gmail.com>
	<4F84768C.9050703@christopherschultz.net>
Date: Tue, 10 Apr 2012 21:57:20 +0200
Message-ID: <CAC7UXK_JE6MErF0uEDk-XB2hLUrxK31btrmBMW73VUs5J0vXrw@mail.gmail.com>
Subject: Re: Problems w/ TLS (record-splitting)
From: "Gregor S." <rc46fi@googlemail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Chris,

first, thanks for your answer.

Since this is a *sic* "managed server", I don't have root-access, so I
can only guess regarding the version of the APR (it's the one from the
packages, but AFAIK the APR has been stable since quite a while, so I
asume it should be the latest one.

As for tthe connector, I'm using the http-connector with
OpenSSL-extension as described here:

http://tomcat.apache.org/tomcat-6.0-doc/apr.html

I'm using mainly the defaults apart from the SSL-cert-filenames

Unfortunately I can post the complete connector-def tomorrow earliest
since I'm not in the office any more, but will do as soon as I'm on my
desk.

Thanks

Gregor
-- 
just because you're paranoid, don't mean they're not after you...
gpgp-fp: 3DB13F197F8A0360814885D1F1F1E2EFAD509AFD
skype:rc46fi
gplus.to/gregor
twitter.com/#/2smart4u

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233477-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 10 21:09:51 2012
Return-Path: <users-return-233477-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 227B597D3
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 10 Apr 2012 21:09:51 +0000 (UTC)
Received: (qmail 84856 invoked by uid 500); 10 Apr 2012 21:09:47 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 84806 invoked by uid 500); 10 Apr 2012 21:09:47 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 84797 invoked by uid 99); 10 Apr 2012 21:09:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 21:09:47 +0000
X-ASF-Spam-Status: No, hits=-2.8 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.91.2.12] (HELO smtp-outbound-1.vmware.com) (208.91.2.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 21:09:39 +0000
Received: from sc9-mailhost2.vmware.com (sc9-mailhost2.vmware.com [10.113.161.72])
	by smtp-outbound-1.vmware.com (Postfix) with ESMTP id 629342816A
	for <users@tomcat.apache.org>; Tue, 10 Apr 2012 14:09:17 -0700 (PDT)
Received: from zimbra-prod-mta-3.vmware.com (zimbra-prod-mta-3.vmware.com [10.113.160.227])
	by sc9-mailhost2.vmware.com (Postfix) with ESMTP id 5ACBBB02CD
	for <users@tomcat.apache.org>; Tue, 10 Apr 2012 14:09:17 -0700 (PDT)
Received: from localhost (localhost.localdomain [127.0.0.1])
	by zimbra-prod-mta-3.vmware.com (Postfix) with ESMTP id 545451293ED
	for <users@tomcat.apache.org>; Tue, 10 Apr 2012 14:09:17 -0700 (PDT)
X-Virus-Scanned: amavisd-new at zimbra-prod-mta-3.vmware.com
Received: from zimbra-prod-mta-3.vmware.com ([127.0.0.1])
	by localhost (zimbra-prod-mta-3.vmware.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id NPnN-hktFecT for <users@tomcat.apache.org>;
	Tue, 10 Apr 2012 14:09:17 -0700 (PDT)
Received: from zimbra-prod-mbox-5.vmware.com (zimbra-prod-mbox-5.vmware.com [10.113.160.194])
	by zimbra-prod-mta-3.vmware.com (Postfix) with ESMTP id 4066D1293E0
	for <users@tomcat.apache.org>; Tue, 10 Apr 2012 14:09:17 -0700 (PDT)
Date: Tue, 10 Apr 2012 14:09:17 -0700 (PDT)
From: Luke Meyer <lmeyer@vmware.com>
To: users@tomcat.apache.org
Message-ID: <1685558763.1367788.1334092157107.JavaMail.root@zimbra-prod-mbox-5.vmware.com>
In-Reply-To: <977943237.1365654.1334090723938.JavaMail.root@zimbra-prod-mbox-5.vmware.com>
Subject: mod_jk - Firewall connection dropping
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1367787_1011680466.1334092157107"
X-Originating-IP: [10.113.60.13]
X-Mailer: Zimbra 7.1.3_GA_3374 (ZimbraWebClient - GC18 (Win)/7.1.3_GA_3346)

------=_Part_1367787_1011680466.1334092157107
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit

I have some questions about the documentation at http://tomcat.apache.org/connectors-doc/generic_howto/timeouts.html regarding the Firewall Connection Dropping section. I don't think it's quite right, but maybe I misunderstand. 


To quote the sections in question: 


" Many firewalls will allow connection closing, even if they dropped the connection for normal traffic. Therefore you should always use connection_pool_timeout and connection_pool_minsize on the JK side and connectionTimeout on the Tomcat side. 
[...] 
In case none of our recommendations help and you are definitively having problems with idle connection drops, you can disable the use of persistent connections when using JK together with Apache httpd. For this you set "JkOptions +DisableReuse" in your Apache httpd configuration. This will have a huge negative performance impact! " 


The recommendation to use connection_pool_timeout seems good - close connections that have been idle so the firewall doesn't drop them. But I don't see what connectionTimeout on the AJP connector has to do with keepalive timeouts - it seems to be for initial connections only. I would think keepAliveTimeout is the way to get rid of connections that the firewall has dropped - yes? 


I also don't understand why disabling reuse entirely is said to have a "huge negative performance impact!" The only impact I can see is that you have to reopen a connection for each request. If your servers are right next to each other on the network, or even on the same box, as is typical in most AJP setups, then connection time is negligible. In my tests (on the same box) the whole handshake took .1 millisecond - obviously, if there's some latency, that may be a few milliseconds, but in the scenario where a firewall is dropping inactive connections, I hardly think there would be so much throughput that this would matter. Certainly it's not going to matter compared to the risk of threads being tied up on dead connections. And if your network isn't perfect, but the latency is negligible, why not just disable reuse so you never have to take that risk? 


And the biggest question... why does the default configuration assume that connections will always either stay open forever or be properly closed? By default, if connections are dropped, Tomcat eventually becomes unresponsive because the connector thread pool is exhausted, and you must restart. This looks really bad. Why not have a default keepAliveTimeout value that acknowledges the real world isn't perfect and frees threads from dead connections? 
------=_Part_1367787_1011680466.1334092157107--

From users-return-233478-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 10 21:15:21 2012
Return-Path: <users-return-233478-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 43A299B7A
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 10 Apr 2012 21:15:21 +0000 (UTC)
Received: (qmail 5685 invoked by uid 500); 10 Apr 2012 21:15:17 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 5614 invoked by uid 500); 10 Apr 2012 21:15:17 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 5605 invoked by uid 99); 10 Apr 2012 21:15:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 21:15:17 +0000
X-ASF-Spam-Status: No, hits=3.0 required=5.0
	tests=FREEMAIL_FORGED_REPLYTO,RCVD_IN_DNSWL_NONE,REPTO_QUOTE_YAHOO,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [72.30.239.213] (HELO nm40-vm5.bullet.mail.bf1.yahoo.com) (72.30.239.213)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 10 Apr 2012 21:15:06 +0000
Received: from [98.139.212.148] by nm40.bullet.mail.bf1.yahoo.com with NNFMP; 10 Apr 2012 21:14:44 -0000
Received: from [98.139.212.251] by tm5.bullet.mail.bf1.yahoo.com with NNFMP; 10 Apr 2012 21:14:44 -0000
Received: from [127.0.0.1] by omp1060.mail.bf1.yahoo.com with NNFMP; 10 Apr 2012 21:14:44 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 644793.24755.bm@omp1060.mail.bf1.yahoo.com
Received: (qmail 52219 invoked by uid 60001); 10 Apr 2012 21:14:44 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1334092484; bh=fGC2T1vwhngiGdi1aDSfj8vT5CuwDRokzA/FC7v7fY0=; h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=lhtwjPsqt00SqynPjUHEROGC4UwByU+pmNC+MqhIkkVvW2AbfreOr5fypt3cT8/U0iEdTt6xmSAUhTKTVfgePdc+vpeNUpiYv6VnyjWODb86tAcdBSVttBr6ciKx7TYyQ6hKHT7ND2XAYWUoizDM/XJPLiL5g/uwQS38PnOdqFo=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=5HK50C29ZMSGKh6H6ggaMBe6br5zS0I7HUixE6X8m70/8HNWqf7Y9z6cNPgFBCISGF31lDlJAWCQc1PmdTitACAWlSiEld4cANR61utU3+rMTaCV2pydcFGfOMo3lxI5S7XgbVxH/3qjAUGhlQ5cbbNcesWq1NUXAWiO4HANA+U=;
X-YMail-OSG: 6fvwT7EVM1mPopB58mDkCkdwj8vocHbV6ZGcTtBLOf69Zfi
 PfE_ytcJGUoOkq1tMrx37HEHsFwj5jl0NFNN.r4Wcak_iffs2NNCAHP.Z6dQ
 xMxPdXLdClKNAEnhQ.nuesZ9NobKq4.nnPL4NPBxRZLbU2A163v7X0WRamrV
 sT5srOLMuzBQXZypg9nHnXC37VcwtoTJ.re9Kv01BRXhCXZ.dtjLszwSpjGA
 igbPk7MD1o2an8cnqE73DZN0xs2B7Dn1zpI5Rrzov3aYau9egE6VYCeN09bQ
 WB8tScSnx9hBaFDLVx8rUF4G2uUYdZJdIlqiazEEypxZXCreASvWYWmfIBlj
 4qf657tNezZOPdOo5MPQQMh00Q8WfgE.eBZK9IVIvLf2z3Xx1F8FpJx6_kur
 IbB.XcxClzFLK6lhd4uWsevMZ8tSW84g50.Fnq2P56f2wsQg2NmLUusj4HYd
 Eghm5wCnfV0hOzy8OIt5lkFBux.hOsGB16V3c88oESw--
Received: from [67.115.118.49] by web160704.mail.bf1.yahoo.com via HTTP; Tue, 10 Apr 2012 14:14:44 PDT
X-Mailer: YahooMailWebService/0.8.117.340979
References: <1333156346.51845.YahooMailNeo@web160703.mail.bf1.yahoo.com> <4F76EACE.8090103@apache.org>
Message-ID: <1334092484.34103.YahooMailNeo@web160704.mail.bf1.yahoo.com>
Date: Tue, 10 Apr 2012 14:14:44 -0700 (PDT)
From: "B.V. Prasad" <hibvp@yahoo.com>
Reply-To: "B.V. Prasad" <hibvp@yahoo.com>
Subject: Re: High CPU with Tomcat 7.0.26 & 6.0.35
To: Tomcat Users List <users@tomcat.apache.org>
In-Reply-To: <4F76EACE.8090103@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Th thread dump attached below is when the CPU was showing 55% (even after a=
 day) even after all the incoming requests have been disabled. I tried with=
 all latest: JDK 6.0.31, APR 1.4.6 & Tomcat native library 1.22. My -Xmx is=
 2048M, no changes to default PermGen size. I don't have OOME. The CPU is v=
ery high and erratic. Even tried incGc. I am using default settings for thr=
ead pool in server.xml (no changes made).=0A=0A=0AMy server.xml has:=0A=0A=
=A0=A0=A0=A0=A0=A0=A0 Connector port=3D"80" protocol=3D"HTTP/1.1" connectio=
nTimeout=3D"20000" redirectPort=3D"443"=0A=A0=A0=A0=A0=A0=A0=A0 =0A=A0=A0=
=A0=A0=A0=A0=A0 Connector port=3D"443" protocol=3D"HTTP/1.1" SSLEnabled=3D"=
true" maxThreads=3D"100" =0A=A0=A0=A0 acceptCount=3D"100" scheme=3D"https" =
secure=3D"true" clientAuth=3D"false" sslProtocol=3D"TLS" =0A=A0=A0=A0 maxKe=
epAliveRequests=3D"1" SSLCertificateFile=3D"${catalina.home}/conf/xxx.cert"=
 =0A=A0=A0=A0 SSLCertificateKeyFile=3D"${catalina.home}/conf/xxx.key" =0A=
=A0=A0=A0 SSLCertificateChainFile=3D"${catalina.home}/conf/ca.cert"=0A=A0=
=A0=A0=A0=A0=A0=A0 =0A=A0=A0=A0=A0=A0=A0=A0 Connector port=3D"8009" protoco=
l=3D"AJP/1.3" redirectPort=3D"443"=0A=0AI also set jarscanning to false.=0A=
=0A2012-04-06 07:05:52=0AFull thread dump Java HotSpot(TM) Server VM (10.0-=
b23 mixed mode):=0A=0A=A0=A0=A0 "http-80-6" daemon prio=3D10 tid=3D0x0a645c=
00 nid=3D0x3769 in Object.wait() [0x2fb0b000..0x2fb0be30]=0A=A0=A0=A0=A0=A0=
=A0 java.lang.Thread.State: WAITING (on object monitor)=0A=A0=A0=A0 =A0=A0=
=A0 at java.lang.Object.wait(Native Method)=0A=A0=A0=A0 =A0=A0=A0 - waiting=
 on <0x3ad68cd8> (a org.apache.tomcat.util.net.AprEndpoint$Worker)=0A=A0=A0=
=A0 =A0=A0=A0 at java.lang.Object.wait(Object.java:485)=0A=A0=A0=A0 =A0=A0=
=A0 at org.apache.tomcat.util.net.AprEndpoint$Worker.await(AprEndpoint.java=
:1631)=0A=A0=A0=A0 =A0=A0=A0 - locked <0x3ad68cd8> (a org.apache.tomcat.uti=
l.net.AprEndpoint$Worker)=0A=A0=A0=A0 =A0=A0=A0 at org.apache.tomcat.util.n=
et.AprEndpoint$Worker.run(AprEndpoint.java:1656)=0A=A0=A0=A0 =A0=A0=A0 at j=
ava.lang.Thread.run(Thread.java:619)=0A=A0=A0=A0 =0A=A0=A0=A0 "http-443-227=
" daemon prio=3D10 tid=3D0x0a11a000 nid=3D0x2a1a in Object.wait() [0x301a70=
00..0x301a8030]=0A=A0=A0=A0=A0=A0=A0 java.lang.Thread.State: WAITING (on ob=
ject monitor)=0A=A0=A0=A0 =A0=A0=A0 at java.lang.Object.wait(Native Method)=
=0A=A0=A0=A0 =A0=A0=A0 - waiting on <0x3a312c70> (a org.apache.tomcat.util.=
net.AprEndpoint$Worker)=0A=A0=A0=A0 =A0=A0=A0 at java.lang.Object.wait(Obje=
ct.java:485)=0A=A0=A0=A0 =A0=A0=A0 at org.apache.tomcat.util.net.AprEndpoin=
t$Worker.await(AprEndpoint.java:1631)=0A=A0=A0=A0 =A0=A0=A0 - locked <0x3a3=
12c70> (a org.apache.tomcat.util.net.AprEndpoint$Worker)=0A=A0=A0=A0 =A0=A0=
=A0 at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1=
656)=0A=A0=A0=A0 =A0=A0=A0 at java.lang.Thread.run(Thread.java:619)=0A=A0=
=A0=A0 =0A=A0=A0=A0 <<< 237 more threads in the same state for both 80 & 44=
3 together >>>=0A=A0=A0=A0 =0A=A0=A0=A0 "http-443-205" daemon prio=3D10 tid=
=3D0x096a8400 nid=3D0x2a04 runnable [0x3089d000..0x3089e130]=0A=A0=A0=A0=A0=
=A0=A0 java.lang.Thread.State: RUNNABLE=0A=A0=A0=A0 =A0=A0=A0 at org.apache=
.tomcat.jni.Socket.sendbb(Native Method)=0A=A0=A0=A0 =A0=A0=A0 at org.apach=
e.coyote.http11.InternalAprOutputBuffer.flushBuffer(InternalAprOutputBuffer=
.java:711)=0A=A0=A0=A0 =A0=A0=A0 at org.apache.coyote.http11.InternalAprOut=
putBuffer$SocketOutputBuffer.doWrite(InternalAprOutputBuffer.java:742)=0A=
=A0=A0=A0 =A0=A0=A0 at org.apache.coyote.http11.filters.IdentityOutputFilte=
r.doWrite(IdentityOutputFilter.java:127)=0A=A0=A0=A0 =A0=A0=A0 at org.apach=
e.coyote.http11.InternalAprOutputBuffer.doWrite(InternalAprOutputBuffer.jav=
a:552)=0A=A0=A0=A0 =A0=A0=A0 at org.apache.coyote.Response.doWrite(Response=
.java:560)=0A=A0=A0=A0 =A0=A0=A0 at org.apache.catalina.connector.OutputBuf=
fer.realWriteBytes(OutputBuffer.java:364)=0A=A0=A0=A0 =A0=A0=A0 at org.apac=
he.tomcat.util.buf.ByteChunk.append(ByteChunk.java:368)=0A=A0=A0=A0 =A0=A0=
=A0 at org.apache.catalina.connector.OutputBuffer.writeBytes(OutputBuffer.j=
ava:392)=0A=A0=A0=A0 =A0=A0=A0 at org.apache.catalina.connector.OutputBuffe=
r.write(OutputBuffer.java:381)=0A=A0=A0=A0 =A0=A0=A0 at org.apache.catalina=
.connector.CoyoteOutputStream.write(CoyoteOutputStream.java:89)=0A=A0=A0=A0=
 =A0=A0=A0 at org.apache.catalina.connector.CoyoteOutputStream.write(Coyote=
OutputStream.java:83)=0A=A0=A0=A0 =A0=A0=A0 at com.mycompany.xxx.xxx.proces=
s(xxx.java:222)=0A=A0=A0=A0 =A0=A0=A0 at com.mycompany.xxx.xxx.doPost(xxx.j=
ava:111)=0A=A0=A0=A0 =A0=A0=A0 at javax.servlet.http.HttpServlet.service(Ht=
tpServlet.java:637)=0A=A0=A0=A0 =A0=A0=A0 at javax.servlet.http.HttpServlet=
.service(HttpServlet.java:717)=0A=A0=A0=A0 =A0=A0=A0 at org.apache.catalina=
.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:2=
90)=0A=A0=A0=A0 =A0=A0=A0 at org.apache.catalina.core.ApplicationFilterChai=
n.doFilter(ApplicationFilterChain.java:206)=0A=A0=A0=A0 =A0=A0=A0 at org.ap=
ache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:23=
3)=0A=A0=A0=A0 =A0=A0=A0 at org.apache.catalina.core.StandardContextValve.i=
nvoke(StandardContextValve.java:191)=0A=A0=A0=A0 =A0=A0=A0 at org.apache.ca=
talina.core.StandardHostValve.invoke(StandardHostValve.java:127)=0A=A0=A0=
=A0 =A0=A0=A0 at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorRe=
portValve.java:102)=0A=A0=A0=A0 =A0=A0=A0 at org.apache.catalina.valves.Acc=
essLogValve.invoke(AccessLogValve.java:615)=0A=A0=A0=A0 =A0=A0=A0 at org.ap=
ache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)=
=0A=A0=A0=A0 =A0=A0=A0 at org.apache.catalina.connector.CoyoteAdapter.servi=
ce(CoyoteAdapter.java:293)=0A=A0=A0=A0 =A0=A0=A0 at org.apache.coyote.http1=
1.Http11AprProcessor.process(Http11AprProcessor.java:877)=0A=A0=A0=A0 =A0=
=A0=A0 at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandle=
r.process(Http11AprProtocol.java:594)=0A=A0=A0=A0 =A0=A0=A0 at org.apache.t=
omcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1675)=0A=A0=A0=A0 =
=A0=A0=A0 at java.lang.Thread.run(Thread.java:619)=0A=A0=A0=A0 =0A=A0=A0=A0=
 "ajp-8009-Acceptor-0" daemon prio=3D10 tid=3D0x333dfc00 nid=3D0xf54 runnab=
le [0x0494a000..0x0494af30]=0A=A0=A0=A0=A0=A0=A0 java.lang.Thread.State: RU=
NNABLE=0A=A0=A0=A0 =A0=A0=A0 at org.apache.tomcat.jni.Socket.accept(Native =
Method)=0A=A0=A0=A0 =A0=A0=A0 at org.apache.tomcat.util.net.AprEndpoint$Acc=
eptor.run(AprEndpoint.java:1243)=0A=A0=A0=A0 =0A=A0=A0=A0 "ajp-8009-CometPo=
ller-0" daemon prio=3D10 tid=3D0x334e7c00 nid=3D0xf53 in Object.wait() [0x0=
48f9000..0x048f9db0]=0A=A0=A0=A0=A0=A0=A0 java.lang.Thread.State: WAITING (=
on object monitor)=0A=A0=A0=A0 =A0=A0=A0 at java.lang.Object.wait(Native Me=
thod)=0A=A0=A0=A0 =A0=A0=A0 - waiting on <0x384d4378> (a org.apache.tomcat.=
util.net.AprEndpoint$Poller)=0A=A0=A0=A0 =A0=A0=A0 at java.lang.Object.wait=
(Object.java:485)=0A=A0=A0=A0 =A0=A0=A0 at org.apache.tomcat.util.net.AprEn=
dpoint$Poller.run(AprEndpoint.java:1426)=0A=A0=A0=A0 =A0=A0=A0 - locked <0x=
384d4378> (a org.apache.tomcat.util.net.AprEndpoint$Poller)=0A=A0=A0=A0 =0A=
=A0=A0=A0 "ajp-8009-Poller-0" daemon prio=3D10 tid=3D0x33729000 nid=3D0xf52=
 in Object.wait() [0x048a8000..0x048a8e30]=0A=A0=A0=A0=A0=A0=A0 java.lang.T=
hread.State: WAITING (on object monitor)=0A=A0=A0=A0 =A0=A0=A0 at java.lang=
.Object.wait(Native Method)=0A=A0=A0=A0 =A0=A0=A0 - waiting on <0x38484270>=
 (a org.apache.tomcat.util.net.AprEndpoint$Poller)=0A=A0=A0=A0 =A0=A0=A0 at=
 java.lang.Object.wait(Object.java:485)=0A=A0=A0=A0 =A0=A0=A0 at org.apache=
.tomcat.util.net.AprEndpoint$Poller.run(AprEndpoint.java:1426)=0A=A0=A0=A0 =
=A0=A0=A0 - locked <0x38484270> (a org.apache.tomcat.util.net.AprEndpoint$P=
oller)=0A=A0=A0=A0 =0A=A0=A0=A0 "http-443-Acceptor-0" daemon prio=3D10 tid=
=3D0x33728800 nid=3D0xf4c runnable [0x04713000..0x04713f30]=0A=A0=A0=A0=A0=
=A0=A0 java.lang.Thread.State: RUNNABLE=0A=A0=A0=A0 =A0=A0=A0 at org.apache=
.tomcat.jni.Socket.accept(Native Method)=0A=A0=A0=A0 =A0=A0=A0 at org.apach=
e.tomcat.util.net.AprEndpoint$Acceptor.run(AprEndpoint.java:1243)=0A=A0=A0=
=A0 =0A=A0=A0=A0 "http-443-CometPoller-0" daemon prio=3D10 tid=3D0x337bac00=
 nid=3D0xf4b in Object.wait() [0x046c2000..0x046c2db0]=0A=A0=A0=A0=A0=A0=A0=
 java.lang.Thread.State: WAITING (on object monitor)=0A=A0=A0=A0 =A0=A0=A0 =
at java.lang.Object.wait(Native Method)=0A=A0=A0=A0 =A0=A0=A0 - waiting on =
<0x38482310> (a org.apache.tomcat.util.net.AprEndpoint$Poller)=0A=A0=A0=A0 =
=A0=A0=A0 at java.lang.Object.wait(Object.java:485)=0A=A0=A0=A0 =A0=A0=A0 a=
t org.apache.tomcat.util.net.AprEndpoint$Poller.run(AprEndpoint.java:1426)=
=0A=A0=A0=A0 =A0=A0=A0 - locked <0x38482310> (a org.apache.tomcat.util.net.=
AprEndpoint$Poller)=0A=A0=A0=A0 =0A=A0=A0=A0 "http-443-Poller-0" daemon pri=
o=3D10 tid=3D0x337ba400 nid=3D0xf48 in Object.wait() [0x0721f000..0x0722013=
0]=0A=A0=A0=A0=A0=A0=A0 java.lang.Thread.State: WAITING (on object monitor)=
=0A=A0=A0=A0 =A0=A0=A0 at java.lang.Object.wait(Native Method)=0A=A0=A0=A0 =
=A0=A0=A0 - waiting on <0x38482178> (a org.apache.tomcat.util.net.AprEndpoi=
nt$Poller)=0A=A0=A0=A0 =A0=A0=A0 at java.lang.Object.wait(Object.java:485)=
=0A=A0=A0=A0 =A0=A0=A0 at org.apache.tomcat.util.net.AprEndpoint$Poller.run=
(AprEndpoint.java:1426)=0A=A0=A0=A0 =A0=A0=A0 - locked <0x38482178> (a org.=
apache.tomcat.util.net.AprEndpoint$Poller)=0A=A0=A0=A0 =0A=A0=A0=A0 "http-8=
0-Acceptor-0" daemon prio=3D10 tid=3D0x3372e400 nid=3D0xf47 runnable [0x046=
20000..0x04620fb0]=0A=A0=A0=A0=A0=A0=A0 java.lang.Thread.State: RUNNABLE=0A=
=A0=A0=A0 =A0=A0=A0 at org.apache.tomcat.jni.Socket.accept(Native Method)=
=0A=A0=A0=A0 =A0=A0=A0 at org.apache.tomcat.util.net.AprEndpoint$Acceptor.r=
un(AprEndpoint.java:1243)=0A=A0=A0=A0 =0A=A0=A0=A0 "http-80-Sendfile-0" dae=
mon prio=3D10 tid=3D0x33531800 nid=3D0xf46 in Object.wait() [0x045cf000..0x=
045d0030]=0A=A0=A0=A0=A0=A0=A0 java.lang.Thread.State: WAITING (on object m=
onitor)=0A=A0=A0=A0 =A0=A0=A0 at java.lang.Object.wait(Native Method)=0A=A0=
=A0=A0 =A0=A0=A0 - waiting on <0x383905a8> (a org.apache.tomcat.util.net.Ap=
rEndpoint$Sendfile)=0A=A0=A0=A0 =A0=A0=A0 at java.lang.Object.wait(Object.j=
ava:485)=0A=A0=A0=A0 =A0=A0=A0 at org.apache.tomcat.util.net.AprEndpoint$Se=
ndfile.run(AprEndpoint.java:1900)=0A=A0=A0=A0 =A0=A0=A0 - locked <0x383905a=
8> (a org.apache.tomcat.util.net.AprEndpoint$Sendfile)=0A=A0=A0=A0 =0A=A0=
=A0=A0 "http-80-CometPoller-0" daemon prio=3D10 tid=3D0x335fdc00 nid=3D0xf4=
5 in Object.wait() [0x0457e000..0x0457eeb0]=0A=A0=A0=A0=A0=A0=A0 java.lang.=
Thread.State: WAITING (on object monitor)=0A=A0=A0=A0 =A0=A0=A0 at java.lan=
g.Object.wait(Native Method)=0A=A0=A0=A0 =A0=A0=A0 - waiting on <0x38390408=
> (a org.apache.tomcat.util.net.AprEndpoint$Poller)=0A=A0=A0=A0 =A0=A0=A0 a=
t java.lang.Object.wait(Object.java:485)=0A=A0=A0=A0 =A0=A0=A0 at org.apach=
e.tomcat.util.net.AprEndpoint$Poller.run(AprEndpoint.java:1426)=0A=A0=A0=A0=
 =A0=A0=A0 - locked <0x38390408> (a org.apache.tomcat.util.net.AprEndpoint$=
Poller)=0A=A0=A0=A0 =0A=A0=A0=A0 "http-80-Poller-0" daemon prio=3D10 tid=3D=
0x33535000 nid=3D0xf44 in Object.wait() [0x0452d000..0x0452df30]=0A=A0=A0=
=A0=A0=A0=A0 java.lang.Thread.State: WAITING (on object monitor)=0A=A0=A0=
=A0 =A0=A0=A0 at java.lang.Object.wait(Native Method)=0A=A0=A0=A0 =A0=A0=A0=
 - waiting on <0x38390270> (a org.apache.tomcat.util.net.AprEndpoint$Poller=
)=0A=A0=A0=A0 =A0=A0=A0 at java.lang.Object.wait(Object.java:485)=0A=A0=A0=
=A0 =A0=A0=A0 at org.apache.tomcat.util.net.AprEndpoint$Poller.run(AprEndpo=
int.java:1426)=0A=A0=A0=A0 =A0=A0=A0 - locked <0x38390270> (a org.apache.to=
mcat.util.net.AprEndpoint$Poller)=0A=A0=A0=A0 =0A=A0=A0=A0 "ContainerBackgr=
oundProcessor[StandardEngine[Catalina]]" daemon prio=3D10 tid=3D0x33727c00 =
nid=3D0xf43 waiting on condition [0x044dc000..0x044dcdb0]=0A=A0=A0=A0=A0=A0=
=A0 java.lang.Thread.State: TIMED_WAITING (sleeping)=0A=A0=A0=A0 =A0=A0=A0 =
at java.lang.Thread.sleep(Native Method)=0A=A0=A0=A0 =A0=A0=A0 at org.apach=
e.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBas=
e.java:1631)=0A=A0=A0=A0 =A0=A0=A0 at java.lang.Thread.run(Thread.java:619)=
=0A=A0=A0=A0 =0A=A0=A0=A0 "Thread-7" daemon prio=3D10 tid=3D0x33512400 nid=
=3D0xf42 waiting on condition [0x0448b000..0x0448be30]=0A=A0=A0=A0=A0=A0=A0=
 java.lang.Thread.State: TIMED_WAITING (sleeping)=0A=A0=A0=A0 =A0=A0=A0 at =
java.lang.Thread.sleep(Native Method)=0A=A0=A0=A0 =A0=A0=A0 at org.apache.l=
og4j.helpers.FileWatchdog.run(FileWatchdog.java:95)=0A=A0=A0=A0 =0A=A0=A0=
=A0 "Thread-6" daemon prio=3D10 tid=3D0x3378b800 nid=3D0xf41 waiting on con=
dition [0x0443a000..0x0443b0b0]=0A=A0=A0=A0=A0=A0=A0 java.lang.Thread.State=
: TIMED_WAITING (sleeping)=0A=A0=A0=A0 =A0=A0=A0 at java.lang.Thread.sleep(=
Native Method)=0A=A0=A0=A0 =A0=A0=A0 at org.apache.log4j.helpers.FileWatchd=
og.run(FileWatchdog.java:95)=0A=A0=A0=A0 =0A=A0=A0=A0 "Thread-4" daemon pri=
o=3D10 tid=3D0x3378c800 nid=3D0xf3f waiting on condition [0x043e9000..0x043=
e9fb0]=0A=A0=A0=A0=A0=A0=A0 java.lang.Thread.State: TIMED_WAITING (sleeping=
)=0A=A0=A0=A0 =A0=A0=A0 at java.lang.Thread.sleep(Native Method)=0A=A0=A0=
=A0 =A0=A0=A0 at org.apache.log4j.helpers.FileWatchdog.run(FileWatchdog.jav=
a:95)=0A=A0=A0=A0 =0A=A0=A0=A0 "Thread-3" daemon prio=3D10 tid=3D0x337f7c00=
 nid=3D0xf3d waiting on condition [0x00bbb000..0x00bbc030]=0A=A0=A0=A0=A0=
=A0=A0 java.lang.Thread.State: TIMED_WAITING (sleeping)=0A=A0=A0=A0 =A0=A0=
=A0 at java.lang.Thread.sleep(Native Method)=0A=A0=A0=A0 =A0=A0=A0 at org.a=
pache.log4j.helpers.FileWatchdog.run(FileWatchdog.java:95)=0A=A0=A0=A0 =0A=
=A0=A0=A0 "GC Daemon" daemon prio=3D10 tid=3D0x3391cc00 nid=3D0xe8b in Obje=
ct.wait() [0x00b6a000..0x00b6af30]=0A=A0=A0=A0=A0=A0=A0 java.lang.Thread.St=
ate: TIMED_WAITING (on object monitor)=0A=A0=A0=A0 =A0=A0=A0 at java.lang.O=
bject.wait(Native Method)=0A=A0=A0=A0 =A0=A0=A0 - waiting on <0x37fcec68> (=
a sun.misc.GC$LatencyLock)=0A=A0=A0=A0 =A0=A0=A0 at sun.misc.GC$Daemon.run(=
GC.java:100)=0A=A0=A0=A0 =A0=A0=A0 - locked <0x37fcec68> (a sun.misc.GC$Lat=
encyLock)=0A=A0=A0=A0 =0A=A0=A0=A0 "Low Memory Detector" daemon prio=3D10 t=
id=3D0x08ece400 nid=3D0xdd7 runnable [0x00000000..0x00000000]=0A=A0=A0=A0=
=A0=A0=A0 java.lang.Thread.State: RUNNABLE=0A=A0=A0=A0 =0A=A0=A0=A0 "Compil=
erThread1" daemon prio=3D10 tid=3D0x08eccc00 nid=3D0xdd6 waiting on conditi=
on [0x00000000..0x00668578]=0A=A0=A0=A0=A0=A0=A0 java.lang.Thread.State: RU=
NNABLE=0A=A0=A0=A0 =0A=A0=A0=A0 "CompilerThread0" daemon prio=3D10 tid=3D0x=
08eca400 nid=3D0xdd5 waiting on condition [0x00000000..0x005e75f8]=0A=A0=A0=
=A0=A0=A0=A0 java.lang.Thread.State: RUNNABLE=0A=A0=A0=A0 =0A=A0=A0=A0 "Sig=
nal Dispatcher" daemon prio=3D10 tid=3D0x08ec9000 nid=3D0xdd4 runnable [0x0=
0000000..0x00000000]=0A=A0=A0=A0=A0=A0=A0 java.lang.Thread.State: RUNNABLE=
=0A=A0=A0=A0 =0A=A0=A0=A0 "Finalizer" daemon prio=3D10 tid=3D0x08eae400 nid=
=3D0xdd3 in Object.wait() [0x0030c000..0x0030d030]=0A=A0=A0=A0=A0=A0=A0 jav=
a.lang.Thread.State: WAITING (on object monitor)=0A=A0=A0=A0 =A0=A0=A0 at j=
ava.lang.Object.wait(Native Method)=0A=A0=A0=A0 =A0=A0=A0 - waiting on <0x3=
7f1b410> (a java.lang.ref.ReferenceQueue$Lock)=0A=A0=A0=A0 =A0=A0=A0 at jav=
a.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:116)=0A=A0=A0=A0 =A0=
=A0=A0 - locked <0x37f1b410> (a java.lang.ref.ReferenceQueue$Lock)=0A=A0=A0=
=A0 =A0=A0=A0 at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:13=
2)=0A=A0=A0=A0 =A0=A0=A0 at java.lang.ref.Finalizer$FinalizerThread.run(Fin=
alizer.java:159)=0A=A0=A0=A0 =0A=A0=A0=A0 "Reference Handler" daemon prio=
=3D10 tid=3D0x08ead400 nid=3D0xdd2 in Object.wait() [0x002bb000..0x002bbeb0=
]=0A=A0=A0=A0=A0=A0=A0 java.lang.Thread.State: WAITING (on object monitor)=
=0A=A0=A0=A0 =A0=A0=A0 at java.lang.Object.wait(Native Method)=0A=A0=A0=A0 =
=A0=A0=A0 - waiting on <0x37f1b430> (a java.lang.ref.Reference$Lock)=0A=A0=
=A0=A0 =A0=A0=A0 at java.lang.Object.wait(Object.java:485)=0A=A0=A0=A0 =A0=
=A0=A0 at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:116)=
=0A=A0=A0=A0 =A0=A0=A0 - locked <0x37f1b430> (a java.lang.ref.Reference$Loc=
k)=0A=A0=A0=A0 =0A=A0=A0=A0 "main" prio=3D10 tid=3D0x08e2a000 nid=3D0xdce r=
unnable [0x00000000..0xbf7fd7a8]=0A=A0=A0=A0=A0=A0=A0 java.lang.Thread.Stat=
e: RUNNABLE=0A=A0=A0=A0 =0A=A0=A0=A0 "VM Thread" prio=3D10 tid=3D0x08eaa000=
 nid=3D0xdd1 runnable =0A=A0=A0=A0 =0A=A0=A0=A0 "GC task thread#0 (Parallel=
GC)" prio=3D10 tid=3D0x08e30c00 nid=3D0xdcf runnable =0A=A0=A0=A0 =0A=A0=A0=
=A0 "GC task thread#1 (ParallelGC)" prio=3D10 tid=3D0x08e32000 nid=3D0xdd0 =
runnable =0A=A0=A0=A0 =0A=A0=A0=A0 "VM Periodic Task Thread" prio=3D10 tid=
=3D0x08ecfc00 nid=3D0xdd8 waiting on condition =0A=A0=A0=A0 =0A=A0=A0=A0 JN=
I global references: 811=0A=A0=A0=A0 =0A=A0=A0=A0 Heap=0A=A0=A0=A0=A0 PSYou=
ngGen=A0=A0=A0=A0=A0 total 203456K, used 3336K [0xa9b90000, 0xb7f10000, 0xb=
7f10000)=0A=A0=A0=A0=A0=A0 eden space 172928K, 1% used [0xa9b90000,0xa9ed22=
70,0xb4470000)=0A=A0=A0=A0=A0=A0 from space 30528K, 0% used [0xb6140000,0xb=
6140000,0xb7f10000)=0A=A0=A0=A0=A0=A0 to=A0=A0 space 29504K, 0% used [0xb44=
70000,0xb4470000,0xb6140000)=0A=A0=A0=A0=A0 PSOldGen=A0=A0=A0=A0=A0=A0=A0 t=
otal 241088K, used 66235K [0x37f10000, 0x46a80000, 0xa9b90000)=0A=A0=A0=A0=
=A0=A0 object space 241088K, 27% used [0x37f10000,0x3bfbec28,0x46a80000)=0A=
=A0=A0=A0=A0 PSPermGen=A0=A0=A0=A0=A0=A0 total 23168K, used 22999K [0x33f10=
000, 0x355b0000, 0x37f10000)=0A=A0=A0=A0=A0=A0 object space 23168K, 99% use=
d [0x33f10000,0x35585e78,0x355b0000)=0A=0A________________________________=
=0AFrom: Mark Thomas <markt@apache.org>=0ATo: Tomcat Users List <users@tomc=
at.apache.org> =0ASent: Saturday, March 31, 2012 4:30 AM=0ASubject: Re: Hig=
h CPU with Tomcat 7.0.26 & 6.0.35=0A=0AOn 31/03/2012 02:12, B.V. Prasad wro=
te:=0A> I am using Tomcat 6.0.16 in production. When I try to upgrade to=0A=
> Tomcat 6.0.35, I see high CPU (about 90% vs. about 20% for 6.0.16),=0A> a=
ll other things being equal, except that I had to set=0A> setBufferSize(163=
84) in HTTPResponse in order to disable chunked=0A> encoding (needed as som=
e of my client appliances fail otherwise). I=0A> see the same high CPU issu=
e even with Tomcat 7.0.26. Any help is=0A> greatly appreciated.=0A=0AThread=
 dumps.=0A=0AMark=0A=0A----------------------------------------------------=
-----------------=0ATo unsubscribe, e-mail: users-unsubscribe@tomcat.apache=
.org=0AFor additional commands, e-mail: users-help@tomcat.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233479-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 10 21:54:29 2012
Return-Path: <users-return-233479-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CFB109F6E
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 10 Apr 2012 21:54:29 +0000 (UTC)
Received: (qmail 31260 invoked by uid 500); 10 Apr 2012 21:54:26 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 31069 invoked by uid 500); 10 Apr 2012 21:54:26 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 31060 invoked by uid 99); 10 Apr 2012 21:54:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 21:54:26 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [76.96.59.227] (HELO qmta12.westchester.pa.mail.comcast.net) (76.96.59.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 21:54:20 +0000
Received: from omta03.westchester.pa.mail.comcast.net ([76.96.62.27])
	by qmta12.westchester.pa.mail.comcast.net with comcast
	id wMlz1i0020bG4ec5CMtzSk; Tue, 10 Apr 2012 21:53:59 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta03.westchester.pa.mail.comcast.net with comcast
	id wMtz1i01938FjT13PMtzm3; Tue, 10 Apr 2012 21:53:59 +0000
Message-ID: <4F84ABF6.6010203@christopherschultz.net>
Date: Tue, 10 Apr 2012 17:53:58 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Problems w/ TLS (record-splitting)
References: <CAC7UXK9pSQwx6q69kXvNY8x3Bcv+F7tC7Ex3KQVDReDoeNag2A@mail.gmail.com> <4F84768C.9050703@christopherschultz.net> <CAC7UXK_JE6MErF0uEDk-XB2hLUrxK31btrmBMW73VUs5J0vXrw@mail.gmail.com>
In-Reply-To: <CAC7UXK_JE6MErF0uEDk-XB2hLUrxK31btrmBMW73VUs5J0vXrw@mail.gmail.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Gregor,

On 4/10/12 3:57 PM, Gregor S. wrote:
> Since this is a *sic* "managed server", I don't have root-access,
> so I can only guess regarding the version of the APR (it's the one
> from the packages, but AFAIK the APR has been stable since quite a
> while, so I assume it should be the latest one.

I just added dumping version numbers for both APR and OpenSSL to
catalina.out on startup. I've proposed them for back-porting to 6.0.x,
so you might have to wait a bit.

> As for the connector, I'm using the http-connector with 
> OpenSSL-extension as described here:
> 
> http://tomcat.apache.org/tomcat-6.0-doc/apr.html
> 
> I'm using mainly the defaults apart from the SSL-cert-filenames

Okay, so you're sure you're using APR and OpenSSL (otherwise, the SSL
setup wouldn't work properly with the SSLCertificateFilename and stuff
like that).

> Unfortunately I can post the complete connector-def tomorrow
> earliest since I'm not in the office any more, but will do as soon
> as I'm on my desk.

I think this may come down to the exact version of OpenSSL and/or APR
(probably OpenSSL) that you have. You may have to upgrade in order to
accept connections from these clients :(

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+Eq/YACgkQ9CaO5/Lv0PAPPwCeJiOjhLd0uwb6mbn65OwBgrBQ
tHUAnAqxzcP7DvIx+0ECj57PSQEx7Yvb
=FJ7k
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233480-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 10 22:21:53 2012
Return-Path: <users-return-233480-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D39159018
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 10 Apr 2012 22:21:53 +0000 (UTC)
Received: (qmail 1691 invoked by uid 500); 10 Apr 2012 22:21:50 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 1639 invoked by uid 500); 10 Apr 2012 22:21:50 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 1627 invoked by uid 99); 10 Apr 2012 22:21:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 22:21:50 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of qballer@gmail.com designates 209.85.160.173 as permitted sender)
Received: from [209.85.160.173] (HELO mail-gy0-f173.google.com) (209.85.160.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 22:21:43 +0000
Received: by ghrr14 with SMTP id r14so236601ghr.18
        for <users@tomcat.apache.org>; Tue, 10 Apr 2012 15:21:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=k12iSe13kfCbl4DE/+Ylvtn1SmqfPOXyEIR/sMkp7cM=;
        b=U24hMecVbC/H+f+OAQ21bCmw0IGVidjA8KxN/8HSU0KG684tKCFzFwVzzObekr+FMl
         oPFhLQg2b76wLUk+ZGZZzKccg+WIt0zAkwYE34HghLYGvRmzIOV39vHgGt6j3oSycfm3
         U5vXHvwIq0CKMC9P5VqVsLcNr+/M4/JDAVG7qNlCJD0x/4fnpC/m5nKUv/Sf98MgbYzx
         TJEXS5gcIFxKx22Lv9ym9Mkhy66TfQSPMNTS+hQeGl128/sm+op7o9W35vZmQpp+dH8w
         cJ02XuKVU2BjuUpraDkZpHpBaxfT9VHZmYM5TDVNE7yAg5FIG6zGE6fJtkbKgVu7pJhc
         ORdg==
MIME-Version: 1.0
Received: by 10.101.165.33 with SMTP id s33mr3539100ano.70.1334096482875; Tue,
 10 Apr 2012 15:21:22 -0700 (PDT)
Received: by 10.147.40.20 with HTTP; Tue, 10 Apr 2012 15:21:22 -0700 (PDT)
In-Reply-To: <4F845254.7060401@pidster.com>
References: <CAPZZA0rq298daEajvZc709KeBbr43oyxvifiMdKMTg0hu7dZtA@mail.gmail.com>
	<4F5A7EAB.3000103@kippdata.de>
	<CAPZZA0rYdg2yB4PuLRLYybgiddM7Mdg_sNqG6bR_V73bpwymzg@mail.gmail.com>
	<CAPZZA0p4Tho9MirLg2pG9o5BWORh7UNNbd=pFJY21ab2RE7Bbg@mail.gmail.com>
	<4F845254.7060401@pidster.com>
Date: Wed, 11 Apr 2012 00:21:22 +0200
Message-ID: <CAPZZA0oNfV8f8UbLjtxJeO-Czxg_ojepK8Gx8fz2t3uCcfPW+g@mail.gmail.com>
Subject: Re: Non page pool issue will not go away, please help.
From: Doron Tsur <qballer@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=001636c5bc69f53bfd04bd5a8a99

--001636c5bc69f53bfd04bd5a8a99
Content-Type: text/plain; charset=ISO-8859-1

Another conclusion to share here is that when running on windows 2003
enterprise R2 (the one we tested, but could be other windows OS) killing
tomcat will not return the non page pool back to the OS. Even on systems
that it isn't leaking. Usually there is no need for so much memory
including our system, but this should be checked.


PID- thanks for the tip.


On Tue, Apr 10, 2012 at 5:31 PM, Pid <pid@pidster.com> wrote:

> On 10/04/2012 13:11, Doron Tsur wrote:
> > Switching to Blocking IO from Non Blocking IO seems to have solved the
> > issue. I don't know why, does anybody have ideas?
>
> Try the latest version of Tomcat.  There were patches to the Connector
> code in versions subsequent to 7.0.23.
>
>
> p
>
>
> --
>
> [key:62590808]
>
>

--001636c5bc69f53bfd04bd5a8a99--

From users-return-233481-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 10 22:37:12 2012
Return-Path: <users-return-233481-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 63B879719
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 10 Apr 2012 22:37:12 +0000 (UTC)
Received: (qmail 39930 invoked by uid 500); 10 Apr 2012 22:37:09 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 39781 invoked by uid 500); 10 Apr 2012 22:37:09 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 39772 invoked by uid 99); 10 Apr 2012 22:37:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 22:37:09 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pid@pidster.com designates 209.85.212.171 as permitted sender)
Received: from [209.85.212.171] (HELO mail-wi0-f171.google.com) (209.85.212.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 22:37:00 +0000
Received: by wibhj13 with SMTP id hj13so2849804wib.0
        for <users@tomcat.apache.org>; Tue, 10 Apr 2012 15:36:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type;
        bh=FI+kvjLyrEPXs3Dj+jKDskwJ2ds+vFMwns8sK/W0vNE=;
        b=XzQNGsialXlvH4Qh6MVk0g8TuF/TrC1ZAGZGYC03LOqF5NOoGp4UWntqqTJb26e7PH
         /TfxKQ8mptTytYn4x6+V0h5uA7gxPt9DqhO/mR+nU956UVCr/Ui2T4lJ6vXQcbhKS7wL
         TVYzfgJxjQ4RU2WBc+zXvFxpzZfyuh5EDtmAE=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type:x-gm-message-state;
        bh=FI+kvjLyrEPXs3Dj+jKDskwJ2ds+vFMwns8sK/W0vNE=;
        b=D5SHCCWrQ/EhFUYzisn5BtfWRuOrfwhPpFP+eydzdtLAZNVjJAhIYfl7WvR9b//z7P
         7pcM/T/w+a94rjPlIrLaRTdDBtPZ1QuhZdIp6KLglVgn1Y39WDL3tiKhEcm9JcuzsyQg
         L4XG0ME0Z2HEtvpX5eTQxqx1WvZUYuOPfB9czFI+HAA4CRzhQu07GOITQbf0FYpyO0bd
         aFhLy3Dc4RtG2p5fvZzDlWm27a6QhflVjrHhJ7JVt5XK7Nn9N5FvX6vy91Kbv9ef/OiM
         Zpl/+ujhsC5LXXjUdk41NzcIg+wANznpp9IQ9wntA9iqr8WnvR4gTlT4DmOVOKs8EJrr
         REpw==
Received: by 10.180.80.9 with SMTP id n9mr10837705wix.4.1334097400638;
        Tue, 10 Apr 2012 15:36:40 -0700 (PDT)
Received: from Asura.local (cpc10-lewi14-2-0-cust355.2-4.cable.virginmedia.com. [82.4.249.100])
        by mx.google.com with ESMTPS id k6sm40681884wiy.7.2012.04.10.15.36.38
        (version=SSLv3 cipher=OTHER);
        Tue, 10 Apr 2012 15:36:39 -0700 (PDT)
Message-ID: <4F84B5FC.2050704@pidster.com>
Date: Tue, 10 Apr 2012 23:36:44 +0100
From: Pid <pid@pidster.com>
Organization: Pidster Inc
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Non page pool issue will not go away, please help.
References: <CAPZZA0rq298daEajvZc709KeBbr43oyxvifiMdKMTg0hu7dZtA@mail.gmail.com> <4F5A7EAB.3000103@kippdata.de> <CAPZZA0rYdg2yB4PuLRLYybgiddM7Mdg_sNqG6bR_V73bpwymzg@mail.gmail.com> <CAPZZA0p4Tho9MirLg2pG9o5BWORh7UNNbd=pFJY21ab2RE7Bbg@mail.gmail.com> <4F845254.7060401@pidster.com> <CAPZZA0oNfV8f8UbLjtxJeO-Czxg_ojepK8Gx8fz2t3uCcfPW+g@mail.gmail.com>
In-Reply-To: <CAPZZA0oNfV8f8UbLjtxJeO-Czxg_ojepK8Gx8fz2t3uCcfPW+g@mail.gmail.com>
X-Enigmail-Version: 1.4
OpenPGP: id=62590808
Content-Type: multipart/signed; micalg=pgp-sha512;
 protocol="application/pgp-signature";
 boundary="------------enig41555D3511BA2F386A32F382"
X-Gm-Message-State: ALoCoQlZDE3w4YjNoKj8m+Zfy8D+SF7j4Evgxe8qjM9BbQZ6yRGM83uqs7tjuKp/XJSNTh5warjc

--------------enig41555D3511BA2F386A32F382
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

On 10/04/2012 23:21, Doron Tsur wrote:
> Another conclusion to share here is that when running on windows 2003
> enterprise R2 (the one we tested, but could be other windows OS) killin=
g
> tomcat will not return the non page pool back to the OS. Even on system=
s
> that it isn't leaking. Usually there is no need for so much memory
> including our system, but this should be checked.

You should use a tool like VisualVM or JConsole to inspect the running
JVM and try to identify if one of the memory areas of the JVM increases
in parallel with the leak you're seeing from the OS view.


p


> PID- thanks for the tip.
>=20
>=20
> On Tue, Apr 10, 2012 at 5:31 PM, Pid <pid@pidster.com> wrote:
>=20
>> On 10/04/2012 13:11, Doron Tsur wrote:
>>> Switching to Blocking IO from Non Blocking IO seems to have solved th=
e
>>> issue. I don't know why, does anybody have ideas?
>>
>> Try the latest version of Tomcat.  There were patches to the Connector=

>> code in versions subsequent to 7.0.23.
>>
>>
>> p
>>
>>
>> --
>>
>> [key:62590808]
>>
>>
>=20


--=20

[key:62590808]


--------------enig41555D3511BA2F386A32F382
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.18 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iQIcBAEBCgAGBQJPhLYAAAoJEGoM2OGpOvr9XkIQALCcFFd/bSqu8trid2x+9r2K
04+XT9shHH0+Ys+U4vFenCrO7QcMAk+poQ6kqS2sYFdn5XSyS1aPNxl42dqVegKP
a+VWLxUcl4PXOgUKAvGQHP8etd7IajB4FxE8fVhkw7Nay+mWCJ565popqQHyz0PR
QKxaf8C5JIbvunc9p/3bCOH3VlqB9Yv9CVLFww+urO9uN/QFTm5+FQJQZCGzIWTj
4dT3nrFMgEcEHZpMhdZdFsc7bccnlMhXfghueSVKgAZsui1cYYgRQdOcRcRyoNk/
VSmVWLiFwnByoULdrL5l6dGASGKf7TCd1/Uk4MBRDqNzgSFmNAjmrnCNR/42PaNm
jHB4jGg1jQgDD5HhiSo/CvTjAsNKCgvobga2HfOz8gwTuD+ZLQW+KFK1Emm7E5Ky
vbfmabpW24nWSUrISuWXtTcipY4zVrFntb7rdaBzHV56HlS/aLvaXIKbLHKx4pw+
N6JOwJj9nJPq/qaOXO5sU+j9NG8oFu/+cPhNJOvTWJb6+SCDoWNg27VH31FchKQC
ynCPtOKsGbJgnsvBuP4OWyOQ6cVFFmDsr8u7v9COyecnue8XzUNN1kEKI/yf5IKt
NEFzO8VXzLfhcsQQGoBZdeOFx0lQOKLMgeOi0WkFSetTgjqCql7famoE5zKKcc/R
Vh1C/cIAElzFo+R+HQMS
=q79V
-----END PGP SIGNATURE-----

--------------enig41555D3511BA2F386A32F382--

From users-return-233482-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 10 22:37:35 2012
Return-Path: <users-return-233482-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 82E599744
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 10 Apr 2012 22:37:35 +0000 (UTC)
Received: (qmail 43180 invoked by uid 500); 10 Apr 2012 22:37:32 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 43129 invoked by uid 500); 10 Apr 2012 22:37:32 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 43119 invoked by uid 99); 10 Apr 2012 22:37:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 22:37:32 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of knst.kolinko@gmail.com designates 209.85.213.45 as permitted sender)
Received: from [209.85.213.45] (HELO mail-yw0-f45.google.com) (209.85.213.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 Apr 2012 22:37:27 +0000
Received: by yhoo21 with SMTP id o21so243490yho.18
        for <users@tomcat.apache.org>; Tue, 10 Apr 2012 15:37:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=QoBgpl5l9eo+JHs9IqFNZMKHqADFjOj7RMlxEfw/QM4=;
        b=PnfO3M0qEttOgJKuLWFWXqGnwpJWt3Ws0F6K1BQh2R/3xQNHHWHRMKuIkrRIp/0+lA
         0+aLBOgZwJwUFlgs0tt0SMWnD5nxhhSgXcsDZNgR/okl2siE1OtxNmpI7WW2xHkeoVgB
         g/ZB+rQlsTi0jX4Qsp45Bjq/8OQqC8Qo3lsDoozbnAXyRS6rLuoPZp+BitXzIwi70tvE
         ZFFzrHqo8gi0tyfFzmx4Ms6XfV6PvWMWcguRqqWTzSZv5CObGbqWZm4c7anH9ZF6ti11
         Nbxn6L1hUU16QD8TE8ZAz2sGS6mJa2N0XDFkxrsHo7skGIKmF03Dse530lU6qg6Jsd3O
         Pgig==
MIME-Version: 1.0
Received: by 10.101.130.20 with SMTP id h20mr3488722ann.58.1334097426994; Tue,
 10 Apr 2012 15:37:06 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Tue, 10 Apr 2012 15:37:06 -0700 (PDT)
In-Reply-To: <CAC7UXK9pSQwx6q69kXvNY8x3Bcv+F7tC7Ex3KQVDReDoeNag2A@mail.gmail.com>
References: <CAC7UXK9pSQwx6q69kXvNY8x3Bcv+F7tC7Ex3KQVDReDoeNag2A@mail.gmail.com>
Date: Wed, 11 Apr 2012 02:37:06 +0400
Message-ID: <CABzHfVnXmNkxnXWUJyybELpYctMdNnL0PTG-hOx6LF4WnYZZCg@mail.gmail.com>
Subject: Re: Problems w/ TLS (record-splitting)
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

2012/4/10 Gregor S. <rc46fi@googlemail.com>:
> Hi guys,
>
> I know, it's actually not a Tomcat-problem, but I was wondering if one
> of those guru hanging around in this mailing-list could give me a hint
> on how to handle this problem.
>
> As some of you might be aware, Firefox (from on version 9.x) cannot
> handle TLS-records which are served from a server if they are split
> into multiple parts.
>
> This behaviour is documented here:
> https://bugzilla.mozilla.org/show_bug.cgi?id=702111
>
> Since some of our clients are using Firefox, I just can't lean back
> and tell them "well, that's a Firefox-bug, get a decent browser" -
> unfortunately.
>
> We are using Apache Tomcat 6.0.24 on Scientific Linux release 6.2
> (Carbon), Tomcat is running as a demon via jsvc, and Tomcat is using
> the Apache Portable Runtime (APR).
>
> I went through all docs I could find on the net, hoping, there was
> some screw I could turn to switch off TLS record splitting on the
> server side, but I couldn't find anything.
>
> Our scenario is as follows:
>
> - SSL connection
> - user is prompted for ID / password via FormLogin (j_security_check)
>
> And then we get the message
>
> "The connection was reset"
> "The connection to the server was reset while the page was loading."
>
> Does any of you guys have an idea, if there is any Tomcat
> configuration-parameter I could try to overcome this behaviour?
>
> IE Chrome (both all versions) are working like charm.
>

1. Reading [1] especially Comment 7 it does not looks like browser problem.

It says it is because browser is not sending all data in one big
packet, but is sending some small portion first. Am I missing
something?


2. Comment 37 shows some web application coding patterns that lead to
observing this error.

Does this happen with some specific web application / some specific
pages? (So there is some specific error there), or "standard"
applications fail as well?


3. I think you should consider updating to a more recent version of
Tomcat 6, as well as of Tomcat-Native and OpenSSL (and maybe APR as
well).

See
http://tomcat.apache.org/security-6.html
http://tomcat.apache.org/security-native.html

BTW, that issue [1] and ms12-006 referenced in it [2] discuss TLS 1.1 and 1.2.


[2] http://technet.microsoft.com/en-us/security/bulletin/ms12-006

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233483-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 11 02:47:39 2012
Return-Path: <users-return-233483-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DF4499FFE
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 11 Apr 2012 02:47:38 +0000 (UTC)
Received: (qmail 86800 invoked by uid 500); 11 Apr 2012 02:47:35 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 86756 invoked by uid 500); 11 Apr 2012 02:47:35 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 86727 invoked by uid 99); 11 Apr 2012 02:47:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2012 02:47:34 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.139.91.191] (HELO nm4-vm1.bullet.mail.sp2.yahoo.com) (98.139.91.191)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 11 Apr 2012 02:47:27 +0000
Received: from [98.139.91.63] by nm4.bullet.mail.sp2.yahoo.com with NNFMP; 11 Apr 2012 02:47:07 -0000
Received: from [98.139.91.48] by tm3.bullet.mail.sp2.yahoo.com with NNFMP; 11 Apr 2012 02:47:07 -0000
Received: from [127.0.0.1] by omp1048.mail.sp2.yahoo.com with NNFMP; 11 Apr 2012 02:47:07 -0000
X-Yahoo-Newman-Property: ymail-5
X-Yahoo-Newman-Id: 347014.73620.bm@omp1048.mail.sp2.yahoo.com
Received: (qmail 10585 invoked by uid 60001); 11 Apr 2012 02:47:06 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1334112426; bh=rBMYpzQezeit2IcfUNdOTsb9VyZ7kOz54iSXpw1BNZ0=; h=X-YMail-OSG:Received:X-Mailer:Message-ID:Date:From:Subject:To:MIME-Version:Content-Type; b=4DJzbPaU4OPuvG04QED+fJ9uZTTy9K5TOJJwZdKe/uS5TdXZpxccoND9QQkfE95x/LNaKjB/+uyISstWksLTOJo3Rnq35SAIXOv0qLQREFQl/RxCLIeIkfWegE6uY2b0nFHKFYzu8gtAeym3zKir/NUV0DiLC8hJFNR7F57hmPA=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Message-ID:Date:From:Subject:To:MIME-Version:Content-Type;
  b=t+pU5I5VR5qUOK+jWz/BY2ibZAlvIRbttx0FLl8ZZ4MgFEDCSF5LDO9zh5swDfqGRbWZwtT72LaKYfPduew6vl2QoFmB3A/I9Stx1Mqgu5Z99b+CkYxfXhz8TS6TMAMHD6zNtS89TWBkKZtrtEajGOIW2kTWr3GW8Wwm86ZwoV8=;
X-YMail-OSG: YcDC9oEVM1lvHs1uzdM5658asOQd.iIrMyZWsD_SP7UumBf
 25w4sAmv43TO2dmqyxMw1hTGyliAdAca0zph26B3zLe4mMOoUtfwH_MhV3Pg
 52JNx6pAd6ZQY6gtk8_MU2gx2uyYRSwUDXNtX4Cw7nsqcvrhmNY5oaZdIENA
 DKRtJ2f3pkHh1LUXfKe1QDbjYQlLVyE9w3kPqDX6kUzRt832sA2t4.68uX0k
 twv.vd09GZSc0JxoVwUbHeHRVH4RXD4QHT_THl0gmJLHbYNZuwsBSkuqcfe7
 yZ0WjD4aV0_fhVEtcPcBdmof3K6_LinKrcm1b0hHXY4brhKcD1V9ytWi9eVY
 TRhpCMc2Cj_DKuNll00w8nSirv6ZW2pGpjjbKW9Pdb5BPXILP5JSGxoLO4JJ
 FuMAlkqpREVm_UE60imYM94T6V18YIGCJH8M.jVaMa1LPW16jYc1wAvtjF0Y
 ihH3LPyVBiBDTRr3EEbqpuuUqUA3HHqnHGs2XX4bHfsW9PAhMPwCqscFv3UH
 Zn33bMviz0lIkyCEFQgn9sIabxZoVimA3ey2aTaqC3kU1jT58PYoAACBe4Rx
 jbYzIi9HL3qgFiCo-
Received: from [98.139.53.145] by web110413.mail.gq1.yahoo.com via HTTP; Tue, 10 Apr 2012 19:47:06 PDT
X-Mailer: YahooMailWebService/0.8.117.340979
Message-ID: <1334112426.9730.YahooMailMobile@web110413.mail.gq1.yahoo.com>
Date: Tue, 10 Apr 2012 19:47:06 -0700 (PDT)
From: Peter <peterdnight@yahoo.com>
Subject: Re: 7.0.25 to 7.0.27 requires -Xmx32m to go to -Xmx512m
To: Tomcat Users List <users@tomcat.apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="-904208086-2086949437-1334112426=:9730"
X-Virus-Checked: Checked by ClamAV on apache.org

---904208086-2086949437-1334112426=:9730
Content-Type: text/plain; charset=us-ascii

hey Christopher,

the app I used that uncovered the issue is one I use exclusively to validate tomcat releases;) it is a "hello world" style app using spring/servlet3.0. it has simple spring aop point cutting via jamon , simple spring jms (active mq) simple spring jaxrs, simple spring jaxws, simple spring mvc, simple spring security,... (spring 3.0.7)

bunch of very simple examples that end up pulling in "many" jars.

I will grab a dump tomorrow,  thanks for response,
peter
---904208086-2086949437-1334112426=:9730--

From users-return-233484-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 11 08:41:40 2012
Return-Path: <users-return-233484-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A80829C82
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 11 Apr 2012 08:41:40 +0000 (UTC)
Received: (qmail 1787 invoked by uid 500); 11 Apr 2012 08:41:37 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 1544 invoked by uid 500); 11 Apr 2012 08:41:32 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 1477 invoked by uid 99); 11 Apr 2012 08:41:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2012 08:41:30 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [195.50.194.148] (HELO mx6.playtech.com) (195.50.194.148)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2012 08:41:21 +0000
Received: from ee-exch1.EE.playtech.corp (194.126.102.178) by mx6.playtech.com
 (195.50.194.148) with Microsoft SMTP Server (TLS) id 14.1.270.1; Wed, 11 Apr
 2012 11:40:02 +0300
Received: from il-exch1.IL.playtech.corp (192.168.7.34) by
 ee-exch1.EE.playtech.corp (192.168.3.25) with Microsoft SMTP Server (TLS) id
 8.2.255.0; Wed, 11 Apr 2012 11:40:55 +0300
Received: from il-exch1.IL.playtech.corp ([192.168.7.34]) by il-exch1
 ([192.168.7.34]) with mapi; Wed, 11 Apr 2012 11:40:53 +0300
From: Vyacheslav Trainin <Vyacheslav.Trainin@playtech.com>
To: "'users@tomcat.apache.org'" <users@tomcat.apache.org>
Date: Wed, 11 Apr 2012 11:40:52 +0300
Subject: RE: tomcat asynchronous invocation problem
Thread-Topic: tomcat asynchronous invocation problem
Thread-Index: Ac0W7wcDQfttP8KQQyKc+RFTrUvWuQAz4U5g
Message-ID: <DCAEB2F31E665B4081B49A6DE402946130F7022BB5@il-exch1>
References: <DCAEB2F31E665B4081B49A6DE402946130F7022A25@il-exch1>
 <4F831E50.1060106@pidster.com>
 <DCAEB2F31E665B4081B49A6DE402946130F7022A5A@il-exch1>
 <f0b33abe-4266-4bfa-b4f4-fc44477c1f1c@email.android.com>
In-Reply-To: <f0b33abe-4266-4bfa-b4f4-fc44477c1f1c@email.android.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: yes
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/signed; protocol="application/x-pkcs7-signature";
	micalg=SHA1; boundary="----=_NextPart_000_008B_01CD17D7.F305BF20"
MIME-Version: 1.0

------=_NextPart_000_008B_01CD17D7.F305BF20
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: 7bit

For those who interested I opened Bug 53061 for this issue


-----Original Message-----
From: Mark Thomas [mailto:markt@apache.org]
Sent: Tuesday, April 10, 2012 10:52 AM
To: Tomcat Users List
Subject: RE: tomcat asynchronous invocation problem



Vyacheslav Trainin <Vyacheslav.Trainin@playtech.com> wrote:

>I reproduced it on:
>	- tomcat-7.0.23 and 7.0.25
>	- java 64 bit 1.6.0_18 and  1.6.0_29
>	- Linux CentOS release 5.6 (Final) 64 bit

One one other question - which connector were you using? BIO, NIO, or 
APR/native? HTTP or AJP?

With that information it looks like you have enough here to open a bug report 
in Bugzilla.

Mark


>
>
>
>-----Original Message-----
>From: Pid [mailto:pid@pidster.com]
>Sent: Monday, April 09, 2012 8:37 PM
>To: Tomcat Users List
>Subject: Re: tomcat asynchronous invocation problem
>
>On 09/04/2012 13:53, Vyacheslav Trainin wrote:
>> Hi,
>>
>>
>>
>> We encountered a problem during asynchronous operations (tomcat 7
>with
>> servlet 3).
>
>Exactly which version of Tomcat 7.0?
>Same for Java version?
>Same for OS version(s)?
>
>
>p
>
>
>> _Description:  _
>>
>> One client continuously sends post requests to the server. On the
>> server side for each request created AsyncContext with timeout 20
>seconds:
>>
>> AsyncContextasyncContext = req.startAsync(req, resp);
>>
>>       asyncContext.setTimeout(20000);
>>
>> As expected after approximately 20 sec the requests are completed.
>> Then another client also begins to send requests to the server but in
>
>> this case they are explicitly completed after 500 milliseconds.
>> Something like this:
>>
>> AsyncContextasyncContext = req.startAsync(req, resp);
>>
>>       asyncContext.setTimeout(20000);
>>
>>
>>
>>       *try*{
>>
>>          Thread./sleep/(500);
>>
>>       } *catch*(Exception e) {
>>
>>       }
>>
>>
>>
>>       asyncContext.complete();
>>
>>
>>
>> The problem is that after running the second client all the requested
>
>> waiting for timeout (from the first client) are stuck and not
>released
>> (onTimeout method of AsyncEvent is not called) until the second
>client
>> stops sending requests.
>>
>> It looks like the problem occurs on Linux but not on Windows.
>>
>>
>>
>> Below is a simple test that may help to reproduce this issue. The
>> following servlet accepts URL parameter "complete".
>>
>> When "complete=1" the request will be completed after 500ms.
>>
>> Otherwise the request will wait till timeout (20 seconds).
>>
>>
>>
>> Run client that periodically sends requests to /servlet?complete=0.
>(I
>> have tested it with 10 parallel threads that run in a loop)
>>
>> Then run another client that periodically sends requests to
>> /servlet?complete=1 (This client can use only a single thread)
>>
>> See that the first client does not receive any responses while the
>> second client is running.
>>
>>
>>
>>
>>
>> public class WebTestServlet extends HttpServlet {
>>
>>     private static final Logger LOG =
>> LoggerFactory.getLogger(WebTestServlet.class);
>>
>>
>>
>>     @Override
>>
>>     protected void service(final HttpServletRequest req, final
>> HttpServletResponse resp) throws ServletException, IOException {
>>
>>         LOG.debug("Received request: {}", req);
>>
>>         final long startTime = System.currentTimeMillis();
>>
>>         String isComplete = req.getParameter("complete");
>>
>>
>>
>>         AsyncContext asyncContext = req.startAsync(req, resp);
>>
>>         asyncContext.setTimeout(20000);
>>
>>         asyncContext.addListener(new AsyncListener() {
>>
>>             public void onTimeout(AsyncEvent event) throws
>IOException
>> {
>>
>>                 long duration = System.currentTimeMillis() -
>> startTime;
>>
>>                 LOG.debug("Async Timeout. Request: {}. Waiting time:
>> {}", event.getSuppliedRequest(), duration);
>>
>>                 event.getAsyncContext().complete();
>>
>>             }
>>
>>
>>
>>             public void onStartAsync(AsyncEvent event) throws
>> IOException {
>>
>>                 LOG.debug("Start async. Request: {}",
>> event.getSuppliedRequest());
>>
>>             }
>>
>>
>>
>>             public void onError(AsyncEvent event) throws IOException
>{
>>
>>                 LOG.debug("Error occured. Request: {}. Error: {}",
>> event.getSuppliedRequest(), event.getThrowable());
>>
>>             }
>>
>>
>>
>>             public void onComplete(AsyncEvent event) throws
>> IOException {
>>
>>                 long duration = System.currentTimeMillis() -
>> startTime;
>>
>>                 LOG.debug("Async Complete. Request: {}. Request
>> process
>> time: {}", event.getSuppliedRequest(), duration);
>>
>>             }
>>
>>         }, req, resp);
>>
>>
>>
>>         if ("1".equals(isComplete)) {
>>
>>             try {
>>
>>                 Thread.sleep(500);
>>
>>             } catch (Exception e) {
>>
>>             }
>>
>>
>>
>>             asyncContext.complete();
>>
>>         }
>>
>>     }
>>
>> }
>>
>>
>>
>> Regards,
>>
>> Slava
>>
>>
>>
>>
>>
>
>
>--
>
>[key:62590808]


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


------=_NextPart_000_008B_01CD17D7.F305BF20
Content-Type: application/pkcs7-signature; name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKzTCCAwMw
ggJsAhEAuS9gzIifoXpGCbhbcGyKrzANBgkqhkiG9w0BAQUFADCBwTELMAkGA1UEBhMCVVMxFzAV
BgNVBAoTDlZlcmlTaWduLCBJbmMuMTwwOgYDVQQLEzNDbGFzcyAyIFB1YmxpYyBQcmltYXJ5IENl
cnRpZmljYXRpb24gQXV0aG9yaXR5IC0gRzIxOjA4BgNVBAsTMShjKSAxOTk4IFZlcmlTaWduLCBJ
bmMuIC0gRm9yIGF1dGhvcml6ZWQgdXNlIG9ubHkxHzAdBgNVBAsTFlZlcmlTaWduIFRydXN0IE5l
dHdvcmswHhcNOTgwNTE4MDAwMDAwWhcNMjgwODAxMjM1OTU5WjCBwTELMAkGA1UEBhMCVVMxFzAV
BgNVBAoTDlZlcmlTaWduLCBJbmMuMTwwOgYDVQQLEzNDbGFzcyAyIFB1YmxpYyBQcmltYXJ5IENl
cnRpZmljYXRpb24gQXV0aG9yaXR5IC0gRzIxOjA4BgNVBAsTMShjKSAxOTk4IFZlcmlTaWduLCBJ
bmMuIC0gRm9yIGF1dGhvcml6ZWQgdXNlIG9ubHkxHzAdBgNVBAsTFlZlcmlTaWduIFRydXN0IE5l
dHdvcmswgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAKeIASF0LOcaA/CY4Zc8DyEI8Zzbl+ma
/MIEBhO+X1LIzB4sElYsuAFpLMyZH62wlq55BPITOcF7mLoILOjChBMsqmnpCfTHqQKkQsIjT0rY
8A6i+zFsyeZvmScH9eb0THiebetGhvq5hslU8rLEr9RGHFrJFTD/DWz1LQ5tzn93AgMBAAEwDQYJ
KoZIhvcNAQEFBQADgYEAci75f9HxcfvEnvbFXlGKQJi4aPibHIPY4p29/+2h5mbqLwn0ytfqpSuV
9iRghk1ELoOlxC2g0654aW9y2myuCPBjkjfmu8QwF613zEk1qs/Yj9G+txiWR3NqVCI0ZC22FptZ
W7RRWTqzCxT0Et9noPStMmResUZyJ4wSe8VEtK4wggOiMIIDC6ADAgECAhA7h9gNabNnBYcvrtBp
U4c0MA0GCSqGSIb3DQEBBQUAMIHBMQswCQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIElu
Yy4xPDA6BgNVBAsTM0NsYXNzIDIgUHVibGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3Jp
dHkgLSBHMjE6MDgGA1UECxMxKGMpIDE5OTggVmVyaVNpZ24sIEluYy4gLSBGb3IgYXV0aG9yaXpl
ZCB1c2Ugb25seTEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazAeFw0wMDA4MjAwMDAw
MDBaFw0xMzA4MTkyMzU5NTlaMIGrMRQwEgYDVQQKEwtBZGFjb20gUy5BLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazE5MDcGA1UECxMwVGVybXMgb2YgdXNlIGF0IGh0dHBzOi8vc2Vj
LmFkYWNvbS5jb20vcnBhIChjKTAwMTcwNQYDVQQDEy5BZGFjb20gQ2xhc3MgMiBPblNpdGUgSW5k
aXZpZHVhbCBTdWJzY3JpYmVyIENBMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDNNBG4BUKG
HfD9XjgTIsscGWYKFkKbSi4gM3d0Cik1SG2DoxO88uzepMutsehB1t3vH5y89WkfrcgyEgvOV8KR
WZ7priOmkyUAB4UJo7SGui20pi3bf0YtbXIfir4b6g5s3GleHss6IMOfv+D2O7R/Ny/CYd4m8jOm
n19k4t2cXQIDAQABo4GuMIGrMBEGCWCGSAGG+EIBAQQEAwIBBjAPBgNVHRMECDAGAQH/AgEAMAsG
A1UdDwQEAwIBBjBCBgNVHSAEOzA5MDcGC2CGSAGG+EUBBxcCMCgwJgYIKwYBBQUHAgEWGmh0dHBz
Oi8vc2VjLmFkYWNvbS5jb20vcnBhMDQGA1UdHwQtMCswKaAnoCWGI2h0dHA6Ly9jcmwudmVyaXNp
Z24uY29tL3BjYTItZzIuY3JsMA0GCSqGSIb3DQEBBQUAA4GBAJhqcoc51gvRVZzHlh8r/zXMXv9t
VfugLWVutrKEQT2ivPMD95C1L17cDEOVRQ+X9eflsdEPjzoJ8iBsZ6WmgQT5zxiE175WX5EoyDQR
t1/ZBKuLL/mTBQQn5mm0FwJy2JXfksxsBEkQUBIOsSr1xG76cygG6P1ur6GGUzqtXLsPMIIEHDCC
A4WgAwIBAgIQIUxQsxsBBRh0dh/L3LmudDANBgkqhkiG9w0BAQUFADCBqzEUMBIGA1UEChMLQWRh
Y29tIFMuQS4xHzAdBgNVBAsTFlZlcmlTaWduIFRydXN0IE5ldHdvcmsxOTA3BgNVBAsTMFRlcm1z
IG9mIHVzZSBhdCBodHRwczovL3NlYy5hZGFjb20uY29tL3JwYSAoYykwMDE3MDUGA1UEAxMuQWRh
Y29tIENsYXNzIDIgT25TaXRlIEluZGl2aWR1YWwgU3Vic2NyaWJlciBDQTAeFw0xMTEyMDgwMDAw
MDBaFw0xMjEyMDcyMzU5NTlaMIGxMSIwIAYDVQQKDBlQbGF5dGVjaCBTb2Z0d2FyZSBMaW1pdGVk
MQswCQYDVQQLDAJJVDExMC8GA1UECwwoVGVybXMgb2YgdXNlIGF0IHNlYy5hZGFjb20uY29tL3Jw
YSAoYykwODEbMBkGA1UEAwwSVnlhY2hlc2xhdiBUcmFpbmluMS4wLAYJKoZIhvcNAQkBFh92eWFj
aGVzbGF2LnRyYWluaW5AcGxheXRlY2guY29tMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKC
AQEA3B+jRnAJee3enFZEMJ0U+aqNWRCl/e7Dv0CnSNUysgydT9MjLilhSKvJlD/tHukuT8fLJdNk
qxx8CVILRWUUrATIB+VfcCoHMq+/kr4tja6KvqgAquaDwHaKwhFvWNyJQsX4LuQTH0yHtQMQfgEk
bqQZ4HzkUPL5UbuFzf5q80fynGd8Nu8TIonteVFv3PUjCpY5IUM5l8RP7I3EaehGX6tkPYeFAvOx
kmP3GYJtg9ngHxQTJBzxBfzBylodW8jdbix16KIYZTGXottGGZiS98re1WooRa7UlxZQWFbz3EWx
SMaE3uy9QUpB1jw5hnnDkOrDpGYKaT87cup0ljCLbQIDAQABo4G0MIGxMAkGA1UdEwQCMAAwQQYD
VR0gBDowODA2BgpghkgBhvhFAQcaMCgwJgYIKwYBBQUHAgEWGmh0dHBzOi8vc2VjLmFkYWNvbS5j
b20vcnBhMAsGA1UdDwQEAwIFoDARBglghkgBhvhCAQEEBAMCB4AwQQYDVR0fBDowODA2oDSgMoYw
aHR0cDovL2NybC5hZGFjb20uY29tL09uU2l0ZVB1YmxpYy9MYXRlc3RDUkwuY3JsMA0GCSqGSIb3
DQEBBQUAA4GBAIdCyGwDWzQFgqTjGQNcjMcAqCGrG8fOYXhUHXmdufyo7e/ce5D2Uh4mLK+AE6PD
jQhZlKh8EMBgg4cEGHTgrsbGVAqee0oXzh0BoY+WDTMc3GoUdVA46TyouptVAHpX522TSebu89ee
UCGkupMHk2Xb9+SQtZG5/+NHh8QcTMIgMYIErTCCBKkCAQEwgcAwgasxFDASBgNVBAoTC0FkYWNv
bSBTLkEuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3JrMTkwNwYDVQQLEzBUZXJtcyBv
ZiB1c2UgYXQgaHR0cHM6Ly9zZWMuYWRhY29tLmNvbS9ycGEgKGMpMDAxNzA1BgNVBAMTLkFkYWNv
bSBDbGFzcyAyIE9uU2l0ZSBJbmRpdmlkdWFsIFN1YnNjcmliZXIgQ0ECECFMULMbAQUYdHYfy9y5
rnQwCQYFKw4DAhoFAKCCAsEwGAYJKoZIhvcNAQkDMQsGCSqGSIb3DQEHATAcBgkqhkiG9w0BCQUx
DxcNMTIwNDExMDg0MDUyWjAjBgkqhkiG9w0BCQQxFgQUXjLuIuQGawMPRA0u/hjDEJfXnd8wgbcG
CSqGSIb3DQEJDzGBqTCBpjALBglghkgBZQMEASowCwYJYIZIAWUDBAEWMAoGCCqGSIb3DQMHMAsG
CWCGSAFlAwQBAjAOBggqhkiG9w0DAgICAIAwBwYFKw4DAgcwDQYIKoZIhvcNAwICAUAwDQYIKoZI
hvcNAwICASgwBwYFKw4DAhowCwYJYIZIAWUDBAIDMAsGCWCGSAFlAwQCAjALBglghkgBZQMEAgEw
CgYIKoZIhvcNAgUwgdEGCSsGAQQBgjcQBDGBwzCBwDCBqzEUMBIGA1UEChMLQWRhY29tIFMuQS4x
HzAdBgNVBAsTFlZlcmlTaWduIFRydXN0IE5ldHdvcmsxOTA3BgNVBAsTMFRlcm1zIG9mIHVzZSBh
dCBodHRwczovL3NlYy5hZGFjb20uY29tL3JwYSAoYykwMDE3MDUGA1UEAxMuQWRhY29tIENsYXNz
IDIgT25TaXRlIEluZGl2aWR1YWwgU3Vic2NyaWJlciBDQQIQIUxQsxsBBRh0dh/L3LmudDCB0wYL
KoZIhvcNAQkQAgsxgcOggcAwgasxFDASBgNVBAoTC0FkYWNvbSBTLkEuMR8wHQYDVQQLExZWZXJp
U2lnbiBUcnVzdCBOZXR3b3JrMTkwNwYDVQQLEzBUZXJtcyBvZiB1c2UgYXQgaHR0cHM6Ly9zZWMu
YWRhY29tLmNvbS9ycGEgKGMpMDAxNzA1BgNVBAMTLkFkYWNvbSBDbGFzcyAyIE9uU2l0ZSBJbmRp
dmlkdWFsIFN1YnNjcmliZXIgQ0ECECFMULMbAQUYdHYfy9y5rnQwDQYJKoZIhvcNAQEBBQAEggEA
PUTitFPrMxPNM4Wq/Pl8HvUoHfUhyYe/Sq2GvrseFf1wL0NC6w13rf50TDjTG1bJjcNp3+BhuI5k
uKSzzEgqqHDfSERZgS4jELM51bbNzvRbwtb+tN/b76CKS4suyNF85E99MZmbvTYWimnq3xue4i2Y
rLDGP/r1UdFJrVAL/gTzeu2v2s3xBfeWuz949Sa3IP8kJi9Juxptfb2KZBs2uYbZFI3f/6ilW6pD
K2PQcDY3vO4N91sohriMjkwmsek8wkmdfHdQonxeYVogvbN+ttJDerW/fJYHo4fFOLR+GOeZY8nN
wN1/IpTLJsaG0YlWiDWX+31KaWDUFQW8P0r0lwAAAAAAAA==

------=_NextPart_000_008B_01CD17D7.F305BF20--

From users-return-233485-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 11 09:28:12 2012
Return-Path: <users-return-233485-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8BABE9164
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 11 Apr 2012 09:28:12 +0000 (UTC)
Received: (qmail 25879 invoked by uid 500); 11 Apr 2012 09:28:09 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 25776 invoked by uid 500); 11 Apr 2012 09:28:09 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 25749 invoked by uid 99); 11 Apr 2012 09:28:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2012 09:28:08 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pid@pidster.com designates 209.85.214.45 as permitted sender)
Received: from [209.85.214.45] (HELO mail-bk0-f45.google.com) (209.85.214.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2012 09:28:00 +0000
Received: by bkcjg9 with SMTP id jg9so633087bkc.18
        for <users@tomcat.apache.org>; Wed, 11 Apr 2012 02:27:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type;
        bh=cx9KagAXcbArY7ggwlUa4nfBq8T88w/gdXzAvybb03A=;
        b=sKX/+NgJRCpeD7oElCpXOQneq7maUSy245K0aTRAcVDYe0ykRpvwjwHP34YWDs/9tH
         RsMBwlXFgdroAnKNwkBMsBnUFINgsywBFS0U+wSAGCcjAzKhiTkDNoUHVnxp16wsPuHh
         PfmbZFcDxzV993MPpK1k7c+tPv8TRH7D9Zl3o=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type:x-gm-message-state;
        bh=cx9KagAXcbArY7ggwlUa4nfBq8T88w/gdXzAvybb03A=;
        b=p40Oc+OioCsqy2T7wF40QNFblxxBjlshXk5crweUNClPJtFQT4hYb1bKGnt+F4QpOX
         kGLZAKz2w6qwUtPzM3vT5gUhTtBgnxhpvsOPN6nIXropd0iig0Y77lv7UoM+12/Me0ob
         N7exspiDOEUSv9rVgZmYKYYGVdOghJXMR4BCZmC2nN4oWhRNX/z64ux8/XohyYjtgDrb
         KzBfBFiloEvjvZzepQdTWfbOxlFpSt3sx/oMqT8aYz3ekYV5BKqZfwQKu3zqhUOCu2dW
         pVx31pwy4nFqC8JuKUuPEnauZ3V/a1NlW9jz3vfDRLPOjqBQ2Qz0g7CyDP2wuWOhbK5K
         d9Dg==
Received: by 10.205.122.144 with SMTP id gg16mr5865783bkc.12.1334136459858;
        Wed, 11 Apr 2012 02:27:39 -0700 (PDT)
Received: from Asura.local (cpc10-lewi14-2-0-cust355.2-4.cable.virginmedia.com. [82.4.249.100])
        by mx.google.com with ESMTPS id jr13sm3464025bkb.14.2012.04.11.02.27.37
        (version=SSLv3 cipher=OTHER);
        Wed, 11 Apr 2012 02:27:38 -0700 (PDT)
Message-ID: <4F854E8C.4070003@pidster.com>
Date: Wed, 11 Apr 2012 10:27:40 +0100
From: Pid <pid@pidster.com>
Organization: Pidster Inc
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: 7.0.25 to 7.0.27 requires -Xmx32m to go to -Xmx512m
References: <1334112426.9730.YahooMailMobile@web110413.mail.gq1.yahoo.com>
In-Reply-To: <1334112426.9730.YahooMailMobile@web110413.mail.gq1.yahoo.com>
X-Enigmail-Version: 1.4
OpenPGP: id=62590808
Content-Type: multipart/signed; micalg=pgp-sha512;
 protocol="application/pgp-signature";
 boundary="------------enig82FD281E3B2CD6CEB16FFCA5"
X-Gm-Message-State: ALoCoQkepfVZ+O95W6BSWbjM4m+iEiMkVxkcdblz4T61zYSWfp8fnjY/+FKh95Ojc6BKheHYCr7l

--------------enig82FD281E3B2CD6CEB16FFCA5
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

On 11/04/2012 03:47, Peter wrote:
> hey Christopher,
>=20
> the app I used that uncovered the issue is one I use exclusively to val=
idate tomcat releases;) it is a "hello world" style app using spring/serv=
let3.0. it has simple spring aop point cutting via jamon , simple spring =
jms (active mq) simple spring jaxrs, simple spring jaxws, simple spring m=
vc, simple spring security,... (spring 3.0.7)
>=20
> bunch of very simple examples that end up pulling in "many" jars.

Can you post it to github or somewhere public?


p


> I will grab a dump tomorrow,  thanks for response,
> peter

--=20

[key:62590808]


--------------enig82FD281E3B2CD6CEB16FFCA5
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.18 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iQIcBAEBCgAGBQJPhU6SAAoJEGoM2OGpOvr9Xb0P/jFRZShIl46oqLKs15MAK7WO
x+0bc62fpQN04V1iSAuzADA/0t3maCBV/9NgMUlhOUiHF0w3Wbqa22AXWDKKe05/
8+mzFKi4FwwRQjVecADEb1hXhu+jHx/OXGlcR+yAvif3UjYbvI7caGc7hZNSV6Sl
Ymahu+MwdebxIPyerFiA4h8jhoqPFoS/Nrt0HsyJSWy+Rbauxyz+AozQg3+xNWJv
pWzugUNv2nR78LyEQCHHNU6id2X3PQycI0/1zUrhSgEFFnIpyqgkj250jejmJjce
+HBNwKhWTvMaHBmmqiaRLrH3Em5OR7Ono2ESbINMXpLh7ZIbHI8W0OrRzipXmGU9
EODTR2V4GK60NbhmQQaSMZLoPFqCY1WOkX7p8pE5b3DhKa0WQKHpNMzGTGrAlrnk
287sKWIx6EPWLR3nakkxL5MGCpULJeuZERF1aPKdVJUImfIwm1tyZ896ixEkwTQE
DODuBz/BmjhPAbePWVoADeknDfFdv7UPqdU2DNzL/QQtUtOph59z49ZDG5U+zZmd
AcMETkmJrFDIlZZ7VlaUAjIefu32RAmjd/AEEzzPTbzPEsY4sprBbsKHceLj65IA
YROwohCewPJIUOpPYMGKuol+samULXrbkYUsio62ILjp+W7x02t0tbp7IJmmQySD
cpem9SPwRWwHFCIuFfup
=KGQ8
-----END PGP SIGNATURE-----

--------------enig82FD281E3B2CD6CEB16FFCA5--

From users-return-233486-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 11 10:51:16 2012
Return-Path: <users-return-233486-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F311F9D8D
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 11 Apr 2012 10:51:15 +0000 (UTC)
Received: (qmail 12909 invoked by uid 500); 11 Apr 2012 10:51:12 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 12848 invoked by uid 500); 11 Apr 2012 10:51:12 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 12838 invoked by uid 99); 11 Apr 2012 10:51:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2012 10:51:12 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [80.12.242.29] (HELO smtpout.wanadoo.co.uk) (80.12.242.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2012 10:51:03 +0000
Received: from mail.homeinbox.net ([2.29.16.46])
	by mwinf5d12 with ME
	id waqi1i00H0zdosJ03aqjA2; Wed, 11 Apr 2012 12:50:43 +0200
Received: from localhost (localhost [127.0.0.1])
	by mail.homeinbox.net (Postfix) with ESMTP id A2354EAB53E
	for <users@tomcat.apache.org>; Wed, 11 Apr 2012 11:50:42 +0100 (BST)
X-Virus-Scanned: Debian amavisd-new at homeinbox.net
Received: from mail.homeinbox.net ([127.0.0.1])
	by localhost (mail.homeinbox.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id jrYWjsyMHWE2 for <users@tomcat.apache.org>;
	Wed, 11 Apr 2012 11:50:23 +0100 (BST)
Received: from android-3db794e9a871c98f (unknown [31.75.134.205])
	(using TLSv1 with cipher RC4-MD5 (128/128 bits))
	(No client certificate requested)
	by mail.homeinbox.net (Postfix) with ESMTPSA id 8869CB22001
	for <users@tomcat.apache.org>; Wed, 11 Apr 2012 11:50:20 +0100 (BST)
References: <1334112426.9730.YahooMailMobile@web110413.mail.gq1.yahoo.com> <4F854E8C.4070003@pidster.com>
User-Agent: K-9 Mail for Android
In-Reply-To: <4F854E8C.4070003@pidster.com>
MIME-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 8bit
Subject: Re: 7.0.25 to 7.0.27 requires -Xmx32m to go to -Xmx512m
From: Mark Thomas <markt@apache.org>
Date: Wed, 11 Apr 2012 11:50:08 +0100
To: Tomcat Users List <users@tomcat.apache.org>
Message-ID: <d14bdc88-c9f2-4d8c-b2c2-624115afc614@email.android.com>



Pid <pid@pidster.com> wrote:

>On 11/04/2012 03:47, Peter wrote:
>> hey Christopher,
>> 
>> the app I used that uncovered the issue is one I use exclusively to
>validate tomcat releases;) it is a "hello world" style app using
>spring/servlet3.0. it has simple spring aop point cutting via jamon ,
>simple spring jms (active mq) simple spring jaxrs, simple spring jaxws,
>simple spring mvc, simple spring security,... (spring 3.0.7)
>> 
>> bunch of very simple examples that end up pulling in "many" jars.
>
>Can you post it to github or somewhere public?
>
>
>p
>
>
>> I will grab a dump tomorrow,  thanks for response,
>> peter

I know exactly where this memory is going. During the scanning process Tomcat has to scan every single class in the application and its libraries and every class and interface in that class's hierarchy for annotations (we don't have a choice in this - the spec requires it). This can lead to the same class being scanned many times during startup and that is slow. Tomcat now caches the result of scanning a class which means each class only has to be scanned once. However, this does mean that all the results are in memory until the scan is complete. If you have a lot of libraries, that could require a lot of memory. If you know a JAR doesn't need scanning, add it to the jarsToSkip property. If it is a popular jar then create an enhancement request and we'll add it to the default list. The other option is to set metadata complete in the web.xml

I haven't reviewed the scanning caching code but there may be some opportunities to reduce the memory footprint of the cache.

Mark


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233487-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 11 12:10:53 2012
Return-Path: <users-return-233487-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 67597905E
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 11 Apr 2012 12:10:53 +0000 (UTC)
Received: (qmail 1814 invoked by uid 500); 11 Apr 2012 12:10:49 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 1752 invoked by uid 500); 11 Apr 2012 12:10:49 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 1742 invoked by uid 99); 11 Apr 2012 12:10:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2012 12:10:49 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lazar.kirchev@gmail.com designates 209.85.212.171 as permitted sender)
Received: from [209.85.212.171] (HELO mail-wi0-f171.google.com) (209.85.212.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2012 12:10:42 +0000
Received: by wibhj13 with SMTP id hj13so3221488wib.0
        for <users@tomcat.apache.org>; Wed, 11 Apr 2012 05:10:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=63iwpVKvP2heqr6ycoScR7kfDy6/3n4qQpC/fNUGkUA=;
        b=pGvpAevv12MnkbQ2tXzAxiLSz1mBRtsjk3F4Ot0oLKYz+UmMihE7IY2PwVgKRtyn3b
         UWwFUnW6YllCJP8o5pi8XW7MDQX2hnkUvPdMvc/BU8aK/1hq8OWTzIb/mzuddqlNU0oZ
         qzTkaEUC6IfArvdiCz7C3xXBV+i2/WotTUqAI+hGUX65kCT3wOl2OhcFqCtv8/btgz2F
         PxduMMklfTuWzKV7cjDLVDBdsYQnPtX9ojaob5lUakiYUQ2F7orl95tcwyP53sQg1DMY
         G8Uha14P4VowqhySNNWtPgYlEvDr5dIbwG9O5MR7ovT2o+5pUZRvLnKXIwtWiw84ZH+8
         KBVA==
MIME-Version: 1.0
Received: by 10.216.134.19 with SMTP id r19mr8540953wei.66.1334146222013; Wed,
 11 Apr 2012 05:10:22 -0700 (PDT)
Received: by 10.223.143.86 with HTTP; Wed, 11 Apr 2012 05:10:21 -0700 (PDT)
Date: Wed, 11 Apr 2012 15:10:21 +0300
Message-ID: <CAJMhK2+38h0LdKUVemA6JNaEHqm8q+mc3ohAj9hXThvrBQh7yQ@mail.gmail.com>
Subject: Using ServletContainerInitializer for 2.5 applications
From: Lazar Kirchev <lazar.kirchev@gmail.com>
To: users@tomcat.apache.org
Content-Type: multipart/alternative; boundary=0016e6d7e6aba43cd604bd661f9d

--0016e6d7e6aba43cd604bd661f9d
Content-Type: text/plain; charset=ISO-8859-1

Hello,

In servlet 3.0 specification ServletContainerInitilizer class is defined to
allow programatic addition of servlet/filters/listeners. I am using a
ServletContextInitializer to add a ServletContextListener to the
ServletContext. I use Tomcat 7.0.25. This works fine if the web.xml major
version is 3, but if it is 2 it does not work. I checked the
org.apache.catalina.startup.ContextConfig code and it seems that
ServletContainerInitializers are added to the StandardContext only if the
major version is >= 3 (in an if-statement in the webConfig() method). Could
you help me with this?

Regards,
Lazar

--0016e6d7e6aba43cd604bd661f9d--

From users-return-233488-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 11 12:18:09 2012
Return-Path: <users-return-233488-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A924C9190
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 11 Apr 2012 12:18:09 +0000 (UTC)
Received: (qmail 23209 invoked by uid 500); 11 Apr 2012 12:18:06 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 23043 invoked by uid 500); 11 Apr 2012 12:18:06 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 23034 invoked by uid 99); 11 Apr 2012 12:18:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2012 12:18:06 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of miki@ceti.pl designates 62.121.128.10 as permitted sender)
Received: from [62.121.128.10] (HELO relay.ceti.pl) (62.121.128.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2012 12:17:59 +0000
Received: from tau.ceti.pl (tau.ceti.pl [62.121.128.11])
	by relay.ceti.pl (Postfix) with ESMTP id CC87CD5644
	for <users@tomcat.apache.org>; Wed, 11 Apr 2012 14:17:37 +0200 (CEST)
Received: from poczta2.ceti.pl (ip-62-121-128-70.ceti.net.pl [62.121.128.70])
	by tau.ceti.pl (Postfix) with ESMTP id 7F37A202FE9;
	Wed, 11 Apr 2012 14:17:37 +0200 (CEST)
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8;
 format=flowed
Content-Transfer-Encoding: 7bit
Date: Wed, 11 Apr 2012 14:17:37 +0200
From: Mikolaj Rydzewski <miki@ceti.pl>
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Using ServletContainerInitializer for 2.5 applications
In-Reply-To: <CAJMhK2+38h0LdKUVemA6JNaEHqm8q+mc3ohAj9hXThvrBQh7yQ@mail.gmail.com>
References: <CAJMhK2+38h0LdKUVemA6JNaEHqm8q+mc3ohAj9hXThvrBQh7yQ@mail.gmail.com>
Message-ID: <5d1d2822faf2e2ae22f9eff15f3afd12@tau.ceti.pl>
X-Sender: miki@ceti.pl
User-Agent: CETI Webmail/0.7.2
X-Virus-Checked: Checked by ClamAV on apache.org

On 11.04.2012 14:10, Lazar Kirchev wrote:

> In servlet 3.0 specification ServletContainerInitilizer class is 
> defined to
> allow programatic addition of servlet/filters/listeners. I am using a
> ServletContextInitializer to add a ServletContextListener to the
> ServletContext. I use Tomcat 7.0.25. This works fine if the web.xml 
> major
> version is 3, but if it is 2 it does not work. I checked the
> org.apache.catalina.startup.ContextConfig code and it seems that
> ServletContainerInitializers are added to the StandardContext only if 
> the
> major version is >= 3 (in an if-statement in the webConfig() method). 
> Could
> you help me with this?

Help with what? What is the problem?

-- 
Mikolaj Rydzewski <miki@ceti.pl>

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233489-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 11 12:23:44 2012
Return-Path: <users-return-233489-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4657C9348
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 11 Apr 2012 12:23:44 +0000 (UTC)
Received: (qmail 40665 invoked by uid 500); 11 Apr 2012 12:23:41 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 40586 invoked by uid 500); 11 Apr 2012 12:23:41 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 40577 invoked by uid 99); 11 Apr 2012 12:23:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2012 12:23:40 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lazar.kirchev@gmail.com designates 74.125.82.41 as permitted sender)
Received: from [74.125.82.41] (HELO mail-wg0-f41.google.com) (74.125.82.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2012 12:23:34 +0000
Received: by wgbds1 with SMTP id ds1so3666458wgb.0
        for <users@tomcat.apache.org>; Wed, 11 Apr 2012 05:23:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=y98j43FEJSYEcsgUoLE7R2q1mLK+6HYMuhjCJ3xlI2o=;
        b=ztl6D7GP8dWPrfq3wekpnSndTT7nTh2JYOBeFuN5BrY8AjV60VNwBpzldtoXN98FSW
         P1Yj29ViL54NGkHNO813dTezxi35uOEbiOMrObmvo/rxu1Qj1jLBfZemsNY9AdlqeOTr
         N8dysmcVWJj7lPZE20lBSSb9aoGXLZRvPpzO9K9JcFv9f0I+rdiT0KqR4BJeW6nkeQvd
         MMs7P4nn4PxmhGNCI9+9Ay3SN1Ls5lQRXUsnYDISJg5pfl8gTSaId28/BbSTuTvPkApl
         iV8x9arCEwvz4z75oi4i7RonnCPBm78QmHobVHOoMeTSxv9jV2i+X+VgNvsnnqtTImtH
         Gu9w==
MIME-Version: 1.0
Received: by 10.216.134.19 with SMTP id r19mr8566784wei.66.1334146994382; Wed,
 11 Apr 2012 05:23:14 -0700 (PDT)
Received: by 10.223.143.86 with HTTP; Wed, 11 Apr 2012 05:23:14 -0700 (PDT)
In-Reply-To: <5d1d2822faf2e2ae22f9eff15f3afd12@tau.ceti.pl>
References: <CAJMhK2+38h0LdKUVemA6JNaEHqm8q+mc3ohAj9hXThvrBQh7yQ@mail.gmail.com>
	<5d1d2822faf2e2ae22f9eff15f3afd12@tau.ceti.pl>
Date: Wed, 11 Apr 2012 15:23:14 +0300
Message-ID: <CAJMhK2JS51iEHh6Rc2Dd0oWP2T1yFoYfLanno--f-T70XZribA@mail.gmail.com>
Subject: Re: Using ServletContainerInitializer for 2.5 applications
From: Lazar Kirchev <lazar.kirchev@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=0016e6d7e6abada90804bd664dc3

--0016e6d7e6abada90804bd664dc3
Content-Type: text/plain; charset=ISO-8859-1

I want the ServletContainerInitializer to be called for all applications I
deploy, not only with web.xml version 3.0, but also with lower version. Is
this possible?

On Wed, Apr 11, 2012 at 3:17 PM, Mikolaj Rydzewski <miki@ceti.pl> wrote:

> On 11.04.2012 14:10, Lazar Kirchev wrote:
>
>  In servlet 3.0 specification ServletContainerInitilizer class is defined
>> to
>> allow programatic addition of servlet/filters/listeners. I am using a
>> ServletContextInitializer to add a ServletContextListener to the
>> ServletContext. I use Tomcat 7.0.25. This works fine if the web.xml major
>> version is 3, but if it is 2 it does not work. I checked the
>> org.apache.catalina.startup.**ContextConfig code and it seems that
>> ServletContainerInitializers are added to the StandardContext only if the
>> major version is >= 3 (in an if-statement in the webConfig() method).
>> Could
>> you help me with this?
>>
>
> Help with what? What is the problem?
>
> --
> Mikolaj Rydzewski <miki@ceti.pl>
>
> ------------------------------**------------------------------**---------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.**apache.org<users-unsubscribe@tomcat.apache.org>
> For additional commands, e-mail: users-help@tomcat.apache.org
>
>

--0016e6d7e6abada90804bd664dc3--

From users-return-233490-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 11 12:47:43 2012
Return-Path: <users-return-233490-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 983769B37
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 11 Apr 2012 12:47:43 +0000 (UTC)
Received: (qmail 10384 invoked by uid 500); 11 Apr 2012 12:47:40 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 10292 invoked by uid 500); 11 Apr 2012 12:47:39 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 10219 invoked by uid 99); 11 Apr 2012 12:47:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2012 12:47:39 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of knst.kolinko@gmail.com designates 209.85.213.45 as permitted sender)
Received: from [209.85.213.45] (HELO mail-yw0-f45.google.com) (209.85.213.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2012 12:47:32 +0000
Received: by yhoo21 with SMTP id o21so467571yho.18
        for <users@tomcat.apache.org>; Wed, 11 Apr 2012 05:47:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=WK6/yfgWVeEZOSTOKu9DLH+c+4On469alTkr2GbHVH8=;
        b=yaT33wDxzzyPIx5Ry/mt0c9azwglckfQXE0rzj/e9/WngcKb4QWY2NylhSKgGH663w
         oMaDJ1T2qQ87bQG+6mzKydi09soj8VqhGJpM4ETbsxBOnadJXybKjwueNe0lIIq2dnq4
         xasm0QauQ38ljgjAd4kC7YTw3xo0Bi3gbIPk7qPAi4QfH3TG1DLJapblVeO4OpL1uEoW
         FYY+lA6UDsEOtvN1X+bUKC5P1Ou81YJN6AEkdPTeYvwd/Uym91YZ1wbAG+kPeYVO43fR
         nfjW2FJRYT37QWWer6wcAjEScuMpmQQz8b4RDn1giYtr3BvuXgSjheBaWbsCwWqns88a
         Nz6A==
MIME-Version: 1.0
Received: by 10.101.11.28 with SMTP id o28mr311081ani.68.1334148431548; Wed,
 11 Apr 2012 05:47:11 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Wed, 11 Apr 2012 05:47:11 -0700 (PDT)
In-Reply-To: <CAJMhK2JS51iEHh6Rc2Dd0oWP2T1yFoYfLanno--f-T70XZribA@mail.gmail.com>
References: <CAJMhK2+38h0LdKUVemA6JNaEHqm8q+mc3ohAj9hXThvrBQh7yQ@mail.gmail.com>
	<5d1d2822faf2e2ae22f9eff15f3afd12@tau.ceti.pl>
	<CAJMhK2JS51iEHh6Rc2Dd0oWP2T1yFoYfLanno--f-T70XZribA@mail.gmail.com>
Date: Wed, 11 Apr 2012 16:47:11 +0400
Message-ID: <CABzHfVmhd7mgu9FfO9qk8qJaihpL9vmL88QHMxo_BU+jZ5A-_w@mail.gmail.com>
Subject: Re: Using ServletContainerInitializer for 2.5 applications
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1

2012/4/11 Lazar Kirchev <lazar.kirchev@gmail.com>:
> I want the ServletContainerInitializer to be called for all applications I
> deploy, not only with web.xml version 3.0, but also with lower version. Is
> this possible?

1. Do not top post. Write answers below the questions.

2. You would even be able to load the class that implements that
interface. The "ServletContainerInitializer" class is in
"javax.servlet" package and it will be absent.

The spec forbids you from bundling your own servlet-api.jar.

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233491-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 11 12:55:34 2012
Return-Path: <users-return-233491-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 88E249E5F
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 11 Apr 2012 12:55:34 +0000 (UTC)
Received: (qmail 34103 invoked by uid 500); 11 Apr 2012 12:55:31 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 34042 invoked by uid 500); 11 Apr 2012 12:55:31 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 34030 invoked by uid 99); 11 Apr 2012 12:55:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2012 12:55:31 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [216.82.241.196] (HELO mail46.messagelabs.com) (216.82.241.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2012 12:55:21 +0000
X-Env-Sender: Chuck.Caldarale@unisys.com
X-Msg-Ref: server-2.tower-46.messagelabs.com!1334148895!26337900!23
X-Originating-IP: [192.61.61.104]
X-StarScan-Version: 6.5.5; banners=-,-,-
X-VirusChecked: Checked
Received: (qmail 25974 invoked from network); 11 Apr 2012 12:55:00 -0000
Received: from unknown (HELO USEA-NAEDGE1.unisys.com) (192.61.61.104)
  by server-2.tower-46.messagelabs.com with RC4-SHA encrypted SMTP; 11 Apr 2012 12:55:00 -0000
Received: from usea-nahubcas1.na.uis.unisys.com (129.224.76.114) by
 USEA-NAEDGE1.unisys.com (192.61.61.104) with Microsoft SMTP Server (TLS) id
 8.3.83.0; Wed, 11 Apr 2012 07:54:33 -0500
Received: from USEA-EXCH8.na.uis.unisys.com ([129.224.76.41]) by
 usea-nahubcas1.na.uis.unisys.com ([129.224.76.114]) with mapi; Wed, 11 Apr
 2012 07:54:33 -0500
From: "Caldarale, Charles R" <Chuck.Caldarale@unisys.com>
To: Tomcat Users List <users@tomcat.apache.org>
Date: Wed, 11 Apr 2012 07:54:31 -0500
Subject: RE: Using ServletContainerInitializer for 2.5 applications
Thread-Topic: Using ServletContainerInitializer for 2.5 applications
Thread-Index: Ac0X3frR1s+H6K0bS7Gj/YkJmdx7iwAA/3Vw
Message-ID: <99C8B2929B39C24493377AC7A121E21FB016FD1231@USEA-EXCH8.na.uis.unisys.com>
References: <CAJMhK2+38h0LdKUVemA6JNaEHqm8q+mc3ohAj9hXThvrBQh7yQ@mail.gmail.com>
	<5d1d2822faf2e2ae22f9eff15f3afd12@tau.ceti.pl>
 <CAJMhK2JS51iEHh6Rc2Dd0oWP2T1yFoYfLanno--f-T70XZribA@mail.gmail.com>
In-Reply-To: <CAJMhK2JS51iEHh6Rc2Dd0oWP2T1yFoYfLanno--f-T70XZribA@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

> From: Lazar Kirchev [mailto:lazar.kirchev@gmail.com]=20
> Subject: Re: Using ServletContainerInitializer for 2.5 applications

> I want the ServletContainerInitializer to be called for all applications =
I
> deploy, not only with web.xml version 3.0, but also with lower version. I=
s
> this possible?

Simply put, no.  ServletContainerInitializer doesn't exist in the 2.5 spec =
and thus cannot be used with webapps written to that version of the spec.

 - Chuck


THIS COMMUNICATION MAY CONTAIN CONFIDENTIAL AND/OR OTHERWISE PROPRIETARY MA=
TERIAL and is thus for use only by the intended recipient. If you received =
this in error, please contact the sender and delete the e-mail and its atta=
chments from all computers.


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233492-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 11 13:31:26 2012
Return-Path: <users-return-233492-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D9E389C81
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 11 Apr 2012 13:31:25 +0000 (UTC)
Received: (qmail 53444 invoked by uid 500); 11 Apr 2012 13:31:22 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 53328 invoked by uid 500); 11 Apr 2012 13:31:22 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 53319 invoked by uid 99); 11 Apr 2012 13:31:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2012 13:31:22 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of marvin.addison@gmail.com designates 209.85.213.45 as permitted sender)
Received: from [209.85.213.45] (HELO mail-yw0-f45.google.com) (209.85.213.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2012 13:31:15 +0000
Received: by yhoo21 with SMTP id o21so507624yho.18
        for <users@tomcat.apache.org>; Wed, 11 Apr 2012 06:30:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        bh=qJu4+TqDlr12u+hYEWJJmtlwYSdvAQ6gPsBc2C1IDAw=;
        b=qQgYq579Ui3gk2DiQzE3oM+vh8Nl5od+xRHC2P08AVXhQ/QLWbCPdnM3pBndTubkwo
         KyVdnrqWHaRMrVpIXV+YZk8BHz0PjqibjdkHRoGFktNHwInFgHCNDd/NWe9OQhNL+Pnu
         98nPlg7MDShk6iVeqfYOj8BfhBIWGcBg5wlb/ETvsLchPk7liWbCYdv/gYHIdZOmpbwu
         toU6eZEnQtD2QpW88/VNruMQjCWtzXz85Cym13LUGy17eqcfWfBfctwskesFInXs8Hcd
         qwf0vCTVmA+hhllCZsb+EEZ7G29phepO0aV7EKxwXANljTAGPlOxEtm0bU7ghxUlJhQ0
         1/GA==
Received: by 10.236.184.102 with SMTP id r66mr12843276yhm.46.1334151055092;
        Wed, 11 Apr 2012 06:30:55 -0700 (PDT)
Received: from eiger.middleware.vt.edu ([2001:468:c80:2103:224:e8ff:fe45:4439])
        by mx.google.com with ESMTPS id x68sm10420629yhi.19.2012.04.11.06.30.53
        (version=SSLv3 cipher=OTHER);
        Wed, 11 Apr 2012 06:30:54 -0700 (PDT)
Message-ID: <4F85878C.6060008@gmail.com>
Date: Wed, 11 Apr 2012 09:30:52 -0400
From: "Marvin S. Addison" <marvin.addison@gmail.com>
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:11.0) Gecko/20120329 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: High CPU with Tomcat 7.0.26 & 6.0.35
References: <1333156346.51845.YahooMailNeo@web160703.mail.bf1.yahoo.com> <4F76EACE.8090103@apache.org> <1334092484.34103.YahooMailNeo@web160704.mail.bf1.yahoo.com>
In-Reply-To: <1334092484.34103.YahooMailNeo@web160704.mail.bf1.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

>      "http-443-205" daemon prio=10 tid=0x096a8400 nid=0x2a04 runnable [0x3089d000..0x3089e130]
>         java.lang.Thread.State: RUNNABLE
>          at org.apache.tomcat.jni.Socket.sendbb(Native Method)
>          at org.apache.coyote.http11.InternalAprOutputBuffer.flushBuffer(InternalAprOutputBuffer.java:711)
>          at org.apache.coyote.http11.InternalAprOutputBuffer$SocketOutputBuffer.doWrite(InternalAprOutputBuffer.java:742)
>          at org.apache.coyote.http11.filters.IdentityOutputFilter.doWrite(IdentityOutputFilter.java:127)
>          at org.apache.coyote.http11.InternalAprOutputBuffer.doWrite(InternalAprOutputBuffer.java:552)
>          at org.apache.coyote.Response.doWrite(Response.java:560)

We saw the same pattern as above in thread dumps from our hosts 
exhibiting CPU spikes, but with a notable exception.  In our case 
whenever we captured traces, we saw at least _two_ threads in RUNNABLE 
state at org.apache.tomcat.jni.Socket.sendbb().  There was also some 
evidence that the number of threads in that state correlated with the 
severity of the CPU spike.

M

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233493-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 11 13:42:18 2012
Return-Path: <users-return-233493-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AABA79111
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 11 Apr 2012 13:42:18 +0000 (UTC)
Received: (qmail 90350 invoked by uid 500); 11 Apr 2012 13:42:15 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 90153 invoked by uid 500); 11 Apr 2012 13:42:15 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 90144 invoked by uid 99); 11 Apr 2012 13:42:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2012 13:42:15 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lazar.kirchev@gmail.com designates 209.85.212.171 as permitted sender)
Received: from [209.85.212.171] (HELO mail-wi0-f171.google.com) (209.85.212.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2012 13:42:08 +0000
Received: by wibhj13 with SMTP id hj13so3287152wib.0
        for <users@tomcat.apache.org>; Wed, 11 Apr 2012 06:41:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=jydWeLRFmnZkMJiJ0OlTzvtsHT2MtkvYbhAmW3+z61Y=;
        b=XKVE7DKpbbkkp7T7BkZDjwkOp7V+I/mzVJ4BRbi0T99N4agU9iK5A0inl4KJJSx7f3
         wNZFnRjD5KtoX/PM07NuBjxtHby8nFUrNE3lu6guKLafbKCTPe7tF+wA5w7GhrzVxi5n
         58c0VOpeNVxP3yL8+0118xVzXRhn6wblwJXhPz0zRd91Lx+2XDVmv4/6XHZwwtk9qTxF
         kL20RDHRo6d7v3Wp/GnvZvLdANJJqzjdVzzDuT7BrFpWbw/y6A4yE/tpBWuWD4+NudSi
         b6BooZQD6okhuwV12i9H+DwsG4YwdVBLMARQEobtATm24fTAJQGABEvS/e0jVuGCxcCv
         +6Vw==
MIME-Version: 1.0
Received: by 10.216.134.19 with SMTP id r19mr8727632wei.66.1334151708210; Wed,
 11 Apr 2012 06:41:48 -0700 (PDT)
Received: by 10.223.143.86 with HTTP; Wed, 11 Apr 2012 06:41:48 -0700 (PDT)
In-Reply-To: <99C8B2929B39C24493377AC7A121E21FB016FD1231@USEA-EXCH8.na.uis.unisys.com>
References: <CAJMhK2+38h0LdKUVemA6JNaEHqm8q+mc3ohAj9hXThvrBQh7yQ@mail.gmail.com>
	<5d1d2822faf2e2ae22f9eff15f3afd12@tau.ceti.pl>
	<CAJMhK2JS51iEHh6Rc2Dd0oWP2T1yFoYfLanno--f-T70XZribA@mail.gmail.com>
	<99C8B2929B39C24493377AC7A121E21FB016FD1231@USEA-EXCH8.na.uis.unisys.com>
Date: Wed, 11 Apr 2012 16:41:48 +0300
Message-ID: <CAJMhK2+1Ex0JqiVzrpbLNprMo9wk5VQ3tOaJAVN4fv_3Gq0q0A@mail.gmail.com>
Subject: Re: Using ServletContainerInitializer for 2.5 applications
From: Lazar Kirchev <lazar.kirchev@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=0016e6d7e6aba4f5b604bd67669f

--0016e6d7e6aba4f5b604bd67669f
Content-Type: text/plain; charset=ISO-8859-1

On Wed, Apr 11, 2012 at 3:54 PM, Caldarale, Charles R <
Chuck.Caldarale@unisys.com> wrote:

> > From: Lazar Kirchev [mailto:lazar.kirchev@gmail.com]
> > Subject: Re: Using ServletContainerInitializer for 2.5 applications
>
> > I want the ServletContainerInitializer to be called for all applications
> I
> > deploy, not only with web.xml version 3.0, but also with lower version.
> Is
> > this possible?
>
> Simply put, no.  ServletContainerInitializer doesn't exist in the 2.5 spec
> and thus cannot be used with webapps written to that version of the spec.
>
>  - Chuck
>


Actually I have created a shared library, which extends the web container.
This library provides an implementation of the ServletContainerInitializer
interface according to the servlet 3.0 specification - chapter 8.2.4,
Shared libraries / runtimes pluggability.

I expect the ServletContainerInitializer to be called for each web
application, deployed in the web container. However, it gets called only if
the version of the web.xml of the deployed application is 3.0.

Is this according to the specification? After all, the library extends the
container itself and not a particular application.

>
>
> THIS COMMUNICATION MAY CONTAIN CONFIDENTIAL AND/OR OTHERWISE PROPRIETARY
> MATERIAL and is thus for use only by the intended recipient. If you
> received this in error, please contact the sender and delete the e-mail and
> its attachments from all computers.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>
>

--0016e6d7e6aba4f5b604bd67669f--

From users-return-233494-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 11 15:06:16 2012
Return-Path: <users-return-233494-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2485F9A9C
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 11 Apr 2012 15:06:16 +0000 (UTC)
Received: (qmail 91986 invoked by uid 500); 11 Apr 2012 15:06:12 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 91935 invoked by uid 500); 11 Apr 2012 15:06:12 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 91926 invoked by uid 99); 11 Apr 2012 15:06:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2012 15:06:12 +0000
X-ASF-Spam-Status: No, hits=1.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ashprof7@gmail.com designates 209.85.160.65 as permitted sender)
Received: from [209.85.160.65] (HELO mail-pb0-f65.google.com) (209.85.160.65)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2012 15:06:04 +0000
Received: by pbcuo15 with SMTP id uo15so393943pbc.0
        for <users@tomcat.apache.org>; Wed, 11 Apr 2012 08:05:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=h0MG3+QT0uJaUqNS3dtrAv7OtkD9e3/xmwad4toB1qs=;
        b=H4rcqhqgYiAY7eaK0WZZ7DNm5LReZVhkoIJxNyh/C0/6onfnJ73Wo44FfDeNDuT+iv
         Lmz1ooJ2NR8YzqLlhG0pi3vdKD1bELdRwnVhHnD/033pTSM9NLRJYfJbHGSe5c8k89Yq
         XLBweeV8KZzE76odWhGzvmISV+wMg+27H75E1VqX7q2pqeN+w5JCboVT1o7PSXgb3Yz9
         tQmNe5+HwXX66dtweGPMUIOqKzm6pEieagHtNjiQchiPsDCKUSNi4En/uTkxlvMBgaDl
         RTJDOsQX20y/K/LTLkiDihAXGjXztiHM6OnBbFjVCeqZMjIulT16sW6PRjpjhnj6WuDx
         /kew==
MIME-Version: 1.0
Received: by 10.68.219.200 with SMTP id pq8mr32576078pbc.55.1334156743214;
 Wed, 11 Apr 2012 08:05:43 -0700 (PDT)
Received: by 10.66.15.163 with HTTP; Wed, 11 Apr 2012 08:05:43 -0700 (PDT)
Date: Wed, 11 Apr 2012 11:05:43 -0400
Message-ID: <CAJgUgf7VMFdOfHgQCwoeDNeRjtGLGbKiqbPkO4JCPT1FnGBWJQ@mail.gmail.com>
Subject: Intermittent "ServletException - Unable to compile class for JSP" for
 a struts-1.3.10 web-app with Tomcat 7.0.26/7.0.27
From: Ashima Sharma <ashprof7@gmail.com>
To: users@tomcat.apache.org
Content-Type: multipart/alternative; boundary=e89a8ff24a25c1063f04bd6892f4

--e89a8ff24a25c1063f04bd6892f4
Content-Type: text/plain; charset=ISO-8859-1

We just did a tomcat upgrade (from 6.0.36 to 7.0.26) for a legacy
struts-1.3.10 app on Windows 2008 R2 (64-bit).
Ever since, there's been an intermittent occurence of the following 2
exceptions (for random jsps) -

*2012-04-10 18:27:45,751 ERROR [org.apache.struts.tiles.taglib.InsertTag] -
ServletException in '/WEB-INF/pages/registration/registration.jsp': Unable
to compile class for JSP: *
*An error occurred at line: 49 in the generated java file*
*This method must return a result of type Map<String,Long>*
*
*
*AND*
*
*
*
2012-04-10 18:36:58,501 ERROR [org.apache.struts.tiles.taglib.InsertTag] -
ServletException in '/WEB-INF/pages/registration/registration.jsp':
classFile.delete() failed
org.apache.jasper.JasperException: Unable to compile class for JSP
*
*
*
*
*
We don't precompile the jsps. The related jsps already have the
corresponding .java and .class files in the work folder.

Have researched and found a ton of solution for similar issues with earlier
versions of tomcat. Have tried the following plausible solutions:
1. Made sure that the tomcat install was clean, the work folder was deleted
2. Made sure tomcat has full permissions to the appropriate File/Folders
3. Made sure tomcat is running with development=false
4. Tried with JspServlet setting of fork=true and fork=false
5. Made sure that there's no search/indexing services trying to access
tomcat folders creating access conflict
6. Tried going to the latest version of tomcat 7.0.27

The error still persists. Any thoughts/ideas ...
thanks.

--e89a8ff24a25c1063f04bd6892f4--

From users-return-233495-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 11 19:59:55 2012
Return-Path: <users-return-233495-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F3CC39509
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 11 Apr 2012 19:59:54 +0000 (UTC)
Received: (qmail 42604 invoked by uid 500); 11 Apr 2012 19:59:51 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 42548 invoked by uid 500); 11 Apr 2012 19:59:51 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 42536 invoked by uid 99); 11 Apr 2012 19:59:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2012 19:59:51 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [76.96.59.227] (HELO qmta12.westchester.pa.mail.comcast.net) (76.96.59.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2012 19:59:43 +0000
Received: from omta08.westchester.pa.mail.comcast.net ([76.96.62.12])
	by qmta12.westchester.pa.mail.comcast.net with comcast
	id wjmr1i0050Fqzac5CjzN90; Wed, 11 Apr 2012 19:59:22 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta08.westchester.pa.mail.comcast.net with comcast
	id wjzM1i01Q38FjT13UjzMPd; Wed, 11 Apr 2012 19:59:22 +0000
Message-ID: <4F85E298.8090604@christopherschultz.net>
Date: Wed, 11 Apr 2012 15:59:20 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Intermittent "ServletException - Unable to compile class for
 JSP" for a struts-1.3.10 web-app with Tomcat 7.0.26/7.0.27
References: <CAJgUgf7VMFdOfHgQCwoeDNeRjtGLGbKiqbPkO4JCPT1FnGBWJQ@mail.gmail.com>
In-Reply-To: <CAJgUgf7VMFdOfHgQCwoeDNeRjtGLGbKiqbPkO4JCPT1FnGBWJQ@mail.gmail.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Ashima,

On 4/11/12 11:05 AM, Ashima Sharma wrote:
> We just did a tomcat upgrade (from 6.0.36 to 7.0.26) for a legacy 
> struts-1.3.10 app on Windows 2008 R2 (64-bit). Ever since, there's
> been an intermittent occurence of the following 2 exceptions (for
> random jsps) -
> 
> *2012-04-10 18:27:45,751 ERROR
> [org.apache.struts.tiles.taglib.InsertTag] - ServletException in
> '/WEB-INF/pages/registration/registration.jsp': Unable to compile
> class for JSP: * *An error occurred at line: 49 in the generated
> java file* *This method must return a result of type
> Map<String,Long>*

So, what's on line 49 in regstration_jsp.java?

The JSP compiler is fairly good at reporting information about the
original JSP source, too. Did it give you any clue what the problem was?

When you say "intermittent", do you mean that sometimes the JSP
compiles without a problem and other times it fails? Or, are you
saying that only some of these JSPs have the problem, but it's consistent?

> 2012-04-10 18:36:58,501 ERROR
> [org.apache.struts.tiles.taglib.InsertTag] - ServletException in
> '/WEB-INF/pages/registration/registration.jsp': classFile.delete()
> failed org.apache.jasper.JasperException: Unable to compile class
> for JSP

Full stack trace?

Have you tried tracking-down the problem on line 49 of that file?
Maybe your underlying code changed and the JSP needs to be updated?

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+F4pgACgkQ9CaO5/Lv0PAbEwCfTft4iExSXIDNNj5kkBCGDhbj
/fIAn2X/tqJ3GIez2E0mmUPTJlv+mCke
=Z2Xx
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233496-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 11 20:28:08 2012
Return-Path: <users-return-233496-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7DA999801
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 11 Apr 2012 20:28:08 +0000 (UTC)
Received: (qmail 19654 invoked by uid 500); 11 Apr 2012 20:28:05 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 19610 invoked by uid 500); 11 Apr 2012 20:28:05 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 19601 invoked by uid 99); 11 Apr 2012 20:28:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2012 20:28:05 +0000
X-ASF-Spam-Status: No, hits=1.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ashprof7@gmail.com designates 209.85.210.65 as permitted sender)
Received: from [209.85.210.65] (HELO mail-pz0-f65.google.com) (209.85.210.65)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2012 20:27:58 +0000
Received: by dakl33 with SMTP id l33so428989dak.0
        for <users@tomcat.apache.org>; Wed, 11 Apr 2012 13:27:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=Ywjusv2W08FDa+XOR1zIrrI6g6toCAZds32TK+2dgV0=;
        b=sbl6av+KGlR7+fbGkc5QbHaCkwxbOxo3ZupOXKkuyDHZjegzMaiQpt8qellkL4MpN7
         jMedRtewfxhX4uKtPvM3JyoxzaRmwyvT/taevkbrp1qogI5/elFjjO6c98czglriLPBP
         gWrmtGcs63mAqNiOFwydUbpvEpK2Q/vAUYI0wZX1fAPhEEgEhSn/z+Za4hQgu71pqfHM
         Y+7Cs3NJ+CLA3xjzBfRRa8/tgtfMjE51vn7lkFj9cE7mS1SNuhEG3toFFl9k9O7kN3kw
         sDgll6+3/by/SClMxhJZAqpMnJY5egjDeSFlQSngEVOBvLrQt412xmxPwJMwchi717Hh
         ctjg==
MIME-Version: 1.0
Received: by 10.68.221.10 with SMTP id qa10mr494942pbc.139.1334176058248; Wed,
 11 Apr 2012 13:27:38 -0700 (PDT)
Received: by 10.66.15.163 with HTTP; Wed, 11 Apr 2012 13:27:38 -0700 (PDT)
In-Reply-To: <4F85E298.8090604@christopherschultz.net>
References: <CAJgUgf7VMFdOfHgQCwoeDNeRjtGLGbKiqbPkO4JCPT1FnGBWJQ@mail.gmail.com>
	<4F85E298.8090604@christopherschultz.net>
Date: Wed, 11 Apr 2012 16:27:38 -0400
Message-ID: <CAJgUgf4kPxKMOYqTFGNapT2YbSSN4DF_L01jaB342zL5qDyexA@mail.gmail.com>
Subject: Re: Intermittent "ServletException - Unable to compile class for JSP"
 for a struts-1.3.10 web-app with Tomcat 7.0.26/7.0.27
From: Ashima Sharma <ashprof7@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=e89a8ff24801050e5c04bd6d1269
X-Virus-Checked: Checked by ClamAV on apache.org

--e89a8ff24801050e5c04bd6d1269
Content-Type: text/plain; charset=ISO-8859-1

Most of the jsps have this issue...but it happens randomly. For e.g., i wd
be able to access the registration page 5 times w/o any issue, and the 6th
time I'd get this error.
Its bizarre that tomcat tries to recompile the already compiled jsp at some
random point even though the page hasn't changed, and throws the cannot
compile error. All the jsps with this issue have the .java and .class files
under the work directory.

The compilation issue is
in org.apache.jasper.runtime.JspSourceDependent.getDependants method for
every jsp
in regstration_jsp.java -
line 49-  public java.util.Map<java.lang.String,java.lang.Long>
getDependants() {
line 50-    return _jspx_dependants;
line 51-  }

For the 2nd exception, this is what the stack trace looks like no matter
which jsp:

2012-04-04 09:55:26,022 ERROR [org.apache.struts.tiles.taglib.InsertTag] -
ServletException in '/WEB-INF/pages/register/userProfileBodyTile.jsp':
classFile.delete() failed
org.apache.jasper.JasperException: Unable to compile class for JSP
at
org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:661)
at
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:357)
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at
org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
at
org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:593)
at
org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:530)
at
org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:954)
at
org.apache.jasper.runtime.PageContextImpl.doInclude(PageContextImpl.java:684)
at
org.apache.jasper.runtime.PageContextImpl.include(PageContextImpl.java:678)
at sun.reflect.GeneratedMethodAccessor119.invoke(Unknown Source)
at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.struts.tiles.TilesUtilImpl.doInclude(TilesUtilImpl.java:129)
at org.apache.struts.tiles.TilesUtil.doInclude(TilesUtil.java:152)
at org.apache.struts.tiles.taglib.InsertTag.doInclude(InsertTag.java:764)
at
org.apache.struts.tiles.taglib.InsertTag$InsertHandler.doEndTag(InsertTag.java:896)
at org.apache.struts.tiles.taglib.InsertTag.doEndTag(InsertTag.java:465)
at
org.apache.jsp.WEB_002dINF.pages.layouts.defaultLayout_jsp._jspx_meth_tiles_005finsert_005f1(defaultLayout_jsp.java:2663)
at
org.apache.jsp.WEB_002dINF.pages.layouts.defaultLayout_jsp._jspService(defaultLayout_jsp.java:253)
at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at
org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
at
org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
at
org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
at
org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
at
org.apache.struts.action.RequestProcessor.doForward(RequestProcessor.java:1083)
at
org.apache.struts.tiles.TilesRequestProcessor.doForward(TilesRequestProcessor.java:295)
at
org.apache.struts.tiles.TilesRequestProcessor.processTilesDefinition(TilesRequestProcessor.java:271)
at
org.apache.struts.tiles.TilesRequestProcessor.processForwardConfig(TilesRequestProcessor.java:332)
at
org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:232)
at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)
at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:449)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at
org.displaytag.filter.ResponseOverrideFilter.doFilter(ResponseOverrideFilter.java:125)
at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at
org.advanced.common.web.DisableCachingFilter.doFilterInternal(DisableCachingFilter.java:17)
at
org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
at
org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
at
org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at
com.sacs.casi.oasis.filter.InstitutionNameFilter.doFilterInternal(InstitutionNameFilter.java:38)
at
org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
at
org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
at
org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at
com.sacs.casi.oasis.filter.SecurityFilter.doFilterInternal(SecurityFilter.java:157)
at
org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
at
org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
at
org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at
com.sacs.casi.oasis.filter.AuthorizationFilter.continueProcessing(AuthorizationFilter.java:137)
at
com.sacs.casi.oasis.filter.AuthorizationFilter.doFilterInternal(AuthorizationFilter.java:118)
at
org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
at
org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
at
org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at
com.sacs.casi.oasis.filter.SessionTimeoutFilter.doFilterInternal(SessionTimeoutFilter.java:44)
at
org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
at
org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
at
org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at
org.jasig.cas.client.util.HttpServletRequestWrapperFilter.doFilter(HttpServletRequestWrapperFilter.java:75)
at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at
org.jasig.cas.client.authentication.AuthenticationFilter.doFilter(AuthenticationFilter.java:107)
at
org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
at
org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at
org.jasig.cas.client.validation.AbstractTicketValidationFilter.doFilter(AbstractTicketValidationFilter.java:201)
at
org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
at
org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at
com.sacs.casi.oasis.filter.RequestInfoFilter.doFilterInternal(RequestInfoFilter.java:25)
at
org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
at
org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
at
org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at
org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
at
org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
at
org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1805)
at
java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662)
Caused by: java.io.IOException: classFile.delete() failed
at
org.apache.jasper.compiler.SmapUtil$SDEInstaller.install(SmapUtil.java:201)
at org.apache.jasper.compiler.SmapUtil.installSmap(SmapUtil.java:163)
at
org.apache.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:472)
at org.apache.jasper.compiler.Compiler.compile(Compiler.java:378)
at org.apache.jasper.compiler.Compiler.compile(Compiler.java:353)
at org.apache.jasper.compiler.Compiler.compile(Compiler.java:340)
at
org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:646)
... 110 more

--e89a8ff24801050e5c04bd6d1269--

From users-return-233497-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 11 21:18:06 2012
Return-Path: <users-return-233497-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9816F9C18
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 11 Apr 2012 21:18:06 +0000 (UTC)
Received: (qmail 58086 invoked by uid 500); 11 Apr 2012 21:18:02 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 57936 invoked by uid 500); 11 Apr 2012 21:18:02 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 57788 invoked by uid 99); 11 Apr 2012 21:18:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2012 21:18:02 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.91.2.13] (HELO smtp-outbound-2.vmware.com) (208.91.2.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2012 21:17:52 +0000
Received: from sc9-mailhost2.vmware.com (sc9-mailhost2.vmware.com [10.113.161.72])
	by smtp-outbound-2.vmware.com (Postfix) with ESMTP id 73EC92832F
	for <users@tomcat.apache.org>; Wed, 11 Apr 2012 14:17:32 -0700 (PDT)
Received: from zimbra-prod-mta-2.vmware.com (zimbra-prod-mta-2.vmware.com [10.113.160.174])
	by sc9-mailhost2.vmware.com (Postfix) with ESMTP id 65E77B04AA
	for <users@tomcat.apache.org>; Wed, 11 Apr 2012 14:17:32 -0700 (PDT)
Received: from localhost (localhost.localdomain [127.0.0.1])
	by zimbra-prod-mta-2.vmware.com (Postfix) with ESMTP id 627013E905
	for <users@tomcat.apache.org>; Wed, 11 Apr 2012 14:17:32 -0700 (PDT)
X-Virus-Scanned: amavisd-new at zimbra-prod-mta-2.vmware.com
Received: from zimbra-prod-mta-2.vmware.com ([127.0.0.1])
	by localhost (zimbra-prod-mta-2.vmware.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id VMHw4K7pvTT7 for <users@tomcat.apache.org>;
	Wed, 11 Apr 2012 14:17:32 -0700 (PDT)
Received: from zimbra-prod-mbox-5.vmware.com (zimbra-prod-mbox-5.vmware.com [10.113.160.194])
	by zimbra-prod-mta-2.vmware.com (Postfix) with ESMTP id 4B70E3E902
	for <users@tomcat.apache.org>; Wed, 11 Apr 2012 14:17:32 -0700 (PDT)
Date: Wed, 11 Apr 2012 14:17:32 -0700 (PDT)
From: Luke Meyer <lmeyer@vmware.com>
To: Tomcat Users List <users@tomcat.apache.org>
Message-ID: <1264858200.1427094.1334179052178.JavaMail.root@zimbra-prod-mbox-5.vmware.com>
In-Reply-To: <1685558763.1367788.1334092157107.JavaMail.root@zimbra-prod-mbox-5.vmware.com>
Subject: Re: mod_jk - Firewall connection dropping
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Originating-IP: [174.97.218.148]
X-Mailer: Zimbra 7.1.3_GA_3374 (ZimbraWebClient - GC18 (Win)/7.1.3_GA_3346)
X-Virus-Checked: Checked by ClamAV on apache.org

Just noticed what I was missing about connectionTimeout - it's the default for keepAliveTimeout. So, that clears that up.

Still don't think it's a "huge negative performance impact!" to disable connection reuse.

----- Original Message -----
From: "Luke Meyer" <lmeyer@vmware.com>
To: users@tomcat.apache.org
Sent: Tuesday, April 10, 2012 5:09:17 PM
Subject: mod_jk - Firewall connection dropping

I have some questions about the documentation at http://tomcat.apache.org/connectors-doc/generic_howto/timeouts.html regarding the Firewall Connection Dropping section. I don't think it's quite right, but maybe I misunderstand. 


To quote the sections in question: 


" Many firewalls will allow connection closing, even if they dropped the connection for normal traffic. Therefore you should always use connection_pool_timeout and connection_pool_minsize on the JK side and connectionTimeout on the Tomcat side. 
[...] 
In case none of our recommendations help and you are definitively having problems with idle connection drops, you can disable the use of persistent connections when using JK together with Apache httpd. For this you set "JkOptions +DisableReuse" in your Apache httpd configuration. This will have a huge negative performance impact! " 


The recommendation to use connection_pool_timeout seems good - close connections that have been idle so the firewall doesn't drop them. But I don't see what connectionTimeout on the AJP connector has to do with keepalive timeouts - it seems to be for initial connections only. I would think keepAliveTimeout is the way to get rid of connections that the firewall has dropped - yes? 


I also don't understand why disabling reuse entirely is said to have a "huge negative performance impact!" The only impact I can see is that you have to reopen a connection for each request. If your servers are right next to each other on the network, or even on the same box, as is typical in most AJP setups, then connection time is negligible. In my tests (on the same box) the whole handshake took .1 millisecond - obviously, if there's some latency, that may be a few milliseconds, but in the scenario where a firewall is dropping inactive connections, I hardly think there would be so much throughput that this would matter. Certainly it's not going to matter compared to the risk of threads being tied up on dead connections. And if your network isn't perfect, but the latency is negligible, why not just disable reuse so you never have to take that risk? 


And the biggest question... why does the default configuration assume that connections will always either stay open forever or be properly closed? By default, if connections are dropped, Tomcat eventually becomes unresponsive because the connector thread pool is exhausted, and you must restart. This looks really bad. Why not have a default keepAliveTimeout value that acknowledges the real world isn't perfect and frees threads from dead connections? 

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233498-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 11 21:54:31 2012
Return-Path: <users-return-233498-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A51E99DD7
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 11 Apr 2012 21:54:31 +0000 (UTC)
Received: (qmail 61315 invoked by uid 500); 11 Apr 2012 21:54:28 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 61081 invoked by uid 500); 11 Apr 2012 21:54:28 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 61072 invoked by uid 99); 11 Apr 2012 21:54:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2012 21:54:28 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [76.96.62.80] (HELO qmta08.westchester.pa.mail.comcast.net) (76.96.62.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2012 21:54:20 +0000
Received: from omta05.westchester.pa.mail.comcast.net ([76.96.62.43])
	by qmta08.westchester.pa.mail.comcast.net with comcast
	id wlor1i0040vyq2s58ltzf0; Wed, 11 Apr 2012 21:53:59 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta05.westchester.pa.mail.comcast.net with comcast
	id wltz1i00H38FjT13RltzQj; Wed, 11 Apr 2012 21:53:59 +0000
Message-ID: <4F85FD76.9080300@christopherschultz.net>
Date: Wed, 11 Apr 2012 17:53:58 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Intermittent "ServletException - Unable to compile class for
 JSP" for a struts-1.3.10 web-app with Tomcat 7.0.26/7.0.27
References: <CAJgUgf7VMFdOfHgQCwoeDNeRjtGLGbKiqbPkO4JCPT1FnGBWJQ@mail.gmail.com> <4F85E298.8090604@christopherschultz.net> <CAJgUgf4kPxKMOYqTFGNapT2YbSSN4DF_L01jaB342zL5qDyexA@mail.gmail.com>
In-Reply-To: <CAJgUgf4kPxKMOYqTFGNapT2YbSSN4DF_L01jaB342zL5qDyexA@mail.gmail.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Ashima,

On 4/11/12 4:27 PM, Ashima Sharma wrote:
> Most of the jsps have this issue...but it happens randomly. For
> e.g., i wd be able to access the registration page 5 times w/o any
> issue, and the 6th time I'd get this error. Its bizarre that tomcat
> tries to recompile the already compiled jsp at some random point
> even though the page hasn't changed, and throws the cannot compile
> error. All the jsps with this issue have the .java and .class
> files under the work directory.

Can you confirm that after you try to access the .jsp from the
browser, the timestamp on the .java file changes?

Are you deploying from a WAR file or exploded directory? Also, are any
of your JSPs in a .jar file (whether this is in a WAR file or not)?

There have been some recent reports of constant recompilation when
JSPs are in ZIP archives (and both .jar and .war are just .zip files
with certain expected entries within them).

> The compilation issue is in
> org.apache.jasper.runtime.JspSourceDependent.getDependants method
> for every jsp in regstration_jsp.java - line 49-  public
> java.util.Map<java.lang.String,java.lang.Long> getDependants() { 
> line 50-    return _jspx_dependants; line 51-  }

Hmm, that looks like Tomcat is not generating good Java code. Would
you be able to post the entire .java file and the original .jsp? I
understand if that's not something you want to post publicly, so you
could email it directly to me if you feel better about that.

I read that you have performed a clean install of Tomcat, which is a
good step to take because this looks like a mismatched Jasper problem
or something.

> For the 2nd exception, this is what the stack trace looks like no
> matter which jsp:
> 
> 2012-04-04 09:55:26,022 ERROR
> [org.apache.struts.tiles.taglib.InsertTag] - ServletException in
> '/WEB-INF/pages/register/userProfileBodyTile.jsp': 
> classFile.delete() failed org.apache.jasper.JasperException: Unable
> to compile class for JSP at 
> org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:661)

Yup,
> 
that's the compiler.

> org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)

Spring
> 
plus Struts? Okay...

> Caused by: java.io.IOException: classFile.delete() failed at 
> org.apache.jasper.compiler.SmapUtil$SDEInstaller.install(SmapUtil.java:201)
>
> 
at org.apache.jasper.compiler.SmapUtil.installSmap(SmapUtil.java:163)
> at 
> org.apache.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:472)
>
> 
at org.apache.jasper.compiler.Compiler.compile(Compiler.java:378)
> at org.apache.jasper.compiler.Compiler.compile(Compiler.java:353) 
> at org.apache.jasper.compiler.Compiler.compile(Compiler.java:340) 
> at 
> org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:646)
>
> 
... 110 more

This error happens when the original .class file can't be deleted
before re-naming an SMAP-loaded copy of the .class file. Can you
confirm that you have files called, for example,
userProfileBodyTile_jsp.java, userProfileBodyTile_jsp.class, and
userProfileBodyTile_jsp.javatmp ?

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+F/XYACgkQ9CaO5/Lv0PDrIACfQDK6no4ncxzXnj8gkB4nulnX
iv8AoI6L+FDyBGHF/VfB2LyEtVOQXLDQ
=PQxy
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233499-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 11 21:56:08 2012
Return-Path: <users-return-233499-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7CFB99E98
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 11 Apr 2012 21:56:08 +0000 (UTC)
Received: (qmail 67635 invoked by uid 500); 11 Apr 2012 21:56:05 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 67443 invoked by uid 500); 11 Apr 2012 21:56:05 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 67434 invoked by uid 99); 11 Apr 2012 21:56:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2012 21:56:05 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [76.96.62.80] (HELO qmta08.westchester.pa.mail.comcast.net) (76.96.62.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2012 21:55:58 +0000
Received: from omta16.westchester.pa.mail.comcast.net ([76.96.62.88])
	by qmta08.westchester.pa.mail.comcast.net with comcast
	id wezc1i0051uE5Es58lve2c; Wed, 11 Apr 2012 21:55:38 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta16.westchester.pa.mail.comcast.net with comcast
	id wlvd1i02s38FjT13clvewc; Wed, 11 Apr 2012 21:55:38 +0000
Message-ID: <4F85FDD9.1040204@christopherschultz.net>
Date: Wed, 11 Apr 2012 17:55:37 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: mod_jk - Firewall connection dropping
References: <1264858200.1427094.1334179052178.JavaMail.root@zimbra-prod-mbox-5.vmware.com>
In-Reply-To: <1264858200.1427094.1334179052178.JavaMail.root@zimbra-prod-mbox-5.vmware.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Luke,

On 4/11/12 5:17 PM, Luke Meyer wrote:
> Just noticed what I was missing about connectionTimeout - it's the 
> default for keepAliveTimeout. So, that clears that up.
> 
> Still don't think it's a "huge negative performance impact!" to 
> disable connection reuse.

Well, if you think that HTTP keepalives represent a "huge positive
performance impact" (and I certainly do), then the opposite ought to
be true: if mod_jk has to re-establish contact with the backend Tomcat
server for every single request, that will definitely have a negative
performance impact.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+F/dkACgkQ9CaO5/Lv0PAVDwCcDm6/dCbAqgi0oaWESDUuRGmW
sdgAn1i/q8hHIQcthwqriOZVJYZy2m1j
=Boq3
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233500-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 11 22:15:16 2012
Return-Path: <users-return-233500-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A148399E1
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 11 Apr 2012 22:15:16 +0000 (UTC)
Received: (qmail 31301 invoked by uid 500); 11 Apr 2012 22:15:11 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 31221 invoked by uid 500); 11 Apr 2012 22:15:11 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 31152 invoked by uid 99); 11 Apr 2012 22:15:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2012 22:15:11 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pid@pidster.com designates 209.85.213.173 as permitted sender)
Received: from [209.85.213.173] (HELO mail-yx0-f173.google.com) (209.85.213.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 Apr 2012 22:15:04 +0000
Received: by yenr5 with SMTP id r5so972007yen.18
        for <users@tomcat.apache.org>; Wed, 11 Apr 2012 15:14:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=references:from:in-reply-to:mime-version:date:message-id:subject:to
         :content-type;
        bh=+bYk6arTh/4G5eEwpxxIvpLEnUvdBHDamdFnk35p130=;
        b=b3pbqasIOs6cS40RP/B3XcqFA0o6dXqjCJrT9u2SUv7PBJ4SlMBtUhG6mjjDlyShCU
         JiPqkpJkTBpNOZRTjzTj8liX6A3iEatrP4MiZyIzElbHz/MO4M/shKEGqeEIle8C9Wud
         2j2u3eEXP17zeNxg7itNPBpv0dnu+GNwg10xU=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=references:from:in-reply-to:mime-version:date:message-id:subject:to
         :content-type:x-gm-message-state;
        bh=+bYk6arTh/4G5eEwpxxIvpLEnUvdBHDamdFnk35p130=;
        b=UdCCKOQv/ktFTAqlr05mJmuKyKIMkDC3wHLTVzIdlhnY0arzvwXObhh9pubz0FdeQm
         rwa9bkqxqUWnqEzSp0wkxz21tQ13tBTOw4/AB5C/cwGFwUdGSBin2J3Dta7Jkr5tsv4H
         4HO0ZEyk7G+bYADzD/mM4HouBRlw7sFRtj2SyKmFlYY9spcbTa3+Shtmnp6CLg0yPq5X
         3sRpeFgbyt3+0IuP16caQ/LwcnMaXmg3U3bMwJcB6Y3+wwRRseVdrQGlR5KLzRjFvaET
         51bIXEIWEob5niRFt5+tp1BATvgKrRxJcc/2M7QZLuq1f4+xlXbfRee4ll1RmDYm8bZZ
         rTew==
Received: by 10.236.155.226 with SMTP id j62mr119680yhk.30.1334182483689; Wed,
 11 Apr 2012 15:14:43 -0700 (PDT)
References: <CAJMhK2+38h0LdKUVemA6JNaEHqm8q+mc3ohAj9hXThvrBQh7yQ@mail.gmail.com>
 <5d1d2822faf2e2ae22f9eff15f3afd12@tau.ceti.pl> <CAJMhK2JS51iEHh6Rc2Dd0oWP2T1yFoYfLanno--f-T70XZribA@mail.gmail.com>
 <99C8B2929B39C24493377AC7A121E21FB016FD1231@USEA-EXCH8.na.uis.unisys.com> <CAJMhK2+1Ex0JqiVzrpbLNprMo9wk5VQ3tOaJAVN4fv_3Gq0q0A@mail.gmail.com>
From: "Pid *" <pid@pidster.com>
In-Reply-To: <CAJMhK2+1Ex0JqiVzrpbLNprMo9wk5VQ3tOaJAVN4fv_3Gq0q0A@mail.gmail.com>
Mime-Version: 1.0 (1.0)
Date: Wed, 11 Apr 2012 23:15:06 +0100
Message-ID: <4847057902696949195@unknownmsgid>
Subject: Re: Using ServletContainerInitializer for 2.5 applications
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=UTF-8
X-Gm-Message-State: ALoCoQmLGtQ9hgiq8PfJG6oVXaPNOWP3XlB4RlxinW2YnrqHNNLhSGDVNxaknG0rObxIswTsZpvA

On 11 Apr 2012, at 14:42, Lazar Kirchev <lazar.kirchev@gmail.com> wrote:

> ServletContainerInitializer

Only exists in Servlet 3.0. Supporting it in lower spec versions would
be non-compliant.

And silly.


p

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233501-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 12 02:41:19 2012
Return-Path: <users-return-233501-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8C7A89CDA
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 12 Apr 2012 02:41:19 +0000 (UTC)
Received: (qmail 80822 invoked by uid 500); 12 Apr 2012 02:41:16 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 80571 invoked by uid 500); 12 Apr 2012 02:41:15 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 80546 invoked by uid 99); 12 Apr 2012 02:41:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 02:41:15 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [87.194.255.145] (HELO woodbine.london.02.net) (87.194.255.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 02:41:06 +0000
Received: from workstation001.config (87.194.242.187) by woodbine.london.02.net (8.5.140)
        id 4F70C667006EBC94; Thu, 12 Apr 2012 03:40:46 +0100
Message-ID: <4F8640AD.3080601@limepepper.co.uk>
Date: Thu, 12 Apr 2012 03:40:45 +0100
From: Tom H <tom@limepepper.co.uk>
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:11.0) Gecko/20120329 Thunderbird/11.0.1
MIME-Version: 1.0
To: dev@tomcat.apache.org, users@tomcat.apache.org
Subject: tomcat manager with weak password compromised. Any idea about the
 payload?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi,

An instance running tomcat 6.0.24 as root in our developer network was 
compromised today by a scanning bot which deployed a war file and then 
deleted the on disk file, before scanning for new hosts until the IDS 
detected it.

Obviously this is not a flaw in tomcat, but I was hoping someone could 
give me some pointers to where I might read a write-up of the payload, 
as I would be interested to know to what extent the bot took advantage 
of its root power.

The proc with all the connections was actually perl, and runnings 
strings on a core  dump of that process reveals many perl stuff. (and 
also the very weak password list)

However googling these facts does not seem to be helping that much, any 
suggestions?

Thanks
Tom

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233502-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 12 06:43:15 2012
Return-Path: <users-return-233502-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BDCC69B02
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 12 Apr 2012 06:43:15 +0000 (UTC)
Received: (qmail 79680 invoked by uid 500); 12 Apr 2012 06:43:12 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 79602 invoked by uid 500); 12 Apr 2012 06:43:10 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 79575 invoked by uid 99); 12 Apr 2012 06:43:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 06:43:10 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Christoph.Maser@1und1.de designates 212.227.126.201 as permitted sender)
Received: from [212.227.126.201] (HELO mxintern.schlund.de) (212.227.126.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 06:43:03 +0000
Received: from [10.2.3.78] (helo=exnlb03.webde.local)
	by mxintern.schlund.de with esmtps (TLS1.0:RSA_AES_128_CBC_SHA1:16)
	(envelope-from <Christoph.Maser@1und1.de>)
	id 1SIDju-000mh1-Mu
	for users@tomcat.apache.org; Thu, 12 Apr 2012 08:42:42 +0200
Received: from exchange07.webde.local ([169.254.1.206]) by exnlb03.webde.local
 ([::1]) with mapi; Thu, 12 Apr 2012 08:42:42 +0200
From: Christoph Maser <Christoph.Maser@1und1.de>
To: "users@tomcat.apache.org" <users@tomcat.apache.org>
Date: Thu, 12 Apr 2012 08:42:42 +0200
Subject: parallel deployment activation of new version
Thread-Topic: parallel deployment activation of new version
Thread-Index: Ac0Yd3X2FEJ7vEnVT3a19HH5fTcC0A==
Message-ID: <15D3435601304A49A5E13D0825711B6128CC5706@EXCHANGE07.webde.local>
Accept-Language: de-DE
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Virus-Scanned: Symantec AntiVirus Scan Engine
X-UI-Msg-Verification: 60a95f00e8ba3e8ffce91e63d63f4353
X-Virus-Checked: Checked by ClamAV on apache.org

SGkKCmlzIHRoZXJlIGEgd2F5IHRvIGV4dGVybmFsbHkgaW5mbHVlbmNlIHRoZSBzd2l0Y2ggYmV0
d2VlbiB2ZXJzaW9ucyB3aXRoCnRoZSBuZXcgcGFyYWxsZWwgZGVwbG95bWVudCBtZXRob2QuIEFz
IEkgdW5kZXJzdGFuZCBpdCB0b21jYXQKYXV0b21hdGljYWxseSBzd2l0Y2hlcyB0byB0aGUgbmV3
IHZlcnNpb24gZm9yIG5ldyByZXF1ZXN0cyBhcyBzb29uIGFzCnRoZSBjb250ZXh0IHdpdGggdGhl
IG5ldyB2ZXJzaW9uIGlzIHN0YXJ0ZWQuIEluc3RlYWQgSSB3b3VsZCBsaWtlIHRvCm1hbnVhbGx5
IGNvbnRyb2wgd2ljaCB2ZXJzaW9uIGlzIHRoZSBwcmVmZXJyZWQgYWN0aXZlIG9uZS4KCgpSZWdh
cmRzCkNocmlzCgo=
DQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IHVzZXJzLXVuc3Vi
c2NyaWJlQHRvbWNhdC5hcGFjaGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1t
YWlsOiB1c2Vycy1oZWxwQHRvbWNhdC5hcGFjaGUub3JnDQoN

From users-return-233503-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 12 08:26:56 2012
Return-Path: <users-return-233503-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DB4689722
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 12 Apr 2012 08:26:55 +0000 (UTC)
Received: (qmail 44172 invoked by uid 500); 12 Apr 2012 08:26:52 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 43726 invoked by uid 500); 12 Apr 2012 08:26:47 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 43691 invoked by uid 99); 12 Apr 2012 08:26:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 08:26:46 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of msarmadi@gmail.com designates 209.85.216.173 as permitted sender)
Received: from [209.85.216.173] (HELO mail-qc0-f173.google.com) (209.85.216.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 08:26:38 +0000
Received: by qcsc20 with SMTP id c20so1370553qcs.18
        for <users@tomcat.apache.org>; Thu, 12 Apr 2012 01:26:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:from:date:message-id:subject:to:content-type;
        bh=qjdMTR8zCt3GlF3ccpogJP199WpzR+R2adBTt2cJunY=;
        b=Kg7vTOJEErHlvW9nb9NEs+wyDJNV/Fz+k3UZ30OGj8FdUZnF3OECVJONH9h3nM2Y8h
         lAkPYN2KU1753o2PjXlE/HiQktwEEZaJNlmQWWu5pM+ikDC0KRWqjOXH7sVvYMwGqEK+
         u0aHZtk3x3osev1n/efEPfB0gK40MR+9BZ6Iammq0sj44UtxMKicltSPhke1wucTgYEI
         Z7DCkslKR3RU77n6g6tBQ4UdB1f/aI7Et8NwlxXbhfHYkDWwinTkoQUcUYgDe5IXTGpm
         /UfNG0qQcvn//cQmIg2r9sPQliDVwyJxzbo65pknxf/LA/76L9g5MsK4Bo2DWssjhYHy
         CkKw==
Received: by 10.229.136.73 with SMTP id q9mr598875qct.49.1334219177837; Thu,
 12 Apr 2012 01:26:17 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.91.148 with HTTP; Thu, 12 Apr 2012 01:25:57 -0700 (PDT)
From: Mehdi Sarmadi <msarmadi@gmail.com>
Date: Thu, 12 Apr 2012 12:55:57 +0430
Message-ID: <CAHEJdxLo+jENu6ynuKQb=Y6M28L2783S1AttF0dbcsdedcqqFQ@mail.gmail.com>
Subject: Problem with making HTTP KeepAlive work
To: users@tomcat.apache.org
Content-Type: multipart/alternative; boundary=00248c768f8225c39004bd771c12

--00248c768f8225c39004bd771c12
Content-Type: text/plain; charset=UTF-8

Hi

  I just setup a tomcat 7 on linux for test. I just used this connection
property in server.xml

here is out connector
<Connector maxKeepAliveRequests=-1 port="7070" protocol="HTTP/1.1"
allowTrace="false" connectionTimeout="20000" clientAuth="false" />

, but when we try to connect from a client "Firefox" in my case,
"Connection: Keep-Alive" is sent in the Request by Browser but "Connection:
Keep-Alive" is not visible in the HTTP Response Headers, which obviously
coming from weblogic. I use HTTPFox plugin.

  So I guess that  that config does not work. Something seems to be missing.
  Any suggestion for making HTTP KeepAlive work in Tomcat?

Looking forward to your replies
Cheers

--
Mehdi Sarmadi

--00248c768f8225c39004bd771c12--

From users-return-233504-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 12 08:38:42 2012
Return-Path: <users-return-233504-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8E8E19646
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 12 Apr 2012 08:38:42 +0000 (UTC)
Received: (qmail 68255 invoked by uid 500); 12 Apr 2012 08:38:39 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 68203 invoked by uid 500); 12 Apr 2012 08:38:38 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 68179 invoked by uid 99); 12 Apr 2012 08:38:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 08:38:38 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [80.12.242.29] (HELO smtpout.wanadoo.co.uk) (80.12.242.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 08:38:31 +0000
Received: from mail.homeinbox.net ([2.24.211.100])
	by mwinf5d10 with ME
	id wweA1i0022AXGdN03weAcM; Thu, 12 Apr 2012 10:38:11 +0200
Received: from localhost (localhost [127.0.0.1])
	by mail.homeinbox.net (Postfix) with ESMTP id D6366B22002
	for <users@tomcat.apache.org>; Thu, 12 Apr 2012 09:38:09 +0100 (BST)
X-Virus-Scanned: Debian amavisd-new at homeinbox.net
Received: from mail.homeinbox.net ([127.0.0.1])
	by localhost (mail.homeinbox.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id XAbDqlHY6Wuc for <users@tomcat.apache.org>;
	Thu, 12 Apr 2012 09:37:50 +0100 (BST)
Received: from [192.168.23.207] (unknown [2.24.211.100])
	(using TLSv1 with cipher RC4-MD5 (128/128 bits))
	(No client certificate requested)
	by mail.homeinbox.net (Postfix) with ESMTPSA id BFB63B22001
	for <users@tomcat.apache.org>; Thu, 12 Apr 2012 09:37:50 +0100 (BST)
References: <1264858200.1427094.1334179052178.JavaMail.root@zimbra-prod-mbox-5.vmware.com> <4F85FDD9.1040204@christopherschultz.net>
User-Agent: K-9 Mail for Android
In-Reply-To: <4F85FDD9.1040204@christopherschultz.net>
MIME-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 8bit
Subject: Re: mod_jk - Firewall connection dropping
From: Mark Thomas <markt@apache.org>
Date: Thu, 12 Apr 2012 09:37:51 +0100
To: Tomcat Users List <users@tomcat.apache.org>
Message-ID: <ab72570f-7898-4ac5-846a-9bd4b8b9781c@email.android.com>



Christopher Schultz <chris@christopherschultz.net> wrote:

>-----BEGIN PGP SIGNED MESSAGE-----
>Hash: SHA1
>
>Luke,
>
>On 4/11/12 5:17 PM, Luke Meyer wrote:
>> Just noticed what I was missing about connectionTimeout - it's the 
>> default for keepAliveTimeout. So, that clears that up.
>> 
>> Still don't think it's a "huge negative performance impact!" to 
>> disable connection reuse.
>
>Well, if you think that HTTP keepalives represent a "huge positive
>performance impact" (and I certainly do), then the opposite ought to
>be true: if mod_jk has to re-establish contact with the backend Tomcat
>server for every single request, that will definitely have a negative
>performance impact.

Nope. You are not comparing apples and apples.

HTTP keep-alive is nearly always between a client and a server across the internet.
mod_jk keep-alive is nearly always between a client and a server on the same LAN and often on the same machine.

HTTP keep-alive has no support for checking the liveness of the connection before it is used.
mod_jk keep-alive supports cping/cpong and it is pretty much essential that it is used to ensure requests aren't sent to dropped connections or Tomcat instances taken out of service. The time taken for cping/cpong is very similar to that required to establish a new connection (and both are very, very small when compared to the time taken to process a request).

keep-alive does not scale for BIO connectors which require one thread per connection. Tomcat's BIO HTTP connector protects against thread exuastion due to keep-alive by disabling keep-alive once 75% of the threads are in use. Tomcat's BIO AJP has no exhaustion against thread exhaustion. Because mod_jk uses persistent connections folks often don't get that Tomcat maxThreads (on each instance) must equal the total number of httpd threads across all httpd instances that route requests to that Tomcat. Managing this corectly requires careful setting of timeouts and, despite Rainer and others writing some great docs, folks still frequently get it wrong.

In short, disabling mod_jk keep-alive frequently has no noticeable performance impact (some customers of mine reported a performance improvement!) and greatly simplifies configuration - especially for those folks that don't have a complete grasp of all of the details. The notice in the docs about "huge negative performance impact" is a nonsense that needs to be removed. However, given the strength of feelings that were expressed when the diabling keep-alive feature was proposed (that lead to that notice in the docs) I am not prepared to remove it as I don't wish to start a commit war. I'd be happy if the notice was toned down rather than removed but I'd  rather see Rainer edit it to something he his happy with than I just remove it.

Mark

>
>- -chris
>-----BEGIN PGP SIGNATURE-----
>Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
>Comment: GPGTools - http://gpgtools.org
>Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/
>
>iEYEARECAAYFAk+F/dkACgkQ9CaO5/Lv0PAVDwCcDm6/dCbAqgi0oaWESDUuRGmW
>sdgAn1i/q8hHIQcthwqriOZVJYZy2m1j
>=Boq3
>-----END PGP SIGNATURE-----
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>For additional commands, e-mail: users-help@tomcat.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233505-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 12 08:41:03 2012
Return-Path: <users-return-233505-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3F767969A
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 12 Apr 2012 08:41:03 +0000 (UTC)
Received: (qmail 75426 invoked by uid 500); 12 Apr 2012 08:40:59 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 75297 invoked by uid 500); 12 Apr 2012 08:40:59 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 75285 invoked by uid 99); 12 Apr 2012 08:40:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 08:40:58 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [80.12.242.29] (HELO smtpout.wanadoo.co.uk) (80.12.242.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 08:40:52 +0000
Received: from mail.homeinbox.net ([2.24.211.100])
	by mwinf5d10 with ME
	id wwgW1i00K2AXGdN03wgWMt; Thu, 12 Apr 2012 10:40:30 +0200
Received: from localhost (localhost [127.0.0.1])
	by mail.homeinbox.net (Postfix) with ESMTP id 5EC11B22002
	for <users@tomcat.apache.org>; Thu, 12 Apr 2012 09:40:30 +0100 (BST)
X-Virus-Scanned: Debian amavisd-new at homeinbox.net
Received: from mail.homeinbox.net ([127.0.0.1])
	by localhost (mail.homeinbox.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id A7EAws5KlIwS for <users@tomcat.apache.org>;
	Thu, 12 Apr 2012 09:40:21 +0100 (BST)
Received: from [192.168.23.207] (unknown [2.24.211.100])
	(using TLSv1 with cipher RC4-MD5 (128/128 bits))
	(No client certificate requested)
	by mail.homeinbox.net (Postfix) with ESMTPSA id 9F5CBB22001
	for <users@tomcat.apache.org>; Thu, 12 Apr 2012 09:40:21 +0100 (BST)
References: <15D3435601304A49A5E13D0825711B6128CC5706@EXCHANGE07.webde.local>
User-Agent: K-9 Mail for Android
In-Reply-To: <15D3435601304A49A5E13D0825711B6128CC5706@EXCHANGE07.webde.local>
MIME-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 8bit
Subject: Re: parallel deployment activation of new version
From: Mark Thomas <markt@apache.org>
Date: Thu, 12 Apr 2012 09:40:22 +0100
To: Tomcat Users List <users@tomcat.apache.org>
Message-ID: <c9852e00-8f22-4a9a-99b7-7543ab14d743@email.android.com>
X-Virus-Checked: Checked by ClamAV on apache.org

The only control you have is by ensuring that the version you want to be used by default has the highest version number.

Mark 

Christoph Maser <Christoph.Maser@1und1.de> wrote:

>Hi
>
>is there a way to externally influence the switch between versions with
>the new parallel deployment method. As I understand it tomcat
>automatically switches to the new version for new requests as soon as
>the context with the new version is started. Instead I would like to
>manually control wich version is the preferred active one.
>
>
>Regards
>Chris


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233506-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 12 08:59:10 2012
Return-Path: <users-return-233506-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D8E47996A
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 12 Apr 2012 08:59:09 +0000 (UTC)
Received: (qmail 14095 invoked by uid 500); 12 Apr 2012 08:59:06 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 14024 invoked by uid 500); 12 Apr 2012 08:59:06 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 13988 invoked by uid 99); 12 Apr 2012 08:59:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 08:59:05 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Christoph.Maser@1und1.de designates 212.227.126.201 as permitted sender)
Received: from [212.227.126.201] (HELO mxintern.schlund.de) (212.227.126.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 08:59:00 +0000
Received: from [10.2.3.78] (helo=exnlb03.webde.local)
	by mxintern.schlund.de with esmtps (TLS1.0:RSA_AES_128_CBC_SHA1:16)
	(envelope-from <Christoph.Maser@1und1.de>)
	id 1SIFrT-000Kak-PX; Thu, 12 Apr 2012 10:58:39 +0200
Received: from exchange07.webde.local ([169.254.1.206]) by exnlb03.webde.local
 ([::1]) with mapi; Thu, 12 Apr 2012 10:58:39 +0200
From: Christoph Maser <Christoph.Maser@1und1.de>
To: "markt@apache.org" <markt@apache.org>
CC: "users@tomcat.apache.org" <users@tomcat.apache.org>
Date: Thu, 12 Apr 2012 10:58:38 +0200
Subject: Re: parallel deployment activation of new version
Thread-Topic: parallel deployment activation of new version
Thread-Index: Ac0YinOR8R0+1ClTQfSr/y/hiB0ScQ==
Message-ID: <15D3435601304A49A5E13D0825711B6128CC570C@EXCHANGE07.webde.local>
References: <15D3435601304A49A5E13D0825711B6128CC5706@EXCHANGE07.webde.local>
 <c9852e00-8f22-4a9a-99b7-7543ab14d743@email.android.com>
In-Reply-To: <c9852e00-8f22-4a9a-99b7-7543ab14d743@email.android.com>
Accept-Language: de-DE
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Virus-Scanned: Symantec AntiVirus Scan Engine
X-UI-Msg-Verification: 28dac3ae110a8d8ff5f84e089bc95438
X-Virus-Checked: Checked by ClamAV on apache.org

RG8geW91IHNlZSBhbnkgY2hhbmNlIGEgcmVxdWVzdCBmb3IgZmVhdHVyZSBpbiB0aGF0IGRpcmVj
dGlvbiB3b3VsZCBiZQphY2NwZXRlZD8KCkNocmlzCgpBbSBEb25uZXJzdGFnLCBkZW4gMTIuMDQu
MjAxMiwgMDk6NDAgKzAxMDAgc2NocmllYiBNYXJrIFRob21hczoKPiBUaGUgb25seSBjb250cm9s
IHlvdSBoYXZlIGlzIGJ5IGVuc3VyaW5nIHRoYXQgdGhlIHZlcnNpb24geW91IHdhbnQgdG8gYmUg
dXNlZCBieSBkZWZhdWx0IGhhcyB0aGUgaGlnaGVzdCB2ZXJzaW9uIG51bWJlci4KPiAKPiBNYXJr
IAo+IAo+IENocmlzdG9waCBNYXNlciA8Q2hyaXN0b3BoLk1hc2VyQDF1bmQxLmRlPiB3cm90ZToK
PiAKPiA+SGkKPiA+Cj4gPmlzIHRoZXJlIGEgd2F5IHRvIGV4dGVybmFsbHkgaW5mbHVlbmNlIHRo
ZSBzd2l0Y2ggYmV0d2VlbiB2ZXJzaW9ucyB3aXRoCj4gPnRoZSBuZXcgcGFyYWxsZWwgZGVwbG95
bWVudCBtZXRob2QuIEFzIEkgdW5kZXJzdGFuZCBpdCB0b21jYXQKPiA+YXV0b21hdGljYWxseSBz
d2l0Y2hlcyB0byB0aGUgbmV3IHZlcnNpb24gZm9yIG5ldyByZXF1ZXN0cyBhcyBzb29uIGFzCj4g
PnRoZSBjb250ZXh0IHdpdGggdGhlIG5ldyB2ZXJzaW9uIGlzIHN0YXJ0ZWQuIEluc3RlYWQgSSB3
b3VsZCBsaWtlIHRvCj4gPm1hbnVhbGx5IGNvbnRyb2wgd2ljaCB2ZXJzaW9uIGlzIHRoZSBwcmVm
ZXJyZWQgYWN0aXZlIG9uZS4KPiA+Cj4gPgo+ID5SZWdhcmRzCj4gPkNocmlzCj4gCj4gCj4gLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tCj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogdXNlcnMtdW5zdWJzY3JpYmVAdG9t
Y2F0LmFwYWNoZS5vcmcKPiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiB1c2Vycy1o
ZWxwQHRvbWNhdC5hcGFjaGUub3JnCj4gCgotLSAKQ2hyaXN0b3BoIE1hc2VyCiAKCjEmMSBJbnRl
cm5ldCBBRyAtIElUIE9wZXJhdGlvbnMgTWFpbCAmIE1lZGlhIEhvbWVwYWdlCkZyYW5rZnVydGVy
IFJpbmcgMTE1YSDCtyBERS04MDgwNyBNw7xuY2hlbgpUZWxlZm9uOiArNDkgODkgMTQzMzktNTI4
CmNocmlzdG9waC5tYXNlckAxdW5kMS5kZQoKQW10c2dlcmljaHQgTW9udGFiYXVyIC8gSFJCIDY0
ODQKVm9yc3TDpG5kZTogSGVubmluZyBBaGxlcnQsIFJhbHBoIERvbW1lcm11dGgsIE1hdHRoaWFz
IEVocmxpY2gsIFJvYmVydApIb2ZmbWFubiwgQW5kcmVhcyBIb2ZtYW5uLCBNYXJrdXMgSHVobiwg
SGFucy1IZW5uaW5nIEtldHRsZXIsIERyLiBPbGl2ZXIKTWF1c3MsIEphbiBPZXRqZW4KQXVmc2lj
aHRzcmF0c3ZvcnNpdHplbmRlcjogTWljaGFlbCBTY2hlZXJlbgo=
DQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IHVzZXJzLXVuc3Vi
c2NyaWJlQHRvbWNhdC5hcGFjaGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1t
YWlsOiB1c2Vycy1oZWxwQHRvbWNhdC5hcGFjaGUub3JnDQoN

From users-return-233507-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 12 10:06:32 2012
Return-Path: <users-return-233507-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D4A1D9EA5
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 12 Apr 2012 10:06:32 +0000 (UTC)
Received: (qmail 91281 invoked by uid 500); 12 Apr 2012 10:06:29 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 91233 invoked by uid 500); 12 Apr 2012 10:06:29 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 91200 invoked by uid 99); 12 Apr 2012 10:06:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 10:06:28 +0000
X-ASF-Spam-Status: No, hits=-2.8 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of Sandeep.Shridhar@emc.com designates 128.222.32.20 as permitted sender)
Received: from [128.222.32.20] (HELO mexforward.lss.emc.com) (128.222.32.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 10:06:20 +0000
Received: from hop04-l1d11-si02.isus.emc.com (HOP04-L1D11-SI02.isus.emc.com [10.254.111.55])
	by mexforward.lss.emc.com (Switch-3.4.3/Switch-3.4.3) with ESMTP id q3CA5xj6031035
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <users@tomcat.apache.org>; Thu, 12 Apr 2012 06:05:59 -0400
Received: from mailhub.lss.emc.com (mailhub.lss.emc.com [10.254.222.226]) by hop04-l1d11-si02.isus.emc.com (RSA Interceptor) for <users@tomcat.apache.org>; Thu, 12 Apr 2012 06:05:48 -0400
Received: from mxhub12.corp.emc.com (mxhub12.corp.emc.com [10.254.92.107])
	by mailhub.lss.emc.com (Switch-3.4.3/Switch-3.4.3) with ESMTP id q3CA5lU1019361
	for <users@tomcat.apache.org>; Thu, 12 Apr 2012 06:05:48 -0400
Received: from mx34a.corp.emc.com ([169.254.1.228]) by mxhub12.corp.emc.com
 ([10.254.92.107]) with mapi; Thu, 12 Apr 2012 06:05:48 -0400
From: <Sandeep.Shridhar@emc.com>
To: <users@tomcat.apache.org>
Date: Thu, 12 Apr 2012 06:05:44 -0400
Subject: Increase in Virt Memory and RSS memory - Tomcat 6.0.x
Thread-Topic: Increase in Virt Memory and RSS memory - Tomcat 6.0.x
Thread-Index: Ac0YaiQOEj7Cch3jQaKE/f0uaDV+xgAASgPwAAoZE7A=
Message-ID: <E4EFB9B47A831F43AD5BB2AEFC2B9E5919A5D1397A@MX34A.corp.emc.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_E4EFB9B47A831F43AD5BB2AEFC2B9E5919A5D1397AMX34Acorpemcc_"
MIME-Version: 1.0
X-EMM-MHVC: 1

--_000_E4EFB9B47A831F43AD5BB2AEFC2B9E5919A5D1397AMX34Acorpemcc_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

We are observing an increase in VIRT and RES memory of tomcat6.0  which int=
ernally invokes our custom API is invoked (This API internally does an JNI =
call).
The same API code when invoked through a standalone java process repeatedly=
 does not lead to an increase in the VIRT /RES memory.

Is there any way this could be debugged further? Any hints would be really =
helpful.

Please find the details of my test below.

SETUP:
=3D=3D=3D=3D=3D=3D
TOMCAT Version: tomcat6-6.0.35-1
OS: SUSE Linux Enterprise Server 11 (x86_64)
JAVA: 1.6 (Max Heap memory for tomcat/standalone java proc 512MB)

Tomcat Memory Growth: (We repeatedly invoked the servlet using a GET reques=
t)
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
PID      USER      PR  NI  VIRT    RES     SHR S  %CPU    %MEM    TIME+  CO=
MMAND
26807 tomcat    20   0 1137m 156m  20m S    0          2.0           0:11.4=
8 java --                12:00PM April 10th
26807 tomcat    20   0 1316m 340m  22m S  171       4.3           5:10.71 j=
ava ---               12:31 PM April 10th
26807 tomcat    20   0 1862m 945m  20m S  167      11.8         54:04.52 ja=
va ---             1:00PM April 10th.
26807 tomcat    20   0 2076m 1.1g    20m S  171      13.7          65:54.73=
 java ---            1:07PM April 10th
26807 tomcat    20   0 2823m 1.8g    20m S  154      22.8          159:27.6=
0 java --            2:14PM April 10th
26807 tomcat    20   0 3296m 2.4g    13m S  173    30.4          217:13.22 =
java ---           2:49PM April 10th

Standalone Java Process (This repeated invokes our API)
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
19585 root      20   0 11444 1516 1220 S    0  0.0   0:00.00 testClient -- =
at 2.36pm April 10th
19585 root      20   0 11444 1516 1220 S    0  0.0   0:00.00 testClient -- =
at 2.48 pm April 10th
19585 root      20   0 11444 1516 1220 S    0  0.0   0:00.00 testClient - a=
t 2.55 pm April 10th
19585 root      20   0 11444 1516 1220 S    0  0.0   0:00.00 testClient - a=
t 3:15 PM April 10th
19585 root      20   0 11444 1484 1188 S    0  0.0   0:00.00 testClient -- =
at 3.29 April 10th
Note: In the Standalone Java Process we also tried to repeatedly invoked th=
e API by creating new threads and every time. This too did not result in a =
VIRT/RES memory growth....


Please let me know if any additional details are required ...

Thanks & Regards,
Sandeep



--_000_E4EFB9B47A831F43AD5BB2AEFC2B9E5919A5D1397AMX34Acorpemcc_--

From users-return-233508-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 12 10:35:51 2012
Return-Path: <users-return-233508-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9E5C595BB
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 12 Apr 2012 10:35:51 +0000 (UTC)
Received: (qmail 80586 invoked by uid 500); 12 Apr 2012 10:35:48 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 80535 invoked by uid 500); 12 Apr 2012 10:35:48 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 80526 invoked by uid 99); 12 Apr 2012 10:35:48 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 10:35:48 +0000
Received: from localhost (HELO mail-ee0-f45.google.com) (127.0.0.1)
  (smtp-auth username olamy, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 10:35:47 +0000
Received: by eeit10 with SMTP id t10so750419eei.18
        for <users@tomcat.apache.org>; Thu, 12 Apr 2012 03:35:46 -0700 (PDT)
Received: by 10.213.9.204 with SMTP id m12mr170437ebm.50.1334226946030; Thu,
 12 Apr 2012 03:35:46 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.213.13.77 with HTTP; Thu, 12 Apr 2012 03:35:25 -0700 (PDT)
In-Reply-To: <CAPoyBqQsbjfYexJp_yNsS+diOcyhtUNU7fFzASBo4yvfs8rNnw@mail.gmail.com>
References: <CAPoyBqRkjgKApxNk_SfrKMX8GPB1d6MZj-c-nVgpZ+JjZL0D=g@mail.gmail.com>
 <CBA2FB65.D678%leigh.anderson@betfair.com> <CAPoyBqQsbjfYexJp_yNsS+diOcyhtUNU7fFzASBo4yvfs8rNnw@mail.gmail.com>
From: Olivier Lamy <olamy@apache.org>
Date: Thu, 12 Apr 2012 12:35:25 +0200
Message-ID: <CAPoyBqQB1o6khFdkxT-z+OcQECKJ3AM=KgXhg2YpKTKg4MiDVw@mail.gmail.com>
Subject: Re: Tomcat7-maven-plugin 2.0-beta1 and useSeparateTomcatClassloader
 fails with run goal
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hello,
Apologize for delay.
That should be fixed now (I have deployed 2.0-SNAPSHOT).
If you could try with your use case.
Thanks,
2012/4/8 Olivier Lamy <olamy@apache.org>:
> Hello Leigh,
> Thanks for creating issue.
> Until now I tried to reproduce the issue but I failed.
> I wonder if you could attach a build log using -e mvn flag.
>
> 2012/4/5 Leigh Anderson <Leigh.Anderson@betfair.com>:
>> Hi Olivier,
>>
>> I'm not able to run this with tomcat6 as it's a Servlet 3.0 project. I'l=
l
>> get the issue created -- should have some time next week to put together=
 a
>> sample project.
>>
>>
>> Thanks,
>> Leigh
>>
>> On 04/04/2012 11:36, "Olivier Lamy" <olamy@apache.org> wrote:
>>
>>>Hello,
>>>Looks to be an issue (does that work with tomcat6:run ?)
>>>Could you create an issue here:
>>>https://issues.apache.org/jira/browse/MTOMCAT (if possible with a
>>>small sample project to reproduce).
>>>
>>>Thanks
>>>--
>>>Olivier Lamy
>>>Talend: http://coders.talend.com
>>>http://twitter.com/olamy | http://linkedin.com/in/olamy
>>>
>>>2012/4/3 Leigh Anderson <Leigh.Anderson@betfair.com>:
>>>> Hi All,
>>>>
>>>> I'm trying to start a web application with 'mvn tomcat7:run'. It seems
>>>> that with the configuration below it fails with the following error:
>>>>
>>>>
>>>> =A0 =A0 =A0 =A0[INFO]
>>>> ----------------------------------------------------------------------=
--
>>>> =A0 =A0 =A0 =A0[ERROR] Failed to execute goal
>>>> org.apache.tomcat.maven:tomcat7-maven-plugin:2.0-beta-1:run
>>>>(default-cli)
>>>> on project mantis-test-web-app: No such archiver: 'jar'. -> [Help 1]
>>>> =A0 =A0 =A0 =A0[ERROR]
>>>> =A0 =A0 =A0 =A0[ERROR] To see the full stack trace of the errors, re-r=
un Maven
>>>>with the
>>>> -e switch.
>>>> =A0 =A0 =A0 =A0[ERROR] Re-run Maven using the -X switch to enable full=
 debug
>>>>logging.
>>>>
>>>> I have also tried
>>>> =A0 =A0 =A0 =A0* 'mvn tomcat:run-war', which seems to get past this po=
int, but
>>>>then the
>>>> application will not start because the 'additionalClasspathDir' proper=
ty
>>>> is not supported by the 'run-war' goal.
>>>> =A0 =A0 =A0 =A0* removing 'useSeparateTomcatClassLoader' which then do=
esn't
>>>>load the
>>>> Spring instrumenting class loader required to use AspectJ LTW, specifi=
ed
>>>> in
>>>> context.xml. I have confirmed that I get the same 'no such archiver'
>>>>error
>>>> if I remove the
>>>> context.xml, so I don't believe this to be the cause.
>>>>
>>>> Is there something I've missed in the configuration?
>>>>
>>>> Cheers,
>>>> Leigh
>>>>
>>>>
>>>>
>>>>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<plugin>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<groupId>org.apache.tom=
cat.maven</groupId>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<artifactId>tomcat7-mav=
en-plugin</artifactId>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<version>2.0-beta-1</ve=
rsion>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<configuration>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<systemProperti=
es>
>>>>
>>>><log4j.defaultInitOverride>true</log4j.defaultInitOverride>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<HOSTNA=
ME>localhost</HOSTNAME>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<port.h=
ttp>9090</port.http>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<port.h=
ttps>8443</port.https>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0</systemPropert=
ies>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<port>9090</por=
t>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<httpsPort>8443=
</httpsPort>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<path>/</path>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<useTestClasspa=
th>false</useTestClasspath>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<additionalClas=
spathDirs>
>>>>
>>>>
>>>><additionalClasspathDir>${project.basedir}/config</additionalClasspathD=
ir
>>>>>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0</additionalCla=
sspathDirs>
>>>>
>>>> <useSeparateTomcatClassLoader>true</useSeparateTomcatClassLoader>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0</configuration>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<dependencies>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<dependency>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<groupI=
d>org.springframework</groupId>
>>>>
>>>>
>>>><artifactId>spring-instrument-tomcat</artifactId>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<versio=
n>${spring.version}</version>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0</dependency>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0</dependencies>
>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0</plugin>
>>>>
>>>>
>>>>
>>>> ______________________________________________________________________=
__
>>>> In order to protect our email recipients, Betfair Group use SkyScan fr=
om
>>>> MessageLabs to scan all Incoming and Outgoing mail for viruses.
>>>>
>>>> ______________________________________________________________________=
__
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>>
>>>
>>>---------------------------------------------------------------------
>>>To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>For additional commands, e-mail: users-help@tomcat.apache.org
>>>
>>
>>
>> ________________________________________________________________________
>> In order to protect our email recipients, Betfair Group use SkyScan from
>> MessageLabs to scan all Incoming and Outgoing mail for viruses.
>>
>> ________________________________________________________________________
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>> For additional commands, e-mail: users-help@tomcat.apache.org
>>
>
>
>
> --
> Olivier Lamy
> Talend: http://coders.talend.com
> http://twitter.com/olamy | http://linkedin.com/in/olamy



--=20
Olivier Lamy
Talend: http://coders.talend.com
http://twitter.com/olamy | http://linkedin.com/in/olamy

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233509-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 12 11:14:56 2012
Return-Path: <users-return-233509-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CAEBA9E7F
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 12 Apr 2012 11:14:56 +0000 (UTC)
Received: (qmail 83587 invoked by uid 500); 12 Apr 2012 11:14:53 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 83503 invoked by uid 500); 12 Apr 2012 11:14:53 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 83492 invoked by uid 99); 12 Apr 2012 11:14:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 11:14:53 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.106.220.35] (HELO mail91.messagelabs.com) (194.106.220.35)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 12 Apr 2012 11:14:46 +0000
X-Env-Sender: Leigh.Anderson@betfair.com
X-Msg-Ref: server-9.tower-91.messagelabs.com!1334229265!4479572!1
X-Originating-IP: [213.86.197.130]
X-StarScan-Version: 6.5.7; banners=betfair.com,-,-
X-VirusChecked: Checked
Received: (qmail 19555 invoked from network); 12 Apr 2012 11:14:25 -0000
Received: from unknown (HELO HAMCAS03.uk.betfair.local) (213.86.197.130)
  by server-9.tower-91.messagelabs.com with SMTP; 12 Apr 2012 11:14:25 -0000
Received: from HAMMBX03.uk.betfair.local ([fe80::7828:724c:8e7a:6d6b]) by
 HAMCAS03.uk.betfair.local ([::1]) with mapi id 14.01.0355.002; Thu, 12 Apr
 2012 12:14:25 +0100
From: Leigh Anderson <Leigh.Anderson@betfair.com>
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Tomcat7-maven-plugin 2.0-beta1 and useSeparateTomcatClassloader
 fails with run goal
Thread-Topic: Tomcat7-maven-plugin 2.0-beta1 and
 useSeparateTomcatClassloader fails with run goal
Thread-Index: AQHNEWW+jphHNngJdEuNYm49rCONM5aKae+AgAFgDACABLkQgIAGeVaAgAAbooA=
Date: Thu, 12 Apr 2012 11:14:24 +0000
Message-ID: <CBAC76EB.D895%leigh.anderson@betfair.com>
In-Reply-To: <CAPoyBqQB1o6khFdkxT-z+OcQECKJ3AM=KgXhg2YpKTKg4MiDVw@mail.gmail.com>
Accept-Language: en-GB, en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-originating-ip: [10.9.0.2]
Content-Type: text/plain; charset="us-ascii"
Content-ID: <C9459291A6AD944E8BF6F7BDA8D7E574@betfair.com>
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

Hi Olivier,

That's solved the problem, thanks. Unfortunately, declaring a custom class=

loader in a context.xml causes Tomcat to use that one, instead of the one
set up with the correct class path by the plugin. I'll keep looking to see=

if I can find a way around this.

Thanks for your prompt help with this.
Leigh

On 12/04/2012 11:35, "Olivier Lamy" <olamy@apache.org> wrote:

>Hello,
>Apologize for delay.
>That should be fixed now (I have deployed 2.0-SNAPSHOT).
>If you could try with your use case.
>Thanks,
>2012/4/8 Olivier Lamy <olamy@apache.org>:
>> Hello Leigh,
>> Thanks for creating issue.
>> Until now I tried to reproduce the issue but I failed.
>> I wonder if you could attach a build log using -e mvn flag.
>>
>> 2012/4/5 Leigh Anderson <Leigh.Anderson@betfair.com>:
>>> Hi Olivier,
>>>
>>> I'm not able to run this with tomcat6 as it's a Servlet 3.0 project.
>>>I'll
>>> get the issue created -- should have some time next week to put
>>>together a
>>> sample project.
>>>
>>>
>>> Thanks,
>>> Leigh
>>>
>>> On 04/04/2012 11:36, "Olivier Lamy" <olamy@apache.org> wrote:
>>>
>>>>Hello,
>>>>Looks to be an issue (does that work with tomcat6:run ?)
>>>>Could you create an issue here:
>>>>https://issues.apache.org/jira/browse/MTOMCAT (if possible with a
>>>>small sample project to reproduce).
>>>>
>>>>Thanks
>>>>--
>>>>Olivier Lamy
>>>>Talend: http://coders.talend.com
>>>>http://twitter.com/olamy | http://linkedin.com/in/olamy
>>>>
>>>>2012/4/3 Leigh Anderson <Leigh.Anderson@betfair.com>:
>>>>> Hi All,
>>>>>
>>>>> I'm trying to start a web application with 'mvn tomcat7:run'. It
>>>>>seems
>>>>> that with the configuration below it fails with the following error:=

>>>>>
>>>>>
>>>>>        [INFO]
>>>>>=20
>>>>>---------------------------------------------------------------------=
-
>>>>>--
>>>>>        [ERROR] Failed to execute goal
>>>>> org.apache.tomcat.maven:tomcat7-maven-plugin:2.0-beta-1:run
>>>>>(default-cli)
>>>>> on project mantis-test-web-app: No such archiver: 'jar'. -> [Help 1]=

>>>>>        [ERROR]
>>>>>     =20  [ERROR] To see the full stack trace of the errors, re-run
>>>>>Maven
>>>>>with the
>>>>> -e switch.
>>>>>        [ERROR] Re-run Maven using the -X switch to enable full debug=

>>>>>logging.
>>>>>
>>>>> I have also tried
>>>>>        * 'mvn tomcat:run-war', which seems to get past this point,
>>>>>but
>>>>>then the
>>>>> application will not start because the 'additionalClasspathDir'
>>>>>property
>>>>> is not supported by the 'run-war' goal.
>>>>>        * removing 'useSeparateTomcatClassLoader' which then doesn't
>>>>>load the
>>>>> Spring instrumenting class loader required to use AspectJ LTW,
>>>>>specified
>>>>> in
>>>>> context.xml. I have confirmed that I get the same 'no such archiver'=

>>>>>error
>>>>> if I remove the
>>>>> context.xml, so I don't believe this to be the cause.
>>>>>
>>>>> Is there something I've missed in the configuration?
>>>>>
>>>>> Cheers,
>>>>> Leigh
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>                    <plugin>
>>>>>                        <groupId>org.apache.tomcat.maven</groupId>
>>>>>                        <artifactId>tomcat7-maven-plugin</artifactId>=

>>>>>                        <version>2.0-beta-1</version>
>>>>>                        <configuration>
>>>>>                            <systemProperties>
>>>>>
>>>>><log4j.defaultInitOverride>true</log4j.defaultInitOverride>
>>>>>                                <HOSTNAME>localhost</HOSTNAME>
>>>>>                                <port.http>9090</port.http>
>>>>>                                <port.https>8443</port.https>
>>>>>                            </systemProperties>
>>>>>                            <port>9090</port>
>>>>>                            <httpsPort>8443</httpsPort>
>>>>>                            <path>/</path>
>>>>>                            <useTestClasspath>false</useTestClasspath=
>
>>>>>                            <additionalClasspathDirs>
>>>>>
>>>>>
>>>>><additionalClasspathDir>${project.basedir}/config</additionalClasspat=
h
>>>>>Dir
>>>>>>
>>>>>                            </additionalClasspathDirs>
>>>>>
>>>>> <useSeparateTomcatClassLoader>true</useSeparateTomcatClassLoader>
>>>>>                        </configuration>
>>>>>                        <dependencies>
>>>>>                            <dependency>
>>>>>                                <groupId>org.springframework</groupId=
>
>>>>>
>>>>>
>>>>><artifactId>spring-instrument-tomcat</artifactId>
>>>>>                                <version>${spring.version}</version>
>>>>>                            </dependency>
>>>>>                        </dependencies>
>>>>>                    </plugin>
>>>>>
>>>>>
>>>>>
>>>>>=20
>>>>>_____________________________________________________________________=
_
>>>>>__
>>>>> In order to protect our email recipients, Betfair Group use SkyScan
>>>>>from
>>>>> MessageLabs to scan all Incoming and Outgoing mail for viruses.
>>>>>
>>>>>=20
>>>>>_____________________________________________________________________=
_
>>>>>__
>>>>>
>>>>> --------------------------------------------------------------------=
-
>>>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>>>
>>>>
>>>>---------------------------------------------------------------------
>>>>To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>>For additional commands, e-mail: users-help@tomcat.apache.org
>>>>
>>>
>>>
>>>=20
>>>_______________________________________________________________________=
_
>>> In order to protect our email recipients, Betfair Group use SkyScan
>>>from
>>> MessageLabs to scan all Incoming and Outgoing mail for viruses.
>>>
>>>=20
>>>_______________________________________________________________________=
_
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>
>>
>>
>>
>> --
>> Olivier Lamy
>> Talend: http://coders.talend.com
>> http://twitter.com/olamy | http://linkedin.com/in/olamy
>
>
>
>--=20
>Olivier Lamy
>Talend: http://coders.talend.com
>http://twitter.com/olamy | http://linkedin.com/in/olamy
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>For additional commands, e-mail: users-help@tomcat.apache.org
>


________________________________________________________________________
In order to protect our email recipients, Betfair Group use SkyScan from=20=

MessageLabs to scan all Incoming and Outgoing mail for viruses.

________________________________________________________________________

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233510-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 12 11:33:42 2012
Return-Path: <users-return-233510-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 40BEE9001
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 12 Apr 2012 11:33:42 +0000 (UTC)
Received: (qmail 30766 invoked by uid 500); 12 Apr 2012 11:33:38 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 30711 invoked by uid 500); 12 Apr 2012 11:33:38 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 30702 invoked by uid 99); 12 Apr 2012 11:33:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 11:33:38 +0000
X-ASF-Spam-Status: No, hits=1.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of milesg78@gmail.com designates 209.85.160.45 as permitted sender)
Received: from [209.85.160.45] (HELO mail-pb0-f45.google.com) (209.85.160.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 11:33:31 +0000
Received: by pbcuo5 with SMTP id uo5so2463641pbc.18
        for <users@tomcat.apache.org>; Thu, 12 Apr 2012 04:33:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:sender:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type;
        bh=dG+nIkrmaHt+IExOa1/CrPuFwY9LS1nEAKU+bY7Db/c=;
        b=XKxg6McLpjAzJMJWFYp6L4l0suDZxluKbsF5z35ZqWQAE1cf+rXh1AFKGE94dgBkIS
         TmVrGn/TW4AJhE7WFcZ7kZV/7aAI8DQlEBUcLHC+9akZPd9TIxTf1AQAtaOBx1rGzIdT
         RrKddpY8lghDfnq60Oxhm5wKCDviplHVqJw+KKXBR3BuqdB5Lf+fIDMi7GHqyvEgwaFo
         zinOeUEzfKSuQcXdns2LM4I4gh93rd4E2SOxqxVWuNheLvN/Hlc4G7CjGyesx8NCrOqw
         lKJWsuXjjQibA3eODZNZ2Szv/xUmuPGEaEOG4lapbfV2Fsp+Id2Z3Slh9b+uXoOp62TE
         fvpA==
MIME-Version: 1.0
Received: by 10.68.125.131 with SMTP id mq3mr2412668pbb.123.1334230390706;
 Thu, 12 Apr 2012 04:33:10 -0700 (PDT)
Sender: milesg78@gmail.com
Received: by 10.142.172.2 with HTTP; Thu, 12 Apr 2012 04:33:10 -0700 (PDT)
In-Reply-To: <4847057902696949195@unknownmsgid>
References: <CAJMhK2+38h0LdKUVemA6JNaEHqm8q+mc3ohAj9hXThvrBQh7yQ@mail.gmail.com>
	<5d1d2822faf2e2ae22f9eff15f3afd12@tau.ceti.pl>
	<CAJMhK2JS51iEHh6Rc2Dd0oWP2T1yFoYfLanno--f-T70XZribA@mail.gmail.com>
	<99C8B2929B39C24493377AC7A121E21FB016FD1231@USEA-EXCH8.na.uis.unisys.com>
	<CAJMhK2+1Ex0JqiVzrpbLNprMo9wk5VQ3tOaJAVN4fv_3Gq0q0A@mail.gmail.com>
	<4847057902696949195@unknownmsgid>
Date: Thu, 12 Apr 2012 14:33:10 +0300
X-Google-Sender-Auth: ojYdyatzYXhQa2y0ylwNwGMItcE
Message-ID: <CAFmzfTWYPASufMOoEo2swYJo8NEZhZUE=eT4Tf4ZbdK56fAwGw@mail.gmail.com>
Subject: Re: Using ServletContainerInitializer for 2.5 applications
From: Violeta Georgieva <violetagg@apache.org>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=047d7b2e447e7c92d504bd79b88a

--047d7b2e447e7c92d504bd79b88a
Content-Type: text/plain; charset=ISO-8859-1

Hi,

This mechanism is meant to be a standard way for web frameworks to extend
the Servlet Container. IMHO this is compliant with the specification:



"8.2.4 Shared libraries / runtimes pluggability

In addition to supporting fragments and use of annotations one of the
requirements

is that not only we be able to plug-in things that are bundled in the
WEB-INF/lib

but also plugin shared copies of frameworks - including being able to
plug-in to the

web container things like JAX-WS, JAX-RS and JSF that build on top of the
web

container. The ServletContainerInitializer allows handling such a use case

as described below."


Lazar just wants to extend the Servlet Container using this standard
mechanism. He wants his implementation of ServletContainerInitializer to be
invoked for every web application.

Regards
Violeta

2012/4/12 Pid * <pid@pidster.com>

> On 11 Apr 2012, at 14:42, Lazar Kirchev <lazar.kirchev@gmail.com> wrote:
>
> > ServletContainerInitializer
>
> Only exists in Servlet 3.0. Supporting it in lower spec versions would
> be non-compliant.
>
> And silly.
>
>
> p
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>
>

--047d7b2e447e7c92d504bd79b88a--

From users-return-233511-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 12 11:40:05 2012
Return-Path: <users-return-233511-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8A6B990B8
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 12 Apr 2012 11:40:05 +0000 (UTC)
Received: (qmail 46717 invoked by uid 500); 12 Apr 2012 11:40:02 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 46645 invoked by uid 500); 12 Apr 2012 11:40:02 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 46636 invoked by uid 99); 12 Apr 2012 11:40:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 11:40:02 +0000
X-ASF-Spam-Status: No, hits=-4.3 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [192.35.17.2] (HELO thoth.sbs.de) (192.35.17.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 11:39:54 +0000
Received: from mail1.siemens.de (localhost [127.0.0.1])
	by thoth.sbs.de (8.13.6/8.13.6) with ESMTP id q3CBdWPj013812
	for <users@tomcat.apache.org>; Thu, 12 Apr 2012 13:39:32 +0200
Received: from DEMCHP99ET0MSX.ww902.siemens.net (demchp99et0msx.ww902.siemens.net [139.25.131.181])
	by mail1.siemens.de (8.13.6/8.13.6) with ESMTP id q3CBdW87027678
	(version=TLSv1/SSLv3 cipher=RC4-MD5 bits=128 verify=FAIL)
	for <users@tomcat.apache.org>; Thu, 12 Apr 2012 13:39:32 +0200
Received: from DEMCHP99E84MSX.ww902.siemens.net ([169.254.1.87]) by
 DEMCHP99ET0MSX.ww902.siemens.net ([139.25.131.181]) with mapi; Thu, 12 Apr
 2012 13:39:32 +0200
From: "Osipov, Michael" <michael.osipov@siemens.com>
To: "users@tomcat.apache.org" <users@tomcat.apache.org>
Date: Thu, 12 Apr 2012 13:39:31 +0200
Subject: StandardHostValve kills custom error message
Thread-Topic: StandardHostValve kills custom error message
Thread-Index: Ac0YoO0qQHA5BLf8S4CnG1I9Y1Yqug==
Message-ID: <6368FCCCD803D64BB0931D7F5F0A3DD50227830AB1@DEMCHP99E84MSX.ww902.siemens.net>
Accept-Language: de-DE
Content-Language: de-DE
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: de-DE
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

SGkgZm9sa3MsDQoNCkkgYW0gc2VuZGluZyBhIGN1c3RvbSBlcnJvciBtZXNzYWdlIGluIG15IGF1
dGhlbnRpY2F0b3IgYnV0IGl0IGdldHMgcmVtb3ZlZCBieSB0aGUgU3RhbmRhcmRIb3N0VmFsdmUu
DQpUaGlzIGlzIHdoYXQgSSBkbyBpbiBteSBhdXRoZW50aWNhdG9yOg0KDQpjYXRjaCAoUHJpdmls
ZWdlZEFjdGlvbkV4Y2VwdGlvbiBlKSB7DQogICBsb2dnZXIuZXJyb3IoIlVuYWJsZSB0byBsb2dp
biBhcyB0aGUgc2VydmljZSBwcmluY2lwYWwiLCBlLmdldEV4Y2VwdGlvbigpKTsNCg0KICAgcmVz
cG9uc2Uuc2VuZEVycm9yKEh0dHBTZXJ2bGV0UmVzcG9uc2UuU0NfSU5URVJOQUxfU0VSVkVSX0VS
Uk9SLA0KICAgICAiVW5hYmxlIHRvIGxvZ2luIGFzIHRoZSBzZXJ2aWNlIHByaW5jaXBhbCIpOw0K
ICAgcmVxdWVzdC5zZXRBdHRyaWJ1dGUoR2xvYmFscy5FWENFUFRJT05fQVRUUiwgZSk7DQogICBy
ZXR1cm4gZmFsc2U7DQp9DQoNClRoZSBtZXNzYWdlIGlzIG5vdCBkaXBsYXllZCBiZWNhdXNlIGlu
IGxpbmUgMjgyIHRvIDI4NiB0aGUgbWVzc2FnZSBpcyBraWxsZWQgYnk6DQplbHNlIHsNCiAgICAg
ICAgICAgIC8vIEEgY3VzdG9tIGVycm9yLXBhZ2UgaGFzIG5vdCBiZWVuIGRlZmluZWQgZm9yIHRo
ZSBleGNlcHRpb24NCiAgICAgICAgICAgIC8vIHRoYXQgd2FzIHRocm93biBkdXJpbmcgcmVxdWVz
dCBwcm9jZXNzaW5nLiBDaGVjayBpZiBhbg0KICAgICAgICAgICAgLy8gZXJyb3ItcGFnZSBmb3Ig
ZXJyb3IgY29kZSA1MDAgd2FzIHNwZWNpZmllZCBhbmQgaWYgc28sDQogICAgICAgICAgICAvLyBz
ZW5kIHRoYXQgcGFnZSBiYWNrIGFzIHRoZSByZXNwb25zZS4NCiAgICAgICAgICAgIHJlc3BvbnNl
LnNldFN0YXR1cyhIdHRwU2VydmxldFJlc3BvbnNlLlNDX0lOVEVSTkFMX1NFUlZFUl9FUlJPUik7
DQogICAgICAgICAgICAvLyBUaGUgcmVzcG9uc2UgaXMgYW4gZXJyb3INCiAgICAgICAgICAgIHJl
c3BvbnNlLnNldEVycm9yKCk7DQoNCiAgICAgICAgICAgIHN0YXR1cyhyZXF1ZXN0LCByZXNwb25z
ZSk7DQogICAgICAgIH0NCg0KSXQgc2VlbXMgbGlrZSB0aGlzIHZhbHZlIGRvZXMgbm90IGNhcmUg
aWYgaXQgaGFuZGxlcyBhbiB1bmNhdWdodCBleGNlcHRpb24gb3IgYSBkZWxpYmVyYXRlIGV4Y2Vw
dGlvbi4NCkNhbiB0aGlzIGJlIGZpeGVkIHdpdGhvdXQgcGF0Y2hpbmcgdGhlIHZhbHZlPw0KDQpJ
IGd1ZXNzIG5vdC4gSSB3b3VsZCBmaWxlIGEgdGlja2V0IGFib3V0IHRoYXQ6IEEgbWVyZSByZXNw
b25zZSNpc0Vycm9yIGNhbGwgd291bGQgc3VmZmljZSB0byB3cmFwIHRoYXQgYmVoYXZpb3IgYW5k
IHBhc3MgdGhlIHJlc3BvbnNlIGFzIGlzLg0KDQpXaXRoIGJlc3QgcmVnYXJkcywNCk1pY2hhZWwg
T3NpcG92
DQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IHVzZXJzLXVuc3Vi
c2NyaWJlQHRvbWNhdC5hcGFjaGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1t
YWlsOiB1c2Vycy1oZWxwQHRvbWNhdC5hcGFjaGUub3JnDQoN

From users-return-233512-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 12 11:59:04 2012
Return-Path: <users-return-233512-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 46338979C
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 12 Apr 2012 11:59:04 +0000 (UTC)
Received: (qmail 96681 invoked by uid 500); 12 Apr 2012 11:59:00 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 96411 invoked by uid 500); 12 Apr 2012 11:59:00 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 96402 invoked by uid 99); 12 Apr 2012 11:59:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 11:59:00 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of randy.very.gray@gmail.com designates 209.85.160.173 as permitted sender)
Received: from [209.85.160.173] (HELO mail-gy0-f173.google.com) (209.85.160.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 11:58:56 +0000
Received: by ghrr14 with SMTP id r14so1207558ghr.18
        for <users@tomcat.apache.org>; Thu, 12 Apr 2012 04:58:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=qOHTuCv24ZCrnJ6fU80EZ08WQ76urDTOyEQUftH3hjc=;
        b=oA98Klz7Lkc4ZuTVSFkGl7KtlUoKo4q02+uLthi5S2IcGeRlBkrAA2RTC6/BEriPpx
         aUc9FC6YlD69x8rwMHeOjCVV+B/7ep+cFNDDmYL8CZwKOiRyOT6DfRdd8FM7jEMqbn/4
         fQ0nVc2HF92hfBai2H24wL0nvov8Ls/+QcGuR1KQ+DImv0dT/asQii4XLWRNtIyNSE3/
         0mJ/vk9ZXYZiO1e2+2a7wzKqX9zoo2Tkq8HQovuFiJxjvtu/nstODMD5plyQsYS8t7cJ
         g6q0fd+Hu92cTLf9n3RSixiLUmKMh9wNbocixQqvFXsMUnyLii6E5lgtZi//sTJNweYo
         6OyA==
MIME-Version: 1.0
Received: by 10.50.104.133 with SMTP id ge5mr2012780igb.21.1334231915880; Thu,
 12 Apr 2012 04:58:35 -0700 (PDT)
Received: by 10.231.19.204 with HTTP; Thu, 12 Apr 2012 04:58:35 -0700 (PDT)
In-Reply-To: <4F7F1128.4010002@christopherschultz.net>
References: <CANrWu+TaWd7dAnyGNPqUWfFg=DnbXTvXdB94_kaTw5pFZHDUhA@mail.gmail.com>
	<4F7F1128.4010002@christopherschultz.net>
Date: Thu, 12 Apr 2012 14:58:35 +0300
Message-ID: <CANrWu+TprUban0QCmF5fWdFAdbScks8L44SmHvOQYii8YsB1FA@mail.gmail.com>
Subject: Re: Prevent cleartext keystore/truststore passwords via JMX
From: Randy Gray <randy.very.gray@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I've added mbeans-descriptors.xml to the package
org.apache.tomcat.util.net (the same package where JIOEndpoint is) in
the classpath with this (almost) empty content:

<mbeans-descriptors>
</mbeans-descriptors>

org.apache.tomcat.util.modeler.Registry looks in the current package
down to the parents package, and if it finds a mbeans-descriptor.xml
file, it uses the attributes found inside there. If no XML file is
found, it then reverts to finding out the attributes via reflection.

So that file is enough not to load any MBean for JIoEndpoint.

Thanks


On Fri, Apr 6, 2012 at 6:52 PM, Christopher Schultz
<chris@christopherschultz.net> wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Randy,
>
> On 4/6/12 7:41 AM, Randy Gray wrote:
>> Hi,
>>
>> I've been upgrading from Tomcat 6 to Tomcat 7 (7.27) and I've
>> noticed that the keystore and truststore passwords are exposed via
>> JMX in cleartext (in the bean JIoEndpoint). This was not the case
>> in Tomcat 6, for example JIoEndpoint bean which was exposed had
>> much fewer attributes. I have specified the passwords as attributes
>> in the HTTPS connector tag in server.xml.
>>
>> Here an example with an otherwise unmodified Tomcat 7:
>> http://postimage.org/image/400y2pqsr/
>>
>> How can I prevent that data to be exposed (as cleartext), as well
>> as the keystore and truststore path?
>
> I can think of a couple of options:
>
> 1. Modify org/apache/catalina/connector/mbeans-descriptors.xml
> =A0 and suppress access to these fields (though they aren't specifically
> =A0 in there, and MbeansDescriptorsIntrospectionSource.java doesn't seem
> =A0 to consult the mbeans-descrioptors.xml files). I've never done this,
> =A0 so I can't say whether or not it will work.
>
> 2. Use TLS for JMX connections. Technically speaking, this will not
> =A0 transmit your credentials in "cleartext", though anyone who can
> =A0 connect can read your credentials. See below.
>
> 3. Use client certificates and/or username/password authentication to
> =A0 access your JMX connector. Anyone who can connect to those resources
> =A0 will probably be able to connect to other things, so having your
> =A0 trustStore password is probably the least of your worries.
>
> - -chris
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
> Comment: GPGTools - http://gpgtools.org
> Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/
>
> iEYEARECAAYFAk9/ESgACgkQ9CaO5/Lv0PCnjQCfbUzxll2yk5usNQlQrBkvNh7R
> DCIAoJPEG65KmenExYgGtVpgGG7J880c
> =3D9y5M
> -----END PGP SIGNATURE-----
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233513-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 12 12:13:53 2012
Return-Path: <users-return-233513-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 37DA49B7D
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 12 Apr 2012 12:13:53 +0000 (UTC)
Received: (qmail 43688 invoked by uid 500); 12 Apr 2012 12:13:49 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 43568 invoked by uid 500); 12 Apr 2012 12:13:49 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 43557 invoked by uid 99); 12 Apr 2012 12:13:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 12:13:49 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of randy.very.gray@gmail.com designates 209.85.210.193 as permitted sender)
Received: from [209.85.210.193] (HELO mail-iy0-f193.google.com) (209.85.210.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 12:13:44 +0000
Received: by iaae16 with SMTP id e16so718972iaa.0
        for <users@tomcat.apache.org>; Thu, 12 Apr 2012 05:13:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=fNnlVp2XqiaSE1ii+PfDBoyJHVJSbmtlrtkSAQhhNvE=;
        b=o6JeW9XPJc65r/BVeHIfDyPzc0yTNsDLQHENnwJvCiq73uuSjzXlnbx//3PHXuV2q8
         dB7Uh4sMUNDIfwbdRsnxbnf35p2O5tsTzahx8jC22NNee46LFUE7rOBbDWl+I7vgTK7X
         FoaL6aix/XA/7ZKlT5wy+aDbjrXzt6ISlerlNDXBi8NikBQLoVofk4+VK2UlnAb2hzdw
         ny+CllEjL7Xt0jEQa5iFW1BUhbOJz63PjbRFYSJGuperksJEodc0tUaVMEtS86HqR5YT
         P2z9FE3giZumPcU8YOLTATik7ID+pvJYK6NaqvqGjLd5Xl/D0JFtJeHjTh0ETvm0EsgP
         Q2gQ==
MIME-Version: 1.0
Received: by 10.50.104.133 with SMTP id ge5mr2075688igb.21.1334232803377; Thu,
 12 Apr 2012 05:13:23 -0700 (PDT)
Received: by 10.231.19.204 with HTTP; Thu, 12 Apr 2012 05:13:23 -0700 (PDT)
In-Reply-To: <CANrWu+TprUban0QCmF5fWdFAdbScks8L44SmHvOQYii8YsB1FA@mail.gmail.com>
References: <CANrWu+TaWd7dAnyGNPqUWfFg=DnbXTvXdB94_kaTw5pFZHDUhA@mail.gmail.com>
	<4F7F1128.4010002@christopherschultz.net>
	<CANrWu+TprUban0QCmF5fWdFAdbScks8L44SmHvOQYii8YsB1FA@mail.gmail.com>
Date: Thu, 12 Apr 2012 15:13:23 +0300
Message-ID: <CANrWu+TGiEjTWzx1JyLvnofScDphhnHhb0L7267sGSyVY93bcg@mail.gmail.com>
Subject: Re: Prevent cleartext keystore/truststore passwords via JMX
From: Randy Gray <randy.very.gray@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Actually, a <mbean> entry with the correct type attribute was needed:

<mbeans-descriptors>

    <mbean name=3D"ThreadPool"
          description=3D"JIoEndpoint"
               domain=3D"Catalina"
                group=3D"Connector"
                 type=3D"org.apache.tomcat.util.net.JIoEndpoint">
  </mbean>

</mbeans-descriptors>


On Thu, Apr 12, 2012 at 2:58 PM, Randy Gray <randy.very.gray@gmail.com> wro=
te:
> Hi,
>
> I've added mbeans-descriptors.xml to the package
> org.apache.tomcat.util.net (the same package where JIOEndpoint is) in
> the classpath with this (almost) empty content:
>
> <mbeans-descriptors>
> </mbeans-descriptors>
>
> org.apache.tomcat.util.modeler.Registry looks in the current package
> down to the parents package, and if it finds a mbeans-descriptor.xml
> file, it uses the attributes found inside there. If no XML file is
> found, it then reverts to finding out the attributes via reflection.
>
> So that file is enough not to load any MBean for JIoEndpoint.
>
> Thanks
>
>
> On Fri, Apr 6, 2012 at 6:52 PM, Christopher Schultz
> <chris@christopherschultz.net> wrote:
>> -----BEGIN PGP SIGNED MESSAGE-----
>> Hash: SHA1
>>
>> Randy,
>>
>> On 4/6/12 7:41 AM, Randy Gray wrote:
>>> Hi,
>>>
>>> I've been upgrading from Tomcat 6 to Tomcat 7 (7.27) and I've
>>> noticed that the keystore and truststore passwords are exposed via
>>> JMX in cleartext (in the bean JIoEndpoint). This was not the case
>>> in Tomcat 6, for example JIoEndpoint bean which was exposed had
>>> much fewer attributes. I have specified the passwords as attributes
>>> in the HTTPS connector tag in server.xml.
>>>
>>> Here an example with an otherwise unmodified Tomcat 7:
>>> http://postimage.org/image/400y2pqsr/
>>>
>>> How can I prevent that data to be exposed (as cleartext), as well
>>> as the keystore and truststore path?
>>
>> I can think of a couple of options:
>>
>> 1. Modify org/apache/catalina/connector/mbeans-descriptors.xml
>> =A0 and suppress access to these fields (though they aren't specifically
>> =A0 in there, and MbeansDescriptorsIntrospectionSource.java doesn't seem
>> =A0 to consult the mbeans-descrioptors.xml files). I've never done this,
>> =A0 so I can't say whether or not it will work.
>>
>> 2. Use TLS for JMX connections. Technically speaking, this will not
>> =A0 transmit your credentials in "cleartext", though anyone who can
>> =A0 connect can read your credentials. See below.
>>
>> 3. Use client certificates and/or username/password authentication to
>> =A0 access your JMX connector. Anyone who can connect to those resources
>> =A0 will probably be able to connect to other things, so having your
>> =A0 trustStore password is probably the least of your worries.
>>
>> - -chris
>> -----BEGIN PGP SIGNATURE-----
>> Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
>> Comment: GPGTools - http://gpgtools.org
>> Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/
>>
>> iEYEARECAAYFAk9/ESgACgkQ9CaO5/Lv0PCnjQCfbUzxll2yk5usNQlQrBkvNh7R
>> DCIAoJPEG65KmenExYgGtVpgGG7J880c
>> =3D9y5M
>> -----END PGP SIGNATURE-----
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>> For additional commands, e-mail: users-help@tomcat.apache.org
>>

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233514-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 12 12:15:14 2012
Return-Path: <users-return-233514-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 71BBC9C0E
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 12 Apr 2012 12:15:14 +0000 (UTC)
Received: (qmail 49648 invoked by uid 500); 12 Apr 2012 12:15:11 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 49456 invoked by uid 500); 12 Apr 2012 12:15:10 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 49447 invoked by uid 99); 12 Apr 2012 12:15:10 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 12:15:10 +0000
Received: from localhost (HELO mail-yw0-f45.google.com) (127.0.0.1)
  (smtp-auth username olamy, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 12:15:10 +0000
Received: by yhoo21 with SMTP id o21so1222449yho.18
        for <users@tomcat.apache.org>; Thu, 12 Apr 2012 05:15:09 -0700 (PDT)
Received: by 10.236.114.169 with SMTP id c29mr1801922yhh.37.1334232909687;
 Thu, 12 Apr 2012 05:15:09 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.101.107.20 with HTTP; Thu, 12 Apr 2012 05:14:49 -0700 (PDT)
In-Reply-To: <CBAC76EB.D895%leigh.anderson@betfair.com>
References: <CAPoyBqQB1o6khFdkxT-z+OcQECKJ3AM=KgXhg2YpKTKg4MiDVw@mail.gmail.com>
 <CBAC76EB.D895%leigh.anderson@betfair.com>
From: Olivier Lamy <olamy@apache.org>
Date: Thu, 12 Apr 2012 14:14:49 +0200
Message-ID: <CAPoyBqQfPZFAkNWjkB-eyWmO=9roabLTwa_bnWV16rG6ZMUcNg@mail.gmail.com>
Subject: Re: Tomcat7-maven-plugin 2.0-beta1 and useSeparateTomcatClassloader
 fails with run goal
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

The plugin has an option to setup context.xml to use see [1].
You can try to write an other context.xml only for using with the plugin ?

--=20
Olivier

[1] http://tomcat.apache.org/maven-plugin-2.0-SNAPSHOT/tomcat7-maven-plugin=
/run-mojo.html#contextFile

2012/4/12 Leigh Anderson <Leigh.Anderson@betfair.com>:
> Hi Olivier,
>
> That's solved the problem, thanks. Unfortunately, declaring a custom clas=
s
> loader in a context.xml causes Tomcat to use that one, instead of the one
> set up with the correct class path by the plugin. I'll keep looking to se=
e
> if I can find a way around this.
>
> Thanks for your prompt help with this.
> Leigh
>
> On 12/04/2012 11:35, "Olivier Lamy" <olamy@apache.org> wrote:
>
>>Hello,
>>Apologize for delay.
>>That should be fixed now (I have deployed 2.0-SNAPSHOT).
>>If you could try with your use case.
>>Thanks,
>>2012/4/8 Olivier Lamy <olamy@apache.org>:
>>> Hello Leigh,
>>> Thanks for creating issue.
>>> Until now I tried to reproduce the issue but I failed.
>>> I wonder if you could attach a build log using -e mvn flag.
>>>
>>> 2012/4/5 Leigh Anderson <Leigh.Anderson@betfair.com>:
>>>> Hi Olivier,
>>>>
>>>> I'm not able to run this with tomcat6 as it's a Servlet 3.0 project.
>>>>I'll
>>>> get the issue created -- should have some time next week to put
>>>>together a
>>>> sample project.
>>>>
>>>>
>>>> Thanks,
>>>> Leigh
>>>>
>>>> On 04/04/2012 11:36, "Olivier Lamy" <olamy@apache.org> wrote:
>>>>
>>>>>Hello,
>>>>>Looks to be an issue (does that work with tomcat6:run ?)
>>>>>Could you create an issue here:
>>>>>https://issues.apache.org/jira/browse/MTOMCAT (if possible with a
>>>>>small sample project to reproduce).
>>>>>
>>>>>Thanks
>>>>>--
>>>>>Olivier Lamy
>>>>>Talend: http://coders.talend.com
>>>>>http://twitter.com/olamy | http://linkedin.com/in/olamy
>>>>>
>>>>>2012/4/3 Leigh Anderson <Leigh.Anderson@betfair.com>:
>>>>>> Hi All,
>>>>>>
>>>>>> I'm trying to start a web application with 'mvn tomcat7:run'. It
>>>>>>seems
>>>>>> that with the configuration below it fails with the following error:
>>>>>>
>>>>>>
>>>>>> =A0 =A0 =A0 =A0[INFO]
>>>>>>
>>>>>>---------------------------------------------------------------------=
-
>>>>>>--
>>>>>> =A0 =A0 =A0 =A0[ERROR] Failed to execute goal
>>>>>> org.apache.tomcat.maven:tomcat7-maven-plugin:2.0-beta-1:run
>>>>>>(default-cli)
>>>>>> on project mantis-test-web-app: No such archiver: 'jar'. -> [Help 1]
>>>>>> =A0 =A0 =A0 =A0[ERROR]
>>>>>> =A0 =A0 =A0 =A0[ERROR] To see the full stack trace of the errors, re=
-run
>>>>>>Maven
>>>>>>with the
>>>>>> -e switch.
>>>>>> =A0 =A0 =A0 =A0[ERROR] Re-run Maven using the -X switch to enable fu=
ll debug
>>>>>>logging.
>>>>>>
>>>>>> I have also tried
>>>>>> =A0 =A0 =A0 =A0* 'mvn tomcat:run-war', which seems to get past this =
point,
>>>>>>but
>>>>>>then the
>>>>>> application will not start because the 'additionalClasspathDir'
>>>>>>property
>>>>>> is not supported by the 'run-war' goal.
>>>>>> =A0 =A0 =A0 =A0* removing 'useSeparateTomcatClassLoader' which then =
doesn't
>>>>>>load the
>>>>>> Spring instrumenting class loader required to use AspectJ LTW,
>>>>>>specified
>>>>>> in
>>>>>> context.xml. I have confirmed that I get the same 'no such archiver'
>>>>>>error
>>>>>> if I remove the
>>>>>> context.xml, so I don't believe this to be the cause.
>>>>>>
>>>>>> Is there something I've missed in the configuration?
>>>>>>
>>>>>> Cheers,
>>>>>> Leigh
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<plugin>
>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<groupId>org.apache.t=
omcat.maven</groupId>
>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<artifactId>tomcat7-m=
aven-plugin</artifactId>
>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<version>2.0-beta-1</=
version>
>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<configuration>
>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<systemProper=
ties>
>>>>>>
>>>>>><log4j.defaultInitOverride>true</log4j.defaultInitOverride>
>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<HOST=
NAME>localhost</HOSTNAME>
>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<port=
.http>9090</port.http>
>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<port=
.https>8443</port.https>
>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0</systemPrope=
rties>
>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<port>9090</p=
ort>
>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<httpsPort>84=
43</httpsPort>
>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<path>/</path=
>
>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<useTestClass=
path>false</useTestClasspath>
>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<additionalCl=
asspathDirs>
>>>>>>
>>>>>>
>>>>>><additionalClasspathDir>${project.basedir}/config</additionalClasspat=
h
>>>>>>Dir
>>>>>>>
>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0</additionalC=
lasspathDirs>
>>>>>>
>>>>>> <useSeparateTomcatClassLoader>true</useSeparateTomcatClassLoader>
>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0</configuration>
>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<dependencies>
>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<dependency>
>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<grou=
pId>org.springframework</groupId>
>>>>>>
>>>>>>
>>>>>><artifactId>spring-instrument-tomcat</artifactId>
>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<vers=
ion>${spring.version}</version>
>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0</dependency>
>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0</dependencies>
>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0</plugin>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>_____________________________________________________________________=
_
>>>>>>__
>>>>>> In order to protect our email recipients, Betfair Group use SkyScan
>>>>>>from
>>>>>> MessageLabs to scan all Incoming and Outgoing mail for viruses.
>>>>>>
>>>>>>
>>>>>>_____________________________________________________________________=
_
>>>>>>__
>>>>>>
>>>>>> --------------------------------------------------------------------=
-
>>>>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>>>>
>>>>>
>>>>>---------------------------------------------------------------------
>>>>>To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>>>For additional commands, e-mail: users-help@tomcat.apache.org
>>>>>
>>>>
>>>>
>>>>
>>>>_______________________________________________________________________=
_
>>>> In order to protect our email recipients, Betfair Group use SkyScan
>>>>from
>>>> MessageLabs to scan all Incoming and Outgoing mail for viruses.
>>>>
>>>>
>>>>_______________________________________________________________________=
_
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>>
>>>
>>>
>>>
>>> --
>>> Olivier Lamy
>>> Talend: http://coders.talend.com
>>> http://twitter.com/olamy | http://linkedin.com/in/olamy
>>
>>
>>
>>--
>>Olivier Lamy
>>Talend: http://coders.talend.com
>>http://twitter.com/olamy | http://linkedin.com/in/olamy
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>For additional commands, e-mail: users-help@tomcat.apache.org
>>
>
>
> ________________________________________________________________________
> In order to protect our email recipients, Betfair Group use SkyScan from
> MessageLabs to scan all Incoming and Outgoing mail for viruses.
>
> ________________________________________________________________________
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233515-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 12 12:34:41 2012
Return-Path: <users-return-233515-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7B1BB9024
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 12 Apr 2012 12:34:41 +0000 (UTC)
Received: (qmail 767 invoked by uid 500); 12 Apr 2012 12:34:37 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 674 invoked by uid 500); 12 Apr 2012 12:34:37 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 663 invoked by uid 99); 12 Apr 2012 12:34:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 12:34:37 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of knst.kolinko@gmail.com designates 209.85.160.173 as permitted sender)
Received: from [209.85.160.173] (HELO mail-gy0-f173.google.com) (209.85.160.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 12:34:31 +0000
Received: by ghrr14 with SMTP id r14so1233080ghr.18
        for <users@tomcat.apache.org>; Thu, 12 Apr 2012 05:34:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=u0+xC3rARFou3L9xtEtYFZ+keI05Dg2vm2fFUATxbcQ=;
        b=oCcd+XanAMJBmw8N0ZE9G6I6qQP91xXonEDr3A8REBJhiCdFwu7Iorc0TwxdLT3GYj
         DBv/m9dOLCIJXw/EoD3/uodYJDF1ng9O6rNN5fHAaf9LdqyC585wQoWsFTc95PB37BYf
         3rDrpzGktF0TaHG2gOcwuPEaSTPidwSPPiWsQFEdSsCREOM7P8FBFq9LUnerFC/O1aYs
         tDB+h3FTpJCHaEYxfNB+ShNLBc+qV8sbA0pMf3bUnUe2+fMi875+xJsbcyuVQvhhorg0
         Jg3ZP8lvnyCxenf3q3NuJsXOzbxHZtFLpnnPThgRNlxAXfBvMdPSjRIy9hw7I2AfDZTO
         19EQ==
MIME-Version: 1.0
Received: by 10.236.46.233 with SMTP id r69mr1840573yhb.65.1334234050664; Thu,
 12 Apr 2012 05:34:10 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Thu, 12 Apr 2012 05:34:10 -0700 (PDT)
In-Reply-To: <CABzHfVmhd7mgu9FfO9qk8qJaihpL9vmL88QHMxo_BU+jZ5A-_w@mail.gmail.com>
References: <CAJMhK2+38h0LdKUVemA6JNaEHqm8q+mc3ohAj9hXThvrBQh7yQ@mail.gmail.com>
	<5d1d2822faf2e2ae22f9eff15f3afd12@tau.ceti.pl>
	<CAJMhK2JS51iEHh6Rc2Dd0oWP2T1yFoYfLanno--f-T70XZribA@mail.gmail.com>
	<CABzHfVmhd7mgu9FfO9qk8qJaihpL9vmL88QHMxo_BU+jZ5A-_w@mail.gmail.com>
Date: Thu, 12 Apr 2012 16:34:10 +0400
Message-ID: <CABzHfVkFn=UMqgmnyuPnZQVgmEJzrVtknuEt6XPAYhgAVX9Q-g@mail.gmail.com>
Subject: Re: Using ServletContainerInitializer for 2.5 applications
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

2012/4/11 Konstantin Kolinko <knst.kolinko@gmail.com>:
> 2012/4/11 Lazar Kirchev <lazar.kirchev@gmail.com>:
>> I want the ServletContainerInitializer to be called for all applications I
>> deploy, not only with web.xml version 3.0, but also with lower version. Is
>> this possible?
>
> 2. You would even be able to load the class that implements that
> interface. The "ServletContainerInitializer" class is in
> "javax.servlet" package and it will be absent.
>
> The spec forbids you from bundling your own servlet-api.jar.
>

My apologies that I've misread your question.

(I though you were asking about deploying your thing on Tomcat 6.
There was several questions like that recently and I missed the point.

Instead of that you are asking about behaviour of 2.5 webapp on Tomcat 7).

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233516-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 12 12:59:07 2012
Return-Path: <users-return-233516-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 61A749907
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 12 Apr 2012 12:59:07 +0000 (UTC)
Received: (qmail 69607 invoked by uid 500); 12 Apr 2012 12:59:04 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 69546 invoked by uid 500); 12 Apr 2012 12:59:03 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 69537 invoked by uid 99); 12 Apr 2012 12:59:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 12:59:03 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of knst.kolinko@gmail.com designates 209.85.213.173 as permitted sender)
Received: from [209.85.213.173] (HELO mail-yx0-f173.google.com) (209.85.213.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 12:58:57 +0000
Received: by yenr5 with SMTP id r5so1264165yen.18
        for <users@tomcat.apache.org>; Thu, 12 Apr 2012 05:58:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=OUYf1/gaLPUwDozQOfDksrXZXPH6PklSYDMsKXdXGDI=;
        b=foHEkEAllS3VJGnT5H0Rbhgb3/Ao3waQG/aNQKS5Dvw8CeWejYVq+h67+6q52SRj0j
         T4aabMOe8W1AQabzwcEfslkTSycJQpc/fPFahXSsVSYTXbOzNzR5PI0x3N2/LZ6wYSx+
         19muJdrYW3eBtKpkN2zHvzXEYSYBV37pYHt5wEU81qTSiaJpX7jx4cW20DNrNWn0c5R3
         ceipssxN+WI7mY4Zv/dPfCHFNw6eOZyWp2sjsy7tjZ8FXDchlKsTbaJUHxvZAKTCL/gZ
         dhqmdzzwujk80T5X8In+0rGx07Hj2FqWV+Zbqc7KZ/gw+qrPi65X5cqesp63cmYmtqcm
         pvlQ==
MIME-Version: 1.0
Received: by 10.236.46.233 with SMTP id r69mr1912284yhb.65.1334235517045; Thu,
 12 Apr 2012 05:58:37 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Thu, 12 Apr 2012 05:58:36 -0700 (PDT)
In-Reply-To: <CAHEJdxLo+jENu6ynuKQb=Y6M28L2783S1AttF0dbcsdedcqqFQ@mail.gmail.com>
References: <CAHEJdxLo+jENu6ynuKQb=Y6M28L2783S1AttF0dbcsdedcqqFQ@mail.gmail.com>
Date: Thu, 12 Apr 2012 16:58:36 +0400
Message-ID: <CABzHfVmVew+jk5rL_PYdtVbGo1d4kvfrPxQBnZ4KmmpA2oY=SQ@mail.gmail.com>
Subject: Re: Problem with making HTTP KeepAlive work
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

2012/4/12 Mehdi Sarmadi <msarmadi@gmail.com>:
>
> =A0I just setup a tomcat 7 on linux for test. I just used this connection
> property in server.xml
>
> here is out connector
> <Connector maxKeepAliveRequests=3D-1 port=3D"7070" protocol=3D"HTTP/1.1"
> allowTrace=3D"false" connectionTimeout=3D"20000" clientAuth=3D"false" />
>
> , but when we try to connect from a client "Firefox" in my case,
> "Connection: Keep-Alive" is sent in the Request by Browser but "Connectio=
n:
> Keep-Alive" is not visible in the HTTP Response Headers, which obviously
> coming from weblogic. I use HTTPFox plugin.
>
> =A0So I guess that =A0that config does not work. Something seems to be mi=
ssing.
> =A0Any suggestion for making HTTP KeepAlive work in Tomcat?
>

Connection: Keep-Alive  header has different meaning.

It is needed only when you have Keep-Alive: header as well so that
"Keep-Alive" header value is not lost at proxies.

Keep alive feature of HTTP/1.1 does not need to be specified in the
response. It is "on" by default. See RFC2616 aka HTTP/1.1
specification.


By the way:
1. You are missing quotes around "-1". The above is broken XML.
2. You will get the same response even if you remove the
maxKeepAliveRequests attribute.

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233517-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 12 13:00:14 2012
Return-Path: <users-return-233517-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 63F3F997F
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 12 Apr 2012 13:00:13 +0000 (UTC)
Received: (qmail 74852 invoked by uid 500); 12 Apr 2012 13:00:10 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 74696 invoked by uid 500); 12 Apr 2012 13:00:09 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 74687 invoked by uid 99); 12 Apr 2012 13:00:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 13:00:09 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [80.12.242.59] (HELO smtpout.wanadoo.co.uk) (80.12.242.59)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 13:00:01 +0000
Received: from mail.homeinbox.net ([2.24.211.100])
	by mwinf5d40 with ME
	id x0zg1i00C2AXGdN030zgoU; Thu, 12 Apr 2012 14:59:41 +0200
Received: from localhost (localhost [127.0.0.1])
	by mail.homeinbox.net (Postfix) with ESMTP id 173A2EAB515
	for <users@tomcat.apache.org>; Thu, 12 Apr 2012 13:59:40 +0100 (BST)
X-Virus-Scanned: Debian amavisd-new at homeinbox.net
Received: from mail.homeinbox.net ([127.0.0.1])
	by localhost (mail.homeinbox.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id nWLO5SK9TlxD for <users@tomcat.apache.org>;
	Thu, 12 Apr 2012 13:59:24 +0100 (BST)
Received: from [10.173.58.6] (unknown [213.205.232.119])
	(using TLSv1 with cipher RC4-MD5 (128/128 bits))
	(No client certificate requested)
	by mail.homeinbox.net (Postfix) with ESMTPSA id 0C6D1B22001
	for <users@tomcat.apache.org>; Thu, 12 Apr 2012 13:59:09 +0100 (BST)
References: <CAJMhK2+38h0LdKUVemA6JNaEHqm8q+mc3ohAj9hXThvrBQh7yQ@mail.gmail.com> <5d1d2822faf2e2ae22f9eff15f3afd12@tau.ceti.pl> <CAJMhK2JS51iEHh6Rc2Dd0oWP2T1yFoYfLanno--f-T70XZribA@mail.gmail.com> <99C8B2929B39C24493377AC7A121E21FB016FD1231@USEA-EXCH8.na.uis.unisys.com> <CAJMhK2+1Ex0JqiVzrpbLNprMo9wk5VQ3tOaJAVN4fv_3Gq0q0A@mail.gmail.com> <4847057902696949195@unknownmsgid> <CAFmzfTWYPASufMOoEo2swYJo8NEZhZUE=eT4Tf4ZbdK56fAwGw@mail.gmail.com>
User-Agent: K-9 Mail for Android
In-Reply-To: <CAFmzfTWYPASufMOoEo2swYJo8NEZhZUE=eT4Tf4ZbdK56fAwGw@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 8bit
Subject: Re: Using ServletContainerInitializer for 2.5 applications
From: markt@apache.org
Date: Thu, 12 Apr 2012 13:58:59 +0100
To: Tomcat Users List <users@tomcat.apache.org>
Message-ID: <826e559f-bd76-4489-af42-53378ea203e4@email.android.com>

Violeta Georgieva <violetagg@apache.org> wrote:

>Hi,
>
>This mechanism is meant to be a standard way for web frameworks to
>extend
>the Servlet Container. IMHO this is compliant with the specification:

Your not really humble at all opinion is wrong. This is a Servlet 3.0 feature and therefore not available to 2.5 or earlier webapps.

If you look elsewhere in the Servlet, JSP and EL specs you'll find things that would break if the container used syntax from a newer spec version with a web app written for an older spec. If you want to use Servlet 3.0 features then you need to declare 3.0 in the web.xml.

Mark

>
>
>
>"8.2.4 Shared libraries / runtimes pluggability
>
>In addition to supporting fragments and use of annotations one of the
>requirements
>
>is that not only we be able to plug-in things that are bundled in the
>WEB-INF/lib
>
>but also plugin shared copies of frameworks - including being able to
>plug-in to the
>
>web container things like JAX-WS, JAX-RS and JSF that build on top of
>the
>web
>
>container. The ServletContainerInitializer allows handling such a use
>case
>
>as described below."
>
>
>Lazar just wants to extend the Servlet Container using this standard
>mechanism. He wants his implementation of ServletContainerInitializer
>to be
>invoked for every web application.
>
>Regards
>Violeta
>
>2012/4/12 Pid * <pid@pidster.com>
>
>> On 11 Apr 2012, at 14:42, Lazar Kirchev <lazar.kirchev@gmail.com>
>wrote:
>>
>> > ServletContainerInitializer
>>
>> Only exists in Servlet 3.0. Supporting it in lower spec versions
>would
>> be non-compliant.
>>
>> And silly.
>>
>>
>> p
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>> For additional commands, e-mail: users-help@tomcat.apache.org
>>
>>



---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233518-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 12 13:03:35 2012
Return-Path: <users-return-233518-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EBC0A9B63
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 12 Apr 2012 13:03:34 +0000 (UTC)
Received: (qmail 89094 invoked by uid 500); 12 Apr 2012 13:03:31 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 88846 invoked by uid 500); 12 Apr 2012 13:03:31 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 88837 invoked by uid 99); 12 Apr 2012 13:03:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 13:03:31 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [80.12.242.59] (HELO smtpout.wanadoo.co.uk) (80.12.242.59)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 13:03:23 +0000
Received: from mail.homeinbox.net ([2.24.211.100])
	by mwinf5d40 with ME
	id x1321i00C2AXGdN03132a9; Thu, 12 Apr 2012 15:03:02 +0200
Received: from localhost (localhost [127.0.0.1])
	by mail.homeinbox.net (Postfix) with ESMTP id 762DFEAB542
	for <users@tomcat.apache.org>; Thu, 12 Apr 2012 14:03:02 +0100 (BST)
X-Virus-Scanned: Debian amavisd-new at homeinbox.net
Received: from mail.homeinbox.net ([127.0.0.1])
	by localhost (mail.homeinbox.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id YFhfNVx2GsfR for <users@tomcat.apache.org>;
	Thu, 12 Apr 2012 14:02:54 +0100 (BST)
Received: from [10.173.58.6] (unknown [213.205.232.119])
	(using TLSv1 with cipher RC4-MD5 (128/128 bits))
	(No client certificate requested)
	by mail.homeinbox.net (Postfix) with ESMTPSA id BD6E8EAB532
	for <users@tomcat.apache.org>; Thu, 12 Apr 2012 14:02:53 +0100 (BST)
References: <15D3435601304A49A5E13D0825711B6128CC5706@EXCHANGE07.webde.local> <c9852e00-8f22-4a9a-99b7-7543ab14d743@email.android.com> <15D3435601304A49A5E13D0825711B6128CC570C@EXCHANGE07.webde.local>
User-Agent: K-9 Mail for Android
In-Reply-To: <15D3435601304A49A5E13D0825711B6128CC570C@EXCHANGE07.webde.local>
MIME-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 8bit
Subject: Re: parallel deployment activation of new version
From: markt@apache.org
Date: Thu, 12 Apr 2012 14:02:45 +0100
To: Tomcat Users List <users@tomcat.apache.org>
Message-ID: <efd47547-82e2-4d89-b0e3-76747acb8a6c@email.android.com>

Christoph Maser <Christoph.Maser@1und1.de> wrote:

>Do you see any chance a request for feature in that direction would be
>accpeted?

Right now, no. I don't see a requirement that isn't met by the existing implementation. If there was a use case that wasn't completely off the wall that couldn't be met then it would get looked at. Actual implementation would depend on an assessment of benefit against complexity.

Mark


>Chris
>
>Am Donnerstag, den 12.04.2012, 09:40 +0100 schrieb Mark Thomas:
>> The only control you have is by ensuring that the version you want to
>be used by default has the highest version number.
>> 
>> Mark 
>> 
>> Christoph Maser <Christoph.Maser@1und1.de> wrote:
>> 
>> >Hi
>> >
>> >is there a way to externally influence the switch between versions
>with
>> >the new parallel deployment method. As I understand it tomcat
>> >automatically switches to the new version for new requests as soon
>as
>> >the context with the new version is started. Instead I would like to
>> >manually control wich version is the preferred active one.
>> >
>> >
>> >Regards
>> >Chris
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>> For additional commands, e-mail: users-help@tomcat.apache.org
>> 
>
>-- 
>Christoph Maser
> 
>
>1&1 Internet AG - IT Operations Mail & Media Homepage
>Frankfurter Ring 115a  DE-80807 Mnchen
>Telefon: +49 89 14339-528
>christoph.maser@1und1.de
>
>Amtsgericht Montabaur / HRB 6484
>Vorstnde: Henning Ahlert, Ralph Dommermuth, Matthias Ehrlich, Robert
>Hoffmann, Andreas Hofmann, Markus Huhn, Hans-Henning Kettler, Dr.
>Oliver
>Mauss, Jan Oetjen
>Aufsichtsratsvorsitzender: Michael Scheeren




---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233519-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 12 13:06:44 2012
Return-Path: <users-return-233519-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 61A139C4F
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 12 Apr 2012 13:06:44 +0000 (UTC)
Received: (qmail 645 invoked by uid 500); 12 Apr 2012 13:06:40 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 587 invoked by uid 500); 12 Apr 2012 13:06:40 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 578 invoked by uid 99); 12 Apr 2012 13:06:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 13:06:40 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of knst.kolinko@gmail.com designates 209.85.213.173 as permitted sender)
Received: from [209.85.213.173] (HELO mail-yx0-f173.google.com) (209.85.213.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 13:06:34 +0000
Received: by yenr5 with SMTP id r5so1271370yen.18
        for <users@tomcat.apache.org>; Thu, 12 Apr 2012 06:06:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=5rgqJY1Ckrqq9ZvuV3AXUBrwzZUfxGNikPlSRl1EjjI=;
        b=YolhEj5YaWf3VJgt2iS4lSAhqHXW7soMMMSQEJPP+lXuKJn6HIaOzCGLCg61PVNa46
         VTqyb1UJHDiVY2mQg0CSjSneuQy4WE3Hcz7fVfCaFyzn7G8080cUIA1FmFr5sFUdAAVB
         nCMYklTZ7xtIN1e/yKdlStazUqk7L34EOWc3uzeEED0H5ti3jlT5PUf6p0xV4aD7HNpV
         bHtoY11TMcuoF2Fvr2MYc5sIu8yzNrWQnhhpXeepKl9KwVaSsvqKuklZ0BxHjhcnY754
         9TPCF6akVXxkMrGyZbfvrB0mBzv/xxn8qChY/mg6Kbny1Rl9keN/+HBQg9ms/QtMozVO
         9ZmQ==
MIME-Version: 1.0
Received: by 10.236.115.200 with SMTP id e48mr359354yhh.14.1334235973463; Thu,
 12 Apr 2012 06:06:13 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Thu, 12 Apr 2012 06:06:13 -0700 (PDT)
In-Reply-To: <E4EFB9B47A831F43AD5BB2AEFC2B9E5919A5D1397A@MX34A.corp.emc.com>
References: <E4EFB9B47A831F43AD5BB2AEFC2B9E5919A5D1397A@MX34A.corp.emc.com>
Date: Thu, 12 Apr 2012 17:06:13 +0400
Message-ID: <CABzHfV=uTjk+FFLbXARo7U7dKP6wmmRkz_fRc-idyHf-zkhZEA@mail.gmail.com>
Subject: Re: Increase in Virt Memory and RSS memory - Tomcat 6.0.x
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

2012/4/12  <Sandeep.Shridhar@emc.com>:
> Hi,
>
> We are observing an increase in VIRT and RES memory of tomcat6.0 =A0which=
 internally invokes our custom API is invoked (This API internally does an =
JNI call).
> The same API code when invoked through a standalone java process repeated=
ly does not lead to an increase in the VIRT /RES memory.
>
> Is there any way this could be debugged further? Any hints would be reall=
y helpful.
>

1. Treat Tomcat itself as a standalone application. Take a memory dump
and load it into Profiler (e.g. Eclipse MAT) to see where the memory
really goes.

2. The usual pitfall with "repeatedly invoked the servlet using a GET
request" tests is that such clients usually ignore sessionid provided
by Tomcat. Thus the count of active sessions grows rapidly.

(That is if your servlet uses a session.  This is more usual for JSP
pages where sessions are enabled by default and people forget to add
<%@page session=3D"false"%>).

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233520-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 12 13:07:25 2012
Return-Path: <users-return-233520-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 315B49CCE
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 12 Apr 2012 13:07:25 +0000 (UTC)
Received: (qmail 5809 invoked by uid 500); 12 Apr 2012 13:07:21 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 5739 invoked by uid 500); 12 Apr 2012 13:07:21 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 5724 invoked by uid 99); 12 Apr 2012 13:07:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 13:07:21 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of msarmadi@gmail.com designates 209.85.216.173 as permitted sender)
Received: from [209.85.216.173] (HELO mail-qc0-f173.google.com) (209.85.216.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 13:07:13 +0000
Received: by qcsc20 with SMTP id c20so1558606qcs.18
        for <users@tomcat.apache.org>; Thu, 12 Apr 2012 06:06:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=d5+Qk/TA7aJb3lDLrHd3pO37UK5C4TXfPNzaLx+7Zxw=;
        b=XFSYdaH4pJhz2XMVisjvAwsj2niDqdzQ0Sroi9FkWt/eyYwIR9kb17kKsVayydcPFj
         XBAKw7klcMk+U+bvT1BDPQ/31txVkKNhnaGEgxTM77r2N/Vh2rOh1iXKsSeDozgwYIEX
         ykQLLDYL8hQsOn4paFaQhd+b0FoKY8UktbCQCTJRIScvn5oaVcqIaiRa09ww5HvVa5aj
         xPLOGwpIzaFBMJ4629iXmc0On67+IivHJPUDr4awHbMFVzTt6uTMEaTdwP8NpmVwmNur
         tOd5+IXhTMipCbgMv3V5TMlZb7l8D2OYiLuo/zXJRYSYXYSOxU3WuqJOybnGe7r46ZxF
         cncQ==
Received: by 10.224.33.134 with SMTP id h6mr3839015qad.28.1334236012456; Thu,
 12 Apr 2012 06:06:52 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.91.148 with HTTP; Thu, 12 Apr 2012 06:06:31 -0700 (PDT)
In-Reply-To: <CABzHfVmVew+jk5rL_PYdtVbGo1d4kvfrPxQBnZ4KmmpA2oY=SQ@mail.gmail.com>
References: <CAHEJdxLo+jENu6ynuKQb=Y6M28L2783S1AttF0dbcsdedcqqFQ@mail.gmail.com>
 <CABzHfVmVew+jk5rL_PYdtVbGo1d4kvfrPxQBnZ4KmmpA2oY=SQ@mail.gmail.com>
From: Mehdi Sarmadi <msarmadi@gmail.com>
Date: Thu, 12 Apr 2012 17:36:31 +0430
Message-ID: <CAHEJdxKFPJV9_pRfNu5G9_1fbOVnh4JqoGrBobBybusJ9CVkFw@mail.gmail.com>
Subject: Re: Problem with making HTTP KeepAlive work
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=20cf306f779e91a9e804bd7b072d

--20cf306f779e91a9e804bd7b072d
Content-Type: text/plain; charset=UTF-8

you'r right just fixed it.

<Connector maxKeepAliveRequests="50000" port="7070" protocol="HTTP/1.1"
allowTrace="false" connectionTimeout="20000" clientAuth="false" />

anyway, I can't still find the "Connection: Keep-Alive" HTTP Response(from
tomcat) header. I just don't know where to check, any clues? anything
missing?

--
Mehdi Sarmadi


On Thu, Apr 12, 2012 at 5:28 PM, Konstantin Kolinko
<knst.kolinko@gmail.com>wrote:

> 2012/4/12 Mehdi Sarmadi <msarmadi@gmail.com>:
> >
> >  I just setup a tomcat 7 on linux for test. I just used this connection
> > property in server.xml
> >
> > here is out connector
> > <Connector maxKeepAliveRequests=-1 port="7070" protocol="HTTP/1.1"
> > allowTrace="false" connectionTimeout="20000" clientAuth="false" />
> >
> > , but when we try to connect from a client "Firefox" in my case,
> > "Connection: Keep-Alive" is sent in the Request by Browser but
> "Connection:
> > Keep-Alive" is not visible in the HTTP Response Headers, which obviously
> > coming from weblogic. I use HTTPFox plugin.
> >
> >  So I guess that  that config does not work. Something seems to be
> missing.
> >  Any suggestion for making HTTP KeepAlive work in Tomcat?
> >
>
> Connection: Keep-Alive  header has different meaning.
>
> It is needed only when you have Keep-Alive: header as well so that
> "Keep-Alive" header value is not lost at proxies.
>
> Keep alive feature of HTTP/1.1 does not need to be specified in the
> response. It is "on" by default. See RFC2616 aka HTTP/1.1
> specification.
>
>
> By the way:
> 1. You are missing quotes around "-1". The above is broken XML.
> 2. You will get the same response even if you remove the
> maxKeepAliveRequests attribute.
>
> Best regards,
> Konstantin Kolinko
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>
>

--20cf306f779e91a9e804bd7b072d--

From users-return-233521-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 12 13:09:39 2012
Return-Path: <users-return-233521-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 40EBA9EA2
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 12 Apr 2012 13:09:39 +0000 (UTC)
Received: (qmail 17582 invoked by uid 500); 12 Apr 2012 13:09:35 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 17382 invoked by uid 500); 12 Apr 2012 13:09:35 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 17372 invoked by uid 99); 12 Apr 2012 13:09:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 13:09:35 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of msarmadi@gmail.com designates 209.85.216.52 as permitted sender)
Received: from [209.85.216.52] (HELO mail-qa0-f52.google.com) (209.85.216.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 13:09:27 +0000
Received: by qabg40 with SMTP id g40so1816319qab.18
        for <users@tomcat.apache.org>; Thu, 12 Apr 2012 06:09:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=kfLEk73Pejl2G5pW//F1wk9mw4lbmY4+wYdeY8kaGB4=;
        b=ZhdbbPu4ZCRObhPf94whErOvCmFIw181GK0VLMQxAZ2FrAr3Zd3JHfoGfXsLeIpfbc
         BHYsFdcbf4HEJY6guN9d0eM9pRjGVcSAOmBrl20diCzBguG/vSplklIzSQwS8bQVfUz6
         FGWAmg6LE6Qhs0yO0jHcNpPvz7V3PudlFGWpI+qpXxMDLlCepptv+Z5ZaEXRdcliySqr
         MrijWOac7G9UWnyhLfB9X2dOWb9/JhyDgiYdtW/Z3HGeEN4JMpRqY6B107UggMd5xVrt
         t8mZpTRIR3kng8sVJMt0l86jKCCBnpNPErsdHlzE1kqQUL8c3Ou3NjCcstep8rpH4JiJ
         R/BA==
Received: by 10.224.173.194 with SMTP id q2mr3797568qaz.15.1334236147097; Thu,
 12 Apr 2012 06:09:07 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.91.148 with HTTP; Thu, 12 Apr 2012 06:08:46 -0700 (PDT)
In-Reply-To: <CAHEJdxKFPJV9_pRfNu5G9_1fbOVnh4JqoGrBobBybusJ9CVkFw@mail.gmail.com>
References: <CAHEJdxLo+jENu6ynuKQb=Y6M28L2783S1AttF0dbcsdedcqqFQ@mail.gmail.com>
 <CABzHfVmVew+jk5rL_PYdtVbGo1d4kvfrPxQBnZ4KmmpA2oY=SQ@mail.gmail.com> <CAHEJdxKFPJV9_pRfNu5G9_1fbOVnh4JqoGrBobBybusJ9CVkFw@mail.gmail.com>
From: Mehdi Sarmadi <msarmadi@gmail.com>
Date: Thu, 12 Apr 2012 17:38:46 +0430
Message-ID: <CAHEJdx+qrtk9GGEokm1B6zmDumOPqoyoeV2QzCG9zwppTg8Lmw@mail.gmail.com>
Subject: Re: Problem with making HTTP KeepAlive work
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=485b397dd6e598205804bd7b0f8e

--485b397dd6e598205804bd7b0f8e
Content-Type: text/plain; charset=UTF-8

I just misunderstood, so you'r saying it is HTTP 1.0 we will have the
keep-alive in HTTP?
I'll check that.
--
Mehdi Sarmadi


On Thu, Apr 12, 2012 at 5:36 PM, Mehdi Sarmadi <msarmadi@gmail.com> wrote:

> you'r right just fixed it.
>
> <Connector maxKeepAliveRequests="50000" port="7070" protocol="HTTP/1.1"
> allowTrace="false" connectionTimeout="20000" clientAuth="false" />
>
> anyway, I can't still find the "Connection: Keep-Alive" HTTP Response(from
> tomcat) header. I just don't know where to check, any clues? anything
> missing?
>
> --
> Mehdi Sarmadi
>
>
>
> On Thu, Apr 12, 2012 at 5:28 PM, Konstantin Kolinko <
> knst.kolinko@gmail.com> wrote:
>
>> 2012/4/12 Mehdi Sarmadi <msarmadi@gmail.com>:
>> >
>> >  I just setup a tomcat 7 on linux for test. I just used this connection
>> > property in server.xml
>> >
>> > here is out connector
>> > <Connector maxKeepAliveRequests=-1 port="7070" protocol="HTTP/1.1"
>> > allowTrace="false" connectionTimeout="20000" clientAuth="false" />
>> >
>> > , but when we try to connect from a client "Firefox" in my case,
>> > "Connection: Keep-Alive" is sent in the Request by Browser but
>> "Connection:
>> > Keep-Alive" is not visible in the HTTP Response Headers, which obviously
>> > coming from weblogic. I use HTTPFox plugin.
>> >
>> >  So I guess that  that config does not work. Something seems to be
>> missing.
>> >  Any suggestion for making HTTP KeepAlive work in Tomcat?
>> >
>>
>> Connection: Keep-Alive  header has different meaning.
>>
>> It is needed only when you have Keep-Alive: header as well so that
>> "Keep-Alive" header value is not lost at proxies.
>>
>> Keep alive feature of HTTP/1.1 does not need to be specified in the
>> response. It is "on" by default. See RFC2616 aka HTTP/1.1
>> specification.
>>
>>
>> By the way:
>> 1. You are missing quotes around "-1". The above is broken XML.
>> 2. You will get the same response even if you remove the
>> maxKeepAliveRequests attribute.
>>
>> Best regards,
>> Konstantin Kolinko
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>> For additional commands, e-mail: users-help@tomcat.apache.org
>>
>>
>

--485b397dd6e598205804bd7b0f8e--

From users-return-233522-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 12 13:15:43 2012
Return-Path: <users-return-233522-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 23BDC9FDB
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 12 Apr 2012 13:15:43 +0000 (UTC)
Received: (qmail 30654 invoked by uid 500); 12 Apr 2012 13:15:39 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 30524 invoked by uid 500); 12 Apr 2012 13:15:39 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 30513 invoked by uid 99); 12 Apr 2012 13:15:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 13:15:39 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of msarmadi@gmail.com designates 209.85.216.41 as permitted sender)
Received: from [209.85.216.41] (HELO mail-qa0-f41.google.com) (209.85.216.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 13:15:30 +0000
Received: by qafl39 with SMTP id l39so4258826qaf.0
        for <users@tomcat.apache.org>; Thu, 12 Apr 2012 06:15:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=6td9vyoDO+SoFrGKYxRKNi8iaVx3ezCdXbcWz0xlOzM=;
        b=dJmLAQbz1VDEWUVv4YkS3mvGjsU1vsOlHUDukRsz/TuVCn39gHbAaiQdQKDNBj7E+q
         ZDwtCdiMtmjh9IDYs1xmRK7kiUEwH28DXM0JAw5HLiJ1kjCGkRfugEFyV1ZfAdiBTDbx
         +SFBqdrB4rq5eo3aTECsqf5yiPsdjV0VRxpC/HS0aUP+opYQuQYMTkKzAow4lUbMjQh1
         OTeekkc7lc/4InDXqWvE9ZbNsiy7qywr3iQ1z/+LEGCYc/zlNYXGJBsMQHrFda5H2Fet
         nXG8GwK0TMks+dG5QF26lqfdnqXnre4dQzy1FNSfnlO4dlBcZqT/5SCmJZ64Lwy/jMKO
         AALQ==
Received: by 10.224.33.134 with SMTP id h6mr3887420qad.28.1334236509369; Thu,
 12 Apr 2012 06:15:09 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.91.148 with HTTP; Thu, 12 Apr 2012 06:14:49 -0700 (PDT)
In-Reply-To: <CAHEJdxKFPJV9_pRfNu5G9_1fbOVnh4JqoGrBobBybusJ9CVkFw@mail.gmail.com>
References: <CAHEJdxLo+jENu6ynuKQb=Y6M28L2783S1AttF0dbcsdedcqqFQ@mail.gmail.com>
 <CABzHfVmVew+jk5rL_PYdtVbGo1d4kvfrPxQBnZ4KmmpA2oY=SQ@mail.gmail.com> <CAHEJdxKFPJV9_pRfNu5G9_1fbOVnh4JqoGrBobBybusJ9CVkFw@mail.gmail.com>
From: Mehdi Sarmadi <msarmadi@gmail.com>
Date: Thu, 12 Apr 2012 17:44:49 +0430
Message-ID: <CAHEJdx+_ubG7iF19KCX0x9FFMxNTZ6oXrWdz4s7L_SjrZEDZHw@mail.gmail.com>
Subject: Re: Problem with making HTTP KeepAlive work
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=20cf306f779e2ff37a04bd7b25af

--20cf306f779e2ff37a04bd7b25af
Content-Type: text/plain; charset=UTF-8

Assuming keep-alive being on by default in HTTP/1.1 how come, apache does
not work that way?
I mean even I force HTTP/1.1 in apache with Keep-Alive On, it sends back
"Connection: KeepAlive" in HTTP Response?
Moreover, turning keepalive feature on, makes Apache response about 8 to 10
times more than the time it is not On, but tomcat does not behave the same
and I can't see Improvements in number of concurrent sessions.
--
Mehdi Sarmadi


On Thu, Apr 12, 2012 at 5:36 PM, Mehdi Sarmadi <msarmadi@gmail.com> wrote:

> you'r right just fixed it.
>
> <Connector maxKeepAliveRequests="50000" port="7070" protocol="HTTP/1.1"
> allowTrace="false" connectionTimeout="20000" clientAuth="false" />
>
> anyway, I can't still find the "Connection: Keep-Alive" HTTP Response(from
> tomcat) header. I just don't know where to check, any clues? anything
> missing?
>
> --
> Mehdi Sarmadi
>
>
>
> On Thu, Apr 12, 2012 at 5:28 PM, Konstantin Kolinko <
> knst.kolinko@gmail.com> wrote:
>
>> 2012/4/12 Mehdi Sarmadi <msarmadi@gmail.com>:
>> >
>> >  I just setup a tomcat 7 on linux for test. I just used this connection
>> > property in server.xml
>> >
>> > here is out connector
>> > <Connector maxKeepAliveRequests=-1 port="7070" protocol="HTTP/1.1"
>> > allowTrace="false" connectionTimeout="20000" clientAuth="false" />
>> >
>> > , but when we try to connect from a client "Firefox" in my case,
>> > "Connection: Keep-Alive" is sent in the Request by Browser but
>> "Connection:
>> > Keep-Alive" is not visible in the HTTP Response Headers, which obviously
>> > coming from weblogic. I use HTTPFox plugin.
>> >
>> >  So I guess that  that config does not work. Something seems to be
>> missing.
>> >  Any suggestion for making HTTP KeepAlive work in Tomcat?
>> >
>>
>> Connection: Keep-Alive  header has different meaning.
>>
>> It is needed only when you have Keep-Alive: header as well so that
>> "Keep-Alive" header value is not lost at proxies.
>>
>> Keep alive feature of HTTP/1.1 does not need to be specified in the
>> response. It is "on" by default. See RFC2616 aka HTTP/1.1
>> specification.
>>
>>
>> By the way:
>> 1. You are missing quotes around "-1". The above is broken XML.
>> 2. You will get the same response even if you remove the
>> maxKeepAliveRequests attribute.
>>
>> Best regards,
>> Konstantin Kolinko
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>> For additional commands, e-mail: users-help@tomcat.apache.org
>>
>>
>

--20cf306f779e2ff37a04bd7b25af--

From users-return-233523-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 12 13:25:46 2012
Return-Path: <users-return-233523-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B50689D4B
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 12 Apr 2012 13:25:46 +0000 (UTC)
Received: (qmail 59388 invoked by uid 500); 12 Apr 2012 13:25:43 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 59184 invoked by uid 500); 12 Apr 2012 13:25:43 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 59163 invoked by uid 99); 12 Apr 2012 13:25:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 13:25:43 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of knst.kolinko@gmail.com designates 209.85.160.173 as permitted sender)
Received: from [209.85.160.173] (HELO mail-gy0-f173.google.com) (209.85.160.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 13:25:37 +0000
Received: by ghrr14 with SMTP id r14so1276203ghr.18
        for <users@tomcat.apache.org>; Thu, 12 Apr 2012 06:25:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=mGSPX2b8Zhpwoi+X6OqgL/pJFWbdpn8eB9BKHjswiTA=;
        b=mAgyKJ2qBXHY97QbAY1WyLR2jiU7HeZVoCRXCBWCmWI21DWV7m7X0Clbb5qLoeETxN
         fjT/6DmtpzTtaSvLZF/PvtLdDrk542EF1UMYWlUUq8bFqfN3mfkodf+rL+PFE/4W7AsB
         6i0Jzi30pSHT0hdYO5mo1UPuKl++qJx8h6jkEzwHYLDyRq8fQo5p2UWyJSjUbE7Z9nPn
         +LnMOyYCi0GfJCNvJt/on4jZZyjxWiqlqBvY8aKYTT16YQiHPv5vR8+8YMLXfWrlZK9+
         xCToKFHhm6LqahXzqE9dsopk5KqZAG3qNfvYfzGdU1sfnJ1pM7oIQHxjYF1RpV+ZoR6D
         unXg==
MIME-Version: 1.0
Received: by 10.236.115.200 with SMTP id e48mr420228yhh.14.1334237116270; Thu,
 12 Apr 2012 06:25:16 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Thu, 12 Apr 2012 06:25:16 -0700 (PDT)
In-Reply-To: <6368FCCCD803D64BB0931D7F5F0A3DD50227830AB1@DEMCHP99E84MSX.ww902.siemens.net>
References: <6368FCCCD803D64BB0931D7F5F0A3DD50227830AB1@DEMCHP99E84MSX.ww902.siemens.net>
Date: Thu, 12 Apr 2012 17:25:16 +0400
Message-ID: <CABzHfV=4zXYQaYehW96emvsN7w6_mOkDXArZTPegX66Pwx-7sA@mail.gmail.com>
Subject: Re: StandardHostValve kills custom error message
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

2012/4/12 Osipov, Michael <michael.osipov@siemens.com>:
> Hi folks,
>
> I am sending a custom error message in my authenticator but it gets remov=
ed by the StandardHostValve.
> This is what I do in my authenticator:
>
> catch (PrivilegedActionException e) {
> =A0 logger.error("Unable to login as the service principal", e.getExcepti=
on());
>
> =A0 response.sendError(HttpServletResponse.SC_INTERNAL_SERVER_ERROR,
> =A0 =A0 "Unable to login as the service principal");
> =A0 request.setAttribute(Globals.EXCEPTION_ATTR, e);

What happens if you switch the order of the above two lines?

IMHO it is odd to do something after sendError(), sendRedirect() or
RequestDispatcher.forward().

> =A0 return false;
> }
>
> The message is not diplayed because in line 282 to 286 the message is kil=
led by:
> else {
> =A0 =A0 =A0 =A0 =A0 =A0// A custom error-page has not been defined for th=
e exception
> =A0 =A0 =A0 =A0 =A0 =A0// that was thrown during request processing. Chec=
k if an
> =A0 =A0 =A0 =A0 =A0 =A0// error-page for error code 500 was specified and=
 if so,
> =A0 =A0 =A0 =A0 =A0 =A0// send that page back as the response.
> =A0 =A0 =A0 =A0 =A0 =A0response.setStatus(HttpServletResponse.SC_INTERNAL=
_SERVER_ERROR);
> =A0 =A0 =A0 =A0 =A0 =A0// The response is an error
> =A0 =A0 =A0 =A0 =A0 =A0response.setError();
>
> =A0 =A0 =A0 =A0 =A0 =A0status(request, response);
> =A0 =A0 =A0 =A0}
>
> It seems like this valve does not care if it handles an uncaught exceptio=
n or a deliberate exception.
> Can this be fixed without patching the valve?
>
> I guess not. I would file a ticket about that: A mere response#isError ca=
ll would suffice to wrap that behavior and pass the response as is.
>


My understanding is that it is responsibility of the Container to
provide the value for the request attribute
"javax.servlet.error.exception"

You cannot set it.

See 10.9.1 in Servlet 3.0 spec.

Can't you just throw new ServletException(PrivilegedActionException); ?

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233524-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 12 13:27:47 2012
Return-Path: <users-return-233524-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9089B9A84
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 12 Apr 2012 13:27:47 +0000 (UTC)
Received: (qmail 66150 invoked by uid 500); 12 Apr 2012 13:27:44 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 65976 invoked by uid 500); 12 Apr 2012 13:27:44 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 65965 invoked by uid 99); 12 Apr 2012 13:27:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 13:27:44 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of knst.kolinko@gmail.com designates 209.85.213.173 as permitted sender)
Received: from [209.85.213.173] (HELO mail-yx0-f173.google.com) (209.85.213.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 13:27:36 +0000
Received: by yenr5 with SMTP id r5so1290791yen.18
        for <users@tomcat.apache.org>; Thu, 12 Apr 2012 06:27:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=/6z1iB6hK//YFyVvrXeGkOBevz/oZEhZ/FVOUO8QL1c=;
        b=OVk5RIr0n3dTa03DY+LwmCIakUbKZzvBnQyy7es2EndD5kSqIXgKVlID1cSbEorBbI
         Weld5mub1T/F9+jKzW20HjdXEAfY1vzORGvImTQEIbJH5Pvl5c3HtDmmNjAEt/jNAPEw
         Qcgun4tQP3DeMhsYAvzmH/SvCQHo1zY8ssgMuZ42f4EXg3SX8SJ86JpI46Wh2+Z7hQY4
         LRWWSf4m7FMFsftT2bMbNyMAq3ufYApBtNpVms88ngA/U96NFpOAVP+uIVn6McsXDGx4
         9xx53vhBjBGKp0YMDwhw9ZJJhgw+RYDikS9fq/XGzfALl499985ByW6xKAQuoz1snAKt
         Z4/w==
MIME-Version: 1.0
Received: by 10.236.75.131 with SMTP id z3mr2073319yhd.31.1334237235709; Thu,
 12 Apr 2012 06:27:15 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Thu, 12 Apr 2012 06:27:15 -0700 (PDT)
In-Reply-To: <CAHEJdxKFPJV9_pRfNu5G9_1fbOVnh4JqoGrBobBybusJ9CVkFw@mail.gmail.com>
References: <CAHEJdxLo+jENu6ynuKQb=Y6M28L2783S1AttF0dbcsdedcqqFQ@mail.gmail.com>
	<CABzHfVmVew+jk5rL_PYdtVbGo1d4kvfrPxQBnZ4KmmpA2oY=SQ@mail.gmail.com>
	<CAHEJdxKFPJV9_pRfNu5G9_1fbOVnh4JqoGrBobBybusJ9CVkFw@mail.gmail.com>
Date: Thu, 12 Apr 2012 17:27:15 +0400
Message-ID: <CABzHfVk=b-4bsA3maox4UT71viPv6futQq1PNgXeuSq9aiD0Cg@mail.gmail.com>
Subject: Re: Problem with making HTTP KeepAlive work
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

2012/4/12 Mehdi Sarmadi <msarmadi@gmail.com>:
> you'r right just fixed it.
>
> <Connector maxKeepAliveRequests=3D"50000" port=3D"7070" protocol=3D"HTTP/=
1.1"
> allowTrace=3D"false" connectionTimeout=3D"20000" clientAuth=3D"false" />
>
> anyway, I can't still find the "Connection: Keep-Alive" HTTP Response(fro=
m
> tomcat) header. I just don't know where to check, any clues? anything
> missing?
>
>
> On Thu, Apr 12, 2012 at 5:28 PM, Konstantin Kolinko
> <knst.kolinko@gmail.com>wrote:
>
>> 2012/4/12 Mehdi Sarmadi <msarmadi@gmail.com>:
>> >
>> > =A0I just setup a tomcat 7 on linux for test. I just used this connect=
ion
>> > property in server.xml
>> >
>> > here is out connector
>> > <Connector maxKeepAliveRequests=3D-1 port=3D"7070" protocol=3D"HTTP/1.=
1"
>> > allowTrace=3D"false" connectionTimeout=3D"20000" clientAuth=3D"false" =
/>
>> >
>> > , but when we try to connect from a client "Firefox" in my case,
>> > "Connection: Keep-Alive" is sent in the Request by Browser but
>> "Connection:
>> > Keep-Alive" is not visible in the HTTP Response Headers, which obvious=
ly
>> > coming from weblogic. I use HTTPFox plugin.
>> >
>> > =A0So I guess that =A0that config does not work. Something seems to be
>> missing.
>> > =A0Any suggestion for making HTTP KeepAlive work in Tomcat?
>> >
>>
>> Connection: Keep-Alive =A0header has different meaning.
>>
>> It is needed only when you have Keep-Alive: header as well so that
>> "Keep-Alive" header value is not lost at proxies.
>>
>> Keep alive feature of HTTP/1.1 does not need to be specified in the
>> response. It is "on" by default. See RFC2616 aka HTTP/1.1
>> specification.
>>
>>

1. I already answered why you cannot find it.
2. Post replies below the text that you are relying to.

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233525-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 12 14:04:27 2012
Return-Path: <users-return-233525-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8DA489FDA
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 12 Apr 2012 14:04:27 +0000 (UTC)
Received: (qmail 79859 invoked by uid 500); 12 Apr 2012 14:04:24 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 79647 invoked by uid 500); 12 Apr 2012 14:04:24 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 79638 invoked by uid 99); 12 Apr 2012 14:04:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 14:04:24 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of knst.kolinko@gmail.com designates 209.85.213.173 as permitted sender)
Received: from [209.85.213.173] (HELO mail-yx0-f173.google.com) (209.85.213.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 14:04:16 +0000
Received: by yenr5 with SMTP id r5so1329503yen.18
        for <users@tomcat.apache.org>; Thu, 12 Apr 2012 07:03:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=osog6TCUUOHQyaA849QxJEwwvtuOpZJ0CWx//hdnCDo=;
        b=HTc36b44DBYD85Ihc78Irl2nm9e8lDuagVELMjBvs0YxAfhTOr3kqpduOWwyXyzWw7
         4mYI5Hd7ILFRJtfREiUysuL+rrOk+LeKZRRNcWPRLQbAsZ/yzCeYtZqdp/nfvJVhxpO4
         Ze59WuOCt7kjBCCbDpEYL7wSfi01QW40nVVKBarjxnEKqsFmdCgc/QzOgBUTuIJi3Qdd
         uv5eqMoiNxmjkKnBxJrIekyED6yLbh9VY6N8a8H1BO0DLsfQ/ILpwcxGXOsFPgrXI62u
         8HuoKt/7/hwMYwousI+kSYzds8972BaU5njiYxtp5eMRa9PhOsV0bU2cjuaTOqoxQIMy
         kjAg==
MIME-Version: 1.0
Received: by 10.236.190.2 with SMTP id d2mr1774750yhn.48.1334239435772; Thu,
 12 Apr 2012 07:03:55 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Thu, 12 Apr 2012 07:03:55 -0700 (PDT)
In-Reply-To: <CAJgUgf4kPxKMOYqTFGNapT2YbSSN4DF_L01jaB342zL5qDyexA@mail.gmail.com>
References: <CAJgUgf7VMFdOfHgQCwoeDNeRjtGLGbKiqbPkO4JCPT1FnGBWJQ@mail.gmail.com>
	<4F85E298.8090604@christopherschultz.net>
	<CAJgUgf4kPxKMOYqTFGNapT2YbSSN4DF_L01jaB342zL5qDyexA@mail.gmail.com>
Date: Thu, 12 Apr 2012 18:03:55 +0400
Message-ID: <CABzHfVmB84SvbFVyp9c_Df9DoC4RLjYY5P_rUsj9shSGO5fySw@mail.gmail.com>
Subject: Re: Intermittent "ServletException - Unable to compile class for JSP"
 for a struts-1.3.10 web-app with Tomcat 7.0.26/7.0.27
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

2012/4/12 Ashima Sharma <ashprof7@gmail.com>:
> Most of the jsps have this issue...but it happens randomly. For e.g., i w=
d
> be able to access the registration page 5 times w/o any issue, and the 6t=
h
> time I'd get this error.
> Its bizarre that tomcat tries to recompile the already compiled jsp at so=
me
> random point even though the page hasn't changed, and throws the cannot
> compile error. All the jsps with this issue have the .java and .class fil=
es
> under the work directory.
>
> The compilation issue is
> in org.apache.jasper.runtime.JspSourceDependent.getDependants method for
> every jsp
> in regstration_jsp.java -
> line 49- =A0public java.util.Map<java.lang.String,java.lang.Long>
> getDependants() {
> line 50- =A0 =A0return _jspx_dependants;
> line 51- =A0}
>

> *An error occurred at line: 49 in the generated java file*
> *This method must return a result of type Map<String,Long>*

What is the type and value of  _jspx_dependants field?

It seems that it complaints that that field returned by the method is
not Map<String,Long>.

> Can you confirm that after you try to access the .jsp from the
> browser, the timestamp on the .java file changes?

Timestamp does not matter, because in latest Tomcat 7 it is set to
match the original file.

There is a comment at the top of generated java file that mentions
this fact and the actual time of generation.

You can look at "creation time" of the file as provided by NTFS. That
is because a new file is created and then its modification time is set
to the past.


1. Can you cite with what parameters "JspServlet" in your web.xml is
configured, exactly?


> This error happens when the original .class file can't be deleted
> before re-naming an SMAP-loaded copy of the .class file. Can you
> confirm that you have files called, for example,
> userProfileBodyTile_jsp.java, userProfileBodyTile_jsp.class, and
> userProfileBodyTile_jsp.javatmp ?

2. It is possible to suppress SMAP generation by setting
"suppressSmap" parameter in JspServlet to "true".

3. Deletion of recently created files on Windows can be impeded by
antivirus scanners. (Subversion client users on Windows are sometimes
complaining about that. It depends on a/v product being used.).

Maybe Tomcat can rename the old file before deleting it.
IIRC Windows allows renaming files that are open for reading, but has
problems with deleting them.


> I read that you have performed a clean install of Tomcat, which is a
good step to take because this looks like a mismatched Jasper problem
or something.

On Windows the actual setting the Service starts with are stored in
the registry. I hope those are correct.  I also hope that you do not
have any strange JARs (e.g. a copy of Jasper) in your webapp.

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233526-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 12 14:16:41 2012
Return-Path: <users-return-233526-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 90A1F97DE
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 12 Apr 2012 14:16:41 +0000 (UTC)
Received: (qmail 27167 invoked by uid 500); 12 Apr 2012 14:16:40 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 27042 invoked by uid 500); 12 Apr 2012 14:16:40 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 26882 invoked by uid 99); 12 Apr 2012 14:16:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 14:16:40 +0000
X-ASF-Spam-Status: No, hits=1.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ashprof7@gmail.com designates 209.85.160.45 as permitted sender)
Received: from [209.85.160.45] (HELO mail-pb0-f45.google.com) (209.85.160.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 14:16:34 +0000
Received: by pbcuo5 with SMTP id uo5so2651772pbc.18
        for <users@tomcat.apache.org>; Thu, 12 Apr 2012 07:16:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=awTdF0sMyKkOIvSi6JuLWr+ySJpKq5to7xQCseKHJ5I=;
        b=cai6eKXe0qVEb2sEhVDrMUqES86qoCHD/367p4f1ekMjoQU4uVKd8tDGnsLCR1eYqL
         OsQNN6DwBgqs1SK4Y+7/giofoYIfqkvhA5CiZAyYvvs963CeWqLGjJ+Yw46nc8Z3BPnU
         FHtpS92j2NBt+jpLFliBIcIHcefnd18sTMDAR8t2F+XIA9y43qjjzyA4i9jYHX9Fmbao
         ppU09o0DykZnpwaAk1Pj+XeKyWkLGrc+JQ09Z4FXd6oTqQ4NDGt/Y4MZ+EU/Hugg85KT
         QOwz2/iumJhRq79RN5iFuXaxzFuMI0NZR7no95tCEtKv9xYFTmo7ERxQ5l/IB7IrGWQt
         053Q==
MIME-Version: 1.0
Received: by 10.68.195.232 with SMTP id ih8mr3199645pbc.118.1334240173604;
 Thu, 12 Apr 2012 07:16:13 -0700 (PDT)
Received: by 10.66.15.163 with HTTP; Thu, 12 Apr 2012 07:16:13 -0700 (PDT)
In-Reply-To: <4F85FD76.9080300@christopherschultz.net>
References: <CAJgUgf7VMFdOfHgQCwoeDNeRjtGLGbKiqbPkO4JCPT1FnGBWJQ@mail.gmail.com>
	<4F85E298.8090604@christopherschultz.net>
	<CAJgUgf4kPxKMOYqTFGNapT2YbSSN4DF_L01jaB342zL5qDyexA@mail.gmail.com>
	<4F85FD76.9080300@christopherschultz.net>
Date: Thu, 12 Apr 2012 10:16:13 -0400
Message-ID: <CAJgUgf4VMZp0OVAv90QTQB2=GVWPY-x_ErK0LuO=Bsd-shgDMQ@mail.gmail.com>
Subject: Re: Intermittent "ServletException - Unable to compile class for JSP"
 for a struts-1.3.10 web-app with Tomcat 7.0.26/7.0.27
From: Ashima Sharma <ashprof7@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=047d7b10d03b97c08004bd7bffa2
X-Virus-Checked: Checked by ClamAV on apache.org

--047d7b10d03b97c08004bd7bffa2
Content-Type: text/plain; charset=ISO-8859-1

Christopher, response to your questions:

[Can you confirm that after you try to access the .jsp from the
browser, the timestamp on the .java file changes?] -* It does not change.
ALL the .java and .class files have the same timestamp as the .jsp files
which is the same as when the war was deployed.*

[Are you deploying from a WAR file or exploded directory? Also, are any
of your JSPs in a .jar file (whether this is in a WAR file or not)?] - *From
a war file. Jsps are not is a jar file. *

*This is a legacy app and has spring + struts...spring is being used for
dependency-injection only, and struts as the web-framework. I should have
mentioned this earlier, but we have other spring based apps (without
struts) on tomcat 7.0.26, and we don't see this issue with those apps. *

[Can you
confirm that you have files called, for example,
userProfileBodyTile_jsp.java, userProfileBodyTile_jsp.class, and
userProfileBodyTile_jsp.javatmp ?]
*The only files that I see under the work directory are .java and .class, I
have not seen any .javatmp files in that directory

*I'll send you registration.jsp and .java files separately. thanks.
----------------------------------------------------------------------------------------------

--047d7b10d03b97c08004bd7bffa2--

From users-return-233527-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 12 14:45:01 2012
Return-Path: <users-return-233527-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 71D329C53
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 12 Apr 2012 14:45:01 +0000 (UTC)
Received: (qmail 51286 invoked by uid 500); 12 Apr 2012 14:44:58 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 51083 invoked by uid 500); 12 Apr 2012 14:44:57 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 51074 invoked by uid 99); 12 Apr 2012 14:44:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 14:44:57 +0000
X-ASF-Spam-Status: No, hits=1.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ashprof7@gmail.com designates 209.85.160.65 as permitted sender)
Received: from [209.85.160.65] (HELO mail-pb0-f65.google.com) (209.85.160.65)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 14:44:49 +0000
Received: by pbcuo15 with SMTP id uo15so764493pbc.0
        for <users@tomcat.apache.org>; Thu, 12 Apr 2012 07:44:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=BzgOkPc+WHYDATQQomJOiBgcnBg8z2uP7Z2lzLROwsg=;
        b=xEs9xWkrXHH3Rg+oWCkKCeIurydpUbh0x9h1qTyQuRcPzI6ULaGM3VhoF5QhWpm9EJ
         dstO0uKVA9eiSN/JZKwewU8GUqk6isKz5YM3iq9v51UMqc02ynJrHAzKZKiNB+VdnIHa
         BMOIq7exowNW2pdhEQI8anSAAoFrP//PbHTM5dC3VXbLwuvW1pKL6FBKbV9BLg8Jy+wf
         4b4NKbXKnEBgINMd1YNEqn6ly4l/EP4UIRxTpT+9gb17h8q4WAARcVHjoa9j8PFrmVr5
         rzefxij3w6siaAzVKIJ5CXai24RVbBg/wruFoZ7EoMoXE8GuEvnIXGbm7fhSHn5LwFzN
         GwLQ==
MIME-Version: 1.0
Received: by 10.68.135.40 with SMTP id pp8mr3266409pbb.13.1334241868660; Thu,
 12 Apr 2012 07:44:28 -0700 (PDT)
Received: by 10.66.15.163 with HTTP; Thu, 12 Apr 2012 07:44:28 -0700 (PDT)
In-Reply-To: <CABzHfVmB84SvbFVyp9c_Df9DoC4RLjYY5P_rUsj9shSGO5fySw@mail.gmail.com>
References: <CAJgUgf7VMFdOfHgQCwoeDNeRjtGLGbKiqbPkO4JCPT1FnGBWJQ@mail.gmail.com>
	<4F85E298.8090604@christopherschultz.net>
	<CAJgUgf4kPxKMOYqTFGNapT2YbSSN4DF_L01jaB342zL5qDyexA@mail.gmail.com>
	<CABzHfVmB84SvbFVyp9c_Df9DoC4RLjYY5P_rUsj9shSGO5fySw@mail.gmail.com>
Date: Thu, 12 Apr 2012 10:44:28 -0400
Message-ID: <CAJgUgf4HAj=Fc72VRqEdq7NW3d3HZr9ms5joCQttD42w3MLVOw@mail.gmail.com>
Subject: Re: Intermittent "ServletException - Unable to compile class for JSP"
 for a struts-1.3.10 web-app with Tomcat 7.0.26/7.0.27
From: Ashima Sharma <ashprof7@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=047d7b10d17ba0427704bd7c6479

--047d7b10d17ba0427704bd7c6479
Content-Type: text/plain; charset=ISO-8859-1

Konstantin, responding to your questions:

[What is the type and value of  _jspx_dependants field? ]

*private static java.util.Map<java.lang.String,java.lang.Long>
_jspx_dependants;
It does match the method return type!*

[Can you cite with what parameters "JspServlet" in your web.xml is
configured, exactly?]

    <servlet>
        <servlet-name>jsp</servlet-name>
        <servlet-class>org.apache.jasper.servlet.JspServlet</servlet-class>
        <init-param>
            <param-name>fork</param-name>
            <param-value>false</param-value>
        </init-param>
        <init-param>
            <param-name>xpoweredBy</param-name>
            <param-value>false</param-value>
        </init-param>
        <init-param>
            <param-name>development</param-name>
            <param-value>false</param-value>
        </init-param>
        <init-param>
            <param-name>genStringAsCharArray</param-name>
            <param-value>true</param-value>
        </init-param>
        <init-param>
            <param-name>trimSpaces</param-name>
            <param-value>true</param-value>
        </init-param>
        <load-on-startup>3</load-on-startup>
    </servlet>

- I believe we have tried the suppressSmap=true setting in our uat
environment, and still seen the 1st exception occur (related to
getDependants).
But I'll retry that and let you know the outcome.

- We have excluded the tomcat folder from anti-virus scans.

- As far as I can tell we don't have any strange jars in this web-app,
definitely no copy of jasper.

- Your question regarding the windows registry settings, let me know what
specific settings do I need to verify and I will do that.

thanks.

--047d7b10d17ba0427704bd7c6479--

From users-return-233528-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 12 15:06:25 2012
Return-Path: <users-return-233528-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A15CF953C
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 12 Apr 2012 15:06:25 +0000 (UTC)
Received: (qmail 29196 invoked by uid 500); 12 Apr 2012 15:06:22 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 29056 invoked by uid 500); 12 Apr 2012 15:06:22 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 29045 invoked by uid 99); 12 Apr 2012 15:06:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 15:06:22 +0000
X-ASF-Spam-Status: No, hits=-4.3 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [192.35.17.28] (HELO goliath.siemens.de) (192.35.17.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 15:06:13 +0000
Received: from mail1.siemens.de (localhost [127.0.0.1])
	by goliath.siemens.de (8.13.6/8.13.6) with ESMTP id q3CF5psx013173
	for <users@tomcat.apache.org>; Thu, 12 Apr 2012 17:05:51 +0200
Received: from DEMCHP99ET0MSX.ww902.siemens.net (demchp99et0msx.ww902.siemens.net [139.25.131.181])
	by mail1.siemens.de (8.13.6/8.13.6) with ESMTP id q3CF5pQu031682
	(version=TLSv1/SSLv3 cipher=RC4-MD5 bits=128 verify=FAIL)
	for <users@tomcat.apache.org>; Thu, 12 Apr 2012 17:05:51 +0200
Received: from DEMCHP99ET4MSX.ww902.siemens.net (139.25.131.174) by
 DEMCHP99ET0MSX.ww902.siemens.net (139.25.131.181) with Microsoft SMTP Server
 (TLS) id 8.3.245.1; Thu, 12 Apr 2012 17:05:51 +0200
Received: from DEMCHP99E84MSX.ww902.siemens.net ([169.254.1.87]) by
 DEMCHP99ET4MSX.ww902.siemens.net ([139.25.131.174]) with mapi; Thu, 12 Apr
 2012 17:05:50 +0200
From: "Osipov, Michael" <michael.osipov@siemens.com>
To: Tomcat Users List <users@tomcat.apache.org>
Date: Thu, 12 Apr 2012 17:05:49 +0200
Subject: RE: StandardHostValve kills custom error message
Thread-Topic: StandardHostValve kills custom error message
Thread-Index: Ac0Yr8Urf8EzMYMqT8it2cO+QTmC/gAC4Kwg
Message-ID: <6368FCCCD803D64BB0931D7F5F0A3DD50227830C08@DEMCHP99E84MSX.ww902.siemens.net>
References: <6368FCCCD803D64BB0931D7F5F0A3DD50227830AB1@DEMCHP99E84MSX.ww902.siemens.net>
 <CABzHfV=4zXYQaYehW96emvsN7w6_mOkDXArZTPegX66Pwx-7sA@mail.gmail.com>
In-Reply-To: <CABzHfV=4zXYQaYehW96emvsN7w6_mOkDXArZTPegX66Pwx-7sA@mail.gmail.com>
Accept-Language: de-DE
Content-Language: de-DE
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: de-DE
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

Konstantin Kolinko wrote:
> 2012/4/12 Osipov, Michael <michael.osipov@siemens.com>:
>> Hi folks,
>>=20
>> I am sending a custom error message in my authenticator but it gets
>> removed by the StandardHostValve.=20
>> This is what I do in my authenticator:
>>=20
>> catch (PrivilegedActionException e) {
>> =A0 logger.error("Unable to login as the service principal",
>> e.getException());=20
>>=20
>> =A0 response.sendError(HttpServletResponse.SC_INTERNAL_SERVER_ERROR,
>> =A0 =A0 "Unable to login as the service principal");
>> =A0 request.setAttribute(Globals.EXCEPTION_ATTR, e);
>=20
> What happens if you switch the order of the above two lines?

Same behavior. The method setAttribute does not trigger anything which modi=
fies the above error state.

>> =A0 return false;
>> }
>>=20
>> The message is not diplayed because in line 282 to 286 the message
>> is killed by:=20
>> else {
>> =A0 =A0 =A0 =A0 =A0 =A0// A custom error-page has not been defined for t=
he
>> exception=20
>> =A0 =A0 =A0 =A0 =A0 =A0// that was thrown during request processing. Che=
ck if an
>> =A0 =A0 =A0 =A0 =A0 =A0// error-page for error code 500 was specified an=
d if so,
>> =A0 =A0 =A0 =A0 =A0 =A0// send that page back as the response.
>> =A0 =A0 =A0 =A0 =A0
>> response.setStatus(HttpServletResponse.SC_INTERNAL_SERVER_ERROR);=20
>> =A0 =A0 =A0 =A0 =A0 =A0// The response is an error
>> =A0 =A0 =A0 =A0 =A0 =A0response.setError();
>>=20
>> =A0 =A0 =A0 =A0 =A0 =A0status(request, response);
>> =A0 =A0 =A0 =A0}
>>=20
>> It seems like this valve does not care if it handles an uncaught
>> exception or a deliberate exception.=20
>> Can this be fixed without patching the valve?
>>=20
>> I guess not. I would file a ticket about that: A mere
>> response#isError call would suffice to wrap that behavior and pass
>> the response as is. =20
>>=20
>=20
>=20
> My understanding is that it is responsibility of the Container to
> provide the value for the request attribute
> "javax.servlet.error.exception"
>=20
> You cannot set it.
>=20
> See 10.9.1 in Servlet 3.0 spec.

Maybe, but the message field is not automatically populated by the valve if=
 no custom error page exists nor does the ErrorReportValue retrieves the th=
rowable message as message. The HTML area is, in that case, simply blank:
HTTP 500 - <empty>

Not really helpful.

> Can't you just throw new ServletException(PrivilegedActionException);

I can't, ServletException cannot be thrown in the authenticate method. A Ru=
ntimeException results in blank page. Anyway,  there would be no change bec=
ause the valve will still be stuck in the else block and no one ever assign=
s the throwable#getMessage to reponse#setMessage.

In my option, both the StandardHostValve and maybe the ErrorReportValve des=
erve some improvement.

With best regards,
Michael Osipov=

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233529-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 12 15:20:42 2012
Return-Path: <users-return-233529-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 167799A28
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 12 Apr 2012 15:20:41 +0000 (UTC)
Received: (qmail 83736 invoked by uid 500); 12 Apr 2012 15:20:38 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 83649 invoked by uid 500); 12 Apr 2012 15:20:38 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 83635 invoked by uid 99); 12 Apr 2012 15:20:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 15:20:38 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [76.96.59.212] (HELO qmta14.westchester.pa.mail.comcast.net) (76.96.59.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 15:20:30 +0000
Received: from omta19.westchester.pa.mail.comcast.net ([76.96.62.98])
	by qmta14.westchester.pa.mail.comcast.net with comcast
	id wzzj1i00227AodY5E3L9sG; Thu, 12 Apr 2012 15:20:09 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta19.westchester.pa.mail.comcast.net with comcast
	id x3L91i00Q38FjT13f3L9Ss; Thu, 12 Apr 2012 15:20:09 +0000
Message-ID: <4F86F2A8.5000601@christopherschultz.net>
Date: Thu, 12 Apr 2012 11:20:08 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: mod_jk - Firewall connection dropping
References: <1264858200.1427094.1334179052178.JavaMail.root@zimbra-prod-mbox-5.vmware.com> <4F85FDD9.1040204@christopherschultz.net> <ab72570f-7898-4ac5-846a-9bd4b8b9781c@email.android.com>
In-Reply-To: <ab72570f-7898-4ac5-846a-9bd4b8b9781c@email.android.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Mark,

On 4/12/12 4:37 AM, Mark Thomas wrote:
> HTTP keep-alive is nearly always between a client and a server 
> across the internet. mod_jk keep-alive is nearly always between a 
> client and a server on the same LAN and often on the same machine.
> 
> HTTP keep-alive has no support for checking the liveness of the 
> connection before it is used.
> 
> mod_jk keep-alive supports cping/cpong and it is pretty much 
> essential that it is used to ensure requests aren't sent to
> dropped connections or Tomcat instances taken out of service. The
> time taken for cping/cpong is very similar to that required to
> establish a new connection (and both are very, very small when
> compared to the time taken to process a request).

I have not done any performance testing, but I would suspect that TCP
connection setup is roughly equivalent to a CPING/CPONG. On the other
hand, if the environment demands something like stunnel, then creating
a new AJP connection also means an SSL negotiation, where a
CPING/CPONG is likely to be much faster.

> keep-alive does not scale for BIO connectors which require one 
> thread per connection. Tomcat's BIO HTTP connector protects
> against thread exuastion due to keep-alive by disabling keep-alive
> once 75% of the threads are in use. Tomcat's BIO AJP has no
> exhaustion against thread exhaustion. Because mod_jk uses
> persistent connections folks often don't get that Tomcat maxThreads
> (on each instance) must equal the total number of httpd threads
> across all httpd instances that route requests to that Tomcat.
> Managing this corectly requires careful setting of timeouts and,
> despite Rainer and others writing some great docs, folks still
> frequently get it wrong.

That certainly is true: if one does not understand the network map
(including connection counts), then one will get weird connection
failures, etc.

But the maxThreads setting has little to do with persistent AJP
connections, except that (httpd) clients are less likely to be
starved-out of the app server if all connections are ephemeral.

> In short, disabling mod_jk keep-alive frequently has no noticeable 
> performance impact (some customers of mine reported a performance 
> improvement!)

That sounds suspicious to me.

> and greatly simplifies configuration - especially for those folks
> that don't have a complete grasp of all of the details.

I definitely agree with that.

> The notice in the docs about "huge negative performance impact" is 
> a nonsense that needs to be removed. However, given the strength
> of feelings that were expressed when the diabling keep-alive
> feature was proposed (that lead to that notice in the docs) I am
> not prepared to remove it as I don't wish to start a commit war.

Fair enough.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+G8qgACgkQ9CaO5/Lv0PAG4QCcDkJnlXx47DeD1rt4HiWCIhBm
Bj4AoIIpiw4+TlgR1xobK+E7C4dp4oQV
=f4Ga
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233530-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 12 16:22:37 2012
Return-Path: <users-return-233530-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D2AAE930F
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 12 Apr 2012 16:22:37 +0000 (UTC)
Received: (qmail 31709 invoked by uid 500); 12 Apr 2012 16:22:34 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 31650 invoked by uid 500); 12 Apr 2012 16:22:34 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 31639 invoked by uid 99); 12 Apr 2012 16:22:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 16:22:34 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [76.96.62.32] (HELO qmta03.westchester.pa.mail.comcast.net) (76.96.62.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 16:22:26 +0000
Received: from omta20.westchester.pa.mail.comcast.net ([76.96.62.71])
	by qmta03.westchester.pa.mail.comcast.net with comcast
	id x1wu1i0041YDfWL534N6YJ; Thu, 12 Apr 2012 16:22:06 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta20.westchester.pa.mail.comcast.net with comcast
	id x4N51i00D38FjT13g4N5AE; Thu, 12 Apr 2012 16:22:06 +0000
Message-ID: <4F87012C.1070706@christopherschultz.net>
Date: Thu, 12 Apr 2012 12:22:04 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Prevent cleartext keystore/truststore passwords via JMX
References: <CANrWu+TaWd7dAnyGNPqUWfFg=DnbXTvXdB94_kaTw5pFZHDUhA@mail.gmail.com> <4F7F1128.4010002@christopherschultz.net> <CANrWu+TprUban0QCmF5fWdFAdbScks8L44SmHvOQYii8YsB1FA@mail.gmail.com> <CANrWu+TGiEjTWzx1JyLvnofScDphhnHhb0L7267sGSyVY93bcg@mail.gmail.com>
In-Reply-To: <CANrWu+TGiEjTWzx1JyLvnofScDphhnHhb0L7267sGSyVY93bcg@mail.gmail.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Randy,

On 4/12/12 8:13 AM, Randy Gray wrote:
> Actually, a <mbean> entry with the correct type attribute was
> needed:

Could you file an issue in Bugzilla and reference this email thread?

Thanks,
- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+HASwACgkQ9CaO5/Lv0PD2IwCgi2rDfbIw4hp4Ph/wWqfsO5T3
H4MAnik6VjxFfTgOo/EKcdp5u4035oei
=5/nd
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233531-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 12 16:28:12 2012
Return-Path: <users-return-233531-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0063F9174
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 12 Apr 2012 16:28:11 +0000 (UTC)
Received: (qmail 61196 invoked by uid 500); 12 Apr 2012 16:28:07 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 61106 invoked by uid 500); 12 Apr 2012 16:28:07 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 61054 invoked by uid 99); 12 Apr 2012 16:28:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 16:28:06 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [76.96.59.243] (HELO qmta13.westchester.pa.mail.comcast.net) (76.96.59.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 16:27:59 +0000
Received: from omta14.westchester.pa.mail.comcast.net ([76.96.62.60])
	by qmta13.westchester.pa.mail.comcast.net with comcast
	id x4M91i0051HzFnQ5D4Tfbt; Thu, 12 Apr 2012 16:27:39 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta14.westchester.pa.mail.comcast.net with comcast
	id x4Te1i00D38FjT13a4Tfbs; Thu, 12 Apr 2012 16:27:39 +0000
Message-ID: <4F870279.3050303@christopherschultz.net>
Date: Thu, 12 Apr 2012 12:27:37 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: tomcat manager with weak password compromised. Any idea about
 the payload?
References: <4F8640AD.3080601@limepepper.co.uk>
In-Reply-To: <4F8640AD.3080601@limepepper.co.uk>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Tom,

On 4/11/12 10:40 PM, Tom H wrote:
> An instance running tomcat 6.0.24 as root

Obviously, you won't make that mistake again.

Was the manager app available to non-localhost clients?

> in our developer network was compromised today by a scanning bot 
> which deployed a war file and then deleted the on disk file,
> before scanning for new hosts until the IDS detected it.

:(

> Obviously this is not a flaw in tomcat, but I was hoping someone
> could give me some pointers to where I might read a write-up of the
> payload, as I would be interested to know to what extent the bot
> took advantage of its root power.

Are you looking for a copy of the uploaded WAR file? If it was
deleted, then your only option is to track-down the deleted inode and
snoop the bits on the disk. I don't believe the manager performs any
auditing of the uploaded WAR files.

> The proc with all the connections was actually perl, and runnings 
> strings on a core  dump of that process reveals many perl stuff.
> (and also the very weak password list)
> 
> However googling these facts does not seem to be helping that much,
> any suggestions?

So you have the Perl script itself? Or, it's still running but not
available on the disk? Perl compiles scripts as it runs them, so you
may not be able to get the full-text of the script without some kind
of Perl-oriented forensic decompilation tool.

Sorry you got pwned. If you discover anything about the bot, let us
know. Maybe there's something we can do to help thwart future attacks
(though not running as root and not allowing non-localhost connections
are certainly reasonable things that can already be done).

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEUEARECAAYFAk+HAnkACgkQ9CaO5/Lv0PABfwCY4Uy7uvQn/oxV6VUAxaUmZS7a
DwCgjJg5Q/UbEqbRD9+V3GcwNQu6znc=
=183q
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233532-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 12 16:37:05 2012
Return-Path: <users-return-233532-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DC2FC9809
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 12 Apr 2012 16:37:04 +0000 (UTC)
Received: (qmail 88768 invoked by uid 500); 12 Apr 2012 16:37:01 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 88583 invoked by uid 500); 12 Apr 2012 16:37:01 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 88574 invoked by uid 99); 12 Apr 2012 16:37:01 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 16:37:01 +0000
Received: from localhost (HELO [192.168.23.9]) (127.0.0.1)
  (smtp-auth username markt, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 16:37:01 +0000
Message-ID: <4F8704AB.4010406@apache.org>
Date: Thu, 12 Apr 2012 17:36:59 +0100
From: Mark Thomas <markt@apache.org>
User-Agent: Mozilla/5.0 (Windows NT 5.2; WOW64; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: mod_jk - Firewall connection dropping
References: <1264858200.1427094.1334179052178.JavaMail.root@zimbra-prod-mbox-5.vmware.com> <4F85FDD9.1040204@christopherschultz.net> <ab72570f-7898-4ac5-846a-9bd4b8b9781c@email.android.com> <4F86F2A8.5000601@christopherschultz.net>
In-Reply-To: <4F86F2A8.5000601@christopherschultz.net>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

On 12/04/2012 16:20, Christopher Schultz wrote:
> On 4/12/12 4:37 AM, Mark Thomas wrote:

>> In short, disabling mod_jk keep-alive frequently has no 
>> noticeable performance impact (some customers of mine reported a 
>> performance improvement!)
> 
> That sounds suspicious to me.

Not really. If cpong/cping isn't set up correctly and you are taking
Tomcat hosts up and down regularly (or the hosts are failing to
respond for other reasons) then without keep-alive disabled some
requests are going to get delayed by a timeout before httpd retries
another Tomcat instance. Those timeouts could impact the average
response time.

A correctly configured mod_jk setup should perform about the same with
or without keep-alive. The point is that without keep-alive the config
is usually far easier to get right.

Mark

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.9 (MingW32)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iQIcBAEBAgAGBQJPhwSrAAoJEBDAHFovYFnndpgP/jhHXv5H8SMl+uE+3Wppp/2Z
TQKG4HtqAtdcXi/yyYYro0t3BzknekUDVEX39qIFdDrBK1ogwZc6/bAZhrXGo+wx
dCwPdm1m34RpXGF5mWBYqVHdx/RvmgrKMM/Wt/P58nGL1NU7tOvbupPbtZ1CNig7
t/FCzMSxl7V0DzNHgtxlfOfWBNP8te2Eu9LsBxKNyZbUOEf6/yOoXZlGozIPdKKB
7/23FCnwHtAE2vLh0kvpTNlv0f6hj2Rgx3s/XX+Snc7LLbqRyzWOyvkEn0PrfV+5
Mgl4F+pcShd35CeKRD4+g0VdteJULdeT0LO816hRKDO7e/UNr/CVTh5xsXHVjwdK
59lVtACoNEysy/Tucm28ZEfIIosjRKvseEOhRhHZKWiAOXoL7++XYUkdixaiZ5ZX
c40FQ225H38emQb10wTEuhFCrqAZWFDlR+6W0ySL391lFXHuiPEGgekDRzNAm6Uh
Gy3uczA6q4NldnN2SvCr/8mx+iawkV+kLgsdIAluIKg/K0/yiT7+S6QUpAMgeyc5
z2RtLdfpMeqGW8mvf3QDa+z9ojMy3nUK7ukgB3ENBgOcpuJNSW1zYjXmRmMGJALr
FZ50aFhn+FLVwMd6OIggo/4faQ1hr4SrZTMlmnb6BNHMi0Oy3HK7yqV5g0pTKq8h
11WtLxb707rXbBd3kpAU
=Qnhw
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233533-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 12 16:45:26 2012
Return-Path: <users-return-233533-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E0BC09BD9
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 12 Apr 2012 16:45:26 +0000 (UTC)
Received: (qmail 19275 invoked by uid 500); 12 Apr 2012 16:45:23 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 19127 invoked by uid 500); 12 Apr 2012 16:45:23 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 19118 invoked by uid 99); 12 Apr 2012 16:45:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 16:45:23 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [76.96.62.96] (HELO qmta09.westchester.pa.mail.comcast.net) (76.96.62.96)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 16:45:15 +0000
Received: from omta06.westchester.pa.mail.comcast.net ([76.96.62.51])
	by qmta09.westchester.pa.mail.comcast.net with comcast
	id x4kg1i00516LCl0594kvj3; Thu, 12 Apr 2012 16:44:55 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta06.westchester.pa.mail.comcast.net with comcast
	id x4kv1i00J38FjT13S4kvox; Thu, 12 Apr 2012 16:44:55 +0000
Message-ID: <4F870686.3000704@christopherschultz.net>
Date: Thu, 12 Apr 2012 12:44:54 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Intermittent "ServletException - Unable to compile class for
 JSP" for a struts-1.3.10 web-app with Tomcat 7.0.26/7.0.27
References: <CAJgUgf7VMFdOfHgQCwoeDNeRjtGLGbKiqbPkO4JCPT1FnGBWJQ@mail.gmail.com> <4F85E298.8090604@christopherschultz.net> <CAJgUgf4kPxKMOYqTFGNapT2YbSSN4DF_L01jaB342zL5qDyexA@mail.gmail.com> <CABzHfVmB84SvbFVyp9c_Df9DoC4RLjYY5P_rUsj9shSGO5fySw@mail.gmail.com>
In-Reply-To: <CABzHfVmB84SvbFVyp9c_Df9DoC4RLjYY5P_rUsj9shSGO5fySw@mail.gmail.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Konstantin,

On 4/12/12 10:03 AM, Konstantin Kolinko wrote:
> What is the type and value of  _jspx_dependants field?

Ashima has sent the original JSP and the translated .java file to me.
The interesting parts are here:

  // Starting at line 21 (filenames redacted):
  private static java.util.Map<java.lang.String,java.lang.Long>
_jspx_dependants;


  static {
    _jspx_dependants = new
java.util.HashMap<java.lang.String,java.lang.Long>(12);
    _jspx_dependants.put("/WEB-INF/tld/a.tld",
Long.valueOf(1333128256000L));
    _jspx_dependants.put("/WEB-INF/pages/b.jsp",
Long.valueOf(1333128256000L));
    _jspx_dependants.put("/WEB-INF/tags/c.tag",
Long.valueOf(1333128256000L));
    _jspx_dependants.put("/WEB-INF/tld/d.tld",
Long.valueOf(1333128256000L));
    _jspx_dependants.put("/WEB-INF/tld/e.tld",
Long.valueOf(1333128256000L));
    _jspx_dependants.put("/WEB-INF/tags/f.tag",
Long.valueOf(1333128256000L));
    _jspx_dependants.put("/WEB-INF/tld/g.tld",
Long.valueOf(1333128256000L));
    _jspx_dependants.put("/WEB-INF/tld/h.tld", Long.valueOf(-1L));
    _jspx_dependants.put("/WEB-INF/tld/i.tld",
Long.valueOf(1333128256000L));
    _jspx_dependants.put("/WEB-INF/tld/j.tld",
Long.valueOf(1333128256000L));
    _jspx_dependants.put("/WEB-INF/tld/k.tld",
Long.valueOf(1333128256000L));
    _jspx_dependants.put("/WEB-INF/tld/l.tld",
Long.valueOf(1333128256000L));
  }

  // ...

  // Line 49:
  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

That looks perfectly legit to me.

> It seems that it complaints that that field returned by the method
> is not Map<String,Long>.
> 
>> Can you confirm that after you try to access the .jsp from the 
>> browser, the timestamp on the .java file changes?
> 
> Timestamp does not matter, because in latest Tomcat 7 it is set to 
> match the original file.
> 
> There is a comment at the top of generated java file that mentions 
> this fact and the actual time of generation.

/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/7.0.26
 * Generated at: 2012-04-12 14:47:59 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */

> 3. Deletion of recently created files on Windows can be impeded by 
> antivirus scanners. (Subversion client users on Windows are
> sometimes complaining about that. It depends on a/v product being
> used.).

It's weird that the .classtmp file does not appear to exist, either.

> Maybe Tomcat can rename the old file before deleting it. IIRC
> Windows allows renaming files that are open for reading, but has 
> problems with deleting them.

The code definitely creates the new file, then deletes, then renames.
Since the delete fails, the rename can't occur. Strange thing is that
the file that should be re-named (.classtmp) does not exist according
to OP.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+HBoYACgkQ9CaO5/Lv0PBQJQCeN1XqxMEBjKh+QtTKDEb9Wi01
DIUAoKauJOoOj4+KW3ATIJioAJLhp7N7
=sHS8
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233534-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 12 16:50:13 2012
Return-Path: <users-return-233534-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C7C269EF5
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 12 Apr 2012 16:50:13 +0000 (UTC)
Received: (qmail 40289 invoked by uid 500); 12 Apr 2012 16:50:10 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 40145 invoked by uid 500); 12 Apr 2012 16:50:10 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 40136 invoked by uid 99); 12 Apr 2012 16:50:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 16:50:10 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [76.96.62.32] (HELO qmta03.westchester.pa.mail.comcast.net) (76.96.62.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 16:50:03 +0000
Received: from omta03.westchester.pa.mail.comcast.net ([76.96.62.27])
	by qmta03.westchester.pa.mail.comcast.net with comcast
	id x4ex1i0010bG4ec534pj9v; Thu, 12 Apr 2012 16:49:43 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta03.westchester.pa.mail.comcast.net with comcast
	id x4pi1i00c38FjT13P4pivn; Thu, 12 Apr 2012 16:49:43 +0000
Message-ID: <4F8707A5.1020305@christopherschultz.net>
Date: Thu, 12 Apr 2012 12:49:41 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Intermittent "ServletException - Unable to compile class for
 JSP" for a struts-1.3.10 web-app with Tomcat 7.0.26/7.0.27
References: <CAJgUgf7VMFdOfHgQCwoeDNeRjtGLGbKiqbPkO4JCPT1FnGBWJQ@mail.gmail.com> <4F85E298.8090604@christopherschultz.net> <CAJgUgf4kPxKMOYqTFGNapT2YbSSN4DF_L01jaB342zL5qDyexA@mail.gmail.com> <CABzHfVmB84SvbFVyp9c_Df9DoC4RLjYY5P_rUsj9shSGO5fySw@mail.gmail.com> <4F870686.3000704@christopherschultz.net>
In-Reply-To: <4F870686.3000704@christopherschultz.net>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Konstantin,

On 4/12/12 12:44 PM, Christopher Schultz wrote:
> Ashima has sent the original JSP and the translated .java file to
> me. The interesting parts are here:

Also, there isn't much in the way of directives in the original JSP.
First, some declarations:

<%@ page trimDirectiveWhitespaces="true" %>
<%@ include file="/WEB-INF/pages/taglibs.jsp" %>

Then after that, it's just using standard JSTL tags. The page looks
fairly clean to me.

If there is A/V in the mix, there might be a problem writing, then
reading, then deleting, then re-naming, etc. all in a short period of
time... it might just be an I/O problem.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+HB6UACgkQ9CaO5/Lv0PCZlgCdHbrAsZGJq/8szkGiukOcOwf5
n24AnjeE0wyTSX0L728wGASYudYhZzW/
=eAxg
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233535-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 12 18:29:57 2012
Return-Path: <users-return-233535-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0A2E39793
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 12 Apr 2012 18:29:57 +0000 (UTC)
Received: (qmail 53881 invoked by uid 500); 12 Apr 2012 18:29:53 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 53782 invoked by uid 500); 12 Apr 2012 18:29:53 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 53773 invoked by uid 99); 12 Apr 2012 18:29:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 18:29:53 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [76.96.62.80] (HELO qmta08.westchester.pa.mail.comcast.net) (76.96.62.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 18:29:45 +0000
Received: from omta14.westchester.pa.mail.comcast.net ([76.96.62.60])
	by qmta08.westchester.pa.mail.comcast.net with comcast
	id x6Ud1i0061HzFnQ586VRxw; Thu, 12 Apr 2012 18:29:25 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta14.westchester.pa.mail.comcast.net with comcast
	id x6VQ1i00x38FjT13a6VQCU; Thu, 12 Apr 2012 18:29:24 +0000
Message-ID: <4F871F03.3000900@christopherschultz.net>
Date: Thu, 12 Apr 2012 14:29:23 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: parallel deployment activation of new version
References: <15D3435601304A49A5E13D0825711B6128CC5706@EXCHANGE07.webde.local>
In-Reply-To: <15D3435601304A49A5E13D0825711B6128CC5706@EXCHANGE07.webde.local>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Christoph,

On 4/12/12 2:42 AM, Christoph Maser wrote:
> is there a way to externally influence the switch between versions
> with the new parallel deployment method. As I understand it tomcat 
> automatically switches to the new version for new requests as soon
> as the context with the new version is started.

It's worth mentioning that requests bound to sessions that were
associated with the "old" version will continue to be serviced by the
old version of the webapp.

You said "new requests" but "new sessions" is more accurate.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+HHwMACgkQ9CaO5/Lv0PBv/QCfa4sDQYyAFF11l8Bd6tfwYFv7
eZYAoI7MDMJbw3aUVsTqtrb+b2nwYvlx
=g3yu
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233536-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 12 18:33:52 2012
Return-Path: <users-return-233536-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 66B799A39
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 12 Apr 2012 18:33:52 +0000 (UTC)
Received: (qmail 66924 invoked by uid 500); 12 Apr 2012 18:33:49 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 66850 invoked by uid 500); 12 Apr 2012 18:33:49 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 66840 invoked by uid 99); 12 Apr 2012 18:33:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 18:33:49 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [76.96.62.17] (HELO qmta10.westchester.pa.mail.comcast.net) (76.96.62.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 18:33:42 +0000
Received: from omta17.westchester.pa.mail.comcast.net ([76.96.62.89])
	by qmta10.westchester.pa.mail.comcast.net with comcast
	id x5y21i0041vXlb85A6ZNPM; Thu, 12 Apr 2012 18:33:22 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta17.westchester.pa.mail.comcast.net with comcast
	id x6ZM1i01T38FjT13d6ZNra; Thu, 12 Apr 2012 18:33:22 +0000
Message-ID: <4F871FF0.8070109@christopherschultz.net>
Date: Thu, 12 Apr 2012 14:33:20 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Using ServletContainerInitializer for 2.5 applications
References: <CAJMhK2+38h0LdKUVemA6JNaEHqm8q+mc3ohAj9hXThvrBQh7yQ@mail.gmail.com> <5d1d2822faf2e2ae22f9eff15f3afd12@tau.ceti.pl> <CAJMhK2JS51iEHh6Rc2Dd0oWP2T1yFoYfLanno--f-T70XZribA@mail.gmail.com> <99C8B2929B39C24493377AC7A121E21FB016FD1231@USEA-EXCH8.na.uis.unisys.com> <CAJMhK2+1Ex0JqiVzrpbLNprMo9wk5VQ3tOaJAVN4fv_3Gq0q0A@mail.gmail.com> <4847057902696949195@unknownmsgid> <CAFmzfTWYPASufMOoEo2swYJo8NEZhZUE=eT4Tf4ZbdK56fAwGw@mail.gmail.com> <826e559f-bd76-4489-af42-53378ea203e4@email.android.com>
In-Reply-To: <826e559f-bd76-4489-af42-53378ea203e4@email.android.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Mark,

On 4/12/12 8:58 AM, markt@apache.org wrote:
> If you want to use Servlet 3.0 features then you need to declare
> 3.0 in the web.xml.

+1

Since the spec is (almost entirely) backward-compatible, this shouldn't
represent an undue hardship. If you have to support customers who
don't necessarily have a 3.0-spec container available, then you'll
have to find another way to satisfy your requirement.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+HH/AACgkQ9CaO5/Lv0PDLRACfVApXPTtjeyTIBsNVrarNfXto
mlsAnjThrgVIKKV1ZnoN82RA5/nCG+Jc
=13Wk
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233537-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 12 18:58:33 2012
Return-Path: <users-return-233537-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D629A987C
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 12 Apr 2012 18:58:33 +0000 (UTC)
Received: (qmail 62785 invoked by uid 500); 12 Apr 2012 18:58:30 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 62553 invoked by uid 500); 12 Apr 2012 18:58:30 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 62543 invoked by uid 99); 12 Apr 2012 18:58:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 18:58:30 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of Christoph.Maser@1und1.de designates 212.227.126.201 as permitted sender)
Received: from [212.227.126.201] (HELO mxintern.schlund.de) (212.227.126.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 18:58:22 +0000
Received: from [10.2.3.78] (helo=exnlb03.webde.local)
	by mxintern.schlund.de with esmtps (TLS1.0:RSA_AES_128_CBC_SHA1:16)
	(envelope-from <Christoph.Maser@1und1.de>)
	id 1SIPDW-000eor-MK; Thu, 12 Apr 2012 20:58:02 +0200
Received: from exchange07.webde.local ([169.254.1.206]) by exnlb03.webde.local
 ([::1]) with mapi; Thu, 12 Apr 2012 20:58:02 +0200
From: Christoph Maser <Christoph.Maser@1und1.de>
To: "chris@christopherschultz.net" <chris@christopherschultz.net>
CC: "users@tomcat.apache.org" <users@tomcat.apache.org>
Date: Thu, 12 Apr 2012 20:58:01 +0200
Subject: Re: parallel deployment activation of new version
Thread-Topic: parallel deployment activation of new version
Thread-Index: Ac0Y3i7mIUtoHQRVQi6CzAyiK+MX+w==
Message-ID: <15D3435601304A49A5E13D0825711B6128CC5717@EXCHANGE07.webde.local>
References: <15D3435601304A49A5E13D0825711B6128CC5706@EXCHANGE07.webde.local>
 <4F871F03.3000900@christopherschultz.net>
In-Reply-To: <4F871F03.3000900@christopherschultz.net>
Accept-Language: de-DE
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Virus-Scanned: Symantec AntiVirus Scan Engine
X-UI-Msg-Verification: 5399ffdaa46ef5d26c2d4a0b2b583882

QW0gRG9ubmVyc3RhZywgZGVuIDEyLjA0LjIwMTIsIDE0OjI5IC0wNDAwIHNjaHJpZWIgQ2hyaXN0
b3BoZXIgU2NodWx0ejoKPiBJdCdzIHdvcnRoIG1lbnRpb25pbmcgdGhhdCByZXF1ZXN0cyBib3Vu
ZCB0byBzZXNzaW9ucyB0aGF0IHdlcmUKPiBhc3NvY2lhdGVkIHdpdGggdGhlICJvbGQiIHZlcnNp
b24gd2lsbCBjb250aW51ZSB0byBiZSBzZXJ2aWNlZCBieSB0aGUKPiBvbGQgdmVyc2lvbiBvZiB0
aGUgd2ViYXBwLgo+IAo+IFlvdSBzYWlkICJuZXcgcmVxdWVzdHMiIGJ1dCAibmV3IHNlc3Npb25z
IiBpcyBtb3JlIGFjY3VyYXRlLgo+IAo+IC1jaHJpcwo+IAo+IAoKWW91IGFyZSByaWdodCBvZiBj
b3Vyc2UgdGhhdCBpcyB3aGF0IEkgbWVhbnQuCgpDaHJpcwo=
DQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IHVzZXJzLXVuc3Vi
c2NyaWJlQHRvbWNhdC5hcGFjaGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1t
YWlsOiB1c2Vycy1oZWxwQHRvbWNhdC5hcGFjaGUub3JnDQoN

From users-return-233538-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 12 20:54:20 2012
Return-Path: <users-return-233538-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EF221C76E
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 12 Apr 2012 20:54:20 +0000 (UTC)
Received: (qmail 88499 invoked by uid 500); 12 Apr 2012 20:54:17 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 88448 invoked by uid 500); 12 Apr 2012 20:54:17 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 88438 invoked by uid 99); 12 Apr 2012 20:54:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 20:54:17 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of nicholas.williams@ul.com designates 65.55.88.11 as permitted sender)
Received: from [65.55.88.11] (HELO tx2outboundpool.messaging.microsoft.com) (65.55.88.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 20:54:10 +0000
Received: from mail168-tx2-R.bigfish.com (10.9.14.238) by
 TX2EHSOBE007.bigfish.com (10.9.40.27) with Microsoft SMTP Server id
 14.1.225.23; Thu, 12 Apr 2012 20:53:49 +0000
Received: from mail168-tx2 (localhost [127.0.0.1])	by
 mail168-tx2-R.bigfish.com (Postfix) with ESMTP id 0F8FF4203FF	for
 <users@tomcat.apache.org>; Thu, 12 Apr 2012 20:53:49 +0000 (UTC)
X-SpamScore: -24
X-BigFish: PS-24(zzbb2dI154cP9371I1415J1b0bM542M98dKzz1202hzz8275dhz2ei2a8h668h839h944hd25h)
X-Forefront-Antispam-Report: CIP:157.56.244.181;KIP:(null);UIP:(null);IPV:NLI;H:CH1PRD0410HT003.namprd04.prod.outlook.com;RD:none;EFVD:NLI
Received-SPF: neutral (mail168-tx2: 157.56.244.181 is neither permitted nor denied by domain of ul.com) client-ip=157.56.244.181; envelope-from=nicholas.williams@ul.com; helo=CH1PRD0410HT003.namprd04.prod.outlook.com ;.outlook.com ;
Received: from mail168-tx2 (localhost.localdomain [127.0.0.1]) by mail168-tx2
 (MessageSwitch) id 1334264026463420_16010; Thu, 12 Apr 2012 20:53:46 +0000
 (UTC)
Received: from TX2EHSMHS031.bigfish.com (unknown [10.9.14.245])	by
 mail168-tx2.bigfish.com (Postfix) with ESMTP id 5A1FF4401AA	for
 <users@tomcat.apache.org>; Thu, 12 Apr 2012 20:53:46 +0000 (UTC)
Received: from CH1PRD0410HT003.namprd04.prod.outlook.com (157.56.244.181) by
 TX2EHSMHS031.bigfish.com (10.9.99.131) with Microsoft SMTP Server (TLS) id
 14.1.225.23; Thu, 12 Apr 2012 20:53:44 +0000
Received: from CH1PRD0410MB369.namprd04.prod.outlook.com ([169.254.6.77]) by
 CH1PRD0410HT003.namprd04.prod.outlook.com ([10.255.147.38]) with mapi id
 14.16.0143.004; Thu, 12 Apr 2012 20:53:44 +0000
From: "Williams, Nick" <nicholas.williams@ul.com>
To: Tomcat Users List <users@tomcat.apache.org>
Subject: RE: Ant Tasks Question
Thread-Topic: Ant Tasks Question
Thread-Index: Ac0OGeZYtBXtzYITRdS0YtmHgUALEQAP/LrgAqUT2IA=
Date: Thu, 12 Apr 2012 20:53:43 +0000
Message-ID: <7CF0788AAB53854AB15567D68F419602A3CC3A@CH1PRD0410MB369.namprd04.prod.outlook.com>
References: <00c82ddd5a8b1fb9cb75b0c98b39598d@mail.gmail.com>
 <4F7A0C98.9080101@christopherschultz.net>
 <a5e99375feec6f40641a51062ebcc411@mail.gmail.com>
 <4F7B0322.8020903@christopherschultz.net>
 <244034c1c24cda74922a5e728a8b53a5@mail.gmail.com>
In-Reply-To: <244034c1c24cda74922a5e728a8b53a5@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-originating-ip: [67.90.155.66]
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-OriginatorOrg: ul.com

FYI, effective immediately this (nicholas.williams@ul.com) is my new email =
address. I can no longer be reached at nicholas.williams@puresafety.com.

Nick


-----Original Message-----
From: Nick Williams [mailto:nicholas.williams@puresafety.com]
Sent: Tuesday, April 03, 2012 4:57 PM
To: Tomcat Users List
Subject: RE: Ant Tasks Question

-----Original Message-----
From: Christopher Schultz [mailto:chris@christopherschultz.net]
Sent: Tuesday, April 03, 2012 9:03 AM
To: Tomcat Users List
Subject: Re: Ant Tasks Question

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Nick,

On 4/2/12 5:43 PM, Nick Williams wrote:
> As for the ant-i-fication of the JspC compiler, I, too get the
> impression that it was rather an afterthought. However, it is not
> necessary or even that common for tasks to be called *Task, as
> Konstantin pointed out. Most of them /aren't/ named *Task.

I was mostly gathering corroborating evidence to suggest that JspC being an=
 Ant task was not its original intent: it's mostly geared towards being a C=
LI tool and has some support for Ant slapped-onto it.
I'm not sure why Konstantin got so agitated about my comments about the cla=
ss name: it's obviously the least significant part of my argument.

> I'm aware that I can translate and compile as separate tasks, but
> that's not what I was looking for. I actually DO want to translate and
> compile with the same task, because I want the Eclipse compiler
> shipped with Tomcat to be used for compiling the JSPs.

Well, you can already do that from within JspC (though the CLI doesn't actu=
ally use it) by setting "compiler" to either "org.apache.jasper.compiler.JD=
TCompiler" or "org.apache.jasper.compiler.AntCompiler" (or really anything =
that implements org.apache.jasper.compiler.Compiler). The default is to use=
 the JDTCompiler when the translate and compile steps are performed togethe=
r. I have no idea how to invoke the JDT compiler from the command-line give=
n just the .jar file that contains it: I suspect you'd be able to poke-arou=
nd and figure out how to do that as a separate Ant task, which might give y=
ou more flexibility.

> But your comment helps me out in expressing my desire: I feel like it
> should be able to fork and use whatever JVM I specify for executing
> the JspC task, whether I'm using JspC for translation and compilation
> or just translation.

Fair enough. Just because I'm curious: why do you care which JVM is being u=
sed for the translation step?

> I agree that fork support should be expected of a nice player in the
> Ant ecosystem.

I'll have to read the code for some of the built-in Ant tasks to see how th=
at's traditionally done. It might make sense for the Jasper and task to bec=
ome a separate class from JspC, even if it heavily utilizes JspC itself.
Ideally, JspC would be "merely" the CLI wrapper around a Compiler and a sep=
arate class would handle the Ant-related stuff. I would even buy a common s=
uperclass for the two, but it's often tough to tell what is there to suppor=
t Ant and what isn't.

> Maybe what we really need, instead of attempting to retrofit JspC to
> be more Task-y, is add a new Task to o.a.catalina.ant (JasperTask?
> JspCompileTask?) and trying to follow some better practices with the
> new practice. What are the community thoughts on this? I can see both
> upsides and downsides to doing this.

Heh. I should have read this first. I obviously agree.

> I'll file enhancement requests in Bugzilla later today or tomorrow for
> the namespace and forking issues.

I'll look for those.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk97AyIACgkQ9CaO5/Lv0PCWjwCeIIJh0Qp9iooqN0ZRa23YOI55
GUwAoJGNiPlt/IO7r2PffDcEKKtDgdTu
=3DqORp
-----END PGP SIGNATURE-----

---------------------------------------------------------------------


I have filed issues 53031 and 53032 to go along with 53011 and 53012 that I=
 filed earlier. I look forward to working on them.

I don't really care what JVM is being used for the translation phase. The r=
eason I care what JVM is being used for the /compilation/ phase is that our=
 build machine has multiple JVMs (Java 6 32-bit, Java 7 32-bit, Java 6 64-b=
it, Java 7 64-bit). Our Ant script should be run only using the Java 7 64-b=
it JVM. However, everything else in the build script (java, javac, junit, e=
tc.) is configured to explicitly use the Java 7 JVM, so that if anyone ever=
 messed up the build agent and switched it to using Java 6 to run Ant, ever=
ything would still compile under Java 7. Except that, in this case, the Jas=
per task would suddenly be running under Java 6.

This isn't even a big issue for us, because if somebody messes up the build=
 configuration, that just needs to be fixed. I understand that I can separa=
te the translation phase from the compilation phase. But I want the compila=
tion phase to use the Eclipse compiler, just like if it was running under T=
omcat, and javac can't be configured to use the Eclipse compiler (that I kn=
ow of).
Like I said, it's not even a big deal for us, but it seems like, in the spi=
rit of being like java and javac and junit and other language-dependent tas=
ks, it should support providing and alternative JVM (and thus forking).
This will likely be encompassed by the changes necessary for issue 53031 (t=
he forking issue).

Unless you have any objections, I'm going to move further discussions about=
 53011, 53012, 53031 and 53032 to the developer's list ("Improving Ant Task=
 for JSP Compilation"), to keep from polluting the users list with too much=
 specification information.

Nick

This e-mail may contain privileged or confidential information. If you are =
not the intended recipient: (1) you may not disclose, use, distribute, copy=
 or rely upon this message or attachment(s); and (2) please notify the send=
er by reply e-mail, and then delete this message and its attachment(s). Und=
erwriters Laboratories Inc. and its affiliates disclaim all liability for a=
ny errors, omissions, corruption or virus in this message or any attachment=
s.


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233539-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 12 22:14:21 2012
Return-Path: <users-return-233539-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E10739BCE
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 12 Apr 2012 22:14:21 +0000 (UTC)
Received: (qmail 38946 invoked by uid 500); 12 Apr 2012 22:14:18 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 38794 invoked by uid 500); 12 Apr 2012 22:14:18 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 38785 invoked by uid 99); 12 Apr 2012 22:14:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 22:14:18 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of knst.kolinko@gmail.com designates 209.85.213.173 as permitted sender)
Received: from [209.85.213.173] (HELO mail-yx0-f173.google.com) (209.85.213.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 22:14:11 +0000
Received: by yenr5 with SMTP id r5so1737679yen.18
        for <users@tomcat.apache.org>; Thu, 12 Apr 2012 15:13:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=BM/jFc3FYeNldleEef5m5nyv5gb/9YlHp5bde46gmco=;
        b=E64fLuv9BLxH00RQOgBm/sjUZ7YmX2P/vHc1P8uv796O+8J3QbbpOnPMXqLxCkHw2R
         eFrxq1v3tS/G6S45OMDz0ozKk2VhyOCnmvGn9heofuWbU2Nm+mKs/SXGjU6zeQJa+kR9
         qkrXZ+XBfFlWdQX1l2zEQh//S90b4vUDBsMHAk6mVMRRaAmC/tJmlDtgrx3MgU62Y8it
         giO8pysoqGUgiEy6T+5E17UFgpQxsWCoJwr10zuvrDEgZr5Ydauyq4jvwmkktYyk8cVt
         ddGihB/Imyy43D7/1uLhgZXNngd54OhJd5H6soIooCLG/hEdjrkZM8iocBgI1OsqsY4p
         WfCg==
MIME-Version: 1.0
Received: by 10.101.11.28 with SMTP id o28mr1177631ani.68.1334268830688; Thu,
 12 Apr 2012 15:13:50 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Thu, 12 Apr 2012 15:13:50 -0700 (PDT)
In-Reply-To: <CABzHfVnbCw6SANWKEj3C34OjftjXSZS-bdj4xA3vqoM_avRD3A@mail.gmail.com>
References: <C145BA96AD0C234E9319A75A4FCDA5792BF2342461@UK-CRO-s004.tradar.com>
	<CABzHfVn4kz73ua3SS_0TtftHyg7hnQvF_rEYJHUp_bbZK2w0uw@mail.gmail.com>
	<C145BA96AD0C234E9319A75A4FCDA5792BF2342619@UK-CRO-s004.tradar.com>
	<CABzHfVnbCw6SANWKEj3C34OjftjXSZS-bdj4xA3vqoM_avRD3A@mail.gmail.com>
Date: Fri, 13 Apr 2012 02:13:50 +0400
Message-ID: <CABzHfV=FGBnyaRAcp7H4Lwe3pZRReEAwk2mQ7S1y2m7QKDgfwQ@mail.gmail.com>
Subject: Re: Problems uploading huge files >2GB to Tomcat app.
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

2012/4/10 Konstantin Kolinko <knst.kolinko@gmail.com>:
> 2012/4/10 Nick Porter <nick.porter@tradar.com>:
>>
>> [NP] Yes. I can fathom no pattern to them. In fact, the only way I can a=
ctually see them is to packet trace the HTTP exchange.
>
> You do not have AccessLogValve configured?!
>
> I did the following to test how the standard Manager application
> handles it. =A0In 6.0.x and then in current 7.0.x.
>
> 1. Configured AccessLogValve in server.xml as following, to print
> content-length headers of request and response:
>
> =A0<Valve className=3D"org.apache.catalina.valves.AccessLogValve" directo=
ry=3D"logs"
> =A0 prefix=3D"localhost_access_log." suffix=3D".txt"
> =A0 pattern=3D'%h %l %u %t "%r" %s %b in:[%{content-length}i]
> out:[%{content-length}o]'
> =A0/>
>
> 2. Prepared a two files by concatenating several copies of a zip
> archive and renaming it to *.war.
>
> "test.war" is 127,586,991 bytes
> "test1.war" is 2,314,844,070 bytes
>
> 3. Started Tomcat, logged in into manager and tried to upload the
> files as new web applications.
>
> I am using Firefox 11.0, IE 8.0 both on Windows XP.
>
>
> The results:
> 1). Uploading test.war (127Mb) in Firefox 11
> (...)
> So everything is OK.
>
>
> 2). Uploading test1.war (>2Gb):
>
> Both Tomcat 6 and Tomcat 7 close request immediately, responding with
> status 400.
>
> Looking into access log I see wrong value of content-length header
> from the request.
> The value is different between Firefox and IE, but both are wrong,
> being negative.
>(...)
>

I've tested uploading the >2Gb file (test1.war) into Tomcat Manager
with current Google Chrome.  Result: this browser handles it OK.

I had to change web.xml in manager app in Tomcat 7 to allow upload of
such a file. That is:
[[[
    <multipart-config>
      <max-file-size>-1</max-file-size>
      <max-request-size>-1</max-request-size>
      <file-size-threshold>0</file-size-threshold>
    </multipart-config>
]]]

Result in Tomcat 6 - Failure. The manager displays error message:

FAIL - Deploy Upload Failed, Exception: the request was rejected
because it's size is unknown

In manager.<date>.log file:
[[[
12.04.2012 16:21:33 org.apache.catalina.core.ApplicationContext log
SEVERE: HTMLManager: FAIL - Deploy Upload Failed, Exception: the
request was rejected because it's size is unknown
org.apache.tomcat.util.http.fileupload.FileUploadBase$UnknownSizeException:
the request was rejected because it's size is unknown
	at org.apache.tomcat.util.http.fileupload.FileUploadBase.parseRequest(File=
UploadBase.java:267)
	at org.apache.catalina.manager.HTMLManagerServlet.doPost(HTMLManagerServle=
t.java:190)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
]]]

The code there is based on old version of commons fileupload and does
the following:
(FileUploadBase.java:267)

        int requestSize =3D req.getContentLength();
        if (requestSize =3D=3D -1)
        {
            throw new UnknownSizeException(
                "the request was rejected because it's size is unknown");
        }

This code is used in the Manager application only,  so I treat it as
WONTFIX, until there is a real need to deploy 2Gb wars through the
manager. ;)  I am just saying that some old version of Commons
Fileupload did have an issue there.


In Tomcat 7 the code is newer and does handle "-1" properly. There it
more important, because that code is used to implement file upload
support for Servlet 3.0 applications.

In Tomcat 7 manager app  (with the above mentioned configuration
change) the upload succeeded and the archive was unpacked.

Access log:
Tomcat 6:
[[[
127.0.0.1 - tomcat [12/Apr/2012:16:21:33 +0400] "POST
/manager/html/upload?org.apache.catalina.filters.CSRF_NONCE=3D3F10D7BD7F9D5=
E31B56A4DB4EF35D96C
HTTP/1.1" 200 14661 in:[2314844272] out:[-]
]]]

Tomcat 7:
[[[
127.0.0.1 - tomcat [12/Apr/2012:17:22:34 +0400] "POST
/manager/html/upload?org.apache.catalina.filters.CSRF_NONCE=3DE74BBB57E1F12=
736A9D0357B153BD4A7
HTTP/1.1" 200 17519 in:[2314844272] out:[-]
]]]

For reference:
File size was: 2314844070 bytes
Request size from Chrome was: 2314844272 bytes (=3D 0x89F9B870 =3D -1980123=
024)
Overhead from multipart/form-data was 202 bytes.


(Regarding broken Content-Length in IE: maybe it allocates only 10
chars for their number buffer, so when '-' occupies one character the
whole number gets truncated. Well, a negative value is a garbage
anyway).

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233540-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 12 22:55:03 2012
Return-Path: <users-return-233540-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 74E499793
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 12 Apr 2012 22:55:03 +0000 (UTC)
Received: (qmail 49490 invoked by uid 500); 12 Apr 2012 22:55:00 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 49445 invoked by uid 500); 12 Apr 2012 22:55:00 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 49436 invoked by uid 99); 12 Apr 2012 22:55:00 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 22:55:00 +0000
Received: from localhost (HELO mail-gy0-f173.google.com) (127.0.0.1)
  (smtp-auth username olamy, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 Apr 2012 22:54:59 +0000
Received: by ghrr14 with SMTP id r14so1742271ghr.18
        for <users@tomcat.apache.org>; Thu, 12 Apr 2012 15:54:58 -0700 (PDT)
Received: by 10.236.144.133 with SMTP id n5mr9750yhj.54.1334271298723; Thu, 12
 Apr 2012 15:54:58 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.101.107.20 with HTTP; Thu, 12 Apr 2012 15:54:37 -0700 (PDT)
In-Reply-To: <80D886CA-1FC6-4231-9D10-ACA8DD2A37D3@gmail.com>
References: <51200CB4-D325-4019-A12A-5A0FDCC8987E@me.com> <0B75C850-2329-47A0-AEAF-A6B7CC14D35F@gmail.com>
 <CAPoyBqRbT3w_C=3DEomct-hRkKsVpUTBaEd9pjTFn3r=McLMfg@mail.gmail.com>
 <5E45D237-38F2-473F-A5FB-9D6367F1DDD6@gmail.com> <CAPoyBqTKZ3vABf6zqo2g9WXEa7yec1kVerSY3uwb8C8bOrLyrw@mail.gmail.com>
 <C24FEA44-BB75-4EE1-A4E2-81FDD4F84FB3@gmail.com> <CAPoyBqRO=i4sWqRxjOdj_J4Bky=mFhJD_d9MVxPPMCXAzP-gWA@mail.gmail.com>
 <80D886CA-1FC6-4231-9D10-ACA8DD2A37D3@gmail.com>
From: Olivier Lamy <olamy@apache.org>
Date: Fri, 13 Apr 2012 00:54:37 +0200
Message-ID: <CAPoyBqTw6LMYvgd8BPBbocmPLEYKRtiNOvTa=o96AtF4==10dg@mail.gmail.com>
Subject: Re: Tomcat 7 Maven plugin: deploy fails with tomcatManager status
 code:401, ReasonPhrase:Unauthorized
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hello,
Currently, I cannot reproduce.
Do you have more logs/details from your tomcat instance ?
Especially: $CATALINA_HOME/logs/localhost_access_log.yyyy-MM-dd.txt
and entries corresponding to the deployment
Are you passing tru a http server which is proxying/redirecting to the
Tomcat instance ?
What kind of deployment are you doing ? one with contextFile parameter ?


2012/4/6 Matt Munz <matt.m.munz@gmail.com>:
> Olivier,
>
> =A0OK. =A0Thanks. =A0So with the 2.0-SNAPSHOT version I am getting the sa=
me error (HTTP 401). [1] =A0Interestingly, the plugin output makes it look =
like the WAR file was uploaded but when I visit the Manager, I can see that=
 it is not deployed.
>
> =A0Do you have any thoughts about what I can do to debug this further? =
=A0I'd really like to get this working.
>
> [1]
> [INFO] Deploying war to http://localhost:8080/
> Uploading: http://localhost:8080/manager/html/deploy?path=3D%2F
> Uploaded: http://localhost:8080/manager/html/deploy?path=3D%2F (9555 KB a=
t 33760.1 KB/sec)
> [INFO] tomcatManager status code:401, ReasonPhrase:Unauthorized
>
> =A0Matt
>
>
> On Apr 4, 2012, at 12:23 AM, Olivier Lamy wrote:
>
>> Hello,
>> Have a look here:
>> http://tomcat.apache.org/maven-plugin-2.0-SNAPSHOT/snapshot-test.html
>>
>> 2012/4/4 Matt Munz <matt.m.munz@gmail.com>:
>>> Olivier,
>>>
>>> =A0I made that change to settings.xml and now I'm getting a different e=
rror. [1] =A0How can I find out where this plugin is stored? =A0Perhaps the=
re is a problem with the repository or my repository configuration.
>>>
>>> [1]
>>> [WARNING] The POM for org.apache.tomcat.maven:tomcat7-maven-plugin:jar:=
2.0-SNAPSHOT is missing, no dependency information available
>>> [WARNING] Failed to retrieve plugin descriptor for org.apache.tomcat.ma=
ven:tomcat7-maven-plugin:2.0-SNAPSHOT: Plugin org.apache.tomcat.maven:tomca=
t7-maven-plugin:2.0-SNAPSHOT or one of its dependencies could not be resolv=
ed: Failed to read artifact descriptor for org.apache.tomcat.maven:tomcat7-=
maven-plugin:jar:2.0-SNAPSHOT
>>> ...
>>> [WARNING] The POM for org.apache.tomcat.maven:tomcat7-maven-plugin:jar:=
2.0-SNAPSHOT is missing, no dependency information available
>>> ...
>>> [ERROR] Plugin org.apache.tomcat.maven:tomcat7-maven-plugin:2.0-SNAPSHO=
T or one of its dependencies could not be resolved: Failed to read artifact=
 descriptor for org.apache.tomcat.maven:tomcat7-maven-plugin:jar:2.0-SNAPSH=
OT: Could not find artifact org.apache.tomcat.maven:tomcat7-maven-plugin:po=
m:2.0-SNAPSHOT -> [Help 1]
>>>
>>> =A0Matt Munz
>>>
>>> On Apr 2, 2012, at 11:48 PM, Olivier Lamy wrote:
>>>
>>>> Hello,
>>>> With version from codehaus manager url for tomcat7 is not correct.
>>>> (see http://mojo.codehaus.org/tomcat-maven-plugin/examples/deployment-=
tomcat7.html)
>>>>
>>>> Regarding the plugin prefix trouble, you have two solutions to use the
>>>> correct version:
>>>>
>>>> * use the full cli: mvn
>>>> org.apache.tomcat.maven:tomcat7-maven-plugin:2.0-SNAPSHOT:deploy
>>>> * configure your settings.xml with the entry
>>>>
>>>> =A0<pluginGroups>
>>>> =A0 =A0<pluginGroup>org.apache.tomcat.maven</pluginGroup>
>>>> =A0</pluginGroups>
>>>>
>>>>
>>>> HTH,
>>>> --
>>>> Olivier Lamy
>>>> Talend: http://coders.talend.com
>>>> http://twitter.com/olamy | http://linkedin.com/in/olamy
>>>>
>>>> 2012/4/3 Matt Munz <matt.m.munz@gmail.com>:
>>>>> Olivier,
>>>>>
>>>>> =A0After switching to 2.0-SNAPSHOT, I am still getting errors :( =A0F=
irst I got an error saying that the tomcat7 prefix was not found. [1] =A0Th=
en I tried "mvn =A0tomcat:deploy -Dusername=3DAdministrator -Dpassword=3Da"=
 and I got a 403 response from the manager.
>>>>>
>>>>> [1]
>>>>> [ERROR] No plugin found for prefix 'tomcat7' in the current project a=
nd in the plugin groups [org.apache.maven.plugins, org.codehaus.mojo] avail=
able from the repositories [local (/Users/mattmunz/.m2/repository), central=
 (http://repo1.maven.org/maven2)] -> [Help 1]
>>>>> [2]
>>>>> [ERROR] Failed to execute goal org.codehaus.mojo:tomcat-maven-plugin:=
1.1:deploy (default-cli) on project ...: Cannot invoke Tomcat manager: Serv=
er returned HTTP response code: 403 for URL: http://localhost:8080/manager/=
deploy?path=3D%2F...&war=3D -> [Help 1]
>>>>>
>>>>> =A0Matt
>>>>>
>>>>> On Apr 2, 2012, at 4:16 AM, Olivier Lamy wrote:
>>>>>
>>>>>> Hello,
>>>>>> I have fixed few things related to deployment in trunk.
>>>>>> Could you test with current 2.0-SNAPSHOT ?
>>>>>>
>>>>>> Thanks
>>>>>> --
>>>>>> Olivier Lamy
>>>>>> Talend: http://coders.talend.com
>>>>>> http://twitter.com/olamy | http://linkedin.com/in/olamy
>>>>>>
>>>>>> 2012/4/2 Matt Munz <matt.m.munz@gmail.com>:
>>>>>>> Hi all,
>>>>>>>
>>>>>>> =A0I'm trying to get the Tomcat 7 Maven plugin to work and I'm gett=
ing an authorization problem.[1] =A0Here's the command that I'm running. [2=
] =A0Here's the relevant snippet from tomcat-users.xml. [3] =A0From the bro=
wser I am able to log on to the Manager with this account without problems.
>>>>>>>
>>>>>>> =A0Any help you could provide would be greatly appreciated.
>>>>>>>
>>>>>>> [1] tomcatManager status code:401, ReasonPhrase:Unauthorized
>>>>>>> [2] mvn tomcat7:deploy -Dusername=3DAdministrator -Dpassword=3Da
>>>>>>> [3]
>>>>>>> <role rolename=3D"manager-gui"/>
>>>>>>> <role rolename=3D"manager-script"/>
>>>>>>> <role rolename=3D"manager-jmx"/>
>>>>>>> <user username=3D"Administrator" password=3D"a" roles=3D"manager-gu=
i,manager-script,manager-jmx"/>
>>>>>>>
>>>>>>> =A0Matt Munz
>>>>>>> =A0matt.m.munz@gmail.com
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>
>>>>>> --------------------------------------------------------------------=
-
>>>>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>>>>
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>
>>
>>
>>
>> --
>> Olivier Lamy
>> Talend: http://coders.talend.com
>> http://twitter.com/olamy | http://linkedin.com/in/olamy
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>> For additional commands, e-mail: users-help@tomcat.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>



--=20
Olivier Lamy
Talend: http://coders.talend.com
http://twitter.com/olamy | http://linkedin.com/in/olamy

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233541-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 13 01:46:51 2012
Return-Path: <users-return-233541-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 312A39B32
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 13 Apr 2012 01:46:51 +0000 (UTC)
Received: (qmail 44512 invoked by uid 500); 13 Apr 2012 01:46:47 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 44337 invoked by uid 500); 13 Apr 2012 01:46:47 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 44328 invoked by uid 99); 13 Apr 2012 01:46:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2012 01:46:47 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of matt.m.munz@gmail.com designates 209.85.160.45 as permitted sender)
Received: from [209.85.160.45] (HELO mail-pb0-f45.google.com) (209.85.160.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2012 01:46:42 +0000
Received: by pbcuo5 with SMTP id uo5so3262192pbc.18
        for <users@tomcat.apache.org>; Thu, 12 Apr 2012 18:46:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=from:mime-version:content-type:subject:date:in-reply-to:to
         :references:message-id:x-mailer;
        bh=bJ1X6Lj0ouQkkmtXqf4FAfRM52tbVFALugq3VHSF4mo=;
        b=wTTXOCoOTqb33QyMtqJecC4XEFBKITTFOdO2TiBdGIyWfnAyDwdIBLy+pz7kT1Ftwg
         kszr8r051Q00QQLBAlDa3Y+30HojCKPDo3ZezAL0G+6SIG2IhByWbtGiQdcooSN5KJik
         JkC4n33zdYTXUsqbIaD67YZ+965OImWnnPKVmaE6rYuIc20yhD0MN/aKxyeJowec2fUQ
         xxccbgqTp/5BNMuGODqFsO/yXenlj8BUnUUpJWJra4pmSbNoUpJyUrFJBGMA6j/Hgwud
         Gdy3bRah6krVUsz+zLEoDonLLa+xKu2V9aHSaCcCXe2MX0vXSqLIfur2AhpT3vGuEqhd
         ppHw==
Received: by 10.68.204.169 with SMTP id kz9mr409249pbc.78.1334281581864;
        Thu, 12 Apr 2012 18:46:21 -0700 (PDT)
Received: from [10.0.1.10] (adsl-99-102-133-251.dsl.pltn13.sbcglobal.net. [99.102.133.251])
        by mx.google.com with ESMTPS id n8sm7246139pba.20.2012.04.12.18.46.19
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 12 Apr 2012 18:46:20 -0700 (PDT)
From: Matt Munz <matt.m.munz@gmail.com>
Mime-Version: 1.0 (Apple Message framework v1084)
Content-Type: multipart/alternative; boundary=Apple-Mail-14--507907514
Subject: Re: Tomcat 7 Maven plugin: deploy fails with tomcatManager status code:401, ReasonPhrase:Unauthorized
Date: Thu, 12 Apr 2012 18:46:17 -0700
In-Reply-To: <CAPoyBqTw6LMYvgd8BPBbocmPLEYKRtiNOvTa=o96AtF4==10dg@mail.gmail.com>
To: "Tomcat Users List" <users@tomcat.apache.org>
References: <51200CB4-D325-4019-A12A-5A0FDCC8987E@me.com> <0B75C850-2329-47A0-AEAF-A6B7CC14D35F@gmail.com> <CAPoyBqRbT3w_C=3DEomct-hRkKsVpUTBaEd9pjTFn3r=McLMfg@mail.gmail.com> <5E45D237-38F2-473F-A5FB-9D6367F1DDD6@gmail.com> <CAPoyBqTKZ3vABf6zqo2g9WXEa7yec1kVerSY3uwb8C8bOrLyrw@mail.gmail.com> <C24FEA44-BB75-4EE1-A4E2-81FDD4F84FB3@gmail.com> <CAPoyBqRO=i4sWqRxjOdj_J4Bky=mFhJD_d9MVxPPMCXAzP-gWA@mail.gmail.com> <80D886CA-1FC6-4231-9D10-ACA8DD2A37D3@gmail.com> <CAPoyBqTw6LMYvgd8BPBbocmPLEYKRtiNOvTa=o96AtF4==10dg@mail.gmail.com>
Message-Id: <34653922-1820-4494-B054-12EA88265790@gmail.com>
X-Mailer: Apple Mail (2.1084)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-14--507907514
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=us-ascii

Olivier,

  Thanks for getting to this.

> Do you have more logs/details from your tomcat instance ?
> Especially: $CATALINA_HOME/logs/localhost_access_log.yyyy-MM-dd.txt
> and entries corresponding to the deployment

  I will collect these and send them in a subsequent email.

> Are you passing tru a http server which is proxying/redirecting to the
> Tomcat instance ?

  Nope.  This is on an OS X machine.  All I did was install Tomcat 7 in =
a local directory, modify tomcat-users.xml as I described below, and =
start Tomcat.

> What kind of deployment are you doing ? one with contextFile parameter =
?

  No, I'm just using the parameters I mentioned previously. [1]

[1] mvn tomcat7:deploy -Dusername=3DAdministrator -Dpassword=3Da

  Matt

On Apr 12, 2012, at 3:54 PM, Olivier Lamy wrote:

> Hello,
> Currently, I cannot reproduce.
> Do you have more logs/details from your tomcat instance ?
> Especially: $CATALINA_HOME/logs/localhost_access_log.yyyy-MM-dd.txt
> and entries corresponding to the deployment
> Are you passing tru a http server which is proxying/redirecting to the
> Tomcat instance ?
> What kind of deployment are you doing ? one with contextFile parameter =
?
>=20
>=20
> 2012/4/6 Matt Munz <matt.m.munz@gmail.com>:
>> Olivier,
>>=20
>>  OK.  Thanks.  So with the 2.0-SNAPSHOT version I am getting the same =
error (HTTP 401). [1]  Interestingly, the plugin output makes it look =
like the WAR file was uploaded but when I visit the Manager, I can see =
that it is not deployed.
>>=20
>>  Do you have any thoughts about what I can do to debug this further?  =
I'd really like to get this working.
>>=20
>> [1]
>> [INFO] Deploying war to http://localhost:8080/
>> Uploading: http://localhost:8080/manager/html/deploy?path=3D%2F
>> Uploaded: http://localhost:8080/manager/html/deploy?path=3D%2F (9555 =
KB at 33760.1 KB/sec)
>> [INFO] tomcatManager status code:401, ReasonPhrase:Unauthorized
>>=20
>>  Matt
>>=20
>>=20
>> On Apr 4, 2012, at 12:23 AM, Olivier Lamy wrote:
>>=20
>>> Hello,
>>> Have a look here:
>>> =
http://tomcat.apache.org/maven-plugin-2.0-SNAPSHOT/snapshot-test.html
>>>=20
>>> 2012/4/4 Matt Munz <matt.m.munz@gmail.com>:
>>>> Olivier,
>>>>=20
>>>>  I made that change to settings.xml and now I'm getting a different =
error. [1]  How can I find out where this plugin is stored?  Perhaps =
there is a problem with the repository or my repository configuration.
>>>>=20
>>>> [1]
>>>> [WARNING] The POM for =
org.apache.tomcat.maven:tomcat7-maven-plugin:jar:2.0-SNAPSHOT is =
missing, no dependency information available
>>>> [WARNING] Failed to retrieve plugin descriptor for =
org.apache.tomcat.maven:tomcat7-maven-plugin:2.0-SNAPSHOT: Plugin =
org.apache.tomcat.maven:tomcat7-maven-plugin:2.0-SNAPSHOT or one of its =
dependencies could not be resolved: Failed to read artifact descriptor =
for org.apache.tomcat.maven:tomcat7-maven-plugin:jar:2.0-SNAPSHOT
>>>> ...
>>>> [WARNING] The POM for =
org.apache.tomcat.maven:tomcat7-maven-plugin:jar:2.0-SNAPSHOT is =
missing, no dependency information available
>>>> ...
>>>> [ERROR] Plugin =
org.apache.tomcat.maven:tomcat7-maven-plugin:2.0-SNAPSHOT or one of its =
dependencies could not be resolved: Failed to read artifact descriptor =
for org.apache.tomcat.maven:tomcat7-maven-plugin:jar:2.0-SNAPSHOT: Could =
not find artifact =
org.apache.tomcat.maven:tomcat7-maven-plugin:pom:2.0-SNAPSHOT -> [Help =
1]
>>>>=20
>>>>  Matt Munz
>>>>=20
>>>> On Apr 2, 2012, at 11:48 PM, Olivier Lamy wrote:
>>>>=20
>>>>> Hello,
>>>>> With version from codehaus manager url for tomcat7 is not correct.
>>>>> (see =
http://mojo.codehaus.org/tomcat-maven-plugin/examples/deployment-tomcat7.h=
tml)
>>>>>=20
>>>>> Regarding the plugin prefix trouble, you have two solutions to use =
the
>>>>> correct version:
>>>>>=20
>>>>> * use the full cli: mvn
>>>>> org.apache.tomcat.maven:tomcat7-maven-plugin:2.0-SNAPSHOT:deploy
>>>>> * configure your settings.xml with the entry
>>>>>=20
>>>>>  <pluginGroups>
>>>>>    <pluginGroup>org.apache.tomcat.maven</pluginGroup>
>>>>>  </pluginGroups>
>>>>>=20
>>>>>=20
>>>>> HTH,
>>>>> --
>>>>> Olivier Lamy
>>>>> Talend: http://coders.talend.com
>>>>> http://twitter.com/olamy | http://linkedin.com/in/olamy
>>>>>=20
>>>>> 2012/4/3 Matt Munz <matt.m.munz@gmail.com>:
>>>>>> Olivier,
>>>>>>=20
>>>>>>  After switching to 2.0-SNAPSHOT, I am still getting errors :(  =
First I got an error saying that the tomcat7 prefix was not found. [1]  =
Then I tried "mvn  tomcat:deploy -Dusername=3DAdministrator =
-Dpassword=3Da" and I got a 403 response from the manager.
>>>>>>=20
>>>>>> [1]
>>>>>> [ERROR] No plugin found for prefix 'tomcat7' in the current =
project and in the plugin groups [org.apache.maven.plugins, =
org.codehaus.mojo] available from the repositories [local =
(/Users/mattmunz/.m2/repository), central =
(http://repo1.maven.org/maven2)] -> [Help 1]
>>>>>> [2]
>>>>>> [ERROR] Failed to execute goal =
org.codehaus.mojo:tomcat-maven-plugin:1.1:deploy (default-cli) on =
project ...: Cannot invoke Tomcat manager: Server returned HTTP response =
code: 403 for URL: http://localhost:8080/manager/deploy?path=3D%2F...&war=3D=
 -> [Help 1]
>>>>>>=20
>>>>>>  Matt
>>>>>>=20
>>>>>> On Apr 2, 2012, at 4:16 AM, Olivier Lamy wrote:
>>>>>>=20
>>>>>>> Hello,
>>>>>>> I have fixed few things related to deployment in trunk.
>>>>>>> Could you test with current 2.0-SNAPSHOT ?
>>>>>>>=20
>>>>>>> Thanks
>>>>>>> --
>>>>>>> Olivier Lamy
>>>>>>> Talend: http://coders.talend.com
>>>>>>> http://twitter.com/olamy | http://linkedin.com/in/olamy
>>>>>>>=20
>>>>>>> 2012/4/2 Matt Munz <matt.m.munz@gmail.com>:
>>>>>>>> Hi all,
>>>>>>>>=20
>>>>>>>>  I'm trying to get the Tomcat 7 Maven plugin to work and I'm =
getting an authorization problem.[1]  Here's the command that I'm =
running. [2]  Here's the relevant snippet from tomcat-users.xml. [3]  =
=46rom the browser I am able to log on to the Manager with this account =
without problems.
>>>>>>>>=20
>>>>>>>>  Any help you could provide would be greatly appreciated.
>>>>>>>>=20
>>>>>>>> [1] tomcatManager status code:401, ReasonPhrase:Unauthorized
>>>>>>>> [2] mvn tomcat7:deploy -Dusername=3DAdministrator -Dpassword=3Da
>>>>>>>> [3]
>>>>>>>> <role rolename=3D"manager-gui"/>
>>>>>>>> <role rolename=3D"manager-script"/>
>>>>>>>> <role rolename=3D"manager-jmx"/>
>>>>>>>> <user username=3D"Administrator" password=3D"a" =
roles=3D"manager-gui,manager-script,manager-jmx"/>
>>>>>>>>=20
>>>>>>>>  Matt Munz
>>>>>>>>  matt.m.munz@gmail.com
>>>>>>>>=20
>>>>>>>>=20
>>>>>>>>=20
>>>>>>>>=20
>>>>>>>=20
>>>>>>> =
---------------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>>>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>>>>>=20
>>>>>>=20
>>>>>>=20
>>>>>> =
---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>>>>=20
>>>>>=20
>>>>> =
---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>>>=20
>>>>=20
>>>>=20
>>>> =
---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>>=20
>>>=20
>>>=20
>>>=20
>>> --
>>> Olivier Lamy
>>> Talend: http://coders.talend.com
>>> http://twitter.com/olamy | http://linkedin.com/in/olamy
>>>=20
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>=20
>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>> For additional commands, e-mail: users-help@tomcat.apache.org
>>=20
>=20
>=20
>=20
> --=20
> Olivier Lamy
> Talend: http://coders.talend.com
> http://twitter.com/olamy | http://linkedin.com/in/olamy
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>=20


--Apple-Mail-14--507907514--

From users-return-233542-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 13 02:10:05 2012
Return-Path: <users-return-233542-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AF2479F7F
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 13 Apr 2012 02:10:05 +0000 (UTC)
Received: (qmail 3768 invoked by uid 500); 13 Apr 2012 02:10:02 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 3716 invoked by uid 500); 13 Apr 2012 02:10:02 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 3706 invoked by uid 99); 13 Apr 2012 02:10:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2012 02:10:02 +0000
X-ASF-Spam-Status: No, hits=4.7 required=5.0
	tests=FREEMAIL_FORGED_REPLYTO,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.139.91.100] (HELO nm30.bullet.mail.sp2.yahoo.com) (98.139.91.100)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 13 Apr 2012 02:09:54 +0000
Received: from [98.139.91.62] by nm30.bullet.mail.sp2.yahoo.com with NNFMP; 13 Apr 2012 02:09:33 -0000
Received: from [98.139.91.54] by tm2.bullet.mail.sp2.yahoo.com with NNFMP; 13 Apr 2012 02:09:33 -0000
Received: from [127.0.0.1] by omp1054.mail.sp2.yahoo.com with NNFMP; 13 Apr 2012 02:09:33 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 546535.76712.bm@omp1054.mail.sp2.yahoo.com
Received: (qmail 9799 invoked by uid 60001); 13 Apr 2012 02:09:33 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1334282973; bh=wWNsBjmwWI0jMhy/5ScHVkiCtfFyPegx7RdR9aynyLE=; h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=W1OEVQ9xjrkiJfQFZXCWqYA7+3/W5HONLcdAZAKjfUPCH4ars1HVrKbeRE55cli55B9Twr8vAb1mZGA7fXgOqmxOkaWo87Ef4vEyhJoD7gaH+bjGBe4MYVrxJIMrpKcTGcPP6IkopEtpYGtcycMm9ADrKpedNpeoXrSCGXFxgTc=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=DPJZnGghaxYVzVwu0i19ILnbtodcxMYT1np3dcmFbBuJYdlFVgeK4LgFkR2oq9u0svfkH90Ygd9a204RVS/JesAWPN0n4Sd22pDVt+UY0cNOohiLgu5/HHMrWoihgfkeQjlaxLqxDw4ArUI0eIxDuqvyrhV5cAjZ7w13SHKMUfM=;
X-YMail-OSG: rMoCFZwVM1m_SQ2HjgIyAcQ6zVHBVDMDwJsRNCod.GJY9.F
 6Go3TVp9p3ntgYfeewzIeh2LMw2kVdS_ORKsfFL2M5KIWLfBHZH_L5nHY_OI
 IFqV3y_gA5chHEe95nseiLCDWBZ3Dfx.zP2yXtuPcQEn4JV_VwiqA8jwdrbE
 E9uLHxkfpmIyGXfnlxTI0KBnTsdFnCrqLINTMjAS7ZC1phqJIjzMdnSNWI09
 Gilt01nYrUs4dmffT1xRzU_WUTZX1tRyseO8h45lbCKdANy9UiGNGsgJO93z
 CYLMwq0GlRgedck2S6mpBRKuKT9bbVSizZFqVK8qy36.TIO4JjsfG6aF1RMv
 nB97ic3oFWfubWm5JDB97I55pxExDwaFxZW9OuQHkMGfoAck1spGo21OYw2e
 E_AAm15WZaiupPU3BqTkQj2cgWZvyff_mPu5_9wYPmSx4kruRdFux.ejVoji
 tQt4JHJbLBQZOPTY-
Received: from [64.102.249.9] by web110402.mail.gq1.yahoo.com via HTTP; Thu, 12 Apr 2012 19:09:32 PDT
X-Mailer: YahooMailWebService/0.8.117.340979
References: <1334112426.9730.YahooMailMobile@web110413.mail.gq1.yahoo.com> <4F854E8C.4070003@pidster.com> <d14bdc88-c9f2-4d8c-b2c2-624115afc614@email.android.com>
Message-ID: <1334282972.92558.YahooMailNeo@web110402.mail.gq1.yahoo.com>
Date: Thu, 12 Apr 2012 19:09:32 -0700 (PDT)
From: Peter <peterdnight@yahoo.com>
Reply-To: Peter <peterdnight@yahoo.com>
Subject: Re: 7.0.25 to 7.0.27 requires -Xmx32m to go to -Xmx512m
To: Tomcat Users List <users@tomcat.apache.org>
In-Reply-To: <d14bdc88-c9f2-4d8c-b2c2-624115afc614@email.android.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="1756932851-1956628944-1334282972=:92558"
X-Virus-Checked: Checked by ClamAV on apache.org

--1756932851-1956628944-1334282972=:92558
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Thanks for the response Mark - it is consistent with both observations that=
 i noted in the original email (heap post startup was near 0, and disabling=
 scanning resolves). I looked in the changelog in 26/27 and did not see any=
thing in there that fits this?=A0 If your hypothesis is correct , I suspect=
 quite a few people will be in for a shock when they deploy 7.0.27 or later=
 into a production env where memory footprints are much more managed then s=
ay in eclipse on your desktop ;)=0A=0AThe issue might not be with the spec,=
 but the tomcat implementation where by everything is getting loaded into r=
am during scanning. In 7.0.25 - I could start a "typical" Spring applicatio=
n in 32mb. 7.0.27 requires 512mb? =0A=0A=0A- Peter=0A=0A=0A=0A_____________=
___________________=0A From: Mark Thomas <markt@apache.org>=0ATo: Tomcat Us=
ers List <users@tomcat.apache.org> =0ASent: Wednesday, April 11, 2012 6:50 =
AM=0ASubject: Re: 7.0.25 to 7.0.27 requires -Xmx32m to go to -Xmx512m=0A =
=0A=0A=0APid <pid@pidster.com> wrote:=0A=0A>On 11/04/2012 03:47, Peter wrot=
e:=0A>> hey Christopher,=0A>> =0A>> the app I used that uncovered the issue=
 is one I use exclusively to=0A>validate tomcat releases;) it is a "hello w=
orld" style app using=0A>spring/servlet3.0. it has simple spring aop point =
cutting via jamon ,=0A>simple spring jms (active mq) simple spring jaxrs, s=
imple spring jaxws,=0A>simple spring mvc, simple spring security,... (sprin=
g 3.0.7)=0A>> =0A>> bunch of very simple examples that end up pulling in "m=
any" jars.=0A>=0A>Can you post it to github or somewhere public?=0A>=0A>=0A=
>p=0A>=0A>=0A>> I will grab a dump tomorrow,=A0 thanks for response,=0A>> p=
eter=0A=0AI know exactly where this memory is going. During the scanning pr=
ocess Tomcat has to scan every single class in the application and its libr=
aries and every class and interface in that class's hierarchy for annotatio=
ns (we don't have a choice in this - the spec requires it). This can lead t=
o the same class being scanned many times during startup and that is slow. =
Tomcat now caches the result of scanning a class which means each class onl=
y has to be scanned once. However, this does mean that all the results are =
in memory until the scan is complete. If you have a lot of libraries, that =
could require a lot of memory. If you know a JAR doesn't need scanning, add=
 it to the jarsToSkip property. If it is a popular jar then create an enhan=
cement request and we'll add it to the default list. The other option is to=
 set metadata complete in the web.xml=0A=0AI haven't reviewed the scanning =
caching code but there may be some opportunities to reduce the memory footp=
rint of the cache.=0A=0AMark=0A=0A=0A--------------------------------------=
-------------------------------=0ATo unsubscribe, e-mail: users-unsubscribe=
@tomcat.apache.org=0AFor additional commands, e-mail: users-help@tomcat.apa=
che.org
--1756932851-1956628944-1334282972=:92558--

From users-return-233543-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 13 04:28:46 2012
Return-Path: <users-return-233543-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 85D5D98F8
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 13 Apr 2012 04:28:46 +0000 (UTC)
Received: (qmail 62005 invoked by uid 500); 13 Apr 2012 04:28:43 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 61628 invoked by uid 500); 13 Apr 2012 04:28:39 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 61590 invoked by uid 99); 13 Apr 2012 04:28:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2012 04:28:37 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of matt.m.munz@gmail.com designates 209.85.210.44 as permitted sender)
Received: from [209.85.210.44] (HELO mail-pz0-f44.google.com) (209.85.210.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2012 04:28:30 +0000
Received: by dadz14 with SMTP id z14so3299131dad.3
        for <users@tomcat.apache.org>; Thu, 12 Apr 2012 21:28:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=subject:mime-version:content-type:from:in-reply-to:date:cc
         :message-id:references:to:x-mailer;
        bh=nFIZAPeczq8sSYAV+4eYQJtaNAuMz9715L2CoImLDLs=;
        b=ISFcRJ/7VVO0TsGF4g4zbLfuttclINRh9OEno0YoKRjxunii4md5yagNj1gIhMhFkK
         BowMyEjEp3qMRdgBAZr04RaOV+jTbteR0qFLNm8vqu362MTY94fDlys7aeJk2HyPKW+u
         FFPqzV6MZ+nrVIj+ngAzSbxJyC9FjrduXw8TrpnVFgYRHRzwrFkd1BlVRF8me8gaPb77
         QFatwokx2lfOEhIPxzXnCXDBdrANxQIdgS3rz+QXuu3jv0rRzsCg1/ZXV+iMu3xzo5aZ
         df42ObdYqYl1fWmsVLgO4kyujJ5+5FhMp1jdj/pkZcWwm/g6YDsrovtVFWpekjmEVJGL
         khPw==
Received: by 10.68.135.38 with SMTP id pp6mr1384774pbb.82.1334291288529;
        Thu, 12 Apr 2012 21:28:08 -0700 (PDT)
Received: from [10.0.1.15] (adsl-99-102-133-251.dsl.pltn13.sbcglobal.net. [99.102.133.251])
        by mx.google.com with ESMTPS id p4sm7592729pbp.13.2012.04.12.21.28.05
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 12 Apr 2012 21:28:07 -0700 (PDT)
Subject: Re: Tomcat 7 Maven plugin: deploy fails with tomcatManager status code:401, ReasonPhrase:Unauthorized
Mime-Version: 1.0 (Apple Message framework v1084)
Content-Type: multipart/alternative; boundary=Apple-Mail-2--498201089
From: Matt Munz <matt.m.munz@gmail.com>
In-Reply-To: <34653922-1820-4494-B054-12EA88265790@gmail.com>
Date: Thu, 12 Apr 2012 21:28:04 -0700
Cc: "Tomcat Users List" <users@tomcat.apache.org>
Message-Id: <D4515427-13CA-43AA-A99C-480EECD601A4@gmail.com>
References: <51200CB4-D325-4019-A12A-5A0FDCC8987E@me.com> <0B75C850-2329-47A0-AEAF-A6B7CC14D35F@gmail.com> <CAPoyBqRbT3w_C=3DEomct-hRkKsVpUTBaEd9pjTFn3r=McLMfg@mail.gmail.com> <5E45D237-38F2-473F-A5FB-9D6367F1DDD6@gmail.com> <CAPoyBqTKZ3vABf6zqo2g9WXEa7yec1kVerSY3uwb8C8bOrLyrw@mail.gmail.com> <C24FEA44-BB75-4EE1-A4E2-81FDD4F84FB3@gmail.com> <CAPoyBqRO=i4sWqRxjOdj_J4Bky=mFhJD_d9MVxPPMCXAzP-gWA@mail.gmail.com> <80D886CA-1FC6-4231-9D10-ACA8DD2A37D3@gmail.com> <CAPoyBqTw6LMYvgd8BPBbocmPLEYKRtiNOvTa=o96AtF4==10dg@mail.gmail.com> <34653922-1820-4494-B054-12EA88265790@gmail.com>
To: Matt Munz <matt.m.munz@gmail.com>
X-Mailer: Apple Mail (2.1084)

--Apple-Mail-2--498201089
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=us-ascii

Olivier,

  When I try to deploy from Maven, the following message appears in the =
access log. [1]  There are no other messages in any of the other logs =
for this event.

[1] 127.0.0.1 - - [12/Apr/2012:21:15:59 -0700] "PUT =
/manager/html/deploy?path=3D%2F HTTP/1.1" 401 2550

  Matt

On Apr 12, 2012, at 6:46 PM, Matt Munz wrote:

> Olivier,
>=20
>   Thanks for getting to this.
>=20
>> Do you have more logs/details from your tomcat instance ?
>> Especially: $CATALINA_HOME/logs/localhost_access_log.yyyy-MM-dd.txt
>> and entries corresponding to the deployment
>=20
>   I will collect these and send them in a subsequent email.
>=20
>> Are you passing tru a http server which is proxying/redirecting to =
the
>> Tomcat instance ?
>=20
>   Nope.  This is on an OS X machine.  All I did was install Tomcat 7 =
in a local directory, modify tomcat-users.xml as I described below, and =
start Tomcat.
>=20
>> What kind of deployment are you doing ? one with contextFile =
parameter ?
>=20
>   No, I'm just using the parameters I mentioned previously. [1]
>=20
> [1] mvn tomcat7:deploy -Dusername=3DAdministrator -Dpassword=3Da
>=20
>   Matt
>=20
> On Apr 12, 2012, at 3:54 PM, Olivier Lamy wrote:
>=20
>> Hello,
>> Currently, I cannot reproduce.
>> Do you have more logs/details from your tomcat instance ?
>> Especially: $CATALINA_HOME/logs/localhost_access_log.yyyy-MM-dd.txt
>> and entries corresponding to the deployment
>> Are you passing tru a http server which is proxying/redirecting to =
the
>> Tomcat instance ?
>> What kind of deployment are you doing ? one with contextFile =
parameter ?
>>=20
>>=20
>> 2012/4/6 Matt Munz <matt.m.munz@gmail.com>:
>>> Olivier,
>>>=20
>>>  OK.  Thanks.  So with the 2.0-SNAPSHOT version I am getting the =
same error (HTTP 401). [1]  Interestingly, the plugin output makes it =
look like the WAR file was uploaded but when I visit the Manager, I can =
see that it is not deployed.
>>>=20
>>>  Do you have any thoughts about what I can do to debug this further? =
 I'd really like to get this working.
>>>=20
>>> [1]
>>> [INFO] Deploying war to http://localhost:8080/
>>> Uploading: http://localhost:8080/manager/html/deploy?path=3D%2F
>>> Uploaded: http://localhost:8080/manager/html/deploy?path=3D%2F (9555 =
KB at 33760.1 KB/sec)
>>> [INFO] tomcatManager status code:401, ReasonPhrase:Unauthorized
>>>=20
>>>  Matt
>>>=20
>>>=20
>>> On Apr 4, 2012, at 12:23 AM, Olivier Lamy wrote:
>>>=20
>>>> Hello,
>>>> Have a look here:
>>>> =
http://tomcat.apache.org/maven-plugin-2.0-SNAPSHOT/snapshot-test.html
>>>>=20
>>>> 2012/4/4 Matt Munz <matt.m.munz@gmail.com>:
>>>>> Olivier,
>>>>>=20
>>>>>  I made that change to settings.xml and now I'm getting a =
different error. [1]  How can I find out where this plugin is stored?  =
Perhaps there is a problem with the repository or my repository =
configuration.
>>>>>=20
>>>>> [1]
>>>>> [WARNING] The POM for =
org.apache.tomcat.maven:tomcat7-maven-plugin:jar:2.0-SNAPSHOT is =
missing, no dependency information available
>>>>> [WARNING] Failed to retrieve plugin descriptor for =
org.apache.tomcat.maven:tomcat7-maven-plugin:2.0-SNAPSHOT: Plugin =
org.apache.tomcat.maven:tomcat7-maven-plugin:2.0-SNAPSHOT or one of its =
dependencies could not be resolved: Failed to read artifact descriptor =
for org.apache.tomcat.maven:tomcat7-maven-plugin:jar:2.0-SNAPSHOT
>>>>> ...
>>>>> [WARNING] The POM for =
org.apache.tomcat.maven:tomcat7-maven-plugin:jar:2.0-SNAPSHOT is =
missing, no dependency information available
>>>>> ...
>>>>> [ERROR] Plugin =
org.apache.tomcat.maven:tomcat7-maven-plugin:2.0-SNAPSHOT or one of its =
dependencies could not be resolved: Failed to read artifact descriptor =
for org.apache.tomcat.maven:tomcat7-maven-plugin:jar:2.0-SNAPSHOT: Could =
not find artifact =
org.apache.tomcat.maven:tomcat7-maven-plugin:pom:2.0-SNAPSHOT -> [Help =
1]
>>>>>=20
>>>>>  Matt Munz
>>>>>=20
>>>>> On Apr 2, 2012, at 11:48 PM, Olivier Lamy wrote:
>>>>>=20
>>>>>> Hello,
>>>>>> With version from codehaus manager url for tomcat7 is not =
correct.
>>>>>> (see =
http://mojo.codehaus.org/tomcat-maven-plugin/examples/deployment-tomcat7.h=
tml)
>>>>>>=20
>>>>>> Regarding the plugin prefix trouble, you have two solutions to =
use the
>>>>>> correct version:
>>>>>>=20
>>>>>> * use the full cli: mvn
>>>>>> org.apache.tomcat.maven:tomcat7-maven-plugin:2.0-SNAPSHOT:deploy
>>>>>> * configure your settings.xml with the entry
>>>>>>=20
>>>>>>  <pluginGroups>
>>>>>>    <pluginGroup>org.apache.tomcat.maven</pluginGroup>
>>>>>>  </pluginGroups>
>>>>>>=20
>>>>>>=20
>>>>>> HTH,
>>>>>> --
>>>>>> Olivier Lamy
>>>>>> Talend: http://coders.talend.com
>>>>>> http://twitter.com/olamy | http://linkedin.com/in/olamy
>>>>>>=20
>>>>>> 2012/4/3 Matt Munz <matt.m.munz@gmail.com>:
>>>>>>> Olivier,
>>>>>>>=20
>>>>>>>  After switching to 2.0-SNAPSHOT, I am still getting errors :(  =
First I got an error saying that the tomcat7 prefix was not found. [1]  =
Then I tried "mvn  tomcat:deploy -Dusername=3DAdministrator =
-Dpassword=3Da" and I got a 403 response from the manager.
>>>>>>>=20
>>>>>>> [1]
>>>>>>> [ERROR] No plugin found for prefix 'tomcat7' in the current =
project and in the plugin groups [org.apache.maven.plugins, =
org.codehaus.mojo] available from the repositories [local =
(/Users/mattmunz/.m2/repository), central =
(http://repo1.maven.org/maven2)] -> [Help 1]
>>>>>>> [2]
>>>>>>> [ERROR] Failed to execute goal =
org.codehaus.mojo:tomcat-maven-plugin:1.1:deploy (default-cli) on =
project ...: Cannot invoke Tomcat manager: Server returned HTTP response =
code: 403 for URL: http://localhost:8080/manager/deploy?path=3D%2F...&war=3D=
 -> [Help 1]
>>>>>>>=20
>>>>>>>  Matt
>>>>>>>=20
>>>>>>> On Apr 2, 2012, at 4:16 AM, Olivier Lamy wrote:
>>>>>>>=20
>>>>>>>> Hello,
>>>>>>>> I have fixed few things related to deployment in trunk.
>>>>>>>> Could you test with current 2.0-SNAPSHOT ?
>>>>>>>>=20
>>>>>>>> Thanks
>>>>>>>> --
>>>>>>>> Olivier Lamy
>>>>>>>> Talend: http://coders.talend.com
>>>>>>>> http://twitter.com/olamy | http://linkedin.com/in/olamy
>>>>>>>>=20
>>>>>>>> 2012/4/2 Matt Munz <matt.m.munz@gmail.com>:
>>>>>>>>> Hi all,
>>>>>>>>>=20
>>>>>>>>>  I'm trying to get the Tomcat 7 Maven plugin to work and I'm =
getting an authorization problem.[1]  Here's the command that I'm =
running. [2]  Here's the relevant snippet from tomcat-users.xml. [3]  =
=46rom the browser I am able to log on to the Manager with this account =
without problems.
>>>>>>>>>=20
>>>>>>>>>  Any help you could provide would be greatly appreciated.
>>>>>>>>>=20
>>>>>>>>> [1] tomcatManager status code:401, ReasonPhrase:Unauthorized
>>>>>>>>> [2] mvn tomcat7:deploy -Dusername=3DAdministrator -Dpassword=3Da=

>>>>>>>>> [3]
>>>>>>>>> <role rolename=3D"manager-gui"/>
>>>>>>>>> <role rolename=3D"manager-script"/>
>>>>>>>>> <role rolename=3D"manager-jmx"/>
>>>>>>>>> <user username=3D"Administrator" password=3D"a" =
roles=3D"manager-gui,manager-script,manager-jmx"/>
>>>>>>>>>=20
>>>>>>>>>  Matt Munz
>>>>>>>>>  matt.m.munz@gmail.com
>>>>>>>>>=20
>>>>>>>>>=20
>>>>>>>>>=20
>>>>>>>>>=20
>>>>>>>>=20
>>>>>>>> =
---------------------------------------------------------------------
>>>>>>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>>>>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>>>>>>=20
>>>>>>>=20
>>>>>>>=20
>>>>>>> =
---------------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>>>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>>>>>=20
>>>>>>=20
>>>>>> =
---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>>>>=20
>>>>>=20
>>>>>=20
>>>>> =
---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>>>=20
>>>>=20
>>>>=20
>>>>=20
>>>> --
>>>> Olivier Lamy
>>>> Talend: http://coders.talend.com
>>>> http://twitter.com/olamy | http://linkedin.com/in/olamy
>>>>=20
>>>> =
---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>>=20
>>>=20
>>>=20
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>=20
>>=20
>>=20
>>=20
>> --=20
>> Olivier Lamy
>> Talend: http://coders.talend.com
>> http://twitter.com/olamy | http://linkedin.com/in/olamy
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>> For additional commands, e-mail: users-help@tomcat.apache.org
>>=20
>=20


--Apple-Mail-2--498201089--

From users-return-233544-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 13 07:26:33 2012
Return-Path: <users-return-233544-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4D6D99A8B
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 13 Apr 2012 07:26:33 +0000 (UTC)
Received: (qmail 47423 invoked by uid 500); 13 Apr 2012 07:26:29 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 47148 invoked by uid 500); 13 Apr 2012 07:26:24 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 47104 invoked by uid 99); 13 Apr 2012 07:26:22 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2012 07:26:22 +0000
Received: from localhost (HELO mail-yx0-f173.google.com) (127.0.0.1)
  (smtp-auth username olamy, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2012 07:26:22 +0000
Received: by yenr5 with SMTP id r5so1842997yen.18
        for <users@tomcat.apache.org>; Fri, 13 Apr 2012 00:26:21 -0700 (PDT)
Received: by 10.236.114.169 with SMTP id c29mr726712yhh.37.1334301981139; Fri,
 13 Apr 2012 00:26:21 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.101.107.20 with HTTP; Fri, 13 Apr 2012 00:26:00 -0700 (PDT)
In-Reply-To: <D4515427-13CA-43AA-A99C-480EECD601A4@gmail.com>
References: <51200CB4-D325-4019-A12A-5A0FDCC8987E@me.com> <0B75C850-2329-47A0-AEAF-A6B7CC14D35F@gmail.com>
 <CAPoyBqRbT3w_C=3DEomct-hRkKsVpUTBaEd9pjTFn3r=McLMfg@mail.gmail.com>
 <5E45D237-38F2-473F-A5FB-9D6367F1DDD6@gmail.com> <CAPoyBqTKZ3vABf6zqo2g9WXEa7yec1kVerSY3uwb8C8bOrLyrw@mail.gmail.com>
 <C24FEA44-BB75-4EE1-A4E2-81FDD4F84FB3@gmail.com> <CAPoyBqRO=i4sWqRxjOdj_J4Bky=mFhJD_d9MVxPPMCXAzP-gWA@mail.gmail.com>
 <80D886CA-1FC6-4231-9D10-ACA8DD2A37D3@gmail.com> <CAPoyBqTw6LMYvgd8BPBbocmPLEYKRtiNOvTa=o96AtF4==10dg@mail.gmail.com>
 <34653922-1820-4494-B054-12EA88265790@gmail.com> <D4515427-13CA-43AA-A99C-480EECD601A4@gmail.com>
From: Olivier Lamy <olamy@apache.org>
Date: Fri, 13 Apr 2012 09:26:00 +0200
Message-ID: <CAPoyBqTM7ghaZE1AfHzxkFBuio+R7b-jcJ4=cf2ABFF6_ujntQ@mail.gmail.com>
Subject: Re: Tomcat 7 Maven plugin: deploy fails with tomcatManager status
 code:401, ReasonPhrase:Unauthorized
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,
Can you try with: mvn tomcat7:deploy -Dtomcat.username=3DAdministrator
-Dtomcat.password=3Da

See Mojo documentation:
http://tomcat.apache.org/maven-plugin-2.0-SNAPSHOT/tomcat7-maven-plugin/dep=
loy-mojo.html

2012/4/13 Matt Munz <matt.m.munz@gmail.com>:
> Olivier,
>
> =A0When I try to deploy from Maven, the following message appears in the =
access log. [1] =A0There are no other messages in any of the other logs for=
 this event.
>
> [1] 127.0.0.1 - - [12/Apr/2012:21:15:59 -0700] "PUT /manager/html/deploy?=
path=3D%2F HTTP/1.1" 401 2550
>
> =A0Matt
>
> On Apr 12, 2012, at 6:46 PM, Matt Munz wrote:
>
>> Olivier,
>>
>> =A0 Thanks for getting to this.
>>
>>> Do you have more logs/details from your tomcat instance ?
>>> Especially: $CATALINA_HOME/logs/localhost_access_log.yyyy-MM-dd.txt
>>> and entries corresponding to the deployment
>>
>> =A0 I will collect these and send them in a subsequent email.
>>
>>> Are you passing tru a http server which is proxying/redirecting to the
>>> Tomcat instance ?
>>
>> =A0 Nope. =A0This is on an OS X machine. =A0All I did was install Tomcat=
 7 in a local directory, modify tomcat-users.xml as I described below, and =
start Tomcat.
>>
>>> What kind of deployment are you doing ? one with contextFile parameter =
?
>>
>> =A0 No, I'm just using the parameters I mentioned previously. [1]
>>
>> [1] mvn tomcat7:deploy -Dusername=3DAdministrator -Dpassword=3Da
>>
>> =A0 Matt
>>
>> On Apr 12, 2012, at 3:54 PM, Olivier Lamy wrote:
>>
>>> Hello,
>>> Currently, I cannot reproduce.
>>> Do you have more logs/details from your tomcat instance ?
>>> Especially: $CATALINA_HOME/logs/localhost_access_log.yyyy-MM-dd.txt
>>> and entries corresponding to the deployment
>>> Are you passing tru a http server which is proxying/redirecting to the
>>> Tomcat instance ?
>>> What kind of deployment are you doing ? one with contextFile parameter =
?
>>>
>>>
>>> 2012/4/6 Matt Munz <matt.m.munz@gmail.com>:
>>>> Olivier,
>>>>
>>>> =A0OK. =A0Thanks. =A0So with the 2.0-SNAPSHOT version I am getting the=
 same error (HTTP 401). [1] =A0Interestingly, the plugin output makes it lo=
ok like the WAR file was uploaded but when I visit the Manager, I can see t=
hat it is not deployed.
>>>>
>>>> =A0Do you have any thoughts about what I can do to debug this further?=
 =A0I'd really like to get this working.
>>>>
>>>> [1]
>>>> [INFO] Deploying war to http://localhost:8080/
>>>> Uploading: http://localhost:8080/manager/html/deploy?path=3D%2F
>>>> Uploaded: http://localhost:8080/manager/html/deploy?path=3D%2F (9555 K=
B at 33760.1 KB/sec)
>>>> [INFO] tomcatManager status code:401, ReasonPhrase:Unauthorized
>>>>
>>>> =A0Matt
>>>>
>>>>
>>>> On Apr 4, 2012, at 12:23 AM, Olivier Lamy wrote:
>>>>
>>>>> Hello,
>>>>> Have a look here:
>>>>> http://tomcat.apache.org/maven-plugin-2.0-SNAPSHOT/snapshot-test.html
>>>>>
>>>>> 2012/4/4 Matt Munz <matt.m.munz@gmail.com>:
>>>>>> Olivier,
>>>>>>
>>>>>> =A0I made that change to settings.xml and now I'm getting a differen=
t error. [1] =A0How can I find out where this plugin is stored? =A0Perhaps =
there is a problem with the repository or my repository configuration.
>>>>>>
>>>>>> [1]
>>>>>> [WARNING] The POM for org.apache.tomcat.maven:tomcat7-maven-plugin:j=
ar:2.0-SNAPSHOT is missing, no dependency information available
>>>>>> [WARNING] Failed to retrieve plugin descriptor for org.apache.tomcat=
.maven:tomcat7-maven-plugin:2.0-SNAPSHOT: Plugin org.apache.tomcat.maven:to=
mcat7-maven-plugin:2.0-SNAPSHOT or one of its dependencies could not be res=
olved: Failed to read artifact descriptor for org.apache.tomcat.maven:tomca=
t7-maven-plugin:jar:2.0-SNAPSHOT
>>>>>> ...
>>>>>> [WARNING] The POM for org.apache.tomcat.maven:tomcat7-maven-plugin:j=
ar:2.0-SNAPSHOT is missing, no dependency information available
>>>>>> ...
>>>>>> [ERROR] Plugin org.apache.tomcat.maven:tomcat7-maven-plugin:2.0-SNAP=
SHOT or one of its dependencies could not be resolved: Failed to read artif=
act descriptor for org.apache.tomcat.maven:tomcat7-maven-plugin:jar:2.0-SNA=
PSHOT: Could not find artifact org.apache.tomcat.maven:tomcat7-maven-plugin=
:pom:2.0-SNAPSHOT -> [Help 1]
>>>>>>
>>>>>> =A0Matt Munz
>>>>>>
>>>>>> On Apr 2, 2012, at 11:48 PM, Olivier Lamy wrote:
>>>>>>
>>>>>>> Hello,
>>>>>>> With version from codehaus manager url for tomcat7 is not correct.
>>>>>>> (see http://mojo.codehaus.org/tomcat-maven-plugin/examples/deployme=
nt-tomcat7.html)
>>>>>>>
>>>>>>> Regarding the plugin prefix trouble, you have two solutions to use =
the
>>>>>>> correct version:
>>>>>>>
>>>>>>> * use the full cli: mvn
>>>>>>> org.apache.tomcat.maven:tomcat7-maven-plugin:2.0-SNAPSHOT:deploy
>>>>>>> * configure your settings.xml with the entry
>>>>>>>
>>>>>>> =A0<pluginGroups>
>>>>>>> =A0 =A0<pluginGroup>org.apache.tomcat.maven</pluginGroup>
>>>>>>> =A0</pluginGroups>
>>>>>>>
>>>>>>>
>>>>>>> HTH,
>>>>>>> --
>>>>>>> Olivier Lamy
>>>>>>> Talend: http://coders.talend.com
>>>>>>> http://twitter.com/olamy | http://linkedin.com/in/olamy
>>>>>>>
>>>>>>> 2012/4/3 Matt Munz <matt.m.munz@gmail.com>:
>>>>>>>> Olivier,
>>>>>>>>
>>>>>>>> =A0After switching to 2.0-SNAPSHOT, I am still getting errors :( =
=A0First I got an error saying that the tomcat7 prefix was not found. [1] =
=A0Then I tried "mvn =A0tomcat:deploy -Dusername=3DAdministrator -Dpassword=
=3Da" and I got a 403 response from the manager.
>>>>>>>>
>>>>>>>> [1]
>>>>>>>> [ERROR] No plugin found for prefix 'tomcat7' in the current projec=
t and in the plugin groups [org.apache.maven.plugins, org.codehaus.mojo] av=
ailable from the repositories [local (/Users/mattmunz/.m2/repository), cent=
ral (http://repo1.maven.org/maven2)] -> [Help 1]
>>>>>>>> [2]
>>>>>>>> [ERROR] Failed to execute goal org.codehaus.mojo:tomcat-maven-plug=
in:1.1:deploy (default-cli) on project ...: Cannot invoke Tomcat manager: S=
erver returned HTTP response code: 403 for URL: http://localhost:8080/manag=
er/deploy?path=3D%2F...&war=3D -> [Help 1]
>>>>>>>>
>>>>>>>> =A0Matt
>>>>>>>>
>>>>>>>> On Apr 2, 2012, at 4:16 AM, Olivier Lamy wrote:
>>>>>>>>
>>>>>>>>> Hello,
>>>>>>>>> I have fixed few things related to deployment in trunk.
>>>>>>>>> Could you test with current 2.0-SNAPSHOT ?
>>>>>>>>>
>>>>>>>>> Thanks
>>>>>>>>> --
>>>>>>>>> Olivier Lamy
>>>>>>>>> Talend: http://coders.talend.com
>>>>>>>>> http://twitter.com/olamy | http://linkedin.com/in/olamy
>>>>>>>>>
>>>>>>>>> 2012/4/2 Matt Munz <matt.m.munz@gmail.com>:
>>>>>>>>>> Hi all,
>>>>>>>>>>
>>>>>>>>>> =A0I'm trying to get the Tomcat 7 Maven plugin to work and I'm g=
etting an authorization problem.[1] =A0Here's the command that I'm running.=
 [2] =A0Here's the relevant snippet from tomcat-users.xml. [3] =A0From the =
browser I am able to log on to the Manager with this account without proble=
ms.
>>>>>>>>>>
>>>>>>>>>> =A0Any help you could provide would be greatly appreciated.
>>>>>>>>>>
>>>>>>>>>> [1] tomcatManager status code:401, ReasonPhrase:Unauthorized
>>>>>>>>>> [2] mvn tomcat7:deploy -Dusername=3DAdministrator -Dpassword=3Da
>>>>>>>>>> [3]
>>>>>>>>>> <role rolename=3D"manager-gui"/>
>>>>>>>>>> <role rolename=3D"manager-script"/>
>>>>>>>>>> <role rolename=3D"manager-jmx"/>
>>>>>>>>>> <user username=3D"Administrator" password=3D"a" roles=3D"manager=
-gui,manager-script,manager-jmx"/>
>>>>>>>>>>
>>>>>>>>>> =A0Matt Munz
>>>>>>>>>> =A0matt.m.munz@gmail.com
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>
>>>>>>>>> -----------------------------------------------------------------=
----
>>>>>>>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>>>>>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> ------------------------------------------------------------------=
---
>>>>>>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>>>>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>>>>>>
>>>>>>>
>>>>>>> -------------------------------------------------------------------=
--
>>>>>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>>>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>>>>>
>>>>>>
>>>>>>
>>>>>> --------------------------------------------------------------------=
-
>>>>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>>>>
>>>>>
>>>>>
>>>>>
>>>>> --
>>>>> Olivier Lamy
>>>>> Talend: http://coders.talend.com
>>>>> http://twitter.com/olamy | http://linkedin.com/in/olamy
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>>
>>>
>>>
>>>
>>> --
>>> Olivier Lamy
>>> Talend: http://coders.talend.com
>>> http://twitter.com/olamy | http://linkedin.com/in/olamy
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>
>>
>



--=20
Olivier Lamy
Talend: http://coders.talend.com
http://twitter.com/olamy | http://linkedin.com/in/olamy

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233545-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 13 07:54:23 2012
Return-Path: <users-return-233545-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id ACAFA9545
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 13 Apr 2012 07:54:23 +0000 (UTC)
Received: (qmail 29722 invoked by uid 500); 13 Apr 2012 07:54:20 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 29644 invoked by uid 500); 13 Apr 2012 07:54:20 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 29429 invoked by uid 99); 13 Apr 2012 07:54:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2012 07:54:19 +0000
X-ASF-Spam-Status: No, hits=-1.6 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [195.245.231.130] (HELO mail1.bemta5.messagelabs.com) (195.245.231.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2012 07:54:14 +0000
Received: from [85.158.136.3:32711] by server-10.bemta-5.messagelabs.com id CF/4E-08260-F8BD78F4; Fri, 13 Apr 2012 07:53:51 +0000
X-Env-Sender: Leigh.Anderson@betfair.com
X-Msg-Ref: server-5.tower-123.messagelabs.com!1334303631!25461584!1
X-Originating-IP: [213.86.197.130]
X-StarScan-Version: 6.5.7; banners=betfair.com,-,-
X-VirusChecked: Checked
Received: (qmail 3365 invoked from network); 13 Apr 2012 07:53:51 -0000
Received: from unknown (HELO HAMCAS03.uk.betfair.local) (213.86.197.130)
  by server-5.tower-123.messagelabs.com with SMTP; 13 Apr 2012 07:53:51 -0000
Received: from HAMMBX03.uk.betfair.local ([fe80::7828:724c:8e7a:6d6b]) by
 HAMCAS03.uk.betfair.local ([::1]) with mapi id 14.01.0355.002; Fri, 13 Apr
 2012 08:53:51 +0100
From: Leigh Anderson <Leigh.Anderson@betfair.com>
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Tomcat7-maven-plugin 2.0-beta1 and useSeparateTomcatClassloader
 fails with run goal
Thread-Topic: Tomcat7-maven-plugin 2.0-beta1 and
 useSeparateTomcatClassloader fails with run goal
Thread-Index: AQHNEWW+jphHNngJdEuNYm49rCONM5aKae+AgAFgDACABLkQgIAGeVaAgAAbooCAAAAkgIABWiyA
Date: Fri, 13 Apr 2012 07:53:50 +0000
Message-ID: <CBAD951B.D91C%leigh.anderson@betfair.com>
In-Reply-To: <CAPoyBqQfPZFAkNWjkB-eyWmO=9roabLTwa_bnWV16rG6ZMUcNg@mail.gmail.com>
Accept-Language: en-GB, en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-originating-ip: [10.9.0.2]
Content-Type: text/plain; charset="us-ascii"
Content-ID: <E7FED55686104B4DBB2661B4AD1CFCBB@betfair.com>
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Olivier,

It's actually the act of declaring a context.xml with a Loader element
that causes the application to fail. A new instance of WebAppLoader is
created, overriding the one carefully created by the plugin, without the
benefit of a properly configured class path. I've included a small patch
below which demonstrates my intent.

I'd added=20
<classLoaderClass>org.springframework.instrument.classloading.tomcat.Tomca=
t
InstrumentableClassLoader</classLoaderClass> to the plugin configuration,
which was then picked up correctly and used by the WebAppLoader.

Thanks,
Leigh

Index:=20
tomcat7-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat7/=
r
un/AbstractRunMojo.java
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
---=20
tomcat7-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat7/=
r
un/AbstractRunMojo.java=09(revision 1)
+++=20
tomcat7-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat7/=
r
un/AbstractRunMojo.java=09(revision )
@@ -363,6 +357,15 @@
      */
 =20   private ClassRealm tomcatRealm;
=20
+    /**
+     * Class loader class to set.
+     *
+     * @parameter
+     */
+    protected String classLoaderClass;
+
     //=20
----------------------------------------------------------------------
     // Mojo Implementation
     //=20
----------------------------------------------------------------------
@@ -460,14 +462,19 @@
         {
             context.setParentClassLoader( getTomcatClassLoader() );
         }
+        final WebappLoader loader =3D createWebappLoader();
=20
-        context.setLoader( createWebappLoader() );
+        context.setLoader( loader );
         File contextFile =3D getContextFile();
         if ( contextFile !=3D null )
         {
             context.setConfigFile( getContextFile().toURI().toURL() );
         }
+        if (classLoaderClass !=3D null) {
+            loader.setLoaderClass(classLoaderClass);
+        }
=20
+
         return context;
=20
     }



On 12/04/2012 13:14, "Olivier Lamy" <olamy@apache.org> wrote:

>The plugin has an option=20to setup context.xml to use see [1].
>You can try to write an other context.xml only for using with the plugin =
?
>
>--=20
>Olivier
>
>[1]=20
>http://tomcat.apache.org/maven-plugin-2.0-SNAPSHOT/tomcat7-maven-plugin/r=
u
>n-mojo.html#contextFile
>
>2012/4/12 Leigh Anderson <Leigh.Anderson@betfair.com>:
>> Hi Olivier,
>>
>> That's solved the problem, thanks. Unfortunately, declaring a custom
>>class
>> loader in a context.xml causes Tomcat to use that one, instead of the
>>one
>> set up with the correct class path by the plugin. I'll keep looking to
>>see
>> if I can find a way around this.
>>
>> Thanks for your prompt help with this.
>> Leigh
>>
>> On 12/04/2012 11:35, "Olivier Lamy" <olamy@apache.org> wrote:
>>
>>>Hello,
>>>Apologize for delay.
>>>That should be fixed now (I have deployed 2.0-SNAPSHOT).
>>>If you could try with your use case.
>>>Thanks,
>>>2012/4/8 Olivier Lamy <olamy@apache.org>:
>>>> Hello Leigh,
>>>> Thanks for creating issue.
>>>> Until now I tried to reproduce the issue but I failed.
>>>> I wonder if you could attach a build log using -e mvn flag.
>>>>
>>>> 2012/4/5 Leigh Anderson <Leigh.Anderson@betfair.com>:
>>>>> Hi Olivier,
>>>>>
>>>>> I'm not able to run this with tomcat6 as it's a Servlet 3.0 project.=

>>>>>I'll
>>>>> get the issue created -- should have some time next week to put
>>>>>together a
>>>>> sample project.
>>>>>
>>>>>
>>>>> Thanks,
>>>>> Leigh
>>>>>
>>>>> On 04/04/2012 11:36, "Olivier Lamy" <olamy@apache.org> wrote:
>>>>>
>>>>>>Hello,
>>>>>>Looks to be an issue (does that work with tomcat6:run ?)
>>>>>>Could you create an issue here:
>>>>>>https://issues.apache.org/jira/browse/MTOMCAT (if possible with a
>>>>>>small sample project to reproduce).
>>>>>>
>>>>>>Thanks
>>>>>>--
>>>>>>Olivier Lamy
>>>>>>Talend: http://coders.talend.com
>>>>>>http://twitter.com/olamy | http://linkedin.com/in/olamy
>>>>>>
>>>>>>2012/4/3 Leigh Anderson <Leigh.Anderson@betfair.com>:
>>>>>>> Hi All,
>>>>>>>
>>>>>>> I'm trying to start a web application with 'mvn tomcat7:run'. It
>>>>>>>seems
>>>>>>> that with the configuration below it fails with the following
>>>>>>>error:
>>>>>>>
>>>>>>>
>>>>>>>        [INFO]
>>>>>>>
>>>>>>>-------------------------------------------------------------------=
-
>>>>>>>--
>>>>>>>--
>>>>>>>        [ERROR] Failed to execute goal
>>>>>>> org.apache.tomcat.maven:tomcat7-maven-plugin:2.0-beta-1:run
>>>>>>>(default-cli)
>>>>>>> on project mantis-test-web-app: No such archiver: 'jar'. -> [Help
>>>>>>>1]
>>>>>>>        [ERROR]
>>>>>>>        [ERROR] To see the full stack trace of the errors, re-run
>>>>>>>Maven
>>>>>>>with the
>>>>>>> -e switch.
>>>>>>>        [ERROR] Re-run Maven using the -X switch to enable full
>>>>>>>debug
>>>>>>>logging.
>>>>>>>
>>>>>>> I have also tried
>>>>>>>        * 'mvn tomcat:run-war', which seems to get past this point,=

>>>>>>>but
>>>>>>>then the
>>>>>>> application will not start because the 'additionalClasspathDir'
>>>>>>>property
>>>>>>> is not supported by the 'run-war' goal.
>>>>>>>        * removing 'useSeparateTomcatClassLoader' which then doesn'=
t
>>>>>>>load the
>>>>>>> Spring instrumenting class loader required to use AspectJ LTW,
>>>>>>>specified
>>>>>>> in
>>>>>>> context.xml. I have confirmed that I get the same 'no such
>>>>>>>archiver'
>>>>>>>error
>>>>>>> if I remove the
>>>>>>> context.xml, so I don't believe this to be the cause.
>>>>>>>
>>>>>>> Is there something I've missed in the configuration?
>>>>>>>
>>>>>>> Cheers,
>>>>>>> Leigh
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>                    <plugin>
>>>>>>>                        <groupId>org.apache.tomcat.maven</groupId>
>>>>>>>           =20
>>>>>>><artifactId>tomcat7-maven-plugin</artifactId>
>>>>>>>                        <version>2.0-beta-1</version>
>>>>>>>                        <configuration>
>>>>>>>                            <systemProperties>
>>>>>>>
>>>>>>><log4j.defaultInitOverride>true</log4j.defaultInitOverride>
>>>>>>>                                <HOSTNAME>localhost</HOSTNAME>
>>>>>>>                                <port.http>9090</port.http>
>>>>>>>                     =20          <port.https>8443</port.https>
>>>>>>>                            </systemProperties>
>>>>>>>                            <port>9090</port>
>>>>>>>                            <httpsPort>8443</httpsPort>
>>>>>>>                            <path>/</path>
>>>>>>>           =20
>>>>>>><useTestClasspath>false</useTestClasspath>
>>>>>>>                            <additionalClasspathDirs>
>>>>>>>
>>>>>>>
>>>>>>><additionalClasspathDir>${project.basedir}/config</additionalClassp=
a
>>>>>>>th
>>>>>>>Dir
>>>>>>>>
>>>>>>>                            </additionalClasspathDirs>
>>>>>>>
>>>>>>> <useSeparateTomcatClassLoader>true</useSeparateTomcatClassLoader>
>>>>>>>                        </configuration>
>>>>>>>                        <dependencies>
>>>>>>>                            <dependency>
>>>>>>>           =20
>>>>>>><groupId>org.springframework</groupId>
>>>>>>>
>>>>>>>
>>>>>>><artifactId>spring-instrument-tomcat</artifactId>
>>>>>>>                                <version>${spring.version}</version=
>
>>>>>>>=20                           </dependency>
>>>>>>>                        </dependencies>
>>>>>>>                    </plugin>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>___________________________________________________________________=
_
>>>>>>>__
>>>>>>>__
>>>>>>> In order to protect our email recipients, Betfair Group use SkySca=
n
>>>>>>>from
>>>>>>> MessageLabs to scan all Incoming and Outgoing mail for viruses.
>>>>>>>
>>>>>>>
>>>>>>>___________________________________________________________________=
_
>>>>>>>__
>>>>>>>__
>>>>>>>
>>>>>>>=20
>>>>>>>-------------------------------------------------------------------=
-
>>>>>>>-
>>>>>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>>>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>>>>>
>>>>>>
>>>>>>--------------------------------------------------------------------=
-
>>>>>>To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>>>>For additional commands, e-mail: users-help@tomcat.apache.org
>>>>>>
>>>>>
>>>>>
>>>>>
>>>>>_____________________________________________________________________=
_
>>>>>__
>>>>> In order to protect our email recipients, Betfair Group use SkyScan
>>>>>from
>>>>> MessageLabs to scan all Incoming and Outgoing mail for viruses.
>>>>>
>>>>>
>>>>>_____________________________________________________________________=
_
>>>>>__
>>>>>
>>>>> --------------------------------------------------------------------=
-
>>>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>>>
>>>>
>>>>
>>>>
>>>> --
>>>> Olivier Lamy
>>>> Talend: http://coders.talend.com
>>>> http://twitter.com/olamy | http://linkedin.com/in/olamy
>>>
>>>
>>>
>>>--
>>>Olivier Lamy
>>>Talend: http://coders.talend.com
>>>http://twitter.com/olamy | http://linkedin.com/in/olamy
>>>
>>>---------------------------------------------------------------------
>>>To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>For additional commands, e-mail: users-help@tomcat.apache.org
>>>
>>
>>
>> _______________________________________________________________________=
_
>> In order to protect our email recipients, Betfair Group use SkyScan fro=
m
>> MessageLabs to scan all Incoming and Outgoing mail for viruses.
>>
>> _______________________________________________________________________=
_
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>> For additional commands, e-mail: users-help@tomcat.apache.org
>>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>For additional commands, e-mail: users-help@tomcat.apache.org
>


________________________________________________________________________
In order to protect our email recipients, Betfair Group use SkyScan from=20=

MessageLabs to scan all Incoming and Outgoing mail for viruses.

________________________________________________________________________

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233546-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 13 08:02:38 2012
Return-Path: <users-return-233546-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4D2AB9B64
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 13 Apr 2012 08:02:38 +0000 (UTC)
Received: (qmail 59997 invoked by uid 500); 13 Apr 2012 08:02:34 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 59955 invoked by uid 500); 13 Apr 2012 08:02:34 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 59932 invoked by uid 99); 13 Apr 2012 08:02:34 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2012 08:02:34 +0000
Received: from localhost (HELO mail-gx0-f173.google.com) (127.0.0.1)
  (smtp-auth username olamy, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2012 08:02:33 +0000
Received: by ggnp2 with SMTP id p2so1852022ggn.18
        for <users@tomcat.apache.org>; Fri, 13 Apr 2012 01:02:32 -0700 (PDT)
Received: by 10.236.114.169 with SMTP id c29mr791670yhh.37.1334304152946; Fri,
 13 Apr 2012 01:02:32 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.101.107.20 with HTTP; Fri, 13 Apr 2012 01:02:12 -0700 (PDT)
In-Reply-To: <CBAD951B.D91C%leigh.anderson@betfair.com>
References: <CAPoyBqQfPZFAkNWjkB-eyWmO=9roabLTwa_bnWV16rG6ZMUcNg@mail.gmail.com>
 <CBAD951B.D91C%leigh.anderson@betfair.com>
From: Olivier Lamy <olamy@apache.org>
Date: Fri, 13 Apr 2012 10:02:12 +0200
Message-ID: <CAPoyBqTEFZd6ZAc2KJDrxioEdRJZz8kABy==KpH-NtuLQpr87A@mail.gmail.com>
Subject: Re: Tomcat7-maven-plugin 2.0-beta1 and useSeparateTomcatClassloader
 fails with run goal
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,

2012/4/13 Leigh Anderson <Leigh.Anderson@betfair.com>:
> Hi Olivier,
>
> It's actually the act of declaring a context.xml with a Loader element
> that causes the application to fail. A new instance of WebAppLoader is
> created, overriding the one carefully created by the plugin, without the
> benefit of a properly configured class path. I've included a small patch
> below which demonstrates my intent.

Oh sure good catch.

>
> I'd added
> <classLoaderClass>org.springframework.instrument.classloading.tomcat.Tomc=
at
> InstrumentableClassLoader</classLoaderClass> to the plugin configuration,
> which was then picked up correctly and used by the WebAppLoader.

Could you attach the patch to an issue ?

>
> Thanks,
> Leigh
>
> Index:
> tomcat7-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat7=
/r
> un/AbstractRunMojo.java
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> ---
> tomcat7-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat7=
/r
> un/AbstractRunMojo.java (revision 1)
> +++
> tomcat7-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat7=
/r
> un/AbstractRunMojo.java (revision )
> @@ -363,6 +357,15 @@
> =A0 =A0 =A0*/
> =A0 =A0 private ClassRealm tomcatRealm;
>
> + =A0 =A0/**
> + =A0 =A0 * Class loader class to set.
> + =A0 =A0 *
> + =A0 =A0 * @parameter
> + =A0 =A0 */
> + =A0 =A0protected String classLoaderClass;
> +
> =A0 =A0 //
> ----------------------------------------------------------------------
> =A0 =A0 // Mojo Implementation
> =A0 =A0 //
> ----------------------------------------------------------------------
> @@ -460,14 +462,19 @@
> =A0 =A0 =A0 =A0 {
> =A0 =A0 =A0 =A0 =A0 =A0 context.setParentClassLoader( getTomcatClassLoade=
r() );
> =A0 =A0 =A0 =A0 }
> + =A0 =A0 =A0 =A0final WebappLoader loader =3D createWebappLoader();
>
> - =A0 =A0 =A0 =A0context.setLoader( createWebappLoader() );
> + =A0 =A0 =A0 =A0context.setLoader( loader );
> =A0 =A0 =A0 =A0 File contextFile =3D getContextFile();
> =A0 =A0 =A0 =A0 if ( contextFile !=3D null )
> =A0 =A0 =A0 =A0 {
> =A0 =A0 =A0 =A0 =A0 =A0 context.setConfigFile( getContextFile().toURI().t=
oURL() );
> =A0 =A0 =A0 =A0 }
> + =A0 =A0 =A0 =A0if (classLoaderClass !=3D null) {
> + =A0 =A0 =A0 =A0 =A0 =A0loader.setLoaderClass(classLoaderClass);
> + =A0 =A0 =A0 =A0}
>
> +
> =A0 =A0 =A0 =A0 return context;
>
> =A0 =A0 }
>
>
>
> On 12/04/2012 13:14, "Olivier Lamy" <olamy@apache.org> wrote:
>
>>The plugin has an option to setup context.xml to use see [1].
>>You can try to write an other context.xml only for using with the plugin =
?
>>
>>--
>>Olivier
>>
>>[1]
>>http://tomcat.apache.org/maven-plugin-2.0-SNAPSHOT/tomcat7-maven-plugin/r=
u
>>n-mojo.html#contextFile
>>
>>2012/4/12 Leigh Anderson <Leigh.Anderson@betfair.com>:
>>> Hi Olivier,
>>>
>>> That's solved the problem, thanks. Unfortunately, declaring a custom
>>>class
>>> loader in a context.xml causes Tomcat to use that one, instead of the
>>>one
>>> set up with the correct class path by the plugin. I'll keep looking to
>>>see
>>> if I can find a way around this.
>>>
>>> Thanks for your prompt help with this.
>>> Leigh
>>>
>>> On 12/04/2012 11:35, "Olivier Lamy" <olamy@apache.org> wrote:
>>>
>>>>Hello,
>>>>Apologize for delay.
>>>>That should be fixed now (I have deployed 2.0-SNAPSHOT).
>>>>If you could try with your use case.
>>>>Thanks,
>>>>2012/4/8 Olivier Lamy <olamy@apache.org>:
>>>>> Hello Leigh,
>>>>> Thanks for creating issue.
>>>>> Until now I tried to reproduce the issue but I failed.
>>>>> I wonder if you could attach a build log using -e mvn flag.
>>>>>
>>>>> 2012/4/5 Leigh Anderson <Leigh.Anderson@betfair.com>:
>>>>>> Hi Olivier,
>>>>>>
>>>>>> I'm not able to run this with tomcat6 as it's a Servlet 3.0 project.
>>>>>>I'll
>>>>>> get the issue created -- should have some time next week to put
>>>>>>together a
>>>>>> sample project.
>>>>>>
>>>>>>
>>>>>> Thanks,
>>>>>> Leigh
>>>>>>
>>>>>> On 04/04/2012 11:36, "Olivier Lamy" <olamy@apache.org> wrote:
>>>>>>
>>>>>>>Hello,
>>>>>>>Looks to be an issue (does that work with tomcat6:run ?)
>>>>>>>Could you create an issue here:
>>>>>>>https://issues.apache.org/jira/browse/MTOMCAT (if possible with a
>>>>>>>small sample project to reproduce).
>>>>>>>
>>>>>>>Thanks
>>>>>>>--
>>>>>>>Olivier Lamy
>>>>>>>Talend: http://coders.talend.com
>>>>>>>http://twitter.com/olamy | http://linkedin.com/in/olamy
>>>>>>>
>>>>>>>2012/4/3 Leigh Anderson <Leigh.Anderson@betfair.com>:
>>>>>>>> Hi All,
>>>>>>>>
>>>>>>>> I'm trying to start a web application with 'mvn tomcat7:run'. It
>>>>>>>>seems
>>>>>>>> that with the configuration below it fails with the following
>>>>>>>>error:
>>>>>>>>
>>>>>>>>
>>>>>>>> =A0 =A0 =A0 =A0[INFO]
>>>>>>>>
>>>>>>>>-------------------------------------------------------------------=
-
>>>>>>>>--
>>>>>>>>--
>>>>>>>> =A0 =A0 =A0 =A0[ERROR] Failed to execute goal
>>>>>>>> org.apache.tomcat.maven:tomcat7-maven-plugin:2.0-beta-1:run
>>>>>>>>(default-cli)
>>>>>>>> on project mantis-test-web-app: No such archiver: 'jar'. -> [Help
>>>>>>>>1]
>>>>>>>> =A0 =A0 =A0 =A0[ERROR]
>>>>>>>> =A0 =A0 =A0 =A0[ERROR] To see the full stack trace of the errors, =
re-run
>>>>>>>>Maven
>>>>>>>>with the
>>>>>>>> -e switch.
>>>>>>>> =A0 =A0 =A0 =A0[ERROR] Re-run Maven using the -X switch to enable =
full
>>>>>>>>debug
>>>>>>>>logging.
>>>>>>>>
>>>>>>>> I have also tried
>>>>>>>> =A0 =A0 =A0 =A0* 'mvn tomcat:run-war', which seems to get past thi=
s point,
>>>>>>>>but
>>>>>>>>then the
>>>>>>>> application will not start because the 'additionalClasspathDir'
>>>>>>>>property
>>>>>>>> is not supported by the 'run-war' goal.
>>>>>>>> =A0 =A0 =A0 =A0* removing 'useSeparateTomcatClassLoader' which the=
n doesn't
>>>>>>>>load the
>>>>>>>> Spring instrumenting class loader required to use AspectJ LTW,
>>>>>>>>specified
>>>>>>>> in
>>>>>>>> context.xml. I have confirmed that I get the same 'no such
>>>>>>>>archiver'
>>>>>>>>error
>>>>>>>> if I remove the
>>>>>>>> context.xml, so I don't believe this to be the cause.
>>>>>>>>
>>>>>>>> Is there something I've missed in the configuration?
>>>>>>>>
>>>>>>>> Cheers,
>>>>>>>> Leigh
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<plugin>
>>>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<groupId>org.apache=
.tomcat.maven</groupId>
>>>>>>>>
>>>>>>>><artifactId>tomcat7-maven-plugin</artifactId>
>>>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<version>2.0-beta-1=
</version>
>>>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<configuration>
>>>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<systemProp=
erties>
>>>>>>>>
>>>>>>>><log4j.defaultInitOverride>true</log4j.defaultInitOverride>
>>>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<HO=
STNAME>localhost</HOSTNAME>
>>>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<po=
rt.http>9090</port.http>
>>>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<po=
rt.https>8443</port.https>
>>>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0</systemPro=
perties>
>>>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<port>9090<=
/port>
>>>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<httpsPort>=
8443</httpsPort>
>>>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<path>/</pa=
th>
>>>>>>>>
>>>>>>>><useTestClasspath>false</useTestClasspath>
>>>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<additional=
ClasspathDirs>
>>>>>>>>
>>>>>>>>
>>>>>>>><additionalClasspathDir>${project.basedir}/config</additionalClassp=
a
>>>>>>>>th
>>>>>>>>Dir
>>>>>>>>>
>>>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0</additiona=
lClasspathDirs>
>>>>>>>>
>>>>>>>> <useSeparateTomcatClassLoader>true</useSeparateTomcatClassLoader>
>>>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0</configuration>
>>>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<dependencies>
>>>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<dependency=
>
>>>>>>>>
>>>>>>>><groupId>org.springframework</groupId>
>>>>>>>>
>>>>>>>>
>>>>>>>><artifactId>spring-instrument-tomcat</artifactId>
>>>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0<ve=
rsion>${spring.version}</version>
>>>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0</dependenc=
y>
>>>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0</dependencies>
>>>>>>>> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0</plugin>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>___________________________________________________________________=
_
>>>>>>>>__
>>>>>>>>__
>>>>>>>> In order to protect our email recipients, Betfair Group use SkySca=
n
>>>>>>>>from
>>>>>>>> MessageLabs to scan all Incoming and Outgoing mail for viruses.
>>>>>>>>
>>>>>>>>
>>>>>>>>___________________________________________________________________=
_
>>>>>>>>__
>>>>>>>>__
>>>>>>>>
>>>>>>>>
>>>>>>>>-------------------------------------------------------------------=
-
>>>>>>>>-
>>>>>>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>>>>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>>>>>>
>>>>>>>
>>>>>>>--------------------------------------------------------------------=
-
>>>>>>>To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>>>>>For additional commands, e-mail: users-help@tomcat.apache.org
>>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>_____________________________________________________________________=
_
>>>>>>__
>>>>>> In order to protect our email recipients, Betfair Group use SkyScan
>>>>>>from
>>>>>> MessageLabs to scan all Incoming and Outgoing mail for viruses.
>>>>>>
>>>>>>
>>>>>>_____________________________________________________________________=
_
>>>>>>__
>>>>>>
>>>>>> --------------------------------------------------------------------=
-
>>>>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>>>>
>>>>>
>>>>>
>>>>>
>>>>> --
>>>>> Olivier Lamy
>>>>> Talend: http://coders.talend.com
>>>>> http://twitter.com/olamy | http://linkedin.com/in/olamy
>>>>
>>>>
>>>>
>>>>--
>>>>Olivier Lamy
>>>>Talend: http://coders.talend.com
>>>>http://twitter.com/olamy | http://linkedin.com/in/olamy
>>>>
>>>>---------------------------------------------------------------------
>>>>To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>>For additional commands, e-mail: users-help@tomcat.apache.org
>>>>
>>>
>>>
>>> _______________________________________________________________________=
_
>>> In order to protect our email recipients, Betfair Group use SkyScan fro=
m
>>> MessageLabs to scan all Incoming and Outgoing mail for viruses.
>>>
>>> _______________________________________________________________________=
_
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>For additional commands, e-mail: users-help@tomcat.apache.org
>>
>
>
> ________________________________________________________________________
> In order to protect our email recipients, Betfair Group use SkyScan from
> MessageLabs to scan all Incoming and Outgoing mail for viruses.
>
> ________________________________________________________________________
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>



--=20
Olivier Lamy
Talend: http://coders.talend.com
http://twitter.com/olamy | http://linkedin.com/in/olamy

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233547-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 13 08:09:01 2012
Return-Path: <users-return-233547-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 586A09D3F
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 13 Apr 2012 08:09:01 +0000 (UTC)
Received: (qmail 77141 invoked by uid 500); 13 Apr 2012 08:08:58 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 77089 invoked by uid 500); 13 Apr 2012 08:08:57 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 77061 invoked by uid 99); 13 Apr 2012 08:08:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2012 08:08:57 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [194.51.201.67] (HELO esa-sf1.esa.gmessaging.net) (194.51.201.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2012 08:08:46 +0000
Received: from esa-sf1.esa.gmessaging.net (localhost [127.0.0.1])
	by localhost.esa.gmessaging.net (Postfix) with SMTP id 807305F9DFA
	for <users@tomcat.apache.org>; Fri, 13 Apr 2012 10:08:20 +0200 (CEST)
Received: from sciops-mailgw.vilspa.esa.int (sciops-mailgw.vilspa.esa.int [193.147.152.105])
	by esa-sf1.esa.gmessaging.net (Postfix) with ESMTP id 670B35F9DEC
	for <users@tomcat.apache.org>; Fri, 13 Apr 2012 10:08:20 +0200 (CEST)
Received: from sciops.esac.int (scimail.esac.esa.int [193.147.152.87])
	by sciops-mailgw.vilspa.esa.int (Postfix) with ESMTP id 07D098B8FA
	for <users@tomcat.apache.org>; Fri, 13 Apr 2012 10:08:25 +0200 (CEST)
Received: from [127.0.0.1] (244.42.17.95.dynamic.jazztel.es [95.17.42.244])
	(authenticated bits=0)
	by sciops.esac.int (8.13.1/8.13.1) with ESMTP id q3D88M3k020897
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <users@tomcat.apache.org>; Fri, 13 Apr 2012 10:08:24 +0200
Message-ID: <10691_1334304500_4F87DEF4_10691_2289_1_4F87DEF7.3080707@yahoo.es>
Date: Fri, 13 Apr 2012 10:08:23 +0200
From: =?ISO-8859-1?Q?Miguel_Gonz=E1lez_Casta=F1os?= <miguel_3_gonzalez@yahoo.es>
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: determining cause of MaxThreads exhausted
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Antivirus: avast! (VPS 120412-1, 12/04/2012), Outbound message
X-Antivirus-Status: Clean

Dear all,

   A server that I manage has a Struts webapp with a Tomcat 5.5.x 
standalone server. No JMX or whatsoever has been configured.

   The app sends massive emails to users with some info that requires 
users to log on the webapp and fill in some forms. It seems (without any 
logs or metrics) that people tend to fill the forms right away after 
they got the emails and together with the mailing process (that requires 
DB use to get email addresses) is exhausting the maxthreads connections 
(300 as of yesterday which I have increased to 400).

   I assume it's not going to be easy to determine what is the cause of 
the issue but which tools can I use?

   I guess I need to log in some way how the server is behaving. Maybe 
enabling JMX or Javamelody? Any way of getting where the webapp is 
hanged or where in the code of the webapp is hanging?

   And which tool can help me to simulate the load of so many people 
connecting to the webapp remotely?

   Regards,

   Miguel

This message and any attachments are intended for the use of the addressee or addressees only. The unauthorised disclosure, use, dissemination or copying (either in whole or in part) of its content is not permitted. If you received this message in error, please notify the sender and delete it from your system. Emails can be altered and their integrity cannot be guaranteed by the sender.

Please consider the environment before printing this email.


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233548-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 13 08:14:45 2012
Return-Path: <users-return-233548-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B80579F16
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 13 Apr 2012 08:14:45 +0000 (UTC)
Received: (qmail 92725 invoked by uid 500); 13 Apr 2012 08:14:42 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 92510 invoked by uid 500); 13 Apr 2012 08:14:42 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 92484 invoked by uid 99); 13 Apr 2012 08:14:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2012 08:14:41 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pid@pidster.com designates 209.85.210.44 as permitted sender)
Received: from [209.85.210.44] (HELO mail-pz0-f44.google.com) (209.85.210.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2012 08:14:36 +0000
Received: by dadz14 with SMTP id z14so3492896dad.3
        for <users@tomcat.apache.org>; Fri, 13 Apr 2012 01:14:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=references:from:in-reply-to:mime-version:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        bh=QU4xTRnpSOtBNxhg3O2MS1PqguuSPiO7YKz/x7f2pYw=;
        b=d1jRHAE8Zk1NnZE/YNhSJpiyM1/2vbxDWwf4Jh2vPX3gr92AOnFhJlg33UoI35gesl
         Obgw73UsqLjR84pnMYyIrFdbQlv6SJJQ4P9nM9CwEM6HRLohEfHekAr0jNV8PrIY082O
         3idjL+jOCpVtTZJjOhGvC02rCYDYngLdsN3A4=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=references:from:in-reply-to:mime-version:date:message-id:subject:to
         :content-type:content-transfer-encoding:x-gm-message-state;
        bh=QU4xTRnpSOtBNxhg3O2MS1PqguuSPiO7YKz/x7f2pYw=;
        b=k015WGbIyKeNf7Ph4PuCTDdgcKSdqEV/Vh59L3+dXSpOXMnVIX40l4pr9f9MXuOsdD
         QuLjCoJRJ1m1i+15nvxqC5YEYoGFiBCl87aVSUzu8bVM2rsoaxqKRuzS3x+L9gZEX8au
         j3CKs7cnvK9ZM8qtmUKpLmgrtzXtvVMluGtmTCxDAtFlqQE2FFDWkm0oa89hvUTUeObf
         z4fATeazaUaZ9ql0B7Rv6XkzVVr3meUd83ODmcLzzhj/IiEhO8aIRB7FfoILkpThz0uF
         YhcUk1x44GPDkiDa1KYS/YrXXSgvkzuqODJM6Uup7JlYrdBeeUy26yxKuA753f0kvbG+
         I+zw==
Received: by 10.68.192.66 with SMTP id he2mr2760611pbc.133.1334304855350; Fri,
 13 Apr 2012 01:14:15 -0700 (PDT)
References: <10691_1334304500_4F87DEF4_10691_2289_1_4F87DEF7.3080707@yahoo.es>
From: "Pid *" <pid@pidster.com>
In-Reply-To: <10691_1334304500_4F87DEF4_10691_2289_1_4F87DEF7.3080707@yahoo.es>
Mime-Version: 1.0 (1.0)
Date: Fri, 13 Apr 2012 09:14:40 +0100
Message-ID: <-3027381026767059488@unknownmsgid>
Subject: Re: determining cause of MaxThreads exhausted
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Gm-Message-State: ALoCoQnFpBaVHAVdkQ815nqMP13WaSVuBL0mIj+pb4bAiWMiTeGigYpGeN2IanpLaQFdzuNrHY4R
X-Virus-Checked: Checked by ClamAV on apache.org

On 13 Apr 2012, at 09:09, "Miguel Gonz=C3=A1lez Casta=C3=B1os"
<miguel_3_gonzalez@yahoo.es> wrote:

> Dear all,
>
>  A server that I manage has a Struts webapp with a Tomcat 5.5.x standalon=
e server. No JMX or whatsoever has been configured.
>
>  The app sends massive emails to users with some info that requires users=
 to log on the webapp and fill in some forms. It seems (without any logs or=
 metrics) that people tend to fill the forms right away after they got the =
emails and together with the mailing process (that requires DB use to get e=
mail addresses) is exhausting the maxthreads connections (300 as of yesterd=
ay which I have increased to 400).

How many emails does it send?

>  I assume it's not going to be easy to determine what is the cause of the=
 issue but which tools can I use?

It might just be simple maths. If you send more than 400 emails and
most of those people immediately respond, what would you expect to
happen?


>  I guess I need to log in some way how the server is behaving. Maybe enab=
ling JMX or Javamelody? Any way of getting where the webapp is hanged or wh=
ere in the code of the webapp is hanging?

Access log?
Enable JMX, use VisualVM/JConsole.


>  And which tool can help me to simulate the load of so many people connec=
ting to the webapp remotely?

JMeter.


p


>
>  Regards,
>
>  Miguel
>
> This message and any attachments are intended for the use of the addresse=
e or addressees only. The unauthorised disclosure, use, dissemination or co=
pying (either in whole or in part) of its content is not permitted. If you =
received this message in error, please notify the sender and delete it from=
 your system. Emails can be altered and their integrity cannot be guarantee=
d by the sender.
>
> Please consider the environment before printing this email.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233549-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 13 08:21:02 2012
Return-Path: <users-return-233549-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DDB26909E
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 13 Apr 2012 08:21:02 +0000 (UTC)
Received: (qmail 7917 invoked by uid 500); 13 Apr 2012 08:20:59 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 7862 invoked by uid 500); 13 Apr 2012 08:20:59 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 7841 invoked by uid 99); 13 Apr 2012 08:20:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2012 08:20:58 +0000
X-ASF-Spam-Status: No, hits=-1.6 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [195.245.230.34] (HELO mail1.bemta3.messagelabs.com) (195.245.230.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2012 08:20:51 +0000
Received: from [85.158.137.83:15910] by server-11.bemta-3.messagelabs.com id ED/D9-18894-EC1E78F4; Fri, 13 Apr 2012 08:20:30 +0000
X-Env-Sender: Leigh.Anderson@betfair.com
X-Msg-Ref: server-8.tower-140.messagelabs.com!1334305230!24478671!1
X-Originating-IP: [213.86.197.130]
X-StarScan-Version: 6.5.7; banners=betfair.com,-,-
X-VirusChecked: Checked
Received: (qmail 26689 invoked from network); 13 Apr 2012 08:20:30 -0000
Received: from unknown (HELO HAMCAS03.uk.betfair.local) (213.86.197.130)
  by server-8.tower-140.messagelabs.com with SMTP; 13 Apr 2012 08:20:30 -0000
Received: from HAMMBX03.uk.betfair.local ([fe80::7828:724c:8e7a:6d6b]) by
 HAMCAS03.uk.betfair.local ([::1]) with mapi id 14.01.0355.002; Fri, 13 Apr
 2012 09:20:30 +0100
From: Leigh Anderson <Leigh.Anderson@betfair.com>
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Tomcat7-maven-plugin 2.0-beta1 and useSeparateTomcatClassloader
 fails with run goal
Thread-Topic: Tomcat7-maven-plugin 2.0-beta1 and
 useSeparateTomcatClassloader fails with run goal
Thread-Index: AQHNEWW+jphHNngJdEuNYm49rCONM5aKae+AgAFgDACABLkQgIAGeVaAgAAbooCAAAAkgIABWiyA///xlACAABXeAA==
Date: Fri, 13 Apr 2012 08:20:30 +0000
Message-ID: <CBADA048.D94C%leigh.anderson@betfair.com>
In-Reply-To: <CAPoyBqTEFZd6ZAc2KJDrxioEdRJZz8kABy==KpH-NtuLQpr87A@mail.gmail.com>
Accept-Language: en-GB, en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-originating-ip: [10.9.0.2]
Content-Type: text/plain; charset="us-ascii"
Content-ID: <BDE5BBEA97CB514A9BCD1A1FEE11E68E@betfair.com>
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0


>
>>
>> I'd added
>>=20
>><classLoaderClass>org.springframework.instrument.classloading.tomcat.Tom=
c
>>at
>> InstrumentableClassLoader</classLoaderClass> to the plugin
>>configuration,
>> which was then picked up correctly and used by the WebAppLoader.
>
>Could you attach the patch to an issue ?

MTOMCAT-140 created.

>
>>
>> Thanks,
>> Leigh
>>
>> Index:
>>=20
>>tomcat7-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat=
7
>>/r
>> un/AbstractRunMojo.java
>> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
>> ---
>>=20
>>tomcat7-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat=
7
>>/r
>> un/AbstractRunMojo.java (revision 1)
>> +++
>>=20
>>tomcat7-maven-plugin/src/main/java/org/apache/tomcat/maven/plugin/tomcat=
7
>>/r
>> un/AbstractRunMojo.java (revision )
>> @@ -363,6 +357,15 @@
>>      */
>>     private ClassRealm tomcatRealm;
>>
>> +    /**
>> +     * Class loader class to set.
>> +     *
>> +     * @parameter
>> +     */
>> +    protected String classLoaderClass;
>> +
>>     //
>> ----------------------------------------------------------------------
>>     // Mojo Implementation
>>     //
>> ----------------------------------------------------------------------
>> @@ -460,14 +462,19 @@
>>         {
>>             context.setParentClassLoader( getTomcatClassLoader() );
>>         }
>> +        final WebappLoader loader =3D createWebappLoader();
>>
>> -        context.setLoader( createWebappLoader() );
>> +        context.setLoader( loader );
>>         File contextFile =3D getContextFile();
>>         if ( contextFile !=3D null )
>>         {
>>             context.setConfigFile( getContextFile().toURI().toURL() );
>>         }
>> +        if (classLoaderClass !=3D null) {
>> +            loader.setLoaderClass(classLoaderClass);
>> +        }
>>
>> +
>>         return context;
>>
>>     }
>>
>>
>>
>> On 12/04/2012 13:14, "Olivier Lamy" <olamy@apache.org> wrote:
>>
>>>The plugin has an option to setup context.xml to use see [1].
>>>You can try to write an other context.xml only for using with the
>>>plugin ?
>>>
>>>--
>>>Olivier
>>>
>>>[1]
>>>http://tomcat.apache.org/maven-plugin-2.0-SNAPSHOT/tomcat7-maven-plugin=
/
>>>ru
>>>n-mojo.html#contextFile
>>>
>>>2012/4/12 Leigh Anderson <Leigh.Anderson@betfair.com>:
>>>> Hi Olivier,
>>>>
>>>> That's solved the problem, thanks. Unfortunately, declaring a custom
>>>>class
>>>> loader in a context.xml causes Tomcat to use that one, instead of the=

>>>>one
>>>> set up with the correct class path by the plugin. I'll keep looking t=
o
>>>>see
>>>> if I can find a way around this.
>>>>
>>>> Thanks for your prompt help with this.
>>>> Leigh
>>>>
>>>> On 12/04/2012 11:35, "Olivier Lamy" <olamy@apache.org> wrote:
>>>>
>>>>>Hello,
>>>>>Apologize for delay.
>>>>>That should be fixed now (I have deployed 2.0-SNAPSHOT).
>>>>>If you could try with your use case.
>>>>>Thanks,
>>>>>2012/4/8 Olivier Lamy <olamy@apache.org>:
>>>>>> Hello Leigh,
>>>>>> Thanks for creating issue.
>>>>>> Until now I tried to reproduce the issue but I failed.
>>>>>> I wonder if you could attach a build log using -e mvn flag.
>>>>>>
>>>>>> 2012/4/5 Leigh Anderson <Leigh.Anderson@betfair.com>:
>>>>>>> Hi Olivier,
>>>>>>>
>>>>>>> I'm not able to run this with tomcat6 as it's a Servlet 3.0
>>>>>>>project.
>>>>>>>I'll
>>>>>>> get the issue created -- should have some time next week to put
>>>>>>>together a
>>>>>>> sample project.
>>>>>>>
>>>>>>>
>>>>>>> Thanks,
>>>>>>> Leigh
>>>>>>>
>>>>>>> On 04/04/2012 11:36, "Olivier Lamy" <olamy@apache.org> wrote:
>>>>>>>
>>>>>>>>Hello,
>>>>>>>>Looks to be an issue (does that work with tomcat6:run ?)
>>>>>>>>Could you create an issue here:
>>>>>>>>https://issues.apache.org/jira/browse/MTOMCAT (if possible with a
>>>>>>>>small sample project to reproduce).
>>>>>>>>
>>>>>>>>Thanks
>>>>>>>>--
>>>>>>>>Olivier Lamy
>>>>>>>>Talend: http://coders.talend.com
>>>>>>>>http://twitter.com/olamy | http://linkedin.com/in/olamy
>>>>>>>>
>>>>>>>>2012/4/3 Leigh Anderson <Leigh.Anderson@betfair.com>:
>>>>>>>>> Hi All,
>>>>>>>>>
>>>>>>>>> I'm trying to start a web application with 'mvn tomcat7:run'. It=

>>>>>>>>>seems
>>>>>>>>> that with the configuration below it fails with the following
>>>>>>>>>error:
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>        [INFO]
>>>>>>>>>
>>>>>>>>>-----------------------------------------------------------------=
-
>>>>>>>>>--
>>>>>>>>>--
>>>>>>>>>--
>>>>>>>>>        [ERROR] Failed to execute goal
>>>>>>>>> org.apache.tomcat.maven:tomcat7-maven-plugin:2.0-beta-1:run
>>>>>>>>>(default-cli)
>>>>>>>>> on project mantis-test-web-app: No such archiver: 'jar'. -> [Hel=
p
>>>>>>>>>1]
>>>>>>>>>        [ERROR]
>>>>>>>>>        [ERROR] To see the full stack trace of the errors, re-run=

>>>>>>>>>Maven
>>>>>>>>>with the
>>>>>>>>> -e switch.
>>>>>>>>>        [ERROR] Re-run Maven using the -X switch to enable full
>>>>>>>>>debug
>>>>>>>>>logging.
>>>>>>>>>
>>>>>>>>> I have also tried
>>>>>>>>>        * 'mvn tomcat:run-war', which seems to get past this
>>>>>>>>>point,
>>>>>>>>>but
>>>>>>>>>then the
>>>>>>>>> application will not start because the 'additionalClasspathDir'
>>>>>>>>>property
>>>>>>>>> is not supported by the 'run-war' goal.
>>>>>>>>>        * removing 'useSeparateTomcatClassLoader' which then
>>>>>>>>>doesn't
>>>>>>>>>load the
>>>>>>>>> Spring instrumenting class loader required to use AspectJ LTW,
>>>>>>>>>specified
>>>>>>>>> in
>>>>>>>>> context.xml. I have confirmed that I get the same 'no such
>>>>>>>>>archiver'
>>>>>>>>>error
>>>>>>>>> if I remove the
>>>>>>>>> context.xml, so I don't believe this to be the cause.
>>>>>>>>>
>>>>>>>>> Is there something I've missed in the configuration?
>>>>>>>>>
>>>>>>>>> Cheers,
>>>>>>>>> Leigh
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>                    <plugin>
>>>>>>>>>                        <groupId>org.apache.tomcat.maven</groupId=
>
>>>>>>>>>
>>>>>>>>><artifactId>tomcat7-maven-plugin</artifactId>
>>>>>>>>>                        <version>2.0-beta-1</version>
>>>>>>>>>                        <configuration>
>>>>>>>>>                            <systemProperties>
>>>>>>>>>
>>>>>>>>><log4j.defaultInitOverride>true</log4j.defaultInitOverride>
>>>>>>>>>                                <HOSTNAME>localhost</HOSTNAME>
>>>>>>>>>                                <port.http>9090</port.http>
>>>>>>>>>                                <port.https>8443</port.https>
>>>>>>>>>                            </systemProperties>
>>>>>>>>>                            <port>9090</port>
>>>>>>>>>                            <httpsPort>8443</httpsPort>
>>>>>>>>>                            <path>/</path>
>>>>>>>>>
>>>>>>>>><useTestClasspath>false</useTestClasspath>
>>>>>>>>>                            <additionalClasspathDirs>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>><additionalClasspathDir>${project.basedir}/config</additionalClas=
s
>>>>>>>>>pa
>>>>>>>>>th
>>>>>>>>>Dir
>>>>>>>>>>
>>>>>>>>>                            </additionalClasspathDirs>
>>>>>>>>>
>>>>>>>>> <useSeparateTomcatClassLoader>true</useSeparateTomcatClassLoader=
>
>>>>>>>>>                        </configuration>
>>>>>>>>>                        <dependencies>
>>>>>>>>>                            <dependency>
>>>>>>>>>
>>>>>>>>><groupId>org.springframework</groupId>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>><artifactId>spring-instrument-tomcat</artifactId>
>>>>>>>>>         =20
>>>>>>>>><version>${spring.version}</version>
>>>>>>>>>                            </dependency>
>>>>>>>>>                        </dependencies>
>>>>>>>>>                    </plugin>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>_________________________________________________________________=
_
>>>>>>>>>__
>>>>>>>>>__
>>>>>>>>>__
>>>>>>>>> In order to protect our email recipients, Betfair Group use
>>>>>>>>>SkyScan
>>>>>>>>>from
>>>>>>>>> MessageLabs to scan all Incoming and Outgoing mail for viruses.
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>_________________________________________________________________=
_
>>>>>>>>>__
>>>>>>>>>__
>>>>>>>>>__
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>-----------------------------------------------------------------=
-
>>>>>>>>>--
>>>>>>>>>-
>>>>>>>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>>>>>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>>>>>>>
>>>>>>>>
>>>>>>>>------------------------------------------------------------------=
-
>>>>>>>>--
>>>>>>>>To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>>>>>>For additional commands, e-mail: users-help@tomcat.apache.org
>>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>___________________________________________________________________=
_
>>>>>>>__
>>>>>>>__
>>>>>>> In order to protect our email recipients, Betfair Group use SkySca=
n
>>>>>>>from
>>>>>>> MessageLabs to scan all Incoming and Outgoing mail for viruses.
>>>>>>>
>>>>>>>
>>>>>>>___________________________________________________________________=
_
>>>>>>>__
>>>>>>>__
>>>>>>>
>>>>>>>=20
>>>>>>>-------------------------------------------------------------------=
-
>>>>>>>-
>>>>>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>>>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> --
>>>>>> Olivier Lamy
>>>>>> Talend: http://coders.talend.com
>>>>>> http://twitter.com/olamy | http://linkedin.com/in/olamy
>>>>>
>>>>>
>>>>>
>>>>>--
>>>>>Olivier Lamy
>>>>>Talend: http://coders.talend.com
>>>>>http://twitter.com/olamy | http://linkedin.com/in/olamy
>>>>>
>>>>>---------------------------------------------------------------------=

>>>>>To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>>>For additional commands, e-mail: users-help@tomcat.apache.org
>>>>>
>>>>
>>>>
>>>>=20
>>>>______________________________________________________________________=
_
>>>>_
>>>> In order to protect our email recipients, Betfair Group use SkyScan
>>>>from
>>>> MessageLabs to scan all Incoming and Outgoing mail for viruses.
>>>>
>>>>=20
>>>>______________________________________________________________________=
_
>>>>_
>>>>
>>>> ---------------------------------------------------------------------=

>>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>>
>>>
>>>---------------------------------------------------------------------
>>>To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>For additional commands, e-mail: users-help@tomcat.apache.org
>>>
>>
>>
>> _______________________________________________________________________=
_
>> In order to protect our email recipients, Betfair Group use SkyScan fro=
m
>> MessageLabs to scan all Incoming and Outgoing mail for viruses.
>>
>> _______________________________________________________________________=
_
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>> For additional commands, e-mail: users-help@tomcat.apache.org
>>
>
>
>
>--=20
>Olivier Lamy
>Talend: http://coders.talend.com
>http://twitter.com/olamy | http://linkedin.com/in/olamy
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>For additional commands, e-mail: users-help@tomcat.apache.org
>


________________________________________________________________________
In order to protect our email recipients, Betfair Group use SkyScan from=20=

MessageLabs to scan all Incoming and Outgoing mail for viruses.

________________________________________________________________________

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233550-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 13 08:27:59 2012
Return-Path: <users-return-233550-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DB62CC7EC
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 13 Apr 2012 08:27:59 +0000 (UTC)
Received: (qmail 30495 invoked by uid 500); 13 Apr 2012 08:27:56 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 30230 invoked by uid 500); 13 Apr 2012 08:27:56 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 30211 invoked by uid 99); 13 Apr 2012 08:27:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2012 08:27:55 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [194.51.201.69] (HELO esa-sf3.esa.gmessaging.net) (194.51.201.69)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2012 08:27:48 +0000
Received: from esa-sf3.esa.gmessaging.net (localhost [127.0.0.1])
	by localhost.esa.gmessaging.net (Postfix) with SMTP id 920082F881A;
	Fri, 13 Apr 2012 10:27:20 +0200 (CEST)
Received: from sciops-mailgw.vilspa.esa.int (sciops-mailgw.vilspa.esa.int [193.147.152.105])
	by esa-sf3.esa.gmessaging.net (Postfix) with ESMTP id 76C0B2F855F;
	Fri, 13 Apr 2012 10:27:20 +0200 (CEST)
Received: from sciops.esac.int (scimail.esac.esa.int [193.147.152.87])
	by sciops-mailgw.vilspa.esa.int (Postfix) with ESMTP
	id 3D0868B8FB; Fri, 13 Apr 2012 10:27:25 +0200 (CEST)
Received: from [127.0.0.1] (244.42.17.95.dynamic.jazztel.es [95.17.42.244])
	(authenticated bits=0)
	by sciops.esac.int (8.13.1/8.13.1) with ESMTP id q3D8RNcJ013274
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO);
	Fri, 13 Apr 2012 10:27:24 +0200
Message-ID: <23916_1334305640_4F87E368_23916_347_1_4F87E36C.3050605@yahoo.es>
Date: Fri, 13 Apr 2012 10:27:24 +0200
From: =?UTF-8?B?TWlndWVsIEdvbnrDoWxleiBDYXN0YcOxb3M=?= <miguel_3_gonzalez@yahoo.es>
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Cc: Pid * <pid@pidster.com>
Subject: Re: determining cause of MaxThreads exhausted
References: <10691_1334304500_4F87DEF4_10691_2289_1_4F87DEF7.3080707@yahoo.es> <-3027381026767059488@unknownmsgid>
In-Reply-To: <-3027381026767059488@unknownmsgid>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Antivirus: avast! (VPS 120412-1, 12/04/2012), Outbound message
X-Antivirus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org

On 13/04/2012 10:14, Pid * wrote:
> On 13 Apr 2012, at 09:09, "Miguel Gonzlez Castaos"
> <miguel_3_gonzalez@yahoo.es>  wrote:
>
>> Dear all,
>>
>>   A server that I manage has a Struts webapp with a Tomcat 5.5.x standalone server. No JMX or whatsoever has been configured.
>>
>>   The app sends massive emails to users with some info that requires users to log on the webapp and fill in some forms. It seems (without any logs or metrics) that people tend to fill the forms right away after they got the emails and together with the mailing process (that requires DB use to get email addresses) is exhausting the maxthreads connections (300 as of yesterday which I have increased to 400).
> How many emails does it send?
Around 1000 a minute
>
>>   I assume it's not going to be easy to determine what is the cause of the issue but which tools can I use?
> It might just be simple maths. If you send more than 400 emails and
> most of those people immediately respond, what would you expect to
> happen?
>
>
>>   I guess I need to log in some way how the server is behaving. Maybe enabling JMX or Javamelody? Any way of getting where the webapp is hanged or where in the code of the webapp is hanging?
> Access log?
> Enable JMX, use VisualVM/JConsole.
Any way to use access log to get a view of how many visitors (not 
connections) we are getting?

>
>
>>   And which tool can help me to simulate the load of so many people connecting to the webapp remotely?
> JMeter.
Any howto or article that explains of how to use JMeter in an 
environment like this?

Miguel

This message and any attachments are intended for the use of the addressee or addressees only. The unauthorised disclosure, use, dissemination or copying (either in whole or in part) of its content is not permitted. If you received this message in error, please notify the sender and delete it from your system. Emails can be altered and their integrity cannot be guaranteed by the sender.

Please consider the environment before printing this email.


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233551-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 13 09:17:31 2012
Return-Path: <users-return-233551-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DF59F9D31
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 13 Apr 2012 09:17:31 +0000 (UTC)
Received: (qmail 51686 invoked by uid 500); 13 Apr 2012 09:17:28 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 51606 invoked by uid 500); 13 Apr 2012 09:17:28 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 51580 invoked by uid 99); 13 Apr 2012 09:17:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2012 09:17:27 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,NORMAL_HTTP_TO_IP,RCVD_IN_DNSWL_LOW,SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of svante.kumlien@gmail.com designates 209.85.213.45 as permitted sender)
Received: from [209.85.213.45] (HELO mail-yw0-f45.google.com) (209.85.213.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2012 09:17:17 +0000
Received: by yhoo21 with SMTP id o21so1866126yho.18
        for <users@tomcat.apache.org>; Fri, 13 Apr 2012 02:16:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=FEtODUnIBAGE9Nb3HMKvRwK8rriWZ9C6RT+j8bk3aYs=;
        b=bzjwQ6LiVHx8Zm3mnIKjnna1E6V3Ivp3H0qA0xur+smLoYMnMXBptNgMcQ0rwbqigN
         kU5yhsOLhhQSyPV9q0/4AmeChR2JcxWPj2orupR8eBKK9aHSYj1trwvkmhckRo8to07/
         3JDbWNOy10apJOCbf/wI7eJ9Gf5+htGHskFPZpWtNH7dhHbAOaQ1NfuLI8Vat7sBEZLt
         EeSkghqWmjXXHVrdYLmEqY9cW9QdECt3g+2+ZS1REoR29ZZzBAA1wZrESFZjzoNMtPPD
         X7z9hez8ylH8kLZ3K5/ZAX7y0hsOKmVsTeEi+Oaz62M/XOrTJI14aQJR0GL13PV5fzYO
         RkIQ==
MIME-Version: 1.0
Received: by 10.236.76.41 with SMTP id a29mr872280yhe.117.1334308616808; Fri,
 13 Apr 2012 02:16:56 -0700 (PDT)
Received: by 10.101.182.28 with HTTP; Fri, 13 Apr 2012 02:16:55 -0700 (PDT)
Date: Fri, 13 Apr 2012 11:16:55 +0200
Message-ID: <CABmVr8+xF4w5q03nOyQA31t=mxQ95=EMGqHBxpHYDc3vSCFu2Q@mail.gmail.com>
Subject: Multipart over ajp btwn apache-tomcat fails sometimes...
From: Svante Kumlien <svante.kumlien@gmail.com>
To: users@tomcat.apache.org
Content-Type: multipart/mixed; boundary=20cf303b40e32027fc04bd8befb2

--20cf303b40e32027fc04bd8befb2
Content-Type: multipart/alternative; boundary=20cf303b40e32027df04bd8befb0

--20cf303b40e32027df04bd8befb0
Content-Type: text/plain; charset=ISO-8859-1

Hi all,

My stuff:
Windows Server 2008 R2 64 bit
Apache 2.2.22 with mod_proxy_ajp
Tomcat 7.0.25 (On same server as Apache)

I have an Apache acting as reverse proxy for a Tomcat over ajp.
Apache conf for the proxyPass:
<Location /tomcatSite>
ProxyPass ajp://127.0.0.1:8009/tomcatSite
ProxyPassReverse ajp://127.0.0.1:8009/tomcatSite
</Location>

and the tomcat-config is really basic with nothing added to the default
config.

The webapp listening on /tomcatSite is a servlet-2.5 app and it works
nicely for all types of request except when it comes to multi-part. We have
a java-client uploading .zip-files every night to this webapp and sometimes
it works and sometimes it fails. When testing we trigger the file upload
manually using the same zip file every time with the same result: sometimes
it works, and sometimes it fails.

What happens when it works:
Client sends multipart http-request to Apache.
Apache proxy to Tomcat over AJP
Servlet is called on doPost
Servlet uses apache-commons-fileupload 1.2 to parse the request
Servlet does something with the file
Servlet returns (200 OK)

What happens when it doesn't work:
Client sends http-requst
Apache proxy request
Servlet is called on doPost
Servlet uses apache-commons-fileupload
Commons-fileupload throws an Exception with message "Stream closed"
(Gaahhh, the stack trace is swallowed, I only have the message string! The
exception is thrown from  FileUploadBase.parseRequest :-( )
Servlet sends an email to admin
Servlet returns 200 OK

The behaviour seem random but I would say that it fails 80% using the same
file, same server, no restart.

I attach two pcap-files with a ok-case and a fail-case. The difference I
can see is that in the fail-case tomcat starts to send the response before
the first Body chunk is sent by Apache. In the ok-case the first Body-chunk
is sent by Apache the same millisecond as the first Request packet but in
the failing case the first Body chunk is sent a couple of millis after the
first packet somehow allowing Tomcat/my servlet to fail before the complete
request is received.

If we switch the proxyPass to use http everything works 100% of the time
(which makes me think I have a misconfig AJP connector somewhere...).

Any ideas/pointers are more than welcome!

br
Svante

--20cf303b40e32027df04bd8befb0
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi all,
<div><br></div><div>My stuff:</div><div>Windows Server 2008 R2 64 bit</div>=
<div>Apache 2.2.22 with mod_proxy_ajp</div><div>Tomcat 7.0.25 (On same serv=
er as Apache)</div><div><br></div><div>I have an Apache acting as reverse p=
roxy for a Tomcat over ajp.=A0</div>
<div>Apache conf for the proxyPass:</div><div><div>&lt;Location /tomcatSite=
&gt;</div><div><span class=3D"Apple-tab-span" style=3D"white-space:pre">		<=
/span>ProxyPass ajp://<a href=3D"http://127.0.0.1:8009/tomcatSite">127.0.0.=
1:8009/tomcatSite</a></div>
<div><span class=3D"Apple-tab-span" style=3D"white-space:pre">		</span>Prox=
yPassReverse ajp://<a href=3D"http://127.0.0.1:8009/tomcatSite">127.0.0.1:8=
009/tomcatSite</a></div><div>&lt;/Location&gt;</div></div><div><br></div><d=
iv>
and the tomcat-config is really basic with nothing added to the default con=
fig.</div><div><br></div><div>The webapp listening on /tomcatSite is a serv=
let-2.5 app and it works nicely for all types of request except when it com=
es to multi-part. We have a java-client uploading .zip-files every night to=
 this webapp and sometimes it works and sometimes it fails. When testing we=
 trigger the file upload manually using the same zip file every time with t=
he same result: sometimes it works, and sometimes it fails.=A0</div>
<div><br></div><div>What happens when it works:</div><div>Client sends mult=
ipart http-request to Apache.</div><div>Apache proxy to Tomcat over AJP</di=
v><div>Servlet is called on doPost</div><div>Servlet uses apache-commons-fi=
leupload 1.2 to parse the request</div>
<div>Servlet does something with the file</div><div>Servlet returns (200 OK=
)</div><div><br></div><div>What happens when it doesn&#39;t work:</div><div=
>Client sends http-requst</div><div>Apache proxy request</div><div>Servlet =
is called on doPost</div>
<div>Servlet uses apache-commons-fileupload</div><div>Commons-fileupload th=
rows an Exception with message &quot;Stream closed&quot;=A0</div><div>(Gaah=
hh, the stack trace is swallowed, I only have the message string! The excep=
tion is thrown from =A0FileUploadBase.parseRequest :-( )</div>
<div>Servlet sends an email to admin</div><div>Servlet returns 200 OK</div>=
<div><br></div><div>The behaviour seem random but I would say that it fails=
 80% using the same file, same server, no restart.=A0</div><div><br></div>
<div>I attach two pcap-files with a ok-case and a fail-case. The difference=
 I can see is that in the fail-case tomcat starts to send the response befo=
re the first Body chunk is sent by Apache. In the ok-case the first Body-ch=
unk is sent by Apache the same millisecond as the first Request packet but =
in the failing case the first Body chunk is sent a couple of millis after t=
he first packet somehow allowing Tomcat/my servlet to fail before the compl=
ete request is received.=A0</div>
<div><br></div><div>If we switch the proxyPass to use http everything works=
 100% of the time (which makes me think I have a misconfig AJP connector so=
mewhere...).=A0</div><div><br></div><div>Any ideas/pointers are more than w=
elcome!=A0</div>
<div><br></div><div>br</div><div>Svante</div><div><br></div><div><br></div>

--20cf303b40e32027df04bd8befb0--

--20cf303b40e32027fc04bd8befb2
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org
--20cf303b40e32027fc04bd8befb2--

From users-return-233552-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 13 09:37:06 2012
Return-Path: <users-return-233552-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3A41892B8
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 13 Apr 2012 09:37:06 +0000 (UTC)
Received: (qmail 2475 invoked by uid 500); 13 Apr 2012 09:37:03 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 2257 invoked by uid 500); 13 Apr 2012 09:37:02 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 2226 invoked by uid 99); 13 Apr 2012 09:37:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2012 09:37:01 +0000
X-ASF-Spam-Status: No, hits=-4.3 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [192.35.17.14] (HELO david.siemens.de) (192.35.17.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2012 09:36:52 +0000
Received: from mail1.siemens.de (localhost [127.0.0.1])
	by david.siemens.de (8.13.6/8.13.6) with ESMTP id q3D9aUm6005447
	for <users@tomcat.apache.org>; Fri, 13 Apr 2012 11:36:30 +0200
Received: from DEMCHP99ET3MSX.ww902.siemens.net (demchp99et3msx.ww902.siemens.net [139.25.131.243])
	by mail1.siemens.de (8.13.6/8.13.6) with ESMTP id q3D9aUHa026553
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <users@tomcat.apache.org>; Fri, 13 Apr 2012 11:36:30 +0200
Received: from DEMCHP99E84MSX.ww902.siemens.net ([169.254.1.87]) by
 DEMCHP99ET3MSX.ww902.siemens.net ([139.25.131.243]) with mapi; Fri, 13 Apr
 2012 11:36:29 +0200
From: "Osipov, Michael" <michael.osipov@siemens.com>
To: Tomcat Users List <users@tomcat.apache.org>
Date: Fri, 13 Apr 2012 11:36:28 +0200
Subject: RE: StandardHostValve kills custom error message
Thread-Topic: StandardHostValve kills custom error message
Thread-Index: Ac0Yr8Urf8EzMYMqT8it2cO+QTmC/gAqO1cg
Message-ID: <6368FCCCD803D64BB0931D7F5F0A3DD50227830E9D@DEMCHP99E84MSX.ww902.siemens.net>
References: <6368FCCCD803D64BB0931D7F5F0A3DD50227830AB1@DEMCHP99E84MSX.ww902.siemens.net>
 <CABzHfV=4zXYQaYehW96emvsN7w6_mOkDXArZTPegX66Pwx-7sA@mail.gmail.com>
In-Reply-To: <CABzHfV=4zXYQaYehW96emvsN7w6_mOkDXArZTPegX66Pwx-7sA@mail.gmail.com>
Accept-Language: de-DE
Content-Language: de-DE
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: de-DE
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

Konstantin Kolinko wrote:
=20
>> The message is not diplayed because in line 282 to 286 the message
>> is killed by:=20
>> else {
>> =A0 =A0 =A0 =A0 =A0 =A0// A custom error-page has not been defined for t=
he
>> exception=20
>> =A0 =A0 =A0 =A0 =A0 =A0// that was thrown during request processing. Che=
ck if an
>> =A0 =A0 =A0 =A0 =A0 =A0// error-page for error code 500 was specified an=
d if so,
>> =A0 =A0 =A0 =A0 =A0 =A0// send that page back as the response.
>> =A0 =A0 =A0 =A0 =A0
>> response.setStatus(HttpServletResponse.SC_INTERNAL_SERVER_ERROR);=20
>> =A0 =A0 =A0 =A0 =A0 =A0// The response is an error
>> =A0 =A0 =A0 =A0 =A0 =A0response.setError();
>>=20
>> =A0 =A0 =A0 =A0 =A0 =A0status(request, response);
>> =A0 =A0 =A0 =A0}
>>=20
>> It seems like this valve does not care if it handles an uncaught
>> exception or a deliberate exception.=20
>> Can this be fixed without patching the valve?
>>=20
>> I guess not. I would file a ticket about that: A mere
>> response#isError call would suffice to wrap that behavior and pass
>> the response as is. =20
>>=20
>=20
>=20
> My understanding is that it is responsibility of the Container to
> provide the value for the request attribute
> "javax.servlet.error.exception"

There is simple fix. A examined other server-side component how they set th=
at attribute and adapted my code.
All you need to do is described in my new ticket: https://issues.apache.org=
/bugzilla/show_bug.cgi?id=3D53071

With best regards,
Michael Osipov

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233553-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 13 09:49:17 2012
Return-Path: <users-return-233553-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B811A9636
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 13 Apr 2012 09:49:17 +0000 (UTC)
Received: (qmail 33656 invoked by uid 500); 13 Apr 2012 09:49:14 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 33601 invoked by uid 500); 13 Apr 2012 09:49:14 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 33588 invoked by uid 99); 13 Apr 2012 09:49:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2012 09:49:13 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of knst.kolinko@gmail.com designates 209.85.213.173 as permitted sender)
Received: from [209.85.213.173] (HELO mail-yx0-f173.google.com) (209.85.213.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2012 09:49:06 +0000
Received: by yenr5 with SMTP id r5so1880457yen.18
        for <users@tomcat.apache.org>; Fri, 13 Apr 2012 02:48:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=gmy/gZ/3a5V1rpEXn0xSTkO3+V4fcN0JyxoGGAR6oIY=;
        b=b9TSX0AYgqoss+SVTXRsej+CFrKcumBn1cx8yUG+1UEB+YPYMgIeZXgOCePPnXlMe9
         jmw5DwOAgtetJ/ck/WILq5Jpf/dr5xX6MnGx9BSrTk0gxUi9O/TK40vKoO7j4USLWjKe
         hwuNqeXlXjNXKyG0gTLc/h/varcOIe9wVcXL/sOOj7kHUNmHDpf9GJaO/enUCRQ2It+L
         qJkAxGiBM69IpMufv8qI5ZaUPEjlVpxVMzI/Ud9+pybI1gAQNNQ+EXx7XiISZm4ZqwnO
         46f9QhSrEIaVDkOCvQMhOhh/jlsfHRNWGONkxug5wMIsF116myvRqtYgNTUtXZMH6ay+
         8LVw==
MIME-Version: 1.0
Received: by 10.236.170.71 with SMTP id o47mr933450yhl.104.1334310525527; Fri,
 13 Apr 2012 02:48:45 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Fri, 13 Apr 2012 02:48:45 -0700 (PDT)
In-Reply-To: <D4515427-13CA-43AA-A99C-480EECD601A4@gmail.com>
References: <51200CB4-D325-4019-A12A-5A0FDCC8987E@me.com>
	<0B75C850-2329-47A0-AEAF-A6B7CC14D35F@gmail.com>
	<CAPoyBqRbT3w_C=3DEomct-hRkKsVpUTBaEd9pjTFn3r=McLMfg@mail.gmail.com>
	<5E45D237-38F2-473F-A5FB-9D6367F1DDD6@gmail.com>
	<CAPoyBqTKZ3vABf6zqo2g9WXEa7yec1kVerSY3uwb8C8bOrLyrw@mail.gmail.com>
	<C24FEA44-BB75-4EE1-A4E2-81FDD4F84FB3@gmail.com>
	<CAPoyBqRO=i4sWqRxjOdj_J4Bky=mFhJD_d9MVxPPMCXAzP-gWA@mail.gmail.com>
	<80D886CA-1FC6-4231-9D10-ACA8DD2A37D3@gmail.com>
	<CAPoyBqTw6LMYvgd8BPBbocmPLEYKRtiNOvTa=o96AtF4==10dg@mail.gmail.com>
	<34653922-1820-4494-B054-12EA88265790@gmail.com>
	<D4515427-13CA-43AA-A99C-480EECD601A4@gmail.com>
Date: Fri, 13 Apr 2012 13:48:45 +0400
Message-ID: <CABzHfVn+LYrh-6Z-JVYOF=vdnGW=sfDizS4UBQHZgVMV2vw25w@mail.gmail.com>
Subject: Re: Tomcat 7 Maven plugin: deploy fails with tomcatManager status
 code:401, ReasonPhrase:Unauthorized
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

2012/4/13 Matt Munz <matt.m.munz@gmail.com>:
> Olivier,
>
> =A0When I try to deploy from Maven, the following message appears in the =
access log. [1] =A0There are no other messages in any of the other logs for=
 this event.
>
> [1] 127.0.0.1 - - [12/Apr/2012:21:15:59 -0700] "PUT /manager/html/deploy?=
path=3D%2F HTTP/1.1" 401 2550

manager/html/deploy?

That is what is used when you use HTML GUI of the manager app.

Automated tools use Text interface, not HTML one.

It has different address (and requires different user role).

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233554-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 13 10:38:44 2012
Return-Path: <users-return-233554-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1E8859058
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 13 Apr 2012 10:38:44 +0000 (UTC)
Received: (qmail 56064 invoked by uid 500); 13 Apr 2012 10:38:40 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 55880 invoked by uid 500); 13 Apr 2012 10:38:40 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 55869 invoked by uid 99); 13 Apr 2012 10:38:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2012 10:38:40 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [80.12.242.68] (HELO smtpout.wanadoo.co.uk) (80.12.242.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2012 10:38:31 +0000
Received: from mail.homeinbox.net ([2.24.223.51])
	by mwinf5d48 with ME
	id xNeA1i00E178yXW03NeARV; Fri, 13 Apr 2012 12:38:11 +0200
Received: from localhost (localhost [127.0.0.1])
	by mail.homeinbox.net (Postfix) with ESMTP id 7550AB22002
	for <users@tomcat.apache.org>; Fri, 13 Apr 2012 11:38:10 +0100 (BST)
X-Virus-Scanned: Debian amavisd-new at homeinbox.net
Received: from mail.homeinbox.net ([127.0.0.1])
	by localhost (mail.homeinbox.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id sflZmlEuvmZs for <users@tomcat.apache.org>;
	Fri, 13 Apr 2012 11:37:49 +0100 (BST)
Received: from [10.179.39.113] (unknown [213.205.225.248])
	(using TLSv1 with cipher RC4-MD5 (128/128 bits))
	(No client certificate requested)
	by mail.homeinbox.net (Postfix) with ESMTPSA id 599EDB22001
	for <users@tomcat.apache.org>; Fri, 13 Apr 2012 11:37:49 +0100 (BST)
References: <1334112426.9730.YahooMailMobile@web110413.mail.gq1.yahoo.com> <4F854E8C.4070003@pidster.com> <d14bdc88-c9f2-4d8c-b2c2-624115afc614@email.android.com> <1334282972.92558.YahooMailNeo@web110402.mail.gq1.yahoo.com>
User-Agent: K-9 Mail for Android
In-Reply-To: <1334282972.92558.YahooMailNeo@web110402.mail.gq1.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 8bit
Subject: Re: 7.0.25 to 7.0.27 requires -Xmx32m to go to -Xmx512m
From: markt@apache.org
Date: Fri, 13 Apr 2012 11:37:34 +0100
To: Tomcat Users List <users@tomcat.apache.org>
Message-ID: <f76e7f9d-fc16-4e3f-8e79-8e45a61d16b5@email.android.com>

Peter <peterdnight@yahoo.com> wrote:

>Thanks for the response Mark - it is consistent with both observations
>that i noted in the original email (heap post startup was near 0, and
>disabling scanning resolves). I looked in the changelog in 26/27 and
>did not see anything in there that fits this? If your hypothesis is
>correct , I suspect quite a few people will be in for a shock when they
>deploy 7.0.27 or later into a production env where memory footprints
>are much more managed then say in eclipse on your desktop ;)
>
>The issue might not be with the spec, but the tomcat implementation
>where by everything is getting loaded into ram during scanning. In
>7.0.25 - I could start a "typical" Spring application in 32mb. 7.0.27
>requires 512mb? 
>
>
>- Peter
>
>
>
>________________________________
> From: Mark Thomas <markt@apache.org>
>To: Tomcat Users List <users@tomcat.apache.org> 
>Sent: Wednesday, April 11, 2012 6:50 AM
>Subject: Re: 7.0.25 to 7.0.27 requires -Xmx32m to go to -Xmx512m
> 
>
>
>Pid <pid@pidster.com> wrote:
>
>>On 11/04/2012 03:47, Peter wrote:
>>> hey Christopher,
>>> 
>>> the app I used that uncovered the issue is one I use exclusively to
>>validate tomcat releases;) it is a "hello world" style app using
>>spring/servlet3.0. it has simple spring aop point cutting via jamon ,
>>simple spring jms (active mq) simple spring jaxrs, simple spring
>jaxws,
>>simple spring mvc, simple spring security,... (spring 3.0.7)
>>> 
>>> bunch of very simple examples that end up pulling in "many" jars.
>>
>>Can you post it to github or somewhere public?
>>
>>
>>p
>>
>>
>>> I will grab a dump tomorrow, thanks for response,
>>> peter
>
>I know exactly where this memory is going. During the scanning process
>Tomcat has to scan every single class in the application and its
>libraries and every class and interface in that class's hierarchy for
>annotations (we don't have a choice in this - the spec requires it).
>This can lead to the same class being scanned many times during startup
>and that is slow. Tomcat now caches the result of scanning a class
>which means each class only has to be scanned once. However, this does
>mean that all the results are in memory until the scan is complete. If
>you have a lot of libraries, that could require a lot of memory. If you
>know a JAR doesn't need scanning, add it to the jarsToSkip property. If
>it is a popular jar then create an enhancement request and we'll add it
>to the default list. The other option is to set metadata complete in
>the web.xml
>
>I haven't reviewed the scanning caching code but there may be some
>opportunities to reduce the memory footprint of the cache.
>
>Mark
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>For additional commands, e-mail: users-help@tomcat.apache.org

The specification requires that every class and its hierarchy is scanned for annotations when the web app start. It was the Spring folks complaining about the slow start time when we didn't cache anything during the scan process.

As I have said before:
- If you don't need to scan jars, add them to the skip list. If they are common jars tell us what they are and we'll add them.
- If you do need to scan them the memory usage is the price you pay for fast startup. I have not reviewed the cache code to see if it could be more efficient.

Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233555-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 13 12:09:15 2012
Return-Path: <users-return-233555-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 339AA9F39
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 13 Apr 2012 12:09:15 +0000 (UTC)
Received: (qmail 1974 invoked by uid 500); 13 Apr 2012 12:09:11 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 1813 invoked by uid 500); 13 Apr 2012 12:09:11 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 1804 invoked by uid 99); 13 Apr 2012 12:09:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2012 12:09:11 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of knst.kolinko@gmail.com designates 209.85.213.173 as permitted sender)
Received: from [209.85.213.173] (HELO mail-yx0-f173.google.com) (209.85.213.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2012 12:09:05 +0000
Received: by yenr5 with SMTP id r5so1937152yen.18
        for <users@tomcat.apache.org>; Fri, 13 Apr 2012 05:08:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=LX3YckgUEo+CTbwG3qwYi/Kpm6wSucNq+nVJV5q5PD8=;
        b=zCRiYv8FpSA7JcPllcI0jwcF7UbWs5dd6A1t5RYHWb0wrM2nMDSSgbClwFPQKBHtwI
         9YlCLjVZRkg1eq5fanqkEMf2GDYfs5jcMy2o9MPK/AKWhpoSdlxGwPnOiIRmQbHo9xwk
         J8uz2XJuolN805Rw0ac8BCNeVNODxH5b3zzhrZT4Alc2OEkNFQ8ec2X66o0wqt6iGtqj
         MP3m1+8ujDgSmFW48W2T0pc0/0Vt9MbvEQWTwDzfCIEa6kienon4WnsWERk+8hy3Nf5W
         r7rhsqJIQAyvO9laFu3JKQiraIsVy0IsfmQf1+vzzga79whRvh96tl6cLQeqsh4c8pVD
         Extw==
MIME-Version: 1.0
Received: by 10.236.174.35 with SMTP id w23mr1316258yhl.35.1334318923379; Fri,
 13 Apr 2012 05:08:43 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Fri, 13 Apr 2012 05:08:42 -0700 (PDT)
In-Reply-To: <f76e7f9d-fc16-4e3f-8e79-8e45a61d16b5@email.android.com>
References: <1334112426.9730.YahooMailMobile@web110413.mail.gq1.yahoo.com>
	<4F854E8C.4070003@pidster.com>
	<d14bdc88-c9f2-4d8c-b2c2-624115afc614@email.android.com>
	<1334282972.92558.YahooMailNeo@web110402.mail.gq1.yahoo.com>
	<f76e7f9d-fc16-4e3f-8e79-8e45a61d16b5@email.android.com>
Date: Fri, 13 Apr 2012 16:08:42 +0400
Message-ID: <CABzHfV=POs8+OMRVeJry0vskWFOELekjZZJAKtYkxZQA0-KUxw@mail.gmail.com>
Subject: Re: 7.0.25 to 7.0.27 requires -Xmx32m to go to -Xmx512m
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

2012/4/13  <markt@apache.org>:
>
> The specification requires that every class and its hierarchy is scanned for annotations when the web app start. It was the Spring folks complaining about the slow start time when we didn't cache anything during the scan process.
>
> As I have said before:
> - If you don't need to scan jars, add them to the skip list. If they are common jars tell us what they are and we'll add them.

or add metadata-complete="true" to the root element of your web.xml

> - If you do need to scan them the memory usage is the price you pay for fast startup. I have not reviewed the cache code to see if it could be more efficient.

Everybody else can help here. It is opensource.


BTW, here are patterns that I use in some of my configurations
(configured for Spring 2.5, 3.0 applications).

I have not run all my apps on 7.0.27 yet, but some run on 7.0.27 already.

Line ends added for readability.

I have not reviewed Spring 3.1 yet.

aopalliance-*.jar,
cglib-*.jar,
spring-security-acl-2.*.jar,
spring-security-catalina-2.*.jar,
spring-security-core-2.*.jar,
spring-security-core-tiger-2.*.jar,
spring-security-acl-3.*.jar,
spring-security-aspects-3.*.jar,
spring-security-cas-client-3.*.jar,
spring-security-config-3.*.jar,
spring-security-core-3.*.jar,
spring-security-ldap-3.*.jar,
spring-security-openid-3.*.jar,
spring-security-web-3.*.jar,
spring.jar,
spring-2.*.jar,
spring-aop*.jar,
spring-beans*.jar,
spring-context*.jar,
spring-core*.jar,
spring-jdbc*.jar,
spring-jms*.jar,
spring-orm*.jar,
spring-test*.jar,
spring-tx*.jar,
spring-web.jar,
spring-web-2.*.jar,
spring-webmvc-portlet*.jar,
spring-webmvc-struts*.jar,
org.springframework.aop-3.*.jar,
org.springframework.asm-3.*.jar,
org.springframework.aspects-3.*.jar,
org.springframework.beans-3.*.jar,
org.springframework.context.support-3.*.jar,
org.springframework.context-3.*.jar,
org.springframework.core-3.*.jar,
org.springframework.expression-3.*.jar,
org.springframework.instrument.tomcat-3.*.jar,
org.springframework.instrument-3.*.jar,
org.springframework.jdbc-3.*.jar,
org.springframework.jms-3.*.jar,
org.springframework.orm-3.*.jar,
org.springframework.oxm-3.*.jar,
org.springframework.test-3.*.jar,
org.springframework.transaction-3.*.jar,
org.springframework.web.portlet-3.*.jar,
org.springframework.web.struts-3.*.jar,
org.springframework.web-3.*.jar,

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233556-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 13 20:34:25 2012
Return-Path: <users-return-233556-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6495B921D
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 13 Apr 2012 20:34:25 +0000 (UTC)
Received: (qmail 77930 invoked by uid 500); 13 Apr 2012 20:34:21 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 77690 invoked by uid 500); 13 Apr 2012 20:34:21 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 77681 invoked by uid 99); 13 Apr 2012 20:34:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2012 20:34:21 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [76.96.62.17] (HELO qmta10.westchester.pa.mail.comcast.net) (76.96.62.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2012 20:34:14 +0000
Received: from omta08.westchester.pa.mail.comcast.net ([76.96.62.12])
	by qmta10.westchester.pa.mail.comcast.net with comcast
	id xYZV1i0060Fqzac5AYZtaP; Fri, 13 Apr 2012 20:33:53 +0000
Received: from Christophers-MacBook-Pro.local ([72.84.138.57])
	by omta08.westchester.pa.mail.comcast.net with comcast
	id xYZX1i01q1EVHTc3UYZd5K; Fri, 13 Apr 2012 20:33:48 +0000
Message-ID: <4F888D9B.8040800@christopherschultz.net>
Date: Fri, 13 Apr 2012 16:33:31 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: determining cause of MaxThreads exhausted
References: <10691_1334304500_4F87DEF4_10691_2289_1_4F87DEF7.3080707@yahoo.es> <-3027381026767059488@unknownmsgid> <23916_1334305640_4F87E368_23916_347_1_4F87E36C.3050605@yahoo.es>
In-Reply-To: <23916_1334305640_4F87E368_23916_347_1_4F87E36C.3050605@yahoo.es>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Miguel,

On 4/13/12 4:27 AM, Miguel Gonzlez Castaos wrote:
> The app sends massive emails to users with some info that requires 
> users to log on the webapp and fill in some forms. It seems
> (without any logs or metrics) that people tend to fill the forms
> right away after they got the emails and together with the mailing
> process (that requires DB use to get email addresses) is exhausting
> the maxthreads connections (300 as of yesterday which I have
> increased to 400).

Are you running out of request processors (<Connector> maxThreads) or
are you running out of database connections (<Resource> maxActive)?

>> How many emails does it send?
> Around 1000 a minute

I'm not sure the email volume has anything to do with the resource
availability, other than an email may intise someone to go to your
site, which will (temporarily) use up a request processor thread and
(possibly) a database connection.

> Any way to use access log to get a view of how many visitors (not 
> connections) we are getting?

Yes: log the timestamp of each access, then use one of the many fine
web server analysis tools to get a picture (literally) of your volume.

> Any howto or article that explains of how to use JMeter in an 
> environment like this?

JMeter is used virtually the same way in all environments: only you
understand the nuances of your own software and can craft a load test
that is appropriate for your application.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+IjZsACgkQ9CaO5/Lv0PCtIQCgkZQncIn89KmLG5dvTyweJ90q
xtYAn1aeBsx+W97Kx0sqeIq489HFFKXF
=PKaP
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233557-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 13 20:41:03 2012
Return-Path: <users-return-233557-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D5F9E9544
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 13 Apr 2012 20:41:02 +0000 (UTC)
Received: (qmail 93683 invoked by uid 500); 13 Apr 2012 20:40:59 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 93448 invoked by uid 500); 13 Apr 2012 20:40:59 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 93434 invoked by uid 99); 13 Apr 2012 20:40:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2012 20:40:59 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [194.51.201.67] (HELO esa-sf1.esa.gmessaging.net) (194.51.201.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2012 20:40:48 +0000
Received: from esa-sf1.esa.gmessaging.net (localhost [127.0.0.1])
	by localhost.esa.gmessaging.net (Postfix) with SMTP id 824A45F964E;
	Fri, 13 Apr 2012 22:40:17 +0200 (CEST)
Received: from sciops-mailgw.vilspa.esa.int (sciops-mailgw.vilspa.esa.int [193.147.152.105])
	by esa-sf1.esa.gmessaging.net (Postfix) with ESMTP id 617A75F95F6;
	Fri, 13 Apr 2012 22:40:17 +0200 (CEST)
Received: from sciops.esac.int (scimail.esac.esa.int [193.147.152.87])
	by sciops-mailgw.vilspa.esa.int (Postfix) with ESMTP
	id E0C468B914; Fri, 13 Apr 2012 22:40:27 +0200 (CEST)
Received: from [127.0.0.1] (82.39.17.95.dynamic.jazztel.es [95.17.39.82])
	(authenticated bits=0)
	by sciops.esac.int (8.13.1/8.13.1) with ESMTP id q3DKeQN2010995
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO);
	Fri, 13 Apr 2012 22:40:27 +0200
Message-ID: <12637_1334349617_4F888F31_12637_7950_1_4F888F3B.7080708@yahoo.es>
Date: Fri, 13 Apr 2012 22:40:27 +0200
From: =?UTF-8?B?TWlndWVsIEdvbnrDoWxleiBDYXN0YcOxb3M=?= <miguel_3_gonzalez@yahoo.es>
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Cc: Christopher Schultz <chris@christopherschultz.net>
Subject: Re: determining cause of MaxThreads exhausted
References: <10691_1334304500_4F87DEF4_10691_2289_1_4F87DEF7.3080707@yahoo.es> <-3027381026767059488@unknownmsgid> <23916_1334305640_4F87E368_23916_347_1_4F87E36C.3050605@yahoo.es> <4F888D9B.8040800@christopherschultz.net>
In-Reply-To: <4F888D9B.8040800@christopherschultz.net>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Antivirus: avast! (VPS 120413-0, 13/04/2012), Outbound message
X-Antivirus-Status: Clean


>> The app sends massive emails to users with some info that requires
>> users to log on the webapp and fill in some forms. It seems
>> (without any logs or metrics) that people tend to fill the forms
>> right away after they got the emails and together with the mailing
>> process (that requires DB use to get email addresses) is exhausting
>> the maxthreads connections (300 as of yesterday which I have
>> increased to 400).
> Are you running out of request processors (<Connector>  maxThreads) or
> are you running out of database connections (<Resource>  maxActive)?
MaxThreads
> Yes: log the timestamp of each access, then use one of the many fine
> web server analysis tools to get a picture (literally) of your volume.
I have an access log with timestamps, which tool do you recommend to get 
an analysis?

Regards,

Miguel

This message and any attachments are intended for the use of the addressee or addressees only. The unauthorised disclosure, use, dissemination or copying (either in whole or in part) of its content is not permitted. If you received this message in error, please notify the sender and delete it from your system. Emails can be altered and their integrity cannot be guaranteed by the sender.

Please consider the environment before printing this email.


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233558-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 13 20:41:37 2012
Return-Path: <users-return-233558-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A32A69567
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 13 Apr 2012 20:41:37 +0000 (UTC)
Received: (qmail 97269 invoked by uid 500); 13 Apr 2012 20:41:34 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 97055 invoked by uid 500); 13 Apr 2012 20:41:34 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 97044 invoked by uid 99); 13 Apr 2012 20:41:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2012 20:41:34 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [76.96.62.96] (HELO qmta09.westchester.pa.mail.comcast.net) (76.96.62.96)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 Apr 2012 20:41:26 +0000
Received: from omta22.westchester.pa.mail.comcast.net ([76.96.62.73])
	by qmta09.westchester.pa.mail.comcast.net with comcast
	id xWnX1i00J1ap0As59Yh6ZC; Fri, 13 Apr 2012 20:41:06 +0000
Received: from Christophers-MacBook-Pro.local ([72.84.138.57])
	by omta22.westchester.pa.mail.comcast.net with comcast
	id xYgl1i0131EVHTc3iYgrtW; Fri, 13 Apr 2012 20:41:01 +0000
Message-ID: <4F888F4D.5060309@christopherschultz.net>
Date: Fri, 13 Apr 2012 16:40:45 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Multipart over ajp btwn apache-tomcat fails sometimes...
References: <CABmVr8+xF4w5q03nOyQA31t=mxQ95=EMGqHBxpHYDc3vSCFu2Q@mail.gmail.com>
In-Reply-To: <CABmVr8+xF4w5q03nOyQA31t=mxQ95=EMGqHBxpHYDc3vSCFu2Q@mail.gmail.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Svante,

On 4/13/12 5:16 AM, Svante Kumlien wrote:
> I have an Apache acting as reverse proxy for a Tomcat over ajp.

Standard stupid question: are you sure you need Apache httpd in the mix?

> (Gaahhh, the stack trace is swallowed, I only have the message
> string! The exception is thrown from  FileUploadBase.parseRequest
> :-( )

Is there any way to get the full stack trace? Can you re-deploy with
some modified code to get it?

> I attach two pcap-files with a ok-case and a fail-case.

The mailing list has stripped your attachments. Try to copy/paste text
into a re-post or post a link to your file(s) instead.

> The difference I can see is that in the fail-case tomcat starts to
> send the response before the first Body chunk is sent by Apache.

Can you sniff the traffic between httpd and Tomcat?

Do you have large headers or anything like that? The AJP message could
be rejected because the headers don't fit into a single AJP packet --
but that shouldn't trigger a failure in FileUploadBase.

Is there HTTPS in the mix anywhere? Client certs can make the headers
large.

> If we switch the proxyPass to use http everything works 100% of the
> time (which makes me think I have a misconfig AJP connector
> somewhere...).

Can you post the rest of your AJP configuration? For instance, what
does your <Connector> look like on the Tomcat side?

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+Ij00ACgkQ9CaO5/Lv0PCULQCgoBmlLJJkuSpcXDUxbKLc0Ptl
eusAoLlVdrUsETpscxjlCaG04dO4/12e
=UpxR
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233559-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sat Apr 14 21:50:38 2012
Return-Path: <users-return-233559-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3C7FE9DFC
	for <apmail-tomcat-users-archive@www.apache.org>; Sat, 14 Apr 2012 21:50:38 +0000 (UTC)
Received: (qmail 45118 invoked by uid 500); 14 Apr 2012 21:50:34 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 45063 invoked by uid 500); 14 Apr 2012 21:50:34 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 45052 invoked by uid 99); 14 Apr 2012 21:50:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Apr 2012 21:50:34 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jak-tomcat-user@m.gmane.org designates 80.91.229.3 as permitted sender)
Received: from [80.91.229.3] (HELO plane.gmane.org) (80.91.229.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 Apr 2012 21:50:28 +0000
Received: from list by plane.gmane.org with local (Exim 4.69)
	(envelope-from <jak-tomcat-user@m.gmane.org>)
	id 1SJAr5-00052w-LV
	for users@tomcat.apache.org; Sat, 14 Apr 2012 23:50:04 +0200
Received: from pool-108-48-67-55.washdc.fios.verizon.net ([108.48.67.55])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <users@tomcat.apache.org>; Sat, 14 Apr 2012 23:50:03 +0200
Received: from advanig by pool-108-48-67-55.washdc.fios.verizon.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <users@tomcat.apache.org>; Sat, 14 Apr 2012 23:50:03 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: users@tomcat.apache.org
From: Gautam <advanig@gmail.com>
Subject: Cannot connect to tomcat through apache (proxy)
Date: Sat, 14 Apr 2012 21:46:18 +0000 (UTC)
Lines: 75
Message-ID: <loom.20120414T200146-789@post.gmane.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@dough.gmane.org
X-Gmane-NNTP-Posting-Host: sea.gmane.org
User-Agent: Loom/3.14 (http://gmane.org/)
X-Loom-IP: 108.48.67.55 (Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/534.52.7 (KHTML, like Gecko) Version/5.1.2 Safari/534.52.7)
X-Virus-Checked: Checked by ClamAV on apache.org



We have a set up where we use apache web server to respond to secure (https)
web pages/services on server 1. For one particular service, we need to forward
the request to another server 2 on which we have tomcat running.   
We have done this in order to maintain the URL scheme.  Also we want to resolve 
the ssl on server 1 since all other services get resolved there and we don't want
to deal with ssl on the 
tomcat server for that one service.  So for that one service we want to setup
apache as a proxy to tomact server.

We took guidance from this blog in setting up our servers:
http://pwu-
developer.blogspot.in/2011/04/securing-tomcat-with-apache-web-server.html

Here is our set up:


On server 1 with Apache:

The following directives have been enabled in the httpd.conf file.
 
LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_http_module modules/mod_proxy_http.so
LoadModule proxy_connect_module modules/mod_proxy_connect.so
 
Further, the following two lines added in httpd conf file

ProxyRequests Off
ProxyPreserveHost on

Next, have the following lines in ssl.conf
 
Listen 443
<VirtualHost _default_:443>
SSLEngine on
SSLProxyEngine on
SSLCertificateFile /etc/pki/tls/certs/your_company_certificate.pem
SSLCertificateKeyFile /etc/pki/tls/certs/your_company_private_key.pem
ServerName my_company_domain_name
ProxyPass /app http://tomcat_server_ip:8443/app
ProxyPassReverse /app http://tomcat_server_ip:8443/app
</VirtualHost>
 
Now in tomcat on server 2, we specified the following inside server.xml:
 
<Connector port="8080" maxHttpHeaderSize="8192" maxThreads="150"
 minSpareThreads="25" 
maxSpareThreads="75" enableLookups="true" redirectPort="443" acceptCount="100" 
connectionTimeout="20000" disableUploadTimeout="true"/> 
 
 <Connector port="8443" maxHttpHeaderSize="8192" maxThreads="150" 
minSpareThreads="25" 
maxSpareThreads="75" enableLookups="true" acceptCount="100"
 connectionTimeout="20000" 
disableUploadTimeout="true"        
        scheme="https"
        secure="false" 
        SSLEnabled="true" 
        proxyPort="443"
        proxyName="my_company_domain_name"
     />


All the pages/services on server 1 are working fine.  Only one service which is
supposed to run on server 2 is giving a 503 error.  We think the https handling
between the two server could be an issue. We repeated the configuration with
unsecure (port 80 on apache and corresponding 8080 on tomcat) setup but that
did not work either.  Can someone throw a light on what we need to do on tomcat
in order for it work seamlessly?

Thanks,

Gautam



---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233560-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sun Apr 15 00:07:14 2012
Return-Path: <users-return-233560-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 62E0291BA
	for <apmail-tomcat-users-archive@www.apache.org>; Sun, 15 Apr 2012 00:07:14 +0000 (UTC)
Received: (qmail 96018 invoked by uid 500); 15 Apr 2012 00:07:11 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 95940 invoked by uid 500); 15 Apr 2012 00:07:11 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 95922 invoked by uid 99); 15 Apr 2012 00:07:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Apr 2012 00:07:11 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pid@pidster.com designates 209.85.210.44 as permitted sender)
Received: from [209.85.210.44] (HELO mail-pz0-f44.google.com) (209.85.210.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Apr 2012 00:07:04 +0000
Received: by dadz14 with SMTP id z14so5194174dad.3
        for <users@tomcat.apache.org>; Sat, 14 Apr 2012 17:06:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=references:from:in-reply-to:mime-version:date:message-id:subject:to
         :content-type;
        bh=zZC9WP8jJsNFweosD6rOajJTt0J1JNbctOOgLQ0lYKY=;
        b=qmTgJDJrEbzggSKFa5XTluAeMhK1exUN96Kibf9k0JElCKCKfxtx9rTZBPRU3l8LCd
         CapWP9B274+6df6a7bg8dvMkFcb9ALg+wwLs+248S+TFHIpXl85x8uT/f40lUOKpnvUB
         0LrYQ/TF4MGy4VBIRZcRPi+1Bpid797E6NenQ=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=references:from:in-reply-to:mime-version:date:message-id:subject:to
         :content-type:x-gm-message-state;
        bh=zZC9WP8jJsNFweosD6rOajJTt0J1JNbctOOgLQ0lYKY=;
        b=iR4/EaVAibs9kx9rL1lLFDZDHzrsE4RFEJYdaZzIDs/5u2YIuAEOaamKXWp8LLIfLm
         9Jhi6c/ubshZCvculxPW0muljyLPn1a96xl/azWQFOnEnlNEMTQlH+nBHjTwHjIV0NWc
         4bUpXwpWW9GEsiTgWAwsFSxUmlpB8Ve6unx7u9uyjssWCIPHset3B+5fJ80tgfM4p58w
         peTpcN55hjZoaao9bfeAEwa/xFOfvs1F1yvckNnNXQgm3aC9S5U/zNLXT+u9lhKJleQZ
         uB8Peqn841I5eiIk+a9vNwaZ6Yg2RIbx68PbktJx8C9tgLvVMS2abMDYsmNftAyjdSj5
         qjDw==
Received: by 10.68.231.233 with SMTP id tj9mr16458943pbc.49.1334448403486;
 Sat, 14 Apr 2012 17:06:43 -0700 (PDT)
References: <loom.20120414T200146-789@post.gmane.org>
From: "Pid *" <pid@pidster.com>
In-Reply-To: <loom.20120414T200146-789@post.gmane.org>
Mime-Version: 1.0 (1.0)
Date: Sun, 15 Apr 2012 01:07:12 +0100
Message-ID: <4503286909546027074@unknownmsgid>
Subject: Re: Cannot connect to tomcat through apache (proxy)
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=UTF-8
X-Gm-Message-State: ALoCoQlvD5LJfsM5zIQ2cSFLoMA3mf4ndjQlg3rf5ZAw79c9TDJyOGC7/TBoscjCLWvwfqZvA7Xw

On 14 Apr 2012, at 22:50, Gautam <advanig@gmail.com> wrote:

> We have a set up where we use apache web server to respond to secure (https)
> web pages/services on server 1. For one particular service, we need to forward
> the request to another server 2 on which we have tomcat running.
> We have done this in order to maintain the URL scheme.  Also we want to resolve
> the ssl on server 1 since all other services get resolved there and we don't want
> to deal with ssl on the
> tomcat server for that one service.  So for that one service we want to setup
> apache as a proxy to tomact server.
>
> We took guidance from this blog in setting up our servers:
> http://pwu-
> developer.blogspot.in/2011/04/securing-tomcat-with-apache-web-server.html

It's not entirely accurate. Not sure why the author would refer to 5.5, either.


> Here is our set up:
>
> On server 1 with Apache:
>
> The following directives have been enabled in the httpd.conf file.
>
> LoadModule proxy_module modules/mod_proxy.so
> LoadModule proxy_http_module modules/mod_proxy_http.so
> LoadModule proxy_connect_module modules/mod_proxy_connect.so

Why add proxy_connect?

> Further, the following two lines added in httpd conf file
>
> ProxyRequests Off
> ProxyPreserveHost on
>
> Next, have the following lines in ssl.conf
>
> Listen 443
> <VirtualHost _default_:443>
> SSLEngine on
> SSLProxyEngine on
> SSLCertificateFile /etc/pki/tls/certs/your_company_certificate.pem
> SSLCertificateKeyFile /etc/pki/tls/certs/your_company_private_key.pem
> ServerName my_company_domain_name
> ProxyPass /app http://tomcat_server_ip:8443/app
> ProxyPassReverse /app http://tomcat_server_ip:8443/app
> </VirtualHost>
>
> Now in tomcat on server 2, we specified the following inside server.xml:
>
> <Connector port="8080" maxHttpHeaderSize="8192" maxThreads="150"
> minSpareThreads="25"
> maxSpareThreads="75" enableLookups="true" redirectPort="443" acceptCount="100"
> connectionTimeout="20000" disableUploadTimeout="true"/>
>
> <Connector port="8443" maxHttpHeaderSize="8192" maxThreads="150"
> minSpareThreads="25"
> maxSpareThreads="75" enableLookups="true" acceptCount="100"
> connectionTimeout="20000"
> disableUploadTimeout="true"
>        scheme="https"
>        secure="false"
>        SSLEnabled="true"
>        proxyPort="443"
>        proxyName="my_company_domain_name"
>     />

You want SSLEnabled="false", I think.
http://tomcat.apache.org/tomcat-7.0-doc/config/http.html


p

> All the pages/services on server 1 are working fine.  Only one service which is
> supposed to run on server 2 is giving a 503 error.  We think the https handling
> between the two server could be an issue. We repeated the configuration with
> unsecure (port 80 on apache and corresponding 8080 on tomcat) setup but that
> did not work either.  Can someone throw a light on what we need to do on tomcat
> in order for it work seamlessly?
>
> Thanks,
>
> Gautam
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233561-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sun Apr 15 01:24:55 2012
Return-Path: <users-return-233561-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CF8049EA5
	for <apmail-tomcat-users-archive@www.apache.org>; Sun, 15 Apr 2012 01:24:55 +0000 (UTC)
Received: (qmail 22400 invoked by uid 500); 15 Apr 2012 01:24:52 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 22354 invoked by uid 500); 15 Apr 2012 01:24:52 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 22345 invoked by uid 99); 15 Apr 2012 01:24:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Apr 2012 01:24:52 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of hassan.schroeder@gmail.com designates 74.125.82.173 as permitted sender)
Received: from [74.125.82.173] (HELO mail-we0-f173.google.com) (74.125.82.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Apr 2012 01:24:46 +0000
Received: by werp12 with SMTP id p12so3561707wer.18
        for <users@tomcat.apache.org>; Sat, 14 Apr 2012 18:24:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=J2ZdHXSeAd7/g+txok5tKL4QcwlcVLkeSG+4cYJoDzY=;
        b=Zlh8/pCXAWSefb53ndXiX45mN03OV38E8p6RYNZr25nK9QaEwRhgRA+lr4xxBZht9W
         zG6agPcHn016tfQ7gm5wA1H3aO2pzX6suG2LOO5abYX1Ty5QqPL9TCu3sldHQOuEPZPd
         neFf7HIdOLy230VOZH5Z+tZfv+5RdVIobIpxijWeIh6hU8NUnObrodOX6+2/aece7+3J
         q/zhAQijoHbOcZMXspQaI9SfW8HEKYocLVweMwuZtqgkKy8Q6x0gO2pinX1qys5WvZdA
         jaEUpSrgLVmGYLvzfOTwkGOyxGaFfIR/uCzovq0FMAM54MOGXOjUTuT6x2LSlM+6bseH
         ZZXQ==
MIME-Version: 1.0
Received: by 10.180.101.8 with SMTP id fc8mr7592706wib.12.1334453065844; Sat,
 14 Apr 2012 18:24:25 -0700 (PDT)
Received: by 10.216.37.68 with HTTP; Sat, 14 Apr 2012 18:24:25 -0700 (PDT)
In-Reply-To: <loom.20120414T200146-789@post.gmane.org>
References: <loom.20120414T200146-789@post.gmane.org>
Date: Sat, 14 Apr 2012 18:24:25 -0700
Message-ID: <CACmC4yBQkC-0Cc4aO57+dXoc1pbdXTZcdms0B5anJjNyaVR+pQ@mail.gmail.com>
Subject: Re: Cannot connect to tomcat through apache (proxy)
From: Hassan Schroeder <hassan.schroeder@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

On Sat, Apr 14, 2012 at 2:46 PM, Gautam <advanig@gmail.com> wrote:

> All the pages/services on server 1 are working fine. =A0Only one service =
which is
> supposed to run on server 2 is giving a 503 error. =A0We think ...

? "think"? -- how about starting with:

Where is the 503 being generated, httpd or Tomcat?

What happens when you access the application on Tomcat directly?

What do the httpd and Tomcat logs show when this occurs?

--=20
Hassan Schroeder ------------------------ hassan.schroeder@gmail.com
http://about.me/hassanschroeder
twitter: @hassan

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233562-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sun Apr 15 10:27:04 2012
Return-Path: <users-return-233562-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4452E9BE5
	for <apmail-tomcat-users-archive@www.apache.org>; Sun, 15 Apr 2012 10:27:04 +0000 (UTC)
Received: (qmail 27303 invoked by uid 500); 15 Apr 2012 10:27:00 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 27188 invoked by uid 500); 15 Apr 2012 10:26:59 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 27178 invoked by uid 99); 15 Apr 2012 10:26:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Apr 2012 10:26:59 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [80.12.242.29] (HELO smtpout.wanadoo.co.uk) (80.12.242.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Apr 2012 10:26:51 +0000
Received: from mail.homeinbox.net ([2.24.222.128])
	by mwinf5d09 with ME
	id yASW1i0012mpSKm03ASW66; Sun, 15 Apr 2012 12:26:30 +0200
Received: from localhost (localhost [127.0.0.1])
	by mail.homeinbox.net (Postfix) with ESMTP id D9ADEB22002
	for <users@tomcat.apache.org>; Sun, 15 Apr 2012 11:26:29 +0100 (BST)
X-Virus-Scanned: Debian amavisd-new at homeinbox.net
Received: from mail.homeinbox.net ([127.0.0.1])
	by localhost (mail.homeinbox.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 7CJ1rsGcbSRv for <users@tomcat.apache.org>;
	Sun, 15 Apr 2012 11:26:25 +0100 (BST)
Received: from android-3db794e9a871c98f (unknown [31.80.196.117])
	(using TLSv1 with cipher RC4-MD5 (128/128 bits))
	(No client certificate requested)
	by mail.homeinbox.net (Postfix) with ESMTPSA id EECD2B22001
	for <users@tomcat.apache.org>; Sun, 15 Apr 2012 11:26:24 +0100 (BST)
References: <loom.20120414T200146-789@post.gmane.org> <4503286909546027074@unknownmsgid>
User-Agent: K-9 Mail for Android
In-Reply-To: <4503286909546027074@unknownmsgid>
MIME-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 8bit
Subject: Re: Cannot connect to tomcat through apache (proxy)
From: Mark Thomas <markt@apache.org>
Date: Sun, 15 Apr 2012 11:26:25 +0100
To: Tomcat Users List <users@tomcat.apache.org>
Message-ID: <af81c0a3-fcca-4898-abe8-58d0765abe5e@email.android.com>



Pid * <pid@pidster.com> wrote:

>On 14 Apr 2012, at 22:50, Gautam <advanig@gmail.com> wrote:


>> <Connector port="8443" maxHttpHeaderSize="8192" maxThreads="150"
>> minSpareThreads="25"
>> maxSpareThreads="75" enableLookups="true" acceptCount="100"
>> connectionTimeout="20000"
>> disableUploadTimeout="true"
>>        scheme="https"
>>        secure="false"
>>        SSLEnabled="true"
>>        proxyPort="443"
>>        proxyName="my_company_domain_name"
>>     />
>
>You want SSLEnabled="false", I think.

And secure="true"

Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233563-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sun Apr 15 20:00:40 2012
Return-Path: <users-return-233563-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E2A419CF1
	for <apmail-tomcat-users-archive@www.apache.org>; Sun, 15 Apr 2012 20:00:39 +0000 (UTC)
Received: (qmail 90449 invoked by uid 500); 15 Apr 2012 20:00:36 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 90268 invoked by uid 500); 15 Apr 2012 20:00:36 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 90259 invoked by uid 99); 15 Apr 2012 20:00:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Apr 2012 20:00:36 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [217.146.183.192] (HELO nm18.bullet.mail.ukl.yahoo.com) (217.146.183.192)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 15 Apr 2012 20:00:27 +0000
Received: from [217.146.183.216] by nm18.bullet.mail.ukl.yahoo.com with NNFMP; 15 Apr 2012 20:00:07 -0000
Received: from [77.238.184.69] by tm9.bullet.mail.ukl.yahoo.com with NNFMP; 15 Apr 2012 20:00:07 -0000
Received: from [127.0.0.1] by smtp138.mail.ukl.yahoo.com with NNFMP; 15 Apr 2012 20:00:07 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.es; s=s1024; t=1334520007; bh=r/foJafE4fIFw7+Z7ooho9txWo75K5bQ4yEXlB9VBH8=; h=X-Yahoo-Newman-Id:X-Yahoo-Newman-Property:X-YMail-OSG:X-Yahoo-SMTP:Received:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:Content-Type:Content-Transfer-Encoding:X-Antivirus:X-Antivirus-Status; b=uWCSjsg1DDlbGa2NsNskR8yQi6w6XTL41XUBKpkdR/DBcbCJhXF+1W9UZwZ0mwHr88qVg/dCFHmiBdDlqdMT25Unv+CxvvINlcqprMr5/4bBbG2vn+uoBXvqzSvUekIr8v+X4FORI1YBv8xlUK+D6fID3YQT+zfFhsEpcea6FFc=
X-Yahoo-Newman-Id: 154806.48184.bm@smtp138.mail.ukl.yahoo.com
X-Yahoo-Newman-Property: ymail-3
X-YMail-OSG: iX_CyNwVM1nxrpVBDzEQsV846teNUSEGPdRaWKKP.e64ZdS
 AXfiAipq_5w.ySLZlKz32tZ0KPtkbw.vzuJCXwXyVtbHypAI.5CQkbH5F9ek
 AVHr607nNkVwZ_56OctwOwjWYGyEzCqGr7v18FAbiTrhb_72.H1kV8YH4wlr
 RfbRbLzAJL51oaxuOD9J2z5DFCT9qjTxNXDLCWHXwoUPslRN7QDhcMsoj7Kw
 9e82OUebn.mjG13Hg0rRvZ5rVZgLZWnCzy_bwwUiUNNZPLVE1LvSU3SSNcQW
 lNn79sFdfCd4VAxCqHcUtd6MvhRGtiBYyCNPmwPTxlOqYi__CYjTcby4Fsht
 G8hkEZngc7IerFN050VWUgrjcaMgYWeQt5Io8iD.nGPqjf.BpmbhIcM_Lz4q
 2kJayqKw-
X-Yahoo-SMTP: 4morDKeswBDE3lIuzd.cm_qbJNxlcsznEWqdK4MN
Received: from [127.0.0.1] (miguel_3_gonzalez@85.54.62.211 with plain)
        by smtp138.mail.ukl.yahoo.com with SMTP; 15 Apr 2012 20:00:06 +0000 GMT
Message-ID: <4F8B28C6.4040800@yahoo.es>
Date: Sun, 15 Apr 2012 22:00:06 +0200
From: =?ISO-8859-1?Q?Miguel_Gonz=E1lez_Casta=F1os?= <miguel_3_gonzalez@yahoo.es>
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Javamelody and Struts
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Antivirus: avast! (VPS 120415-1, 15/04/2012), Outbound message
X-Antivirus-Status: Clean

Dear all,

   Javamelody is supposedly very easy to install for Tomcat but We do 
have a webapp using the Struts framework and I can't figure out how to 
configure Javamelody or get any error log of what I'm doing wrong. The 
web.xml example in the Javamelody is blocking my webapp to work (we use 
forwarders).

   Regards,

   Miguel

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233564-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sun Apr 15 22:10:34 2012
Return-Path: <users-return-233564-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 939D49F66
	for <apmail-tomcat-users-archive@www.apache.org>; Sun, 15 Apr 2012 22:10:34 +0000 (UTC)
Received: (qmail 26589 invoked by uid 500); 15 Apr 2012 22:10:31 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 26363 invoked by uid 500); 15 Apr 2012 22:10:30 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 26354 invoked by uid 99); 15 Apr 2012 22:10:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Apr 2012 22:10:30 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [155.63.64.31] (HELO snvl-smtp1.trimble.com) (155.63.64.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 Apr 2012 22:10:24 +0000
Received: (qmail 20212 invoked by uid 502); 15 Apr 2012 15:10:02 -0700
X-Qmail-Scanner-Diagnostics: from 10.3.0.166 by snvl-smtp1.trimble.com (envelope-from <Dale_Ogilvie@trimble.com>, uid 487) with qmail-scanner-2.10 
 (clamdscan: 0.97.4/14796. avast: v3.2.1/120414-1. sophie: 3.06/3.27.0/4.73. spamassassin: 3.3.1.  
 Clear:RC:1(10.3.0.166):. 
 Processed in 0.014715 secs); 15 Apr 2012 22:10:02 -0000
Received: from unknown (HELO nzc-ap-xch-02.ap.trimblecorp.net) (10.3.0.166)
  by snvl-smtp1.trimble.com with SMTP; 15 Apr 2012 15:10:02 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: base64
Subject: RE: 7.0.25 to 7.0.27 requires -Xmx32m to go to -Xmx512m
Date: Mon, 16 Apr 2012 10:10:00 +1200
Message-ID: <F7C0AA5DD1508F4789E10B6CC9BB75DB057CF462@nzc-ap-xch-02.ap.trimblecorp.net>
In-Reply-To: <f76e7f9d-fc16-4e3f-8e79-8e45a61d16b5@email.android.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: 7.0.25 to 7.0.27 requires -Xmx32m to go to -Xmx512m
Thread-Index: Ac0ZYZxSD8Jd2cybTH6HpNknEqEmwQB8jk6Q
References: <1334112426.9730.YahooMailMobile@web110413.mail.gq1.yahoo.com> <4F854E8C.4070003@pidster.com> <d14bdc88-c9f2-4d8c-b2c2-624115afc614@email.android.com> <1334282972.92558.YahooMailNeo@web110402.mail.gq1.yahoo.com> <f76e7f9d-fc16-4e3f-8e79-8e45a61d16b5@email.android.com>
From: "Dale Ogilvie" <Dale_Ogilvie@trimble.com>
To: "Tomcat Users List" <users@tomcat.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

SnVzdCBhIHRob3VnaHQgZnJvbSBzb21lb25lIHdobyBrbm93cyBub3RoaW5nIG1vcmUgdGhhbiB0
aGUgY29udGVudHMgb2YgdGhpcyB0aHJlYWQgYWJvdXQgdGhlIGlzc3VlLg0KDQpXb3VsZCBpdCBt
YWtlIHNlbnNlIHRvIG9ubHkgY2FjaGUgY2xhc3NlcyB3aXRoaW4gYSBqYXI/IGkuZS4gZW1wdHkg
dGhlIGNhY2hlIHdoZW4gbW92aW5nIG9uIHRvIHNjYW4gdGhlIG5leHQgamFyPw0KDQpQb3NzaWJs
eSBvbmUgbWlnaHQgZ2V0IGVub3VnaCBwZXJmb3JtYW5jZSBiZW5lZml0IGZyb20gaW50cmEtamFy
IGNsYXNzIGhpZXJhcmNoaWVzIHRvIG5vdCBoYXZlIHRvIHBheSB0byBoYXZlIGV2ZXJ5IGNsYXNz
IGluIG1lbW9yeSBmb3IgZXZlcnkgamFyLg0KDQpEYWxlDQo=
DQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IHVzZXJzLXVuc3Vi
c2NyaWJlQHRvbWNhdC5hcGFjaGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1t
YWlsOiB1c2Vycy1oZWxwQHRvbWNhdC5hcGFjaGUub3JnDQoN

From users-return-233565-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 16 05:03:08 2012
Return-Path: <users-return-233565-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2FF429E74
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 16 Apr 2012 05:03:08 +0000 (UTC)
Received: (qmail 80856 invoked by uid 500); 16 Apr 2012 05:03:04 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 80724 invoked by uid 500); 16 Apr 2012 05:03:00 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 80692 invoked by uid 99); 16 Apr 2012 05:02:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2012 05:02:59 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sridebrajmallick@gmail.com designates 209.85.210.173 as permitted sender)
Received: from [209.85.210.173] (HELO mail-iy0-f173.google.com) (209.85.210.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2012 05:02:52 +0000
Received: by iafj26 with SMTP id j26so9340444iaf.18
        for <users@tomcat.apache.org>; Sun, 15 Apr 2012 22:02:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=OGl/aYrx3ZNJKcW/qYW2Jf+jkrQVE7PvdVtq8sbwKw4=;
        b=ydMUM8wz4fYY9kvAAclP2q8adIdeoo8SwppIOylNvzW7Op7b+uKvCbZBGggi9FJG16
         AxBKEzXH22uNoIjbU1fid3yFtkZlj+z865T+BaSs8g0QhluqYb2aT7Lkfo3qXxNfZvxm
         fMNL0F3u1E9Pqqp/Xh+1xUF96QN0Fgl1NoHJybySMOqB4AJtHoTm9Ss0BRexRPsGp265
         ijPr5aPmEW+lUcI6o2CR+FLVAAE4ABs6e5fHkXRoCXW8HvgEoMy383iFBsZkxHbNlPPn
         QWh1kOuNYlA2ifSYXpoOq6B7dbC7ggmwGzLXw/d2cOEjPutiv7LQhNfFS04PHLvZcY1B
         aTpw==
MIME-Version: 1.0
Received: by 10.50.190.197 with SMTP id gs5mr4363263igc.37.1334552550949; Sun,
 15 Apr 2012 22:02:30 -0700 (PDT)
Received: by 10.43.49.2 with HTTP; Sun, 15 Apr 2012 22:02:30 -0700 (PDT)
In-Reply-To: <4F8B28C6.4040800@yahoo.es>
References: <4F8B28C6.4040800@yahoo.es>
Date: Mon, 16 Apr 2012 10:32:30 +0530
Message-ID: <CAAcgX+2o1UqVwpRETM+yamah3GNGw4+JROr919X+e_gW7pXs+w@mail.gmail.com>
Subject: Re: Javamelody and Struts
From: Debraj Mallick <sridebrajmallick@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=f46d0447870fbbc43b04bdc4ba5d

--f46d0447870fbbc43b04bdc4ba5d
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

hi there,

in your web.xml include these

    *<filter>
        <filter-name>monitoring</filter-name>
        <filter-class>net.bull.javamelody.MonitoringFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>monitoring</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    <listener>
        <listener-class>net.bull.javamelody.SessionListener</listener-class=
>
    </listener>*

and

               *<interceptors>
                        <interceptor name=3D"monitoring"
class=3D"net.bull.javamelody.StrutsInterceptor"/>

                        <interceptor-stack name=3D"myStack">
                                <interceptor-ref name=3D"monitoring"/>
                                <interceptor-ref name=3D"defaultStack"/>
                        </interceptor-stack>
                </interceptors>

                <default-interceptor-ref name=3D"myStack"/>*

also put the jar files in your class path.

help link: *
http://code.google.com/p/javamelody/wiki/UserGuide#2._web.xml_file* and *
http://code.google.com/p/javamelody/wiki/UserGuide#12._Struts_2_Actions*


2012/4/16 Miguel Gonz=E1lez Casta=F1os <miguel_3_gonzalez@yahoo.es>

> Dear all,
>
>  Javamelody is supposedly very easy to install for Tomcat but We do have =
a
> webapp using the Struts framework and I can't figure out how to configure
> Javamelody or get any error log of what I'm doing wrong. The web.xml
> example in the Javamelody is blocking my webapp to work (we use forwarder=
s).
>
>  Regards,
>
>  Miguel
>
> ------------------------------**------------------------------**---------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.**apache.org<users-unsub=
scribe@tomcat.apache.org>
> For additional commands, e-mail: users-help@tomcat.apache.org
>
>


--=20
Thanks & Regards,
Debraj Mallick
9674247281

--f46d0447870fbbc43b04bdc4ba5d--

From users-return-233566-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 16 07:29:40 2012
Return-Path: <users-return-233566-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 64D97934C
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 16 Apr 2012 07:29:40 +0000 (UTC)
Received: (qmail 12101 invoked by uid 500); 16 Apr 2012 07:29:37 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 11768 invoked by uid 500); 16 Apr 2012 07:29:30 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 11719 invoked by uid 99); 16 Apr 2012 07:29:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2012 07:29:29 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [217.146.183.246] (HELO nm12-vm0.bullet.mail.ukl.yahoo.com) (217.146.183.246)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 16 Apr 2012 07:29:20 +0000
Received: from [217.146.183.210] by nm12.bullet.mail.ukl.yahoo.com with NNFMP; 16 Apr 2012 07:28:59 -0000
Received: from [217.146.182.73] by tm3.bullet.mail.ukl.yahoo.com with NNFMP; 16 Apr 2012 07:28:59 -0000
Received: from [127.0.0.1] by smtp119.mail.ukl.yahoo.com with NNFMP; 16 Apr 2012 07:28:59 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.es; s=s1024; t=1334561339; bh=Nj0y4hThVv2P1G1hs+IXNa+L/Ym3CPfHV23hKXF4E3w=; h=X-Yahoo-Newman-Id:X-Yahoo-Newman-Property:X-YMail-OSG:X-Yahoo-SMTP:Received:Message-ID:Date:From:User-Agent:MIME-Version:To:CC:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding:X-Antivirus:X-Antivirus-Status; b=x4qte8CGyu2ZcwrkiGdjkABHBj98fa6aFI2ImR3a49eBPwj535l2VxCQ2tfAJV4QyNR6hIiiIKNhpUKWFiGmfEQllic9kvj/kmJcacfM2L8f4M7brKjKi8gGXBceYTqZqhXBPpl/lb/cADPD95zV4w/4fgZBeGZ51JRnoKODOJY=
X-Yahoo-Newman-Id: 385208.27047.bm@smtp119.mail.ukl.yahoo.com
X-Yahoo-Newman-Property: ymail-3
X-YMail-OSG: PGsyRDIVM1mwrGC_tmkClDnsNCJibuFomryu7ifOyAVQpB2
 VgGEFJXrYnYQ6fngNih9BfQDpCljasvbbSTDjGFY258aiQh5xJ_QDl8TUli6
 uRTl6RyjSwo7_pT_wYkpX80bHy6TNuCbxxJia7YzJpl33Y3zAyUkXEeU6gk5
 8RCWHrK3PhNhss2cPhy8xq33ypNibhunYlTIKL_XolX5MiclUIaheOKYsjYC
 6QhERdul_lmACMKYBNxd8_qwzMl41BJQ4Lekj_xwNAe8bGB94T5dY3wbnrzc
 pVp082mNEgvGmAIO_I1VXMdGAi3H_xaGPM2QL7I7kK18sgDBCGJprOXl7i9G
 ehBgZB2cyPDDFTuCwVlOKqISqJkdETpxQIV9S6qb5_uviKCJArzHAIC2OIe9
 7O2dA5vuy8GX2N6xYSNa4VoAIcZ4oi3o8cR36qoICxsSGuZONw_qIJXF02Wq
 q62sP172L.twQkwoYiGibb1sl42Bnqnn1qv9ly8T7M_3cPSS6oQ--
X-Yahoo-SMTP: 4morDKeswBDE3lIuzd.cm_qbJNxlcsznEWqdK4MN
Received: from [127.0.0.1] (miguel_3_gonzalez@85.49.218.90 with plain)
        by smtp119.mail.ukl.yahoo.com with SMTP; 16 Apr 2012 00:28:59 -0700 PDT
Message-ID: <4F8BCA3B.4020902@yahoo.es>
Date: Mon, 16 Apr 2012 09:28:59 +0200
From: =?ISO-8859-1?Q?Miguel_Gonz=E1lez_Casta=F1os?= <miguel_3_gonzalez@yahoo.es>
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
CC: Debraj Mallick <sridebrajmallick@gmail.com>
Subject: Re: Javamelody and Struts
References: <4F8B28C6.4040800@yahoo.es> <CAAcgX+2o1UqVwpRETM+yamah3GNGw4+JROr919X+e_gW7pXs+w@mail.gmail.com>
In-Reply-To: <CAAcgX+2o1UqVwpRETM+yamah3GNGw4+JROr919X+e_gW7pXs+w@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Antivirus: avast! (VPS 120415-2, 15/04/2012), Outbound message
X-Antivirus-Status: Clean

Dear Debraj,

   I have followed these instructions and I can't figure out where to 
access the monitoring tool.

   On 16/04/2012 07:02, Debraj Mallick wrote:
> hi there,
>
> in your web.xml include these
>
>      *<filter>
>          <filter-name>monitoring</filter-name>
>          <filter-class>net.bull.javamelody.MonitoringFilter</filter-class>
>      </filter>
>      <filter-mapping>
>          <filter-name>monitoring</filter-name>
>          <url-pattern>/*</url-pattern>
>      </filter-mapping>
>      <listener>
>          <listener-class>net.bull.javamelody.SessionListener</listener-class>
>      </listener>*

If I add this alone, my strut webapp doesn't work
>
> and
>
>                 *<interceptors>
>                          <interceptor name="monitoring"
> class="net.bull.javamelody.StrutsInterceptor"/>
>
>                          <interceptor-stack name="myStack">
>                                  <interceptor-ref name="monitoring"/>
>                                  <interceptor-ref name="defaultStack"/>
>                          </interceptor-stack>
>                  </interceptors>
>
>                  <default-interceptor-ref name="myStack"/>*
This is supposed to go in the struts config xml file, not in web.xml. 
Anyway It doesn't work either.
>
> also put the jar files in your class path.
Which classpath and which jar files and where?
>
> help link: *
> http://code.google.com/p/javamelody/wiki/UserGuide#2._web.xml_file* and *
> http://code.google.com/p/javamelody/wiki/UserGuide#12._Struts_2_Actions*
Of course I have followed these instructions but they are not very 
detailed. Also there is no error log or anything that shows me what I'm 
doing wrong. In catalina.out there is no reference at all.

Miguel

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233567-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 16 07:38:52 2012
Return-Path: <users-return-233567-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EF988991C
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 16 Apr 2012 07:38:51 +0000 (UTC)
Received: (qmail 37787 invoked by uid 500); 16 Apr 2012 07:38:48 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 37737 invoked by uid 500); 16 Apr 2012 07:38:48 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 37712 invoked by uid 99); 16 Apr 2012 07:38:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2012 07:38:47 +0000
X-ASF-Spam-Status: No, hits=2.9 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [217.146.183.219] (HELO nm2.bullet.mail.ukl.yahoo.com) (217.146.183.219)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 16 Apr 2012 07:38:40 +0000
Received: from [217.146.183.217] by nm2.bullet.mail.ukl.yahoo.com with NNFMP; 16 Apr 2012 07:38:18 -0000
Received: from [77.238.184.64] by tm10.bullet.mail.ukl.yahoo.com with NNFMP; 16 Apr 2012 07:38:18 -0000
Received: from [127.0.0.1] by smtp133.mail.ukl.yahoo.com with NNFMP; 16 Apr 2012 07:38:18 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.es; s=s1024; t=1334561898; bh=AMsbi7TDLQr01bEtVYN1DFR67IcgrgXssyYQQmrdv1U=; h=X-Yahoo-Newman-Id:X-Yahoo-Newman-Property:X-YMail-OSG:X-Yahoo-SMTP:Received:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:X-Antivirus:X-Antivirus-Status; b=es2ZVkzQhbY2S4tmvldlFWVpZz6NE8K+xkP+76N39mgNHReTLH75uV6ih2ImEHaQCiQ/FGLZqyjzI6B/xryRnBrb5bO5kYcif93azFUYCfot3DFPiwfUvzQJjfh5M7p3KpHWgIaLrfnHT+o21M0tXGzrjcSL/6D3ilI12bDFm0s=
X-Yahoo-Newman-Id: 489833.2361.bm@smtp133.mail.ukl.yahoo.com
X-Yahoo-Newman-Property: ymail-3
X-YMail-OSG: DZ.9wLoVM1mtH8tXEPoiwjwMek6CWD_afpGwZ3FfjzLTKC_
 yU2FlyAQ6aplXzPU7QZTV.6LKRrzXETx4sMu_IbVbpFHypwbTBAKcG99p3Xr
 U9sg_7CBOc41wSgay4E0G1fH2umij3fFsnmfpSAsf5nM26gVOaTVBD2dW9JF
 DrxG2581Vkrc1vNBEW31QcIbgvlw3dCbnnfFJaHIFoBkucX2Tq0GxOk9H45U
 d9dAalhgFlYR3Uog6kxypruOkiYnEFfvxlSzioKojyLIcnQVwnJka8BWljdO
 DTrcEMul.gRcu0nBFknadvqLHTlAIiArB1IJmZMdr.nTHh55D_hkFBsed.fq
 Ptenz75cxge8SkMvf80KPVQg0HVrfh98_imGUqrsnlgWJplaiuaDixEvt2mw
 Sdp1Sk0bmUcsJQeXXfhksMJf7fqVoguF0oQ94Qy9rvZ7rEyyHt6sslL2Hn51
 9j1pFLzPjYSAoFquSU.4YeR73E5Fz08EfmZ0Nh8.nJEWGlK.EtQ--
X-Yahoo-SMTP: 4morDKeswBDE3lIuzd.cm_qbJNxlcsznEWqdK4MN
Received: from [127.0.0.1] (miguel_3_gonzalez@85.49.218.90 with plain)
        by smtp133.mail.ukl.yahoo.com with SMTP; 16 Apr 2012 07:38:18 +0000 GMT
Message-ID: <4F8BCC69.20603@yahoo.es>
Date: Mon, 16 Apr 2012 09:38:17 +0200
From: =?ISO-8859-1?Q?Miguel_Gonz=E1lez_Casta=F1os?= <miguel_3_gonzalez@yahoo.es>
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Debraj Mallick <sridebrajmallick@gmail.com>, 
 Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Javamelody and Struts
References: <4F8B28C6.4040800@yahoo.es> <CAAcgX+2o1UqVwpRETM+yamah3GNGw4+JROr919X+e_gW7pXs+w@mail.gmail.com> <4F8BCA3B.4020902@yahoo.es> <CAAcgX+0aCDRJXMcqu+aSByUqXjPXNtg7ELVHU=XT5y73YVCV4A@mail.gmail.com>
In-Reply-To: <CAAcgX+0aCDRJXMcqu+aSByUqXjPXNtg7ELVHU=XT5y73YVCV4A@mail.gmail.com>
Content-Type: multipart/alternative;
 boundary="------------030203050206070702050701"
X-Antivirus: avast! (VPS 120415-2, 15/04/2012), Outbound message
X-Antivirus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org

--------------030203050206070702050701
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

On 16/04/2012 09:34, Debraj Mallick wrote:
> hi there,
>
> to access use :*http://<host>/<context>/monitoring*
>
> link: 
> *http://code.google.com/p/javamelody/wiki/UserGuide#3._First_results*
Don't get me wrong, but what does it matter the access URL if my webapp 
doesn't even work?

Miguel

--------------030203050206070702050701--

From users-return-233568-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 16 08:15:35 2012
Return-Path: <users-return-233568-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8A0479281
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 16 Apr 2012 08:15:35 +0000 (UTC)
Received: (qmail 23852 invoked by uid 500); 16 Apr 2012 08:15:32 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 23645 invoked by uid 500); 16 Apr 2012 08:15:32 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 23607 invoked by uid 99); 16 Apr 2012 08:15:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2012 08:15:31 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of svante.kumlien@gmail.com designates 209.85.213.173 as permitted sender)
Received: from [209.85.213.173] (HELO mail-yx0-f173.google.com) (209.85.213.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2012 08:15:25 +0000
Received: by yenr5 with SMTP id r5so2844464yen.18
        for <users@tomcat.apache.org>; Mon, 16 Apr 2012 01:15:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=xxzuMjqEecgJx+CvHV/N4bFevNkpEDqd6ELtb3vJG78=;
        b=cYPI2kwB4ke9t0oGG+t+RDW6q2CpyWIL1aRYNXpXUPDkOSpxl0JDkAYHsRkhf8qkH6
         UU7wLkO7Cqk30yZQVVjU225zWTxtw5Vo77VqAo5QVeeDJS+dURylf4YVibjcfgIXOx3S
         4XNd0onsrr+9piK4xtJoTydS4LiWYu/QHS+VTaRKL2fqmG1hoJc/zLb67IqaIN/nSRnl
         vLrClICOfGWsWY+gt11vlwijPmEU39PPY/6DaJi+FqBRWAPaJFqn5iIO0m3yzifRLy0k
         9q28HAyGL5ythf733cFwyf+A8bGRojvzrZWmS0NDP6bk458K2sn7jnK0RolpZqg4/iPd
         Uscg==
MIME-Version: 1.0
Received: by 10.236.134.211 with SMTP id s59mr10122248yhi.131.1334564104337;
 Mon, 16 Apr 2012 01:15:04 -0700 (PDT)
Received: by 10.101.182.28 with HTTP; Mon, 16 Apr 2012 01:15:04 -0700 (PDT)
In-Reply-To: <4F888F4D.5060309@christopherschultz.net>
References: <CABmVr8+xF4w5q03nOyQA31t=mxQ95=EMGqHBxpHYDc3vSCFu2Q@mail.gmail.com>
	<4F888F4D.5060309@christopherschultz.net>
Date: Mon, 16 Apr 2012 10:15:04 +0200
Message-ID: <CABmVr8JP83PC2B=-=+9ppRFWawDX0jGOtHC8s4mSp-1a6viW-g@mail.gmail.com>
Subject: Re: Multipart over ajp btwn apache-tomcat fails sometimes...
From: Svante Kumlien <svante.kumlien@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=20cf303a2b735e78f704bdc76bc6

--20cf303a2b735e78f704bdc76bc6
Content-Type: text/plain; charset=ISO-8859-1

Hi, and thanks for the reponse Chris!

Regarding httpd or not, we're in the process of moving stuff from a
WebSphere 6.1 to Tomcat 7.x but since we don't have the money to move all
apps at once we run both servers behind a httpd, moving one app at a time.

The pcap-files contains the traffic between httpd and tomcat.
ok: https://docs.google.com/open?id=0B8cuXS6fkK2YUW5jdzJVbW95VEk
fail: https://docs.google.com/open?id=0B8cuXS6fkK2YWVlyTHcwdk1TZDQ

The http-headers are not particularly large (and I guess they would be
rejected all of the times if they were?).
Hmm, on second thought, the headers contain a rather 'large' LtpaToken2
header, don't know if it's considered too large or not though.
http headers: https://docs.google.com/open?id=0B8cuXS6fkK2YUFVhXzlJbEFFT28

No ssl, the httpd is ssl-enabled for other url:s but this particular url is
using plain http.

The ajp connector on the tomcat side is basic:
<!-- Define an AJP 1.3 Connector on port 8009 -->
<Connector port="8009" protocol="AJP/1.3" redirectPort="8443" />

The context config looks like:
<Context docBase="xxx" path="/xxx" reloadable="true"
 allowCasualMultipartParsing="true">
<Valve className="org.apache.catalina.valves.AccessLogValve"
directory="logs"
               prefix="xxx_access_log." suffix=".txt"
               pattern="%h %l %u %t &quot;%r&quot; %s %b" />
</Context>
The "allowCasualMultipartParsing" was something I added for testing but I
couldn't see any change in behaviour.

I will try to convince the guys running the servers to deploy a new version
of the app (with extended logging), guess I have to buy them a couple of
beers first though...

br /Svante



Den 13 april 2012 22:40 skrev Christopher Schultz <
chris@christopherschultz.net>:

> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Svante,
>
> On 4/13/12 5:16 AM, Svante Kumlien wrote:
> > I have an Apache acting as reverse proxy for a Tomcat over ajp.
>
> Standard stupid question: are you sure you need Apache httpd in the mix?
>


>
> > (Gaahhh, the stack trace is swallowed, I only have the message
> > string! The exception is thrown from  FileUploadBase.parseRequest
> > :-( )
>
> Is there any way to get the full stack trace? Can you re-deploy with
> some modified code to get it?
>
> > I attach two pcap-files with a ok-case and a fail-case.
>
> The mailing list has stripped your attachments. Try to copy/paste text
> into a re-post or post a link to your file(s) instead.
>
> > The difference I can see is that in the fail-case tomcat starts to
> > send the response before the first Body chunk is sent by Apache.
>
> Can you sniff the traffic between httpd and Tomcat?
>
> Do you have large headers or anything like that? The AJP message could
> be rejected because the headers don't fit into a single AJP packet --
> but that shouldn't trigger a failure in FileUploadBase.
>
> Is there HTTPS in the mix anywhere? Client certs can make the headers
> large.
>
> > If we switch the proxyPass to use http everything works 100% of the
> > time (which makes me think I have a misconfig AJP connector
> > somewhere...).
>
> Can you post the rest of your AJP configuration? For instance, what
> does your <Connector> look like on the Tomcat side?
>
> - -chris
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
> Comment: GPGTools - http://gpgtools.org
> Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/
>
> iEYEARECAAYFAk+Ij00ACgkQ9CaO5/Lv0PCULQCgoBmlLJJkuSpcXDUxbKLc0Ptl
> eusAoLlVdrUsETpscxjlCaG04dO4/12e
> =UpxR
> -----END PGP SIGNATURE-----
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>
>

--20cf303a2b735e78f704bdc76bc6--

From users-return-233569-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 16 09:20:29 2012
Return-Path: <users-return-233569-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 16306909E
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 16 Apr 2012 09:20:28 +0000 (UTC)
Received: (qmail 79400 invoked by uid 500); 16 Apr 2012 09:20:25 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 79207 invoked by uid 500); 16 Apr 2012 09:20:25 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 79178 invoked by uid 99); 16 Apr 2012 09:20:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2012 09:20:24 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of debabrattaj@gmail.com designates 209.85.215.45 as permitted sender)
Received: from [209.85.215.45] (HELO mail-lpp01m010-f45.google.com) (209.85.215.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2012 09:20:17 +0000
Received: by lahe6 with SMTP id e6so4628581lah.18
        for <users@tomcat.apache.org>; Mon, 16 Apr 2012 02:19:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=38og8GZ1/ajI5+tZ/AFc6X34zrx1N9edow77DnCexl0=;
        b=n7m+C7Fsz9r46ycP3XRVNH0pTEDhsQGFnrLPkYkJR7gVXlqUoF6cKpoPxJeVBzyZn2
         9+lHCAEKkPIMWjvkTTP6czxEKlUB57R8uZ2wrUSTWe1xgJZnOMcd1HJ4klJv41pqR6ex
         Vq9vC7xUfrN1XKpIaOTiEd5m+ZWHlvy5hhFLeakbJqa6oVsQwG6IUhb/801cy3rsjV72
         ktIHMDrdp93ZnyptSAkj2C7mtlZgif2bBUP35adfdPxhanOOsMtPy6AVOtujH+gjGKwi
         lgbUaGx7DTE/dQEiZuWeb40LKSTAbJ9R/DphQvIdARNVF6mqMU8vPcahSPPq3z26eODu
         pFIw==
MIME-Version: 1.0
Received: by 10.152.148.9 with SMTP id to9mr4065182lab.6.1334567996643; Mon,
 16 Apr 2012 02:19:56 -0700 (PDT)
Received: by 10.112.127.71 with HTTP; Mon, 16 Apr 2012 02:19:56 -0700 (PDT)
Date: Mon, 16 Apr 2012 14:49:56 +0530
Message-ID: <CAHjK=OwJAdtzEh99k_JywXx6cLh8ymeVnu4R95HKu27DyWSJQA@mail.gmail.com>
Subject: Query to configure SSL support on Tomcat
From: Debabratta Jena <debabrattaj@gmail.com>
To: users <users@tomcat.apache.org>
Content-Type: text/plain; charset=UTF-8

Hello sir,

I am trying to install and configure SSL support on Tomcat,So I read
the steps and followed the instruction that is provided on "SSL
Configuration HOW-TO",when I am done with all the things.
I typed the https://localhost:8443/ in my bowser and that shows an error like..

                             Secure Connection Failed

         An error occurred during a connection to localhost:8443.

     SSL received a record that exceeded the maximum permissible length.

               (Error code: ssl_error_rx_record_too_long)
--
thanks and regards..

debabratta jena

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233570-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 16 10:02:21 2012
Return-Path: <users-return-233570-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 720CE9345
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 16 Apr 2012 10:02:21 +0000 (UTC)
Received: (qmail 88269 invoked by uid 500); 16 Apr 2012 10:02:18 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 88210 invoked by uid 500); 16 Apr 2012 10:02:18 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 88199 invoked by uid 99); 16 Apr 2012 10:02:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2012 10:02:17 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pid@pidster.com designates 209.85.214.45 as permitted sender)
Received: from [209.85.214.45] (HELO mail-bk0-f45.google.com) (209.85.214.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2012 10:02:11 +0000
Received: by bkcjg9 with SMTP id jg9so4707603bkc.18
        for <users@tomcat.apache.org>; Mon, 16 Apr 2012 03:01:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type;
        bh=m6vDHc8G4E6I8VbK+ARi7VPIkCHiWJiEQkZfxAef+kI=;
        b=sbyoRDWxeMUnlz/4pErJeSAGYSZWSMk3ORRJQ9sG3o/Sp2dDeUSvt+I86QtVSXWTGW
         nXlJyQNu4AniSbpVD1rGT+LVJdkhg4YAIEP0EHY42NJ1a+eS17Fvens8wcE8oHh8BYZA
         wNzjWmFKFeEVMh69iTe2n/uOMKeJWnBQOg2nI=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type:x-gm-message-state;
        bh=m6vDHc8G4E6I8VbK+ARi7VPIkCHiWJiEQkZfxAef+kI=;
        b=XHBt1O0rSOeR8+GD42SkFTsGMPK1V8wn51fnQXnKhO0J4pRFIPrvmn+8ZAH8NQoUXC
         yhp8YvUyFK7hcN8dcn5MpgGiEKixDhxiP9NkiHDtDyEWy8vI8I67otD4kSsa4g12BPVp
         5vOulhiJg7lTxHDNmF8s3BXt1oW+lkLA/RrCM/QhOj8RbEWX0zaULyerELCmYk9WNvGw
         KMKTh5BwS/+ilDws+taUE7fZpFJAI73FV/Q3v+s1fMhRXt/fuM9AP/aie5DyP5igPrxk
         9oV5ykZBo3im3M0EnqkPM31NlCJ6o4+o9o8VH7KABu3aCF4OZeNJh5Xe5mJOIjuuu2an
         EOFg==
Received: by 10.205.132.73 with SMTP id ht9mr3447873bkc.46.1334570508374;
        Mon, 16 Apr 2012 03:01:48 -0700 (PDT)
Received: from Asura.local ([81.134.122.147])
        by mx.google.com with ESMTPS id u16sm30342802bkf.10.2012.04.16.03.01.46
        (version=SSLv3 cipher=OTHER);
        Mon, 16 Apr 2012 03:01:47 -0700 (PDT)
Message-ID: <4F8BEDFD.1090203@pidster.com>
Date: Mon, 16 Apr 2012 11:01:33 +0100
From: Pid <pid@pidster.com>
Organization: Pidster Inc
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Query to configure SSL support on Tomcat
References: <CAHjK=OwJAdtzEh99k_JywXx6cLh8ymeVnu4R95HKu27DyWSJQA@mail.gmail.com>
In-Reply-To: <CAHjK=OwJAdtzEh99k_JywXx6cLh8ymeVnu4R95HKu27DyWSJQA@mail.gmail.com>
X-Enigmail-Version: 1.4
OpenPGP: id=62590808
Content-Type: multipart/signed; micalg=pgp-sha512;
 protocol="application/pgp-signature";
 boundary="------------enig296F92A970B3388956D203FA"
X-Gm-Message-State: ALoCoQl5bekzYzBzIp4JmtYQyYa6ZBEsnGAKhW0SIQ1sROzSHBbbyMNHfuCxDmKkqsNeqM0XbtT8
X-Virus-Checked: Checked by ClamAV on apache.org

--------------enig296F92A970B3388956D203FA
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On 16/04/2012 10:19, Debabratta Jena wrote:
> Hello sir,
>=20
> I am trying to install and configure SSL support on Tomcat,So I read
> the steps and followed the instruction that is provided on "SSL
> Configuration HOW-TO",when I am done with all the things.
> I typed the https://localhost:8443/ in my bowser and that shows an erro=
r like..
>=20
>                              Secure Connection Failed
>=20
>          An error occurred during a connection to localhost:8443.
>=20
>      SSL received a record that exceeded the maximum permissible length=
=2E
>=20
>                (Error code: ssl_error_rx_record_too_long)

Which version of Tomcat?
Which OS / Java versions?

Post your Connector configuration in your reply.


p


--=20

[key:62590808]


--------------enig296F92A970B3388956D203FA
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.18 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iQIcBAEBCgAGBQJPi+4HAAoJEGoM2OGpOvr9dvAP/2jWkeIS40GnROSbqnJmVDsV
q4HxptTOg4ARytU227jNVSNyxx5jpcn9B4rhdcc7pXF5om3+2b1UZXfMfq2o5xi0
W1nKjBcuuyJVruwlAeGAQOxHUmKQL/DLdo+zZlkMwQO6WEa8zT/Rq4HF4VUgKSeC
WRW1PpLMrsppSI52rN6+liQcNnix1sS7JFu/+duLvoU2ddoPQwtNg3bwvnBnQ5Vq
fNVVzz7t2h3yH7dBnxBpzQhPmO5dYHSDqxzUt+omyaamAkZFi129o3DfHPg7K5fO
HG7icrken9IYoOiT76N2RMyHCwmSDGLeg+VsCOuvS6BzMEfYirLyQpNhcFFiWkhZ
DBLersQBz3WvE0pzAePb2nt5KPqm3ESeStKWwNyrhn8fB28kH9DtoYnacDcCdXVZ
1GjwDjB4rRXJPXeOsUwhWI0fifrNiJWi9yn1e+ONmqS0pCeIprEO7vVupqgdD8xS
6FnZBLqchI1tsPRI12Yh0+x+iem71gXqrgrqx6Eskc0rWZQcY03hOpvBDOHzDtrR
iRMlJUOnupla/3H0DzYUb+cBElOqlnkU9m6LNNWcEkJKWKFdoIKJszDjpApMbxsc
z8EkVBZ5FKGqGw8pvVI1Kr2HtQ3kdJvSnevGq+l68knqyFDn6EORmEaiSnzlVqxn
eJ63bdIMdTOHOZVYHiw6
=u/wI
-----END PGP SIGNATURE-----

--------------enig296F92A970B3388956D203FA--

From users-return-233571-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 16 10:28:14 2012
Return-Path: <users-return-233571-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9BF48982E
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 16 Apr 2012 10:28:14 +0000 (UTC)
Received: (qmail 61449 invoked by uid 500); 16 Apr 2012 10:28:11 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 61218 invoked by uid 500); 16 Apr 2012 10:28:11 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 61204 invoked by uid 99); 16 Apr 2012 10:28:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2012 10:28:11 +0000
X-ASF-Spam-Status: No, hits=2.4 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ayb-2008@hotmail.fr designates 157.55.1.172 as permitted sender)
Received: from [157.55.1.172] (HELO dub0-omc2-s33.dub0.hotmail.com) (157.55.1.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2012 10:28:02 +0000
Received: from DUB113-W31 ([157.55.1.136]) by dub0-omc2-s33.dub0.hotmail.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Mon, 16 Apr 2012 03:27:40 -0700
Message-ID: <DUB113-W31F2A8E676357B7BEA403AE73E0@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_edc1ebcf-8eaa-45b8-bb7b-40b9073a43b8_"
X-Originating-IP: [41.87.135.146]
From: ayouB __ <ayb-2008@hotmail.fr>
To: <users@tomcat.apache.org>
Subject: Help : Failed to start component
 [StandardEngine[Catalina].StandardHost[localhost]]
Date: Mon, 16 Apr 2012 10:27:40 +0000
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 16 Apr 2012 10:27:40.0769 (UTC) FILETIME=[8D564D10:01CD1BBB]
X-Virus-Checked: Checked by ClamAV on apache.org

--_edc1ebcf-8eaa-45b8-bb7b-40b9073a43b8_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Hi every body=2C
=20
Does any one know please what's the source of this error and  how to fix it=
 :

16 avr. 2012 09:52:30 org.apache.catalina.core.ContainerBase startInternal
GRAVE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleExcep=
tion: Failed to start component [StandardEngine[Catalina].StandardHost[loca=
lhost]]
at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222)
at java.util.concurrent.FutureTask.get(FutureTask.java:83)
at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:=
1128)
at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.jav=
a:302)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.StandardService.startInternal(StandardService.j=
ava:443)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.StandardServer.startInternal(StandardServer.jav=
a:732)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.startup.Catalina.start(Catalina.java:645)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.jav=
a:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessor=
Impl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
Caused by: org.apache.catalina.LifecycleException: Failed to start componen=
t [StandardEngine[Catalina].StandardHost[localhost]]
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.jav=
a:1566)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.jav=
a:1556)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecuto=
r.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.ja=
va:908)
at java.lang.Thread.run(Thread.java:662)
Caused by: org.apache.catalina.LifecycleException: A child container failed=
 during start
at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:=
1136)
at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:78=
2)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
... 7 more
16 avr. 2012 09:52:30 org.apache.catalina.startup.Catalina start
GRAVE: Catalina.start:=20
org.apache.catalina.LifecycleException: Failed to start component [Standard=
Server[8005]]
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
at org.apache.catalina.startup.Catalina.start(Catalina.java:645)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.jav=
a:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessor=
Impl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
Caused by: org.apache.catalina.LifecycleException: Failed to start componen=
t [StandardService[Catalina]]
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
at org.apache.catalina.core.StandardServer.startInternal(StandardServer.jav=
a:732)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
... 7 more
Caused by: org.apache.catalina.LifecycleException: Failed to start componen=
t [StandardEngine[Catalina]]
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
at org.apache.catalina.core.StandardService.startInternal(StandardService.j=
ava:443)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
... 9 more
Caused by: org.apache.catalina.LifecycleException: A child container failed=
 during start
at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:=
1136)
at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.jav=
a:302)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
... 11 more
16 avr. 2012 09:52:30 org.apache.catalina.startup.Catalina start
INFO: Server startup in 2363 ms
=20
=20
Thanks. 		 	   		  =

--_edc1ebcf-8eaa-45b8-bb7b-40b9073a43b8_--

From users-return-233572-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 16 10:44:20 2012
Return-Path: <users-return-233572-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 80FD49D3D
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 16 Apr 2012 10:44:20 +0000 (UTC)
Received: (qmail 95071 invoked by uid 500); 16 Apr 2012 10:44:17 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 94871 invoked by uid 500); 16 Apr 2012 10:44:17 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 94862 invoked by uid 99); 16 Apr 2012 10:44:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2012 10:44:17 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of darryl.lewis@unsw.edu.au designates 149.171.97.18 as permitted sender)
Received: from [149.171.97.18] (HELO smtp-dist.unsw.edu.au) (149.171.97.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2012 10:44:08 +0000
Received: from INFPACM003.services.comms.unsw.edu.au (INFPACM003.services.comms.unsw.edu.au [149.171.193.26])
	by smtp-dist.unsw.edu.au (8.13.6/8.13.6) with ESMTP id q3GAhhYi001213
	for <users@tomcat.apache.org>; Mon, 16 Apr 2012 20:43:43 +1000 (EST)
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: AnADACX3i0+Vq4fsgWdsb2JhbABEszYiAQEWJieCCQEBBYELAQgNC2AlAgQBEogAAwsLrzCJCYo3hxIEiCeLcYFVgRGFA4Ukh2Q
X-IronPort-AV: E=Sophos;i="4.75,427,1330866000"; 
   d="scan'208";a="150866354"
Received: from unknown (HELO INFPWXH001.ad.unsw.edu.au) ([149.171.135.236])
  by INFPACM003.services.comms.unsw.edu.au with ESMTP; 16 Apr 2012 20:37:16 +1000
Received: from INFPWXM006.ad.unsw.edu.au ([169.254.6.88]) by
 INFPWXH001.ad.unsw.edu.au ([149.171.135.236]) with mapi id 14.01.0323.003;
 Mon, 16 Apr 2012 20:43:43 +1000
From: Darryl Lewis <darryl.lewis@unsw.edu.au>
To: Tomcat Users List <users@tomcat.apache.org>,
        Debraj Mallick
	<sridebrajmallick@gmail.com>
Subject: Re: Javamelody and Struts
Thread-Topic: Javamelody and Struts
Thread-Index: AQHNG0Ju97ZPUdj4Q0+qtH/fp+oAG5acPhcAgAAo7oCAAKqWx4AAM3GA
Date: Mon, 16 Apr 2012 10:43:41 +0000
Message-ID: <CBB234E5.2AAB3%darryl.lewis@unsw.edu.au>
In-Reply-To: <4F8BCC69.20603@yahoo.es>
Accept-Language: en-US, en-AU
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
user-agent: Microsoft-MacOutlook/14.10.0.110310
x-originating-ip: [149.171.135.54]
Content-Type: text/plain; charset="iso-8859-1"
Content-ID: <C55E4C67C630C44C88596A086B32AA1D@exch.unsw.edu.au>
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

Make sure the monitoring code is before the struts call.

On 16/04/12 5:38 PM, "Miguel Gonz=E1lez Casta=F1os"
<miguel_3_gonzalez@yahoo.es> wrote:

>On 16/04/2012 09:34, Debraj Mallick wrote:
>> hi there,
>>
>> to access use :*http://<host>/<context>/monitoring*
>>
>> link:=20
>> *http://code.google.com/p/javamelody/wiki/UserGuide#3._First_results*
>Don't get me wrong, but what does it matter the access URL if my webapp
>doesn't even work?
>
>Miguel


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233573-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 16 13:40:26 2012
Return-Path: <users-return-233573-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D67FC97D0
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 16 Apr 2012 13:40:25 +0000 (UTC)
Received: (qmail 62947 invoked by uid 500); 16 Apr 2012 13:40:22 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 62876 invoked by uid 500); 16 Apr 2012 13:40:22 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 62866 invoked by uid 99); 16 Apr 2012 13:40:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2012 13:40:22 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dckerber@verizon.net designates 206.46.173.5 as permitted sender)
Received: from [206.46.173.5] (HELO vms173005pub.verizon.net) (206.46.173.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2012 13:40:13 +0000
Received: from [172.17.47.42] ([unknown] [64.17.225.82])
 by vms173005.mailsrvcs.net
 (Sun Java(tm) System Messaging Server 7u2-7.02 32bit (built Apr 16 2009))
 with ESMTPA id <0M2K00C4OR7FM7R0@vms173005.mailsrvcs.net> for
 users@tomcat.apache.org; Mon, 16 Apr 2012 08:38:09 -0500 (CDT)
Message-id: <4F8C20BB.6090008@verizon.net>
Date: Mon, 16 Apr 2012 09:38:03 -0400
From: David kerber <dckerber@verizon.net>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.25)
 Gecko/20111213 Thunderbird/3.1.17
MIME-version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Trouble starting TC with jmxremote port set
Content-type: text/plain; charset=ISO-8859-1; format=flowed
Content-transfer-encoding: 7bit

I'm trying to configure things so I can monitor my TC server with 
jconsole, and whenever I try to set the jmxremote port, the windows 
service refuses to start.

System info (from Version.bat):

Using CATALINA_BASE:   C:\Program Files\Apache Software 
Foundation\Tomcat 5.5
Using CATALINA_HOME:   C:\Program Files\Apache Software 
Foundation\Tomcat 5.5
Using CATALINA_TMPDIR: C:\Program Files\Apache Software 
Foundation\Tomcat 5.5\temp

Using JRE_HOME:        C:\Program Files\Java\jre6
Using CLASSPATH:       C:\Program Files\Apache Software 
Foundation\Tomcat 5.5\bin\bootstrap.jar

Server version: Apache Tomcat/5.5.28
Server built:   Jul 24 2009 01:33:09
Server number:  5.5.28.0
OS Name:        Windows Server 2008
OS Version:     6.0
Architecture:   amd64
JVM Version:    1.6.0_17-b04
JVM Vendor:     Sun Microsystems Inc.


When I add "-Dcom.sun.management.jmxremote"  to my tomcat5w java 
properties window, it works fine, but adding

-Dcom.sun.management.jmxremote.port=7999

causes the service to fail to start, as does using other ports.  I can 
find nothing in any of the tomcat logs, nor in the windows event viewer 
except one that says "The apache tomcat websiratest1a Service terminated 
unexpectedly"


What should I be looking for here?  Is there something I'm missing in my 
jmx setup?

Thanks!
Dave

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233574-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 16 13:41:34 2012
Return-Path: <users-return-233574-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2B6239815
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 16 Apr 2012 13:41:34 +0000 (UTC)
Received: (qmail 68572 invoked by uid 500); 16 Apr 2012 13:41:31 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 68424 invoked by uid 500); 16 Apr 2012 13:41:30 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 68414 invoked by uid 99); 16 Apr 2012 13:41:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2012 13:41:30 +0000
X-ASF-Spam-Status: No, hits=-1.6 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [207.126.144.113] (HELO eu1sys200aog102.obsmtp.com) (207.126.144.113)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 16 Apr 2012 13:41:22 +0000
Received: from eul0001189.eu.verio.net ([62.73.174.227]) by eu1sys200aob102.postini.com ([207.126.147.11]) with SMTP
	ID DSNKT4wha4nz70kR6DQNqAvFlMwXAwzfE18T@postini.com; Mon, 16 Apr 2012 13:41:01 UTC
Received: from [192.168.1.2] (cpc1-hawk3-0-0-cust397.18-1.cable.virginmedia.com [82.32.113.142])
	by eul0001189.eu.verio.net (Postfix) with ESMTP id 0F3144C494F
	for <users@tomcat.apache.org>; Mon, 16 Apr 2012 14:40:59 +0100 (BST)
From: Oliver Kohll - Mailing Lists <oliver.lists@gtwm.co.uk>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: LockOutRealm IP logging
Date: Mon, 16 Apr 2012 14:40:58 +0100
Message-Id: <A00E02E9-06AC-4DE7-ACD3-1BD1155AE0A3@gtwm.co.uk>
To: users@tomcat.apache.org
Mime-Version: 1.0 (Apple Message framework v1257)
X-Mailer: Apple Mail (2.1257)
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

Is it possible to get LockOutRealm to include the client's IP address in =
log messages, rather than just the username? Messages such as

16-Apr-2012 13:43:23 org.apache.catalina.realm.LockOutRealm authenticate
WARNING: An attempt was made to authenticate the locked user =
"administrator"

Regards
Oliver Kohll=

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233575-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 16 13:54:24 2012
Return-Path: <users-return-233575-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A36EB9B9C
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 16 Apr 2012 13:54:24 +0000 (UTC)
Received: (qmail 6353 invoked by uid 500); 16 Apr 2012 13:54:21 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 6298 invoked by uid 500); 16 Apr 2012 13:54:21 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 6284 invoked by uid 99); 16 Apr 2012 13:54:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2012 13:54:21 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.91.2.13] (HELO smtp-outbound-2.vmware.com) (208.91.2.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2012 13:54:12 +0000
Received: from sc9-mailhost2.vmware.com (sc9-mailhost2.vmware.com [10.113.161.72])
	by smtp-outbound-2.vmware.com (Postfix) with ESMTP id DA3E02822F
	for <users@tomcat.apache.org>; Mon, 16 Apr 2012 06:53:50 -0700 (PDT)
Received: from zimbra-prod-mta-3.vmware.com (zimbra-prod-mta-3.vmware.com [10.113.160.227])
	by sc9-mailhost2.vmware.com (Postfix) with ESMTP id D771BB020B
	for <users@tomcat.apache.org>; Mon, 16 Apr 2012 06:53:50 -0700 (PDT)
Received: from localhost (localhost.localdomain [127.0.0.1])
	by zimbra-prod-mta-3.vmware.com (Postfix) with ESMTP id D345610453D
	for <users@tomcat.apache.org>; Mon, 16 Apr 2012 06:53:50 -0700 (PDT)
X-Virus-Scanned: amavisd-new at zimbra-prod-mta-3.vmware.com
Received: from zimbra-prod-mta-3.vmware.com ([127.0.0.1])
	by localhost (zimbra-prod-mta-3.vmware.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id pGT0v8VJ2zum for <users@tomcat.apache.org>;
	Mon, 16 Apr 2012 06:53:50 -0700 (PDT)
Received: from zimbra-prod-mbox-5.vmware.com (lbv-sc9-t2prod2-int.vmware.com [10.113.160.246])
	by zimbra-prod-mta-3.vmware.com (Postfix) with ESMTP id C2ACC104529
	for <users@tomcat.apache.org>; Mon, 16 Apr 2012 06:53:50 -0700 (PDT)
Date: Mon, 16 Apr 2012 06:53:50 -0700 (PDT)
From: Daniel Mikusa <dmikusa@vmware.com>
To: Tomcat Users List <users@tomcat.apache.org>
Message-ID: <8367571.32.1334584426721.JavaMail.daniel@cleveland>
In-Reply-To: <A00E02E9-06AC-4DE7-ACD3-1BD1155AE0A3@gtwm.co.uk>
Subject: Re: LockOutRealm IP logging
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Originating-IP: [24.160.217.1]
X-Mailer: Zimbra 7.1.3_GA_3374 (Zimbra Desktop/7.1.4_11299_Linux)

----- Original Message -----
> Hello,
> 
> Is it possible to get LockOutRealm to include the client's IP address

Not as convenient, but if you have an access log enabled you should be able to find the IP address in there.

Dan


> in log messages, rather than just the username? Messages such as
> 
> 16-Apr-2012 13:43:23 org.apache.catalina.realm.LockOutRealm
> authenticate
> WARNING: An attempt was made to authenticate the locked user
> "administrator"
> 
> Regards
> Oliver Kohll
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233576-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 16 14:36:47 2012
Return-Path: <users-return-233576-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 05A019C88
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 16 Apr 2012 14:36:47 +0000 (UTC)
Received: (qmail 43294 invoked by uid 500); 16 Apr 2012 14:36:43 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 43231 invoked by uid 500); 16 Apr 2012 14:36:43 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 43222 invoked by uid 99); 16 Apr 2012 14:36:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2012 14:36:43 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [207.126.144.139] (HELO eu1sys200aog115.obsmtp.com) (207.126.144.139)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 16 Apr 2012 14:36:34 +0000
Received: from eul0001189.eu.verio.net ([62.73.174.227]) by eu1sys200aob115.postini.com ([207.126.147.11]) with SMTP
	ID DSNKT4wuXAn/UXMyC74wpG2Lt6FEeMKnho6h@postini.com; Mon, 16 Apr 2012 14:36:14 UTC
Received: from [192.168.1.2] (cpc1-hawk3-0-0-cust397.18-1.cable.virginmedia.com [82.32.113.142])
	by eul0001189.eu.verio.net (Postfix) with ESMTP id 03A194C4942
	for <users@tomcat.apache.org>; Mon, 16 Apr 2012 15:36:11 +0100 (BST)
From: Oliver Kohll - Mailing Lists <oliver.lists@gtwm.co.uk>
Mime-Version: 1.0 (Apple Message framework v1257)
Content-Type: multipart/alternative; boundary="Apple-Mail=_619D4C95-76A7-40F3-811F-768F7CD45F1A"
Subject: Re: LockOutRealm IP logging
Date: Mon, 16 Apr 2012 15:36:11 +0100
In-Reply-To: <8367571.32.1334584426721.JavaMail.daniel@cleveland>
To: "Tomcat Users List" <users@tomcat.apache.org>
References: <8367571.32.1334584426721.JavaMail.daniel@cleveland>
Message-Id: <6BC9D561-1FD7-43E8-9A1F-D11C956AF559@gtwm.co.uk>
X-Mailer: Apple Mail (2.1257)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail=_619D4C95-76A7-40F3-811F-768F7CD45F1A
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=us-ascii


On 16 Apr 2012, at 14:53, Daniel Mikusa wrote:

>> Hello,
>>=20
>> Is it possible to get LockOutRealm to include the client's IP address
>=20
> Not as convenient, but if you have an access log enabled you should be =
able to find the IP address in there.
>=20
> Dan

Thanks, I've now set up FastCommonAccessLogValve in server.xml

Oliver=

--Apple-Mail=_619D4C95-76A7-40F3-811F-768F7CD45F1A--

From users-return-233577-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 16 17:18:21 2012
Return-Path: <users-return-233577-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7E1099043
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 16 Apr 2012 17:18:21 +0000 (UTC)
Received: (qmail 41879 invoked by uid 500); 16 Apr 2012 17:18:18 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 41713 invoked by uid 500); 16 Apr 2012 17:18:18 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 41704 invoked by uid 99); 16 Apr 2012 17:18:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2012 17:18:18 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jak-tomcat-user@m.gmane.org designates 80.91.229.3 as permitted sender)
Received: from [80.91.229.3] (HELO plane.gmane.org) (80.91.229.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2012 17:18:08 +0000
Received: from list by plane.gmane.org with local (Exim 4.69)
	(envelope-from <jak-tomcat-user@m.gmane.org>)
	id 1SJpYg-0006mz-M0
	for users@tomcat.apache.org; Mon, 16 Apr 2012 19:17:47 +0200
Received: from pool-108-48-67-55.washdc.fios.verizon.net ([108.48.67.55])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <users@tomcat.apache.org>; Mon, 16 Apr 2012 19:17:46 +0200
Received: from advanig by pool-108-48-67-55.washdc.fios.verizon.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <users@tomcat.apache.org>; Mon, 16 Apr 2012 19:17:46 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: users@tomcat.apache.org
From: Gautam <advanig@gmail.com>
Subject: Re: Cannot connect to tomcat through apache (proxy)
Date: Mon, 16 Apr 2012 17:17:33 +0000 (UTC)
Lines: 36
Message-ID: <loom.20120416T190600-179@post.gmane.org>
References: <loom.20120414T200146-789@post.gmane.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@dough.gmane.org
X-Gmane-NNTP-Posting-Host: sea.gmane.org
User-Agent: Loom/3.14 (http://gmane.org/)
X-Loom-IP: 108.48.67.55 (Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/534.55.3 (KHTML, like Gecko) Version/5.1.5 Safari/534.55.3)



> Now in tomcat on server 2, we specified the following inside server.xml:
 
>  <Connector port="8443" maxHttpHeaderSize="8192" maxThreads="150" 
> minSpareThreads="25" 
> maxSpareThreads="75" enableLookups="true" acceptCount="100"
>  connectionTimeout="20000" 
> disableUploadTimeout="true"        
>         scheme="https"
>         secure="false" 
>         SSLEnabled="true" 
>         proxyPort="443"
>         proxyName="my_company_domain_name"
>      />

Thanks for the thoughts to folks who commented.

We have resolved this.  

The resolution was to remove the reference to https (sslEnabled = "true" and
scheme="https").  The http service then worked as designed.  We also tested
the above code by adding a certificate (self signed) in tomcat. In that instance
it also worked.  Bottom line is if you are going reference https, then you
should have the certificate credentials in the right place.  Otherwise remove
the reference and let it default to http.

I guess we were side tracked by the write up as it seemed to be well
researched.

Thanks again,

Gautam





---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233578-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 16 17:49:33 2012
Return-Path: <users-return-233578-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5AB9F9CA7
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 16 Apr 2012 17:49:33 +0000 (UTC)
Received: (qmail 31002 invoked by uid 500); 16 Apr 2012 17:49:30 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 30956 invoked by uid 500); 16 Apr 2012 17:49:30 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 30943 invoked by uid 99); 16 Apr 2012 17:49:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2012 17:49:30 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pid@pidster.com designates 209.85.210.44 as permitted sender)
Received: from [209.85.210.44] (HELO mail-pz0-f44.google.com) (209.85.210.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2012 17:49:24 +0000
Received: by dadz14 with SMTP id z14so6953373dad.3
        for <users@tomcat.apache.org>; Mon, 16 Apr 2012 10:49:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=references:from:in-reply-to:mime-version:date:message-id:subject:to
         :content-type;
        bh=kDVhucZUHzyVmcI/ID02x5alyM3etCxlxKFNJ4zCwMs=;
        b=Hit4CUqnWxAAG71VM6Dmrf6Ng8kJt0VRHXLHa+uolpOvpFZK29EOenCeG2cfGPjES6
         A9AgWrZZB4itkpOJaLKgDICjWTVx25UcUZpDUQkAuqgFnJtCeJLLYb2QU5wRVxT06Qhh
         I1wGLAcQdggO7B1C7x9rAhS3FZh5Q6PKigC6Y=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=references:from:in-reply-to:mime-version:date:message-id:subject:to
         :content-type:x-gm-message-state;
        bh=kDVhucZUHzyVmcI/ID02x5alyM3etCxlxKFNJ4zCwMs=;
        b=YQd1pOzweqPhYD4qUu8K5oCGORc2ETxG3QX3/sdxDVEzw+X5D+TO7a6W+WEJmx6hW9
         EtbEmDVVaU30RxBR8QJzyDa8izmzU23AVVRiZqsup5ESmayjcInhrWdRm4U4B86qCIds
         A88gYYbgg3l0YRnw3awWCQkZEAH5qfYw143zuHzx4HQVlkzrZt5xWIwRP/JN4hmUegHk
         FXJXMqgmrNyjsOhrfry3R7AlOgfMbsdhU4mefU3zquFy1fFnvQK0FM4f0OzwFsNx7aG+
         Awv6w4h4IfLfcuGyhQ8TPUMNuKE6+7IjMxKg5zAD+az8MBo87XxX/fQGiKFHjHmdCh9K
         MVkQ==
Received: by 10.68.138.195 with SMTP id qs3mr392840pbb.91.1334598544221; Mon,
 16 Apr 2012 10:49:04 -0700 (PDT)
References: <4F8C20BB.6090008@verizon.net>
From: "Pid *" <pid@pidster.com>
In-Reply-To: <4F8C20BB.6090008@verizon.net>
Mime-Version: 1.0 (1.0)
Date: Mon, 16 Apr 2012 18:49:00 +0100
Message-ID: <2243725013437991056@unknownmsgid>
Subject: Re: Trouble starting TC with jmxremote port set
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=UTF-8
X-Gm-Message-State: ALoCoQn5M14UgnDlf5iybnB/Sr5QcmEcxSM68oxNfYkiNAIHcjTkhPBaiMQfrlTmCMBT5dOB1MHk
X-Virus-Checked: Checked by ClamAV on apache.org

On 16 Apr 2012, at 14:40, David kerber <dckerber@verizon.net> wrote:

> I'm trying to configure things so I can monitor my TC server with jconsole, and whenever I try to set the jmxremote port, the windows service refuses to start.
>
> System info (from Version.bat):
>
> Using CATALINA_BASE:   C:\Program Files\Apache Software Foundation\Tomcat 5.5
> Using CATALINA_HOME:   C:\Program Files\Apache Software Foundation\Tomcat 5.5
> Using CATALINA_TMPDIR: C:\Program Files\Apache Software Foundation\Tomcat 5.5\temp
>
> Using JRE_HOME:        C:\Program Files\Java\jre6
> Using CLASSPATH:       C:\Program Files\Apache Software Foundation\Tomcat 5.5\bin\bootstrap.jar
>
> Server version: Apache Tomcat/5.5.28
> Server built:   Jul 24 2009 01:33:09
> Server number:  5.5.28.0
> OS Name:        Windows Server 2008
> OS Version:     6.0
> Architecture:   amd64
> JVM Version:    1.6.0_17-b04
> JVM Vendor:     Sun Microsystems Inc.
>
>
> When I add "-Dcom.sun.management.jmxremote"  to my tomcat5w java properties window, it works fine, but adding
>
> -Dcom.sun.management.jmxremote.port=7999

Try starting using startup.bat and see if you get a specific logged
error message.

Does the service have a stderr & stdout log configured?

Also: use VisualVM with MBeans plugin & Memory Pools plugin #protip


p

> causes the service to fail to start, as does using other ports.  I can find nothing in any of the tomcat logs, nor in the windows event viewer except one that says "The apache tomcat websiratest1a Service terminated unexpectedly"
>
>
> What should I be looking for here?  Is there something I'm missing in my jmx setup?
>
> Thanks!
> Dave
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233579-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 16 17:53:52 2012
Return-Path: <users-return-233579-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0CF9C9E1D
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 16 Apr 2012 17:53:52 +0000 (UTC)
Received: (qmail 44878 invoked by uid 500); 16 Apr 2012 17:53:48 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 44810 invoked by uid 500); 16 Apr 2012 17:53:48 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 44801 invoked by uid 99); 16 Apr 2012 17:53:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2012 17:53:48 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pid@pidster.com designates 209.85.160.45 as permitted sender)
Received: from [209.85.160.45] (HELO mail-pb0-f45.google.com) (209.85.160.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2012 17:53:44 +0000
Received: by pbcuo5 with SMTP id uo5so7091318pbc.18
        for <users@tomcat.apache.org>; Mon, 16 Apr 2012 10:53:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=references:from:in-reply-to:mime-version:date:message-id:subject:to
         :content-type;
        bh=GnCNI8TEBXNZAAZuw1Wg+fiSieILyFGTapxljK9dhtQ=;
        b=f8GOUZIGWHylw9NYuOsHlKwCBYT/0M5szqrWZyhlcEmWi3zbIeUpeoOHU58iJkz0aT
         sB/KdWCeZofPZdptNLLtICsNnqS85SNs5UKjiITCeWi4b9VCAJoGAakhr0MwXjZtHr/U
         35Ygv8618M7Rr9C2xPyo0Mg8EMKRniLVBmXvo=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=references:from:in-reply-to:mime-version:date:message-id:subject:to
         :content-type:x-gm-message-state;
        bh=GnCNI8TEBXNZAAZuw1Wg+fiSieILyFGTapxljK9dhtQ=;
        b=A4QF5FvuvLotQhDM5UC7tx+mfZcRqmKJUCfj/nDmdqzD8gt3fVfMRxAGVVuc1jbfHs
         P1a4c3z/ewKXlcxx/5iZGN5BIbO3CA5cFBPChIUV8emLD9MQqvmqNLrEYMLg9FhixVX9
         FP+4QzdCFRFiqbL/2VdKLvc8tb+2q5Zzaf/Hb+aykpbWYvqU7Uokv4cHgYxjJkCMI4/h
         sxMCel9ywE7V2xnllQWGaWJl7m68oa+pwIlijf+UA6hpk+nl63rMGIGjJxm/T5yc0usH
         zDZ2IbtOiZ+7/cNI58F9qoBgFhfKLw3lAey+g1tlNzJ0gI/c+cH1CXkFMCgq6YGwfQL2
         0inw==
Received: by 10.68.231.233 with SMTP id tj9mr30109977pbc.49.1334598803796;
 Mon, 16 Apr 2012 10:53:23 -0700 (PDT)
References: <DUB113-W31F2A8E676357B7BEA403AE73E0@phx.gbl>
From: "Pid *" <pid@pidster.com>
In-Reply-To: <DUB113-W31F2A8E676357B7BEA403AE73E0@phx.gbl>
Mime-Version: 1.0 (1.0)
Date: Mon, 16 Apr 2012 18:53:56 +0100
Message-ID: <1596161008556377395@unknownmsgid>
Subject: Re: Help : Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=UTF-8
X-Gm-Message-State: ALoCoQnN4/1dzEA6hEd2gl2JnJZJdON0/OPOFDfYa5b2QwKhwKAFiiqX/oIJK8UMRY4ekTz6psqZ
X-Virus-Checked: Checked by ClamAV on apache.org

On 16 Apr 2012, at 11:28, ayouB __ <ayb-2008@hotmail.fr> wrote:

>
> Hi every body,
>
> Does any one know please what's the source of this error and  how to fix it :

Check you don't already have something running on port 8005, e.g.
Another instance of Tomcat that you didn't stop properly.


p


>
> 16 avr. 2012 09:52:30 org.apache.catalina.core.ContainerBase startInternal
> GRAVE: A child container failed during start
> java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
> at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222)
> at java.util.concurrent.FutureTask.get(FutureTask.java:83)
> at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1128)
> at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
> at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
> at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
> at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
> at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
> at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
> at org.apache.catalina.startup.Catalina.start(Catalina.java:645)
> at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
> at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
> at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
> at java.lang.reflect.Method.invoke(Method.java:597)
> at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
> at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
> Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
> at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
> at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
> at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
> at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
> at java.util.concurrent.FutureTask.run(FutureTask.java:138)
> at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
> at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
> at java.lang.Thread.run(Thread.java:662)
> Caused by: org.apache.catalina.LifecycleException: A child container failed during start
> at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1136)
> at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:782)
> at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
> ... 7 more
> 16 avr. 2012 09:52:30 org.apache.catalina.startup.Catalina start
> GRAVE: Catalina.start:
> org.apache.catalina.LifecycleException: Failed to start component [StandardServer[8005]]
> at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
> at org.apache.catalina.startup.Catalina.start(Catalina.java:645)
> at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
> at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
> at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
> at java.lang.reflect.Method.invoke(Method.java:597)
> at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
> at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
> Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardService[Catalina]]
> at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
> at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
> at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
> ... 7 more
> Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina]]
> at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
> at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
> at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
> ... 9 more
> Caused by: org.apache.catalina.LifecycleException: A child container failed during start
> at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1136)
> at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
> at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
> ... 11 more
> 16 avr. 2012 09:52:30 org.apache.catalina.startup.Catalina start
> INFO: Server startup in 2363 ms
>
>
> Thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233580-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 16 23:25:44 2012
Return-Path: <users-return-233580-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 49E0391D0
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 16 Apr 2012 23:25:44 +0000 (UTC)
Received: (qmail 57194 invoked by uid 500); 16 Apr 2012 23:25:40 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 57119 invoked by uid 500); 16 Apr 2012 23:25:40 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 57107 invoked by uid 99); 16 Apr 2012 23:25:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2012 23:25:40 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of knst.kolinko@gmail.com designates 209.85.213.45 as permitted sender)
Received: from [209.85.213.45] (HELO mail-yw0-f45.google.com) (209.85.213.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2012 23:25:33 +0000
Received: by yhoo21 with SMTP id o21so3474295yho.18
        for <users@tomcat.apache.org>; Mon, 16 Apr 2012 16:25:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=WLBBihDdL7vk1oIup7P4fc5uJoZssqSKCGrvITZ8M+4=;
        b=kf0qqLdqosqfEH0Yt9ytd7MeC6AHARsN/DmII+EDq0pdrV6t03KrRTJ9CS+uysnNpa
         erLhiLrzenxEXPew7ioW1EzVLVEDkQ4NgEktKMOQjBaXOdgNS9j6SUsETu59aVi6qLps
         +FdPn5xTv8CN2bYeGfdsnyUZTLodfFDF5a1CFXxAWq0fUatN4UHZ1SwGMqjlliFZHTci
         ntOOXHAwryvGvaFZONOQE/Lge9sGtspwClVkTq9R3lCSnnq+Ds2xDkdeWjdjGMDPMSHh
         NVSu1NnFQq4skry+bH8Wo3fbSvCBaZz9grqdcLB+rwRhJf4o9/SGqeLvxFILxFO5IwyA
         iR8w==
MIME-Version: 1.0
Received: by 10.236.170.71 with SMTP id o47mr13058928yhl.104.1334618712784;
 Mon, 16 Apr 2012 16:25:12 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Mon, 16 Apr 2012 16:25:12 -0700 (PDT)
In-Reply-To: <DUB113-W31F2A8E676357B7BEA403AE73E0@phx.gbl>
References: <DUB113-W31F2A8E676357B7BEA403AE73E0@phx.gbl>
Date: Tue, 17 Apr 2012 03:25:12 +0400
Message-ID: <CABzHfVmm=XVzA4S1jk7uqce4WioY3zPVfD8QZbNbtHLz3RvXqw@mail.gmail.com>
Subject: Re: Help : Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

2012/4/16 ayouB __ <ayb-2008@hotmail.fr>:
>
> Hi every body,
>
> Does any one know please what's the source of this error and =A0how to fi=
x it :

No. There is not enough info in the excerpt that you provided.

>
> 16 avr. 2012 09:52:30 org.apache.catalina.core.ContainerBase startInterna=
l
> GRAVE: A child container failed during start

It is possible to guess, but I'd be reluctant to do so.  More
information could be obtained by looking for events that occurred
before that, as well as events logged into other log files at the same
time.

You could also tell us a lot more about your configuration.

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233581-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 16 23:41:55 2012
Return-Path: <users-return-233581-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 52D02997D
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 16 Apr 2012 23:41:55 +0000 (UTC)
Received: (qmail 94928 invoked by uid 500); 16 Apr 2012 23:41:52 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 94768 invoked by uid 500); 16 Apr 2012 23:41:52 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 94759 invoked by uid 99); 16 Apr 2012 23:41:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2012 23:41:52 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of knst.kolinko@gmail.com designates 209.85.213.173 as permitted sender)
Received: from [209.85.213.173] (HELO mail-yx0-f173.google.com) (209.85.213.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 Apr 2012 23:41:44 +0000
Received: by yenr5 with SMTP id r5so3484000yen.18
        for <users@tomcat.apache.org>; Mon, 16 Apr 2012 16:41:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=rT6l8MiSjEmAME+OiVBWrDmBLRTe3bBsMD5CwnxnLJ8=;
        b=iAst5peBBsQIJnYbm/5Idx0idaHo9fqmZGnx9XspN0z1Nv0GM1CgqBPi/7Yc/stEtk
         337UKa3hupongHe/8nXxXNy5/NiWVRgKUFG3j9Fsx+14yaga4xS3qeVrMap/N/zJhWFv
         M3TagqrPtLKhi6STktoOj9F1rAqRQARC5NGpkWIijLzzlc7QecuJK7LYyXChs7NUtUvE
         u4id+4bgpE7CQFRt0RL+1treszk7lcQPIFP0sMAKwt8hWyPqLA4RAfIuERA3sLFMqoe3
         rWIUyJeJvFtESAKrMQkwdVDpnftD0LPn/MRONtHvsdM2ceasa/QQTZZpUbOipcP8uTJ0
         L/Tg==
MIME-Version: 1.0
Received: by 10.236.113.106 with SMTP id z70mr11865870yhg.72.1334619683433;
 Mon, 16 Apr 2012 16:41:23 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Mon, 16 Apr 2012 16:41:23 -0700 (PDT)
In-Reply-To: <loom.20120416T190600-179@post.gmane.org>
References: <loom.20120414T200146-789@post.gmane.org>
	<loom.20120416T190600-179@post.gmane.org>
Date: Tue, 17 Apr 2012 03:41:23 +0400
Message-ID: <CABzHfVm_DQqsVweOPDK4ftLDGbU7iGJV0agOapO2g2OMWz34hQ@mail.gmail.com>
Subject: Re: Cannot connect to tomcat through apache (proxy)
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

2012/4/16 Gautam <advanig@gmail.com>:
>
>
>> Now in tomcat on server 2, we specified the following inside server.xml:
>
>> =A0<Connector port=3D"8443" maxHttpHeaderSize=3D"8192" maxThreads=3D"150=
"
>> minSpareThreads=3D"25"
>> maxSpareThreads=3D"75" enableLookups=3D"true" acceptCount=3D"100"
>> =A0connectionTimeout=3D"20000"
>> disableUploadTimeout=3D"true"
>> =A0 =A0 =A0 =A0 scheme=3D"https"
>> =A0 =A0 =A0 =A0 secure=3D"false"
>> =A0 =A0 =A0 =A0 SSLEnabled=3D"true"
>> =A0 =A0 =A0 =A0 proxyPort=3D"443"
>> =A0 =A0 =A0 =A0 proxyName=3D"my_company_domain_name"
>> =A0 =A0 =A0/>
>
> Thanks for the thoughts to folks who commented.
>
> We have resolved this.
>
> The resolution was to remove the reference to https (sslEnabled =3D "true=
" and

The above is important

> scheme=3D"https").

I'd leave it to be scheme=3D"https"

Have you read the docs? Specifically: the "HTTP connectors" page in
the "Configuration Reference Guide". It should explain all attributes
there.

> The http service then worked as designed.  We also tested
> the above code by adding a certificate (self signed) in tomcat. In that i=
nstance
> it also worked.
>
>=A0Bottom line is if you are going reference https, then you
> should have the certificate credentials in the right place. =A0Otherwise =
remove
> the reference and let it default to http.
>

The important bit is that in the Apache HTTP Server configuration that
you cited above
all security for HTTPS is handled by Apache HTTP Server.

The traffic between Apache HTTP Server and Tomcat is plain HTTP,
without any TLS.

> I guess we were side tracked by the write up as it seemed to be well
> researched.
>

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233582-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 17 03:32:15 2012
Return-Path: <users-return-233582-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 968C29CEF
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 17 Apr 2012 03:32:15 +0000 (UTC)
Received: (qmail 38695 invoked by uid 500); 17 Apr 2012 03:32:12 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 38462 invoked by uid 500); 17 Apr 2012 03:32:11 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 38426 invoked by uid 99); 17 Apr 2012 03:32:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 03:32:10 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of debabrattaj@gmail.com designates 209.85.215.45 as permitted sender)
Received: from [209.85.215.45] (HELO mail-lpp01m010-f45.google.com) (209.85.215.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 03:32:04 +0000
Received: by lahe6 with SMTP id e6so5498102lah.18
        for <users@tomcat.apache.org>; Mon, 16 Apr 2012 20:31:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=O6BaYpH4LGi/RVfN5aUFZ9cDLfq2UbO4cRzDMBHsSXk=;
        b=Ww6bLpdH9oCX8xtSNs9xtzHreKX/lfFX+e6UpwTp2AwTpW+V746PZqKAtkkj+3vHaJ
         BdTJ7s+ZmzaEHVtAjMI5gdU5G7m6NAxfL8uaTHCmkcuwBw07J6cIH+AT6pF1SaWQb/5s
         UUPhWl24BZEpo470khM9VrDetN9oSChclZJ5Efzi3F2MfHtyMrkhnn08rAc/OwvywIoD
         0U8B+2q+aca1eaSUjNDELKDdzVr2QCWnxHhVSj4tbKx0TpxpKslT2Yptnb94s7AMsOWj
         clNUUEkw4C4SXl8R8hVblCz1jcc5us6EplDPywKC4BPUzkv3Fr1NNrXkDN08+fz3CTaT
         rnzw==
MIME-Version: 1.0
Received: by 10.152.112.161 with SMTP id ir1mr12525713lab.13.1334633503168;
 Mon, 16 Apr 2012 20:31:43 -0700 (PDT)
Received: by 10.112.127.71 with HTTP; Mon, 16 Apr 2012 20:31:43 -0700 (PDT)
Date: Tue, 17 Apr 2012 09:01:43 +0530
Message-ID: <CAHjK=OyoD+z5W42Oe6=d3=mRNE85gZnD3vbyWp-efR-niX7YiA@mail.gmail.com>
Subject: Fail to load keystore type JKS with path C:\apache-tomcat-7.0.26-windows-x86\apache-tomcat-7.0.26\${user.home}
From: Debabratta Jena <debabrattaj@gmail.com>
To: users <users@tomcat.apache.org>
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

Hello sir,
I am using tomcat 7.0.26 on windows.
I have read the manual "SSL Configuration HOW-TO" to configure SSL for
my web application.
I create the .keystore file which reside on my home directory which is
C:\Users\debabrattaj\.keystore.
Coding for my server.xml is

    <Connector port="8443" maxThreads="150" protocol="HTTP/1.1"
                              scheme="https" secure="true" SSLEnabled="true"
                              keystoreFile="$ {user.home}/.keystore"
keystorePass="XXXXXX"
                              clientAuth="false" sslProtocol="TLS" />

 Now when I restart my server.It shows
Fail to load keystore type JKS with path
C:\apache-tomcat-7.0.26-windows-x86\apache-tomcat-7.0.26\${user.home}\.keystore
due to system can find the path specified.

Where should I keep my .keystore file. Should i keep it in my
C:\apache-tomcat-7.0.26-windows-x86\apache-tomcat-7.0.26\.
I searchred Google and in some help forums also but thats not satisfying.

Please help me.

-- 
Thanks and regards,
debabratta jena

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233583-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 17 07:38:51 2012
Return-Path: <users-return-233583-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BA8DD9B83
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 17 Apr 2012 07:38:51 +0000 (UTC)
Received: (qmail 40846 invoked by uid 500); 17 Apr 2012 07:38:48 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 40425 invoked by uid 500); 17 Apr 2012 07:38:43 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 40391 invoked by uid 99); 17 Apr 2012 07:38:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 07:38:42 +0000
X-ASF-Spam-Status: No, hits=-4.3 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [192.35.17.2] (HELO thoth.sbs.de) (192.35.17.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 07:38:34 +0000
Received: from mail2.siemens.de (localhost [127.0.0.1])
	by thoth.sbs.de (8.13.6/8.13.6) with ESMTP id q3H7cB52007537
	for <users@tomcat.apache.org>; Tue, 17 Apr 2012 09:38:11 +0200
Received: from DEMCHP99ET1MSX.ww902.siemens.net (demchp99et1msx.ww902.siemens.net [139.25.131.180])
	by mail2.siemens.de (8.13.6/8.13.6) with ESMTP id q3H7cANe015663
	(version=TLSv1/SSLv3 cipher=RC4-MD5 bits=128 verify=FAIL)
	for <users@tomcat.apache.org>; Tue, 17 Apr 2012 09:38:11 +0200
Received: from DEMCHP99E84MSX.ww902.siemens.net ([169.254.1.87]) by
 DEMCHP99ET1MSX.ww902.siemens.net ([139.25.131.180]) with mapi; Tue, 17 Apr
 2012 09:38:10 +0200
From: "Osipov, Michael" <michael.osipov@siemens.com>
To: Tomcat Users List <users@tomcat.apache.org>
Date: Tue, 17 Apr 2012 09:38:08 +0200
Subject: Availability of a resource in a realm
Thread-Topic: Availability of a resource in a realm
Thread-Index: Ac0cbQiyR6ei2EqrQAGvVs0cfc9+cg==
Message-ID: <6368FCCCD803D64BB0931D7F5F0A3DD502278A0475@DEMCHP99E84MSX.ww902.siemens.net>
Accept-Language: de-DE
Content-Language: de-DE
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: de-DE
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

SGkgZm9sa3MsDQoNCkkgaGF2ZSBhIHJlc291cmNlIGRlY2xhcmVkIGluIG15IGNvbnRleHQueG1s
IChub3QgYSByZXNvdXJjZSBsaW5rKS4gSSB3YW50IHRvIHJldHJpZXZlIHRoYXQgcmVzb3VyY2Ug
YXMgc29vbiBhcyBwb3NzaWJsZSBpbiBteSByZWFsbS4gSSB0cmllZCBzdGFydCgpIGFuZCBpbml0
KCkgYnV0IGl0IHNlZW1zIGxpa2UgdGhhdCBhdCB0aGlzIHRpbWUgdGhlIEluaXRpYWxDb250ZXh0
IGlzIG5vdCBhdmFpbGFibGUuIFNvIGF0IHdoYXQgdGltZSBjYW4gSSBleHBlY3QgdGhlIGNvbnRl
eHQgYmVpbmcgImNvbXBsZXRlIj8NCg0KSSBhbSBvbiBUb21jYXQgNi4wLjM1DQoNCldpdGggYmVz
dCByZWdhcmRzLA0KTWljaGFlbCBPc2lwb3Y=
DQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IHVzZXJzLXVuc3Vi
c2NyaWJlQHRvbWNhdC5hcGFjaGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1t
YWlsOiB1c2Vycy1oZWxwQHRvbWNhdC5hcGFjaGUub3JnDQoN

From users-return-233584-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 17 10:52:03 2012
Return-Path: <users-return-233584-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B181D9145
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 17 Apr 2012 10:52:03 +0000 (UTC)
Received: (qmail 70861 invoked by uid 500); 17 Apr 2012 10:52:00 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 70817 invoked by uid 500); 17 Apr 2012 10:52:00 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 70806 invoked by uid 99); 17 Apr 2012 10:51:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 10:51:59 +0000
X-ASF-Spam-Status: No, hits=1.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,NORMAL_HTTP_TO_IP,SPF_SOFTFAIL,T_FILL_THIS_FORM_SHORT
X-Spam-Check-By: apache.org
Received-SPF: softfail (nike.apache.org: transitioning domain of amine20@hotmail.com does not designate 216.139.250.139 as permitted sender)
Received: from [216.139.250.139] (HELO joe.nabble.com) (216.139.250.139)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 10:51:52 +0000
Received: from alf.nabble.com ([192.168.236.21])
	by joe.nabble.com with esmtp (Exim 4.72)
	(envelope-from <amine20@hotmail.com>)
	id 1SK60R-0002kU-A3
	for users@tomcat.apache.org; Tue, 17 Apr 2012 03:51:31 -0700
Date: Tue, 17 Apr 2012 03:51:31 -0700 (PDT)
From: amine20 <amine20@hotmail.com>
To: users@tomcat.apache.org
Message-ID: <1334659891301-4889811.post@n6.nabble.com>
Subject: PLZ help: i've issue with SSL TOMCAT
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

hi
i'm new in tomcat/apache environement, i've succes to add ssl to apache2
using openssl, but i've tried to do the same in tomcat but unfortunatly
doesn't WORK.

this is an explanation of what i have did:
Step 1.Create a keystore file using Java          =20
/usr/lib/jvm/java-6-sun-1.6.0.26/jre/bin# keytool -genkey -alias tomcat
-keyalg RSA

root@CAS:/usr/lib/jvm/java-6-sun-1.6.0.26/jre/bin# keytool -genkey -alias
tomcat -keyalg RSA
Enter key store password: changeit
Enter key password for <tomcat>: changeit

You are about to enter information that will be incorporated into
your certificate request.  This information is what is called a
Distinguished Name or DN.  There are quite a few fields but you
can use supplied default values, displayed between brackets, by just
hitting <Enter>, or blank the field by entering the <.> character
before hitting <Enter>.

Common Name (hostname, IP, or your name): CAS
Organization Name (company) [The Sample Company]: crdp-nice.cndp.fr
Organizational Unit Name (department, division): IT
Locality Name (city, district) [Sydney]: FRANCE
State or Province Name (full name) [NSW]: TOULON
Country Name (2 letter code) [AU]: FR
------------------------------------------------->>> now my .keystore file
is in /root folder
root@CAS:/usr/lib/jvm/java-6-sun-1.6.0.26/jre/bin# ls -a /root |grep
.keystore
.keystore

Step 2.Configure Tomcat to use the keystore
a modify the server.xml file as shown:

    <Connector protocol=3D"org.apache.coyote.http11.Http11Protocol"
               port=3D"8443"  SSLEnabled=3D"true"
               keystoreFile=3D"/root/.keystore" keystorePass=3D"changeit"
               maxThreads=3D"150" scheme=3D"https" secure=3D"true"
               clientAuth=3D"false" sslProtocol=3D"TLS" />
 --------------------------------------
for testing:
 service tomcat6 restart
Stopping Tomcat servlet engine: tomcat6.
Starting Tomcat servlet engine: tomcat6.

we see tomcat can restart but in log file i got this:

17 avr. 2012 12:16:30 org.apache.catalina.startup.Catalina start
INFO: Server startup in 6026 ms
17 avr. 2012 12:19:20 org.apache.coyote.http11.Http11Protocol pause
INFO: Suspension de Coyote HTTP/1.1 sur http-8080
17 avr. 2012 12:19:20 org.apache.coyote.http11.Http11Protocol pause
INFO: Suspension de Coyote HTTP/1.1 sur http-8443
17 avr. 2012 12:19:21 org.apache.catalina.core.StandardService stop
INFO: Arr=C3=83=C2=AAt du service Catalina
17 avr. 2012 12:19:21 org.apache.catalina.loader.WebappClassLoader
clearReferencesThreads
GRAVE: The web application [/cas] appears to have started a thread named
[Thread-2] but has failed to stop it. This is very likely to create a memor=
y
leak.
17 avr. 2012 12:19:21 org.apache.catalina.loader.WebappClassLoader
clearReferencesThreads
GRAVE: The web application [/cas] appears to have started a thread named
[scheduler_Worker-1] but has failed to stop it. This is very likely to
create a memory leak.
17 avr. 2012 12:19:21 org.apache.catalina.loader.WebappClassLoader
clearReferencesThreads
GRAVE: The web application [/cas] appears to have started a thread named
[scheduler_Worker-2] but has failed to stop it. This is very likely to
create a memory leak.
17 avr. 2012 12:19:21 org.apache.coyote.http11.Http11Protocol destroy
INFO: Arr=C3=83=C2=AAt de Coyote HTTP/1.1 sur http-8080
17 avr. 2012 12:19:21 org.apache.coyote.http11.Http11Protocol destroy
INFO: Arr=C3=83=C2=AAt de Coyote HTTP/1.1 sur http-8443
17 avr. 2012 12:19:23 org.apache.catalina.startup.ClassLoaderFactory
validateFile
ATTENTION: Problem with directory [/usr/share/tomcat6/server/classes],
exists: [false], isDirectory: [false], canRead: [false]
17 avr. 2012 12:19:23 org.apache.catalina.startup.ClassLoaderFactory
validateFile
ATTENTION: Problem with directory [/usr/share/tomcat6/server], exists:
[false], isDirectory: [false], canRead: [false]
17 avr. 2012 12:19:23 org.apache.catalina.startup.ClassLoaderFactory
validateFile
ATTENTION: Problem with directory [/usr/share/tomcat6/shared/classes],
exists: [false], isDirectory: [false], canRead: [false]
17 avr. 2012 12:19:23 org.apache.catalina.startup.ClassLoaderFactory
validateFile
ATTENTION: Problem with directory [/usr/share/tomcat6/shared], exists:
[false], isDirectory: [false], canRead: [false]
17 avr. 2012 12:19:24 org.apache.coyote.http11.Http11Protocol init
INFO: Initialisation de Coyote HTTP/1.1 sur http-8080
17 avr. 2012 12:19:24 org.apache.tomcat.util.net.jsse.JSSESocketFactory
getStore
GRAVE: Failed to load keystore type JKS with path /root/.keystore due to
/root/.keystore (Permission denied)
java.io.FileNotFoundException: /root/.keystore (Permission denied)
        at java.io.FileInputStream.open(Native Method)
        at java.io.FileInputStream.<init>(FileInputStream.java:120)
        at
org.apache.tomcat.util.net.jsse.JSSESocketFactory.getStore(JSSESocketFactor=
y.java:405)
        at
org.apache.tomcat.util.net.jsse.JSSESocketFactory.getKeystore(JSSESocketFac=
tory.java:296)
        at
org.apache.tomcat.util.net.jsse.JSSESocketFactory.getKeyManagers(JSSESocket=
Factory.java:544)
        at
org.apache.tomcat.util.net.jsse.JSSESocketFactory.init(JSSESocketFactory.ja=
va:481)
        at
org.apache.tomcat.util.net.jsse.JSSESocketFactory.createSocket(JSSESocketFa=
ctory.java:156)
        at org.apache.tomcat.util.net.JIoEndpoint.init(JIoEndpoint.java:538=
)
        at
org.apache.coyote.http11.Http11Protocol.init(Http11Protocol.java:176)
        at
org.apache.catalina.connector.Connector.initialize(Connector.java:1049)
        at
org.apache.catalina.core.StandardService.initialize(StandardService.java:70=
3)
        at
org.apache.catalina.core.StandardServer.initialize(StandardServer.java:838)
        at org.apache.catalina.startup.Catalina.load(Catalina.java:538)
        at org.apache.catalina.startup.Catalina.load(Catalina.java:562)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:3=
9)
        at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImp=
l.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:261)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)
17 avr. 2012 12:19:24 org.apache.coyote.http11.Http11Protocol init
GRAVE: Erreur =C3=83  l'initialisation du point de contact
java.io.FileNotFoundException: /root/.keystore (Permission denied)
        at java.io.FileInputStream.open(Native Method)
        at java.io.FileInputStream.<init>(FileInputStream.java:120)
        at
org.apache.tomcat.util.net.jsse.JSSESocketFactory.getStore(JSSESocketFactor=
y.java:405)
        at
org.apache.tomcat.util.net.jsse.JSSESocketFactory.getKeystore(JSSESocketFac=
tory.java:296)
        at
org.apache.tomcat.util.net.jsse.JSSESocketFactory.getKeyManagers(JSSESocket=
Factory.java:544)
        at
org.apache.tomcat.util.net.jsse.JSSESocketFactory.init(JSSESocketFactory.ja=
va:481)
        at
org.apache.tomcat.util.net.jsse.JSSESocketFactory.createSocket(JSSESocketFa=
ctory.java:156)
        at org.apache.tomcat.util.net.JIoEndpoint.init(JIoEndpoint.java:538=
)
        at
org.apache.coyote.http11.Http11Protocol.init(Http11Protocol.java:176)
        at
org.apache.catalina.connector.Connector.initialize(Connector.java:1049)
        at
org.apache.catalina.core.StandardService.initialize(StandardService.java:70=
3)
        at
org.apache.catalina.core.StandardServer.initialize(StandardServer.java:838)
        at org.apache.catalina.startup.Catalina.load(Catalina.java:538)
        at org.apache.catalina.startup.Catalina.load(Catalina.java:562)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:3=
9)
        at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImp=
l.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:261)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)
17 avr. 2012 12:19:24 org.apache.catalina.core.StandardService initialize
GRAVE: Failed to initialize connector [Connector[HTTP/1.1-8443]]
LifecycleException:  L'initialisation du gestionnaire de protocole a
=C3=83Symbole C (copyright)chou=C3=83Symbole C (copyright):
java.io.FileNotFoundException: /root/.keystore (Permission denied)
        at
org.apache.catalina.connector.Connector.initialize(Connector.java:1051)
        at
org.apache.catalina.core.StandardService.initialize(StandardService.java:70=
3)
        at
org.apache.catalina.core.StandardServer.initialize(StandardServer.java:838)
        at org.apache.catalina.startup.Catalina.load(Catalina.java:538)
        at org.apache.catalina.startup.Catalina.load(Catalina.java:562)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:3=
9)
        at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImp=
l.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:261)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)
17 avr. 2012 12:19:24 org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 1130 ms
17 avr. 2012 12:19:24 org.apache.catalina.core.StandardService start
INFO: D=C3=83Symbole C (copyright)marrage du service Catalina
17 avr. 2012 12:19:24 org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/6.0.35
17 avr. 2012 12:19:24 org.apache.catalina.startup.HostConfig
deployDescriptor
INFO: D=C3=83Symbole C (copyright)ploiement du descripteur de configuration
ROOT.xml
17 avr. 2012 12:19:25 org.apache.catalina.startup.HostConfig deployWAR
INFO: D=C3=83Symbole C (copyright)ploiement de l'archive cas.war de l'appli=
cation
web
--------------
more info: i can load http page in port 8080 for tomcat,
 also i have and i can load https & https:443 pages for apache2
-------------
it's 3 days that im stucking her, thanks for help.

--
View this message in context: http://tomcat.10.n6.nabble.com/PLZ-help-i-ve-=
issue-with-SSL-TOMCAT-tp4889811p4889811.html
Sent from the Tomcat - User mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233585-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 17 11:27:26 2012
Return-Path: <users-return-233585-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D79319133
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 17 Apr 2012 11:27:26 +0000 (UTC)
Received: (qmail 70916 invoked by uid 500); 17 Apr 2012 11:27:23 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 70737 invoked by uid 500); 17 Apr 2012 11:27:23 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 70727 invoked by uid 99); 17 Apr 2012 11:27:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 11:27:23 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,NORMAL_HTTP_TO_IP,RCVD_IN_DNSWL_LOW,SPF_PASS,T_FILL_THIS_FORM_SHORT
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of icicimov@gmail.com designates 209.85.161.173 as permitted sender)
Received: from [209.85.161.173] (HELO mail-gx0-f173.google.com) (209.85.161.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 11:27:14 +0000
Received: by ggnp2 with SMTP id p2so3668860ggn.18
        for <users@tomcat.apache.org>; Tue, 17 Apr 2012 04:26:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=bwoNR7UNuBGoK7zS+PEpPkhv9ciAblXl53fIE/TiJ1U=;
        b=BQT7SqQ9LzWNf1dEmuZxlO8ntUx2iDNw0+JqPzJjojHTeztF/N0w9wvOxXOvu/lLpe
         KILq3G/mm1w5MdFYgXO74I00/fcQBqXzXRXxovb4TR4iQCh3aZZ6ruJ3yNqd4FjkM6cK
         kP4fopGYbTKZhk+PHgx7TAzosz2OhIc1s43pTJGTZEDLy958hC6AzqxODQKRvm/vTGi0
         IwaEWmqOZCauNpfb2xdyiSjDahO/u5WhK5ARyT44aX1TVdBQWz7Rtt7iC3p2kAxLvuKW
         MYHt2VGjresuLcLL0IyEupi5ilsEsHkYhk5dg35qqto/osQQzywOEVO9nZE3Foo9U+RA
         gQXg==
MIME-Version: 1.0
Received: by 10.50.57.199 with SMTP id k7mr8826070igq.25.1334662013807; Tue,
 17 Apr 2012 04:26:53 -0700 (PDT)
Received: by 10.42.71.9 with HTTP; Tue, 17 Apr 2012 04:26:53 -0700 (PDT)
In-Reply-To: <1334659891301-4889811.post@n6.nabble.com>
References: <1334659891301-4889811.post@n6.nabble.com>
Date: Tue, 17 Apr 2012 21:26:53 +1000
Message-ID: <CAAKASGwxMc2OxPY5anR6-PJqQt8V6ttCDxrw4DY3g2T0RBP7sA@mail.gmail.com>
Subject: Re: PLZ help: i've issue with SSL TOMCAT
From: Igor Cicimov <icicimov@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=14dae9340f933a6a7c04bdde37c5

--14dae9340f933a6a7c04bdde37c5
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

On Tue, Apr 17, 2012 at 8:51 PM, amine20 <amine20@hotmail.com> wrote:

> hi
> i'm new in tomcat/apache environement, i've succes to add ssl to apache2
> using openssl, but i've tried to do the same in tomcat but unfortunatly
> doesn't WORK.
>
> this is an explanation of what i have did:
> Step 1.Create a keystore file using Java
> /usr/lib/jvm/java-6-sun-1.6.0.26/jre/bin# keytool -genkey -alias tomcat
> -keyalg RSA
>
> root@CAS:/usr/lib/jvm/java-6-sun-1.6.0.26/jre/bin# keytool -genkey -alias
> tomcat -keyalg RSA
> Enter key store password: changeit
> Enter key password for <tomcat>: changeit
>
> You are about to enter information that will be incorporated into
> your certificate request.  This information is what is called a
> Distinguished Name or DN.  There are quite a few fields but you
> can use supplied default values, displayed between brackets, by just
> hitting <Enter>, or blank the field by entering the <.> character
> before hitting <Enter>.
>
> Common Name (hostname, IP, or your name): CAS
> Organization Name (company) [The Sample Company]: crdp-nice.cndp.fr
> Organizational Unit Name (department, division): IT
> Locality Name (city, district) [Sydney]: FRANCE
> State or Province Name (full name) [NSW]: TOULON
> Country Name (2 letter code) [AU]: FR
> ------------------------------------------------->>> now my .keystore fil=
e
> is in /root folder
> root@CAS:/usr/lib/jvm/java-6-sun-1.6.0.26/jre/bin# ls -a /root |grep
> .keystore
> .keystore
>
> Step 2.Configure Tomcat to use the keystore
> a modify the server.xml file as shown:
>
>    <Connector protocol=3D"org.apache.coyote.http11.Http11Protocol"
>               port=3D"8443"  SSLEnabled=3D"true"
>               keystoreFile=3D"/root/.keystore" keystorePass=3D"changeit"
>               maxThreads=3D"150" scheme=3D"https" secure=3D"true"
>               clientAuth=3D"false" sslProtocol=3D"TLS" />
>  --------------------------------------
> for testing:
>  service tomcat6 restart
> Stopping Tomcat servlet engine: tomcat6.
> Starting Tomcat servlet engine: tomcat6.
>
> we see tomcat can restart but in log file i got this:
>
> 17 avr. 2012 12:16:30 org.apache.catalina.startup.Catalina start
> INFO: Server startup in 6026 ms
> 17 avr. 2012 12:19:20 org.apache.coyote.http11.Http11Protocol pause
> INFO: Suspension de Coyote HTTP/1.1 sur http-8080
> 17 avr. 2012 12:19:20 org.apache.coyote.http11.Http11Protocol pause
> INFO: Suspension de Coyote HTTP/1.1 sur http-8443
> 17 avr. 2012 12:19:21 org.apache.catalina.core.StandardService stop
> INFO: Arr=C3=AAt du service Catalina
> 17 avr. 2012 12:19:21 org.apache.catalina.loader.WebappClassLoader
> clearReferencesThreads
> GRAVE: The web application [/cas] appears to have started a thread named
> [Thread-2] but has failed to stop it. This is very likely to create a
> memory
> leak.
> 17 avr. 2012 12:19:21 org.apache.catalina.loader.WebappClassLoader
> clearReferencesThreads
> GRAVE: The web application [/cas] appears to have started a thread named
> [scheduler_Worker-1] but has failed to stop it. This is very likely to
> create a memory leak.
> 17 avr. 2012 12:19:21 org.apache.catalina.loader.WebappClassLoader
> clearReferencesThreads
> GRAVE: The web application [/cas] appears to have started a thread named
> [scheduler_Worker-2] but has failed to stop it. This is very likely to
> create a memory leak.
> 17 avr. 2012 12:19:21 org.apache.coyote.http11.Http11Protocol destroy
> INFO: Arr=C3=AAt de Coyote HTTP/1.1 sur http-8080
> 17 avr. 2012 12:19:21 org.apache.coyote.http11.Http11Protocol destroy
> INFO: Arr=C3=AAt de Coyote HTTP/1.1 sur http-8443
> 17 avr. 2012 12:19:23 org.apache.catalina.startup.ClassLoaderFactory
> validateFile
> ATTENTION: Problem with directory [/usr/share/tomcat6/server/classes],
> exists: [false], isDirectory: [false], canRead: [false]
> 17 avr. 2012 12:19:23 org.apache.catalina.startup.ClassLoaderFactory
> validateFile
> ATTENTION: Problem with directory [/usr/share/tomcat6/server], exists:
> [false], isDirectory: [false], canRead: [false]
> 17 avr. 2012 12:19:23 org.apache.catalina.startup.ClassLoaderFactory
> validateFile
> ATTENTION: Problem with directory [/usr/share/tomcat6/shared/classes],
> exists: [false], isDirectory: [false], canRead: [false]
> 17 avr. 2012 12:19:23 org.apache.catalina.startup.ClassLoaderFactory
> validateFile
> ATTENTION: Problem with directory [/usr/share/tomcat6/shared], exists:
> [false], isDirectory: [false], canRead: [false]
> 17 avr. 2012 12:19:24 org.apache.coyote.http11.Http11Protocol init
> INFO: Initialisation de Coyote HTTP/1.1 sur http-8080
> 17 avr. 2012 12:19:24 org.apache.tomcat.util.net.jsse.JSSESocketFactory
> getStore
> GRAVE: Failed to load keystore type JKS with path /root/.keystore due to
> /root/.keystore (Permission denied)
> java.io.FileNotFoundException: /root/.keystore (Permission denied)
>        at java.io.FileInputStream.open(Native Method)
>        at java.io.FileInputStream.<init>(FileInputStream.java:120)
>        at
>
> org.apache.tomcat.util.net.jsse.JSSESocketFactory.getStore(JSSESocketFact=
ory.java:405)
>        at
>
> org.apache.tomcat.util.net.jsse.JSSESocketFactory.getKeystore(JSSESocketF=
actory.java:296)
>        at
>
> org.apache.tomcat.util.net.jsse.JSSESocketFactory.getKeyManagers(JSSESock=
etFactory.java:544)
>        at
>
> org.apache.tomcat.util.net.jsse.JSSESocketFactory.init(JSSESocketFactory.=
java:481)
>        at
>
> org.apache.tomcat.util.net.jsse.JSSESocketFactory.createSocket(JSSESocket=
Factory.java:156)
>        at org.apache.tomcat.util.net.JIoEndpoint.init(JIoEndpoint.java:53=
8)
>        at
> org.apache.coyote.http11.Http11Protocol.init(Http11Protocol.java:176)
>        at
> org.apache.catalina.connector.Connector.initialize(Connector.java:1049)
>        at
>
> org.apache.catalina.core.StandardService.initialize(StandardService.java:=
703)
>        at
> org.apache.catalina.core.StandardServer.initialize(StandardServer.java:83=
8)
>        at org.apache.catalina.startup.Catalina.load(Catalina.java:538)
>        at org.apache.catalina.startup.Catalina.load(Catalina.java:562)
>        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>        at
>
> sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java=
:39)
>        at
>
> sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorI=
mpl.java:25)
>        at java.lang.reflect.Method.invoke(Method.java:597)
>        at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:261)
>        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)
> 17 avr. 2012 12:19:24 org.apache.coyote.http11.Http11Protocol init
> GRAVE: Erreur =C3  l'initialisation du point de contact
> java.io.FileNotFoundException: /root/.keystore (Permission denied)
>        at java.io.FileInputStream.open(Native Method)
>        at java.io.FileInputStream.<init>(FileInputStream.java:120)
>        at
>
> org.apache.tomcat.util.net.jsse.JSSESocketFactory.getStore(JSSESocketFact=
ory.java:405)
>        at
>
> org.apache.tomcat.util.net.jsse.JSSESocketFactory.getKeystore(JSSESocketF=
actory.java:296)
>        at
>
> org.apache.tomcat.util.net.jsse.JSSESocketFactory.getKeyManagers(JSSESock=
etFactory.java:544)
>        at
>
> org.apache.tomcat.util.net.jsse.JSSESocketFactory.init(JSSESocketFactory.=
java:481)
>        at
>
> org.apache.tomcat.util.net.jsse.JSSESocketFactory.createSocket(JSSESocket=
Factory.java:156)
>        at org.apache.tomcat.util.net.JIoEndpoint.init(JIoEndpoint.java:53=
8)
>        at
> org.apache.coyote.http11.Http11Protocol.init(Http11Protocol.java:176)
>        at
> org.apache.catalina.connector.Connector.initialize(Connector.java:1049)
>        at
>
> org.apache.catalina.core.StandardService.initialize(StandardService.java:=
703)
>        at
> org.apache.catalina.core.StandardServer.initialize(StandardServer.java:83=
8)
>        at org.apache.catalina.startup.Catalina.load(Catalina.java:538)
>        at org.apache.catalina.startup.Catalina.load(Catalina.java:562)
>        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>        at
>
> sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java=
:39)
>        at
>
> sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorI=
mpl.java:25)
>        at java.lang.reflect.Method.invoke(Method.java:597)
>        at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:261)
>        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)
> 17 avr. 2012 12:19:24 org.apache.catalina.core.StandardService initialize
> GRAVE: Failed to initialize connector [Connector[HTTP/1.1-8443]]
> LifecycleException:  L'initialisation du gestionnaire de protocole a
> =C3Symbole C (copyright)chou=C3Symbole C (copyright):
> java.io.FileNotFoundException: /root/.keystore (Permission denied)
>        at
> org.apache.catalina.connector.Connector.initialize(Connector.java:1051)
>        at
>
> org.apache.catalina.core.StandardService.initialize(StandardService.java:=
703)
>        at
> org.apache.catalina.core.StandardServer.initialize(StandardServer.java:83=
8)
>        at org.apache.catalina.startup.Catalina.load(Catalina.java:538)
>        at org.apache.catalina.startup.Catalina.load(Catalina.java:562)
>        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>        at
>
> sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java=
:39)
>        at
>
> sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorI=
mpl.java:25)
>        at java.lang.reflect.Method.invoke(Method.java:597)
>        at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:261)
>        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)
> 17 avr. 2012 12:19:24 org.apache.catalina.startup.Catalina load
> INFO: Initialization processed in 1130 ms
> 17 avr. 2012 12:19:24 org.apache.catalina.core.StandardService start
> INFO: D=C3Symbole C (copyright)marrage du service Catalina
> 17 avr. 2012 12:19:24 org.apache.catalina.core.StandardEngine start
> INFO: Starting Servlet Engine: Apache Tomcat/6.0.35
> 17 avr. 2012 12:19:24 org.apache.catalina.startup.HostConfig
> deployDescriptor
> INFO: D=C3Symbole C (copyright)ploiement du descripteur de configuration
> ROOT.xml
> 17 avr. 2012 12:19:25 org.apache.catalina.startup.HostConfig deployWAR
> INFO: D=C3Symbole C (copyright)ploiement de l'archive cas.war de
> l'application
> web
> --------------
> more info: i can load http page in port 8080 for tomcat,
>  also i have and i can load https & https:443 pages for apache2
> -------------
> it's 3 days that im stucking her, thanks for help.
>
> --
> View this message in context:
> http://tomcat.10.n6.nabble.com/PLZ-help-i-ve-issue-with-SSL-TOMCAT-tp4889=
811p4889811.html
> Sent from the Tomcat - User mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>
>
Whats not clear here?

GRAVE: Failed to load keystore type JKS with path /root/.keystore due to
/root/.keystore (*Permission denied*)

--14dae9340f933a6a7c04bdde37c5--

From users-return-233586-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 17 11:29:11 2012
Return-Path: <users-return-233586-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8B67B9C8E
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 17 Apr 2012 11:29:11 +0000 (UTC)
Received: (qmail 79523 invoked by uid 500); 17 Apr 2012 11:29:08 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 79481 invoked by uid 500); 17 Apr 2012 11:29:08 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 79472 invoked by uid 99); 17 Apr 2012 11:29:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 11:29:08 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of debabrattaj@gmail.com designates 209.85.215.45 as permitted sender)
Received: from [209.85.215.45] (HELO mail-lpp01m010-f45.google.com) (209.85.215.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 11:29:00 +0000
Received: by lahe6 with SMTP id e6so5847058lah.18
        for <users@tomcat.apache.org>; Tue, 17 Apr 2012 04:28:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=uocx39kQ+nCak6hVYIG4IzDxPHxmMQe7YkPYuNsv/Nw=;
        b=VX3doEhv5nDh4e6Cl/2kmUH3saIXDWD42GGT4grjpFyGX5VOZ1Aj0HghlgD+cXWQP0
         +2DiM5w0jekBHyyxXokhHaOYf5dSuxTmCo+vscyKEpsN0qNJEG4mA4ob9EX9FzGyANdD
         ruu/SkBXoDwvb2prV5bVEVFE3VU5ttW0Ray45ZgMzk+yUzIbs9RUh4MQgQoND/G80dPD
         QulnuaYxAExQeokX9zISiUNiaa2sAaBeVNNiQbanVbNlBEJbjDmOUFpCrVpBuAAS2ADq
         59dIaC9uwYX9993pau3Ig94bL7HcE0qlU2kb/D3yy0VW/OaprLVdkkyJk0VAf9yoKodT
         OC9w==
MIME-Version: 1.0
Received: by 10.112.47.66 with SMTP id b2mr7053144lbn.35.1334662120321; Tue,
 17 Apr 2012 04:28:40 -0700 (PDT)
Received: by 10.112.127.71 with HTTP; Tue, 17 Apr 2012 04:28:40 -0700 (PDT)
Date: Tue, 17 Apr 2012 16:58:40 +0530
Message-ID: <CAHjK=OztcP3k7E-VMgA1gPCXBWwCyWMEnV17DHnEcH8E=LXCOQ@mail.gmail.com>
Subject: Thank you
From: Debabratta Jena <debabrattaj@gmail.com>
To: users@tomcat.apache.org
Content-Type: text/plain; charset=UTF-8

Thank you sir for your reply

I resolved my problem.

Thanks and regards....
-- 
debabratta jena

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233587-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 17 11:44:05 2012
Return-Path: <users-return-233587-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3F0B69F65
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 17 Apr 2012 11:44:05 +0000 (UTC)
Received: (qmail 26613 invoked by uid 500); 17 Apr 2012 11:44:02 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 26436 invoked by uid 500); 17 Apr 2012 11:44:01 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 26427 invoked by uid 99); 17 Apr 2012 11:44:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 11:44:01 +0000
X-ASF-Spam-Status: No, hits=1.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of milesg78@gmail.com designates 209.85.210.44 as permitted sender)
Received: from [209.85.210.44] (HELO mail-pz0-f44.google.com) (209.85.210.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 11:43:56 +0000
Received: by dadz14 with SMTP id z14so7939138dad.3
        for <users@tomcat.apache.org>; Tue, 17 Apr 2012 04:43:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:sender:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type;
        bh=T0cPS/09XSCPHGdsw7N2uPq5LmAFPa4hc4gl2cAm6Vs=;
        b=aeabtjgijfiBlP1NkDl8U+GqK4wnT98hyZV54JcO/X+0iBhySQXAHVohBtOXQDYiEw
         XYBvIAwB0o3PqzEv5rkNP1exWY98j+oCRygJlRcAStWOOZKu5azG1q7/HwtXiNe56tNj
         cjvBN3khFcjDr70qNt+yTem8iVB80ORrijGqKVqAS+AD0p4Izk5yO/nuTBQi6tA8U0/d
         G5c1SCpxNz5GBYLnIhQToNkhGYOkK9g7NjSIGJU9mlIRx6rHXUS4YZjs9Jf+nV8NePTl
         X8/duZBd5XgU++4qnMmumblkPJSq5x/FoyOltSpu7Q1Px0702DAU0C1m0frjeObOLpkh
         HAGA==
MIME-Version: 1.0
Received: by 10.68.229.33 with SMTP id sn1mr36404488pbc.59.1334663015806; Tue,
 17 Apr 2012 04:43:35 -0700 (PDT)
Sender: milesg78@gmail.com
Received: by 10.142.172.2 with HTTP; Tue, 17 Apr 2012 04:43:35 -0700 (PDT)
In-Reply-To: <4F871FF0.8070109@christopherschultz.net>
References: <CAJMhK2+38h0LdKUVemA6JNaEHqm8q+mc3ohAj9hXThvrBQh7yQ@mail.gmail.com>
	<5d1d2822faf2e2ae22f9eff15f3afd12@tau.ceti.pl>
	<CAJMhK2JS51iEHh6Rc2Dd0oWP2T1yFoYfLanno--f-T70XZribA@mail.gmail.com>
	<99C8B2929B39C24493377AC7A121E21FB016FD1231@USEA-EXCH8.na.uis.unisys.com>
	<CAJMhK2+1Ex0JqiVzrpbLNprMo9wk5VQ3tOaJAVN4fv_3Gq0q0A@mail.gmail.com>
	<4847057902696949195@unknownmsgid>
	<CAFmzfTWYPASufMOoEo2swYJo8NEZhZUE=eT4Tf4ZbdK56fAwGw@mail.gmail.com>
	<826e559f-bd76-4489-af42-53378ea203e4@email.android.com>
	<4F871FF0.8070109@christopherschultz.net>
Date: Tue, 17 Apr 2012 14:43:35 +0300
X-Google-Sender-Auth: wq1RAPwj8GiZcs5y_UCvJf481x0
Message-ID: <CAFmzfTUKTF3H7_o3xvoiFcfyHgf8xB6q0cxFgYJWpqu-+aaZJQ@mail.gmail.com>
Subject: Re: Using ServletContainerInitializer for 2.5 applications
From: Violeta Georgieva <violetagg@apache.org>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=047d7b1601bbf3b58d04bdde72bc
X-Virus-Checked: Checked by ClamAV on apache.org

--047d7b1601bbf3b58d04bdde72bc
Content-Type: text/plain; charset=ISO-8859-1

Ok I understood.
Thanks

2012/4/12 Christopher Schultz <chris@christopherschultz.net>

> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Mark,
>
> On 4/12/12 8:58 AM, markt@apache.org wrote:
> > If you want to use Servlet 3.0 features then you need to declare
> > 3.0 in the web.xml.
>
> +1
>
> Since the spec is (almost entirely) backward-compatible, this shouldn't
> represent an undue hardship. If you have to support customers who
> don't necessarily have a 3.0-spec container available, then you'll
> have to find another way to satisfy your requirement.
>
> - -chris
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
> Comment: GPGTools - http://gpgtools.org
> Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/
>
> iEYEARECAAYFAk+HH/AACgkQ9CaO5/Lv0PDLRACfVApXPTtjeyTIBsNVrarNfXto
> mlsAnjThrgVIKKV1ZnoN82RA5/nCG+Jc
> =13Wk
> -----END PGP SIGNATURE-----
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>
>

--047d7b1601bbf3b58d04bdde72bc--

From users-return-233588-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 17 12:25:40 2012
Return-Path: <users-return-233588-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7D5189927
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 17 Apr 2012 12:25:40 +0000 (UTC)
Received: (qmail 54384 invoked by uid 500); 17 Apr 2012 12:25:37 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 54328 invoked by uid 500); 17 Apr 2012 12:25:37 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 54319 invoked by uid 99); 17 Apr 2012 12:25:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 12:25:36 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [195.130.137.68] (HELO georges.telenet-ops.be) (195.130.137.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 12:25:27 +0000
Received: from [192.168.1.109] ([84.198.206.133])
	by georges.telenet-ops.be with bizsmtp
	id z0R71i0042tD98c060R7ho; Tue, 17 Apr 2012 14:25:07 +0200
Message-ID: <4F8D6122.40609@kantl.be>
Date: Tue, 17 Apr 2012 14:25:06 +0200
From: "ron.vandenbranden@home" <ron.vandenbranden@kantl.be>
User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: users@tomcat.apache.org
Subject: adding a global URI prefix for Tomcat web apps
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit

Hi,

I am setting up a reverse proxy configuration where all requests whose 
path starts with '/apps/' should be proxied by Apache to Tomcat. This 
IMO has 2 benefits: it makes it possible to reserve proxying to only the 
'/apps/' part of the URI space, and to use only a single proxy rule for 
all Tomcat apps (i.e. requests for any Tomcat app should just start with 
'/apps/').

For example, requests for http://mydomain/apps/my_app/ should be proxied 
to http://localhost:8082/my_app/. Note the absence of the '/apps/' 
prefix in the Tomcat URI: 'my_app' lives in the regular location at 
${CATALINA_HOME}/webapps/my_app.

I have achieved this using following Proxy rules in an Apache vhost.conf 
file:

   ProxyPreserveHost    on
   ProxyPass            /apps/    http://localhost:8082/
   ProxyPassReverse    /apps/    http://mydomain/

(Note: I have used ProxyPreserveHost since my Tomcat app needs access to 
the original host to generate further links). All goes well, except for 
absolute links that are generated by one part of my Tomcat app. Given 
above configuration, my Tomcat app will 'see' this request: 
http://mydomain/my_app, and hence generate links without the '/apps/' 
prefix that should trigger proxying for those links.

It took me some time, but I understand now that this is essential 
characteristic of proxying, and that there's no 'standard' way to pass 
on that '/apps/' prefix of the original request to the proxied app. 
Hence, I started to investigate another possibility, namely defining a 
global prefix for all Tomcat apps, and proxy the Tomcat apps with 
following settings:

   ProxyPreserveHost    on
   ProxyPass            /apps/    http://localhost:8082/apps/
   ProxyPassReverse    /apps/    http://mydomain/apps/

This would proxy requests for http://mydomain/apps/my_app/ to 
http://localhost:8082/apps/my_app/. Since all apps on the Tomcat server 
will be accessed behind a proxy, I have no problem that this '/apps/' 
prefix will be required for all Tomcat apps.

So far, so good. Yet, I am struggling with the Tomcat side of this 
approach: finding a way to add a global path prefix for requests to 
Tomcat apps. The closest I got was this:
     1. don't touch the physical location of the Tomcat apps: leave them 
at ${CATALINA.HOME}/webapps
     2. change ${CATALINA.HOME}/conf/server.xml as follows:

     <Host name="localhost"  appBase="webapps" unpackWARs="true" autoDeploy="false" deployOnStartup="false">
       <Context path="/apps/my_app" docBase="/my_app/" reloadable="true"/>
     </Host>

While this makes the my_app Tomcat app accessible at 
http://localhost:8082/apps/my_app/, it also suggests that all Tomcat 
apps should be defined manually in a separate <Context> element. This 
makes it less flexible to add new Tomcat web apps (and would actually 
mean more configuration work than declaring separate proxy rules for 
each app in the Apache configuration, without the '/apps/' prefix). I 
tried this:

       <Context path="/apps" docBase="/" reloadable="true"/>

(and @docBase variants such as "", or "."), but this doesn't work: no 
indication of any webapps being deployed in the Tomcat console output, 
and all requests return a 404 error.

Hence my question: is there a simple(r) way of 'declaring' a global URI 
prefix for Tomcat webapps?

Any advice much appreciated!

Ron

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233589-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 17 12:25:46 2012
Return-Path: <users-return-233589-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A9BE199BF
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 17 Apr 2012 12:25:46 +0000 (UTC)
Received: (qmail 57370 invoked by uid 500); 17 Apr 2012 12:25:43 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 57305 invoked by uid 500); 17 Apr 2012 12:25:43 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 57295 invoked by uid 99); 17 Apr 2012 12:25:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 12:25:42 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.91.2.13] (HELO smtp-outbound-2.vmware.com) (208.91.2.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 12:25:35 +0000
Received: from sc9-mailhost2.vmware.com (sc9-mailhost2.vmware.com [10.113.161.72])
	by smtp-outbound-2.vmware.com (Postfix) with ESMTP id 82D4828133
	for <users@tomcat.apache.org>; Tue, 17 Apr 2012 05:25:13 -0700 (PDT)
Received: from zimbra-prod-mta-1.vmware.com (zimbra-prod-mta-1.vmware.com [10.113.160.173])
	by sc9-mailhost2.vmware.com (Postfix) with ESMTP id 7EE2CB0523
	for <users@tomcat.apache.org>; Tue, 17 Apr 2012 05:25:13 -0700 (PDT)
Received: from localhost (localhost.localdomain [127.0.0.1])
	by zimbra-prod-mta-1.vmware.com (Postfix) with ESMTP id 7AD9896B3E
	for <users@tomcat.apache.org>; Tue, 17 Apr 2012 05:25:13 -0700 (PDT)
X-Virus-Scanned: amavisd-new at zimbra-prod-mta-1.vmware.com
Received: from zimbra-prod-mta-1.vmware.com ([127.0.0.1])
	by localhost (zimbra-prod-mta-1.vmware.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id KXxfAAC5FOhQ for <users@tomcat.apache.org>;
	Tue, 17 Apr 2012 05:25:13 -0700 (PDT)
Received: from zimbra-prod-mbox-5.vmware.com (zimbra-prod-mbox-5.vmware.com [10.113.160.194])
	by zimbra-prod-mta-1.vmware.com (Postfix) with ESMTP id 69DBC96B35
	for <users@tomcat.apache.org>; Tue, 17 Apr 2012 05:25:13 -0700 (PDT)
Date: Tue, 17 Apr 2012 05:25:13 -0700 (PDT)
From: Daniel Mikusa <dmikusa@vmware.com>
To: Tomcat Users List <users@tomcat.apache.org>
Message-ID: <289212.98.1334665510418.JavaMail.daniel@cleveland>
In-Reply-To: <CAHjK=OyoD+z5W42Oe6=d3=mRNE85gZnD3vbyWp-efR-niX7YiA@mail.gmail.com>
Subject: Re: Fail to load keystore type JKS with path
 C:\apache-tomcat-7.0.26-windows-x86\apache-tomcat-7.0.26\${user.home}
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Originating-IP: [24.160.217.1]
X-Mailer: Zimbra 7.1.3_GA_3374 (Zimbra Desktop/7.1.4_11299_Linux)

----- Original Message -----
> Hello sir,
> I am using tomcat 7.0.26 on windows.
> I have read the manual "SSL Configuration HOW-TO" to configure SSL
> for
> my web application.
> I create the .keystore file which reside on my home directory which
> is
> C:\Users\debabrattaj\.keystore.
> Coding for my server.xml is
> 
>     <Connector port="8443" maxThreads="150" protocol="HTTP/1.1"
>                               scheme="https" secure="true"
>                               SSLEnabled="true"
>                               keystoreFile="$ {user.home}/.keystore"

Not sure if this is a cut-and-paste issue, but you shouldn't have a space between the dollar sign and the left bracket.  It should just be "${user.home}".

> keystorePass="XXXXXX"
>                               clientAuth="false" sslProtocol="TLS" />
> 
>  Now when I restart my server.It shows
> Fail to load keystore type JKS with path
> C:\apache-tomcat-7.0.26-windows-x86\apache-tomcat-7.0.26\${user.home}\.keystore
> due to system can find the path specified.
> 
> Where should I keep my .keystore file. Should i keep it in my
> C:\apache-tomcat-7.0.26-windows-x86\apache-tomcat-7.0.26\.
> I searchred Google and in some help forums also but thats not
> satisfying.

It's up to you where you put it.  If you don't have a preference, I see a lot of people put it in the "conf" directory.  Something like this maybe?

  ${catalina.base}/conf/ssl/my-keystore.jks 

Dan

> 
> Please help me.
> 
> --
> Thanks and regards,
> debabratta jena
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233590-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 17 12:48:34 2012
Return-Path: <users-return-233590-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D01D995A3
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 17 Apr 2012 12:48:34 +0000 (UTC)
Received: (qmail 50941 invoked by uid 500); 17 Apr 2012 12:48:31 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 50814 invoked by uid 500); 17 Apr 2012 12:48:31 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 50803 invoked by uid 99); 17 Apr 2012 12:48:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 12:48:31 +0000
X-ASF-Spam-Status: No, hits=1.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mims8010@googlemail.com designates 209.85.160.45 as permitted sender)
Received: from [209.85.160.45] (HELO mail-pb0-f45.google.com) (209.85.160.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 12:48:23 +0000
Received: by pbcuo5 with SMTP id uo5so8187567pbc.18
        for <users@tomcat.apache.org>; Tue, 17 Apr 2012 05:48:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=vOmF5ZbY68EdEfbzXT+fT8OeVV6DiXo4mOloJ9U8w1A=;
        b=iCcFgEhIgtNiKavj1S3ImWfjV6NklOY+dnWZ7xFNgr/VjRnruMIZJTQic2xMZaZkrr
         o8kHlybu+Oo39YDMiccoIoWkvJq5upSRwzuv4+gg5PLf7J7RapYeCbEhLllnxWUjv61c
         M+A0381n1LeC5h/LX7X/QgfK0YGkzDQvDr/ieiDnOJlkW1dIPu6liTwX/rWryerL7ROi
         fxmPiRNLB1VN66RCVjzqa/g1dDHJW1Iq7CIANl28puWpssw66lNbA18K4hgdh2BzbQpB
         cuJvbs8XujDYBJ1ZOpuPoq/5jySuee0fS8mjLULDqHECbK3xUeNMebmECXpdxS+lxSBf
         shCA==
MIME-Version: 1.0
Received: by 10.68.200.225 with SMTP id jv1mr36015084pbc.120.1334666882285;
 Tue, 17 Apr 2012 05:48:02 -0700 (PDT)
Received: by 10.68.132.227 with HTTP; Tue, 17 Apr 2012 05:48:01 -0700 (PDT)
Date: Tue, 17 Apr 2012 15:48:01 +0300
Message-ID: <CAAu+a+vquBRKStbeHHvrnf_ph2wLvKyi=PALV8jJoDUk7=ZXiQ@mail.gmail.com>
Subject: Why @WebServlet annotation is not processed when web.xml is version 2.5?
From: maria petrova <mims8010@googlemail.com>
To: users@tomcat.apache.org
Content-Type: multipart/mixed; boundary=047d7b15ac43697fe004bddf5999

--047d7b15ac43697fe004bddf5999
Content-Type: multipart/alternative; boundary=047d7b15ac43697fd904bddf5997

--047d7b15ac43697fd904bddf5997
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable

Hi,


We=92ve embedded Tomcat 7.0.26 in our product and we are currently trying t=
o
cover Servlet 3.0 CTS with it.  We=92ve encountered the following problem
with one of the tests.

Though the version of the web deployment descriptor of the test application
is 2.5, there is a servlet annotated with *@WebServlet *annotation and
requests to this servlet are responded with 404 Not Found. When I change
the version of the web.xml to 3.0 everything works just fine.


In Chapter *=931.6.2 Regarding Processing annotations=94* in the Servlet 3.=
0
Specification it is said that:

*=93The version of the descriptor MUST not affect which annotations you sca=
n
for in a web application.=94*

So my understanding is that the application should be processed for Servlet
3.0 specific annotations regardless of the version of the deployment
descriptor.


As far as I=92m aware, each new Tomcat release successfully covers Servlet
3.0 CTS, so I=92m wondering if I=92ve missed some configuration on Tomcat s=
ide?

Any hints or ideas are highly appreciated.


Thanks!

Maria


P.S. The issue is easily reproducible with clean Tomcat 7.0.26 installation
and the attached simple test applications. They differ only in the
web.xml=92s version and only /AnnotTest_30/AnnotServlet is correctly
responded, while /AnnotTest_25/AnnotServlet gets 404 response.

--047d7b15ac43697fd904bddf5997
Content-Type: text/html; charset=windows-1252
Content-Transfer-Encoding: quoted-printable

<div>Hi,</div><div><p class=3D"MsoNormal"><br></p><p class=3D"MsoNormal">We=
=92ve embedded Tomcat 7.0.26 in our product and we are currently
trying to cover Servlet 3.0 CTS with it.=A0
We=92ve encountered the following problem with one of the tests.</p>

<p class=3D"MsoNormal">Though the version of the web deployment descriptor =
of the test
application is 2.5, there is a servlet annotated with <b>@WebServlet </b>an=
notation
and requests to this servlet are responded with 404 Not Found. When I chang=
e
the version of the web.xml to 3.0 everything works just fine.</p><p class=
=3D"MsoNormal"><br></p>

<p class=3D"MsoNormal">In Chapter <i>=93<b>1.6.2 Regarding Processing annot=
ations</b>=94</i> in the Servlet 3.0
Specification it is said that:</p>

<p class=3D"MsoNormal" style=3D"margin-bottom:0.0001pt"><i>=93The version o=
f the descriptor MUST
not affect which annotations you scan for in a web application.=94</i></p>

<p class=3D"MsoNormal" style=3D"margin-bottom:0.0001pt">So my understanding=
 is that the application should be processed
for Servlet 3.0 specific annotations regardless of the version of the
deployment descriptor.</p><p class=3D"MsoNormal" style=3D"margin-bottom:0.0=
001pt"><br></p><p class=3D"MsoNormal"></p>

<p class=3D"MsoNormal">As far as I=92m aware, each new Tomcat release succe=
ssfully covers
Servlet 3.0 CTS, so I=92m wondering if I=92ve missed some configuration on =
Tomcat
side?</p><p class=3D"MsoNormal"></p>

<p class=3D"MsoNormal">Any hints or ideas are highly appreciated.</p><p cla=
ss=3D"MsoNormal"><br></p>

<p class=3D"MsoNormal">Thanks!</p><p class=3D"MsoNormal">Maria</p><p class=
=3D"MsoNormal"><br></p><p class=3D"MsoNormal">P.S.=A0The issue is easily re=
producible with clean Tomcat 7.0.26 installation and the attached simple te=
st applications. They differ only in the web.xml=92s version and only /Anno=
tTest_30/AnnotServlet is correctly responded, while /AnnotTest_25/AnnotServ=
let gets 404 response.</p>
</div>

--047d7b15ac43697fd904bddf5997--

--047d7b15ac43697fe004bddf5999
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org
--047d7b15ac43697fe004bddf5999--

From users-return-233591-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 17 12:55:27 2012
Return-Path: <users-return-233591-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0E3AD97BF
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 17 Apr 2012 12:55:27 +0000 (UTC)
Received: (qmail 78966 invoked by uid 500); 17 Apr 2012 12:55:23 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 78829 invoked by uid 500); 17 Apr 2012 12:55:23 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 78820 invoked by uid 99); 17 Apr 2012 12:55:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 12:55:23 +0000
X-ASF-Spam-Status: No, hits=1.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (nike.apache.org: transitioning domain of amine20@hotmail.com does not designate 216.139.250.139 as permitted sender)
Received: from [216.139.250.139] (HELO joe.nabble.com) (216.139.250.139)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 12:55:16 +0000
Received: from alf.nabble.com ([192.168.236.21])
	by joe.nabble.com with esmtp (Exim 4.72)
	(envelope-from <amine20@hotmail.com>)
	id 1SK7vr-0008OH-KJ
	for users@tomcat.apache.org; Tue, 17 Apr 2012 05:54:55 -0700
Date: Tue, 17 Apr 2012 05:54:55 -0700 (PDT)
From: amine20 <amine20@hotmail.com>
To: users@tomcat.apache.org
Message-ID: <1334667295617-4890173.post@n6.nabble.com>
In-Reply-To: <1334659891301-4889811.post@n6.nabble.com>
References: <1334659891301-4889811.post@n6.nabble.com>
Subject: Re: PLZ help: i've issue with SSL TOMCAT
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

i thank i need some file *.jar to add in
----/tomcat6/webapps/cas/WEB-INF/lib?
i m wrong ??

--
View this message in context: http://tomcat.10.n6.nabble.com/PLZ-help-i-ve-issue-with-SSL-TOMCAT-tp4889811p4890173.html
Sent from the Tomcat - User mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233592-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 17 13:18:58 2012
Return-Path: <users-return-233592-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 136B191F7
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 17 Apr 2012 13:18:58 +0000 (UTC)
Received: (qmail 65195 invoked by uid 500); 17 Apr 2012 13:18:53 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 65145 invoked by uid 500); 17 Apr 2012 13:18:53 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 65136 invoked by uid 99); 17 Apr 2012 13:18:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 13:18:53 +0000
X-ASF-Spam-Status: No, hits=1.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mims8010@googlemail.com designates 209.85.210.44 as permitted sender)
Received: from [209.85.210.44] (HELO mail-pz0-f44.google.com) (209.85.210.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 13:18:45 +0000
Received: by dadz14 with SMTP id z14so8040439dad.3
        for <users@tomcat.apache.org>; Tue, 17 Apr 2012 06:18:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=I7n5drVO1Ibg9Z6VDbsVpuwQNpvkTJABPjXRv+RxiPs=;
        b=NnGSEG4SUrCLhx86YzgUEVCLtfoRyouOTLI7GQAr/XAZA/H+uj2CgOXHBvum9jaZ+A
         gpyfXU94j5GcZryKBCeocgpaOgfZbST9p/rhPFXIK1yfoJmJpSHX5d9aKW3RLRKcsEsL
         pjlGAp/pi9To4h2N9uGgJJZ9kKyohMSeBPtMK/1YxAo6Ml7fkXzXY36k+mZ9i1tdtDH7
         leKZbB43EF3jSR7NpGc/URQticzBBraMxXgecX76JCZYKssfUsLF+eJuYaFs7AmpH1MF
         /uWaAmMjZWZxu3/uX9jn2ZgFXPurxSBQB3ALHg/+auCcnCz/aThXVVK2FfvcLjCQvJMC
         Z7lw==
MIME-Version: 1.0
Received: by 10.68.225.37 with SMTP id rh5mr525834pbc.36.1334668704480; Tue,
 17 Apr 2012 06:18:24 -0700 (PDT)
Received: by 10.68.132.227 with HTTP; Tue, 17 Apr 2012 06:18:24 -0700 (PDT)
In-Reply-To: <CAAu+a+vquBRKStbeHHvrnf_ph2wLvKyi=PALV8jJoDUk7=ZXiQ@mail.gmail.com>
References: <CAAu+a+vquBRKStbeHHvrnf_ph2wLvKyi=PALV8jJoDUk7=ZXiQ@mail.gmail.com>
Date: Tue, 17 Apr 2012 16:18:24 +0300
Message-ID: <CAAu+a+uuQ=r0wvs+hMttFvGBcwLff9ytyuDFaSu-yMp_VomYmQ@mail.gmail.com>
Subject: Re: Why @WebServlet annotation is not processed when web.xml is
 version 2.5?
From: maria petrova <mims8010@googlemail.com>
To: users@tomcat.apache.org
Content-Type: multipart/mixed; boundary=e89a8ff2492b05fe0f04bddfc632

--e89a8ff2492b05fe0f04bddfc632
Content-Type: multipart/alternative; boundary=e89a8ff2492b05fe0c04bddfc630

--e89a8ff2492b05fe0c04bddfc630
Content-Type: text/plain; charset=windows-1251
Content-Transfer-Encoding: quoted-printable

As the 2 test wars were not correctly attached to my previous mail, I'm
attaching them in a zip archive now.

Regards,
Maria

=CD=E0 17 =E0=EF=F0=E8=EB 2012, 15:48, maria petrova <mims8010@googlemail.c=
om> =ED=E0=EF=E8=F1=E0:

> Hi,
>
>
> We=92ve embedded Tomcat 7.0.26 in our product and we are currently trying=
 to
> cover Servlet 3.0 CTS with it.  We=92ve encountered the following problem
> with one of the tests.
>
> Though the version of the web deployment descriptor of the test
> application is 2.5, there is a servlet annotated with *@WebServlet *annot=
ation
> and requests to this servlet are responded with 404 Not Found. When I
> change the version of the web.xml to 3.0 everything works just fine.
>
>
> In Chapter *=931.6.2 Regarding Processing annotations=94* in the Servlet =
3.0
> Specification it is said that:
>
> *=93The version of the descriptor MUST not affect which annotations you
> scan for in a web application.=94*
>
> So my understanding is that the application should be processed for
> Servlet 3.0 specific annotations regardless of the version of the
> deployment descriptor.
>
>
> As far as I=92m aware, each new Tomcat release successfully covers Servle=
t
> 3.0 CTS, so I=92m wondering if I=92ve missed some configuration on Tomcat=
 side?
>
> Any hints or ideas are highly appreciated.
>
>
> Thanks!
>
> Maria
>
>
> P.S. The issue is easily reproducible with clean Tomcat 7.0.26
> installation and the attached simple test applications. They differ only =
in
> the web.xml=92s version and only /AnnotTest_30/AnnotServlet is correctly
> responded, while /AnnotTest_25/AnnotServlet gets 404 response.
>

--e89a8ff2492b05fe0c04bddfc630
Content-Type: text/html; charset=windows-1251
Content-Transfer-Encoding: quoted-printable

As the 2 test wars were not correctly attached to my previous mail, I&#39;m=
 attaching them in a zip archive now.<div><br></div><div>Regards,</div><div=
>Maria=A0<br><br><div class=3D"gmail_quote">=CD=E0 17 =E0=EF=F0=E8=EB 2012,=
 15:48, maria petrova <span dir=3D"ltr">&lt;<a href=3D"mailto:mims8010@goog=
lemail.com">mims8010@googlemail.com</a>&gt;</span> =ED=E0=EF=E8=F1=E0:<br>
<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex"><div>Hi,</div><div><p class=3D"MsoNormal"><b=
r></p><p class=3D"MsoNormal">We=92ve embedded Tomcat 7.0.26 in our product =
and we are currently
trying to cover Servlet 3.0 CTS with it.=A0
We=92ve encountered the following problem with one of the tests.</p>

<p class=3D"MsoNormal">Though the version of the web deployment descriptor =
of the test
application is 2.5, there is a servlet annotated with <b>@WebServlet </b>an=
notation
and requests to this servlet are responded with 404 Not Found. When I chang=
e
the version of the web.xml to 3.0 everything works just fine.</p><p class=
=3D"MsoNormal"><br></p>

<p class=3D"MsoNormal">In Chapter <i>=93<b>1.6.2 Regarding Processing annot=
ations</b>=94</i> in the Servlet 3.0
Specification it is said that:</p>

<p class=3D"MsoNormal" style=3D"margin-bottom:0.0001pt"><i>=93The version o=
f the descriptor MUST
not affect which annotations you scan for in a web application.=94</i></p>

<p class=3D"MsoNormal" style=3D"margin-bottom:0.0001pt">So my understanding=
 is that the application should be processed
for Servlet 3.0 specific annotations regardless of the version of the
deployment descriptor.</p><p class=3D"MsoNormal" style=3D"margin-bottom:0.0=
001pt"><br></p><p class=3D"MsoNormal"></p>

<p class=3D"MsoNormal">As far as I=92m aware, each new Tomcat release succe=
ssfully covers
Servlet 3.0 CTS, so I=92m wondering if I=92ve missed some configuration on =
Tomcat
side?</p><p class=3D"MsoNormal"></p>

<p class=3D"MsoNormal">Any hints or ideas are highly appreciated.</p><p cla=
ss=3D"MsoNormal"><br></p>

<p class=3D"MsoNormal">Thanks!</p><span class=3D"HOEnZb"><font color=3D"#88=
8888"><p class=3D"MsoNormal">Maria</p></font></span><p class=3D"MsoNormal">=
<br></p><p class=3D"MsoNormal">P.S.=A0The issue is easily reproducible with=
 clean Tomcat 7.0.26 installation and the attached simple test applications=
. They differ only in the web.xml=92s version and only /AnnotTest_30/AnnotS=
ervlet is correctly responded, while /AnnotTest_25/AnnotServlet gets 404 re=
sponse.</p>

</div>
</blockquote></div><br></div>

--e89a8ff2492b05fe0c04bddfc630--
--e89a8ff2492b05fe0f04bddfc632
Content-Type: application/zip; name="test_apps.zip"
Content-Disposition: attachment; filename="test_apps.zip"
Content-Transfer-Encoding: base64
X-Attachment-Id: f_h14z6eyz2

UEsDBAoAAAAAAIOBkUAAAAAAAAAAAAAAAAAKAAAAdGVzdF9hcHBzL1BLAwQUAAAACACdfJFADEkx
kykGAABGCQAAGgAAAHRlc3RfYXBwcy9Bbm5vdFRlc3RfMjUud2FyC/BmZhFh4ADC1TO7HBiQgAgQ
+7qGOOp6+rnp+zr6ebq5Bofo+bp99j1z2sdbV+8ir7eu1rkz5zcHGVwxfvC06Jynjt41Xg+dkxuC
Hjx99JSJIcCbnePRjNxrmkCD1IE4AKdVnMhWMYM1goSZoNK4NYKUhbs6EdS3FU2fAJK+5JzE4uLU
YpL0i2LRX5JaXILXkHNohqjhMsQxLy+/JDi1qCwntUQvK7EsceukWP9DBiJt67en/H/Iki9xUC9O
WNjDwCup6WP3602yC6Ju3Zyn2Plx/+21zsudJghUXzS1fF/5fU7/nOXna/ocMlaKtwZqTNtpxuJf
c3TmhRyTfRHLZ0y+sOq77o40sbNeShut/99d/dgr89HSJt+CqPS3QvodRWVP1zGXbv8R9CPon8b2
nWFiqy9N9lPnWshcyjOn+YiqFj/vyifXDi1YsyhsyisVrt/xT7dEewZf6FpsoL8saEn0JsbrLVqb
Lzxo3K7BU6QcNkcg5+djkTSnQs6g1ZY7jFim92esYa6S4H0oc26ddlnB8c/TlzM7z/noJLRknZWR
q9ctgxsuwv9XnJzl83aHSsMvFc47/e3JEiJL/J+vuGCxZs3LlxLdK/0r9A2buhQLGGq7b6x5o3J5
+rn/31cc+JEvvu3MUda/yutiJq+ynmWgaxkWlVKwRPfCoRfh3PbTd3D3nl2/TCin6IZMZhLLwszj
Z856TQx5G3bVdcX3N5f3i+5+yfI7unjx2/1fnlncZ561OTl0mgf33KvRj34/WMcPitasKXrZzYwM
DKUsyNEqMAs1WtWJilawTG9wbPDlAAHb6EvL2j4ETlDiiJjSLzZRw+baxcIP3MubfVY/Pbh8y97g
dcKTZt0p+xG978WLZvsD8k93mHNubVJOUSvPLzs/7+7u70+er39vz/Am6bxLW0CAUtA54/v8Ic4t
zP4awmyJTxdbF5yfo1Foqe71dc71PUskDpm0L3lt6ipx8kB9/Yc5Dvkcwr8b5TWvh/tef92tM6md
Y+fxS9NfcSauickU6vm7QFmnJ/FSW2vhoRDfX4821N8Semi9/SnnIR/djGLG6ac/lL8yudLZw7F5
q3duOOdNvw9e38P0r/+7Xxdb86q47qtXxJXHjztWvbtRVXhNzPZoe6/PmfhZAbOMWGZGPDAzPTax
sfhDmYTE8Vyd2RFKOTHrd/WK3lG884KrVMZL1elQzc4g6+V2XEvns62qXCPU9THESzNX0ydT587h
XZ1bJ65zC8rNSZic8G3L6c+cxSd5ZM9/3e3nvHG3dP9Bnsk3Bc3WW6Y4/dvDfuiq+eS+OaKXOfuY
Yk9ksfzdoBvnpdtw6MXc9xlGh5z2vteu1JplNGnNJImHx8xdI/YHXJBlm5t8UeriOQfuaax/pq/Y
wBW2JsxAbKJr39qT8ZJPbnpH7dxz683NZO+czdHxhh8t23w+Zm1kzTvkIHh5z2ZhAa4ZidkJ05Il
z3y0O76tI9rwpuL70sDq39JiP901ag/e7Z7jHVNl+UxH9caU4PenVhwpzcl5aLeYN+f/5nPBdY8P
/1U8f7QzW/mIicoyRcOlRyRtOozLH2yYm/LfuU6+lsH1xl9eUCI89HfyPwNg4ZLJgq9g5EFKhDmZ
STjLJVAROqNmosPdp2o3dwF5TsDkzY+ktzw1Sa8iN6e135C/yUCgtbzO9fJcMUO1NpEbc0qChM2L
prllPfDak/Xx/moWU79172vf75uj1b4u1bxY8bXBc+OJBWkBu2890nz++65W3KdNHSEGxyV+/fNe
lnTwZnH3lM/HfttN/sRjLlDiujBWff5UFynjZDUj6RN1LwSaOIof6qnPVDvpI2f2em2eD/tG108N
v7Yqzb4osW4um33X/1M34p387odkbhVgvrqnQyJ469J9rdU9F2YyCcyV7z0j/cnr35aJVfM1FrEH
eDMyiTAgAgm5QhJhQAfY6jt0E5ADkRNFdzayCfi0caBoW4IU3si6tqLpEkDRdQdLMYNPtyiKbhlG
HIUUshGgCgu5zFNDMSIRlxEY1ReymaDSEjkJq6OYacFMdNmJL3x5UAzdy4qaF2A6caV9EGBkUACS
P1kxckKANysbJOY5GQKA9j0A8wBQSwMEFAAAAAgAsHyRQKmSEQInBgAARAkAABoAAAB0ZXN0X2Fw
cHMvQW5ub3RUZXN0XzMwLndhcgvwZmYRYeAAwtUzuxwYkIAIEPu6hjjqevq56fs6+nm6uQaH6Pm6
ffY9c9rHW1fvIq+3rta5M+c3BxlcMX7wtOicp47eNV4PnZMbgh48ffSUiSHAm53j0Yzca5pAg9SB
OACnVZzIVjGDNYKEmaDSuDWClIW7OhHUtxVNnwCSvuScxOLi1GKS9Iti0V+SWlyC15BzaIao4TLE
MS8vvyQ4tagsJ7VELyuxLHHrpFj/QwYibeu3p/x/yJIvcVAvTljYw8Arqelj9+tNsguibt2cp9j5
cf/ttc7LnSYIVF80tXxf+X1O/5zl52v6HDJWircGakzbacbiX3N05oUck30Ry2dMvrDqu+6ONLGz
Xkobrf/fXf3YK/PR0ibfgqj0t0L6HUVlT9cxl27/EfQj6J/G9p1hYqsvTfZT51rIXMozp/mIqhY/
78on1w4tWLMobMorFa7f8U+3RHsGX+habKC/LGhJ9CbG6y1amy88aNyuwVOkHDZHIOfnY5E0p0LO
oNWWO4xYpvdnrGGukuB9KHNunXZZwfHP05czO8/56CS0ZJ2VkavXLYMbLsL/V5yc5fN2h0rDLxXO
O/3tyRIiS/yfr7hgsWbNy5cS3Sv9K/QNm7oUCxhqu2+seaNyefq5/99XHPiRL77tzFHWv8rrYiav
sp5loGsZFpVSsET3wqEX4dz203dw955dv0wop+iGTGYSy8LM42fOek0MeRt21XXF9zeX94vufsny
O7p48dv9X55Z3GeetTk5dJoH99yr0Y9+P1jHD4rWrCl62c2MDAylLMjRKjALNVrViYpWsExvcGzw
5QAB2+hLy9o+BE5Q4oiY0i82UcPm2sXCD9zLm31WPz24fMve4HXCk2bdKfsRve/Fi2b7A/JPd5hz
bm1STlErzy87P+/u7u9Pnq9/b8/wJum8S1tAgFLQOeP7/CHOLcz+GsJsiU8XWxecn6NRaKnu9XXO
9T1LJA6ZtC95beoqcfJAff2HOQ75HMK/G+U1r4f7Xn/drTOpnWPn8UvTX3EmronJFOr5u0BZpyfx
Ultr4aEQ31+PNtTfEnpovf0p5yEf3YxixumnP5S/MrnS2cOxeat3bjjnTb8PXt/D9K//u18XW/Oq
uO6rV8SVx487Vr27UVV4Tcz2aHuvz5n4WQGzjFhmRjwwMz02sbH4Q5mExPFcndkRSjkx63f1it5R
vPOCq1TGS9XpUM3OIOvldlxL57Otqlwj1PUxxEszV9MnU+fO4V2dWyeucwvKzUmYnPBty+nPnMUn
eWTPf93t57xxt3T/QZ7JNwXN1lumOP3bw37oqvnkvjmilzn7mGJPZLH83aAb56XbcOjF3PcZRoec
9r7XrtSaZTRpzSSJh8fMXSP2B1yQZZubfFHq4jkH7mmsf6av2MAVtibMQGyia9/ak/GST256R+3c
c+vNzWTvnM3R8YYfLdt8PmZtZM075CB4ec9mYQGuGYnZCdOSJc98tDu+rSPa8Kbi+9LA6t/SYj/d
NWoP3u2e4x1TZflMR/XGlOD3p1YcKc3JeWi3mDfn/+ZzwXWPD/9VPH+0M1v5iInKMkXDpUckbTqM
yx9smJvy37lOvpbB9cZfXlAiPPR38j8DYOGSyYKvYORBSoQ5mUk4yyVQEbq2ZqLDovv/9+4A8pyA
yZsfSW95apJeRW5Oa78hf5OBQGt5nevluWKphksePFsyedaOmZtNApTDD4V2/Y9TXVGYVPu++vvT
K1UZeWvMZSPbLeM7Woybb00VWz1Hnn92xdHrrkuadh65sM3eqHbyet2gc9nvb/uc0v6i8KLPabfb
Pq1Ok7RjPilmE/5eUmQRDHq4y0tvcoqi/+63cdeXNd5QqnT4GzfxbAbPdr9m+aObjcy8T7ycXVzl
d8RBVV/pWEjmyr0Hld0yfBg7zvW7PeOtVP1/y6PWT+SicIA3I5MIAyKIkKsjEQZ0gK22QzcBOQg5
UXRnI5uATxsHirYlSKGNrGsrmi4BFF13sBQy+HSLouiWYcRRRCEbAaqukEs8NRQjEnEZgVF5IZsJ
KiuRE7A6ipkWzESXnPjClwfF0L2sqDkBphNXygcBRgYFIPmTFSMfBHizskFinpMhAGjfPTAPAFBL
AQIUAAoAAAAAAIOBkUAAAAAAAAAAAAAAAAAKAAAAAAAAAAAAEAAAAAAAAAB0ZXN0X2FwcHMvUEsB
AhQAFAAAAAgAnXyRQAxJMZMpBgAARgkAABoAAAAAAAAAAAAgAAAAKAAAAHRlc3RfYXBwcy9Bbm5v
dFRlc3RfMjUud2FyUEsBAhQAFAAAAAgAsHyRQKmSEQInBgAARAkAABoAAAAAAAAAAAAgAAAAiQYA
AHRlc3RfYXBwcy9Bbm5vdFRlc3RfMzAud2FyUEsFBgAAAAADAAMAyAAAAOgMAAAAAA==

--e89a8ff2492b05fe0f04bddfc632
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org
--e89a8ff2492b05fe0f04bddfc632--

From users-return-233593-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 17 13:30:13 2012
Return-Path: <users-return-233593-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1E5BE95C3
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 17 Apr 2012 13:30:13 +0000 (UTC)
Received: (qmail 95613 invoked by uid 500); 17 Apr 2012 13:30:09 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 95559 invoked by uid 500); 17 Apr 2012 13:30:09 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 95550 invoked by uid 99); 17 Apr 2012 13:30:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 13:30:09 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.91.2.12] (HELO smtp-outbound-1.vmware.com) (208.91.2.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 13:30:01 +0000
Received: from sc9-mailhost2.vmware.com (sc9-mailhost2.vmware.com [10.113.161.72])
	by smtp-outbound-1.vmware.com (Postfix) with ESMTP id 85B90280B8
	for <users@tomcat.apache.org>; Tue, 17 Apr 2012 06:29:39 -0700 (PDT)
Received: from zimbra-prod-mta-1.vmware.com (zimbra-prod-mta-1.vmware.com [10.113.160.173])
	by sc9-mailhost2.vmware.com (Postfix) with ESMTP id 82329B0524
	for <users@tomcat.apache.org>; Tue, 17 Apr 2012 06:29:39 -0700 (PDT)
Received: from localhost (localhost.localdomain [127.0.0.1])
	by zimbra-prod-mta-1.vmware.com (Postfix) with ESMTP id 7F1349735D
	for <users@tomcat.apache.org>; Tue, 17 Apr 2012 06:29:39 -0700 (PDT)
X-Virus-Scanned: amavisd-new at zimbra-prod-mta-1.vmware.com
Received: from zimbra-prod-mta-1.vmware.com ([127.0.0.1])
	by localhost (zimbra-prod-mta-1.vmware.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id rg6mtA3F88f3 for <users@tomcat.apache.org>;
	Tue, 17 Apr 2012 06:29:39 -0700 (PDT)
Received: from zimbra-prod-mbox-5.vmware.com (zimbra-prod-mbox-5.vmware.com [10.113.160.194])
	by zimbra-prod-mta-1.vmware.com (Postfix) with ESMTP id 6D10897353
	for <users@tomcat.apache.org>; Tue, 17 Apr 2012 06:29:39 -0700 (PDT)
Date: Tue, 17 Apr 2012 06:29:39 -0700 (PDT)
From: Daniel Mikusa <dmikusa@vmware.com>
To: Tomcat Users List <users@tomcat.apache.org>
Message-ID: <11844750.187.1334669374966.JavaMail.daniel@cleveland>
In-Reply-To: <CAAu+a+uuQ=r0wvs+hMttFvGBcwLff9ytyuDFaSu-yMp_VomYmQ@mail.gmail.com>
Subject: Re: Why @WebServlet annotation is not processed when web.xml is
 version 2.5?
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Originating-IP: [24.160.217.1]
X-Mailer: Zimbra 7.1.3_GA_3374 (Zimbra Desktop/7.1.4_11299_Linux)

----- Original Message -----
>=20
> As the 2 test wars were not correctly attached to my previous mail,
> I'm attaching them in a zip archive now.

You cannot attach files to the list.  The list will automatically strip the=
 attachments.

Dan

>=20
>=20
> Regards,
> Maria
>=20
>=20
> =D0=9D=D0=B0 17 =D0=B0=D0=BF=D1=80=D0=B8=D0=BB 2012, 15:48, maria petrova=
 < mims8010@googlemail.com >
> =D0=BD=D0=B0=D0=BF=D0=B8=D1=81=D0=B0:
>=20
>=20
>=20
> Hi,
>=20
>=20
>=20
>=20
>=20
> We=E2=80=99ve embedded Tomcat 7.0.26 in our product and we are currently
> trying to cover Servlet 3.0 CTS with it. We=E2=80=99ve encountered the
> following problem with one of the tests.
>=20
> Though the version of the web deployment descriptor of the test
> application is 2.5, there is a servlet annotated with @WebServlet
> annotation and requests to this servlet are responded with 404 Not
> Found. When I change the version of the web.xml to 3.0 everything
> works just fine.
>=20
>=20
>=20
>=20
> In Chapter =E2=80=9C 1.6.2 Regarding Processing annotations =E2=80=9D in =
the Servlet
> 3.0 Specification it is said that:
>=20
> =E2=80=9CThe version of the descriptor MUST not affect which annotations =
you
> scan for in a web application.=E2=80=9D
>=20
> So my understanding is that the application should be processed for
> Servlet 3.0 specific annotations regardless of the version of the
> deployment descriptor.
>=20
>=20
>=20
>=20
>=20
>=20
> As far as I=E2=80=99m aware, each new Tomcat release successfully covers
> Servlet 3.0 CTS, so I=E2=80=99m wondering if I=E2=80=99ve missed some con=
figuration
> on Tomcat side?
>=20
>=20
>=20
> Any hints or ideas are highly appreciated.
>=20
>=20
>=20
>=20
> Thanks!
>=20
> Maria
>=20
>=20
>=20
>=20
> P.S. The issue is easily reproducible with clean Tomcat 7.0.26
> installation and the attached simple test applications. They differ
> only in the web.xml=E2=80=99s version and only /AnnotTest_30/AnnotServlet=
 is
> correctly responded, while /AnnotTest_25/AnnotServlet gets 404
> response.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233594-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 17 15:27:31 2012
Return-Path: <users-return-233594-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C0B0B9F1D
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 17 Apr 2012 15:27:31 +0000 (UTC)
Received: (qmail 19902 invoked by uid 500); 17 Apr 2012 15:27:28 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 19813 invoked by uid 500); 17 Apr 2012 15:27:28 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 19804 invoked by uid 99); 17 Apr 2012 15:27:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 15:27:28 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of knst.kolinko@gmail.com designates 209.85.213.173 as permitted sender)
Received: from [209.85.213.173] (HELO mail-yx0-f173.google.com) (209.85.213.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 15:27:20 +0000
Received: by yenr5 with SMTP id r5so3903456yen.18
        for <users@tomcat.apache.org>; Tue, 17 Apr 2012 08:27:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=bcbnOr9tT0hhCEIIrSBMfZe3bOc2EtGaMnTQblFtACg=;
        b=ezS/8drF6xtD7cyBUZbgwk+HY7Gy4G5qguisg8v1OJvOYpKyaU34gmgjEUG7G/2wnR
         OttSrZkLpRpMk4iJbaiwTWlqgGIyuIa7AsOj67BWgeNc/pusQJaZ0tzYsx2Nj+trtEOD
         cd9qiMyNx/ms/HINP7rDMncTlBbqclTLexJXw22g9UOltcxUqVOgX0eCVpETGHKgKHyc
         8gSVCNFFTdPYMBGy0HvG4EqBCelWzr+zb0/76itCsCmmFroaH/xL6BvzdgSwXcMwrMjv
         +OoAXDAUSuUg+x+drZKwMi4FcMPeZpQgL9Fd0RfrKRl5H3kBsRw9Hy5eOqsMpEl0syuO
         VIIw==
MIME-Version: 1.0
Received: by 10.101.152.4 with SMTP id e4mr1047922ano.45.1334676420238; Tue,
 17 Apr 2012 08:27:00 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Tue, 17 Apr 2012 08:27:00 -0700 (PDT)
In-Reply-To: <4F8D6122.40609@kantl.be>
References: <4F8D6122.40609@kantl.be>
Date: Tue, 17 Apr 2012 19:27:00 +0400
Message-ID: <CABzHfV=EJ1D1PjuX+jhag7REN5_7Z8xN20j8hq=1f=S7W63YLA@mail.gmail.com>
Subject: Re: adding a global URI prefix for Tomcat web apps
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

2012/4/17 ron.vandenbranden@home <ron.vandenbranden@kantl.be>:
>
> So far, so good. Yet, I am struggling with the Tomcat side of this approa=
ch:
> finding a way to add a global path prefix for requests to Tomcat apps. Th=
e
> closest I got was this:
> =A0 =A01. don't touch the physical location of the Tomcat apps: leave the=
m at
> ${CATALINA.HOME}/webapps
> =A0 =A02. change ${CATALINA.HOME}/conf/server.xml as follows:
>
> =A0 =A0<Host name=3D"localhost" =A0appBase=3D"webapps" unpackWARs=3D"true=
"
> autoDeploy=3D"false" deployOnStartup=3D"false">
> =A0 =A0 =A0<Context path=3D"/apps/my_app" docBase=3D"/my_app/" reloadable=
=3D"true"/>
> =A0 =A0</Host>
>

I would not comment on the Apache HTTP server configuration. Just on
the quoted part above. You have not told us what Tomcat version you
are using, but in current Tomcat 6 and 7 you can add "apps#" prefix to
the subdirectory and war file names in webapps directory and it will
add "apps/" to their URL, e.g.:

 mv  webapps/my_app  webapps/apps#my_app

A war file name would be "apps#my_app.war" See "Context" page in
"Configuration Reference Guide" for more details.

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233595-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 17 15:33:35 2012
Return-Path: <users-return-233595-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F2D469C14
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 17 Apr 2012 15:33:34 +0000 (UTC)
Received: (qmail 41984 invoked by uid 500); 17 Apr 2012 15:33:31 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 41908 invoked by uid 500); 17 Apr 2012 15:33:31 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 41898 invoked by uid 99); 17 Apr 2012 15:33:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 15:33:31 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of knst.kolinko@gmail.com designates 209.85.160.173 as permitted sender)
Received: from [209.85.160.173] (HELO mail-gy0-f173.google.com) (209.85.160.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 15:33:24 +0000
Received: by ghrr14 with SMTP id r14so3900324ghr.18
        for <users@tomcat.apache.org>; Tue, 17 Apr 2012 08:33:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=5ph9IT2QOsPB9Jqevve3XxlkGxInHglG5cNgnH3fTk4=;
        b=N4AqEk6lBZIvJR3dVndpJbSv+y7AjJ0dp9M3Yph6CQ/VwoEFf56dKnzWWIJ6aV5FJ/
         Xk/1b1Dbzpv4EqyuSSTbKQm6yuLuHfvFal6iJmrvk8ACCYKST3AmA8W51MmE74hC+mZ3
         UqB2KWM55sgeD8gFFsX9JQGhRzmXwTQyWLLtF/cfrEXAE697HkMZSYk9Z2qmEgeOMwc8
         rJoujTnvwM0DSTKy2Sd1ylIl0DhUc+R4plR02jT0XAPjCo8/sUWXAHvIzD/eBTVG8rCF
         Z7cRolllxoUXqh1eNF9tkR1FuOCy7SOfS/bnMvCvU84sydl3GMLIasgx7p2YmoC6w9Jp
         NSEw==
MIME-Version: 1.0
Received: by 10.236.187.38 with SMTP id x26mr5974065yhm.109.1334676783600;
 Tue, 17 Apr 2012 08:33:03 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Tue, 17 Apr 2012 08:33:03 -0700 (PDT)
In-Reply-To: <6368FCCCD803D64BB0931D7F5F0A3DD502278A0475@DEMCHP99E84MSX.ww902.siemens.net>
References: <6368FCCCD803D64BB0931D7F5F0A3DD502278A0475@DEMCHP99E84MSX.ww902.siemens.net>
Date: Tue, 17 Apr 2012 19:33:03 +0400
Message-ID: <CABzHfVnO2xiA0GphqSZG2VzXUCjumpU8Mfx-gwbd_dEQ+HXWEA@mail.gmail.com>
Subject: Re: Availability of a resource in a realm
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

2012/4/17 Osipov, Michael <michael.osipov@siemens.com>:
> Hi folks,
>
> I have a resource declared in my context.xml (not a resource link). I wan=
t to retrieve that resource as soon as possible in my realm. I tried start(=
) and init() but it seems like that at this time the InitialContext is not =
available. So at what time can I expect the context being "complete"?
>
> I am on Tomcat 6.0.35
>

Look at DataSourceRealm for an example.

IIRC, what is seen as InitialContext depends on the value of
Thread.getContextClassLoader() when InitialContext instance is
created.

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233596-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 17 15:40:13 2012
Return-Path: <users-return-233596-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C25A89D2F
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 17 Apr 2012 15:40:13 +0000 (UTC)
Received: (qmail 60331 invoked by uid 500); 17 Apr 2012 15:40:10 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 60282 invoked by uid 500); 17 Apr 2012 15:40:10 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 60272 invoked by uid 99); 17 Apr 2012 15:40:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 15:40:10 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.214.173] (HELO mail-ob0-f173.google.com) (209.85.214.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 15:40:00 +0000
Received: by obbwd18 with SMTP id wd18so3723884obb.18
        for <users@tomcat.apache.org>; Tue, 17 Apr 2012 08:39:39 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding:x-gm-message-state;
        bh=6Fe3agutckvKM9YilBNDUYafnoc1zhQfEFKcEIA3zRE=;
        b=S3Fx+fwM2QXHve9AHVZlrImCZawVoB/OqFcjIoaTh0jJQfjVA70RVAjO8Da055N9AS
         cTW5yrAp8t/XNrvtWoSDehyJBl1s9IYskhby2nZWCO8NxRYhZYMvT/7swdrTR8vaZ5+W
         s8CF98Y7DfDAgnAxTfVi7DUI1dpIBr82AP3Wiz8KqDsnN55pp+w1p/gtL/P+GMvJUzPh
         9jYugAqmpYDvyy+nfektEqB1ixWaykUuQFCkOTJE2+pXZhR/Bx0qkhUGGCLDV6S+pYCL
         y3nDvCbtudS8T8HCl2l1VysYLD5Z964Du4ngpQmx3SAtPQyaosguJZPQW0KCxvuv5owa
         DM6g==
Received: by 10.182.12.67 with SMTP id w3mr22012145obb.42.1334677179480;
        Tue, 17 Apr 2012 08:39:39 -0700 (PDT)
Received: from [192.168.1.98] (wintouch.touchtonecorp.com. [69.238.233.81])
        by mx.google.com with ESMTPS id in4sm23429930obb.2.2012.04.17.08.39.38
        (version=SSLv3 cipher=OTHER);
        Tue, 17 Apr 2012 08:39:38 -0700 (PDT)
Message-ID: <4F8D8EB3.8040406@touchtonecorp.com>
Date: Tue, 17 Apr 2012 08:39:31 -0700
From: James Lampert <jamesl@touchtonecorp.com>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Problem with deployment of a WAR file from Manager
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Gm-Message-State: ALoCoQld55rYE4rrWXZj1O3F+5yzd05ofrqhCcWWalAQSbxCVWJvBO0vinwxLBt2f0CpgLCI9hDo

We are having a very frustrating error on one customer box, with a 
Tomcat version and a WAR file that are working perfectly elsewhere.

That same WAR file runs perfectly on this same box, if expanded from the 
command line.

Can anybody here shed any light on this?

--
James H. H. Lampert
Touchtone Corporation

SEVERE: Error deploying web application archive 
/wintouch/tomcat/webapps/ROOT.war
Throwable occurred: java.lang.IllegalArgumentException: The archive 
[jar:file:/wintouch/tomcat/webapps/ROOT.war!/] is malformed and will be 
ignored: an entry contains an illegal path [META-INF/MANIFEST.MF] which 
was not expanded to 
[/WINTOUCH/TOMCAT/webapps/ROOT//META-INF/MANIFEST.MF] since that is 
outside of the defined docBase [/wintouch/tomcat/webapps/ROOT/]
    at org.apache.catalina.startup.ExpandWar.expand(ExpandWar.java:122)
    at 
org.apache.catalina.startup.ContextConfig.fixDocBase(ContextConfig.java:667) 

    at 
org.apache.catalina.startup.ContextConfig.init(ContextConfig.java:790)
    at 
org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:318) 

    at 
org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119) 

    at 
org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90) 

    at 
org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:401) 

    at org.apache.catalina.util.LifecycleBase.init(LifecycleBase.java:110)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:139)
    at 
org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:897) 

    at 
org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:873)
    at 
org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)
    at 
org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:958)
    at 
org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:536)
    at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1467)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at 
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60) 

    at 
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37) 

    at java.lang.reflect.Method.invoke(Method.java:611)
    at 
org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:301) 

    at 
com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:848)
    at 
com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:773)
    at 
org.apache.catalina.manager.ManagerServlet.check(ManagerServlet.java:1436)
    at 
org.apache.catalina.manager.HTMLManagerServlet.upload(HTMLManagerServlet.java:334) 

    at 
org.apache.catalina.manager.HTMLManagerServlet.doPost(HTMLManagerServlet.java:211) 

    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at 
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305) 

    at 
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) 

    at 
org.apache.catalina.filters.CsrfPreventionFilter.doFilter(CsrfPreventionFilter.java:187) 

    at 
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243) 

    at 
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) 

    at 
org.apache.catalina.filters.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:108) 

    at 
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243) 

    at 
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) 

    at 
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224) 

    at 
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169) 

    at 
org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:581) 

    at 
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168) 

    at 
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98) 

    at 
org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at 
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) 

    at 
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at 
org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987) 

    at 
org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at 
org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309) 

    at 
java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:897) 

    at 
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:919) 

    at java.lang.Thread.run(Thread.java:736)

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233597-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 17 16:02:39 2012
Return-Path: <users-return-233597-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A79AB9E9F
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 17 Apr 2012 16:02:39 +0000 (UTC)
Received: (qmail 37876 invoked by uid 500); 17 Apr 2012 16:02:36 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 37797 invoked by uid 500); 17 Apr 2012 16:02:36 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 37788 invoked by uid 99); 17 Apr 2012 16:02:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 16:02:36 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of knst.kolinko@gmail.com designates 209.85.161.173 as permitted sender)
Received: from [209.85.161.173] (HELO mail-gx0-f173.google.com) (209.85.161.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 16:02:30 +0000
Received: by ggnp2 with SMTP id p2so3945269ggn.18
        for <users@tomcat.apache.org>; Tue, 17 Apr 2012 09:02:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=ICSM26mOSQzm0JSzCET9y0sNBf7Egl3eKm02WmDvetw=;
        b=GJF/rUc+QK6rb7UXSuLIVLwJCmw8zKKZ3e9xoniXVqNXZrrC0m+qYyGqdSSCrM3WEM
         1fpZ30xmH+dn3Ix2QiVLE5Mi+FlFJAu5mQ4R7aQTultrLjSEtMPJzSFg/fn/O2Vn1oum
         rnUrYiKfGMBqOtTThfNWe4WTZ+awq0ZhHpwhdtyVis5eE+43K7KD74SaS9K0GOdtTAwl
         ZU+6SCdwOCNSBA78vHXeUmmv67T5EnTUcYF5JhjlMB8zMwYo2bITzXB6q07BOKosLJA2
         +sssQvcQU8oeUjcbeLCwY4yR77mvvKeeGtnQyJvIaCuJq2AKU1DJWouCvQyJnpJ3AdZN
         x/NA==
MIME-Version: 1.0
Received: by 10.236.174.35 with SMTP id w23mr15831000yhl.35.1334678529509;
 Tue, 17 Apr 2012 09:02:09 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Tue, 17 Apr 2012 09:02:09 -0700 (PDT)
In-Reply-To: <4F8D8EB3.8040406@touchtonecorp.com>
References: <4F8D8EB3.8040406@touchtonecorp.com>
Date: Tue, 17 Apr 2012 20:02:09 +0400
Message-ID: <CABzHfV=nfg=Ff0Ks0RuimOWCxnoVXqvvK2zrTw3Kxw8R3_tsxA@mail.gmail.com>
Subject: Re: Problem with deployment of a WAR file from Manager
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

2012/4/17 James Lampert <jamesl@touchtonecorp.com>:
> We are having a very frustrating error on one customer box, with a Tomcat
> version and a WAR file that are working perfectly elsewhere.
>
> That same WAR file runs perfectly on this same box, if expanded from the
> command line.
>
> Can anybody here shed any light on this?
>
> --
> James H. H. Lampert
> Touchtone Corporation
>
> SEVERE: Error deploying web application archive
> /wintouch/tomcat/webapps/ROOT.war
> Throwable occurred: java.lang.IllegalArgumentException: The archive
> [jar:file:/wintouch/tomcat/webapps/ROOT.war!/] is malformed and will be
> ignored: an entry contains an illegal path [META-INF/MANIFEST.MF] which w=
as
> not expanded to [/WINTOUCH/TOMCAT/webapps/ROOT//META-INF/MANIFEST.MF] sin=
ce
> that is outside of the defined docBase [/wintouch/tomcat/webapps/ROOT/]

1. Tomcat version =3D ?
2. OS =3D ?

3. It is security check against CVE-2009-2693

In essence it checks that File.getCanonicalPath() of (webapp root
directory + archive entry) is as expected.

> =A0 at org.apache.catalina.startup.ExpandWar.expand(ExpandWar.java:122)


Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233598-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 17 16:29:51 2012
Return-Path: <users-return-233598-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D4DC19D53
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 17 Apr 2012 16:29:51 +0000 (UTC)
Received: (qmail 37269 invoked by uid 500); 17 Apr 2012 16:29:48 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 37201 invoked by uid 500); 17 Apr 2012 16:29:48 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 37191 invoked by uid 99); 17 Apr 2012 16:29:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 16:29:48 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of tomcat@vittox.com designates 72.9.228.36 as permitted sender)
Received: from [72.9.228.36] (HELO vps75.vittox.com) (72.9.228.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 16:29:39 +0000
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed; d=vittox.com; s=default;
	h=Content-Type:Subject:To:MIME-Version:From:Date:Message-ID; bh=yrz4uUvkshZaFMy0nEuVPNsyt4xAbC3l9iTo+G7qm4Q=;
	b=dkTpgqvicV6bkmntBjVz8b5uK9PeRcDaBzFAk7/2yGOQ9qkitFayNH34Tsj+FG5NeIx3dI9fEW4ynXzXacpwV640iXRYuDWunNAJHtHfIa1GLlU7ISPqpXjcNs93rsoY;
Received: from [190.187.22.189] (port=42665 helo=[192.168.1.10])
	by vps75.vittox.com with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.77)
	(envelope-from <tomcat@vittox.com>)
	id 1SKBHK-0003Bl-Q7
	for users@tomcat.apache.org; Tue, 17 Apr 2012 11:29:19 -0500
Message-ID: <4F8D9A5B.3020302@vittox.com>
Date: Tue, 17 Apr 2012 11:29:15 -0500
From: Chris Patterson <tomcat@vittox.com>
User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: users@tomcat.apache.org
Subject: JasperException: The value for the useBean class ___ attribute is
 invalid
Content-Type: multipart/alternative;
 boundary="------------080503060406050902020305"
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - vps75.vittox.com
X-AntiAbuse: Original Domain - tomcat.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - vittox.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 

--------------080503060406050902020305
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hello, pls help with the following issue:

My JSP calls a Java Bean
and works OK for both versions, Tomcat 5.5 and Tomcat 7.1

My problem is when I move that same JSP to a sub-directory,
then I get the 500 error:

org.apache.jasper.JasperException: /StrBean.jsp(26,0) The value for the useBean class attribute
jdbcbean.StringBean is invalid.

I think it could be solved changing the server.xml configuration described below (?)

	<Host name="domain.com" appBase="/home/serverhome/public_html">
           <Alias>www.domain.com</Alias>
           <Context path="" reloadable="true" docBase="/home/serverhome/public_html" debug="1"/>
        </Host>

Any ideas about where to fix the problem ?

Wilhelm Colln
www.Vittox.com

--------------080503060406050902020305--

From users-return-233599-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 17 16:40:19 2012
Return-Path: <users-return-233599-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C0AC79667
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 17 Apr 2012 16:40:19 +0000 (UTC)
Received: (qmail 73392 invoked by uid 500); 17 Apr 2012 16:40:16 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 73340 invoked by uid 500); 17 Apr 2012 16:40:16 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 73331 invoked by uid 99); 17 Apr 2012 16:40:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 16:40:16 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.214.173] (HELO mail-ob0-f173.google.com) (209.85.214.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 16:40:06 +0000
Received: by obbwd18 with SMTP id wd18so3799029obb.18
        for <users@tomcat.apache.org>; Tue, 17 Apr 2012 09:39:45 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding
         :x-gm-message-state;
        bh=l2U/ohACQnTOdZjY6c79Q7FZQU3ibg3TEs1AcksJ+iA=;
        b=Y1oHEjPDbt8nWI4949SfCwbpbdES9K81MGHs/rb3Ym33zi5kt3TGrEHrhdnDZWFHLt
         imVYcZLvaXrXrsrHGdVhNeDv8Gxg1VWPJJnIa0wlXEjUjEv9yr6fk0UliuyqfL2cgxR3
         dB0l2zZ9JRfBiJf9oklPJviMMDxNQYW8ywGCxfjLNQlUZWPM2A33Rsi5e0/ZJtmO4uyi
         /hdpAv2LKYJEDrWt3lqZ0U2JlgT6L4bDpX9N2+Omi2OtVKug9fPHuTbzJ2DVj2CNmpj0
         eNIp9bPRPs/qXTB2QgtGVInJ8Vy8QD/ma3CTyRgGTF05NR0GQx9YFlrbi1nb04b9OYRi
         IEnA==
Received: by 10.182.222.2 with SMTP id qi2mr5332260obc.27.1334680785020;
        Tue, 17 Apr 2012 09:39:45 -0700 (PDT)
Received: from [192.168.1.98] (wintouch.touchtonecorp.com. [69.238.233.81])
        by mx.google.com with ESMTPS id b6sm23611006obe.12.2012.04.17.09.39.42
        (version=SSLv3 cipher=OTHER);
        Tue, 17 Apr 2012 09:39:44 -0700 (PDT)
Message-ID: <4F8D9CCB.7030900@touchtonecorp.com>
Date: Tue, 17 Apr 2012 09:39:39 -0700
From: James Lampert <jamesl@touchtonecorp.com>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Problem with deployment of a WAR file from Manager
References: <4F8D8EB3.8040406@touchtonecorp.com> <CABzHfV=nfg=Ff0Ks0RuimOWCxnoVXqvvK2zrTw3Kxw8R3_tsxA@mail.gmail.com>
In-Reply-To: <CABzHfV=nfg=Ff0Ks0RuimOWCxnoVXqvvK2zrTw3Kxw8R3_tsxA@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Gm-Message-State: ALoCoQnI91nAVapBZZu+mb+68fQ57X9qHBoDGX90Z5+yv0IrlXjjLCfl2+anPiYNVsPvhZEjJTF7

Konstantin Kolinko wrote:
. . .
> In essence it checks that File.getCanonicalPath() of (webapp root
> directory + archive entry) is as expected.
> 
>>   at org.apache.catalina.startup.ExpandWar.expand(ExpandWar.java:122)

My colleague at the next desk found this:

https://issues.apache.org/bugzilla/show_bug.cgi?id=50737

which is more-or-less as you say.

The funny thing is that the customer is on a more recent iOS (or 
whatever IBM is calling it this week; to me, OS/400 is OS/400) than we 
(and most of the other customers) are (V7R1 vs V6R1).

And where the example at the above link is failing on one lousy 
character being of mismatched case, we have this in the CL program:
 > SBMJOB     CMD(QSH +
 >             CMD('/WINTOUCH/TOMCAT/BIN/STARTUP.SH')) +
 >             JOB(CATALINA) JOBD(WINTOUCH/WTSRVC) +
 >             CPYENVVAR(*YES) ALWMLTTHD(*YES)

but the actual path in the file system is:
 > /wintouch/tomcat/bin/startup.sh

with every single letter being of mismatched case.

--
JHHL

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233600-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 17 16:45:36 2012
Return-Path: <users-return-233600-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EA00D993B
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 17 Apr 2012 16:45:36 +0000 (UTC)
Received: (qmail 89022 invoked by uid 500); 17 Apr 2012 16:45:32 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 88898 invoked by uid 500); 17 Apr 2012 16:45:32 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 88712 invoked by uid 99); 17 Apr 2012 16:45:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 16:45:32 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jdesodt@gmail.com designates 74.125.83.45 as permitted sender)
Received: from [74.125.83.45] (HELO mail-ee0-f45.google.com) (74.125.83.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 16:45:23 +0000
Received: by eeit10 with SMTP id t10so2751656eei.18
        for <users@tomcat.apache.org>; Tue, 17 Apr 2012 09:45:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=khr0R3Ot+sGzj2f1PFhePMA0F14/BaJFtp8a09P7oLc=;
        b=ShyuEUwmuAKbat0ujxA+vqdZbhkYVjZ8NDVQlb+i4hAjjWG2IHdFF4Gi+ygkNx0dAP
         fNH/QIpjcNDLuTHLegCerDhIX1bVxbV3bIk+za6mv64PhJyt+6qIt/FYY0r2xbGWuFkO
         XI9mBH2QDLNqr8OV94Y2g7/a8+n1h3EqXTX3g/8lY6f23j2XOL57ScJAhNJrMT/1o5or
         Xi8MDg6alou5EsioMwLdcuBFDDaUWjvxJZ23j7ZEEGe65iNpH3NE8ZLtLY485hu6bGPO
         MCNPGVQanR82vQB9gcVSa14gzScPbHF+UHRBp7bu8A62mo0u/ulEI8Cef5CRVg/KisAz
         00Gw==
MIME-Version: 1.0
Received: by 10.213.17.203 with SMTP id t11mr1150797eba.211.1334681103310;
 Tue, 17 Apr 2012 09:45:03 -0700 (PDT)
Received: by 10.213.4.194 with HTTP; Tue, 17 Apr 2012 09:45:03 -0700 (PDT)
Date: Tue, 17 Apr 2012 18:45:03 +0200
Message-ID: <CAOHnQjpKCkJGNXGphTrVG4qRLpZK-6baivLi5oAD_dHtgtCQHw@mail.gmail.com>
Subject: In webapp, sending multipart email with Javamail : noname attachment
 instead of message
From: Jacques Desodt <jdesodt@gmail.com>
To: users@tomcat.apache.org
Content-Type: multipart/related; boundary=001517478c0c0d1eb104bde2a9cc

--001517478c0c0d1eb104bde2a9cc
Content-Type: multipart/alternative; boundary=001517478c0c0d1eae04bde2a9cb

--001517478c0c0d1eae04bde2a9cb
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,

I try to send a Multipart email in a simple java method, using Javamail.
When i use the method in a local java app, everything is fine.
When i use the same method in a webapp hosted by Tomcat,
i got no message, but a file "noname" in attachment.

Here is the method :

public void sendTestMultipartMail(String host, final String username, final
String password, String from, String to) throws Exception {

Properties properties =3D System.getProperties();
properties.setProperty("mail.smtp.host", host);
properties.put("mail.smtp.auth", "true");
properties.put("mail.smtp.starttls.enable", "true");
properties.put("mail.smtp.port", "587");

Session session =3D Session.getInstance(properties,
  new javax.mail.Authenticator() {
protected PasswordAuthentication getPasswordAuthentication() {
return new PasswordAuthentication(username, password);
}
  });

Message msg =3D new MimeMessage(session);

msg.setFrom(new InternetAddress(from));
msg.addRecipient(Message.RecipientType.TO, new InternetAddress(to));
msg.setSubject("Test MultiPart Mail");

Multipart multipart =3D new MimeMultipart();

BodyPart part1 =3D new MimeBodyPart();
part1.setText("This is multipart mail and u read part1......");

BodyPart part2 =3D new MimeBodyPart();
part2.setText("This is multipart mail and u read part2......");

multipart.addBodyPart(part1);
multipart.addBodyPart(part2);

msg.setContent(multipart);

Transport.send(msg);
}

And here are the results (i use gmail) :

[image: Images int=E9gr=E9es 1]

The first (and wrong) email came from the Tomcat server.
It has no message, and an attachment with "noname" name.
The other email is good and came from my java app.

Thanks in advance,
Jacques

--001517478c0c0d1eae04bde2a9cb
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,<div><br></div><div>I try to send a Multipart email in a simple java met=
hod, using Javamail.</div><div>When i use the method in a local java app, e=
verything is fine.</div><div>When i use the same method in a webapp hosted =
by Tomcat,=A0</div>
<div>i got no message, but a file &quot;noname&quot; in attachment.</div><d=
iv><br></div><div>Here is the method :</div><div><br></div><div><div><span =
class=3D"Apple-tab-span" style=3D"white-space:pre">	</span>public void send=
TestMultipartMail(String host, final String username, final String password=
, String from, String to) throws Exception {</div>
<div><br></div><div><span class=3D"Apple-tab-span" style=3D"white-space:pre=
">		</span>Properties properties =3D System.getProperties();</div><div><spa=
n class=3D"Apple-tab-span" style=3D"white-space:pre">		</span>properties.se=
tProperty(&quot;mail.smtp.host&quot;, host);</div>
<div><span class=3D"Apple-tab-span" style=3D"white-space:pre">		</span>prop=
erties.put(&quot;mail.smtp.auth&quot;, &quot;true&quot;);</div><div><span c=
lass=3D"Apple-tab-span" style=3D"white-space:pre">		</span>properties.put(&=
quot;mail.smtp.starttls.enable&quot;, &quot;true&quot;);</div>
<div><span class=3D"Apple-tab-span" style=3D"white-space:pre">		</span>prop=
erties.put(&quot;mail.smtp.port&quot;, &quot;587&quot;);</div><div>=A0</div=
><div><span class=3D"Apple-tab-span" style=3D"white-space:pre">		</span>Ses=
sion session =3D Session.getInstance(properties,</div>
<div><span class=3D"Apple-tab-span" style=3D"white-space:pre">		</span> =A0=
new javax.mail.Authenticator() {</div><div><span class=3D"Apple-tab-span" s=
tyle=3D"white-space:pre">			</span>protected PasswordAuthentication getPass=
wordAuthentication() {</div>
<div><span class=3D"Apple-tab-span" style=3D"white-space:pre">				</span>re=
turn new PasswordAuthentication(username, password);</div><div><span class=
=3D"Apple-tab-span" style=3D"white-space:pre">			</span>}</div><div><span c=
lass=3D"Apple-tab-span" style=3D"white-space:pre">		</span> =A0});</div>
<div>=A0</div><div><span class=3D"Apple-tab-span" style=3D"white-space:pre"=
>		</span>Message msg =3D new MimeMessage(session);</div><div><br></div><di=
v><span class=3D"Apple-tab-span" style=3D"white-space:pre">		</span>msg.set=
From(new InternetAddress(from));</div>
<div><span class=3D"Apple-tab-span" style=3D"white-space:pre">		</span>msg.=
addRecipient(<a href=3D"http://Message.RecipientType.TO">Message.RecipientT=
ype.TO</a>, new InternetAddress(to));</div><div><span class=3D"Apple-tab-sp=
an" style=3D"white-space:pre">		</span>msg.setSubject(&quot;Test MultiPart =
Mail&quot;);</div>
<div><br></div><div><span class=3D"Apple-tab-span" style=3D"white-space:pre=
">		</span>Multipart multipart =3D new MimeMultipart();</div><div><br></div=
><div><span class=3D"Apple-tab-span" style=3D"white-space:pre">		</span>Bod=
yPart part1 =3D new MimeBodyPart();</div>
<div><span class=3D"Apple-tab-span" style=3D"white-space:pre">		</span>part=
1.setText(&quot;This is multipart mail and u read part1......&quot;);</div>=
<div><br></div><div><span class=3D"Apple-tab-span" style=3D"white-space:pre=
">		</span>BodyPart part2 =3D new MimeBodyPart();</div>
<div><span class=3D"Apple-tab-span" style=3D"white-space:pre">		</span>part=
2.setText(&quot;This is multipart mail and u read part2......&quot;);</div>=
<div><br></div><div><span class=3D"Apple-tab-span" style=3D"white-space:pre=
">		</span>multipart.addBodyPart(part1);</div>
<div><span class=3D"Apple-tab-span" style=3D"white-space:pre">		</span>mult=
ipart.addBodyPart(part2);</div><div><br></div><div><span class=3D"Apple-tab=
-span" style=3D"white-space:pre">		</span>msg.setContent(multipart);</div><=
div>
<br></div><div><span class=3D"Apple-tab-span" style=3D"white-space:pre">		<=
/span>Transport.send(msg);</div><div><span class=3D"Apple-tab-span" style=
=3D"white-space:pre">	</span>}</div></div><div><br></div><div>And here are =
the results (i use gmail) :</div>
<div><br></div><div><img src=3D"cid:ii_136c12ea9cd37afb" alt=3D"Images int=
=E9gr=E9es 1"><br></div><div><br></div><div>The first (and wrong) email cam=
e from the Tomcat server.</div><div>It has no message, and an attachment wi=
th &quot;noname&quot; name.</div>
<div>The other email is good and came from my java app.</div><div><br></div=
><div>Thanks in advance,</div><div>Jacques</div><div><br></div>

--001517478c0c0d1eae04bde2a9cb--
--001517478c0c0d1eb104bde2a9cc--

From users-return-233601-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 17 19:17:27 2012
Return-Path: <users-return-233601-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 421419802
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 17 Apr 2012 19:17:27 +0000 (UTC)
Received: (qmail 52283 invoked by uid 500); 17 Apr 2012 19:17:23 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 52232 invoked by uid 500); 17 Apr 2012 19:17:23 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 52221 invoked by uid 99); 17 Apr 2012 19:17:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 19:17:23 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pid@pidster.com designates 74.125.83.45 as permitted sender)
Received: from [74.125.83.45] (HELO mail-ee0-f45.google.com) (74.125.83.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 19:17:16 +0000
Received: by eeit10 with SMTP id t10so2806593eei.18
        for <users@tomcat.apache.org>; Tue, 17 Apr 2012 12:16:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type;
        bh=HoDxIe+61K16ogHcQB9k+7EPUtYcGQuqTlCiPhP/ZI0=;
        b=WCwlrlXdu+dT/K2520Un3s4EPi4X99Im8nhSmityC7iyrL07BaTkMegwXNhuQJW/S8
         9v4Z9p1mdjerRfub4sw+nxRfoymgJaw5baBxMeWM3MimsyCe07JZfbS45XMzACiRMLyD
         b6ACkUO/ZBxiPG6sClaNeDASuZrlIfF6BIp48=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type:x-gm-message-state;
        bh=HoDxIe+61K16ogHcQB9k+7EPUtYcGQuqTlCiPhP/ZI0=;
        b=EAqyBLSfpVD4U/acbWKVEj9kImABO6kuKmh9+NivFbBCWTwWOdfMhxDJHWHozGG5BJ
         3f3y74pcgPSXvEAUpI6laZQQWO81dztzDexq+M8EhTWXNTmSaRgbozHvLj3lkX5EroQQ
         OOl53RdHAvkYclIcuW2vLC4M41XbC6YQEtUEAW2orzOm6BKZhdYzfSEmfLbwRlQbGLmL
         WKJuLpuNt/U+0rsg2jKbcpdTxbVZFsusdpIgytoLgwn6tz8qbHW5LW7a6f1zcyx6LCh2
         VlgMjq4o0JpJTWcLQ53QzP2nSaZfElhAd1Qc/tngUx70FBNJyf7DUo3fq9RogmUlbFqa
         nyig==
Received: by 10.213.2.70 with SMTP id 6mr1271346ebi.222.1334690213412;
        Tue, 17 Apr 2012 12:16:53 -0700 (PDT)
Received: from Asura.local (cpc10-lewi14-2-0-cust355.2-4.cable.virginmedia.com. [82.4.249.100])
        by mx.google.com with ESMTPS id y11sm106560897eem.3.2012.04.17.12.16.50
        (version=SSLv3 cipher=OTHER);
        Tue, 17 Apr 2012 12:16:51 -0700 (PDT)
Message-ID: <4F8DC19A.5090705@pidster.com>
Date: Tue, 17 Apr 2012 20:16:42 +0100
From: Pid <pid@pidster.com>
Organization: Pidster Inc
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: adding a global URI prefix for Tomcat web apps
References: <4F8D6122.40609@kantl.be>
In-Reply-To: <4F8D6122.40609@kantl.be>
X-Enigmail-Version: 1.4
OpenPGP: id=62590808
Content-Type: multipart/signed; micalg=pgp-sha512;
 protocol="application/pgp-signature";
 boundary="------------enigE318823529EBA59385055329"
X-Gm-Message-State: ALoCoQmuKe2guP5NK/kADAd/F2IgcLBMTNdlza5Agb9VNU6yaw48/Yq8Pop9o6+s+D9TvdZuWK3l
X-Virus-Checked: Checked by ClamAV on apache.org

--------------enigE318823529EBA59385055329
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On 17/04/2012 13:25, ron.vandenbranden@home wrote:
> Hi,
>=20
> I am setting up a reverse proxy configuration where all requests whose
> path starts with '/apps/' should be proxied by Apache to Tomcat. This
> IMO has 2 benefits: it makes it possible to reserve proxying to only th=
e
> '/apps/' part of the URI space, and to use only a single proxy rule for=

> all Tomcat apps (i.e. requests for any Tomcat app should just start wit=
h
> '/apps/').
>=20
> For example, requests for http://mydomain/apps/my_app/ should be proxie=
d
> to http://localhost:8082/my_app/. Note the absence of the '/apps/'
> prefix in the Tomcat URI: 'my_app' lives in the regular location at
> ${CATALINA_HOME}/webapps/my_app.
>=20
> I have achieved this using following Proxy rules in an Apache vhost.con=
f
> file:
>=20
>   ProxyPreserveHost    on
>   ProxyPass            /apps/    http://localhost:8082/
>   ProxyPassReverse    /apps/    http://mydomain/

=46rom the docs:

 ProxyPass        /mirror/foo/ http://backend.example.com/
 ProxyPassReverse /mirror/foo/ http://backend.example.com/

 http://httpd.apache.org/docs/2.2/mod/mod_proxy.html#proxypassreverse

ProxyPassReverse is designed to be used to address the situation you
describe, you just appear to be using it incorrectly.

Can you try again, with the correct 2nd parameter for this directive?


p

> (Note: I have used ProxyPreserveHost since my Tomcat app needs access t=
o
> the original host to generate further links). All goes well, except for=

> absolute links that are generated by one part of my Tomcat app. Given
> above configuration, my Tomcat app will 'see' this request:
> http://mydomain/my_app, and hence generate links without the '/apps/'
> prefix that should trigger proxying for those links.
>=20
> It took me some time, but I understand now that this is essential
> characteristic of proxying, and that there's no 'standard' way to pass
> on that '/apps/' prefix of the original request to the proxied app.
> Hence, I started to investigate another possibility, namely defining a
> global prefix for all Tomcat apps, and proxy the Tomcat apps with
> following settings:
>=20
>   ProxyPreserveHost    on
>   ProxyPass            /apps/    http://localhost:8082/apps/
>   ProxyPassReverse    /apps/    http://mydomain/apps/
>=20
> This would proxy requests for http://mydomain/apps/my_app/ to
> http://localhost:8082/apps/my_app/. Since all apps on the Tomcat server=

> will be accessed behind a proxy, I have no problem that this '/apps/'
> prefix will be required for all Tomcat apps.
>=20
> So far, so good. Yet, I am struggling with the Tomcat side of this
> approach: finding a way to add a global path prefix for requests to
> Tomcat apps. The closest I got was this:
>     1. don't touch the physical location of the Tomcat apps: leave them=

> at ${CATALINA.HOME}/webapps
>     2. change ${CATALINA.HOME}/conf/server.xml as follows:
>=20
>     <Host name=3D"localhost"  appBase=3D"webapps" unpackWARs=3D"true"
> autoDeploy=3D"false" deployOnStartup=3D"false">
>       <Context path=3D"/apps/my_app" docBase=3D"/my_app/" reloadable=3D=
"true"/>
>     </Host>
>=20
> While this makes the my_app Tomcat app accessible at
> http://localhost:8082/apps/my_app/, it also suggests that all Tomcat
> apps should be defined manually in a separate <Context> element. This
> makes it less flexible to add new Tomcat web apps (and would actually
> mean more configuration work than declaring separate proxy rules for
> each app in the Apache configuration, without the '/apps/' prefix). I
> tried this:
>=20
>       <Context path=3D"/apps" docBase=3D"/" reloadable=3D"true"/>
>=20
> (and @docBase variants such as "", or "."), but this doesn't work: no
> indication of any webapps being deployed in the Tomcat console output,
> and all requests return a 404 error.
>=20
> Hence my question: is there a simple(r) way of 'declaring' a global URI=

> prefix for Tomcat webapps?
>=20
> Any advice much appreciated!
>=20
> Ron
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>=20


--=20

[key:62590808]


--------------enigE318823529EBA59385055329
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.18 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iQIcBAEBCgAGBQJPjcGhAAoJEGoM2OGpOvr9CmwQAIeCD/qngBK7vMPYyV3yxCUa
YsDPf4ykZJY0CoOHUU/y3ugnoBVl9bsb2EcN86ue3DMHH9ey5pPYM1LfS0gzNmrK
zt/2tglMsfX+ygLZKkOC1wzmhnL53Rw+UZgDLoznIrkowLn9SWkX4E7itwO+TsA9
NBOoRl2HMEaBvYXF86Lp0blxbOG59R4+yiWFe8ANijHNYVQ/VyXXtHaPWQDVZR42
AILQGpqQzYL/CCcUP/NPwPc9YG4jlWlLQB6yqMekuvXyNu355pJEUfYCx/zsDqE6
3zZ+ja/+X7/f7BfH+gR6XvKNQYmH0ROJ7jcWnPWZnkickoUDF2mdFpKLyZsGYPr7
hRUYgCszdGMExC/AxvOXHsZVkWfOInnMPHN+PL/uzYh2tJSS550IyPzLr+NRjxm/
pt8XhyFB+QNnVBbydfIbnldOdj/4RblpfmFRMbEr7lVsSbe2lslSKOOGBtbWO+Z4
SgE/RuYcq0MPZRCNf8dn/QFK7tRVfE/vYxW3I3mKf84+U9vNZM/UDY2251vFzcf5
Dfbpr+MtPxACVKsfnkxYDf+UCEfoj0UxPcGp7n3DYHUv8R6PNkV7OjNA2TI/PaVC
oBImgd/W1ko6V3ZIpOfbmCjKi3J16KKPWxKfj54Y08r9Pu553Jb+dvHcJP7nSU+N
6bh2p7IpPtaxYq/BzcqB
=oiCN
-----END PGP SIGNATURE-----

--------------enigE318823529EBA59385055329--

From users-return-233602-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 17 19:23:40 2012
Return-Path: <users-return-233602-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0D2309A51
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 17 Apr 2012 19:23:40 +0000 (UTC)
Received: (qmail 76244 invoked by uid 500); 17 Apr 2012 19:23:36 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 76150 invoked by uid 500); 17 Apr 2012 19:23:36 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 76141 invoked by uid 99); 17 Apr 2012 19:23:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 19:23:36 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pid@pidster.com designates 74.125.83.45 as permitted sender)
Received: from [74.125.83.45] (HELO mail-ee0-f45.google.com) (74.125.83.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 19:23:29 +0000
Received: by eeit10 with SMTP id t10so2808475eei.18
        for <users@tomcat.apache.org>; Tue, 17 Apr 2012 12:23:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type;
        bh=rHDV5KZBjwrSCo3R0RG2Zf1hveGglRlxQQsI8NKO6xk=;
        b=h7U/Kvq/nhl6NC73bgQCJGjgLg/HdMbMwf+f51pGxKEIJCUVx43mdeeADpvnJvuDtT
         S1OpwxSfHov4tj9eVaB28Ji+Aqa1cBtI36j+jpef60dbTOHeNc/joNM4T/vo5rDMcbOP
         +fv5XLwszmFXR6e8m4DwYdQMJLd0RrKKfCZlU=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type:x-gm-message-state;
        bh=rHDV5KZBjwrSCo3R0RG2Zf1hveGglRlxQQsI8NKO6xk=;
        b=MO0looZQmgvPAiw+lu8JwpdDHTkUZs3OF4ptJOLkpE+Jl1lhtdLjLsddBVTBu8GpVE
         /hTplMtylX9nXjP/YZPyimikSgx+8Vz0B+TiitY36uefgNS55YcnaCf99Vd3SGlNUsnx
         PUvdp3vo/9NyYYPgcmcFZB1vDce3649fkhwUXu2MOy2ua8j6ipUw5i4VD2bAguWqHHaZ
         4Pq3qG2er68rFpClYRlSb29rZepthIB9U3WG7qot7YB+GWv/Kp6sVR2/ViOl2UaXxSSS
         25j9CKA/x41wWHKg4vG3AgjtJ6ppvo6ZvUOWlPLmLOot7zRmCe+I1J/eV+RCpmjjDlxX
         fB7A==
Received: by 10.14.130.202 with SMTP id k50mr2492662eei.113.1334690588169;
        Tue, 17 Apr 2012 12:23:08 -0700 (PDT)
Received: from Asura.local (cpc10-lewi14-2-0-cust355.2-4.cable.virginmedia.com. [82.4.249.100])
        by mx.google.com with ESMTPS id d54sm106624941eei.9.2012.04.17.12.23.05
        (version=SSLv3 cipher=OTHER);
        Tue, 17 Apr 2012 12:23:06 -0700 (PDT)
Message-ID: <4F8DC312.9020307@pidster.com>
Date: Tue, 17 Apr 2012 20:22:58 +0100
From: Pid <pid@pidster.com>
Organization: Pidster Inc
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Why @WebServlet annotation is not processed when web.xml is version
 2.5?
References: <CAAu+a+vquBRKStbeHHvrnf_ph2wLvKyi=PALV8jJoDUk7=ZXiQ@mail.gmail.com>
In-Reply-To: <CAAu+a+vquBRKStbeHHvrnf_ph2wLvKyi=PALV8jJoDUk7=ZXiQ@mail.gmail.com>
X-Enigmail-Version: 1.4
OpenPGP: id=62590808
Content-Type: multipart/signed; micalg=pgp-sha512;
 protocol="application/pgp-signature";
 boundary="------------enig2EC94AC1BB19C8EDFBEF30BF"
X-Gm-Message-State: ALoCoQlm85YTu5L6jajYZJ0S5cn4mPSHMcUWThTkJ9BjB/Z54yGvgzne1lmVA0ku8LNBW1CSg90a
X-Virus-Checked: Checked by ClamAV on apache.org

--------------enig2EC94AC1BB19C8EDFBEF30BF
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable

On 17/04/2012 13:48, maria petrova wrote:
> Hi,
>=20
>=20
> We=92ve embedded Tomcat 7.0.26 in our product and we are currently tryi=
ng
> to cover Servlet 3.0 CTS with it.  We=92ve encountered the following
> problem with one of the tests.
>=20
> Though the version of the web deployment descriptor of the test
> application is 2.5, there is a servlet annotated with *@WebServlet
> *annotation and requests to this servlet are responded with 404 Not
> Found. When I change the version of the web.xml to 3.0 everything works=

> just fine.
>=20
>=20
> In Chapter /=93*1.6.2 Regarding Processing annotations*=94/ in the Serv=
let
> 3.0 Specification it is said that:
>=20
> /=93The version of the descriptor MUST not affect which annotations you=

> scan for in a web application.=94/

It also says:

"An implementation of a particular version of the specification MUST
scan for all annotations supported in that configuration, unless
metadata-complete is specified."

So I ask "which configuration?" - interpreting it to mean that Servlet
3.0 supports the WebServlet annotation etc, and 2.5 does not, because
that annotation is not present in 2.5.


p

> So my understanding is that the application should be processed for
> Servlet 3.0 specific annotations regardless of the version of the
> deployment descriptor.
>=20
>=20
> As far as I=92m aware, each new Tomcat release successfully covers Serv=
let
> 3.0 CTS, so I=92m wondering if I=92ve missed some configuration on Tomc=
at side?
>=20
> Any hints or ideas are highly appreciated.
>=20
>=20
> Thanks!
>=20
> Maria
>=20
>=20
> P.S. The issue is easily reproducible with clean Tomcat 7.0.26
> installation and the attached simple test applications. They differ onl=
y
> in the web.xml=92s version and only /AnnotTest_30/AnnotServlet is
> correctly responded, while /AnnotTest_25/AnnotServlet gets 404 response=
=2E
>=20
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org


--=20

[key:62590808]


--------------enig2EC94AC1BB19C8EDFBEF30BF
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.18 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iQIcBAEBCgAGBQJPjcMYAAoJEGoM2OGpOvr90moP/jA8P/fUmNG6haBC7VWxLkIJ
il+uBpYyHRgyC0WGL/wcmbRKDnnCeYA8fUWeSYNThDwB2UMRBNxT5SutAgtZC5x2
sYDZu0WSjktnSRuADNSML9lUUzNdIsVJZ+vez5mIkmslKmK6dNCMueWyK77K5KuE
3Wf/FJWT+8cm/W0oz4ZpbGTXxU8Qg9vPAH8a0o1PUhG/kxs0E0npbBxEWcBS1eps
aqXHrDHhAeP+/c/CqnRpPeoty1APhzOPoMXxO9TLSre0fenjzjDzQrgRP+W6+cZu
xMegOP8sfMVtQB5yGT024edN/Hpjme4s3xxJ6Kng+mI7zWrOEiof0sAau0h/vwm9
QaE2+oKG7aCwXvmS7S6TkA0elbOjtvgKdyEwGB6OPPPUU1U2Ec75Py4qF0UFlxok
1k8jwAiiIAq1qpb3NbGR2UQBFKix5TK/yYrJ8zA5Zkv0iW8lo702zM05Lrb+2qva
62oA41ZiER6z+YnDqKpG3sIvYTBYUmbWAXn89W6OY50CUbfyyDLm84F3n96/FKYQ
qrh8frUEABn9Ybveu0AwTptSLbuZ2PZB6JBDXw19rHm1L38xrpRj0XQG0BksYFzy
Nv1Zbh2OuzpUE55UNV4ezV1gyQAmRtdcfoVaEDLJeckQIv8Yx2QkKtYrv+lVmfwn
HNxpqDzgotJB1ZZZCc9H
=a0J1
-----END PGP SIGNATURE-----

--------------enig2EC94AC1BB19C8EDFBEF30BF--

From users-return-233603-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 17 19:31:23 2012
Return-Path: <users-return-233603-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6FAAD9B83
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 17 Apr 2012 19:31:23 +0000 (UTC)
Received: (qmail 98991 invoked by uid 500); 17 Apr 2012 19:31:20 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 98836 invoked by uid 500); 17 Apr 2012 19:31:20 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 98820 invoked by uid 99); 17 Apr 2012 19:31:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 19:31:19 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pid@pidster.com designates 74.125.83.45 as permitted sender)
Received: from [74.125.83.45] (HELO mail-ee0-f45.google.com) (74.125.83.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 19:31:12 +0000
Received: by eeit10 with SMTP id t10so2810865eei.18
        for <users@tomcat.apache.org>; Tue, 17 Apr 2012 12:30:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type;
        bh=d5qtxe9FnhQzEJQJoHxEJjlSecC4bOPPcMb4rWSN9T0=;
        b=Nf8E5BMM2CbmskxVMgYKYAZcorFGcvMxZUBcSmpbzjLylm1peOj6D2cnYwYZU4ek+f
         Njs5emHfKS3AMkcYT6UzNEXanJJxbzH4wzwvmXsHqV8ENYwhUSiPBFwGMxhJbMiKZoo/
         n9DnhtUu4PC7nmd0g6xxWbWKLmg/Kwg3wL6Ko=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type:x-gm-message-state;
        bh=d5qtxe9FnhQzEJQJoHxEJjlSecC4bOPPcMb4rWSN9T0=;
        b=DtrenHRrHeshk5GO+tjVvdYwKhAnWfIU8cjkiY1JRqhUEEeHWmx2RC1TQCEUziQ+6z
         wkGtrk1S1/hjUAgxmATl3sGCugpfOWAUDe4TItIyncr+AslSdQ+yBE/SZAxHUrgKeN4r
         GeFx5VP9V0BfQhuMgeicr9bb+640INnLvuiSuxdC8Uzh6EqscK3+Ec+A1Ox53UP+nbhZ
         Jpt1juk50/Tg4Kza18EVXgHcu3fygD8LSGNg3BlC0fcLWfkvMeoNRhnGI1+XH+1M2bxx
         ht+ZIYymnMLyTEFxaOdkjIer3ytWmp4nKVIeUifr4KbsAooPmjqVxuy10/KuFbSPohy+
         X48A==
Received: by 10.14.98.140 with SMTP id v12mr2470599eef.126.1334691051313;
        Tue, 17 Apr 2012 12:30:51 -0700 (PDT)
Received: from Asura.local (cpc10-lewi14-2-0-cust355.2-4.cable.virginmedia.com. [82.4.249.100])
        by mx.google.com with ESMTPS id x4sm106718042eef.10.2012.04.17.12.30.49
        (version=SSLv3 cipher=OTHER);
        Tue, 17 Apr 2012 12:30:50 -0700 (PDT)
Message-ID: <4F8DC4E3.1070700@pidster.com>
Date: Tue, 17 Apr 2012 20:30:43 +0100
From: Pid <pid@pidster.com>
Organization: Pidster Inc
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: PLZ help: i've issue with SSL TOMCAT
References: <1334659891301-4889811.post@n6.nabble.com> <1334667295617-4890173.post@n6.nabble.com>
In-Reply-To: <1334667295617-4890173.post@n6.nabble.com>
X-Enigmail-Version: 1.4
OpenPGP: id=62590808
Content-Type: multipart/signed; micalg=pgp-sha512;
 protocol="application/pgp-signature";
 boundary="------------enigE03FE4A1183C6BA73D5E0B98"
X-Gm-Message-State: ALoCoQl0hBayhsR7TyPTjWydf0QYQj+wu3EPEaf47J+iDf3Sw3Xz6VhFPsER1Tc5L4NLK0vcx4u5
X-Virus-Checked: Checked by ClamAV on apache.org

--------------enigE03FE4A1183C6BA73D5E0B98
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

On 17/04/2012 13:54, amine20 wrote:
> i thank i need some file *.jar to add in
> ----/tomcat6/webapps/cas/WEB-INF/lib?
> i m wrong ??

Yes, you're wrong.  Read Igor's email again.

You've put the keystore in the /root directory which should not be
accessible to Tomcat.  Move it to tomcat/conf and change the path
reference to it.

Also check that the permissions on the file allow the Tomcat user* to
read the file.


Once you've done that Tomcat will start, but the certificate probably
won't work because you appear to have put the application name 'cas' in
the Common Name field - which should contain the hostname.

You put the hostname in Organization Name field, where it is not used.


p


*  Because you're not running Tomcat using 'root' right?
** Can I haz burger?


> --
> View this message in context: http://tomcat.10.n6.nabble.com/PLZ-help-i=
-ve-issue-with-SSL-TOMCAT-tp4889811p4890173.html
> Sent from the Tomcat - User mailing list archive at Nabble.com.
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>=20


--=20

[key:62590808]


--------------enigE03FE4A1183C6BA73D5E0B98
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.18 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iQIcBAEBCgAGBQJPjcTnAAoJEGoM2OGpOvr9mi0P/j32SlJS1ssGuzFw9nYn9hJg
mupUPhkAmiI4nTu57OWdGCG9r7c96kO/pSkn9Aslbj7O9BBR2jn22fBMYuS2Y7s1
yDdiX+2Y9pMQOLiP+UuA6JMGTVmGHl7cYjVk+PSqMCxfqxZPyY77lhQlCuU9KG/I
gfbraRI2yQ3X0QysCNj2/Aj6mKjgVT0+Ktv0Ve9q+XTiNgjO0VNtr6GBQoI8/eOK
xHdti+fUTvtuKYdrBFSj/883G0sltL1iKo8nRYkk0NyThRkxXEx+Pks/++ULHCr2
5x3WU3Vrq1TMfXi29069Wl7GZlj0ztLc4iFOI/ctTcm0iUzVOdYRK2pPPhmhg0nf
+Ybh+5GAemkCK3rwhXYxL5VNwA/3IxNLFaV/jK9LPFDh4Wnbtwgjduk7gN3EskH/
89pXokPJ8GAcjYyez9NzJX1NJxTA2vH7dJkb9igYBUsmYSaF2ruvjVEsjqKqLbaa
q+AmvtAQdttHfCIdjgNMXOmWD+0bIobOQuGx9g/hXD0fxzXiNEA2jI/ie4Ozfh6r
LCos06NK03CDno+OJe0hjDudN6d87fRxPsBQqrcQCIhFS1r1/nd2n8r62zkdYFzq
xTN5T5RnUvKoRRx2HUOouQEgkSPqf5qlG2hSJs7Asw+RWvwHA6O4ajrSiKa1K8Ms
0mxYlDRPlzZ6eXfZRVBI
=G/61
-----END PGP SIGNATURE-----

--------------enigE03FE4A1183C6BA73D5E0B98--

From users-return-233604-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 17 19:32:50 2012
Return-Path: <users-return-233604-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AEFD99BDC
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 17 Apr 2012 19:32:50 +0000 (UTC)
Received: (qmail 6245 invoked by uid 500); 17 Apr 2012 19:32:47 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 6188 invoked by uid 500); 17 Apr 2012 19:32:47 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 6177 invoked by uid 99); 17 Apr 2012 19:32:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 19:32:47 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pid@pidster.com designates 74.125.83.45 as permitted sender)
Received: from [74.125.83.45] (HELO mail-ee0-f45.google.com) (74.125.83.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 19:32:40 +0000
Received: by eeit10 with SMTP id t10so2811350eei.18
        for <users@tomcat.apache.org>; Tue, 17 Apr 2012 12:32:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type;
        bh=5IfacYn4+6zCVvg4ereNlmeLuRtxsQC9U2r/FvPlIx0=;
        b=r0hW18RF3+8UBdzKNFTm2c2mbCoOys+KbrF8AVriaDQIhXP7RvlA8a2n2+qJ8y7GJF
         4heuZuGHGQzSXpjsplu9z6IhvrHh1pMJIsOcMvtpLZV0OyUXDPMUrlJTAWU2TNaU9hFm
         TrYexKgMkfHcbJ+iNNgCgIgWmfdEdQDUCc92w=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type:x-gm-message-state;
        bh=5IfacYn4+6zCVvg4ereNlmeLuRtxsQC9U2r/FvPlIx0=;
        b=fQAn6jeJjSiYsnkH1Ka1jKH8liLl3cqb5cir6di9VAHlWqHDkcxQ7tGDFFsjCc1Rsg
         gnl6A0hw3vhVv6gOqFJpsHwrVbuqnamxtgG+L6Yx6u2LkrNX/ZjSZ54i39cQfKoEzhG5
         GUtSB1oRr/jl8P2Cp2CwPIttNskdhVPHlzTz3N3AFh6uU96F1Vjl3fxIS+0/T7cWnXt4
         Lm8RH4ltTDTkMThR1MryITfKQPZym1VX55a/81F+jsrhdHRB0lCN1M7ECfVuC64Ai4K7
         f2hmydwReEX35Snz4z7LyUC1AiGmiQLGMhjZowpE8Y/CGM03vX0muM+d782C5mu3I0Le
         EgMA==
Received: by 10.213.8.3 with SMTP id f3mr1247704ebf.179.1334691139645;
        Tue, 17 Apr 2012 12:32:19 -0700 (PDT)
Received: from Asura.local (cpc10-lewi14-2-0-cust355.2-4.cable.virginmedia.com. [82.4.249.100])
        by mx.google.com with ESMTPS id p57sm106719594eei.8.2012.04.17.12.32.17
        (version=SSLv3 cipher=OTHER);
        Tue, 17 Apr 2012 12:32:18 -0700 (PDT)
Message-ID: <4F8DC540.1030404@pidster.com>
Date: Tue, 17 Apr 2012 20:32:16 +0100
From: Pid <pid@pidster.com>
Organization: Pidster Inc
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Fail to load keystore type JKS with path C:\apache-tomcat-7.0.26-windows-x86\apache-tomcat-7.0.26\${user.home}
References: <289212.98.1334665510418.JavaMail.daniel@cleveland>
In-Reply-To: <289212.98.1334665510418.JavaMail.daniel@cleveland>
X-Enigmail-Version: 1.4
OpenPGP: id=62590808
Content-Type: multipart/signed; micalg=pgp-sha512;
 protocol="application/pgp-signature";
 boundary="------------enigEDF9CAAE1209D705DBDAB56D"
X-Gm-Message-State: ALoCoQk1bpYG21BgdEMcPoSiJFAr/AlEbA+pEa9UzMDJwt7HKl5ldAtadIS5iQVTQbUOAi1FQBEz
X-Virus-Checked: Checked by ClamAV on apache.org

--------------enigEDF9CAAE1209D705DBDAB56D
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On 17/04/2012 13:25, Daniel Mikusa wrote:
> ----- Original Message -----
>> Hello sir,
>> I am using tomcat 7.0.26 on windows.
>> I have read the manual "SSL Configuration HOW-TO" to configure SSL
>> for
>> my web application.
>> I create the .keystore file which reside on my home directory which
>> is
>> C:\Users\debabrattaj\.keystore.
>> Coding for my server.xml is
>>
>>     <Connector port=3D"8443" maxThreads=3D"150" protocol=3D"HTTP/1.1"
>>                               scheme=3D"https" secure=3D"true"
>>                               SSLEnabled=3D"true"
>>                               keystoreFile=3D"$ {user.home}/.keystore"=

>=20
> Not sure if this is a cut-and-paste issue, but you shouldn't have a spa=
ce between the dollar sign and the left bracket.  It should just be "${us=
er.home}".

If ${user.home} resolved that might work.  But it doesn't.

Put the keystore in tomcat/conf and reference it there, with

 ${catalina.base}/conf/.keystore


p

>> keystorePass=3D"XXXXXX"
>>                               clientAuth=3D"false" sslProtocol=3D"TLS"=
 />
>>
>>  Now when I restart my server.It shows
>> Fail to load keystore type JKS with path
>> C:\apache-tomcat-7.0.26-windows-x86\apache-tomcat-7.0.26\${user.home}\=
=2Ekeystore
>> due to system can find the path specified.
>>
>> Where should I keep my .keystore file. Should i keep it in my
>> C:\apache-tomcat-7.0.26-windows-x86\apache-tomcat-7.0.26\.
>> I searchred Google and in some help forums also but thats not
>> satisfying.
>=20
> It's up to you where you put it.  If you don't have a preference, I see=
 a lot of people put it in the "conf" directory.  Something like this may=
be?
>=20
>   ${catalina.base}/conf/ssl/my-keystore.jks=20
>=20
> Dan
>=20
>>
>> Please help me.
>>
>> --
>> Thanks and regards,
>> debabratta jena
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>> For additional commands, e-mail: users-help@tomcat.apache.org
>>
>>
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>=20


--=20

[key:62590808]


--------------enigEDF9CAAE1209D705DBDAB56D
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.18 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iQIcBAEBCgAGBQJPjcVAAAoJEGoM2OGpOvr9KQwQALHlJmICoVyQsZ5gFmTuMAHQ
3qQ1PMlZB0HAzjPu0H3QFdsffcLILbn3O5zNRnQMnOlrzTmXudNp/61NSzEDgJD9
gPPHa9yvHBCo1wToN1kAZmqmJSU21oO18mHF8zXKRaBF+M4UIqP9QsXA+WLZJng1
gf/BFxuibl86J4q1HUeqH4EM6MOXULuOfMut9L3MPdG8uNFt/XeBl1aLlhNOtkGa
CHBz3eGY3UxKbvqEHKTfVrWo7YNnWe6zaPEblOia8Ut2WolC2yKtejMRv3sYDQ3K
GRD++yU/h4YALE/yrXGImXOgrhPAnKOXa/bOsyojWBXYhHdu4ABKoW1v/kliWNdw
BgwpXL62hpevC34bY25j+JLyAdX4gBou8M15st4FV2kOIo/VEQQWrvfvGPOTfaj9
hQ0A34r6R1Qdt5oRLqVKPtLpmfxdy72D9pzFHvVa1uvTz1gmBMfaQDib/pLONwfe
29Wky412p1gn56OYVUT8QeCVrcPGjd7nbYcBuBTv/MFJ6o7rwgPyLmaE2ao5OLpr
SyDuLcO1Hcw00Ez7g7W94aLYEin6CIOa8AiOiL8iGD2HWjBWzu28c0Sxu1tFDYJu
XT+0iPC8pagF6aORH6nWzQgG/41/7c0EpHw6HQT1b4ul55qi58lMF16v1ryX69Yx
kGsGcCqBlhWH96qDPGh1
=P9Hx
-----END PGP SIGNATURE-----

--------------enigEDF9CAAE1209D705DBDAB56D--

From users-return-233605-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 17 20:13:21 2012
Return-Path: <users-return-233605-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 219BD9E6A
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 17 Apr 2012 20:13:21 +0000 (UTC)
Received: (qmail 15816 invoked by uid 500); 17 Apr 2012 20:13:17 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 15581 invoked by uid 500); 17 Apr 2012 20:13:17 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 15571 invoked by uid 99); 17 Apr 2012 20:13:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 20:13:17 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [195.130.137.68] (HELO georges.telenet-ops.be) (195.130.137.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 20:13:09 +0000
Received: from [192.168.1.109] ([84.198.206.133])
	by georges.telenet-ops.be with bizsmtp
	id z8Co1i0092tD98c068Co46; Tue, 17 Apr 2012 22:12:49 +0200
Message-ID: <4F8DCEBF.9060307@kantl.be>
Date: Tue, 17 Apr 2012 22:12:47 +0200
From: "ron.vandenbranden@home" <ron.vandenbranden@kantl.be>
User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
CC: Pid <pid@pidster.com>
Subject: Re: adding a global URI prefix for Tomcat web apps
References: <4F8D6122.40609@kantl.be> <4F8DC19A.5090705@pidster.com>
In-Reply-To: <4F8DC19A.5090705@pidster.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit

Hi Pid,

Thanks for your suggestion.

On 17/04/2012 21:16, Pid wrote:
>  From the docs:
>
>   ProxyPass        /mirror/foo/ http://backend.example.com/
>   ProxyPassReverse /mirror/foo/ http://backend.example.com/
>
>   http://httpd.apache.org/docs/2.2/mod/mod_proxy.html#proxypassreverse
>
> ProxyPassReverse is designed to be used to address the situation you
> describe, you just appear to be using it incorrectly.
>

I think your ProxyPassReverse setting only works with ProxyPreserveHost 
switched off: in that case, the my_app Tomcat app, when proxied via 
http://mydomain/apps/my_app/ will 'see' (and generate) links like 
http://localhost:8082/my_app/. This will only work if Tomcat is running 
on a public port; not when it is hidden behind a firewall.

That's why I arrived at using ProxyPreserveHost. In order to make this 
work, the ProxyPassReverse setting must refer to the public URL (see 
advice at 
<https://www.indexis.be/indexWeb/index.jsp?language=nl&p=o&eandis=y>). 
Following settings do work, mostly:

On 17/04/2012 13:25, ron.vandenbranden@home wrote:

>    ProxyPreserveHost    on
>    ProxyPass            /apps/    http://localhost:8082/
>    ProxyPassReverse    /apps/    http://mydomain/

Yet, here too, all the my_app Tomcat app sees from the request is 
http://mydomain/my_app/, since the '/app/' part has been filtered out 
after the proxy handling. Consequently, those links won't work. That's 
why I tried if I could add '/app/' as a global path prefix to Tomcat apps.

Kind regards,

Ron

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233606-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 17 20:16:36 2012
Return-Path: <users-return-233606-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9A2149F75
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 17 Apr 2012 20:16:36 +0000 (UTC)
Received: (qmail 28410 invoked by uid 500); 17 Apr 2012 20:16:33 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 28196 invoked by uid 500); 17 Apr 2012 20:16:33 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 28185 invoked by uid 99); 17 Apr 2012 20:16:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 20:16:33 +0000
X-ASF-Spam-Status: No, hits=1.8 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shahrzadmmz55@gmail.com designates 209.85.214.173 as permitted sender)
Received: from [209.85.214.173] (HELO mail-ob0-f173.google.com) (209.85.214.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 20:16:27 +0000
Received: by obbwd18 with SMTP id wd18so4072258obb.18
        for <users@tomcat.apache.org>; Tue, 17 Apr 2012 13:16:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=fy4sTmYcO1K48UPYscmxnLDuxsWtO8RJtSiW1qm41Js=;
        b=TZz5odXLmG4axMgGKlwHjyOvT64f15K424xFc7s8KfM88VJkA8PXwnjn2wWxWXyG3t
         +Eveoj3B411kPPz5BF19yAcOXdQ8G1FWl1gsLuluwM0SJNmZfAUGKM58hrAo/hUO2PcK
         /1HDJ8VsLKa3PevXr9rrwnF3zLW4UiOZ9jLzJtwZMO8HqACTL3ZVPckWiAE/Z8dqzh3k
         A6h+J0GmvlKtzEN3eJGxvjXmt74bIT3oX+TwXxtfN6Egirfb4KudBJGdhc/ry3QI2fKZ
         7Sdg5fgTqlOyOGNj6YoK/Ord508OIzd7q+fr+1qB9+DvnieeoTQxr7ilSfiQf6BYpyhv
         xVhw==
MIME-Version: 1.0
Received: by 10.182.31.47 with SMTP id x15mr23165251obh.76.1334693766954; Tue,
 17 Apr 2012 13:16:06 -0700 (PDT)
Received: by 10.182.60.105 with HTTP; Tue, 17 Apr 2012 13:16:06 -0700 (PDT)
Received: by 10.182.60.105 with HTTP; Tue, 17 Apr 2012 13:16:06 -0700 (PDT)
In-Reply-To: <4F8DCEBF.9060307@kantl.be>
References: <4F8D6122.40609@kantl.be>
	<4F8DC19A.5090705@pidster.com>
	<4F8DCEBF.9060307@kantl.be>
Date: Tue, 17 Apr 2012 23:46:06 +0330
Message-ID: <CAK5DKAmJT1mTAOurvDDGT21N4RWe_do-LDM=Wyz_PSw9OBQYng@mail.gmail.com>
Subject: Re: adding a global URI prefix for Tomcat web apps
From: shahrzad mirmorad <shahrzadmmz55@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=14dae93b590edcfdd504bde59bbb
X-Virus-Checked: Checked by ClamAV on apache.org

--14dae93b590edcfdd504bde59bbb
Content-Type: text/plain; charset=ISO-8859-1

On Apr 18, 2012 12:43 AM, "ron.vandenbranden@home" <
ron.vandenbranden@kantl.be> wrote:

> Hi Pid,
>
> Thanks for your suggestion.
>
> On 17/04/2012 21:16, Pid wrote:
>
>>  From the docs:
>>
>>  ProxyPass        /mirror/foo/ http://backend.example.com/
>>  ProxyPassReverse /mirror/foo/ http://backend.example.com/
>>
>>  http://httpd.apache.org/docs/**2.2/mod/mod_proxy.html#**proxypassreverse<http://httpd.apache.org/docs/2.2/mod/mod_proxy.html#proxypassreverse>
>>
>> ProxyPassReverse is designed to be used to address the situation you
>> describe, you just appear to be using it incorrectly.
>>
>>
> I think your ProxyPassReverse setting only works with ProxyPreserveHost
> switched off: in that case, the my_app Tomcat app, when proxied via
> http://mydomain/apps/my_app/ will 'see' (and generate) links like
> http://localhost:8082/my_app/. This will only work if Tomcat is running
> on a public port; not when it is hidden behind a firewall.
>
> That's why I arrived at using ProxyPreserveHost. In order to make this
> work, the ProxyPassReverse setting must refer to the public URL (see advice
> at <https://www.indexis.be/**indexWeb/index.jsp?language=**nl&p=o&eandis=y<https://www.indexis.be/indexWeb/index.jsp?language=nl&p=o&eandis=y>>).
> Following settings do work, mostly:
>
> On 17/04/2012 13:25, ron.vandenbranden@home wrote:
>
>    ProxyPreserveHost    on
>>   ProxyPass            /apps/    http://localhost:8082/
>>   ProxyPassReverse    /apps/    http://mydomain/
>>
>
> Yet, here too, all the my_app Tomcat app sees from the request is
> http://mydomain/my_app/, since the '/app/' part has been filtered out
> after the proxy handling. Consequently, those links won't work. That's why
> I tried if I could add '/app/' as a global path prefix to Tomcat apps.
>
> Kind regards,
>
> Ron
>
> ------------------------------**------------------------------**---------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.**apache.org<users-unsubscribe@tomcat.apache.org>
> For additional commands, e-mail: users-help@tomcat.apache.org
>
>

--14dae93b590edcfdd504bde59bbb--

From users-return-233607-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 17 20:17:08 2012
Return-Path: <users-return-233607-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DAEEB9FB6
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 17 Apr 2012 20:17:08 +0000 (UTC)
Received: (qmail 32262 invoked by uid 500); 17 Apr 2012 20:17:05 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 32064 invoked by uid 500); 17 Apr 2012 20:17:05 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 32045 invoked by uid 99); 17 Apr 2012 20:17:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 20:17:05 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL,TO_NO_BRKTS_PCNT
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.215.173] (HELO mail-ey0-f173.google.com) (209.85.215.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 20:17:00 +0000
Received: by eaaf11 with SMTP id f11so2809810eaa.18
        for <users@tomcat.apache.org>; Tue, 17 Apr 2012 13:16:38 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:reply-to:date:message-id:subject:from:to:content-type
         :x-gm-message-state;
        bh=WrA/aOvbIfGAtwjUh0B8oTFiREIiWctlj2uJvDb19w4=;
        b=bfLk7oX18M1C3gyhSjd4Vqz6iX0gr0lTo/qgSsQoTY5fqfIAtHgBqkjisNz8cxQrJQ
         1LuqeqSerkf9ou7uU45IJmVRelBcxotUweEaeA7hkHrycXiF5rkalbnTjRFob8Ab7szJ
         hg1EYoM9B5yAMa9+O7NlKy7YBgls30Wjkz/QFR8kEpOxsDfJ4D9d1AhM3CXHRyX/5Je/
         hoSbQ0f6gVB2TTUK+NNKGFhknYhAw24L8qkJukKAhvDWiv3dtNH79myaBtr2eA18lEn6
         LYpmiYnWfHMt5dYD+YMSg6d4NwOnmr64ZDqg+QR3aTyw/hNe3zTp1Kdj3rtNp59qDQU0
         bhyQ==
MIME-Version: 1.0
Received: by 10.14.188.7 with SMTP id z7mr2568745eem.91.1334693797887; Tue, 17
 Apr 2012 13:16:37 -0700 (PDT)
Reply-To: victoria.kio.2011@my.bristol.ac.uk
Received: by 10.213.27.194 with HTTP; Tue, 17 Apr 2012 13:16:37 -0700 (PDT)
Date: Tue, 17 Apr 2012 21:16:37 +0100
Message-ID: <CADnZG66WorN4wYg9sC7wf=FOcwUdF19docRuAnKh+h0qxKzbUg@mail.gmail.com>
Subject: Generating a Keystore
From: Victoria Johnson  - Kio <victoria.kio.2011@my.bristol.ac.uk>
To: users@tomcat.apache.org
Content-Type: multipart/alternative; boundary=bcaec52be6dbb4fdf104bde59d01
X-Gm-Message-State: ALoCoQndsLmmF4O6UvE1/lWq2mUnowkgY047EHpfmbhmvbWGefSzmJZbS9XH9AXRfa9OTM2oVq0l
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec52be6dbb4fdf104bde59d01
Content-Type: text/plain; charset=ISO-8859-1

Hello,

I am having problems generating a keystore, this is my first time
configuring a server, let alone Tomcat.

The text on Apache is really confusing me about setting up SSL on Tomcat,
what do I do with this command

%JAVA_HOME%\bin\keytool -genkey -alias tomcat -keyalg RSA

Please advise.

Thanks.


-- 
Victoria Captain Johnson-Kio
BS81EA
+44(0)7936297429
Here's my professional profile
<http://uk.linkedin.com/pub/victoria-captain-johnson-kio/19/9a5/70%20>on
LinkedIn
Personal Impact <http://twitter.com/#%21/VictoriaKio> on Twitter, and some
fun <http://www.facebook.com/kio.victoria> things I do at facebook

--bcaec52be6dbb4fdf104bde59d01--

From users-return-233608-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 17 20:32:06 2012
Return-Path: <users-return-233608-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9345E927B
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 17 Apr 2012 20:32:06 +0000 (UTC)
Received: (qmail 76496 invoked by uid 500); 17 Apr 2012 20:32:03 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 76447 invoked by uid 500); 17 Apr 2012 20:32:03 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 76437 invoked by uid 99); 17 Apr 2012 20:32:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 20:32:03 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.214.173] (HELO mail-ob0-f173.google.com) (209.85.214.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 20:31:55 +0000
Received: by obbwd18 with SMTP id wd18so4091626obb.18
        for <users@tomcat.apache.org>; Tue, 17 Apr 2012 13:31:35 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding
         :x-gm-message-state;
        bh=1Aru2i+BSwjKAIssIRpxhKlLMhRjdRByimLDliMxzfw=;
        b=nteLyPMz96gs0IFgxCwO+5pCwwGLWA8Cwk3Rvy5toNCQmUn36BNMdiMfD//JM+XkWo
         Ip2initrPWjhEORWgE5JKtzA1+CnmNM7UW1s7mDnMFdMR4UJbWwSQoXLbMCUWO9YcddY
         9GjYiVyFfAkvRPmD+0b8tlhDa3vWKjQ3TjmHyvrY72Uv1AaJ3pVRdOuS10D6wXpc/qY8
         maPF2zIrQTyUjd3Xh1M266EUKezCMtvJz9FJx1jcW4GrRNt4WBuE+JEfHJNrURZPyBlB
         cwTaqtTc3LBK864qsk7Vakj1Luqeo173LhytKWDNg1xX+qbPyaAcWVKlsldOyaZ2nNLo
         VhFQ==
Received: by 10.182.119.6 with SMTP id kq6mr23679130obb.67.1334694694856;
        Tue, 17 Apr 2012 13:31:34 -0700 (PDT)
Received: from [192.168.1.98] (wintouch.touchtonecorp.com. [69.238.233.81])
        by mx.google.com with ESMTPS id m2sm24321636obk.9.2012.04.17.13.31.33
        (version=SSLv3 cipher=OTHER);
        Tue, 17 Apr 2012 13:31:34 -0700 (PDT)
Message-ID: <4F8DD326.9050703@touchtonecorp.com>
Date: Tue, 17 Apr 2012 13:31:34 -0700
From: James Lampert <jamesl@touchtonecorp.com>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Generating a Keystore
References: <CADnZG66WorN4wYg9sC7wf=FOcwUdF19docRuAnKh+h0qxKzbUg@mail.gmail.com>
In-Reply-To: <CADnZG66WorN4wYg9sC7wf=FOcwUdF19docRuAnKh+h0qxKzbUg@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Gm-Message-State: ALoCoQm1J/onrjqNDttNzBXzPtpAZe3YelbxMXPBCcTEMJy4V1fISA2VzpdcxQHqqv93d9dmfNDG
X-Virus-Checked: Checked by ClamAV on apache.org

Victoria Johnson - Kio wrote:
  > The text on Apache is really confusing me about setting up SSL on 
Tomcat,
> what do I do with this command
> 
> %JAVA_HOME%\bin\keytool -genkey -alias tomcat -keyalg RSA

Well, first you need to be sure you're NOT running this on an AS/400. 
For some reason, Keytool is broken under OS/400.

At any rate, you need to find out where Java is on the computer you're 
using, and put it into your executable path.

Then you call the Keytool command:

keytool -genkey -keystore <whatever you want to call your keystore> 
-alias <whatever alias you wish to use> -keyalg RSA [-keysize <keylength>]

or for a more concrete example,

-genkey -keystore foo.ks -alias bar -keyalg RSA -keysize 2048

You will be prompted for a password; the default for Tomcat is 
"changeit"; you should probably give it this password unless you have a 
reason to do otherwise.

You will be prompted for a "first and last name." DON'T give it that. 
Give it the URL of your website, e.g., "www.foobar.com" so that people 
don't get "certificate is for the wrong domain" warnings in their browsers.

You will be prompted for the particulars of who you are and where you 
are. These are important if you plan on having it signed by a CA, so 
that people don't get "self-signed certificate" warnings in their browsers.

Once you have a keystore, you can hook it to your Tomcat server by 
editing the server.xml file.

--
JHHL

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233609-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 17 20:37:45 2012
Return-Path: <users-return-233609-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 51A0798FF
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 17 Apr 2012 20:37:45 +0000 (UTC)
Received: (qmail 99994 invoked by uid 500); 17 Apr 2012 20:37:42 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 99830 invoked by uid 500); 17 Apr 2012 20:37:42 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 99820 invoked by uid 99); 17 Apr 2012 20:37:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 20:37:42 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [195.130.137.74] (HELO juliette.telenet-ops.be) (195.130.137.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 20:37:34 +0000
Received: from [192.168.1.109] ([84.198.206.133])
	by juliette.telenet-ops.be with bizsmtp
	id z8dB1i0032tD98c068dBBR; Tue, 17 Apr 2012 22:37:11 +0200
Message-ID: <4F8DD476.2090202@kantl.be>
Date: Tue, 17 Apr 2012 22:37:10 +0200
From: "ron.vandenbranden@home" <ron.vandenbranden@kantl.be>
User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
CC: Konstantin Kolinko <knst.kolinko@gmail.com>
Subject: Re: adding a global URI prefix for Tomcat web apps
References: <4F8D6122.40609@kantl.be> <CABzHfV=EJ1D1PjuX+jhag7REN5_7Z8xN20j8hq=1f=S7W63YLA@mail.gmail.com>
In-Reply-To: <CABzHfV=EJ1D1PjuX+jhag7REN5_7Z8xN20j8hq=1f=S7W63YLA@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Konstantin,

Many thanks for your excellent suggestion. Sorry, I forgot to mention 
that I'm running Tomcat-7.0.27, so that should work.

On 17/04/2012 17:27, Konstantin Kolinko wrote:
> I would not comment on the Apache HTTP server configuration. Just on
> the quoted part above. You have not told us what Tomcat version you
> are using, but in current Tomcat 6 and 7 you can add "apps#" prefix to
> the subdirectory and war file names in webapps directory and it will
> add "apps/" to their URL, e.g.:
>
>   mv  webapps/my_app  webapps/apps#my_app
>
> A war file name would be "apps#my_app.war" See "Context" page in
> "Configuration Reference Guide" for more details.
>

Nice! In my tests this works for some web apps, but apparently, some 
(using cocoon-2.1.11) have problems. Any request for 
cococoon-2.1.11-based web apps return errors about files that are not 
found. For example, suppose my app is located at 
F:\tomcat\webapps\apps#my_app, requests for 
http://localhost:8080/apps/my_app/ return errors such as:

     Message: F:\tomcat\webapps\stylesheets\system\exception2html.xslt (The system cannot find the path specified)
     Description: org.apache.cocoon.ProcessingException: Unable to get transformer handler for file:///F:/tomcat/webapps/stylesheets/system/exception2html.xslt at<map:serialize>  - file:///F:/tomcat/webapps/apps#my_app/sitemap.xmap:922:53 at<map:transform>  - file:///F:/tomcat/webapps/apps#my_app/sitemap.xmap:917:79 at<map:generate type="exception">  - file:///F:/tomcat/webapps/apps#my_app/sitemap.xmap:916:51
     Sender: org.apache.cocoon.servlet.CocoonServlet
     Source: Cocoon Servlet
     cause
       java.io.FileNotFoundException: F:\tomcat\webapps\stylesheets\system\exception2html.xslt (The system cannot find the path specified)

Does this imply that this 'hash' prefix is still experimental, depending 
on the web app?

Best regards,

Ron

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233610-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 17 20:49:37 2012
Return-Path: <users-return-233610-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 970EC9E08
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 17 Apr 2012 20:49:37 +0000 (UTC)
Received: (qmail 37353 invoked by uid 500); 17 Apr 2012 20:49:34 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 37163 invoked by uid 500); 17 Apr 2012 20:49:34 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 37154 invoked by uid 99); 17 Apr 2012 20:49:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 20:49:34 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of knst.kolinko@gmail.com designates 209.85.161.173 as permitted sender)
Received: from [209.85.161.173] (HELO mail-gx0-f173.google.com) (209.85.161.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 20:49:28 +0000
Received: by ggnp2 with SMTP id p2so4184329ggn.18
        for <users@tomcat.apache.org>; Tue, 17 Apr 2012 13:49:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=ULC0zzbKHvFnngKkusluCwuhDvjNysFmwNT5M/jkaNk=;
        b=ZMRi4vV5LjrzfQupHGB2EZvsgIEAX0KxcZRalno7lphF0kfbHn8mIEqvg7gHX/AExX
         ujBgfx58iIHJtqxLKGaC+kcoW0w2mOLpsG2YscLcrjhPyiEdB5zRC7PVPNL/rFxFLtU0
         1+UK38OKyIlMJHMGGnOfXtu5lgdjc5lC7/V+8EbLzntD4/c24tDHl7dCMd4ymOgBp8S7
         LqGi+V+BIowiGo2HCbTcTXdwBe+n7PLpsmMOFNsIwC94eUWmZjPbv15drBCzZ0g0FAab
         ntIl/coG+E+U2cJqYTA6TgQ/I5rTjG3C9El5hR+FmzAs1HAqHPZSiqRqq7USatd73t9V
         g+7g==
MIME-Version: 1.0
Received: by 10.236.187.38 with SMTP id x26mr7095170yhm.109.1334695747854;
 Tue, 17 Apr 2012 13:49:07 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Tue, 17 Apr 2012 13:49:07 -0700 (PDT)
In-Reply-To: <4F8DD476.2090202@kantl.be>
References: <4F8D6122.40609@kantl.be>
	<CABzHfV=EJ1D1PjuX+jhag7REN5_7Z8xN20j8hq=1f=S7W63YLA@mail.gmail.com>
	<4F8DD476.2090202@kantl.be>
Date: Wed, 18 Apr 2012 00:49:07 +0400
Message-ID: <CABzHfVkqXnmQJPvkRYKjqmywwKeeRuytvzT66+1SR9mp1W72AA@mail.gmail.com>
Subject: Re: adding a global URI prefix for Tomcat web apps
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

2012/4/18 ron.vandenbranden@home <ron.vandenbranden@kantl.be>:
> Hi Konstantin,
>
> Many thanks for your excellent suggestion. Sorry, I forgot to mention tha=
t
> I'm running Tomcat-7.0.27, so that should work.
>
>
> On 17/04/2012 17:27, Konstantin Kolinko wrote:
>>
>> I would not comment on the Apache HTTP server configuration. Just on
>> the quoted part above. You have not told us what Tomcat version you
>> are using, but in current Tomcat 6 and 7 you can add "apps#" prefix to
>> the subdirectory and war file names in webapps directory and it will
>> add "apps/" to their URL, e.g.:
>>
>> =A0mv =A0webapps/my_app =A0webapps/apps#my_app
>>
>> A war file name would be "apps#my_app.war" See "Context" page in
>> "Configuration Reference Guide" for more details.
>>
>
> Nice! In my tests this works for some web apps, but apparently, some (usi=
ng
> cocoon-2.1.11) have problems. Any request for cococoon-2.1.11-based web a=
pps
> return errors about files that are not found. For example, suppose my app=
 is
> located at F:\tomcat\webapps\apps#my_app, requests for
> http://localhost:8080/apps/my_app/ return errors such as:
>
> =A0 =A0Message: F:\tomcat\webapps\stylesheets\system\exception2html.xslt =
(The
> system cannot find the path specified)
> =A0 =A0Description: org.apache.cocoon.ProcessingException: Unable to get
> transformer handler for
> file:///F:/tomcat/webapps/stylesheets/system/exception2html.xslt
> at<map:serialize> =A0-
> file:///F:/tomcat/webapps/apps#my_app/sitemap.xmap:922:53 at<map:transfor=
m>
> =A0- file:///F:/tomcat/webapps/apps#my_app/sitemap.xmap:917:79 at<map:gen=
erate
> type=3D"exception"> =A0-
> file:///F:/tomcat/webapps/apps#my_app/sitemap.xmap:916:51
> =A0 =A0Sender: org.apache.cocoon.servlet.CocoonServlet
> =A0 =A0Source: Cocoon Servlet
> =A0 =A0cause
> =A0 =A0 =A0java.io.FileNotFoundException:
> F:\tomcat\webapps\stylesheets\system\exception2html.xslt (The system cann=
ot
> find the path specified)
>
> Does this imply that this 'hash' prefix is still experimental, depending =
on
> the web app?


No. It is Cocoon that is broken.

There is File -> URL conversion somewhere that does not encode
characters properly, and '#' should be %-encoded if it is in an URL.

Last time it was discussed on this list was several years ago. Either
it is a rare use case, or it is just already fixed.

http://tomcat.markmail.org/thread/5ixxlkiyfsou63vh
http://tomcat.markmail.org/thread/ygac3etewhtpmf2p
http://tomcat.markmail.org/message/oolap6mmrs22f5wr


Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233611-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 17 21:50:19 2012
Return-Path: <users-return-233611-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 588ED96D3
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 17 Apr 2012 21:50:19 +0000 (UTC)
Received: (qmail 15210 invoked by uid 500); 17 Apr 2012 21:50:16 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 15158 invoked by uid 500); 17 Apr 2012 21:50:15 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 15148 invoked by uid 99); 17 Apr 2012 21:50:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 21:50:15 +0000
X-ASF-Spam-Status: No, hits=2.9 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [195.130.132.50] (HELO jacques.telenet-ops.be) (195.130.132.50)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 21:50:07 +0000
Received: from [192.168.1.109] ([84.198.206.133])
	by jacques.telenet-ops.be with bizsmtp
	id z9pm1i00C2tD98c0J9pmF9; Tue, 17 Apr 2012 23:49:47 +0200
Message-ID: <4F8DE579.4090700@kantl.be>
Date: Tue, 17 Apr 2012 23:49:45 +0200
From: "ron.vandenbranden@home" <ron.vandenbranden@kantl.be>
User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
CC: Konstantin Kolinko <knst.kolinko@gmail.com>
Subject: Re: adding a global URI prefix for Tomcat web apps
References: <4F8D6122.40609@kantl.be> <CABzHfV=EJ1D1PjuX+jhag7REN5_7Z8xN20j8hq=1f=S7W63YLA@mail.gmail.com> <4F8DD476.2090202@kantl.be> <CABzHfVkqXnmQJPvkRYKjqmywwKeeRuytvzT66+1SR9mp1W72AA@mail.gmail.com>
In-Reply-To: <CABzHfVkqXnmQJPvkRYKjqmywwKeeRuytvzT66+1SR9mp1W72AA@mail.gmail.com>
Content-Type: multipart/alternative;
 boundary="------------090009050403050408040804"

--------------090009050403050408040804
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit

Hi,

On 17/04/2012 22:49, Konstantin Kolinko wrote:
> No. It is Cocoon that is broken.
>
> There is File ->  URL conversion somewhere that does not encode
> characters properly, and '#' should be %-encoded if it is in an URL.
>
> Last time it was discussed on this list was several years ago. Either
> it is a rare use case, or it is just already fixed.
>
> http://tomcat.markmail.org/thread/5ixxlkiyfsou63vh
> http://tomcat.markmail.org/thread/ygac3etewhtpmf2p
> http://tomcat.markmail.org/message/oolap6mmrs22f5wr
>
>

Ouch, that's really bad. Apparently it isn't fixed yet :-(. Thanks for 
the pointers, anyway.

I thought of a last option:
     -leave the Tomcat webapps as is (without an 'apps#' prefix in the 
folder names)
     -configure Apache to proxy all requests

     ProxyPreserveHost    on
     ProxyPass/     http://localhost:8082/
      ProxyPassReverse  /     http://mydomain/

     -add proxy exceptions for all other paths:

     ProxyPass /noproxy	!

I haven't tested this, but I guess this won't solve the problem with the 
'/apps/' prefix (which is necessary for our URL scheme design).

So, it seems (due to the Cocoon bug) the approach I described in my 
original message is the only one that will work consistently:
     -define a prefix for proxied requests in Apache
     -define all Tomcat apps with that prefix literally in distinct 
<Context> containers

Kind regards,

Ron

-- 
Ron Van den Branden
Wetenschappelijk attach / Senior Researcher
Reviews Editor LLC. The Journal of Digital Scholarship in the Humanities

Centrum voor Teksteditie en Bronnenstudie - CTB (KANTL)
Centre for Scholarly Editing and Document Studies
Koninklijke Academie voor Nederlandse Taal- en Letterkunde
Royal Academy of Dutch Language and Literature
Koningstraat 18 / b-9000 Gent / Belgium
tel: +32 9 265 93 51 / fax: +32 9 265 93 49
E-mail : ron.vandenbranden@kantl.be
http://www.kantl.be/ctb


--------------090009050403050408040804--

From users-return-233612-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 17 22:04:55 2012
Return-Path: <users-return-233612-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E5A279CA2
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 17 Apr 2012 22:04:54 +0000 (UTC)
Received: (qmail 60360 invoked by uid 500); 17 Apr 2012 22:04:51 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 60307 invoked by uid 500); 17 Apr 2012 22:04:51 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 60263 invoked by uid 99); 17 Apr 2012 22:04:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 22:04:50 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of knst.kolinko@gmail.com designates 209.85.213.173 as permitted sender)
Received: from [209.85.213.173] (HELO mail-yx0-f173.google.com) (209.85.213.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 22:04:43 +0000
Received: by yenr5 with SMTP id r5so4228650yen.18
        for <users@tomcat.apache.org>; Tue, 17 Apr 2012 15:04:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=tvqscO6Tmy+MRHJy+iUfDCEZ2/Gg+o4PyeAuYBYpffI=;
        b=mVrfahxcx/2ltdWFd7gMdGuZz3eG5vrHDIdTNFZt6dEtezIddw9CxI6VN0qdPTWP0O
         JFR+5knB45Ef+GJTkdW2b6HLPTANHX2pNRydcE6V8eY22GkW3cDhcgwHPrXdWXNUjFUs
         o4ZVItQIQkaMEL360PhVn1PYLSAz3jwI87+w8HwSYV3fWYrk8pSjQ7WzwLNL9qE27OfW
         H3Idl1DxLP/eeTcqnMekW5UUZJvkDn1x78ZH8ojJKWTqhLxsWvQGJ1aOGs8KESSnNsu5
         KxF4BMB9gteILdeBtPMYreFcvvvQJe9hwDEXaIbk20iVT7s/ECoqdSiRX3ab6TQNs7Ra
         J4PA==
MIME-Version: 1.0
Received: by 10.236.114.200 with SMTP id c48mr17263250yhh.23.1334700262301;
 Tue, 17 Apr 2012 15:04:22 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Tue, 17 Apr 2012 15:04:22 -0700 (PDT)
In-Reply-To: <4F8D6122.40609@kantl.be>
References: <4F8D6122.40609@kantl.be>
Date: Wed, 18 Apr 2012 02:04:22 +0400
Message-ID: <CABzHfV=GGqUVxkdeH5YtVp+RqewsQB+2X_fm38gp=aoZ1thD7g@mail.gmail.com>
Subject: Re: adding a global URI prefix for Tomcat web apps
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

2012/4/17 ron.vandenbranden@home <ron.vandenbranden@kantl.be>:
> =A0 =A02. change ${CATALINA.HOME}/conf/server.xml as follows:
>
> =A0 =A0<Host name=3D"localhost" =A0appBase=3D"webapps" unpackWARs=3D"true=
"
> autoDeploy=3D"false" deployOnStartup=3D"false">
> =A0 =A0 =A0<Context path=3D"/apps/my_app" docBase=3D"/my_app/" reloadable=
=3D"true"/>
> =A0 =A0</Host>
>

More comment on the above, as you have already read the docs.

Putting <Context> element into server.xml is considered a bad practice.

Instead of that you'd put it into separate XML file,
conf/Catalina/localhost/apps#my_app.xml
as
<Context docBase=3D"/docbase/of/my_app/" />

That "reloadable=3D"true"" is not really needed.

Your docbase can be anywhere (outside of webapps directory) and need
not have the '#' sign in it.

The working folder for your app will still be
${catalina.base}/Catalina/localhost/apps#myapp with a hash char in it,
but I think that will work with Cocoon.


BTW, I wonder how Cocoon behaves if your application is in a war file
and you run with <Host unpackWARs=3D"false" />

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233613-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 17 22:48:43 2012
Return-Path: <users-return-233613-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 19B829941
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 17 Apr 2012 22:48:43 +0000 (UTC)
Received: (qmail 87687 invoked by uid 500); 17 Apr 2012 22:48:40 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 87477 invoked by uid 500); 17 Apr 2012 22:48:39 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 87432 invoked by uid 99); 17 Apr 2012 22:48:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 22:48:38 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [195.130.132.50] (HELO jacques.telenet-ops.be) (195.130.132.50)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 22:48:29 +0000
Received: from [192.168.1.109] ([84.198.206.133])
	by jacques.telenet-ops.be with bizsmtp
	id zAo61i00D2tD98c0JAo7U6; Wed, 18 Apr 2012 00:48:09 +0200
Message-ID: <4F8DF325.8010604@kantl.be>
Date: Wed, 18 Apr 2012 00:48:05 +0200
From: "ron.vandenbranden@home" <ron.vandenbranden@kantl.be>
User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
CC: Konstantin Kolinko <knst.kolinko@gmail.com>
Subject: Re: adding a global URI prefix for Tomcat web apps
References: <4F8D6122.40609@kantl.be> <CABzHfV=GGqUVxkdeH5YtVp+RqewsQB+2X_fm38gp=aoZ1thD7g@mail.gmail.com>
In-Reply-To: <CABzHfV=GGqUVxkdeH5YtVp+RqewsQB+2X_fm38gp=aoZ1thD7g@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi,

Sorry if I'm being a bit dense, but could I check if I'm understanding 
correctly? I can't get it working with your suggestions.

On 18/04/2012 0:04, Konstantin Kolinko wrote:
> 2012/4/17 ron.vandenbranden@home<ron.vandenbranden@kantl.be>:
>>     2. change ${CATALINA.HOME}/conf/server.xml as follows:
>>
>>     <Host name="localhost"  appBase="webapps" unpackWARs="true"
>> autoDeploy="false" deployOnStartup="false">
>>       <Context path="/apps/my_app" docBase="/my_app/" reloadable="true"/>
>>     </Host>
>>
> More comment on the above, as you have already read the docs.
>
> Putting<Context>  element into server.xml is considered a bad practice.
>
> Instead of that you'd put it into separate XML file,
> conf/Catalina/localhost/apps#my_app.xml
> as
> <Context docBase="/docbase/of/my_app/" />
>
> That "reloadable="true"" is not really needed.
>
> Your docbase can be anywhere (outside of webapps directory) and need
> not have the '#' sign in it.
>
> The working folder for your app will still be
> ${catalina.base}/Catalina/localhost/apps#myapp with a hash char in it,
> but I think that will work with Cocoon.

I have my webapps located at F:\tomcatApps (so outside of the catalina 
tree), where 'my_app' lives in a folder named 'apps#my_app'. So I'm 
specifying this in ${catalina.base}/conf/server.xml:

    <Host name="localhost" appBase="F:/tomcatApps" unpackWARs="true" autoDeploy="false" deployOnStartup="false">

...without any further <Context> elements.

Next, I create following file at 
${catalina.base}/conf/Catalina/localhost/apps#my_app:

   <Context docBase="/my_app/" />

(as I understand from the docs that the @docbase value must be relative 
to the Host's @appBase).

When I start Tomcat with these settings, no webapps are deployed at all. 
I tried toggling the values for @autoDeploy and @deployOnStartup, and 
only the latter seems to make any webapps to be deployed. Yet, the 
Tomcat console window then logs following message:

   INFO: Deploying configuration descriptor F:\tomcat-7.0.27\conf\Catalina\localhost\apps#my_app
   18-apr-2012 0:37:56  org.apache.catalina.startup.HostConfig deployDescriptor
   WARNING: A docBase F:\tomcatApps\my_app inside the Host appBase has been specified, and will be ignored

Eventually, the 'my_app' app is deployed, but with the same result: 
Cocoon chokes on the hash in the folder name.

> BTW, I wonder how Cocoon behaves if your application is in a war file
> and you run with<Host unpackWARs="false" />
>

Hmm, I could give that a try (tomorrow, perhaps, off to bed now), though 
I recall some issues with Cocoon-based web apps that needed a physical 
directory structure.

Again, many thanks for your help!

Kind regards,

Ron

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233614-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 17 22:57:27 2012
Return-Path: <users-return-233614-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 994A29B15
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 17 Apr 2012 22:57:27 +0000 (UTC)
Received: (qmail 6429 invoked by uid 500); 17 Apr 2012 22:57:24 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 6378 invoked by uid 500); 17 Apr 2012 22:57:24 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 6365 invoked by uid 99); 17 Apr 2012 22:57:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 22:57:24 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [216.82.249.147] (HELO mail29.messagelabs.com) (216.82.249.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 22:57:13 +0000
X-Env-Sender: Chuck.Caldarale@unisys.com
X-Msg-Ref: server-15.tower-29.messagelabs.com!1334703408!21443421!6
X-Originating-IP: [192.61.61.105]
X-StarScan-Version: 6.5.5; banners=-,-,-
X-VirusChecked: Checked
Received: (qmail 16154 invoked from network); 17 Apr 2012 22:56:51 -0000
Received: from naedge.unisys.com (HELO USEA-NAEDGE2.unisys.com) (192.61.61.105)
  by server-15.tower-29.messagelabs.com with RC4-SHA encrypted SMTP; 17 Apr 2012 22:56:51 -0000
Received: from usea-nahubcas1.na.uis.unisys.com (129.224.76.114) by
 USEA-NAEDGE2.unisys.com (192.61.61.105) with Microsoft SMTP Server (TLS) id
 8.3.83.0; Tue, 17 Apr 2012 17:56:12 -0500
Received: from USEA-EXCH8.na.uis.unisys.com ([129.224.76.41]) by
 usea-nahubcas1.na.uis.unisys.com ([129.224.76.114]) with mapi; Tue, 17 Apr
 2012 17:56:12 -0500
From: "Caldarale, Charles R" <Chuck.Caldarale@unisys.com>
To: Tomcat Users List <users@tomcat.apache.org>
Date: Tue, 17 Apr 2012 17:56:10 -0500
Subject: RE: adding a global URI prefix for Tomcat web apps
Thread-Topic: adding a global URI prefix for Tomcat web apps
Thread-Index: Ac0c7EWqG9jtcOx7Sti5pGQU/boXVgAACkNg
Message-ID: <99C8B2929B39C24493377AC7A121E21FB0172E09CD@USEA-EXCH8.na.uis.unisys.com>
References: <4F8D6122.40609@kantl.be>
 <CABzHfV=GGqUVxkdeH5YtVp+RqewsQB+2X_fm38gp=aoZ1thD7g@mail.gmail.com>
 <4F8DF325.8010604@kantl.be>
In-Reply-To: <4F8DF325.8010604@kantl.be>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

> From: ron.vandenbranden@home [mailto:ron.vandenbranden@kantl.be]=20
> Subject: Re: adding a global URI prefix for Tomcat web apps

> I have my webapps located at F:\tomcatApps (so outside of the catalina=20
> tree), where 'my_app' lives in a folder named 'apps#my_app'. So I'm=20
> specifying this in ${catalina.base}/conf/server.xml:

> <Host name=3D"localhost" appBase=3D"F:/tomcatApps" unpackWARs=3D"true"=20
> autoDeploy=3D"false" deployOnStartup=3D"false">

But now they're _inside_ Tomcat's space, since you specified an appBase poi=
nting to them.  Put appBase back to what it was.  Note that Konstantin did =
not tell you to change that.

> Next, I create following file at=20
> ${catalina.base}/conf/Catalina/localhost/apps#my_app:
>    <Context docBase=3D"/my_app/" />
> (as I understand from the docs that the @docbase value must be relative=20
> to the Host's @appBase).

Not when you specify a leading slash.  However, you need to place these app=
s _outside_ of the <Host> appBase, not inside it, and you should specify th=
e complete (absolute) path to the webapp.  (The webapp must be outside of a=
ppBase in order to make the # trick work and not confuse Cocoon.)

 - Chuck


THIS COMMUNICATION MAY CONTAIN CONFIDENTIAL AND/OR OTHERWISE PROPRIETARY MA=
TERIAL and is thus for use only by the intended recipient. If you received =
this in error, please contact the sender and delete the e-mail and its atta=
chments from all computers.


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233615-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 17 23:02:29 2012
Return-Path: <users-return-233615-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8EADA9C1B
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 17 Apr 2012 23:02:29 +0000 (UTC)
Received: (qmail 20345 invoked by uid 500); 17 Apr 2012 23:02:26 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 20196 invoked by uid 500); 17 Apr 2012 23:02:26 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 20187 invoked by uid 99); 17 Apr 2012 23:02:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 23:02:26 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of knst.kolinko@gmail.com designates 209.85.160.173 as permitted sender)
Received: from [209.85.160.173] (HELO mail-gy0-f173.google.com) (209.85.160.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 Apr 2012 23:02:20 +0000
Received: by ghrr14 with SMTP id r14so4240296ghr.18
        for <users@tomcat.apache.org>; Tue, 17 Apr 2012 16:01:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=EltCfuGvkWyQ2N8eSYA5BEEszjrXn89E29ZWoRLQOHo=;
        b=DibIXHcQMASoI3+GVtjc+Jbcb8Hb98mgkMPjqSa/EbXjjQbv5BviIJfVdVY/bxruXe
         MZ3sGwTRc0mD6qj4YK+gu6orDVdE8Sr1+gWXzvBxgpmE766WgE+jFldsCjK/NDbwbRVd
         /ho4yHljXi+Tl2agBn5f2WZSCI/5jMv5qXHuf6mgEJCm3osgNB4P7fipd+FYV+RkKPtX
         CA82sIfYciFTCmDlPeK9yYbsmB7LTMhNM+ADhA9qxhuTJvHLv+nQcr2AD/ai//M6ZC7f
         uxPuhOqFT3vRUdQ8yiKaiEVG5heh9E2qZYXRzG0FmOK+NNTsnPXEsixLGTuJHl2TzQ0V
         aBeQ==
MIME-Version: 1.0
Received: by 10.236.187.38 with SMTP id x26mr7450478yhm.109.1334703719788;
 Tue, 17 Apr 2012 16:01:59 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Tue, 17 Apr 2012 16:01:59 -0700 (PDT)
In-Reply-To: <4F8DF325.8010604@kantl.be>
References: <4F8D6122.40609@kantl.be>
	<CABzHfV=GGqUVxkdeH5YtVp+RqewsQB+2X_fm38gp=aoZ1thD7g@mail.gmail.com>
	<4F8DF325.8010604@kantl.be>
Date: Wed, 18 Apr 2012 03:01:59 +0400
Message-ID: <CABzHfVki4xq3Pm+Aw_YDhwO5nS8KNXTJ-Z5ujByvNkGxxCvsqA@mail.gmail.com>
Subject: Re: adding a global URI prefix for Tomcat web apps
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

2012/4/18 ron.vandenbranden@home <ron.vandenbranden@kantl.be>:
> Hi,
>
> Sorry if I'm being a bit dense, but could I check if I'm understanding
> correctly? I can't get it working with your suggestions.
>
>
> On 18/04/2012 0:04, Konstantin Kolinko wrote:
>>
>> 2012/4/17 ron.vandenbranden@home<ron.vandenbranden@kantl.be>:
>>>
>>> =A0 =A02. change ${CATALINA.HOME}/conf/server.xml as follows:
>>>
>>> =A0 =A0<Host name=3D"localhost" =A0appBase=3D"webapps" unpackWARs=3D"tr=
ue"
>>> autoDeploy=3D"false" deployOnStartup=3D"false">
>>> =A0 =A0 =A0<Context path=3D"/apps/my_app" docBase=3D"/my_app/" reloadab=
le=3D"true"/>
>>> =A0 =A0</Host>
>>>
>> More comment on the above, as you have already read the docs.
>>
>> Putting<Context> =A0element into server.xml is considered a bad practice=
.
>>
>> Instead of that you'd put it into separate XML file,
>> conf/Catalina/localhost/apps#my_app.xml
>> as
>> <Context docBase=3D"/docbase/of/my_app/" />
>>
>> That "reloadable=3D"true"" is not really needed.
>>
>> Your docbase can be anywhere (outside of webapps directory) and need
>> not have the '#' sign in it.
>>
>> The working folder for your app will still be
>> ${catalina.base}/Catalina/localhost/apps#myapp with a hash char in it,
>> but I think that will work with Cocoon.
>
>
> I have my webapps located at F:\tomcatApps (so outside of the catalina
> tree), where 'my_app' lives in a folder named 'apps#my_app'.

1. Rename the folder to "my_app".
So it is F:\tomcatApps\my_app

> So I'm
> specifying this in ${catalina.base}/conf/server.xml:
>
> =A0 <Host name=3D"localhost" appBase=3D"F:/tomcatApps" unpackWARs=3D"true=
"
> autoDeploy=3D"false" deployOnStartup=3D"false">
>

2. It should be appBase=3D"webapps", like Chuck noted!

3. deployOnStartup=3D"true", like you already figured it.


> ...without any further <Context> elements.
>
> Next, I create following file at
> ${catalina.base}/conf/Catalina/localhost/apps#my_app:

Correct place, the name:
apps#my_app.xml

(you omitted ".xml" extension in your mail, but it seems it was just a typo=
)

>
> =A0<Context docBase=3D"/my_app/" />
>

<Context docBase=3D"F:\tomcatApps\my_app" />

> (as I understand from the docs that the @docbase value must be relative t=
o
> the Host's @appBase).
>
> When I start Tomcat with these settings, no webapps are deployed at all. =
I
> tried toggling the values for @autoDeploy and @deployOnStartup, and only =
the
> latter seems to make any webapps to be deployed. Yet, the Tomcat console
> window then logs following message:
>
> =A0INFO: Deploying configuration descriptor
> F:\tomcat-7.0.27\conf\Catalina\localhost\apps#my_app
> =A018-apr-2012 0:37:56 =A0org.apache.catalina.startup.HostConfig
> deployDescriptor
> =A0WARNING: A docBase F:\tomcatApps\my_app inside the Host appBase has be=
en
> specified, and will be ignored
>

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233616-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 18 01:47:32 2012
Return-Path: <users-return-233616-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9B5A59966
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 18 Apr 2012 01:47:32 +0000 (UTC)
Received: (qmail 87257 invoked by uid 500); 18 Apr 2012 01:47:29 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 87156 invoked by uid 500); 18 Apr 2012 01:47:28 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 87146 invoked by uid 99); 18 Apr 2012 01:47:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 01:47:28 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [76.96.62.80] (HELO qmta08.westchester.pa.mail.comcast.net) (76.96.62.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 01:47:22 +0000
Received: from omta02.westchester.pa.mail.comcast.net ([76.96.62.19])
	by qmta08.westchester.pa.mail.comcast.net with comcast
	id zDYQ1i0040QuhwU58Dn1MW; Wed, 18 Apr 2012 01:47:01 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta02.westchester.pa.mail.comcast.net with comcast
	id zDn01i01538FjT13NDn1Un; Wed, 18 Apr 2012 01:47:01 +0000
Message-ID: <4F8E1D13.1020406@christopherschultz.net>
Date: Tue, 17 Apr 2012 21:46:59 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: In webapp, sending multipart email with Javamail : noname attachment
 instead of message
References: <CAOHnQjpKCkJGNXGphTrVG4qRLpZK-6baivLi5oAD_dHtgtCQHw@mail.gmail.com>
In-Reply-To: <CAOHnQjpKCkJGNXGphTrVG4qRLpZK-6baivLi5oAD_dHtgtCQHw@mail.gmail.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Jacques,

On 4/17/12 12:45 PM, Jacques Desodt wrote:
> I try to send a Multipart email in a simple java method, using
> Javamail. When i use the method in a local java app, everything is
> fine. When i use the same method in a webapp hosted by Tomcat, i
> got no message, but a file "noname" in attachment.

Your code looks reasonable. I wonder if you are missing some system
property when running under Tomcat, since you use the system
properties as a basis for your JavaMail session setup.

Try using an empty Properties object instead of taking
System.getProperties() and mutating that. You might find that there is
some property available in your standalone environment that you are
missing in the Tomcat one.

> And here are the results (i use gmail) :
> 
> Images intgres 1

(I'm not sure what that means... if you attached something to your
email, it was stripped by the mailing list).

> The first (and wrong) email came from the Tomcat server. It has no
> message, and an attachment with "noname" name. The other email is
> good and came from my java app.

What are the differences when you look at the actual source code of
the message? You can learn a lot from looking at the raw MIME message.

BTW, if you intend to move from a simple multipart text message as you
have above to something more complicated (such as text + HTML +
attachments) be aware that the JavaMail API is a complete main in the
neck to use. I would highly recommend using a wrapper API such as
commons-email or my own emailer wrapper you can find at
http://christopherschultz.net/projects/java/

I happen to like mine better ;)

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+OHRMACgkQ9CaO5/Lv0PDk6wCgtsLID0HPf6nNH2bFc/ThfrTl
J58AnjuTcjIFhj1QOgESVmgMFK5jWOBC
=QXQU
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233617-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 18 02:00:17 2012
Return-Path: <users-return-233617-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3EADE9B52
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 18 Apr 2012 02:00:17 +0000 (UTC)
Received: (qmail 12379 invoked by uid 500); 18 Apr 2012 02:00:13 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 12326 invoked by uid 500); 18 Apr 2012 02:00:13 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 12317 invoked by uid 99); 18 Apr 2012 02:00:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 02:00:13 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of fairouz.fakhfakh@gmail.com designates 209.85.214.45 as permitted sender)
Received: from [209.85.214.45] (HELO mail-bk0-f45.google.com) (209.85.214.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 02:00:07 +0000
Received: by bkcjg9 with SMTP id jg9so6737539bkc.18
        for <users@tomcat.apache.org>; Tue, 17 Apr 2012 18:59:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=+pPVckkiT6ERMd7v4GtEvOvGcVGD7g+72XykkSSVw8c=;
        b=cl6S9c+kFm0sCwcgdySaYKc6i2LAIVX4uAy+1hjro7lPhXxE+JVDnH6iCs30T41PQC
         aba4d2vZrY9Aq5Rvq0oY//dPeb7O2ZnrBWqghb88Uxk3t2OwM//k1p3Wsvc/3aAoc1mR
         aOml8gWxfKNPVhaqkKhqBRYJhhwSZfWD+FqAThz1sVqjkCSuVh02d1bOox6tB4LZC0Cx
         KLIhaMAe2e4Rlw3/6N8VpN+TaFK7c/N1APTuSbdsxmWaCZNKBRjLpnLRYuKbOpTQrQGr
         0OnbMlXqPi3Jfx+rABp4UJom/25g1vPCubM5cIn4XN7lEfA8f1oVIUp4J5m5cnMK3J1H
         jrfw==
MIME-Version: 1.0
Received: by 10.204.133.205 with SMTP id g13mr122563bkt.94.1334714385864; Tue,
 17 Apr 2012 18:59:45 -0700 (PDT)
Received: by 10.205.127.14 with HTTP; Tue, 17 Apr 2012 18:59:45 -0700 (PDT)
Date: Wed, 18 Apr 2012 02:59:45 +0100
Message-ID: <CANhTVFMrPW_MfGYB+GAAscbCSMm1-qd+DL9VptJPNtrhACQvdg@mail.gmail.com>
Subject: Problem starting tomcat
From: Fairouz Fakhfakh <fairouz.fakhfakh@gmail.com>
To: users@tomcat.apache.org
Content-Type: multipart/alternative; boundary=000e0cd73406d89a0604bdea6803
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd73406d89a0604bdea6803
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hello,
I have a problem when I start tomcat by cliking on "tomcat5.exe" located
in Tomcat 5.5\bin.
I have the following message:

GRAVE: Erreur lors du d=DAploiement du r=DApertoire juddi de l'application =
web

java.lang.NoClassDefFoundError: *org/apache/axis/transport/http/AxisServlet=
*

        at java.lang.ClassLoader.defineClass1(Native Method)

        at java.lang.ClassLoader.defineClass(Unknown Source)

        at java.security.SecureClassLoader.defineClass(Unknown Source)

        at java.net.URLClassLoader.defineClass(Unknown Source)

        at java.net.URLClassLoader.access$000(Unknown Source)

        at java.net.URLClassLoader$1.run(Unknown Source)

        at java.security.AccessController.doPrivileged(Native Method)

        at java.net.URLClassLoader.findClass(Unknown Source)

        at java.lang.ClassLoader.loadClass(Unknown Source)

        at java.lang.ClassLoader.loadClass(Unknown Source)

        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)

        at java.lang.ClassLoader.loadClass(Unknown Source)

        at
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoa

der.java:1247)

        at
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoa

der.java:1181)

        at
org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.

java:1027)

        at
org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:92

5)

        at
org.apache.catalina.core.StandardContext.loadOnStartup(StandardContex

t.java:3857)

        at
org.apache.catalina.core.StandardContext.start(StandardContext.java:4

118)

        at
org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase

.java:759)

        at
org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:73

9)

        at
org.apache.catalina.core.StandardHost.addChild(StandardHost.java:524)



        at
org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.jav

a:894)

        at
org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.j

ava:857)

        at
org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:475

)

        at
org.apache.catalina.startup.HostConfig.start(HostConfig.java:1102)

        at
org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java

:311)

        at
org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(Lifecycl

eSupport.java:119)

        at
org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1020)



        at
org.apache.catalina.core.StandardHost.start(StandardHost.java:718)

        at
org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1012)



        at
org.apache.catalina.core.StandardEngine.start(StandardEngine.java:442

)

        at
org.apache.catalina.core.StandardService.start(StandardService.java:4

50)

        at
org.apache.catalina.core.StandardServer.start(StandardServer.java:683

)

        at org.apache.catalina.startup.Catalina.start(Catalina.java:537)

        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)

        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)

        at java.lang.reflect.Method.invoke(Unknown Source)

        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:271)

        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:409)

18 avr. 2012 02:51:01 org.apache.coyote.http11.Http11Protocol start

INFO: D=DAmarrage de Coyote HTTP/1.1 sur http-8083

18 avr. 2012 02:51:01 org.apache.jk.server.JkMain start

INFO: Jk running ID=3D0 time=3D0/10  config=3Dnull

18 avr. 2012 02:51:01 org.apache.catalina.startup.Catalina start

INFO: Server startup in 2990 ms


I think that the problem from axis by I didn't kbow how to resolve it.


Can someone help me; please?

Best regard,

Fairouz

--000e0cd73406d89a0604bdea6803--

From users-return-233618-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 18 05:17:31 2012
Return-Path: <users-return-233618-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6506C9666
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 18 Apr 2012 05:17:31 +0000 (UTC)
Received: (qmail 50490 invoked by uid 500); 18 Apr 2012 05:17:27 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 50359 invoked by uid 500); 18 Apr 2012 05:17:26 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 50324 invoked by uid 99); 18 Apr 2012 05:17:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 05:17:24 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jatinpr@farabipc.com designates 212.76.68.94 as permitted sender)
Received: from [212.76.68.94] (HELO corp4.sahara.com.sa) (212.76.68.94)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 05:17:17 +0000
Received: from farabipc.com (unverified [212.76.83.72]) by corp4.sahara.com.sa
  (Vircom SMTPRS 5.1.1024.13396) with ESMTP id <C0039652361@corp4.sahara.com.sa> for <users@tomcat.apache.org>;
  Wed, 18 Apr 2012 08:16:47 +0300
X-Modus-BlackList: 212.76.83.72=OK;jatinpr@farabipc.com=OK
X-Modus-Trusted: 212.76.83.72=YES
X-Modus-Audit: FALSE;0;0;0
Received: from ([192.168.144.110])
	by ironmail2.farabipc.com with ESMTP  id H041121031.62748;
	Wed, 18 Apr 2012 08:28:28 +0300
Received: from FPCJUBEXMB02.farabipc.com ([169.254.2.36]) by
 FPCJUBEXHC02.farabipc.com ([::1]) with mapi id 14.01.0218.012; Wed, 18 Apr
 2012 08:16:11 +0300
From: Jatin Parikh <jatinpr@farabipc.com>
To: Tomcat Users List <users@tomcat.apache.org>,
	"victoria.kio.2011@my.bristol.ac.uk" <victoria.kio.2011@my.bristol.ac.uk>
Subject: RE: Generating a Keystore
Thread-Topic: Generating a Keystore
Thread-Index: AQHNHNb74Hqv329JikCQzcN3uCbwFZagClrg
Date: Wed, 18 Apr 2012 05:16:10 +0000
Message-ID: <50A336E16B0726468EA4E627E5785172500CD8B6@FPCJUBEXMB02.farabipc.com>
References: <CADnZG66WorN4wYg9sC7wf=FOcwUdF19docRuAnKh+h0qxKzbUg@mail.gmail.com>
In-Reply-To: <CADnZG66WorN4wYg9sC7wf=FOcwUdF19docRuAnKh+h0qxKzbUg@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-cr-hashedpuzzle: AdC9 AnSN CIqm GIdZ LXBO MLPJ Naoq RRzq SACp SdbO TA+T
 TC49 WqGH Ws+j YUfg
 Zinz;2;dQBzAGUAcgBzAEAAdABvAG0AYwBhAHQALgBhAHAAYQBjAGgAZQAuAG8AcgBnADsAdgBpAGMAdABvAHIAaQBhAC4AawBpAG8ALgAyADAAMQAxAEAAbQB5AC4AYgByAGkAcwB0AG8AbAAuAGEAYwAuAHUAawA=;Sosha1_v1;7;{F82E99B5-0762-4D42-AB12-7A149AFDBD25};agBhAHQAaQBuAHAAcgBAAGYAYQByAGEAYgBpAHAAYwAuAGMAbwBtAA==;Wed,
 18 Apr 2012 05:16:02
 GMT;UgBFADoAIABHAGUAbgBlAHIAYQB0AGkAbgBnACAAYQAgAEsAZQB5AHMAdABvAHIAZQA=
x-cr-puzzleid: {F82E99B5-0762-4D42-AB12-7A149AFDBD25}
x-originating-ip: [192.168.151.31]
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

Hi Victoria,

Change the path at the command line till it reach to the folder bin, after =
follow the instruction to generate the keystore.

Like c:\program files\java\.........\bin

Thanks & Best Regards,
Jatin Parikh
Sr. Chemist

-----Original Message-----
From: Victoria Johnson - Kio [mailto:victoria.kio.2011@my.bristol.ac.uk]
Sent: Tuesday, April 17, 2012 11:17 PM
To: users@tomcat.apache.org
Subject: Generating a Keystore

Hello,

I am having problems generating a keystore, this is my first time
configuring a server, let alone Tomcat.

The text on Apache is really confusing me about setting up SSL on Tomcat,
what do I do with this command

%JAVA_HOME%\bin\keytool -genkey -alias tomcat -keyalg RSA

Please advise.

Thanks.


--
Victoria Captain Johnson-Kio
BS81EA
+44(0)7936297429
Here's my professional profile
<http://uk.linkedin.com/pub/victoria-captain-johnson-kio/19/9a5/70%20>on
LinkedIn
Personal Impact <http://twitter.com/#%21/VictoriaKio> on Twitter, and some
fun <http://www.facebook.com/kio.victoria> things I do at facebook
This e-mail and any attachments are for authorized use by the intended reci=
pient(s) only. They may contain proprietary material or confidential inform=
ation and/or be subject to legal privilege. They should not be copied, disc=
losed to, or used by any other party. If you have reason to believe that yo=
u are not one of the intended recipients of this e-mail, please notify the =
sender immediately by reply e-mail and immediately delete this e-mail and a=
ny of its attachments. Thank you.

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233619-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 18 07:29:19 2012
Return-Path: <users-return-233619-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 66514999C
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 18 Apr 2012 07:29:19 +0000 (UTC)
Received: (qmail 65416 invoked by uid 500); 18 Apr 2012 07:29:16 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 65111 invoked by uid 500); 18 Apr 2012 07:29:10 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 65070 invoked by uid 99); 18 Apr 2012 07:29:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 07:29:08 +0000
X-ASF-Spam-Status: No, hits=-4.3 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [192.35.17.14] (HELO david.siemens.de) (192.35.17.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 07:29:00 +0000
Received: from mail3.siemens.de (localhost [127.0.0.1])
	by david.siemens.de (8.13.6/8.13.6) with ESMTP id q3I7SdcN008735
	for <users@tomcat.apache.org>; Wed, 18 Apr 2012 09:28:39 +0200
Received: from DEMCHP99ET0MSX.ww902.siemens.net (demchp99et0msx.ww902.siemens.net [139.25.131.181])
	by mail3.siemens.de (8.13.6/8.13.6) with ESMTP id q3I7SdMo009948
	(version=TLSv1/SSLv3 cipher=RC4-MD5 bits=128 verify=FAIL)
	for <users@tomcat.apache.org>; Wed, 18 Apr 2012 09:28:39 +0200
Received: from DEMCHP99E84MSX.ww902.siemens.net ([169.254.1.87]) by
 DEMCHP99ET0MSX.ww902.siemens.net ([139.25.131.181]) with mapi; Wed, 18 Apr
 2012 09:28:39 +0200
From: "Osipov, Michael" <michael.osipov@siemens.com>
To: Tomcat Users List <users@tomcat.apache.org>
Date: Wed, 18 Apr 2012 09:28:38 +0200
Subject: RE: Availability of a resource in a realm
Thread-Topic: Availability of a resource in a realm
Thread-Index: Ac0cr3QG6VZ1EeLRTlulU+kY7L115QAhTVVg
Message-ID: <6368FCCCD803D64BB0931D7F5F0A3DD502278A0ABD@DEMCHP99E84MSX.ww902.siemens.net>
References: <6368FCCCD803D64BB0931D7F5F0A3DD502278A0475@DEMCHP99E84MSX.ww902.siemens.net>
 <CABzHfVnO2xiA0GphqSZG2VzXUCjumpU8Mfx-gwbd_dEQ+HXWEA@mail.gmail.com>
In-Reply-To: <CABzHfVnO2xiA0GphqSZG2VzXUCjumpU8Mfx-gwbd_dEQ+HXWEA@mail.gmail.com>
Accept-Language: de-DE
Content-Language: de-DE
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: de-DE
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

Konstantin Kolinko wrote:
> 2012/4/17 Osipov, Michael <michael.osipov@siemens.com>:
>> Hi folks,
>>=20
>> I have a resource declared in my context.xml (not a resource link).
>> I want to retrieve that resource as soon as possible in my realm. I
>> tried start() and init() but it seems like that at this time the
>> InitialContext is not available. So at what time can I expect the
>> context being "complete"?   =20
>>=20
>> I am on Tomcat 6.0.35
>>=20
>=20
> Look at DataSourceRealm for an example.
>=20
> IIRC, what is seen as InitialContext depends on the value of
> Thread.getContextClassLoader() when InitialContext instance is
> created.

I have found the spot. Thanks!
You have the same approach as me. Prior authentication you retrieve the res=
ource. But, I do cache the resource object you don't. Are there any implica=
tions? How costly is a recurring lookup?

With best regards,
Michael Osipov

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233620-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 18 08:15:40 2012
Return-Path: <users-return-233620-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A1BB89E41
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 18 Apr 2012 08:15:40 +0000 (UTC)
Received: (qmail 6448 invoked by uid 500); 18 Apr 2012 08:15:37 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 6374 invoked by uid 500); 18 Apr 2012 08:15:36 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 6350 invoked by uid 99); 18 Apr 2012 08:15:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 08:15:36 +0000
X-ASF-Spam-Status: No, hits=1.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mims8010@googlemail.com designates 209.85.210.44 as permitted sender)
Received: from [209.85.210.44] (HELO mail-pz0-f44.google.com) (209.85.210.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 08:15:28 +0000
Received: by dadz14 with SMTP id z14so9151963dad.3
        for <users@tomcat.apache.org>; Wed, 18 Apr 2012 01:15:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=21n8v0qhKnpl3OuuJMZ4zpxuRz1BcMgedN8inht0USg=;
        b=l+ENwiKgbEaysov/+7ApAr6psUeUD/2H/k+NQfKTkty1TCQ7cJpb9Z8wdEOL6zowWZ
         9Z6IvtaF99Dgz/Zd53dhQNXBbQDgtc7p0XHX5ugUUVo8BGNM7741nr7PbV8tqCDrKSHB
         DN3mt7WqdUYY8np7Y1ci8EJ3n+CVWD8RyYH2UkDAamp1I0RLXBph1+7EvSvvtHDLPcem
         a+addWsPag51kaLA/gSSrvIawGuWFUvNFuXF9SFlX42eNGCv9k9caS3FP42F85MlC/eZ
         d8NapikkSf5Qm4YB1VkFUxYEo1Fs9I7kEnTftAiMptPw9xb6/fUIau/L5G5ldVVWCg1f
         Fd7Q==
MIME-Version: 1.0
Received: by 10.68.238.226 with SMTP id vn2mr4601685pbc.36.1334736907567; Wed,
 18 Apr 2012 01:15:07 -0700 (PDT)
Received: by 10.68.132.227 with HTTP; Wed, 18 Apr 2012 01:15:07 -0700 (PDT)
In-Reply-To: <4F8DC312.9020307@pidster.com>
References: <CAAu+a+vquBRKStbeHHvrnf_ph2wLvKyi=PALV8jJoDUk7=ZXiQ@mail.gmail.com>
	<4F8DC312.9020307@pidster.com>
Date: Wed, 18 Apr 2012 11:15:07 +0300
Message-ID: <CAAu+a+thPnkB1u4Wax6rdoRu1=qf9V-wDG=09Cyr3os2pskTcQ@mail.gmail.com>
Subject: Re: Why @WebServlet annotation is not processed when web.xml is
 version 2.5?
From: maria petrova <mims8010@googlemail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=047d7b33db9a3e82a804bdefa796

--047d7b33db9a3e82a804bdefa796
Content-Type: text/plain; charset=windows-1251
Content-Transfer-Encoding: quoted-printable

Hi,

Thanks for the clarification. I agree that the specification is not
absolutely clear on this matter in the given extract.
Anyway, I simply would like to ask you, as Tomcat experts, for hints or
ideas how to configure my Tomcat to make it pass the Servlet 3.0 CTS.
I know that Tomcat 7.x regularly covers the complete Servlet 3.0 CTS and
probably there is a hidden property that I=92m missing?

Thanks and regards,
Maria

=CD=E0 17 =E0=EF=F0=E8=EB 2012, 22:22, Pid <pid@pidster.com> =ED=E0=EF=E8=
=F1=E0:

> On 17/04/2012 13:48, maria petrova wrote:
> > Hi,
> >
> >
> > We=92ve embedded Tomcat 7.0.26 in our product and we are currently tryi=
ng
> > to cover Servlet 3.0 CTS with it.  We=92ve encountered the following
> > problem with one of the tests.
> >
> > Though the version of the web deployment descriptor of the test
> > application is 2.5, there is a servlet annotated with *@WebServlet
> > *annotation and requests to this servlet are responded with 404 Not
> > Found. When I change the version of the web.xml to 3.0 everything works
> > just fine.
> >
> >
> > In Chapter /=93*1.6.2 Regarding Processing annotations*=94/ in the Serv=
let
> > 3.0 Specification it is said that:
> >
> > /=93The version of the descriptor MUST not affect which annotations you
> > scan for in a web application.=94/
>
> It also says:
>
> "An implementation of a particular version of the specification MUST
> scan for all annotations supported in that configuration, unless
> metadata-complete is specified."
>
> So I ask "which configuration?" - interpreting it to mean that Servlet
> 3.0 supports the WebServlet annotation etc, and 2.5 does not, because
> that annotation is not present in 2.5.
>
>
> p
>
> > So my understanding is that the application should be processed for
> > Servlet 3.0 specific annotations regardless of the version of the
> > deployment descriptor.
> >
> >
> > As far as I=92m aware, each new Tomcat release successfully covers Serv=
let
> > 3.0 CTS, so I=92m wondering if I=92ve missed some configuration on Tomc=
at
> side?
> >
> > Any hints or ideas are highly appreciated.
> >
> >
> > Thanks!
> >
> > Maria
> >
> >
> > P.S. The issue is easily reproducible with clean Tomcat 7.0.26
> > installation and the attached simple test applications. They differ onl=
y
> > in the web.xml=92s version and only /AnnotTest_30/AnnotServlet is
> > correctly responded, while /AnnotTest_25/AnnotServlet gets 404 response=
.
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> > For additional commands, e-mail: users-help@tomcat.apache.org
>
>
> --
>
> [key:62590808]
>
>

--047d7b33db9a3e82a804bdefa796--

From users-return-233621-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 18 09:42:53 2012
Return-Path: <users-return-233621-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 42CAB9145
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 18 Apr 2012 09:42:53 +0000 (UTC)
Received: (qmail 14226 invoked by uid 500); 18 Apr 2012 09:42:49 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 14048 invoked by uid 500); 18 Apr 2012 09:42:49 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 14009 invoked by uid 99); 18 Apr 2012 09:42:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 09:42:48 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pid@pidster.com designates 209.85.214.45 as permitted sender)
Received: from [209.85.214.45] (HELO mail-bk0-f45.google.com) (209.85.214.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 09:42:39 +0000
Received: by bkcjg9 with SMTP id jg9so7055587bkc.18
        for <users@tomcat.apache.org>; Wed, 18 Apr 2012 02:42:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type;
        bh=BhYdVi03jFSKRNvuXMXr3chkdya2BD7kiMqOBDqRtqY=;
        b=BINh3XlCZem/gR6O11yDcsBZrlGpRO+lRUJueBhZ3QwnxQJYa3+8PbhVhtbCRObPv7
         ROn01HDfHxjWRxMEl62fO+uycuvZl1p81WT4SF5KLShKnyJku+DwFoKOtbbCN3PCyWRf
         U9xWM2DUbY5n3MNlj8ZYhNP5Ogn68VmDiz1wo=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type:x-gm-message-state;
        bh=BhYdVi03jFSKRNvuXMXr3chkdya2BD7kiMqOBDqRtqY=;
        b=EBI5C0uVG1aNhGKoQM11q5DWeIN9ndCqC8Z9xCiphsjYcL/fi1xTMWm/pZhjq+6eyR
         DU2MZaNJ7HU3WNlXPNgq1tco1yV4R+l++1SDjAm88CLwgU491wO2nL4+wgPZ5cIzTJoU
         6QeGk6lBkiGwcHv61kKPabKTi3xKLg+9bG+D5YQopWL5AdgelYsI+5jYwPwHS8q98PEl
         OkeOqYnpMsvUAtVxEkr3uUCSp9l10Wpud4QFyZ1ISJ3acMv/OFg2s0yIIPaVogRx3Xwb
         v53n+FMx1AvuxqGAIKcKckThHJVPv2cHsfsmnyotF7KYWOTL//ldcIHc/36OrsvhinEx
         g3fA==
Received: by 10.205.133.13 with SMTP id hw13mr482419bkc.25.1334742139193;
        Wed, 18 Apr 2012 02:42:19 -0700 (PDT)
Received: from Asura.local ([81.134.122.147])
        by mx.google.com with ESMTPS id gw19sm42982858bkc.8.2012.04.18.02.42.16
        (version=SSLv3 cipher=OTHER);
        Wed, 18 Apr 2012 02:42:17 -0700 (PDT)
Message-ID: <4F8E8C6E.7020207@pidster.com>
Date: Wed, 18 Apr 2012 10:42:06 +0100
From: Pid <pid@pidster.com>
Organization: Pidster Inc
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Why @WebServlet annotation is not processed when web.xml is version
 2.5?
References: <CAAu+a+vquBRKStbeHHvrnf_ph2wLvKyi=PALV8jJoDUk7=ZXiQ@mail.gmail.com> <4F8DC312.9020307@pidster.com> <CAAu+a+thPnkB1u4Wax6rdoRu1=qf9V-wDG=09Cyr3os2pskTcQ@mail.gmail.com>
In-Reply-To: <CAAu+a+thPnkB1u4Wax6rdoRu1=qf9V-wDG=09Cyr3os2pskTcQ@mail.gmail.com>
X-Enigmail-Version: 1.4
OpenPGP: id=62590808
Content-Type: multipart/signed; micalg=pgp-sha512;
 protocol="application/pgp-signature";
 boundary="------------enig0EEFD2D90E6716F886F777B4"
X-Gm-Message-State: ALoCoQklp4F9hiV9qgBx1C9bUT1PPZpU+z3X2/J/rfkpTPMMb9paBa0d64lt+KwK0uA4i1oOG5Cb

--------------enig0EEFD2D90E6716F886F777B4
Content-Type: text/plain; charset=windows-1251
Content-Transfer-Encoding: quoted-printable

On 18/04/2012 09:15, maria petrova wrote:
> Hi,
>=20
> Thanks for the clarification. I agree that the specification is not
> absolutely clear on this matter in the given extract.
> Anyway, I simply would like to ask you, as Tomcat experts, for hints or=

> ideas how to configure my Tomcat to make it pass the Servlet 3.0 CTS.
> I know that Tomcat 7.x regularly covers the complete Servlet 3.0 CTS an=
d
> probably there is a hidden property that I=92m missing?

Set 3.0 as the version in web.xml for apps using Servlet 3.0 features?
Alternatively you could, of course, set the hidden system property:

 -Dorg.apache.catalina.alwaysPassServlet30CTS=3Dtrue


p


> Thanks and regards,
> Maria
>=20
> =CD=E0 17 =E0=EF=F0=E8=EB 2012, 22:22, Pid <pid@pidster.com> =ED=E0=EF=E8=
=F1=E0:
>=20
>> On 17/04/2012 13:48, maria petrova wrote:
>>> Hi,
>>>
>>>
>>> We=92ve embedded Tomcat 7.0.26 in our product and we are currently tr=
ying
>>> to cover Servlet 3.0 CTS with it.  We=92ve encountered the following
>>> problem with one of the tests.
>>>
>>> Though the version of the web deployment descriptor of the test
>>> application is 2.5, there is a servlet annotated with *@WebServlet
>>> *annotation and requests to this servlet are responded with 404 Not
>>> Found. When I change the version of the web.xml to 3.0 everything wor=
ks
>>> just fine.
>>>
>>>
>>> In Chapter /=93*1.6.2 Regarding Processing annotations*=94/ in the Se=
rvlet
>>> 3.0 Specification it is said that:
>>>
>>> /=93The version of the descriptor MUST not affect which annotations y=
ou
>>> scan for in a web application.=94/
>>
>> It also says:
>>
>> "An implementation of a particular version of the specification MUST
>> scan for all annotations supported in that configuration, unless
>> metadata-complete is specified."
>>
>> So I ask "which configuration?" - interpreting it to mean that Servlet=

>> 3.0 supports the WebServlet annotation etc, and 2.5 does not, because
>> that annotation is not present in 2.5.
>>
>>
>> p
>>
>>> So my understanding is that the application should be processed for
>>> Servlet 3.0 specific annotations regardless of the version of the
>>> deployment descriptor.
>>>
>>>
>>> As far as I=92m aware, each new Tomcat release successfully covers Se=
rvlet
>>> 3.0 CTS, so I=92m wondering if I=92ve missed some configuration on To=
mcat
>> side?
>>>
>>> Any hints or ideas are highly appreciated.
>>>
>>>
>>> Thanks!
>>>
>>> Maria
>>>
>>>
>>> P.S. The issue is easily reproducible with clean Tomcat 7.0.26
>>> installation and the attached simple test applications. They differ o=
nly
>>> in the web.xml=92s version and only /AnnotTest_30/AnnotServlet is
>>> correctly responded, while /AnnotTest_25/AnnotServlet gets 404 respon=
se.
>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------=

>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>
>>
>> --
>>
>> [key:62590808]
>>
>>
>=20


--=20

[key:62590808]


--------------enig0EEFD2D90E6716F886F777B4
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.18 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iQIcBAEBCgAGBQJPjox2AAoJEGoM2OGpOvr9EOwP/jwSvhnC618Y/IlTq3P7hZn4
DwUXmDBCW+acK4YetiLgS58angiMyLJG0X8I8PYQQzSuc/jMbWDxkE/LG1V7PLLv
j2DTAmd2nIas7tZFJLQ1WfuRWJ/l4QlHKKj4ZZxUUirnb05KkiKW3kIt61mwnDsk
ORo1s21ZZM5g7Aix/mX2E00V8avkiukpj0GAGOSNhxi2t+LMAI3OuqUu/3OS3DrJ
6EeKJk93XVKdXfp1NUokfpCdFc7a8d4qC0t0MuJOP9clnYBUta+DAaXcz66p7j9g
jvr5g5JQ7QP30js7U7289+Z1RKvAZvSqKQhOlvpnVPGUK6vdjRfjDxO8wb2Qlcte
uZib+BpkavGrU0yFbGKIkOJC94SAds8JbdKIwL5dgAO1KEhAa8XaxPqIyE7M3ehl
nmw/H27q1cRR+hQjkVc3YkQH+u3nQu7tx5fPe8A41T3+nLl3Tr7bvOKBwsK47JxG
A/8r7B+TkdkhrVNm1C9o1J8TmETGDIA5F7doOTAMLyvrxdSi8bvNniZJQ65mTuc7
9y8V8vrs3RYlzOMeoR/JyQmKRV1Yf6t8kiVVytjYY1tDXiH+QQe3gk6lyg05s2zt
A0vQMVjTkfRI66OZtg1QmgdaN8fM91ok6SNPS97/YesF0waK68Lxnw5kUaQxcOzh
22+l4Ff4QnNZw+SCAWGd
=wPDZ
-----END PGP SIGNATURE-----

--------------enig0EEFD2D90E6716F886F777B4--

From users-return-233622-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 18 09:44:48 2012
Return-Path: <users-return-233622-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2498C91B1
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 18 Apr 2012 09:44:48 +0000 (UTC)
Received: (qmail 21042 invoked by uid 500); 18 Apr 2012 09:44:44 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 20912 invoked by uid 500); 18 Apr 2012 09:44:44 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 20900 invoked by uid 99); 18 Apr 2012 09:44:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 09:44:44 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pid@pidster.com designates 209.85.214.45 as permitted sender)
Received: from [209.85.214.45] (HELO mail-bk0-f45.google.com) (209.85.214.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 09:44:35 +0000
Received: by bkcjg9 with SMTP id jg9so7057624bkc.18
        for <users@tomcat.apache.org>; Wed, 18 Apr 2012 02:44:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type;
        bh=XPKFKFvtFtF14zq2pCsGBwyRDUNw+3hEp8/scO7kyyY=;
        b=XfQXIXD1kmTuYMdYVu/2LfFxrtdYYh5Pg+F4PaUObquo5irBuYYgaQvqEy7H72Ph0m
         AH4OxZGqb5NxLNWdz0H8D1kbGXJooHeazKaLpuoz70V9RySFf9Ujwh3cNsizEOD7OiOW
         ZR7pDpZOPVcbRYwWcqLzYOPfK0EJe3JmOFMjA=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type:x-gm-message-state;
        bh=XPKFKFvtFtF14zq2pCsGBwyRDUNw+3hEp8/scO7kyyY=;
        b=OJB0KQ2NAWkv7BcaWVI8xftwnCpmHmq6BVjC3p4FxJECx/2ExZDSRG4rcBrkr+6SEs
         7jVmZibnfflyQZxDAbSJFb5HeAQvwHwICQvNtNDE7KdLOsiGHSHy2Kg6STMHfyBeDXAF
         4IKVPnyphIKkAIhAV+x4r1hw67AQ2B6onsJfXcC3wmMoP/K+H4OB66VXz4aYQ0+I4vGS
         edQrzsFfl4dQZZcyumjO6qiRaSMWtrVCLNcAEPnF2zdIjfJ126DfxllowGsKfPch5+R0
         RgracivGwk3k23WUDrp9E63TMva9RZis7E22lC05gDgcxCtkk8s359svM17ZF4LCFypm
         D15Q==
Received: by 10.204.155.147 with SMTP id s19mr447966bkw.140.1334742255164;
        Wed, 18 Apr 2012 02:44:15 -0700 (PDT)
Received: from Asura.local ([81.134.122.147])
        by mx.google.com with ESMTPS id z14sm42973746bky.15.2012.04.18.02.44.13
        (version=SSLv3 cipher=OTHER);
        Wed, 18 Apr 2012 02:44:13 -0700 (PDT)
Message-ID: <4F8E8CEB.500@pidster.com>
Date: Wed, 18 Apr 2012 10:44:11 +0100
From: Pid <pid@pidster.com>
Organization: Pidster Inc
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Problem starting tomcat
References: <CANhTVFMrPW_MfGYB+GAAscbCSMm1-qd+DL9VptJPNtrhACQvdg@mail.gmail.com>
In-Reply-To: <CANhTVFMrPW_MfGYB+GAAscbCSMm1-qd+DL9VptJPNtrhACQvdg@mail.gmail.com>
X-Enigmail-Version: 1.4
OpenPGP: id=62590808
Content-Type: multipart/signed; micalg=pgp-sha512;
 protocol="application/pgp-signature";
 boundary="------------enigEBD4AED8069F46D68A1BA1BF"
X-Gm-Message-State: ALoCoQnVFoiLt/c97jueVDPuvJeuvZNrM5LNI6fXDvW/Xjta9sAz0HSSocXDbHUUkZHFv5St7V9b

--------------enigEBD4AED8069F46D68A1BA1BF
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

On 18/04/2012 02:59, Fairouz Fakhfakh wrote:
> Hello,
> I have a problem when I start tomcat by cliking on "tomcat5.exe" locate=
d
> in Tomcat 5.5\bin.
> I have the following message:
>=20
> GRAVE: Erreur lors du d=DAploiement du r=DApertoire juddi de l'applicat=
ion web
>=20
> java.lang.NoClassDefFoundError: *org/apache/axis/transport/http/AxisSer=
vlet*
>=20
>         at java.lang.ClassLoader.defineClass1(Native Method)
>=20
>         at java.lang.ClassLoader.defineClass(Unknown Source)
>=20
>         at java.security.SecureClassLoader.defineClass(Unknown Source)
>=20
>         at java.net.URLClassLoader.defineClass(Unknown Source)
>=20
>         at java.net.URLClassLoader.access$000(Unknown Source)
>=20
>         at java.net.URLClassLoader$1.run(Unknown Source)
>=20
>         at java.security.AccessController.doPrivileged(Native Method)
>=20
>         at java.net.URLClassLoader.findClass(Unknown Source)
>=20
>         at java.lang.ClassLoader.loadClass(Unknown Source)
>=20
>         at java.lang.ClassLoader.loadClass(Unknown Source)
>=20
>         at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
>=20
>         at java.lang.ClassLoader.loadClass(Unknown Source)
>=20
>         at
> org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoa
>=20
> der.java:1247)
>=20
>         at
> org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoa
>=20
> der.java:1181)
>=20
>         at
> org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.
>=20
> java:1027)
>=20
>         at
> org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:92
>=20
> 5)
>=20
>         at
> org.apache.catalina.core.StandardContext.loadOnStartup(StandardContex
>=20
> t.java:3857)
>=20
>         at
> org.apache.catalina.core.StandardContext.start(StandardContext.java:4
>=20
> 118)
>=20
>         at
> org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase
>=20
> .java:759)
>=20
>         at
> org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:73
>=20
> 9)
>=20
>         at
> org.apache.catalina.core.StandardHost.addChild(StandardHost.java:524)
>=20
>=20
>=20
>         at
> org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.jav
>=20
> a:894)
>=20
>         at
> org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.j
>=20
> ava:857)
>=20
>         at
> org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:475
>=20
> )
>=20
>         at
> org.apache.catalina.startup.HostConfig.start(HostConfig.java:1102)
>=20
>         at
> org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java
>=20
> :311)
>=20
>         at
> org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(Lifecycl
>=20
> eSupport.java:119)
>=20
>         at
> org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1020)
>=20
>=20
>=20
>         at
> org.apache.catalina.core.StandardHost.start(StandardHost.java:718)
>=20
>         at
> org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1012)
>=20
>=20
>=20
>         at
> org.apache.catalina.core.StandardEngine.start(StandardEngine.java:442
>=20
> )
>=20
>         at
> org.apache.catalina.core.StandardService.start(StandardService.java:4
>=20
> 50)
>=20
>         at
> org.apache.catalina.core.StandardServer.start(StandardServer.java:683
>=20
> )
>=20
>         at org.apache.catalina.startup.Catalina.start(Catalina.java:537=
)
>=20
>         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>=20
>         at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
>=20
>         at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Sour=
ce)
>=20
>         at java.lang.reflect.Method.invoke(Unknown Source)
>=20
>         at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:2=
71)
>=20
>         at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:40=
9)
>=20
> 18 avr. 2012 02:51:01 org.apache.coyote.http11.Http11Protocol start
>=20
> INFO: D=DAmarrage de Coyote HTTP/1.1 sur http-8083
>=20
> 18 avr. 2012 02:51:01 org.apache.jk.server.JkMain start
>=20
> INFO: Jk running ID=3D0 time=3D0/10  config=3Dnull
>=20
> 18 avr. 2012 02:51:01 org.apache.catalina.startup.Catalina start
>=20
> INFO: Server startup in 2990 ms
>=20
>=20
> I think that the problem from axis by I didn't kbow how to resolve it.
>=20
>=20
> Can someone help me; please?

It's a classpath error, meaning that your application does not have the
right JAR files in the application lib directory.  E.g.

 tomcat/webapps/YOURAPPNAME/WEB-INF/lib/some-missing-dependency.jar


p

--=20

[key:62590808]


--------------enigEBD4AED8069F46D68A1BA1BF
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.18 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iQIcBAEBCgAGBQJPjozrAAoJEGoM2OGpOvr9+PoP/02SMdLkVDvWeHNqMOLfZnAy
UEXv4TUlP0t6p+iIZTEssnsYdABY/5QdslDM+62PxE89AgX+HZjSIzwvXJVxO+Oc
3kynY/Jeuq/PMIsXReudSIfGzC24+1P9J/ZuYg3tZxwvba+Ti+cpM3/ScKOElbqL
L+eaBE2FKBxDOUiwQ/Z0VXrj5OD1VF8DvjKHZZ06zoUff+F1p93VuLxfUdVkVQgI
++zYEG5/2nHwYapfqn4sm9lDQbVkh7CDDLaaLOb7t0YcxNZd1debN2HgsV1BXjAb
gBjPECGRg4MeAG7ptHCHykGs2Uf+TLA3vh8bjWFYxdkFRgbT1nlHNIQvMhN2oryw
y44Jpkeyz3GcmE+wH8UUweRDcDAAdEjq7jUK8A0p3QCVb2in7XiN0vd6OZUdeOR8
oi5SFSb1jO+ixNHQdIJXDVngTLYYFyf36taSTiP1DNKwqjicygITPLIeHEj5fgON
fX8YKKde9lThIvDd0Uzaw0f9o7jDfQ/RQiw4kGekkKUQVJv6Sauxe2sYbjzIX6F7
bEitGnrYeLaKrX/4bYgem9loW3aXg8IzLx025F1ufOqnLPQ0wRHyzMsCzjpJd58y
cAfvAjGMULyS5ZAkg4dzMv4gYvlknd5volsjiNggPcX8A21kSkKiMHsGGMLgakTL
pOANM4ny4dZK7wt6PGUs
=uS7j
-----END PGP SIGNATURE-----

--------------enigEBD4AED8069F46D68A1BA1BF--

From users-return-233623-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 18 09:48:01 2012
Return-Path: <users-return-233623-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 502929261
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 18 Apr 2012 09:48:01 +0000 (UTC)
Received: (qmail 32365 invoked by uid 500); 18 Apr 2012 09:47:58 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 32117 invoked by uid 500); 18 Apr 2012 09:47:57 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 32102 invoked by uid 99); 18 Apr 2012 09:47:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 09:47:57 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pid@pidster.com designates 209.85.214.45 as permitted sender)
Received: from [209.85.214.45] (HELO mail-bk0-f45.google.com) (209.85.214.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 09:47:48 +0000
Received: by bkcjg9 with SMTP id jg9so7060954bkc.18
        for <users@tomcat.apache.org>; Wed, 18 Apr 2012 02:47:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type;
        bh=rFw1UYoCfYldtuqEke8LABYbBxdOu/bBABR0fxRol0U=;
        b=t3PjXWXxq0qKnPwnMI+bD4jFP1Uku81MbwxH36ClDUkkAgYnWuPvf31KSplJ+UM6Th
         BnYhmE2kUCTp25z1B6oGlVsieiud1dV4hUVh1ferMWH4/bcRnhUD8qq0s71h181dhUh+
         4J0N1+WBvY5JclAQHKKxqKVJXPOYaUwKDSW10=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type:x-gm-message-state;
        bh=rFw1UYoCfYldtuqEke8LABYbBxdOu/bBABR0fxRol0U=;
        b=c5gUrN+c1uM9VV+hc/stI0M9ILpSdCubFzm/NAG3sMf7t8Dbrpw7oC2wn1krwK2lRG
         IwsMRuXuLd/lKOheh30K9896ccTtVZYFmF8EP3OzL7TznlhmNjH9ItJ9Emfok9gycJjB
         9aCeJ5JwAUBgjMq9ib9TUTQaiaIlNBtaTZ0a6MSTUJJiHpGj72CZqKYjko7S5GeedkDS
         yhenNz1wk2lQpreHqn03YAeKcq4XmOxK5eIi0MvGgSK2OBkAvLNF3sAAtnLiEaPAvlbI
         1pw4jl9Sr20KQG4aaWN/54CyW+MnnLk7bNUU6jhHvyNEtXusnaloC+3LXEDmod0UXgnQ
         TqQQ==
Received: by 10.204.129.23 with SMTP id m23mr401446bks.134.1334742448057;
        Wed, 18 Apr 2012 02:47:28 -0700 (PDT)
Received: from Asura.local ([81.134.122.147])
        by mx.google.com with ESMTPS id gu12sm43063720bkc.1.2012.04.18.02.47.25
        (version=SSLv3 cipher=OTHER);
        Wed, 18 Apr 2012 02:47:26 -0700 (PDT)
Message-ID: <4F8E8DAC.3030904@pidster.com>
Date: Wed, 18 Apr 2012 10:47:24 +0100
From: Pid <pid@pidster.com>
Organization: Pidster Inc
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Generating a Keystore
References: <CADnZG66WorN4wYg9sC7wf=FOcwUdF19docRuAnKh+h0qxKzbUg@mail.gmail.com>
In-Reply-To: <CADnZG66WorN4wYg9sC7wf=FOcwUdF19docRuAnKh+h0qxKzbUg@mail.gmail.com>
X-Enigmail-Version: 1.4
OpenPGP: id=62590808
Content-Type: multipart/signed; micalg=pgp-sha512;
 protocol="application/pgp-signature";
 boundary="------------enig9812E8CD791A718F4C6380CC"
X-Gm-Message-State: ALoCoQkgb+7KGgAd4rC1TVk8DKrWXuAUBi1FDXJwSsNd6aaeNRsdD4D6YxuReThpprnu3JOmOpAI

--------------enig9812E8CD791A718F4C6380CC
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

On 17/04/2012 21:16, Victoria Johnson - Kio wrote:
> Hello,
>=20
> I am having problems generating a keystore, this is my first time
> configuring a server, let alone Tomcat.

What are your problems, exactly?

> The text on Apache is really confusing me about setting up SSL on Tomca=
t,
> what do I do with this command
>=20
> %JAVA_HOME%\bin\keytool -genkey -alias tomcat -keyalg RSA

Hit the return after you've typed it.
Then tell us if you have any problems or questions.


p

> Please advise.
>=20
> Thanks.
>=20
>=20


--=20

[key:62590808]


--------------enig9812E8CD791A718F4C6380CC
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.18 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iQIcBAEBCgAGBQJPjo2sAAoJEGoM2OGpOvr9ejYP/R4YpfW82q2YRCtGdOzPffx0
AS7uigno1qsebpzURvG8OcZA+SfL+Os/GGU1VkLjzdXe/EDviiJ9wFSCA5dNXm8k
aQgWKd3AYKevvZ4D+8V0X3fkj4MfIyFltNO0L+kRFo/R2GuR/+HTgaY2qeRa/8iW
X//PqmnH2qLHHluTIZOipy6poJwYSSvzGlQMYUAHWCzWlqrBPK1z6scaOsmNX1qm
Ja8AkZfVEPZv/tWr1w6fQBgIHe7+JOEWH5hFO1Qfe5mbzrVYi8vl9esd+UVZhesH
YU4LBD2EArR7yrtacp3ESJTCmzC1FkMzFvCQaugiwDEJm687V7w4KFnEbkQ8zcWZ
DdFMQYqwh/G71ggPq+ZxzMKJSBd3LFMFdxdCFOqjioK+fw/1qgeJRWH2x6j6wCrS
IsIh4iWCyi5c5RAhKuF+AhIfnBZmcEB8V0qqzFiyKGdMhIO5GnGTkblooCzpGOCY
XX4DB1GllbIjAXopgRRslibtOSOobnHfCIgZ+ht6doEqu/+NAr5Ul7uAs+n6Wpgx
zPUejjo2qPhvtL4UDSwfZM97S2MDqm8V1je5/PejYTMzqV/9TacJkMWAImNBQ99F
tbXwdem/OKiFXAP1aDF22znqi6bpAPxRhbr655N9lY6wZnn/jFtTOfq3GhEAMu/E
chTvKEyYrYh+UW/0wAiJ
=Ta+r
-----END PGP SIGNATURE-----

--------------enig9812E8CD791A718F4C6380CC--

From users-return-233624-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 18 09:56:15 2012
Return-Path: <users-return-233624-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 84BB99649
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 18 Apr 2012 09:56:15 +0000 (UTC)
Received: (qmail 56969 invoked by uid 500); 18 Apr 2012 09:56:12 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 56930 invoked by uid 500); 18 Apr 2012 09:56:12 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 56915 invoked by uid 99); 18 Apr 2012 09:56:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 09:56:11 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pid@pidster.com designates 209.85.214.45 as permitted sender)
Received: from [209.85.214.45] (HELO mail-bk0-f45.google.com) (209.85.214.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 09:56:03 +0000
Received: by bkcjg9 with SMTP id jg9so7069788bkc.18
        for <users@tomcat.apache.org>; Wed, 18 Apr 2012 02:55:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type;
        bh=nGOJ03VaVcLr759shk8qNjmfE90LMzb3OplnhI7VGn0=;
        b=kaNoGJqVCaqNWGq1oABFdOoT1kl5ndkXT35VmlrzsrHMzcOaKEpo6xgGySmgk1lAAl
         0J5EV+1733HazODeFgxYm6aLrVOmDQC9PCMND2PbQwDsSMwAQXMyRq03EQpNzVrhPtrv
         kHJxWWStBIRNQebqfCLrTR/ArZZUtSde97DL4=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type:x-gm-message-state;
        bh=nGOJ03VaVcLr759shk8qNjmfE90LMzb3OplnhI7VGn0=;
        b=b0mqZ8jwZ8j9aQdmegSYWRPPY1O6a8gu/TBv/zpMkHw1JdiPj8EklRZxTnTLtzEwsD
         GOhz5gHvrwExfaUq/cvYZSsDFrdwH6ndmJMa3XPql/MphgIArcKWe07XOw5J2qJ2p4jQ
         SqnyPtk28OC8QQYUYd62aaUHVRb8Igg9MQskBRKJY3Y3H9ypyTrJTHpZyRPJF95MirM2
         FflbSJoMSHDtzmhqsOrZpWo6tO72bIPzb5hUhTuZVREZ2XinV88DB0PwgReMv5C+koA7
         NVtc0UyrX5SZL2n55QyNCl4Kc7hPzFVTrK/3ruf4SLGbDOoPoDPFWSK75vxjjwYcnPWj
         zP8A==
Received: by 10.204.154.133 with SMTP id o5mr480800bkw.100.1334742942650;
        Wed, 18 Apr 2012 02:55:42 -0700 (PDT)
Received: from Asura.local ([81.134.122.147])
        by mx.google.com with ESMTPS id cy11sm43080756bkb.7.2012.04.18.02.55.40
        (version=SSLv3 cipher=OTHER);
        Wed, 18 Apr 2012 02:55:41 -0700 (PDT)
Message-ID: <4F8E8F96.4000104@pidster.com>
Date: Wed, 18 Apr 2012 10:55:34 +0100
From: Pid <pid@pidster.com>
Organization: Pidster Inc
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: JasperException: The value for the useBean class ___ attribute
 is invalid
References: <4F8D9A5B.3020302@vittox.com>
In-Reply-To: <4F8D9A5B.3020302@vittox.com>
X-Enigmail-Version: 1.4
OpenPGP: id=62590808
Content-Type: multipart/signed; micalg=pgp-sha512;
 protocol="application/pgp-signature";
 boundary="------------enigB6EADB1F7F68831FAC7917E1"
X-Gm-Message-State: ALoCoQm0h1yiSIFQtxKCCwWMwk25Z9EE6RsbHzFneSHq7KXqpG1Ntu1WPAFRqb7/GlPPCwah3Osz

--------------enigB6EADB1F7F68831FAC7917E1
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

On 17/04/2012 17:29, Chris Patterson wrote:
> Hello, pls help with the following issue:
>=20
> My JSP calls a Java Bean
> and works OK for both versions, Tomcat 5.5 and Tomcat 7.1

Cool!  Where did you get v7.1 from?
I've been waiting for that release.

On the other hand, you could tell us exactly which 5.5.x and 7.0.y
versions you are using, on which OS and with which version of Java.


> My problem is when I move that same JSP to a sub-directory,
> then I get the 500 error:

Which subdirectory, exactly?


> org.apache.jasper.JasperException: /StrBean.jsp(26,0) The value for the=

> useBean class attribute
> jdbcbean.StringBean is invalid.
>=20
> I think it could be solved changing the server.xml configuration
> described below (?)
>=20
>     <Host name=3D"domain.com" appBase=3D"/home/serverhome/public_html">=

>           <Alias>www.domain.com</Alias>
>           <Context path=3D"" reloadable=3D"true"
> docBase=3D"/home/serverhome/public_html" debug=3D"1"/>
>        </Host>

No, no & thrice no.

1. Don't define the Context in server.xml.
2. Don't set Host.appBase and Context.docBase to the same value.
3. debug is not valid here in 7.x

Please carefully read all of the following:

 - http://tomcat.apache.org/tomcat-7.0-doc/appdev/index.html
 - http://tomcat.apache.org/tomcat-7.0-doc/config/context.html

Then you'll know how to configure the ROOT application.


> Any ideas about where to fix the problem ?

How about in your JSP code, seeing as that's what Tomcat is telling you
is wrong.

Post the whole JSP in your reply.


p

> Wilhelm Colln
> www.Vittox.com
>=20


--=20

[key:62590808]


--------------enigB6EADB1F7F68831FAC7917E1
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.18 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iQIcBAEBCgAGBQJPjo+aAAoJEGoM2OGpOvr9aaoQAKwgTpX5k4xHoTAQdMdw0I0f
C+rVXonNI+ssPX/wKhFxoHhnOmnnzslbtWj4v+lahw/Faj1sSDq4MtkRwxUck0Ly
1vRJH+AHX1NQAVq3OC7lnghM9oLX1qI+1QWL/NqBnuqy4WPSQd5BOcvge62A1EsU
ZpsSEVf9riPISCHuo6kPq4Ql59Zy7dZfJBxMqvOAAfeRwKckft1YQIR4n+QqQQfx
1KcsSDmYEVw5nYHJCW/9hnngamLo+SFWBhREKuFUdHYtwTPYor39CJ7Ut35aya1/
hKzWsR2yyrl+Im0p0g4obmtZxRJBxWJ5BbiZMss7NzWScZo8J0IyokrPy8AHXRXn
jMSvaABr3derRDZrTyVSTHJOFCLrLGAMLs+4C3OdO89QAZJ4CuTrBJHku5pWRLOW
/rh+2jJT1NALIR1HtFQU8LfYLMW/aJzSFtQlYnCrlO+SbrdGjm8epo7NWRCcNPn4
iC2Patd5BmoGxJ9wuVE8afhLB09n134JQeOpCha7DwKhSDFeIexrJegOaAZYSYY3
WI5BwuxJQqidtc3mskPiEILBki5XL5WCeBFyOtO7CSKHKfNo6rCjPgniU3qjDMJ/
Y5GNibtTYET3HGxChU9H05GKOOwWCEFU2ktfEl7YByZ63AdLy2FPgaZwDMiUa519
eHZXma/dwR6tX5Q9njM5
=/ZLe
-----END PGP SIGNATURE-----

--------------enigB6EADB1F7F68831FAC7917E1--

From users-return-233625-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 18 10:28:23 2012
Return-Path: <users-return-233625-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CA20D9732
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 18 Apr 2012 10:28:23 +0000 (UTC)
Received: (qmail 50159 invoked by uid 500); 18 Apr 2012 10:28:20 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 50104 invoked by uid 500); 18 Apr 2012 10:28:20 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 50091 invoked by uid 99); 18 Apr 2012 10:28:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 10:28:20 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of knst.kolinko@gmail.com designates 209.85.213.173 as permitted sender)
Received: from [209.85.213.173] (HELO mail-yx0-f173.google.com) (209.85.213.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 10:28:13 +0000
Received: by yenr5 with SMTP id r5so4416084yen.18
        for <users@tomcat.apache.org>; Wed, 18 Apr 2012 03:27:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=12SFzXVsAoKc6qE5T0H+T3Aqf1Z563Znhz+6uTy9chU=;
        b=zKjDetUf6uGhXmgXvbjObIch3K03xu5hQ91Ij70x60/v1J0VMCiR4oEJH91J29eH3g
         Phv7sYsq5Ot4EB0YCT0tkkwJROdIGaE+L+Xedd627kz7SogEBbKTytMvjMaDq597odHy
         KYkNdOJcvvpjboeqDt+qs6cTKmGSoJhWRcXiPPFpei2UiQBq5fCywGIPaoa62IXUF2IM
         Qo0sQ/ndlzkM7PTaZX+saarmFem8bdUCh2CVfDluuXWeQQfigXAm1jxjJ3UdtAMii46y
         qJONigfs4Bmm4xdmUP56x++Zivep0xC3YlTHRm204Y/f+qOldwycW5hjCOz4Jx9H7PMR
         mWlg==
MIME-Version: 1.0
Received: by 10.101.151.34 with SMTP id d34mr483072ano.19.1334744872659; Wed,
 18 Apr 2012 03:27:52 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Wed, 18 Apr 2012 03:27:52 -0700 (PDT)
In-Reply-To: <CAAu+a+thPnkB1u4Wax6rdoRu1=qf9V-wDG=09Cyr3os2pskTcQ@mail.gmail.com>
References: <CAAu+a+vquBRKStbeHHvrnf_ph2wLvKyi=PALV8jJoDUk7=ZXiQ@mail.gmail.com>
	<4F8DC312.9020307@pidster.com>
	<CAAu+a+thPnkB1u4Wax6rdoRu1=qf9V-wDG=09Cyr3os2pskTcQ@mail.gmail.com>
Date: Wed, 18 Apr 2012 14:27:52 +0400
Message-ID: <CABzHfVm2La1EgKnnEtWOn4CZoXbwJnvAFpkJyKx8GKGChTxefQ@mail.gmail.com>
Subject: Re: Why @WebServlet annotation is not processed when web.xml is
 version 2.5?
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=KOI8-R
Content-Transfer-Encoding: quoted-printable

18 =C1=D0=D2=C5=CC=D1 2012 =C7. 12:15 =D0=CF=CC=D8=DA=CF=D7=C1=D4=C5=CC=D8 =
maria petrova
<mims8010@googlemail.com> =CE=C1=D0=C9=D3=C1=CC:
> Hi,
>
> Thanks for the clarification. I agree that the specification is not
> absolutely clear on this matter in the given extract.
> Anyway, I simply would like to ask you, as Tomcat experts, for hints or
> ideas how to configure my Tomcat to make it pass the Servlet 3.0 CTS.
> I know that Tomcat 7.x regularly covers the complete Servlet 3.0 CTS and
> probably there is a hidden property that I'm missing?
>

An obvious thing:
http://tomcat.apache.org/tomcat-7.0-doc/config/systemprops.html
org.apache.catalina.STRICT_SERVLET_COMPLIANCE=3Dtrue

As far as I remember, specifics of TCK cannot be discussed on a public list=
.

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233626-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 18 12:01:37 2012
Return-Path: <users-return-233626-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B70509C92
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 18 Apr 2012 12:01:37 +0000 (UTC)
Received: (qmail 98081 invoked by uid 500); 18 Apr 2012 12:01:34 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 98002 invoked by uid 500); 18 Apr 2012 12:01:34 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 97992 invoked by uid 99); 18 Apr 2012 12:01:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 12:01:34 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of cjderham@gmail.com designates 209.85.215.45 as permitted sender)
Received: from [209.85.215.45] (HELO mail-lpp01m010-f45.google.com) (209.85.215.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 12:01:26 +0000
Received: by lahe6 with SMTP id e6so7001795lah.18
        for <users@tomcat.apache.org>; Wed, 18 Apr 2012 05:01:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:reply-to:sender:from:date:x-google-sender-auth
         :message-id:subject:to:content-type;
        bh=3Ra2SmwJypBy6Uh5kcpdzqhkLvSNn7nuBHKJ0ysATps=;
        b=F7FQoXtDwWzcUE4URH6Fi/S7Ookb7nVUAnHjzcGOgG+yqTr+0RWP2WCBHdoHYOwF+d
         o1SPpJ0G/YqJvI9LIL1fNancDwZe4sjDlzbNin329qI2t338ITNvBGiWFTxmXuOkFNzL
         Jpku1fwqCucKV8HLW6R8wWMfBkgWqjJbFtTISRceisyastwXWVZvoamIHDOmju27D+xy
         ps5zMHJmo7L3BVUyWPh3BveRvfQU/2kYsPU7s1QQ04D0Fv8OSEeX00UFAk9R7w1MAvaL
         hNlEJ/cmNTTqmcVnNLhXueR6O7OJFa3XQb0V5bwUCSX74GkPt898a3VOaNZOmosQh4V1
         DvcA==
Received: by 10.112.49.35 with SMTP id r3mr863262lbn.71.1334750466134; Wed, 18
 Apr 2012 05:01:06 -0700 (PDT)
MIME-Version: 1.0
Reply-To: chris@derham.me.uk
Sender: cjderham@gmail.com
Received: by 10.112.117.37 with HTTP; Wed, 18 Apr 2012 05:00:45 -0700 (PDT)
From: chris derham <chris@derham.me.uk>
Date: Wed, 18 Apr 2012 09:00:45 -0300
X-Google-Sender-Auth: FmxaW29pTQqkgPQvkKnR53VNXpw
Message-ID: <CAG6aRdX7aA9J8RZ1OAhyUQCayi2D2E=_9FJryTH4Z1v7dDSosw@mail.gmail.com>
Subject: 64bit windows mod_jk connector download for apache httpd 2.4
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=90e6ba308f7065d32c04bdf2cf2d

--90e6ba308f7065d32c04bdf2cf2d
Content-Type: text/plain; charset=ISO-8859-1

All,

Our setup has apache tomcat running behind apache httpd using mod_jk. I
would like to upgrade to apache 2.4, but for this I need to find a 64bit
mod_jk release for httpd 2.4. The binaries contained at
http://tomcat.apache.org/download-connectors.cgi 32 bit httpd connectors,
or a 64bit iis one.

Can somebody help point me to where suitable binaries are? Alternatively
could somebody point to some documentation showing how to build them
myself? I know for unix you can just download the source and follow the
build scripts, but for windows I believe that the build process will be
considerably more complicated then "configure; make"

Thanks for any help

Chris

--90e6ba308f7065d32c04bdf2cf2d--

From users-return-233627-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 18 13:19:56 2012
Return-Path: <users-return-233627-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3247B9D97
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 18 Apr 2012 13:19:56 +0000 (UTC)
Received: (qmail 53465 invoked by uid 500); 18 Apr 2012 13:19:52 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 53289 invoked by uid 500); 18 Apr 2012 13:19:52 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 53279 invoked by uid 99); 18 Apr 2012 13:19:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 13:19:52 +0000
X-ASF-Spam-Status: No, hits=2.9 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [195.238.6.174] (HELO mailrelay008.isp.belgacom.be) (195.238.6.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 13:19:46 +0000
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: ApIBACm+jk9R8eYX/2dsb2JhbAANN7ROAQEEeBELBB0WDwkDAgECAUUGDQgBAReFdoIJuiSQaASVb5MjgVo
Received: from 23.230-241-81.adsl-static.isp.belgacom.be (HELO [192.168.111.111]) ([81.241.230.23])
  by relay.skynet.be with ESMTP; 18 Apr 2012 15:19:22 +0200
Message-ID: <4F8EBF5C.1010204@kantl.be>
Date: Wed, 18 Apr 2012 15:19:24 +0200
From: Ron Van den Branden <ron.vandenbranden@kantl.be>
Organization: CTB-KANTL
User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: adding a global URI prefix for Tomcat web apps
References: <4F8D6122.40609@kantl.be> <CABzHfV=GGqUVxkdeH5YtVp+RqewsQB+2X_fm38gp=aoZ1thD7g@mail.gmail.com> <4F8DF325.8010604@kantl.be> <CABzHfVki4xq3Pm+Aw_YDhwO5nS8KNXTJ-Z5ujByvNkGxxCvsqA@mail.gmail.com>
In-Reply-To: <CABzHfVki4xq3Pm+Aw_YDhwO5nS8KNXTJ-Z5ujByvNkGxxCvsqA@mail.gmail.com>
Content-Type: multipart/alternative;
 boundary="------------070609070800070004040208"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------070609070800070004040208
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi,

Thanks a million for guiding me through these hoops, and your patience 
with my confused anxiety to get this sorted out. It now works (of 
course) with these settings, and allows for a quite nice compromise. 
I'll briefly summarize problem and solution, if it can help others.

The starting point was that I needed to reverse proxy Tomcat webapps 
behind Apache, with the Tomcat running on a non-public port. 
Additionally, some Tomcat apps need access to the host name of the 
original request, in order to generate working links. In order to avoid 
the problem that the proxied Tomcat doesn't 'see' the 'proxy' prefix of 
the original request, I decided to mirror that prefix for my Tomcat apps 
as well, and settle for following Apache proxy configuration:

   ProxyPreserveHost    on
   ProxyPass/apps/     http://localhost:8082/apps/
   ProxyPassReverse/apps/     http://mydomain/apps/

(note: the proxy domain in the second argument of ProxyPassReverse makes 
sure that location headers for redirects by the Tomcat apps are 
rewritten correctly by mod_proxy).

Therefore, the Tomcat apps must be made accessible at e.g. 
http://localhost:8082/apps/my_app/, with the /app/ prefix before the 
actual name of the web app. This can be done easily by renaming the 
physical folder or WAR filename containing the web app, by adding the 
prefix, followed by a hash character (#) before the actual name of the 
application, e.g.: F:\tomcatApps\apps#my_app. This works well, except 
for Cocoon-based web apps, which choke on the hash in the filename. 
Hence, for those apps, following configuration provides a workaround:
     1. move the folder or WAR file containing the web app outside of 
the host's appBase path, e.g.: F:\cocoonApps\my_app
     2. add a file ${catalina.base}\conf\Catalina\[host 
name]\[prefix]#[app name].xml, e.g.: 
${catalina.base}\conf\Catalina\localhost\apps#my_app.xml, with following 
content:

     <Context docBase="F:/cocoonApps/my_app"/>

No further modifications of ${catalina.base}\conf\server.xml are needed.

Again, thanks for the great help!

Ron

--------------070609070800070004040208--

From users-return-233628-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 18 13:45:20 2012
Return-Path: <users-return-233628-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1DC399BAF
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 18 Apr 2012 13:45:20 +0000 (UTC)
Received: (qmail 30840 invoked by uid 500); 18 Apr 2012 13:45:16 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 30703 invoked by uid 500); 18 Apr 2012 13:45:16 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 30694 invoked by uid 99); 18 Apr 2012 13:45:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 13:45:16 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jdesodt@gmail.com designates 74.125.83.45 as permitted sender)
Received: from [74.125.83.45] (HELO mail-ee0-f45.google.com) (74.125.83.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 13:45:09 +0000
Received: by eeit10 with SMTP id t10so3141463eei.18
        for <users@tomcat.apache.org>; Wed, 18 Apr 2012 06:44:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=T59bESoGK8++K2vyzCRpxC5bYN5k1nnxk6cIEbgJOmQ=;
        b=hhmhocn5OkDcaB6GOjp6hStaea8yaPqDveEPM66M9rdp7i20Krzl5YRT7VU0um20pL
         d89klRGkeM+w0WNnGhPAsl5zmAhTdWHzZOPp8YhxJF+VoQ8QD/+d+ZJOYTYmfLxjKQN6
         wZJM0VrABaRlDA/e8cbxiSkzAeOxkgyOCOePWFM+hSzB1kiHpQZG5QvUpJ9QNZUYy4NB
         CGgYCN+vsPRdw5KwgYZx5F2Cp39irLUtNiCr/mko0t3xJqtYaeMVGkORzK4L7GH1/FsK
         CxBvKX/m+yB/6sOKTDboJ842DBCAp/OWDewV2njUFO4WjgVnAZoovTfsqRxh50HG7Eg7
         4KAQ==
MIME-Version: 1.0
Received: by 10.213.105.147 with SMTP id t19mr196297ebo.203.1334756688387;
 Wed, 18 Apr 2012 06:44:48 -0700 (PDT)
Received: by 10.213.4.194 with HTTP; Wed, 18 Apr 2012 06:44:48 -0700 (PDT)
In-Reply-To: <4F8E1D13.1020406@christopherschultz.net>
References: <CAOHnQjpKCkJGNXGphTrVG4qRLpZK-6baivLi5oAD_dHtgtCQHw@mail.gmail.com>
	<4F8E1D13.1020406@christopherschultz.net>
Date: Wed, 18 Apr 2012 15:44:48 +0200
Message-ID: <CAOHnQjooVz1VH5TeGKnPMNnoqW0RCVmtGxkZqs72WaCpQ8hSRw@mail.gmail.com>
Subject: Re: In webapp, sending multipart email with Javamail : noname
 attachment instead of message
From: Jacques Desodt <jdesodt@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=0015174c401845dce404bdf4420d

--0015174c401845dce404bdf4420d
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi Chris,

Thanks a lot for your quick reply !
My apologies for the image posted, I didn't know
it could be stripped by the mailing list.
OK, I will test your solution tonight.

I agree with you, Javamail API is really complicated,
I always used Apache Commons Email.
I will have a look at your great project.

Jacques


2012/4/18 Christopher Schultz <chris@christopherschultz.net>

> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Jacques,
>
> On 4/17/12 12:45 PM, Jacques Desodt wrote:
> > I try to send a Multipart email in a simple java method, using
> > Javamail. When i use the method in a local java app, everything is
> > fine. When i use the same method in a webapp hosted by Tomcat, i
> > got no message, but a file "noname" in attachment.
>
> Your code looks reasonable. I wonder if you are missing some system
> property when running under Tomcat, since you use the system
> properties as a basis for your JavaMail session setup.
>
> Try using an empty Properties object instead of taking
> System.getProperties() and mutating that. You might find that there is
> some property available in your standalone environment that you are
> missing in the Tomcat one.
>
> > And here are the results (i use gmail) :
> >
> > Images int=E9gr=E9es 1
>
> (I'm not sure what that means... if you attached something to your
> email, it was stripped by the mailing list).
>
> > The first (and wrong) email came from the Tomcat server. It has no
> > message, and an attachment with "noname" name. The other email is
> > good and came from my java app.
>
> What are the differences when you look at the actual source code of
> the message? You can learn a lot from looking at the raw MIME message.
>
> BTW, if you intend to move from a simple multipart text message as you
> have above to something more complicated (such as text + HTML +
> attachments) be aware that the JavaMail API is a complete main in the
> neck to use. I would highly recommend using a wrapper API such as
> commons-email or my own emailer wrapper you can find at
> http://christopherschultz.net/projects/java/
>
> I happen to like mine better ;)
>
> - -chris
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
> Comment: GPGTools - http://gpgtools.org
> Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/
>
> iEYEARECAAYFAk+OHRMACgkQ9CaO5/Lv0PDk6wCgtsLID0HPf6nNH2bFc/ThfrTl
> J58AnjuTcjIFhj1QOgESVmgMFK5jWOBC
> =3DQXQU
> -----END PGP SIGNATURE-----
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>
>

--0015174c401845dce404bdf4420d--

From users-return-233629-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 18 14:35:22 2012
Return-Path: <users-return-233629-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5886299DF
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 18 Apr 2012 14:35:22 +0000 (UTC)
Received: (qmail 86414 invoked by uid 500); 18 Apr 2012 14:35:18 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 86337 invoked by uid 500); 18 Apr 2012 14:35:18 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 86327 invoked by uid 99); 18 Apr 2012 14:35:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 14:35:18 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [199.122.28.163] (HELO mail.donnell.com) (199.122.28.163)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 14:35:10 +0000
X-CheckPoint: {4F8ED06D-0-B51C7AC7-1FFFF}
Received: from mailgate.ocie.net (mailhost.ocie.net [199.122.28.169])
 by mail.donnell.com (iPlanet Messaging Server 5.2 (built Feb 21 2002))
 with ESMTPS id <0M2O007XHJ617P@mail.donnell.com> for users@tomcat.apache.org;
 Wed, 18 Apr 2012 10:34:49 -0400 (EDT)
Received: from k9 (k9.dev.donnell.com [192.9.201.25]) by mailgate.ocie.net with
 ESMTP id HqtaAZRePoBzOYD1 for <users@tomcat.apache.org>; Wed,
 18 Apr 2012 10:34:49 -0400 (EDT)
Date: Wed, 18 Apr 2012 10:34:49 -0400
From: Mark Claassen <mac01@donnell.com>
Subject: web.xml and schema location
To: users@tomcat.apache.org
Message-id: <002001cd1d70$68e96000$3abc2000$@com>
MIME-version: 1.0
X-Mailer: Microsoft Office Outlook 12.0
Content-type: text/plain; charset=us-ascii
Content-language: en-us
Content-transfer-encoding: 7BIT
Thread-index: Ac0dcGjLjn/3td6CRVGkSlEhu56DKg==
X-CheckPoint: {4F8ED06D-0-B51C7AC7-FFFF}
X-Virus-Checked: Checked by ClamAV on apache.org

Back in Tomcat 5, we had the problem with tomcat trying to access java.sun.com.  Lots of our servers are behind firewalls, so this
caused an error in the log.  We realized one way to fix this was just to remove the schemaLocation attribute from the web.xml files.

Below is the top of the main web.xml in Tomcat 7.  I did a snoop, and it didn't seem to try to access java.sun.com this time.  Has
this been changed at some point?  Or did I just have some error in my snoop?

Thanks,
Mark


<web-app xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
         version="3.0">




---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233630-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 18 15:50:15 2012
Return-Path: <users-return-233630-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B33829B4C
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 18 Apr 2012 15:50:15 +0000 (UTC)
Received: (qmail 37788 invoked by uid 500); 18 Apr 2012 15:50:12 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 37604 invoked by uid 500); 18 Apr 2012 15:50:12 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 37594 invoked by uid 99); 18 Apr 2012 15:50:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 15:50:12 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of knst.kolinko@gmail.com designates 209.85.213.173 as permitted sender)
Received: from [209.85.213.173] (HELO mail-yx0-f173.google.com) (209.85.213.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 15:50:04 +0000
Received: by yenr5 with SMTP id r5so4698484yen.18
        for <users@tomcat.apache.org>; Wed, 18 Apr 2012 08:49:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=cdkMMUxOuf7zmW+VbCQzeK6/vmBEYVuaWqg5ubPlpuw=;
        b=kPa+gTMGm/xjlkB8VYbAvaS2hsLLnXbSyQtFQaBMpLtKfL5HSmfrhs0TNWEl8tTzFT
         TShtwvVn9KzwnXRAdrNFKlzoe/zfgQMk1RPDvHCpUdZgQHUbAQSNRNsmIffB1FixJLXG
         E0CaXryHYIc23EHT0ei6WbBBDlyxFqoH7UFdAfboMA51yPCImiMUuFBq5z5MwH9Sp/EE
         37w8gJcqWGcPHzT6e7TnPCzbWxsR7aNpqqG0L8nv8cjU+DeLXdhZanMz1j/qXEKDV8lV
         tWJinT7jw1pu/8QTzCsIVldOONZH17t0OMMWyGUXUfQ6sGjP1mZxnmYu+1b6PNJq9jpN
         gUpg==
MIME-Version: 1.0
Received: by 10.101.152.4 with SMTP id e4mr859208ano.45.1334764183984; Wed, 18
 Apr 2012 08:49:43 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Wed, 18 Apr 2012 08:49:43 -0700 (PDT)
In-Reply-To: <002001cd1d70$68e96000$3abc2000$@com>
References: <002001cd1d70$68e96000$3abc2000$@com>
Date: Wed, 18 Apr 2012 19:49:43 +0400
Message-ID: <CABzHfVmt96NcpRQPWp=by_T5MpMvW-S6Wzp91kx=Bq5nksB5Bg@mail.gmail.com>
Subject: Re: web.xml and schema location
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

2012/4/18 Mark Claassen <mac01@donnell.com>:
> Back in Tomcat 5, we had the problem with tomcat trying to access java.su=
n.com. =A0Lots of our servers are behind firewalls, so this
> caused an error in the log. =A0We realized one way to fix this was just t=
o remove the schemaLocation attribute from the web.xml files.
>
> Below is the top of the main web.xml in Tomcat 7. =A0I did a snoop, and i=
t didn't seem to try to access java.sun.com this time. =A0Has
> this been changed at some point? =A0Or did I just have some error in my s=
noop?
>

1. Do you have validation enabled?
E.g. with
org.apache.catalina.STRICT_SERVLET_COMPLIANCE=3Dtrue

2. Tomcat has all the necessary schemas bundled (servlet-api.jar). I
do not know why it was contacting external resource in your case.

>
> <web-app xmlns=3D"http://java.sun.com/xml/ns/javaee"
> =A0 =A0 =A0 =A0 xmlns:xsi=3D"http://www.w3.org/2001/XMLSchema-instance"
> =A0 =A0 =A0 =A0 xsi:schemaLocation=3D"http://java.sun.com/xml/ns/javaee h=
ttp://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
> =A0 =A0 =A0 =A0 version=3D"3.0">
>

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233631-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 18 15:56:00 2012
Return-Path: <users-return-233631-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 532B69DD4
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 18 Apr 2012 15:56:00 +0000 (UTC)
Received: (qmail 57737 invoked by uid 500); 18 Apr 2012 15:55:56 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 57677 invoked by uid 500); 18 Apr 2012 15:55:56 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 57667 invoked by uid 99); 18 Apr 2012 15:55:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 15:55:56 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [199.122.28.163] (HELO mail.donnell.com) (199.122.28.163)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 15:55:48 +0000
X-CheckPoint: {4F8EE354-0-B51C7AC7-1FFFF}
Received: from mailgate.ocie.net (mailhost.ocie.net [199.122.28.169])
 by mail.donnell.com (iPlanet Messaging Server 5.2 (built Feb 21 2002))
 with ESMTPS id <0M2O00255MWF7L@mail.donnell.com> for users@tomcat.apache.org;
 Wed, 18 Apr 2012 11:55:28 -0400 (EDT)
Received: from k9 (k9.dev.donnell.com [192.9.201.25]) by mailgate.ocie.net with
 ESMTP id Wm1lhDnOmfIXsMMA for <users@tomcat.apache.org>; Wed,
 18 Apr 2012 11:55:27 -0400 (EDT)
Date: Wed, 18 Apr 2012 11:55:27 -0400
From: Mark Claassen <mac01@donnell.com>
Subject: RE: web.xml and schema location
In-reply-to:
 <CABzHfVmt96NcpRQPWp=by_T5MpMvW-S6Wzp91kx=Bq5nksB5Bg@mail.gmail.com>
To: 'Tomcat Users List' <users@tomcat.apache.org>
Message-id: <004301cd1d7b$acb8d670$062a8350$@com>
MIME-version: 1.0
X-Mailer: Microsoft Office Outlook 12.0
Content-type: text/plain; charset=iso-8859-1
Content-language: en-us
Content-transfer-encoding: quoted-printable
Thread-index: Ac0devP4ERFZESN+Sm+DEr/XHoBkXgAAGQ0w
X-CheckPoint: {4F8EE353-0-B51C7AC7-FFFF}
References: <002001cd1d70$68e96000$3abc2000$@com>
 <CABzHfVmt96NcpRQPWp=by_T5MpMvW-S6Wzp91kx=Bq5nksB5Bg@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

> 1. Do you have validation enabled?
> E.g. with
> org.apache.catalina.STRICT_SERVLET_COMPLIANCE=3Dtrue

I don't think so (but that was a long time ago).  Anyway, I am glad to =
know that the default config does not try to contact anything
and I can leave by web.xml as is. =20

Thanks!

-----Original Message-----
From: Konstantin Kolinko [mailto:knst.kolinko@gmail.com]=20
Sent: Wednesday, April 18, 2012 11:50 AM
To: Tomcat Users List
Subject: Re: web.xml and schema location

2012/4/18 Mark Claassen <mac01@donnell.com>:
> Back in Tomcat 5, we had the problem with tomcat trying to access=20
> java.sun.com. =A0Lots of our servers are behind firewalls, so this =
caused an error in the log. =A0We realized one way to fix this was
just to remove the schemaLocation attribute from the web.xml files.
>
> Below is the top of the main web.xml in Tomcat 7. =A0I did a snoop, =
and=20
> it didn't seem to try to access java.sun.com this time. =A0Has this =
been changed at some point? =A0Or did I just have some error in my
snoop?
>

1. Do you have validation enabled?
E.g. with
org.apache.catalina.STRICT_SERVLET_COMPLIANCE=3Dtrue

2. Tomcat has all the necessary schemas bundled (servlet-api.jar). I do =
not know why it was contacting external resource in your
case.

>
> <web-app xmlns=3D"http://java.sun.com/xml/ns/javaee"
> =A0 =A0 =A0 =A0 =
xmlns:xsi=3D"http://www.w3.org/2001/XMLSchema-instance"
> =A0 =A0 =A0 =A0 =
xsi:schemaLocation=3D"http://java.sun.com/xml/ns/javaee =
http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
> =A0 =A0 =A0 =A0 version=3D"3.0">
>

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233632-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 18 16:04:08 2012
Return-Path: <users-return-233632-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A3BDC9271
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 18 Apr 2012 16:04:08 +0000 (UTC)
Received: (qmail 86815 invoked by uid 500); 18 Apr 2012 16:04:05 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 86747 invoked by uid 500); 18 Apr 2012 16:04:05 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 86736 invoked by uid 99); 18 Apr 2012 16:04:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 16:04:05 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.215.173] (HELO mail-ey0-f173.google.com) (209.85.215.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 16:03:59 +0000
Received: by eaaf11 with SMTP id f11so3188953eaa.18
        for <users@tomcat.apache.org>; Wed, 18 Apr 2012 09:03:38 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:x-gm-message-state;
        bh=mSNN5WA3c1dSzxJ3ycfl22Bx6WBs4BS4K7rdQzVq8qU=;
        b=I+LXhlvBdE97Jmdv+434dw7NKiN9JUlCEP7EZnbF89CGlTCNygQbL938W7fPcjufF5
         EaUettOAa/c+qksvA/tJUpfWYGmaCVllr1d60337slu07yW48VoKWOR09DSfwq03r5ay
         Chmu6bnRkHVG//NA6g6klbToO1chjxCPH0ah6Pa1iPLrv7tEJcuiCxSAA/nFfc8iSHw1
         ukBCAuJFE30eOxdjtPbD4HIIxcbjyj2ctB3N6IIYZ5TogriGyFbTWPikuw+Y5DbrYWyF
         gek5gWdUCKR4Tki+QZBgdnZlETJN5te0scfO68+AYdc2+qHLKqOFzoq8h63j9paZR/ow
         qkWQ==
MIME-Version: 1.0
Received: by 10.213.28.80 with SMTP id l16mr282005ebc.160.1334765017990; Wed,
 18 Apr 2012 09:03:37 -0700 (PDT)
Reply-To: victoria.kio.2011@my.bristol.ac.uk
Received: by 10.213.27.194 with HTTP; Wed, 18 Apr 2012 09:03:37 -0700 (PDT)
In-Reply-To: <4F8E8DAC.3030904@pidster.com>
References: <CADnZG66WorN4wYg9sC7wf=FOcwUdF19docRuAnKh+h0qxKzbUg@mail.gmail.com>
	<4F8E8DAC.3030904@pidster.com>
Date: Wed, 18 Apr 2012 17:03:37 +0100
Message-ID: <CADnZG67Msj2+R0uB6=J_2Ed5e7yPEq5XVbvKDVhJd3q6O=_e+w@mail.gmail.com>
Subject: Re: Generating a Keystore
From: Victoria Johnson  - Kio <victoria.kio.2011@my.bristol.ac.uk>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=0015174c18eac186dd04bdf632ad
X-Gm-Message-State: ALoCoQndJr/Z1SN07dsiJbKXi0cNt/kKhD9MmyO2U7SMKOiPi6YHgW8PN2X7Z+Y3EX64IXHJDCMm
X-Virus-Checked: Checked by ClamAV on apache.org

--0015174c18eac186dd04bdf632ad
Content-Type: text/plain; charset=ISO-8859-1

Hi Pid,

I could not generate a keystore, because I had no idea that I had to get my
Java specifically "keytool" on bin before using the rest of  this -genkey
-alias tomcat -keyalg RSA

But I was able to get that done yesterday and have SSL running perfectly
now, thanks for your interest.

I also take your "Hit return" statement in good faith and assume that would
be the most logical start off process to someone starting off with
configuration

Once again thanks.

On Wed, Apr 18, 2012 at 10:47 AM, Pid <pid@pidster.com> wrote:

> On 17/04/2012 21:16, Victoria Johnson - Kio wrote:
> > Hello,
> >
> > I am having problems generating a keystore, this is my first time
> > configuring a server, let alone Tomcat.
>
> What are your problems, exactly?
>
> > The text on Apache is really confusing me about setting up SSL on Tomcat,
> > what do I do with this command
> >
> > %JAVA_HOME%\bin\keytool -genkey -alias tomcat -keyalg RSA
>
> Hit the return after you've typed it.
> Then tell us if you have any problems or questions.
>
>
> p
>
> > Please advise.
> >
> > Thanks.
> >
> >
>
>
> --
>
> [key:62590808]
>
>


-- 
Victoria Captain Johnson-Kio
BS81EA
+44(0)7936297429
Here's my professional profile
<http://uk.linkedin.com/pub/victoria-captain-johnson-kio/19/9a5/70%20>on
LinkedIn
Personal Impact <http://twitter.com/#%21/VictoriaKio> on Twitter, and some
fun <http://www.facebook.com/kio.victoria> things I do at facebook

--0015174c18eac186dd04bdf632ad--

From users-return-233633-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 18 16:08:16 2012
Return-Path: <users-return-233633-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B51FA96AC
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 18 Apr 2012 16:08:16 +0000 (UTC)
Received: (qmail 2639 invoked by uid 500); 18 Apr 2012 16:08:13 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 2459 invoked by uid 500); 18 Apr 2012 16:08:13 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 2450 invoked by uid 99); 18 Apr 2012 16:08:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 16:08:13 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.215.173] (HELO mail-ey0-f173.google.com) (209.85.215.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 16:08:07 +0000
Received: by eaaf11 with SMTP id f11so3190687eaa.18
        for <users@tomcat.apache.org>; Wed, 18 Apr 2012 09:07:46 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:x-gm-message-state;
        bh=RoW9pTpoQtDy2hXUGlcvq+PtjkMh8K0SaraaL2sYtxQ=;
        b=kbsWINRL0BjgDevYg+F59q35jT/tKduRfFssUl4UcEXyDkLYjeb1nhjp/mXHNoVzSl
         PpEL1Tz/wUwlCOeAlgIVNvyIm32wQMTlKVt1DALT9UYHiBf+/wEsP6xggjddf57Ava8G
         o9jU6KNwmJpECGp35g5M5HTM7fxD6WM6oB/TMtchm0Cd58hZbHT4yALKz3bKMTP/nTzT
         D2sEAKhodvchnDXFok73wJzLO64BBUonKiWyRp5zIE1hR+NptEvnOuVu+hBsxzdJKq2d
         Zzc9ssk3K+h+x9o4QUTqE8ciqclAtuSh71LYDHv7p8A0aIkvFGaKbXfWlivO/hfuxCXx
         l92w==
MIME-Version: 1.0
Received: by 10.213.17.8 with SMTP id q8mr279864eba.190.1334765265964; Wed, 18
 Apr 2012 09:07:45 -0700 (PDT)
Reply-To: victoria.kio.2011@my.bristol.ac.uk
Received: by 10.213.27.194 with HTTP; Wed, 18 Apr 2012 09:07:45 -0700 (PDT)
In-Reply-To: <4F8DD326.9050703@touchtonecorp.com>
References: <CADnZG66WorN4wYg9sC7wf=FOcwUdF19docRuAnKh+h0qxKzbUg@mail.gmail.com>
	<4F8DD326.9050703@touchtonecorp.com>
Date: Wed, 18 Apr 2012 17:07:45 +0100
Message-ID: <CADnZG64px-zAvg4XFMUyFTpWZGNfEqC=9_XjcNgvgY7-HUkX_g@mail.gmail.com>
Subject: Re: Generating a Keystore
From: Victoria Johnson  - Kio <victoria.kio.2011@my.bristol.ac.uk>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=0015174c350489514b04bdf641f8
X-Gm-Message-State: ALoCoQnv5LC9U7+pvFZvHnUXmyVS9KPU/sCyWB3fDj1vLpxuFj8qoh1QBkqZ2chJcmiCEYAmiBJv
X-Virus-Checked: Checked by ClamAV on apache.org

--0015174c350489514b04bdf641f8
Content-Type: text/plain; charset=ISO-8859-1

Hello James,

Thanks for the info below, much appreciated

On Tue, Apr 17, 2012 at 9:31 PM, James Lampert <jamesl@touchtonecorp.com>wrote:

> Victoria Johnson - Kio wrote:
>  > The text on Apache is really confusing me about setting up SSL on
> Tomcat,
>
>> what do I do with this command
>>
>> %JAVA_HOME%\bin\keytool -genkey -alias tomcat -keyalg RSA
>>
>
> Well, first you need to be sure you're NOT running this on an AS/400. For
> some reason, Keytool is broken under OS/400.
>
> At any rate, you need to find out where Java is on the computer you're
> using, and put it into your executable path.
>
> Then you call the Keytool command:
>
> keytool -genkey -keystore <whatever you want to call your keystore> -alias
> <whatever alias you wish to use> -keyalg RSA [-keysize <keylength>]
>
> or for a more concrete example,
>
> -genkey -keystore foo.ks -alias bar -keyalg RSA -keysize 2048
>
> You will be prompted for a password; the default for Tomcat is "changeit";
> you should probably give it this password unless you have a reason to do
> otherwise.
>
> You will be prompted for a "first and last name." DON'T give it that. Give
> it the URL of your website, e.g., "www.foobar.com" so that people don't
> get "certificate is for the wrong domain" warnings in their browsers.
>
> You will be prompted for the particulars of who you are and where you are.
> These are important if you plan on having it signed by a CA, so that people
> don't get "self-signed certificate" warnings in their browsers.
>
> Once you have a keystore, you can hook it to your Tomcat server by editing
> the server.xml file.
>
> --
> JHHL
>
> ------------------------------**------------------------------**---------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.**apache.org<users-unsubscribe@tomcat.apache.org>
> For additional commands, e-mail: users-help@tomcat.apache.org
>
>


-- 
Victoria Captain Johnson-Kio
BS81EA
+44(0)7936297429
Here's my professional profile
<http://uk.linkedin.com/pub/victoria-captain-johnson-kio/19/9a5/70%20>on
LinkedIn
Personal Impact <http://twitter.com/#%21/VictoriaKio> on Twitter, and some
fun <http://www.facebook.com/kio.victoria> things I do at facebook

--0015174c350489514b04bdf641f8--

From users-return-233634-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 18 16:57:51 2012
Return-Path: <users-return-233634-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7C9A79C7B
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 18 Apr 2012 16:57:51 +0000 (UTC)
Received: (qmail 66554 invoked by uid 500); 18 Apr 2012 16:57:48 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 66386 invoked by uid 500); 18 Apr 2012 16:57:48 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 66377 invoked by uid 99); 18 Apr 2012 16:57:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 16:57:48 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of knst.kolinko@gmail.com designates 209.85.213.45 as permitted sender)
Received: from [209.85.213.45] (HELO mail-yw0-f45.google.com) (209.85.213.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 16:57:41 +0000
Received: by yhoo21 with SMTP id o21so4762292yho.18
        for <users@tomcat.apache.org>; Wed, 18 Apr 2012 09:57:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=94vPMgBZpAZaijjXWOKazrtuh9ipmeTyJY6eWy9qNEI=;
        b=P69DsLZx73qiEQjRUb4La6DVnMqy6H/4+o+dACo34NviF6mP0v+D7SiApuvc63XN0F
         rxLDrYQ7f8CxMLlgrtXBOzrS3PjploKbyDwNdftm7CKTxKLvBovC+orC6w5OPU3vOOie
         zSBdJDXV+uqA2vWYnpVXRAt+ef7ybxra/HX69WXyVCJK3padyI7+gF7gqMBorSR6FEsk
         1x5N4m6LBkxjia5ZqVelIZ+IUUmzHCgR6WMUER5W1u7hGqJv74wfAA4pWHsbB/AFDSJr
         OTAGkSvUcWAmJJZVsWL2TTXEZBJducjNYTLjOUQfjWTG5BxgE9r/kU9uoxfpfe+cRq5P
         XD8Q==
MIME-Version: 1.0
Received: by 10.236.187.38 with SMTP id x26mr3030021yhm.109.1334768240214;
 Wed, 18 Apr 2012 09:57:20 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Wed, 18 Apr 2012 09:57:20 -0700 (PDT)
In-Reply-To: <6368FCCCD803D64BB0931D7F5F0A3DD502278A0ABD@DEMCHP99E84MSX.ww902.siemens.net>
References: <6368FCCCD803D64BB0931D7F5F0A3DD502278A0475@DEMCHP99E84MSX.ww902.siemens.net>
	<CABzHfVnO2xiA0GphqSZG2VzXUCjumpU8Mfx-gwbd_dEQ+HXWEA@mail.gmail.com>
	<6368FCCCD803D64BB0931D7F5F0A3DD502278A0ABD@DEMCHP99E84MSX.ww902.siemens.net>
Date: Wed, 18 Apr 2012 20:57:20 +0400
Message-ID: <CABzHfVmebsHr_Bv998BpMfnhmzMjb_Ne1CL0KcGHhwB_UPqojQ@mail.gmail.com>
Subject: Re: Availability of a resource in a realm
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1

2012/4/18 Osipov, Michael <michael.osipov@siemens.com>:
> Konstantin Kolinko wrote:
>> 2012/4/17 Osipov, Michael <michael.osipov@siemens.com>:
>>> Hi folks,
>>>
>>> I have a resource declared in my context.xml (not a resource link).
>>> I want to retrieve that resource as soon as possible in my realm. I
>>> tried start() and init() but it seems like that at this time the
>>> InitialContext is not available. So at what time can I expect the
>>> context being "complete"?
>>>
>>> I am on Tomcat 6.0.35
>>>
>>
>> Look at DataSourceRealm for an example.
>>
>> IIRC, what is seen as InitialContext depends on the value of
>> Thread.getContextClassLoader() when InitialContext instance is
>> created.
>
> I have found the spot. Thanks!
> You have the same approach as me. Prior authentication you retrieve the resource. But, I do cache the resource object you don't. Are there any implications? How costly is a recurring lookup?

Personally, I'd cache the DataSource obtained through the lookup.  I
think it is oversight, though maybe it makes the realm more manageable
through JMX.


During first releases of Tomcat 7 there was some discussion about
objects created by factories in JNDI. Tomcat approach was to cache the
created object and return it for further lookups. Some recent JavaEE
spec required a new instance of the object to be created on each
lookup.   We updated implementation in early Tomcat 7 releases to
match the recent spec, but had to revert on users' demands, making it
configurable. See "singleton" attribute
http://tomcat.apache.org/tomcat-7.0-doc/config/context.html

If each lookup created a new DataSource instance it would certainly be
expensive.

I'd say that DataSourceRealm does not create new InitialContext
instance, so that avoids some initialization overhead. I do not know
how expensive is the lookup itself.

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233635-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 18 17:03:33 2012
Return-Path: <users-return-233635-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DC00B9337
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 18 Apr 2012 17:03:32 +0000 (UTC)
Received: (qmail 89408 invoked by uid 500); 18 Apr 2012 17:03:29 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 89202 invoked by uid 500); 18 Apr 2012 17:03:29 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 89192 invoked by uid 99); 18 Apr 2012 17:03:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 17:03:29 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tomcat@vittox.com designates 72.9.228.36 as permitted sender)
Received: from [72.9.228.36] (HELO vps75.vittox.com) (72.9.228.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 17:03:22 +0000
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed; d=vittox.com; s=default;
	h=Content-Transfer-Encoding:Content-Type:In-Reply-To:References:Subject:To:MIME-Version:From:Date:Message-ID; bh=JuhHQyufoP51CqmKXSAStgBG3DGApumr4UWsyA6hjNY=;
	b=QX4H09pfKki03Hi1O6h7KcI8T3kSd5h/kdSYT65m2P/H7lnWrt/pm7bkhBECk40dgc+nMlqwMbKLDyedIq22eYC8Kmim32MX25lb5BEqQ4v3hLyEv175TQ9lTSyGS+Yb;
Received: from [190.187.22.189] (port=44687 helo=[192.168.1.10])
	by vps75.vittox.com with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.77)
	(envelope-from <tomcat@vittox.com>)
	id 1SKYHU-0004l0-EX
	for users@tomcat.apache.org; Wed, 18 Apr 2012 12:03:00 -0500
Message-ID: <4F8EF3C1.4010801@vittox.com>
Date: Wed, 18 Apr 2012 12:02:57 -0500
From: Chris Patterson <tomcat@vittox.com>
User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: JasperException: The value for the useBean class ___ attribute
 is invalid
References: <4F8D9A5B.3020302@vittox.com>
In-Reply-To: <4F8D9A5B.3020302@vittox.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - vps75.vittox.com
X-AntiAbuse: Original Domain - tomcat.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - vittox.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org

More on this, now I think it is some configuration issue for the tomcat 
server:

I am using eclipse to check both JSP files, and they work without any 
problems
in my PC. When deploying to Tomcat 5.5.35 to a sub-directory like de 
project name
they also work fine. For example at www.domain.com/Test1/prg1.jsp and
www.domain.com/Test1/subdir/prg2.jsp.

If I copy them to the main directory with a shell command:
cp -pr * .. from the Test1 directory and undeploy the Test1 application
then only www.domain.com/prg1.jsp works and but the second one,
www.domain.com/subdir/prg2.jsp gives me the same (500) error:

/prg2.jsp(26,0) The value for the useBean class attribute jdbcbean.Stringbean is invalid.


Is this like a BUG ? Or perhaps something about the Java version ?
I have the following version running on a CentOS release 5.8:
java version "1.6.0_29"
Java(TM) SE Runtime Environment (build 1.6.0_29-b11)
Java HotSpot(TM) 64-Bit Server VM (build 20.4-b02, mixed mode)

Hope this info help a little more to find a solution.



El 17/04/2012 11:29 a.m., Chris Patterson escribi:
> Hello, pls help with the following issue:
>
> My JSP calls a Java Bean
> and works OK for both versions, Tomcat 5.5 and Tomcat 7.1
>
> My problem is when I move that same JSP to a sub-directory,
> then I get the 500 error:
>
> org.apache.jasper.JasperException: /StrBean.jsp(26,0) The value for 
> the useBean class attribute
> jdbcbean.StringBean is invalid.
>
> I think it could be solved changing the server.xml configuration 
> described below (?)
>
> <Host name="domain.com" appBase="/home/serverhome/public_html">
> <Alias>www.domain.com</Alias>
> <Context path="" reloadable="true" 
> docBase="/home/serverhome/public_html" debug="1"/>
> </Host>
>
> Any ideas about where to fix the problem ?
>
> Wilhelm Colln
> www.Vittox.com
>

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233636-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 18 17:09:09 2012
Return-Path: <users-return-233636-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BB0FB97E6
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 18 Apr 2012 17:09:09 +0000 (UTC)
Received: (qmail 5919 invoked by uid 500); 18 Apr 2012 17:09:06 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 5707 invoked by uid 500); 18 Apr 2012 17:09:06 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 5693 invoked by uid 99); 18 Apr 2012 17:09:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 17:09:06 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of knst.kolinko@gmail.com designates 209.85.213.173 as permitted sender)
Received: from [209.85.213.173] (HELO mail-yx0-f173.google.com) (209.85.213.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 17:08:58 +0000
Received: by yenr5 with SMTP id r5so4777812yen.18
        for <users@tomcat.apache.org>; Wed, 18 Apr 2012 10:08:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=RkXLCZVNLELr7N16D3l2B3QO9LqzUH3Q+QWSWE3Hkxo=;
        b=Q/PCofuIRMOvAKDyEBza8M5EAnwWX17JV3dZxMXgYjCBvuDq53cGEZaye1TVSUrRNk
         ND2zeNj24X8JqA3NhkUkMeDLioRpAkcL+KutbfOVXAaBOHUMd2GIMAIq34h/flycIHsH
         jo6KVWWqFagZjYWNRNQ+cieVp5sw3FFQJT+kHPNkur5pMLPA/v8iYnJiYW7Kt1c6MWll
         u9ExKHA6oX9O0SITr8fjNj7q5r5y36oj/Kr2LYrO+cixJt/Q4HUwlvzZfzub3kfnw1hS
         V+D9q6GUH9tTiLKWO5fR0M1Mf2P0LYRDJe7NNVBuAmfh47614p/HvndsAdg64PulWMn7
         lEkQ==
MIME-Version: 1.0
Received: by 10.236.75.195 with SMTP id z43mr3176332yhd.4.1334768917945; Wed,
 18 Apr 2012 10:08:37 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Wed, 18 Apr 2012 10:08:37 -0700 (PDT)
In-Reply-To: <4F8EF3C1.4010801@vittox.com>
References: <4F8D9A5B.3020302@vittox.com>
	<4F8EF3C1.4010801@vittox.com>
Date: Wed, 18 Apr 2012 21:08:37 +0400
Message-ID: <CABzHfVk3DERdgHzZtQD_uh7a5x6y-cjcpFQfDOMg06nmp3rGsA@mail.gmail.com>
Subject: Re: JasperException: The value for the useBean class ___ attribute is invalid
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1

2012/4/18 Chris Patterson <tomcat@vittox.com>:
> More on this, now I think it is some configuration issue for the tomcat
> server:
>
> I am using eclipse to check both JSP files, and they work without any
> problems
> in my PC. When deploying to Tomcat 5.5.35 to a sub-directory like de project
> name
> they also work fine. For example at www.domain.com/Test1/prg1.jsp and
> www.domain.com/Test1/subdir/prg2.jsp.
>
> If I copy them to the main directory with a shell command:
> cp -pr * .. from the Test1 directory and undeploy the Test1 application
> then only www.domain.com/prg1.jsp works and but the second one,
> www.domain.com/subdir/prg2.jsp gives me the same (500) error:
>
> /prg2.jsp(26,0) The value for the useBean class attribute
> jdbcbean.Stringbean is invalid.
>
>
> Is this like a BUG ? Or perhaps something about the Java version ?
> I have the following version running on a CentOS release 5.8:
> java version "1.6.0_29"
> Java(TM) SE Runtime Environment (build 1.6.0_29-b11)
> Java HotSpot(TM) 64-Bit Server VM (build 20.4-b02, mixed mode)
>
> Hope this info help a little more to find a solution.
>
>

What is your experience level?

Do you know what a "web application" is?
Have you read The Servlet specification, Documentation, etc.?

Do you know where your classes must be put in a Web application?

Your "main directory" terminology does not make sense.

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233637-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 18 17:21:07 2012
Return-Path: <users-return-233637-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 40BBE9D46
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 18 Apr 2012 17:21:07 +0000 (UTC)
Received: (qmail 59774 invoked by uid 500); 18 Apr 2012 17:21:04 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 59701 invoked by uid 500); 18 Apr 2012 17:21:03 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 59692 invoked by uid 99); 18 Apr 2012 17:21:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 17:21:03 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jdesodt@gmail.com designates 209.85.215.173 as permitted sender)
Received: from [209.85.215.173] (HELO mail-ey0-f173.google.com) (209.85.215.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 17:20:57 +0000
Received: by eaaf11 with SMTP id f11so3220224eaa.18
        for <users@tomcat.apache.org>; Wed, 18 Apr 2012 10:20:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=h1bwdnViT1Ogo+FvqYn1EGeyhdGR262fdv9jfYTbnww=;
        b=URayIcbz7S+rfjnsBwttrptxjwCwIoWIpEZe56wLE/NRrAqYbEDS3ZPqLhAkf8WXbx
         xOIOyQNptdUgzOIH6LvhAOiVzBR/bBG8LU2dEm4yoSfKxTDU+2TTY4kLMqzHCKXIllhB
         kSDJXvTq2xlof5JZAxM2r6cyuKlC7sn9hSlrtafSEMSvvP49Sr+0g6uB2VklH937XkP0
         ASsJOP7MmERSYFEmWDEUhQCnVS0fwAq3M0UJPEt/FuSQRH6fdupcmRke9i/wm1Y6yfBo
         LTj0hDSkAfpOl6PLdDIQEpr/msi4UpYn3Caf86SM2gSop5xg0MYKoF1aOJsCD8RTxjGj
         pRKg==
MIME-Version: 1.0
Received: by 10.213.22.9 with SMTP id l9mr279803ebb.287.1334769636385; Wed, 18
 Apr 2012 10:20:36 -0700 (PDT)
Received: by 10.213.4.194 with HTTP; Wed, 18 Apr 2012 10:20:36 -0700 (PDT)
In-Reply-To: <CAOHnQjooVz1VH5TeGKnPMNnoqW0RCVmtGxkZqs72WaCpQ8hSRw@mail.gmail.com>
References: <CAOHnQjpKCkJGNXGphTrVG4qRLpZK-6baivLi5oAD_dHtgtCQHw@mail.gmail.com>
	<4F8E1D13.1020406@christopherschultz.net>
	<CAOHnQjooVz1VH5TeGKnPMNnoqW0RCVmtGxkZqs72WaCpQ8hSRw@mail.gmail.com>
Date: Wed, 18 Apr 2012 19:20:36 +0200
Message-ID: <CAOHnQjpciUMv98YQy=rsighpRiVxh61jSVRg9g4dXRUnxGe5QQ@mail.gmail.com>
Subject: Re: In webapp, sending multipart email with Javamail : noname
 attachment instead of message
From: Jacques Desodt <jdesodt@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=0015174bf1d008a48204bdf746df
X-Virus-Checked: Checked by ClamAV on apache.org

--0015174bf1d008a48204bdf746df
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Well, a little bit disappointed...
I changed my code :

    public void sendTestMultipartMail(String host, final String username,
final String password, String from, String to) throws Exception {

        Properties properties =3D new Properties();
        properties.put("mail.smtp.host", host);
        properties.put("mail.smtp.auth", "true");
        properties.put("mail.smtp.starttls.enable", "true");
        properties.put("mail.smtp.port", "587");

        Session session =3D Session.getInstance(properties,
          new javax.mail.Authenticator() {
            protected PasswordAuthentication getPasswordAuthentication() {
                return new PasswordAuthentication(username, password);
            }
          });

        Message msg =3D new MimeMessage(session);

        msg.setFrom(new InternetAddress(from));
        msg.addRecipient(Message.RecipientType.TO, new InternetAddress(to))=
;
        msg.setSubject("Test MultiPart Mail");

        Multipart multipart =3D new MimeMultipart();

        BodyPart part1 =3D new MimeBodyPart();
        part1.setText("This is multipart mail and u read part1......");

        BodyPart part2 =3D new MimeBodyPart();
        part2.setText("This is multipart mail and u read part2......");

        multipart.addBodyPart(part1);
        multipart.addBodyPart(part2);

        msg.setContent(multipart);

        Transport.send(msg);
    }

-----------------------------------
Here is the raw message, sended by my local java app:

Return-Path: <jdesodt@gmail.com>
Received: from Jack-PC (xxx-1-166-xxx.w90-58.xxx.fr. [xx.xx.xx.237])
        by mx.google.com with ESMTPS id
fz9sm35717987wib.3.2012.04.18.09.55.23
        (version=3DTLSv1/SSLv3 cipher=3DOTHER);
        Wed, 18 Apr 2012 09:55:24 -0700 (PDT)
Date: Wed, 18 Apr 2012 09:55:24 -0700 (PDT)
From: jdesodt@gmail.com To: jdesodt@gmail.com
Message-ID: <591786211.01334768140322.JavaMail.e-soa@Jack-PC>
Subject: Test MultiPart Mail
MIME-Version: 1.0

Content-Type: multipart/mixed;
	boundary=3D"----=3D_Part_0_1395193582.1334768140066"

------=3D_Part_0_1395193582.1334768140066
Content-Type: text/plain; charset=3Dus-ascii
Content-Transfer-Encoding: 7bit

This is multipart mail and u read part1......
------=3D_Part_0_1395193582.1334768140066
Content-Type: text/plain; charset=3Dus-ascii
Content-Transfer-Encoding: 7bit

This is multipart mail and u read part2......
------=3D_Part_0_1395193582.1334768140066--


------------------------------------
and here is the raw message, sended by my webapp via tomcat :

Return-Path: <jdesodt@gmail.com>
Received: from Jack-PC (xxx-1-166-xxx.w90-58.xxx.fr. [xx.xx.xx.237])
        by mx.google.com with ESMTPS id e6sm35753185wix.8.2012.04.18.10.00.=
33
        (version=3DTLSv1/SSLv3 cipher=3DOTHER);
        Wed, 18 Apr 2012 10:00:33 -0700 (PDT)
Date: Wed, 18 Apr 2012 10:00:33 -0700 (PDT)
From: jdesodt@gmail.com
To: jdesodt@gmail.com
Message-ID: <1292444743.1.1334768450071.JavaMail.e-soa@Jack-PC>
Subject: Test MultiPart Mail
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary=3D"----=3D_Part_0_623107838.1334768449974"


... and that's all...
Why ? I don't understand. Same method, same smtp server.
Any idea ?

Jacques



2012/4/18 Jacques Desodt <jdesodt@gmail.com>

> Hi Chris,
>
> Thanks a lot for your quick reply !
> My apologies for the image posted, I didn't know
> it could be stripped by the mailing list.
> OK, I will test your solution tonight.
>
> I agree with you, Javamail API is really complicated,
> I always used Apache Commons Email.
> I will have a look at your great project.
>
> Jacques
>
>
> 2012/4/18 Christopher Schultz <chris@christopherschultz.net>
>
>> -----BEGIN PGP SIGNED MESSAGE-----
>> Hash: SHA1
>>
>> Jacques,
>>
>> On 4/17/12 12:45 PM, Jacques Desodt wrote:
>> > I try to send a Multipart email in a simple java method, using
>> > Javamail. When i use the method in a local java app, everything is
>> > fine. When i use the same method in a webapp hosted by Tomcat, i
>> > got no message, but a file "noname" in attachment.
>>
>> Your code looks reasonable. I wonder if you are missing some system
>> property when running under Tomcat, since you use the system
>> properties as a basis for your JavaMail session setup.
>>
>> Try using an empty Properties object instead of taking
>> System.getProperties() and mutating that. You might find that there is
>> some property available in your standalone environment that you are
>> missing in the Tomcat one.
>>
>> > And here are the results (i use gmail) :
>> >
>> > Images int=E9gr=E9es 1
>>
>> (I'm not sure what that means... if you attached something to your
>> email, it was stripped by the mailing list).
>>
>> > The first (and wrong) email came from the Tomcat server. It has no
>> > message, and an attachment with "noname" name. The other email is
>> > good and came from my java app.
>>
>> What are the differences when you look at the actual source code of
>> the message? You can learn a lot from looking at the raw MIME message.
>>
>> BTW, if you intend to move from a simple multipart text message as you
>> have above to something more complicated (such as text + HTML +
>> attachments) be aware that the JavaMail API is a complete main in the
>> neck to use. I would highly recommend using a wrapper API such as
>> commons-email or my own emailer wrapper you can find at
>> http://christopherschultz.net/projects/java/
>>
>> I happen to like mine better ;)
>>
>> - -chris
>> -----BEGIN PGP SIGNATURE-----
>> Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
>> Comment: GPGTools - http://gpgtools.org
>> Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/
>>
>> iEYEARECAAYFAk+OHRMACgkQ9CaO5/Lv0PDk6wCgtsLID0HPf6nNH2bFc/ThfrTl
>> J58AnjuTcjIFhj1QOgESVmgMFK5jWOBC
>> =3DQXQU
>> -----END PGP SIGNATURE-----
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>> For additional commands, e-mail: users-help@tomcat.apache.org
>>
>>
>

--0015174bf1d008a48204bdf746df--

From users-return-233638-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 18 17:27:35 2012
Return-Path: <users-return-233638-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2B6AC993B
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 18 Apr 2012 17:27:35 +0000 (UTC)
Received: (qmail 10060 invoked by uid 500); 18 Apr 2012 17:27:31 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 10011 invoked by uid 500); 18 Apr 2012 17:27:31 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 10000 invoked by uid 99); 18 Apr 2012 17:27:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 17:27:31 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of debabrattaj@gmail.com designates 209.85.215.45 as permitted sender)
Received: from [209.85.215.45] (HELO mail-lpp01m010-f45.google.com) (209.85.215.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 17:27:25 +0000
Received: by lahe6 with SMTP id e6so7352340lah.18
        for <users@tomcat.apache.org>; Wed, 18 Apr 2012 10:27:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=8PJfjRdJlbbnoc7VZDzjKCr54cWW8m3B2N54KftwvZI=;
        b=gW8BKt1/JuBlr21VAo2wVFsQ/iXQJ4anF0JwHK24HCgvm15cldzMX72m8V/lfD0YiG
         uoFr/mxh+urQuROpRKBxrXIJgxZJ13ZY6yttIsKJORyU/P52xYdBzQ8HXCswela6TTr+
         Wnnvfz3J0+PeHDrD+r8HJEZMlaVI4cfcBwtWAk27J1Ing1y5O90u1v5+QNfS56/JFC5g
         5E9uzqsic5cHNSSzHKr+NuQipz4blutCoFq4Lo6c22U28gAHrOfS9nHSNDUUX8tZJVit
         kjQqbm7qNWWEMswfHcXOYm3zq2pnbkO6ewvurzsMQeOZBMoxDlVA44m1X6TGMsDR4Qx0
         eWbg==
MIME-Version: 1.0
Received: by 10.152.148.9 with SMTP id to9mr2905099lab.6.1334770023552; Wed,
 18 Apr 2012 10:27:03 -0700 (PDT)
Received: by 10.112.127.71 with HTTP; Wed, 18 Apr 2012 10:27:03 -0700 (PDT)
Date: Wed, 18 Apr 2012 22:57:03 +0530
Message-ID: <CAHjK=Ow5QJPLYi2hrJFY7Zw33mST+T62=H-8iM7pOvX_nmbFjw@mail.gmail.com>
Subject: Access to Tomcat server has not been authorized
From: Debabratta Jena <debabrattaj@gmail.com>
To: users <users@tomcat.apache.org>
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Sir,

I have used glassfish in netbeans, now I changed to tomcat and when I
run my web application that I have created in glassfish gives me the
error :
**Deployment error:
  Access to Tomcat server has not been authorized. Set the correct
username and password with the "manager-script" role in the Tomcat
customizer in the Server Manager.**
I have added a role with name "manager-script" in conf/tomcat-user.xml
but where is my Server Manager? I did'nt find it.
Please help me.

thanks and regards
-- 
debabratta jena

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233639-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 18 17:32:35 2012
Return-Path: <users-return-233639-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5178595F2
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 18 Apr 2012 17:32:35 +0000 (UTC)
Received: (qmail 33619 invoked by uid 500); 18 Apr 2012 17:32:31 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 33542 invoked by uid 500); 18 Apr 2012 17:32:31 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 33532 invoked by uid 99); 18 Apr 2012 17:32:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 17:32:31 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of knst.kolinko@gmail.com designates 209.85.213.173 as permitted sender)
Received: from [209.85.213.173] (HELO mail-yx0-f173.google.com) (209.85.213.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 17:32:25 +0000
Received: by yenr5 with SMTP id r5so4798823yen.18
        for <users@tomcat.apache.org>; Wed, 18 Apr 2012 10:32:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=ZbGS2N52EvlmDwBEtzEUht+ZnVlAd/IPHmJjtr6lbF8=;
        b=lQUT/qUmXmS9Y/S72BmaeymbQY8HrfGuq5pWxSKSF31ckxCn6Ya2C8jXC20MFZMeE2
         3GTR3WgD3L6v2etmdqSpy+TE8RoCeQ9ExTsBUuwyhEvdjidKHoL5HWUTLWarJ6iToB4R
         eUuvlUTN5k6c4iRWFQaY/+glsy5785zOcGVsyJekOJdghoS9ckwGMrLFRZDBUygTez4P
         pefFPckvcodXDfPJ+2gYgHEv1jmYPYhAwQBD3pY6AZKtlsF7g5JZz5xAvqaqp/y53M5/
         ayZ1ARowvEShz0v84dvxW4ZdTAmuTaQ7eUfrbTdPijsdiK4YVM7uy0Epy6YUkLqMlddW
         e81Q==
MIME-Version: 1.0
Received: by 10.236.75.195 with SMTP id z43mr3263717yhd.4.1334770324915; Wed,
 18 Apr 2012 10:32:04 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Wed, 18 Apr 2012 10:32:04 -0700 (PDT)
In-Reply-To: <CAHjK=Ow5QJPLYi2hrJFY7Zw33mST+T62=H-8iM7pOvX_nmbFjw@mail.gmail.com>
References: <CAHjK=Ow5QJPLYi2hrJFY7Zw33mST+T62=H-8iM7pOvX_nmbFjw@mail.gmail.com>
Date: Wed, 18 Apr 2012 21:32:04 +0400
Message-ID: <CABzHfVn0b0aUPDrTBkBmYgjTpROP1zOrt6pAmfVeUCDbEpepRA@mail.gmail.com>
Subject: Re: Access to Tomcat server has not been authorized
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

2012/4/18 Debabratta Jena <debabrattaj@gmail.com>:
> Hello Sir,
>
> I have used glassfish in netbeans, now I changed to tomcat and when I
> run my web application that I have created in glassfish gives me the
> error :
> **Deployment error:
> =A0Access to Tomcat server has not been authorized. Set the correct
> username and password with the "manager-script" role in the Tomcat
> customizer in the Server Manager.**
> I have added a role with name "manager-script" in conf/tomcat-user.xml
> but where is my Server Manager? I did'nt find it.

http://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html

I do not know why Netbeans needs access to it.  It is a problem of
Netbeans, not of your webapp. Maybe they have some explanation in
their docs.


Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233640-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 18 18:22:37 2012
Return-Path: <users-return-233640-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1D39897B7
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 18 Apr 2012 18:22:37 +0000 (UTC)
Received: (qmail 23440 invoked by uid 500); 18 Apr 2012 18:22:33 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 23386 invoked by uid 500); 18 Apr 2012 18:22:33 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 23376 invoked by uid 99); 18 Apr 2012 18:22:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 18:22:33 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of knst.kolinko@gmail.com designates 209.85.160.173 as permitted sender)
Received: from [209.85.160.173] (HELO mail-gy0-f173.google.com) (209.85.160.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 18:22:27 +0000
Received: by ghrr14 with SMTP id r14so4833778ghr.18
        for <users@tomcat.apache.org>; Wed, 18 Apr 2012 11:22:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=l7iv9KKoj3Pd4V/jpLoMXpOb0ERfCk9NEKo1NswDf2g=;
        b=P2uvC/8LlkSa7I5Uu6VhsiCQrtF8DIselZSPWDtIMVInbYt2LLS4WzHbXbJyozg+H6
         gL0DFonDUU7iz4QP2AJgkceSq6MtD30Rhekij9jvdjhE3mo3mxwmjLkNblWelVBaNrFA
         wdSbK75tBY5wk6OmzRTVPGV4+tS2cdxqxra9+tvObha3v6pTE8uRmphvmb5q4302hmF7
         Ujjv1MAiNo9d4FSKGc51ygBC6O2Qfe7ldA//XQvc4WqkYNYkWHL1RAnVfuHojyIWfC9H
         R0bEYD4Ens0g1tbRglsaxQlfMnx6xQQDcjrFIXd6831BE15oHtmIncvXyjTVZTst3w54
         KNlQ==
MIME-Version: 1.0
Received: by 10.236.174.35 with SMTP id w23mr3302423yhl.35.1334773325392; Wed,
 18 Apr 2012 11:22:05 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Wed, 18 Apr 2012 11:22:05 -0700 (PDT)
In-Reply-To: <CAOHnQjpciUMv98YQy=rsighpRiVxh61jSVRg9g4dXRUnxGe5QQ@mail.gmail.com>
References: <CAOHnQjpKCkJGNXGphTrVG4qRLpZK-6baivLi5oAD_dHtgtCQHw@mail.gmail.com>
	<4F8E1D13.1020406@christopherschultz.net>
	<CAOHnQjooVz1VH5TeGKnPMNnoqW0RCVmtGxkZqs72WaCpQ8hSRw@mail.gmail.com>
	<CAOHnQjpciUMv98YQy=rsighpRiVxh61jSVRg9g4dXRUnxGe5QQ@mail.gmail.com>
Date: Wed, 18 Apr 2012 22:22:05 +0400
Message-ID: <CABzHfVmEt2WXhW0B2nHXmMWK9Q7hKoHHYW98JObxwq1gFwHR5g@mail.gmail.com>
Subject: Re: In webapp, sending multipart email with Javamail : noname
 attachment instead of message
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

2012/4/18 Jacques Desodt <jdesodt@gmail.com>:
> Well, a little bit disappointed...
> I changed my code :
>
> =A0 =A0public void sendTestMultipartMail(String host, final String userna=
me,
> final String password, String from, String to) throws Exception {
>
> =A0 =A0 =A0 =A0Properties properties =3D new Properties();
> =A0 =A0 =A0 =A0properties.put("mail.smtp.host", host);
> =A0 =A0 =A0 =A0properties.put("mail.smtp.auth", "true");
> =A0 =A0 =A0 =A0properties.put("mail.smtp.starttls.enable", "true");
> =A0 =A0 =A0 =A0properties.put("mail.smtp.port", "587");
>
> =A0 =A0 =A0 =A0Session session =3D Session.getInstance(properties,
> =A0 =A0 =A0 =A0 =A0new javax.mail.Authenticator() {
> =A0 =A0 =A0 =A0 =A0 =A0protected PasswordAuthentication getPasswordAuthen=
tication() {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0return new PasswordAuthentication(username=
, password);
> =A0 =A0 =A0 =A0 =A0 =A0}
> =A0 =A0 =A0 =A0 =A0});
>
> =A0 =A0 =A0 =A0Message msg =3D new MimeMessage(session);
>
> =A0 =A0 =A0 =A0msg.setFrom(new InternetAddress(from));
> =A0 =A0 =A0 =A0msg.addRecipient(Message.RecipientType.TO, new InternetAdd=
ress(to));
> =A0 =A0 =A0 =A0msg.setSubject("Test MultiPart Mail");
>
> =A0 =A0 =A0 =A0Multipart multipart =3D new MimeMultipart();
>
> =A0 =A0 =A0 =A0BodyPart part1 =3D new MimeBodyPart();
> =A0 =A0 =A0 =A0part1.setText("This is multipart mail and u read part1....=
..");
>
> =A0 =A0 =A0 =A0BodyPart part2 =3D new MimeBodyPart();
> =A0 =A0 =A0 =A0part2.setText("This is multipart mail and u read part2....=
..");
>
> =A0 =A0 =A0 =A0multipart.addBodyPart(part1);
> =A0 =A0 =A0 =A0multipart.addBodyPart(part2);
>
> =A0 =A0 =A0 =A0msg.setContent(multipart);
>
> =A0 =A0 =A0 =A0Transport.send(msg);
> =A0 =A0}
>
> -----------------------------------
> Here is the raw message, sended by my local java app:
>
>(...)
> ... and that's all...
> Why ? I don't understand. Same method, same smtp server.
> Any idea ?

Different libraries?

Try to check, what implementation is returned by those calls,
Session.getInstance(..)

Try running with a debugger,

http://wiki.apache.org/tomcat/FAQ/Developing#Debugging

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233641-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 18 18:26:14 2012
Return-Path: <users-return-233641-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2960B965C
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 18 Apr 2012 18:26:14 +0000 (UTC)
Received: (qmail 38569 invoked by uid 500); 18 Apr 2012 18:26:10 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 38431 invoked by uid 500); 18 Apr 2012 18:26:10 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 38422 invoked by uid 99); 18 Apr 2012 18:26:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 18:26:10 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of knst.kolinko@gmail.com designates 209.85.213.173 as permitted sender)
Received: from [209.85.213.173] (HELO mail-yx0-f173.google.com) (209.85.213.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 18:26:03 +0000
Received: by yenr5 with SMTP id r5so4847958yen.18
        for <users@tomcat.apache.org>; Wed, 18 Apr 2012 11:25:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=Imr4NyBz8fXjkIZW/vq5FmJBDYOQcPvJg+aamvJVDX8=;
        b=zhQ+mWqwDOYbVC+UYnGxaueERrohEO7s8vwA0t/5eJjj2N9J9p6u3guiNaniPjubIm
         VT9xOY2JQTN+rJfPvB6ma8irSl7I1GW5fy0ASYk4n8905WRnFMJrD2zHLqOeTt15xDgi
         N73k/BxMnQcbpAVgE0Yqk5ENf7+XHjibf+3ARrFMyvj5qO/YODmFeEAeV9Y2XHKZR5X8
         C/XUvsI/Us1RLUcQPLnTKeRSeRH9DosCCHOQT1YOQ0a2HWU8IW9CveoBmYkNmubEf/NR
         CAHoMI8vEHPBzMvmZgbvMjmeo5Lb6d/kMKQjeKqmk5jX1iFvO3O1JPuqXv7vizW150ZY
         UZog==
MIME-Version: 1.0
Received: by 10.236.170.71 with SMTP id o47mr3276317yhl.104.1334773542281;
 Wed, 18 Apr 2012 11:25:42 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Wed, 18 Apr 2012 11:25:42 -0700 (PDT)
In-Reply-To: <CABzHfVmEt2WXhW0B2nHXmMWK9Q7hKoHHYW98JObxwq1gFwHR5g@mail.gmail.com>
References: <CAOHnQjpKCkJGNXGphTrVG4qRLpZK-6baivLi5oAD_dHtgtCQHw@mail.gmail.com>
	<4F8E1D13.1020406@christopherschultz.net>
	<CAOHnQjooVz1VH5TeGKnPMNnoqW0RCVmtGxkZqs72WaCpQ8hSRw@mail.gmail.com>
	<CAOHnQjpciUMv98YQy=rsighpRiVxh61jSVRg9g4dXRUnxGe5QQ@mail.gmail.com>
	<CABzHfVmEt2WXhW0B2nHXmMWK9Q7hKoHHYW98JObxwq1gFwHR5g@mail.gmail.com>
Date: Wed, 18 Apr 2012 22:25:42 +0400
Message-ID: <CABzHfV=_H7H6Sybs2fxjbUOzOU4Ze_-J=qKTOKXcDbsX=ZOgiQ@mail.gmail.com>
Subject: Re: In webapp, sending multipart email with Javamail : noname
 attachment instead of message
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1

2012/4/18 Konstantin Kolinko <knst.kolinko@gmail.com>:
> 2012/4/18 Jacques Desodt <jdesodt@gmail.com>:
>> Well, a little bit disappointed...
>> I changed my code :
>>
>>(...)
>> ... and that's all...
>> Why ? I don't understand. Same method, same smtp server.
>> Any idea ?
>
> Different libraries?
>
> Try to check, what implementation is returned by those calls,
> Session.getInstance(..)
>
> Try running with a debugger,
>
> http://wiki.apache.org/tomcat/FAQ/Developing#Debugging


BTW, you have not told us, what Tomcat x.y.z version you are using.

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233642-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 18 20:03:13 2012
Return-Path: <users-return-233642-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 78BB9CC61
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 18 Apr 2012 20:03:13 +0000 (UTC)
Received: (qmail 73329 invoked by uid 500); 18 Apr 2012 20:03:09 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 73271 invoked by uid 500); 18 Apr 2012 20:03:09 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 73260 invoked by uid 99); 18 Apr 2012 20:03:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 20:03:09 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pid@pidster.com designates 209.85.212.177 as permitted sender)
Received: from [209.85.212.177] (HELO mail-wi0-f177.google.com) (209.85.212.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 20:03:02 +0000
Received: by wibhj13 with SMTP id hj13so802777wib.0
        for <users@tomcat.apache.org>; Wed, 18 Apr 2012 13:02:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type;
        bh=unMRaonRpZXuTTo2iZwIGCjP2hrJ6qgoehRhu0ixNuY=;
        b=NWS873AjPB1wye7F2iyWWk6XFZhOBa0PWfuLu0LsIT4OaPdpwpzhNsb2sQD3/usDRR
         9RbEV50LsU/nGJrXQ7qI8Ft1ysepGqiLlj5eIDTFy4lDDV/MH/HwYYs+wSQu8zLEAtk7
         KGb2uJlSbjc4sLwo8hCDq9OhUxmr1l7W/WlBI=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type:x-gm-message-state;
        bh=unMRaonRpZXuTTo2iZwIGCjP2hrJ6qgoehRhu0ixNuY=;
        b=f+cGBmI1vUCIWmRmy4lXeErfYkO/aRmmrpph8ydQ8sP6cqGQD4j3Z00oWdTppnjwrq
         IGB1S6bv7DX/C86/om9V24rN4wqZwl3/WUCF0pElWo3Av4f7bRSSLyk+TEM/ZkRJsW4Q
         VlYbEJX9iIEpEB40+gnjGybgAUeHi14JurydVXZJjBbaf/7Cruh6u1PD00zRStJWqDH3
         M5zEujz3RSCFrYtaZCUHsdrPqGhfXkGMEi8qTr6u8V+i88A8urR8o2CzJhB6sKMzHI5N
         yxUneEMSrDI0Ef/r2vmNDP1HtQ3hQmWURaim+hZq9+R5PJDSOleCpdv80scn1VSLSZHm
         m0RQ==
Received: by 10.180.87.106 with SMTP id w10mr9296939wiz.2.1334779358811;
        Wed, 18 Apr 2012 13:02:38 -0700 (PDT)
Received: from Asura.local ([81.134.122.147])
        by mx.google.com with ESMTPS id ex2sm7809033wib.8.2012.04.18.13.02.34
        (version=SSLv3 cipher=OTHER);
        Wed, 18 Apr 2012 13:02:37 -0700 (PDT)
Message-ID: <4F8F1DCC.30004@pidster.com>
Date: Wed, 18 Apr 2012 21:02:20 +0100
From: Pid <pid@pidster.com>
Organization: Pidster Inc
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: JasperException: The value for the useBean class ___ attribute
 is invalid
References: <4F8D9A5B.3020302@vittox.com> <4F8EF3C1.4010801@vittox.com>
In-Reply-To: <4F8EF3C1.4010801@vittox.com>
X-Enigmail-Version: 1.4
OpenPGP: id=62590808
Content-Type: multipart/signed; micalg=pgp-sha512;
 protocol="application/pgp-signature";
 boundary="------------enig1F596F0467AE4C05C7C9EDF1"
X-Gm-Message-State: ALoCoQkLtz3KmX6QaKJlpNPa4dR1jhaHUD+WUafF0IF0VvZRoMx7P04e0ZiRjzXF6WOGct0e9qEF
X-Virus-Checked: Checked by ClamAV on apache.org

--------------enig1F596F0467AE4C05C7C9EDF1
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

On 18/04/2012 18:02, Chris Patterson wrote:

> Is this like a BUG ?=20

Doubt it.

> Or perhaps something about the Java version ?

s/Java/Developer/g


p

--=20

[key:62590808]


--------------enig1F596F0467AE4C05C7C9EDF1
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.18 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iQIcBAEBCgAGBQJPjx3SAAoJEGoM2OGpOvr9wzIP/3R4+x/4jPJqovvEdYjY6NU6
8wDYzGI89KgmnyVpIAA0FzHz2jrPUeVpJJG5cIKmgbZ4oVMhPXGTc49psff7GIZW
kruj0TnDcAPY7kuMeLo0yRJzPEwe7HrpqQ81YAHYKklS93SWsW2U8G3463rIAAHu
VZMr3n/cFr5qZokDg307TPuxMhJ1KOqwq6GhnZ0Kvq7rVrzXKV0Nbpaz6hgp3g13
E8Rn/GZYo4EZO7O2ewmAbBR7rnTCkRqqUANNlNBPfIwZBqEk9w3IbO0bLG8xvu48
zHKC/1ztyN71ExHS8tc9Ry/yfUF4M2igisxFWzFBBdsld6+Q1R06J24FeY3mo14T
RorHWvSGFwpkNSX1/BhiDjG0b1oLUsRsmc5mNJWzlS0uTYBSXKcV6kKMrBR47GZ6
FajJGVTEPOB50h+JR4TVy0O/FehcpzFNeHefI2ojV0DvjPz/PGZjHPiQ4UvFD+oN
Zq9IbufZ7bGKMDuATvCIz4YJGvpLFyo2G756hGi8TLrMFtFJPKG1zAFuDEvMx3VG
WPI423VcxOANySMYumPxfXlDhQjOgcty2pT9AEWNUf7YWF0fKm7rsPybqoymhO9x
5s/uhuamp6BhxP77rI1f9Mnxsihku9yW++nk+YFllQ5Ntubaj5+3DAUU7YVHai74
mzr61ODt/9KnqyawM26V
=FhBt
-----END PGP SIGNATURE-----

--------------enig1F596F0467AE4C05C7C9EDF1--

From users-return-233643-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 18 20:05:56 2012
Return-Path: <users-return-233643-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6D8BFCD61
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 18 Apr 2012 20:05:56 +0000 (UTC)
Received: (qmail 88312 invoked by uid 500); 18 Apr 2012 20:05:52 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 88141 invoked by uid 500); 18 Apr 2012 20:05:52 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 88131 invoked by uid 99); 18 Apr 2012 20:05:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 20:05:52 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pid@pidster.com designates 74.125.82.173 as permitted sender)
Received: from [74.125.82.173] (HELO mail-we0-f173.google.com) (74.125.82.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 20:05:46 +0000
Received: by werp12 with SMTP id p12so6686836wer.18
        for <users@tomcat.apache.org>; Wed, 18 Apr 2012 13:05:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type;
        bh=Lk1uIeTrGpKN2CCQzViEWpm9nyy61wBMq5ConoEQbbc=;
        b=jCmJi8fUGxQGdcFQYW33sOeYomnn65lImiuUbPHbpxCRkfqGXvaDgeVR4K2NiW3Edi
         2b5xZWH51iwgVNMTQJtXiup7YcxpiT5LujglTgmc4N2Y9vo51zKbpdYWGXXpxlGJ4EWJ
         ej1yK79cnQZo14BWztNBMFKmCfL8GcYUSLzAQ=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type:x-gm-message-state;
        bh=Lk1uIeTrGpKN2CCQzViEWpm9nyy61wBMq5ConoEQbbc=;
        b=h6NFsTKMHX7RM3mJvuTEF4D/2gI6JX+rYBXPJHN+zx4w6M+5SDmpwyRzhz3HD5Gt2l
         Jqp3VhvwSv+osB6toD5K1AoBLz3pV8UgCABY3VjJIdWd4dVbHcrmxDlHaV51viD9pGxM
         cCnSYS1d3NmCpZntTHQgrrXeD6LHh7Hqdidto202A3E30GivUjw/XBe76SBcK+9FjM5z
         77BX0QP2vtgSxFte7N6NY4FdE5rlnEhb8ZGRMQRy5R380P+lzf/SqoXjPOVMVUj+s7nH
         TX+XOrNsU3vVqY5LwAxrZo6jfRt9G12rofVjt+uUjDJzV2R22JDJp004DHTGPyKnl13/
         X8SA==
Received: by 10.180.24.7 with SMTP id q7mr19935720wif.11.1334779524843;
        Wed, 18 Apr 2012 13:05:24 -0700 (PDT)
Received: from Asura.local ([81.134.122.147])
        by mx.google.com with ESMTPS id ex2sm7834805wib.8.2012.04.18.13.05.22
        (version=SSLv3 cipher=OTHER);
        Wed, 18 Apr 2012 13:05:23 -0700 (PDT)
Message-ID: <4F8F1E7C.9030107@pidster.com>
Date: Wed, 18 Apr 2012 21:05:16 +0100
From: Pid <pid@pidster.com>
Organization: Pidster Inc
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Why @WebServlet annotation is not processed when web.xml is version
 2.5?
References: <CAAu+a+vquBRKStbeHHvrnf_ph2wLvKyi=PALV8jJoDUk7=ZXiQ@mail.gmail.com> <4F8DC312.9020307@pidster.com> <CAAu+a+thPnkB1u4Wax6rdoRu1=qf9V-wDG=09Cyr3os2pskTcQ@mail.gmail.com> <CABzHfVm2La1EgKnnEtWOn4CZoXbwJnvAFpkJyKx8GKGChTxefQ@mail.gmail.com>
In-Reply-To: <CABzHfVm2La1EgKnnEtWOn4CZoXbwJnvAFpkJyKx8GKGChTxefQ@mail.gmail.com>
X-Enigmail-Version: 1.4
OpenPGP: id=62590808
Content-Type: multipart/signed; micalg=pgp-sha512;
 protocol="application/pgp-signature";
 boundary="------------enig73535A185219E37EF5F2018F"
X-Gm-Message-State: ALoCoQlOACzH02koN3Xj5VfVBxotieMJUYSPAVK6qY0HWGzzycmVP+zScYhE8hXWTcEx6xg3tEle
X-Virus-Checked: Checked by ClamAV on apache.org

--------------enig73535A185219E37EF5F2018F
Content-Type: text/plain; charset=KOI8-R
Content-Transfer-Encoding: quoted-printable

On 18/04/2012 11:27, Konstantin Kolinko wrote:
> 18 =C1=D0=D2=C5=CC=D1 2012 =C7. 12:15 =D0=CF=CC=D8=DA=CF=D7=C1=D4=C5=CC=
=D8 maria petrova
> <mims8010@googlemail.com> =CE=C1=D0=C9=D3=C1=CC:
>> Hi,
>>
>> Thanks for the clarification. I agree that the specification is not
>> absolutely clear on this matter in the given extract.
>> Anyway, I simply would like to ask you, as Tomcat experts, for hints o=
r
>> ideas how to configure my Tomcat to make it pass the Servlet 3.0 CTS.
>> I know that Tomcat 7.x regularly covers the complete Servlet 3.0 CTS a=
nd
>> probably there is a hidden property that I'm missing?
>>
>=20
> An obvious thing:
> http://tomcat.apache.org/tomcat-7.0-doc/config/systemprops.html
> org.apache.catalina.STRICT_SERVLET_COMPLIANCE=3Dtrue
>=20
> As far as I remember, specifics of TCK cannot be discussed on a public =
list.

I think mine was better [sniff]


p


--=20

[key:62590808]


--------------enig73535A185219E37EF5F2018F
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.18 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iQIcBAEBCgAGBQJPjx58AAoJEGoM2OGpOvr9unwP/RBBiyZRcubJf+LYr8Fg+VSZ
oZeTd63bnj+E8ZLpHoHO+Kga3lPGh6w4OAqJjMlOpc7+5IS0uSW5jtr7rKztlKW8
naLpS+LtXkiXTb7valVXV+ERy0vyIJBNhqETcT7QHbZaYV+/QZh1pMAGbguwqEZP
k6gINbAbON2d0GPd5u/URbzA0TzXGQHzb5gbp5RMgIu7K1ww6gpkvi+PBW59uscR
ulLFn8UHT8/PilgCPog2QTKdKPuN6SE/qq9wfwvdPCwkw2YziCB0XBqtnMAFLORi
xdrNZBUsqSk13P7CS1tC8BfBXhfrY9eoSOP6nTQDYvq88QCUAOHtra+7HUWfHy/y
KO4MZquW7kmJCijVt69MG0rc0MEZa9RohjQuNYc4mCch4F4fULna9QKheELN+WBG
Bte63479y7NKTd0HuxaDzliRZQ6DDfGf3JG3auDaOSDsSkIFP2irarAheDfuW82W
Kp50ABMdX4mnsQM3VyWe1MFV7kDqUxxFUefnGh9g0s/rNcv3/jg6KjZZy1Dwk5w6
xn7TIyHpCac/rLKM3LUBmslhXhwOdRXd0v/w9KoeuCadM97X0RhNb8dMZrXYk3uC
wG3cVb4fkKPkf0cdJkNK29RUKOE3KO2vW6FIDbuxjEh1apCawpjfE3zIwgMfzXrt
goWnktrG1AAb+w8gmp94
=xRgZ
-----END PGP SIGNATURE-----

--------------enig73535A185219E37EF5F2018F--

From users-return-233644-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 18 20:07:17 2012
Return-Path: <users-return-233644-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AC0FACE87
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 18 Apr 2012 20:07:17 +0000 (UTC)
Received: (qmail 97498 invoked by uid 500); 18 Apr 2012 20:07:14 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 97424 invoked by uid 500); 18 Apr 2012 20:07:14 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 97410 invoked by uid 99); 18 Apr 2012 20:07:14 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 20:07:14 +0000
Received: from localhost (HELO fc16x86v0.jboss.hr) (127.0.0.1)
  (smtp-auth username mturk, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 20:07:14 +0000
Message-ID: <4F8F1EEB.2070000@apache.org>
Date: Wed, 18 Apr 2012 22:07:07 +0200
From: Mladen Turk <mturk@apache.org>
User-Agent: Mozilla/5.0 (X11; Linux i686; rv:11.0) Gecko/20120329 Thunderbird/11.0.1
MIME-Version: 1.0
To: users@tomcat.apache.org
Subject: Re: 64bit windows mod_jk connector download for apache httpd 2.4
References: <CAG6aRdX7aA9J8RZ1OAhyUQCayi2D2E=_9FJryTH4Z1v7dDSosw@mail.gmail.com>
In-Reply-To: <CAG6aRdX7aA9J8RZ1OAhyUQCayi2D2E=_9FJryTH4Z1v7dDSosw@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

On 04/18/2012 02:00 PM, chris derham wrote:
> All,
>
> Our setup has apache tomcat running behind apache httpd using mod_jk. I
> would like to upgrade to apache 2.4, but for this I need to find a 64bit
> mod_jk release for httpd 2.4. The binaries contained at
> http://tomcat.apache.org/download-connectors.cgi 32 bit httpd connectors,
> or a 64bit iis one.
>

Why would you need a 64-bit httpd at the first place
especially on windows.

Anyhow, building should be easy if you have 64-bit windows dev httpd.

Open Vstudio command prompt for 64-bit development
(You should have a shortcut for that)

 > cd where-ever-you-unzip\tomcat-connectors-1.2.35-src\native\apache-2.0
 > nmake -f Makefile.vc ARCH=AMD64 APACHE24_HOME=C:\httpd-2.4.2



Regards
-- 
^TM

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233645-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 18 20:14:10 2012
Return-Path: <users-return-233645-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BF0BE919E
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 18 Apr 2012 20:14:10 +0000 (UTC)
Received: (qmail 16121 invoked by uid 500); 18 Apr 2012 20:14:07 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 15876 invoked by uid 500); 18 Apr 2012 20:14:07 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 15866 invoked by uid 99); 18 Apr 2012 20:14:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 20:14:07 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pid@pidster.com designates 74.125.82.173 as permitted sender)
Received: from [74.125.82.173] (HELO mail-we0-f173.google.com) (74.125.82.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 20:14:00 +0000
Received: by werp12 with SMTP id p12so6691868wer.18
        for <users@tomcat.apache.org>; Wed, 18 Apr 2012 13:13:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type;
        bh=yW9EisAL2KgintCPBwnqSfvvzrozuoh5K3NAJ9kWkPo=;
        b=WspClCbPgixU1VDEO2dM7IZ0Gj8tEjfJ9KwpbBTPfTJ3wRWL3NXXSeK5RzUpAdxS+7
         vj2Ji5Q6HxvyJwezO9joNqLhchu5Kjb/Al/CQVH4gAcnTczF38HA2OQRgWZwcK47rGg+
         2XqHeue7afUKyprhTyX4QktDHSbvi1YBWcaeY=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type:x-gm-message-state;
        bh=yW9EisAL2KgintCPBwnqSfvvzrozuoh5K3NAJ9kWkPo=;
        b=W6taopozSGDr7iLN8aeLWdzlFdkb5LHZpOEmjAqDPVFnPQDzLerHnSD+OrH8UdsNNW
         R3u6o58HV/n9p9/Veswqjv2s1KhT4cm1bXLb3DMSwM5FlnWwxceAFfsXH/rqsZG+itor
         JPt3ULQHvgvfHczIkNNcSNrJSHGNprYBvrGfuK8fpyyKudZUh2p+WGJIBdgRtGgL4rE6
         AZCpDcQ8Pp3vTE2ayl0CJFoGy1efWy38/iX+kcUgg7XRG2BhkkGbJf87sHhXNm+lYmU/
         Meuoj+dYgbgkae9mei53+N/Gjx8wPLyMhQje8SIAkTqhq7tK3/47R/kV0u93S1jZfP3G
         vaJA==
Received: by 10.216.135.97 with SMTP id t75mr2202470wei.60.1334780013616;
        Wed, 18 Apr 2012 13:13:33 -0700 (PDT)
Received: from Asura.local ([81.134.122.147])
        by mx.google.com with ESMTPS id h8sm58887312wix.4.2012.04.18.13.13.30
        (version=SSLv3 cipher=OTHER);
        Wed, 18 Apr 2012 13:13:31 -0700 (PDT)
Message-ID: <4F8F2063.90209@pidster.com>
Date: Wed, 18 Apr 2012 21:13:23 +0100
From: Pid <pid@pidster.com>
Organization: Pidster Inc
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: JasperException: The value for the useBean class ___ attribute
 is invalid
References: <4F8D9A5B.3020302@vittox.com> <4F8EF3C1.4010801@vittox.com> <4F8F1DCC.30004@pidster.com>
In-Reply-To: <4F8F1DCC.30004@pidster.com>
X-Enigmail-Version: 1.4
OpenPGP: id=62590808
Content-Type: multipart/signed; micalg=pgp-sha512;
 protocol="application/pgp-signature";
 boundary="------------enig6F25C6C448C2D6C719B9E0D4"
X-Gm-Message-State: ALoCoQkfT+Qae4FPbGg4UMehgtDScZr/TBtIaBvV8zOP2jRJ/KGwyY/0rmfkuxCSLSTwSCtwBtcz
X-Virus-Checked: Checked by ClamAV on apache.org

--------------enig6F25C6C448C2D6C719B9E0D4
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

On 18/04/2012 21:02, Pid wrote:
> On 18/04/2012 18:02, Chris Patterson wrote:
>=20
>> Is this like a BUG ?=20
>=20
> Doubt it.
>=20
>> Or perhaps something about the Java version ?
>=20
> s/Java/Developer/g

That was rude.  Retracted, with apologies.

p


--=20

[key:62590808]


--------------enig6F25C6C448C2D6C719B9E0D4
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.18 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iQIcBAEBCgAGBQJPjyBoAAoJEGoM2OGpOvr9p2kP/16QUhS/3ejj4s+fY2leSDVO
CJmLHGrU/o8HX7TYHKzG/QdfFBjAL32QUk6A1HXLxh5aiPH2i0d+Ryj0xDqF8Ni/
4mMX8D017ynXj/db4Mg7WOdZJ5/M4yjjKRB0Smr4Fk8cLaXjZgB1iQj7mqPdlt4k
qfar4yMUVkUFWetbJrQjrivfaCfxDDGSFlsdwnscpTmLa6DzQeYrQ2L2VuJ1uAuA
iDYqVYkwVTXMH0Nqa1tn55rdOL2gYjS6KURhHWooWPUzR3ddo44BM6xp7QTS7+6R
V9exCH/n9rQMGWCPeHay8zaqqyis4e9lMUeVYEfjBHfc4s73Vv0VD37UF1iVrHQr
FhQ8MX4Zf+s8TzbU4KtafUEheUXR1vQfQt+iu+0Ta6383fK+grbHt+nHYRtxnLdK
9zwBfnycCsmegSIufhrQJam5e+pebLbOlRXaQAv41X9uYPnxNEug46WGBUgEpc/b
zmlgzm0AIwU1QSWqobXPhIrMydupoBQiaGwpFQjtWwlucWfslk1RB90vP6ulshRb
upmnueUazXPqcaig6DfqeWMp+imn6Jq+UbiWIOVXXSp/xa/1jhT4XJ4/YrLopSvJ
3P7UiJarb0cftyw8Mdik5RnzmCoOCzqttChBFOUDiJpvBQwsMvV1b0ByNwkwPgST
n6MVar9A2Nji5kj55cDf
=fGNP
-----END PGP SIGNATURE-----

--------------enig6F25C6C448C2D6C719B9E0D4--

From users-return-233646-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 18 23:25:51 2012
Return-Path: <users-return-233646-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 990759736
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 18 Apr 2012 23:25:51 +0000 (UTC)
Received: (qmail 83686 invoked by uid 500); 18 Apr 2012 23:25:48 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 83550 invoked by uid 500); 18 Apr 2012 23:25:48 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 83534 invoked by uid 99); 18 Apr 2012 23:25:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 23:25:48 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=FREEMAIL_FORGED_REPLYTO,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.138.229.182] (HELO nm40-vm6.bullet.mail.ne1.yahoo.com) (98.138.229.182)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 18 Apr 2012 23:25:38 +0000
Received: from [98.138.90.57] by nm40.bullet.mail.ne1.yahoo.com with NNFMP; 18 Apr 2012 23:25:17 -0000
Received: from [98.138.226.168] by tm10.bullet.mail.ne1.yahoo.com with NNFMP; 18 Apr 2012 23:25:16 -0000
Received: from [127.0.0.1] by omp1069.mail.ne1.yahoo.com with NNFMP; 18 Apr 2012 23:25:16 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 888710.49827.bm@omp1069.mail.ne1.yahoo.com
Received: (qmail 72739 invoked by uid 60001); 18 Apr 2012 23:25:16 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1334791516; bh=2CP1Enb+uVLQmWdfdnAaQx2AfeQ2Xgtyg2eExJrBM2k=; h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=y9+w+aCNPuNVGXWWKmTdg6uSYgOcz441vLSfLYgoG25tOgUdLpnEcCzlwGzQ5+EC99V/Fl6mkU+swhzFxExn7YLCcF54PpXyC+kHtjLFl2gCWye5APcbjUTqwfRxKUFNz8uNn5Ta0nx+ZkiwNvVQBhpBwkC3YFVe4lybTTxrYA8=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=P3VaAQFgZAllcit3Dfbw1klCEWF7FA9ljmdQEeES23HX48jPVy4ujEO8PDWxMe3H+scyUnz+nuSb8wpYMZQ7Hcre5BDAceS1lJrx7BadmWRqk4a4yjWZYyPb6A3xLE8UdkdJiK8y1w0EYndtZEp2E3aIh8EGqQJXm0pX8ebiP9Y=;
X-YMail-OSG: Y5w39dUVM1kPWgYj6ZHWeXwZztV5pKw1et_v9rNH7Apktdo
 jpnwpRQV8ys7cBSZt6UdLvr12I9ilrGoTo9jdAVamfNU5Jw8dBlBo6thFcY_
 VP_EkydJh2rKnJOnz_O_KMfwDsEvEv.uVDiO203yr571DiSyfKpfHjRHt60x
 c2a0s8NOixO3hh585blAFG8n9F6y4Qv_Twx4mioipME7sqeBcwx2g8cgMmnV
 8g6oSl6AqqDvJQF79Uv0HlZux4gfOWlN9LKhD6Q9zeUfMI9qOCMWSVyVQCjc
 ECvUrsHwDPxRVPPXmnMf2J506AoXQTeZMXin2A0b3kmqlbcTLWL4VVqWQ9La
 F3HXFFwc8UUDjwIjMhe9El0L6S.EmRdrKCuM56FqkucsYlJCkR8YN.eOW8UN
 Aw9x6CAWPQXdWJ4vpf6ELoxUqadrJCHX03HI9XeWPp1wv_SFeLxI2Szjbak.
 7a2yQ2bsSKaWfFI3bpDrt7pkGXZk-
Received: from [71.129.41.44] by web125515.mail.ne1.yahoo.com via HTTP; Wed, 18 Apr 2012 16:25:16 PDT
X-Mailer: YahooMailWebService/0.8.117.340979
References: <CAHjK=Ow5QJPLYi2hrJFY7Zw33mST+T62=H-8iM7pOvX_nmbFjw@mail.gmail.com> <CABzHfVn0b0aUPDrTBkBmYgjTpROP1zOrt6pAmfVeUCDbEpepRA@mail.gmail.com>
Message-ID: <1334791516.69495.YahooMailNeo@web125515.mail.ne1.yahoo.com>
Date: Wed, 18 Apr 2012 16:25:16 -0700 (PDT)
From: Mark Eggers <its_toasted@yahoo.com>
Reply-To: Mark Eggers <its_toasted@yahoo.com>
Subject: Re: Access to Tomcat server has not been authorized
To: Tomcat Users List <users@tomcat.apache.org>
In-Reply-To: <CABzHfVn0b0aUPDrTBkBmYgjTpROP1zOrt6pAmfVeUCDbEpepRA@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

>________________________________=0A> From: Konstantin Kolinko <knst.kolink=
o@gmail.com>=0A>To: Tomcat Users List <users@tomcat.apache.org> =0A>Sent: W=
ednesday, April 18, 2012 10:32 AM=0A>Subject: Re: Access to Tomcat server h=
as not been authorized=0A> =0A>2012/4/18 Debabratta Jena <debabrattaj@gmail=
.com>:=0A>> Hello Sir,=0A>>=0A>> I have used glassfish in netbeans, now I c=
hanged to tomcat and when I=0A>> run my web application that I have created=
 in glassfish gives me the=0A>> error :=0A>> **Deployment error:=0A>> =A0Ac=
cess to Tomcat server has not been authorized. Set the correct=0A>> usernam=
e and password with the "manager-script" role in the Tomcat=0A>> customizer=
 in the Server Manager.**=0A>> I have added a role with name "manager-scrip=
t" in conf/tomcat-user.xml=0A>> but where is my Server Manager? I did'nt fi=
nd it.=0A>=0A>http://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html=0A=
>=0A>I do not know why Netbeans needs access to it.=A0 It is a problem of=
=0A>Netbeans, not of your webapp. Maybe they have some explanation in=0A>th=
eir docs.=0A>=0A>=0A>Best regards,=0A>Konstantin Kolinko=0A=0A=0AIn my opin=
ion, NetBeans does this the "correct" way (or nearly correct way).=0A=0AWhe=
n you set up a server in NetBeans, you'll need to supply the user name and =
password for an account with the manager role (Tomcat 5.5, Tomcat 6.0) or t=
he manager-script role (Tomcat 7.0). NetBeans uses this and an Ant task to =
deploy, undeploy, reload, and otherwise deal with applications running on v=
arious Tomcats.=0A=0AI'm going to assume NetBeans 7.x, since versions prior=
 to 7 did not support Tomcat 7.=0A=0AIf you didn't set up a user with a man=
ager-script role in NetBeans, then do the following:=0A=0A1. In the Servers=
 Window expand the Servers node=0A2. Right-mouse click on the server in que=
stion=0A3. Select Properties from the drop down menu=0A4. Click on the Conn=
ection tab in the configuration wizard=0A5. Fill in the Username and Passwo=
rd=0A6. Click on the Close button=0A=0AFor a particular project (once you h=
ave it open), do the following to associate it with an installed (NetBeans =
is aware of) server.=0A=0A1. In the Projects Window, right-mouse click on t=
he project=0A2. Select Properties from the drop down menu=0A3. In the proje=
ct wizard, select the Run node=0A4. Select the appropriate server from the =
drop down menu=0A5. Click OK to save=0A=0ANetBeans will only let you select=
 the server capable of running that particular project. It determines the a=
ppropriate version by parsing the web.xml file (I think).=0A=0Ajust my two =
cents . . . .=0A=0A/mde/=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233647-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 18 23:36:52 2012
Return-Path: <users-return-233647-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E0EF39D2F
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 18 Apr 2012 23:36:52 +0000 (UTC)
Received: (qmail 14374 invoked by uid 500); 18 Apr 2012 23:36:49 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 14151 invoked by uid 500); 18 Apr 2012 23:36:49 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 14141 invoked by uid 99); 18 Apr 2012 23:36:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 23:36:49 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tomcat@vittox.com designates 72.9.228.36 as permitted sender)
Received: from [72.9.228.36] (HELO vps75.vittox.com) (72.9.228.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 Apr 2012 23:36:42 +0000
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed; d=vittox.com; s=default;
	h=Content-Type:In-Reply-To:References:Subject:To:MIME-Version:From:Date:Message-ID; bh=O1AAw21p3ol276SCaNXFDBoRJ4AgST2K4FO1+tFQvXc=;
	b=RPy16hfHrKmgZTnJBk/5ivw+KKy1eGE3Qyg+Fr6JWETwU+chorPjFnCOXg0pFHPFAf42CZUejxJWutDd6BGJxnEoXTh0BVthKI9Aw/klihKFROm/CZCUGeF/SwQGs5gP;
Received: from [190.187.22.189] (port=33332 helo=[192.168.1.10])
	by vps75.vittox.com with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.77)
	(envelope-from <tomcat@vittox.com>)
	id 1SKeQ8-0000yD-J2
	for users@tomcat.apache.org; Wed, 18 Apr 2012 18:36:21 -0500
Message-ID: <4F8F4FF1.2020307@vittox.com>
Date: Wed, 18 Apr 2012 18:36:17 -0500
From: Chris Patterson <tomcat@vittox.com>
User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: JasperException: The value for the useBean class ___ attribute
 is invalid
References: <4F8D9A5B.3020302@vittox.com> <4F8EF3C1.4010801@vittox.com> <CABzHfVk3DERdgHzZtQD_uh7a5x6y-cjcpFQfDOMg06nmp3rGsA@mail.gmail.com>
In-Reply-To: <CABzHfVk3DERdgHzZtQD_uh7a5x6y-cjcpFQfDOMg06nmp3rGsA@mail.gmail.com>
Content-Type: multipart/alternative;
 boundary="------------020403030708080008070008"
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - vps75.vittox.com
X-AntiAbuse: Original Domain - tomcat.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - vittox.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org

--------------020403030708080008070008
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit

Dear Konstantin, thanks for asking, I will try to answer your questions

My experience level is relative, idea is to spend less time sharing your 
experience.
I have installed Tomcat servers for many years mostly on Unix/Linux,
and allready have a CentOS 5.6 with Tomcat 6.x (default) on  a local server.

I could deploy my "Dynamic Web Application" (eclipse language) named 
Test-03 from a
WAR format and it worked for both cases. _So it should not be the "code"._
Of course it is not a Web App, its only a Test.

Differences are:
Local host has Tomcat 6.x, VPS server has Tomcat 5.3.35
Local host has Java 1.6.0_22 / OpenJDK 64-Bit, VPS server has Java 
1.6.0_29 / Java Hotspot 64-Bit

I checked following files having basically the same default configuration:
server.xml, web.xml, context.xml

When deployed on the /local server/ using the Tomcat Manager
I see the following directories:

  docs
  examples
  host-manager
  manager
  ROOT
  sample
  Test-03
  Test-03.war

Under ROOT is working the Test with URLs:
   localhost:8080/prg1.jsp
   localhost:8080/subdir/prg2.jsp

Also work fine under Test-03
     localhost:8080/Test-03/prg1.jsp
     localhost:8080/Test-03/subdir/prg2.jsp

The class files are respectively under ROOT/WEB-INF/classes and 
Test-02/WEB-INF/classes
I just copied all content undet Test-03 to the ROOT folder and reloaded 
(using the Manager)

The same excersise on the VPS running CPanel for a domain like etrust.us
does only work for etrust.us/Test-03/prg1.jsp
When trying etrust.us/prg1.jsp it only works until trying 
etrust.us/subdir/prg2.jsp,
then i get the error 500: JasperException: The value for the useBean 
class ___ attribute is invalid

Log file shows no more details about the issue.

As "main directory" I mean the docBase referenced in the server.xml file.
I have read the Servlet Specificacion (2.4) and did several changes to the
configuration files with no success.

Does someone here have any idea where to check some configuration ?


El 18/04/2012 12:08 p.m., Konstantin Kolinko escribi:
> 2012/4/18 Chris Patterson<tomcat@vittox.com>:
>> More on this, now I think it is some configuration issue for the tomcat
>> server:
>>
>> I am using eclipse to check both JSP files, and they work without any
>> problems
>> in my PC. When deploying to Tomcat 5.5.35 to a sub-directory like de project
>> name
>> they also work fine. For example at www.domain.com/Test1/prg1.jsp and
>> www.domain.com/Test1/subdir/prg2.jsp.
>>
>> If I copy them to the main directory with a shell command:
>> cp -pr * .. from the Test1 directory and undeploy the Test1 application
>> then only www.domain.com/prg1.jsp works and but the second one,
>> www.domain.com/subdir/prg2.jsp gives me the same (500) error:
>>
>> /prg2.jsp(26,0) The value for the useBean class attribute
>> jdbcbean.Stringbean is invalid.
>>
>>
>> Is this like a BUG ? Or perhaps something about the Java version ?
>> I have the following version running on a CentOS release 5.8:
>> java version "1.6.0_29"
>> Java(TM) SE Runtime Environment (build 1.6.0_29-b11)
>> Java HotSpot(TM) 64-Bit Server VM (build 20.4-b02, mixed mode)
>>
>> Hope this info help a little more to find a solution.
>>
>>
> What is your experience level?
>
> Do you know what a "web application" is?
> Have you read The Servlet specification, Documentation, etc.?
>
> Do you know where your classes must be put in a Web application?
>
> Your "main directory" terminology does not make sense.
>
> Best regards,
> Konstantin Kolinko
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>
>

--------------020403030708080008070008--

From users-return-233648-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 00:05:49 2012
Return-Path: <users-return-233648-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 367AE9716
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 00:05:49 +0000 (UTC)
Received: (qmail 3704 invoked by uid 500); 19 Apr 2012 00:05:46 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 3592 invoked by uid 500); 19 Apr 2012 00:05:45 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 3583 invoked by uid 99); 19 Apr 2012 00:05:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 00:05:45 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,NORMAL_HTTP_TO_IP,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of predatorvi@gmail.com designates 209.85.213.173 as permitted sender)
Received: from [209.85.213.173] (HELO mail-yx0-f173.google.com) (209.85.213.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 00:05:40 +0000
Received: by yenr5 with SMTP id r5so5103200yen.18
        for <users@tomcat.apache.org>; Wed, 18 Apr 2012 17:05:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:from:date:message-id:subject:to:content-type;
        bh=AvKyPxYgMMK84ODSM9ma4CdwGuHlIL3wAXuMC2+xQjM=;
        b=oCkHpJ9VuS6LOCijX7AH0oN4VPpvp4Zlsg3McsNeMlih3ub4zd4n5SfviCGrtI6tJn
         QWcR6qdgttDWHUV4+jS34rt1H9V7XzlSEywwt8frqPOeWarajnwvavmUuEpHFdN4Z35J
         F53jJtNHW5UmdSuMLMIWmZkLctpf+6KwxGWF+8CVI/LLp1KQ+Sy8P1xvhkKwYjlW1ati
         /frdzlixEwcJZrya5EfPd7snXepJdbtcXsYw/i+dBV7FaKrxrCs6Bdt0qRutNZ+t7IVE
         t2sY/53VRmq99arB0ovJit1J83Gy4hmdR8lVt4BOL26JCqrd74WSBXvT4hqML3YzGe4y
         wyaQ==
Received: by 10.236.79.8 with SMTP id h8mr4319234yhe.79.1334793920037; Wed, 18
 Apr 2012 17:05:20 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.147.65.3 with HTTP; Wed, 18 Apr 2012 17:04:59 -0700 (PDT)
From: Jeff <predatorvi@gmail.com>
Date: Wed, 18 Apr 2012 18:04:59 -0600
Message-ID: <CAPJK9=KrJ-ehCtgBvSCn+VLtV62wGuii9r9WZYjNT6bn7qMXww@mail.gmail.com>
Subject: tomcat maven plugin deploy to multiple tomcat instances...
To: users@tomcat.apache.org
Content-Type: multipart/alternative; boundary=20cf300fb33373c46904bdfced6d
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf300fb33373c46904bdfced6d
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

(Didn't see a specific mailing list for the tomcat-maven-plugin...)

I finally got the 2.0-SNAPSHOT version of the tomcat6-maven-plugin working
against a single server, but wondered how I could configure it to push to
multiple tomcat instances based on the environment.  For example, our
staging environment for this application has 2 load balance servers.

I tried using the <executions/> structure like I do when running ws-import
but it doesn't seem to support that.

Is there another way to easily handle deployments to multiple servers with
this plugin?  If not, what would it take to support executions?  Here is
what I tried.


 <profile>
      <id>deploy-stage</id>
      <activation>
        <activeByDefault>false</activeByDefault>
      </activation>
      <build>
        <plugins>
          <plugin>
            <groupId>org.apache.tomcat.maven</groupId>
            <artifactId>tomcat6-maven-plugin</artifactId>
            <version>2.0-SNAPSHOT</version>
            <executions>
              <execution>
                <id>stage01</id>
                <configuration>
                  <mode>war</mode>
                  <url>http://10.12.4.1/manager</url>
                  <failOnError>true</failOnError>
                  <charset>UTF-8</charset>
                  <uriEncoding>UTF-8</uriEncoding>
                  <protocol>HTTP/1.1</protocol>
                  <update>true</update>
                  <server>stage01</server>
                </configuration>
              </execution>
              <execution>
                <id>stage06</id>
                <configuration>
                  <mode>war</mode>
                  <url>http://10.12.4.6/manager</url>
                  <failOnError>true</failOnError>
                  <charset>UTF-8</charset>
                  <uriEncoding>UTF-8</uriEncoding>
                  <protocol>HTTP/1.1</protocol>
                  <update>true</update>
                  <server>stage06</server>
                </configuration>
              </execution>
            </executions>
          </plugin>
--=20
Jeff Vincent
predatorvi@gmail.com
See my LinkedIn profile at:
http://www.linkedin.com/in/rjeffreyvincent
I =E2=99=A5 DropBox <http://db.tt/9O6LfBX> !!

--20cf300fb33373c46904bdfced6d--

From users-return-233649-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 00:12:33 2012
Return-Path: <users-return-233649-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9E3D598BF
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 00:12:33 +0000 (UTC)
Received: (qmail 20765 invoked by uid 500); 19 Apr 2012 00:12:30 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 20595 invoked by uid 500); 19 Apr 2012 00:12:30 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 20586 invoked by uid 99); 19 Apr 2012 00:12:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 00:12:30 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of knst.kolinko@gmail.com designates 209.85.160.173 as permitted sender)
Received: from [209.85.160.173] (HELO mail-gy0-f173.google.com) (209.85.160.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 00:12:23 +0000
Received: by ghrr14 with SMTP id r14so5092601ghr.18
        for <users@tomcat.apache.org>; Wed, 18 Apr 2012 17:12:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=dMnTFvNWbSRBFv7vdGvF2Nt3kBZ6PG3HO7i6XyMyzrs=;
        b=l5cIXeBjs9EqUIVSUzhHqJVQwGJNeMuzxLJ4ZahITTpZ+MaqnBru6HB4mGoe1KQesG
         QvFbt+Dz3DI8SKGmkuZsRDv6cPWhGsJ6rzXM/EM75cqEoip7itqRVBIcJpMu3/dFUX8J
         Y6/K7s+SdiUEP5cGv4xqiIzaRCmj96KfWrS2QndYB61n1EimoovAgHWPBjsxYUd7Ef2O
         WoeztGouZRSKaQOoUZo0DvT7V+L6SpBk/zEDdtcVel/0yfYw58MI6OrvKav2Ptoi+e2i
         cKEd3IH+NIOxXGecnnngKwbMbULzvi2BP81g+eDLima4L0fMFGPJPQE8vRtOWJEMcIUP
         YGKA==
MIME-Version: 1.0
Received: by 10.236.114.200 with SMTP id c48mr36770yhh.23.1334794323345; Wed,
 18 Apr 2012 17:12:03 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Wed, 18 Apr 2012 17:12:03 -0700 (PDT)
In-Reply-To: <4F8F4FF1.2020307@vittox.com>
References: <4F8D9A5B.3020302@vittox.com>
	<4F8EF3C1.4010801@vittox.com>
	<CABzHfVk3DERdgHzZtQD_uh7a5x6y-cjcpFQfDOMg06nmp3rGsA@mail.gmail.com>
	<4F8F4FF1.2020307@vittox.com>
Date: Thu, 19 Apr 2012 04:12:03 +0400
Message-ID: <CABzHfVm4SEANiWw01qzV311XZih8dFOBTTPeN3rb7xHeXFMXTQ@mail.gmail.com>
Subject: Re: JasperException: The value for the useBean class ___ attribute is invalid
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

2012/4/19 Chris Patterson <tomcat@vittox.com>:
> Dear Konstantin, thanks for asking, I will try to answer your questions
>
> My experience level is relative, idea is to spend less time sharing your
> experience.
> I have installed Tomcat servers for many years mostly on Unix/Linux,
> and allready have a CentOS 5.6 with Tomcat 6.x (default) on =A0a local se=
rver.
>

OK. Thank you for detailed answer. It makes more sense now.

> I could deploy my "Dynamic Web Application" (eclipse language) named Test=
-03
> from a
> WAR format and it worked for both cases. _So it should not be the "code".=
_
> Of course it is not a Web App, its only a Test.
>
> Differences are:
> Local host has Tomcat 6.x, VPS server has Tomcat 5.3.35
> Local host has Java 1.6.0_22 / OpenJDK 64-Bit, VPS server has Java 1.6.0_=
29
> / Java Hotspot 64-Bit
>
> I checked following files having basically the same default configuration=
:
> server.xml, web.xml, context.xml
>
> When deployed on the /local server/ using the Tomcat Manager
> I see the following directories:
>
> =A0docs
> =A0examples
> =A0host-manager
> =A0manager
> =A0ROOT
> =A0sample
> =A0Test-03
> =A0Test-03.war
>
> Under ROOT is working the Test with URLs:
> =A0localhost:8080/prg1.jsp
> =A0localhost:8080/subdir/prg2.jsp
>
> Also work fine under Test-03
> =A0 =A0localhost:8080/Test-03/prg1.jsp
> =A0 =A0localhost:8080/Test-03/subdir/prg2.jsp
>
> The class files are respectively under ROOT/WEB-INF/classes and
> Test-02/WEB-INF/classes
> I just copied all content undet Test-03 to the ROOT folder and reloaded
> (using the Manager)
>

There are two apparent differences with the above copy+reload
procedure, as compared with "clean" deploy:

1. Reload !=3D (Start + Stop).

It is a more lightweight operation than stopping and then starting a
webapp. Maybe something went wrong there.


2. You have not cleared the work directory of the ROOT webapp.

So there might be previous compiled classes for those JSPs. Depending
on timestamps they will be not recompiled.  (E.g. if you replace a jsp
with an older copy of that jsp, it will not be recompiled. Check
whether the clock on the server has the correct time. Thought it is
easier to just clean the work directory for the webapp.)


The resource id for that "The value for the useBean class" message is
"jsp.error.invalid.bean".

It is thrown is in jasper.compiler.Generator#visit() when it visits
<jsp:useBean> node if it cannot load the class specified in the
useBean tag.

http://svn.apache.org/viewvc/tomcat/tc5.5.x/tags/TOMCAT_5_5_35/jasper/src/s=
hare/org/apache/jasper/compiler/Generator.java?view=3Dmarkup#l1199


You have to check that you did not forget to copy necessary supporting
classes and libraries. If that fails, try to write a simple jsp that
explicitly loads that class.

> The same excersise on the VPS running CPanel for a domain like etrust.us
> does only work for etrust.us/Test-03/prg1.jsp
> When trying etrust.us/prg1.jsp it only works until trying
> etrust.us/subdir/prg2.jsp,
> then i get the error 500: JasperException: The value for the useBean clas=
s
> ___ attribute is invalid
>
> Log file shows no more details about the issue.
>
> As "main directory" I mean the docBase referenced in the server.xml file.
> I have read the Servlet Specificacion (2.4) and did several changes to th=
e
> configuration files with no success.
>
> Does someone here have any idea where to check some configuration ?
>
>
> El 18/04/2012 12:08 p.m., Konstantin Kolinko escribi=F3:
>>
>> 2012/4/18 Chris Patterson<tomcat@vittox.com>:
>>>
>>> More on this, now I think it is some configuration issue for the tomcat
>>> server:
>>>
>>> I am using eclipse to check both JSP files, and they work without any
>>> problems
>>> in my PC. When deploying to Tomcat 5.5.35 to a sub-directory like de
>>> project
>>> name
>>> they also work fine. For example at www.domain.com/Test1/prg1.jsp and
>>> www.domain.com/Test1/subdir/prg2.jsp.
>>>
>>> If I copy them to the main directory with a shell command:
>>> cp -pr * .. from the Test1 directory and undeploy the Test1 application
>>> then only www.domain.com/prg1.jsp works and but the second one,
>>> www.domain.com/subdir/prg2.jsp gives me the same (500) error:
>>>
>>> /prg2.jsp(26,0) The value for the useBean class attribute
>>> jdbcbean.Stringbean is invalid.
>>>
>>>
>>> Is this like a BUG ? Or perhaps something about the Java version ?
>>> I have the following version running on a CentOS release 5.8:
>>> java version "1.6.0_29"
>>> Java(TM) SE Runtime Environment (build 1.6.0_29-b11)
>>> Java HotSpot(TM) 64-Bit Server VM (build 20.4-b02, mixed mode)
>>>
>>> Hope this info help a little more to find a solution.
>>>
>>>
>> What is your experience level?
>>
>> Do you know what a "web application" is?
>> Have you read The Servlet specification, Documentation, etc.?
>>
>> Do you know where your classes must be put in a Web application?
>>
>> Your "main directory" terminology does not make sense.
>>

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233650-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 06:07:46 2012
Return-Path: <users-return-233650-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 26C5E976C
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 06:07:46 +0000 (UTC)
Received: (qmail 60186 invoked by uid 500); 19 Apr 2012 06:07:42 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 59735 invoked by uid 500); 19 Apr 2012 06:07:38 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 59725 invoked by uid 99); 19 Apr 2012 06:07:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 06:07:38 +0000
X-ASF-Spam-Status: No, hits=4.0 required=5.0
	tests=HTML_IMAGE_ONLY_08,HTML_MESSAGE,SPF_PASS,T_REMOTE_IMAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of leejaemannet@naver.com designates 202.179.177.18 as permitted sender)
Received: from [202.179.177.18] (HELO tmailpost04-2.nm.naver.com) (202.179.177.18)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 19 Apr 2012 06:07:30 +0000
Received: (qmail 14364 invoked from network); 19 Apr 2012 06:07:06 -0000
Received: from 114.111.40.155 (HELO tweb115-2.nm.nhnsystem.com) (114.111.40.155)
  by tmailpost04-2.nm.naver.com with SMTP; 19 Apr 2012 06:07:06 -0000
Date: Thu, 19 Apr 2012 15:07:06 +0900 (KST)
From: =?UTF-8?B?7J207J6s66eM?= <leejaemannet@naver.com>
Reply-To: =?UTF-8?B?7J207J6s66eM?= <leejaemannet@naver.com>
To: Tomcat Users List <users@tomcat.apache.org>
Message-ID: <ea3af05622e4c1ba3d605731c5ebb98@tweb115-2.nm.nhnsystem.com>
Subject: dbcp datasource encryption
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_706590_707499487.1334815626456"
Importance: normal
X-Priority: 3 (Normal)

------=_Part_706590_707499487.1334815626456
Content-Type: text/plain;
	charset=UTF-8
Content-Transfer-Encoding: base64

aGkgdGhlcmUuIAoKIAoKaSBhbSBvcGVyYXRpbmcgd2Vic2l0ZSBvbiB0b21jYXQ2IGFuZCB0b21j
YXQ3IAoKYW5kIGkgdXNlZCBkYmNwIGFzIGRhdGFzb3VyY2Ugb24gdG9tY2F0NyBzbyBpIHdhbnQg
dG8gZW5jcnlwdCBkYmNwIGRhdGFzb3VyY2UKCmhvdyBkbyBpIGVuY3J5cHQgbXkgZGJjcCBkYXRh
c291cmNlIC4uIHBsYXNlIGdpdmUgbWUgc29tZSBzYW1wbGVzLi4gdGhhbmtzLgo=
------=_Part_706590_707499487.1334815626456--

From users-return-233651-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 06:34:45 2012
Return-Path: <users-return-233651-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B3FBA9DDF
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 06:34:45 +0000 (UTC)
Received: (qmail 29944 invoked by uid 500); 19 Apr 2012 06:34:42 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 29872 invoked by uid 500); 19 Apr 2012 06:34:41 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 29857 invoked by uid 99); 19 Apr 2012 06:34:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 06:34:41 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Christoph.Maser@1und1.de designates 212.227.126.204 as permitted sender)
Received: from [212.227.126.204] (HELO mxintern.schlund.de) (212.227.126.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 06:34:35 +0000
Received: from [10.2.3.43] (helo=exnlb01.webde.local)
	by mxintern.schlund.de with esmtps (TLS1.0:RSA_AES_128_CBC_SHA1:16)
	(envelope-from <Christoph.Maser@1und1.de>)
	id 1SKkwY-000J6O-NT; Thu, 19 Apr 2012 08:34:14 +0200
Received: from exchange07.webde.local ([169.254.1.206]) by exnlb01.webde.local
 ([10.2.3.43]) with mapi; Thu, 19 Apr 2012 08:34:14 +0200
From: Christoph Maser <Christoph.Maser@1und1.de>
To: "markt@apache.org" <markt@apache.org>
CC: "users@tomcat.apache.org" <users@tomcat.apache.org>
Date: Thu, 19 Apr 2012 08:34:13 +0200
Subject: Re: parallel deployment activation of new version
Thread-Topic: parallel deployment activation of new version
Thread-Index: Ac0d9m/C74ISI28mQguny1fmRER2bw==
Message-ID: <15D3435601304A49A5E13D0825711B6128CC5740@EXCHANGE07.webde.local>
References: <15D3435601304A49A5E13D0825711B6128CC5706@EXCHANGE07.webde.local>
 <c9852e00-8f22-4a9a-99b7-7543ab14d743@email.android.com>
 <15D3435601304A49A5E13D0825711B6128CC570C@EXCHANGE07.webde.local>
 <efd47547-82e2-4d89-b0e3-76747acb8a6c@email.android.com>
In-Reply-To: <efd47547-82e2-4d89-b0e3-76747acb8a6c@email.android.com>
Accept-Language: de-DE
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Virus-Scanned: Symantec AntiVirus Scan Engine
X-UI-Msg-Verification: 7d40aff077b0046ee91b0f40e1256eda
X-Virus-Checked: Checked by ClamAV on apache.org

QW0gRG9ubmVyc3RhZywgZGVuIDEyLjA0LjIwMTIsIDE0OjAyICswMTAwIHNjaHJpZWIgbWFya3RA
YXBhY2hlLm9yZzoKPiBDaHJpc3RvcGggTWFzZXIgPENocmlzdG9waC5NYXNlckAxdW5kMS5kZT4g
d3JvdGU6Cj4gCj4gPkRvIHlvdSBzZWUgYW55IGNoYW5jZSBhIHJlcXVlc3QgZm9yIGZlYXR1cmUg
aW4gdGhhdCBkaXJlY3Rpb24gd291bGQgYmUKPiA+YWNjcGV0ZWQ/Cj4gCj4gUmlnaHQgbm93LCBu
by4gSSBkb24ndCBzZWUgYSByZXF1aXJlbWVudCB0aGF0IGlzbid0IG1ldCBieSB0aGUgZXhpc3Rp
bmcgaW1wbGVtZW50YXRpb24uIElmIHRoZXJlIHdhcyBhIHVzZSBjYXNlIHRoYXQgd2Fzbid0IGNv
bXBsZXRlbHkgb2ZmIHRoZSB3YWxsIHRoYXQgY291bGRuJ3QgYmUgbWV0IHRoZW4gaXQgd291bGQg
Z2V0IGxvb2tlZCBhdC4gQWN0dWFsIGltcGxlbWVudGF0aW9uIHdvdWxkIGRlcGVuZCBvbiBhbiBh
c3Nlc3NtZW50IG9mIGJlbmVmaXQgYWdhaW5zdCBjb21wbGV4aXR5Lgo+IAo+IE1hcmsKPiAKCldl
bGwgdGhlIGlkZWEgaXMgdG8gaGF2ZSBhZGRpdGlvbmFsIHNhZnRleSBtZWFzdXJlcyB0aGF0IGNo
ZWNrIGlmIHRoZQp3ZWJhcHAgaXMgaW4gdGhlIGRlc2lyZWQgc3RhdGUgYWZ0ZXIgdGhlIGNvbnRl
eHQgaXMgc3RhcnRlZC4gVGhpcyBpcwpkb25lIGJ5IHNlbmRpbmcgcXVlcmllcyBhZ2FpbnN0IHRo
ZSB3ZWJhcHAgZm9yIHN0YW5kYXJkIHBhZ2VzIG9yCmRlYnVnL2hlYWx0aC1zdGF0dXMgcGFnZXMg
dGhhdCB0aGUgd2ViYXBwIHByb3ZpZGVzLgoKQSByZWFzb24gdG8gZG8gbm90IGxldCB0aGUgY29u
dGV4dCBzdGFydHVwIGZhaWwgaW4gYSBjYXNlIHdoZXJlIHRoZQp3ZWJhcHAgaXMgaW4gYSBub24g
ZGVzaXJlZCBzdGF0ZSBpcyB0aGF0IHlvdSBsb29zZSBhY2Nlc3MgdG8gdGhvc2UKZGVidWcvaGVh
bHQtc3RhdHVzIHBhZ2VzIHRoZSB3ZWJhcHAgcHJvdmlkZXMgYW5kIHlvdSBlbmQgdXAgc2VhcmNo
aW5nCmZvciB0aGUgY2F1c2VzIGluIHRoZSBsb2dmaWxlcy4KCkFudG9oZXIgcG9pbnQgYXJlIGxv
YWRiYWxhbmNlcnMuIE9mdGVuIGxvYWRiYWxhbmNlcnMgaGF2ZSB0aGUgcG9zc2liaWl0eQp0byBj
aGVjayBpZiBhICJyZWFsIFNlcnZlciIgaXMgImFsaXZlIiBieSBzZW5kaW5nIGEgcmVxdWVzdCB0
byBhIGRlZmluZWQKVVJMLiBTbyBhcyBlbm90aGVyIHNhZnR5IG1hZXN1cmUgb25lIG1pZ2h0IGNo
ZWNrIHRoaXMgVVJMIHRvbyBiZWZvcmUKc3dpdGNoaW5nLiBUaGlzIG9uZSBzaG91bGQgb2YgIGNv
dXJzZSBuZXZlciBoYXBwZW4sIHRoYXRzIHdoYXQgcHJvcGVyCnRlc3RpbmcgaXMgZm9yLCBidXQg
aW4gcmVhbCBsaWZlIHN0cmFuZ2VzdCB0aGluZ3MgaGFwcGVuLgoKCkNocmlzCgo=
DQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IHVzZXJzLXVuc3Vi
c2NyaWJlQHRvbWNhdC5hcGFjaGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1t
YWlsOiB1c2Vycy1oZWxwQHRvbWNhdC5hcGFjaGUub3JnDQoN

From users-return-233652-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 07:07:39 2012
Return-Path: <users-return-233652-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 565549200
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 07:07:39 +0000 (UTC)
Received: (qmail 78911 invoked by uid 500); 19 Apr 2012 07:00:32 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 77670 invoked by uid 500); 19 Apr 2012 06:59:50 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 77345 invoked by uid 99); 19 Apr 2012 06:59:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 06:59:34 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [80.12.242.80] (HELO smtpout.wanadoo.co.uk) (80.12.242.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 06:59:23 +0000
Received: from mail.homeinbox.net ([2.24.223.101])
	by mwinf5d66 with ME
	id ziyz1i0042BsbQq03iyzAR; Thu, 19 Apr 2012 08:59:00 +0200
Received: from localhost (localhost [127.0.0.1])
	by mail.homeinbox.net (Postfix) with ESMTP id 103D7B22002
	for <users@tomcat.apache.org>; Thu, 19 Apr 2012 07:58:59 +0100 (BST)
X-Virus-Scanned: Debian amavisd-new at homeinbox.net
Received: from mail.homeinbox.net ([127.0.0.1])
	by localhost (mail.homeinbox.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id oQe6+H5jEKGW for <users@tomcat.apache.org>;
	Thu, 19 Apr 2012 07:58:43 +0100 (BST)
Received: from [31.79.234.185] (unknown [31.79.234.185])
	(using TLSv1 with cipher RC4-MD5 (128/128 bits))
	(No client certificate requested)
	by mail.homeinbox.net (Postfix) with ESMTPSA id 81FC6B22001
	for <users@tomcat.apache.org>; Thu, 19 Apr 2012 07:58:40 +0100 (BST)
References: <15D3435601304A49A5E13D0825711B6128CC5706@EXCHANGE07.webde.local> <c9852e00-8f22-4a9a-99b7-7543ab14d743@email.android.com> <15D3435601304A49A5E13D0825711B6128CC570C@EXCHANGE07.webde.local> <efd47547-82e2-4d89-b0e3-76747acb8a6c@email.android.com> <15D3435601304A49A5E13D0825711B6128CC5740@EXCHANGE07.webde.local>
User-Agent: K-9 Mail for Android
In-Reply-To: <15D3435601304A49A5E13D0825711B6128CC5740@EXCHANGE07.webde.local>
MIME-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 8bit
Subject: Re: parallel deployment activation of new version
From: markt@apache.org
Date: Thu, 19 Apr 2012 07:58:28 +0100
To: Tomcat Users List <users@tomcat.apache.org>
Message-ID: <2be74d4f-f0ca-42e2-850a-b856def1449c@email.android.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Christoph Maser <Christoph.Maser@1und1.de> wrote:

>Am Donnerstag, den 12.04.2012, 14:02 +0100 schrieb markt@apache.org:
>> Christoph Maser <Christoph.Maser@1und1.de> wrote:
>> 
>> >Do you see any chance a request for feature in that direction would
>be
>> >accpeted?
>> 
>> Right now, no. I don't see a requirement that isn't met by the
>existing implementation. If there was a use case that wasn't completely
>off the wall that couldn't be met then it would get looked at. Actual
>implementation would depend on an assessment of benefit against
>complexity.
>> 
>> Mark
>> 
>
>Well the idea is to have additional saftey measures that check if the
>webapp is in the desired state after the context is started. This is
>done by sending queries against the webapp for standard pages or
>debug/health-status pages that the webapp provides.

There is a logic problem with that requirement. Requests without sessions can't be sent to the app until after the health checks are complete and some switch flicked but the health checks are requests without sessions.

>A reason to do not let the context startup fail in a case where the
>webapp is in a non desired state is that you loose access to those
>debug/healt-status pages the webapp provides and you end up searching
>for the causes in the logfiles.

However, this is probably the simplest solution. Put whatever info is in those pages in your error message on failure.

>Antoher point are loadbalancers. Often loadbalancers have the
>possibiity
>to check if a "real Server" is "alive" by sending a request to a
>defined
>URL. So as enother safty maesure one might check this URL too before
>switching. This one should of  course never happen, thats what proper
>testing is for, but in real life strangest things happen.

I can see what you are trying to do but the logic problem needs resolving.

One possible solution:
- add a flag to a context that enables/disables it for parallel deployment
- provide a mechanism (tbd) to change this flag
- deploy apps with this flag enabled by default
- fake the session ID to route the health check to the new app

I haven't looked at the mapper to see how complex this might be and what the performance impact is. Compared to a better error message when startup fails, my initial impression is that this feature wouldn't be worth implementing.

Mark


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233653-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 07:09:15 2012
Return-Path: <users-return-233653-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DD66795ED
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 07:09:14 +0000 (UTC)
Received: (qmail 6375 invoked by uid 500); 19 Apr 2012 07:09:11 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 5739 invoked by uid 500); 19 Apr 2012 07:08:56 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 5669 invoked by uid 99); 19 Apr 2012 07:08:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 07:08:53 +0000
X-ASF-Spam-Status: No, hits=-4.3 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [192.35.17.14] (HELO david.siemens.de) (192.35.17.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 07:08:45 +0000
Received: from mail3.siemens.de (localhost [127.0.0.1])
	by david.siemens.de (8.13.6/8.13.6) with ESMTP id q3J78IcV021306;
	Thu, 19 Apr 2012 09:08:19 +0200
Received: from DEMCHP99ET2MSX.ww902.siemens.net (demchp99et2msx.ww902.siemens.net [139.25.131.241])
	by mail3.siemens.de (8.13.6/8.13.6) with ESMTP id q3J78Ivd001171
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL);
	Thu, 19 Apr 2012 09:08:18 +0200
Received: from DEMCHP99E84MSX.ww902.siemens.net ([169.254.1.87]) by
 DEMCHP99ET2MSX.ww902.siemens.net ([139.25.131.241]) with mapi; Thu, 19 Apr
 2012 09:08:18 +0200
From: "Osipov, Michael" <michael.osipov@siemens.com>
To: Tomcat Users List <users@tomcat.apache.org>,
        =?utf-8?B?7J207J6s66eM?=
	<leejaemannet@naver.com>
Date: Thu, 19 Apr 2012 09:08:40 +0200
Subject: RE: dbcp datasource encryption
Thread-Topic: dbcp datasource encryption
Thread-Index: Ac0d8r4NsXTHNZbyTjifob4LVukJDwACGhwg
Message-ID: <6368FCCCD803D64BB0931D7F5F0A3DD502278A10E6@DEMCHP99E84MSX.ww902.siemens.net>
References: <ea3af05622e4c1ba3d605731c5ebb98@tweb115-2.nm.nhnsystem.com>
In-Reply-To: <ea3af05622e4c1ba3d605731c5ebb98@tweb115-2.nm.nhnsystem.com>
Accept-Language: de-DE
Content-Language: de-DE
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: de-DE
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

7J207J6s66eMIHdyb3RlOg0KPiBhbmQgaSB1c2VkIGRiY3AgYXMgZGF0YXNvdXJjZSBvbiB0b21j
YXQ3IHNvIGkgd2FudCB0byBlbmNyeXB0IGRiY3ANCj4gZGF0YXNvdXJjZSANCj4gDQo+IGhvdyBk
byBpIGVuY3J5cHQgbXkgZGJjcCBkYXRhc291cmNlIC4uIHBsYXNlIGdpdmUgbWUgc29tZSBzYW1w
bGVzLi4NCj4gdGhhbmtzLiANCg0KVGhpcyBzaG91bGQgcHJvYmFibHkgZ28gdG8gdGhlIERCQ1Ag
cG9vbCBidXQgeW91IHNob3VsZCBldmFsdWF0ZSBTU0wgd2l0aCB5b3VyIGRhdGFiYXNlLg0KDQoN
CldpdGggYmVzdCByZWdhcmRzLA0KTWljaGFlbCBPc2lwb3Y=
DQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IHVzZXJzLXVuc3Vi
c2NyaWJlQHRvbWNhdC5hcGFjaGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1t
YWlsOiB1c2Vycy1oZWxwQHRvbWNhdC5hcGFjaGUub3JnDQoN

From users-return-233654-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 07:15:39 2012
Return-Path: <users-return-233654-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2512198B1
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 07:15:39 +0000 (UTC)
Received: (qmail 28005 invoked by uid 500); 19 Apr 2012 07:15:35 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 27797 invoked by uid 500); 19 Apr 2012 07:15:32 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 27768 invoked by uid 99); 19 Apr 2012 07:15:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 07:15:31 +0000
X-ASF-Spam-Status: No, hits=-4.3 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [192.35.17.28] (HELO goliath.siemens.de) (192.35.17.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 07:15:24 +0000
Received: from mail3.siemens.de (localhost [127.0.0.1])
	by goliath.siemens.de (8.13.6/8.13.6) with ESMTP id q3J7F2vO025503
	for <users@tomcat.apache.org>; Thu, 19 Apr 2012 09:15:02 +0200
Received: from DEMCHP99ET2MSX.ww902.siemens.net (demchp99et2msx.ww902.siemens.net [139.25.131.241])
	by mail3.siemens.de (8.13.6/8.13.6) with ESMTP id q3J7F114018687
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <users@tomcat.apache.org>; Thu, 19 Apr 2012 09:15:01 +0200
Received: from DEMCHP99ET5MSX.ww902.siemens.net (139.25.131.175) by
 DEMCHP99ET2MSX.ww902.siemens.net (139.25.131.241) with Microsoft SMTP Server
 (TLS) id 8.3.245.1; Thu, 19 Apr 2012 09:15:01 +0200
Received: from DEMCHP99E84MSX.ww902.siemens.net ([169.254.1.87]) by
 DEMCHP99ET5MSX.ww902.siemens.net ([139.25.131.175]) with mapi; Thu, 19 Apr
 2012 09:15:00 +0200
From: "Osipov, Michael" <michael.osipov@siemens.com>
To: Tomcat Users List <users@tomcat.apache.org>
Date: Thu, 19 Apr 2012 09:15:05 +0200
Subject: RE: Availability of a resource in a realm
Thread-Topic: Availability of a resource in a realm
Thread-Index: Ac0dhGQZTxV2YutzTtWyBrWPn4og3QAdzQog
Message-ID: <6368FCCCD803D64BB0931D7F5F0A3DD502278A10EF@DEMCHP99E84MSX.ww902.siemens.net>
References: <6368FCCCD803D64BB0931D7F5F0A3DD502278A0475@DEMCHP99E84MSX.ww902.siemens.net>
	<CABzHfVnO2xiA0GphqSZG2VzXUCjumpU8Mfx-gwbd_dEQ+HXWEA@mail.gmail.com>
	<6368FCCCD803D64BB0931D7F5F0A3DD502278A0ABD@DEMCHP99E84MSX.ww902.siemens.net>
 <CABzHfVmebsHr_Bv998BpMfnhmzMjb_Ne1CL0KcGHhwB_UPqojQ@mail.gmail.com>
In-Reply-To: <CABzHfVmebsHr_Bv998BpMfnhmzMjb_Ne1CL0KcGHhwB_UPqojQ@mail.gmail.com>
Accept-Language: de-DE
Content-Language: de-DE
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: de-DE
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Konstantin Kolinko wrote:
> 2012/4/18 Osipov, Michael <michael.osipov@siemens.com>:
>> Konstantin Kolinko wrote:
>>> 2012/4/17 Osipov, Michael <michael.osipov@siemens.com>:
>>>> Hi folks,
>>>>=20
>>>> I have a resource declared in my context.xml (not a resource link).
>>>> I want to retrieve that resource as soon as possible in my realm. I
>>>> tried start() and init() but it seems like that at this time the
>>>> InitialContext is not available. So at what time can I expect the
>>>> context being "complete"?=20
>>>>=20
>>>> I am on Tomcat 6.0.35
>>>>=20
>>>=20
>>> Look at DataSourceRealm for an example.
>>>=20
>>> IIRC, what is seen as InitialContext depends on the value of
>>> Thread.getContextClassLoader() when InitialContext instance is
>>> created.
>>=20
>> I have found the spot. Thanks!
>> You have the same approach as me. Prior authentication you retrieve
>> the resource. But, I do cache the resource object you don't. Are
>> there any implications? How costly is a recurring lookup? =20
>=20
> Personally, I'd cache the DataSource obtained through the lookup.  I
> think it is oversight, though maybe it makes the realm more manageable
> through JMX.

A doCache property would be nice though I do not use this realm.

> During first releases of Tomcat 7 there was some discussion about
> objects created by factories in JNDI. Tomcat approach was to cache the
> created object and return it for further lookups. Some recent JavaEE
> spec required a new instance of the object to be created on each
> lookup.   We updated implementation in early Tomcat 7 releases to
> match the recent spec, but had to revert on users' demands, making it
> configurable. See "singleton" attribute
> http://tomcat.apache.org/tomcat-7.0-doc/config/context.html
>=20
> If each lookup created a new DataSource instance it would certainly be
> expensive.
>=20
> I'd say that DataSourceRealm does not create new InitialContext
> instance, so that avoids some initialization overhead. I do not know
> how expensive is the lookup itself.

Thanks for the insight. I ended up init my object like this:

protected synchronized void initDirContextSource()
			throws NamingException {
	=09
		if (dirContextSource =3D=3D null) {
			Context context =3D null;
			if (localDirContextSource) {
				context =3D ContextBindings.getClassLoader();
	            context =3D (Context) context.lookup("comp/env");
			} else {
				StandardServer server =3D (StandardServer) ServerFactory.getServer();
                context =3D server.getGlobalNamingContext();
			}
		=09
			dirContextSource =3D (DirContextSource) context.lookup(dirContextSourceN=
ame);
		}
	}

Which is called by getPrincipal.


Michael

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233655-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 07:25:59 2012
Return-Path: <users-return-233655-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 48F5E98F5
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 07:25:59 +0000 (UTC)
Received: (qmail 61128 invoked by uid 500); 19 Apr 2012 07:25:55 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 61010 invoked by uid 500); 19 Apr 2012 07:25:55 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 60982 invoked by uid 99); 19 Apr 2012 07:25:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 07:25:54 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pid@pidster.com designates 209.85.160.45 as permitted sender)
Received: from [209.85.160.45] (HELO mail-pb0-f45.google.com) (209.85.160.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 07:25:47 +0000
Received: by pbcuo5 with SMTP id uo5so10687939pbc.18
        for <users@tomcat.apache.org>; Thu, 19 Apr 2012 00:25:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=references:from:in-reply-to:mime-version:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        bh=+Wg0aWLFT4R6szrczc+uGOgTTLs1lOC9/o83X878908=;
        b=iIKxLz83X7ts88Ei6is4aVXtnzrKNOnvTcoS9AKSRRRNGC4zwl53VB889iJldt0Qm5
         N0f9fLx3G3UtsHD5+T2I8Ca1LVi8fWaYCpxKIPt4nZwrRD6IuFtW0DA1zWUnh1/D2R9n
         nAIIGxXukLripdaZSqws+3fNQTZXIyXzHKwyU=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=references:from:in-reply-to:mime-version:date:message-id:subject:to
         :content-type:content-transfer-encoding:x-gm-message-state;
        bh=+Wg0aWLFT4R6szrczc+uGOgTTLs1lOC9/o83X878908=;
        b=Q6UNVR9IKuxWVk2p68gwUTpFmpGkh0mFf1rMewN3sGzPpQuILvO26KwcsllCUJb7si
         g5MFMrk0fi50ciQp76u119wW34pn1iT8Ltsg3OerOHpGwzlwI4Bm8clNtjkMjd8kg0n/
         z/GdTCb/pHshstR76bcob2Pb99i8VHgXzAXxZGnM+x9bfY6NBnovqF+QKtgQyy6jmFYN
         SUEKwFlJSNNO5tsVZ0Z6xFWJ8etg+yctD4x+dbQnFosVS9sUthc3RNuVaaCLzaQezaD7
         qxUSBL8AF5C+T2XeSvdFCQIAbGhsZEAJmaLVcYBOS2iGDeS205EfU6SswoxEjAVFgpsC
         JWCQ==
Received: by 10.68.138.193 with SMTP id qs1mr2990528pbb.70.1334820325388; Thu,
 19 Apr 2012 00:25:25 -0700 (PDT)
References: <4F8D9A5B.3020302@vittox.com> <4F8EF3C1.4010801@vittox.com>
 <CABzHfVk3DERdgHzZtQD_uh7a5x6y-cjcpFQfDOMg06nmp3rGsA@mail.gmail.com>
 <4F8F4FF1.2020307@vittox.com> <CABzHfVm4SEANiWw01qzV311XZih8dFOBTTPeN3rb7xHeXFMXTQ@mail.gmail.com>
From: "Pid *" <pid@pidster.com>
In-Reply-To: <CABzHfVm4SEANiWw01qzV311XZih8dFOBTTPeN3rb7xHeXFMXTQ@mail.gmail.com>
Mime-Version: 1.0 (1.0)
Date: Thu, 19 Apr 2012 08:25:56 +0100
Message-ID: <710805633277644507@unknownmsgid>
Subject: Re: JasperException: The value for the useBean class ___ attribute is invalid
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Gm-Message-State: ALoCoQnKw5T/D8OCyd/M+fHYjnTGio41igSbGElWYpPNG0w8pFYbZtgIwvWs6rRrmwL08MJtqGGO

On 19 Apr 2012, at 01:12, Konstantin Kolinko <knst.kolinko@gmail.com> wrote=
:

> 2012/4/19 Chris Patterson <tomcat@vittox.com>:
>> Dear Konstantin, thanks for asking, I will try to answer your questions
>>
>> My experience level is relative, idea is to spend less time sharing your
>> experience.
>> I have installed Tomcat servers for many years mostly on Unix/Linux,
>> and allready have a CentOS 5.6 with Tomcat 6.x (default) on  a local ser=
ver.
>>
>
> OK. Thank you for detailed answer. It makes more sense now.
>
>> I could deploy my "Dynamic Web Application" (eclipse language) named Tes=
t-03
>> from a
>> WAR format and it worked for both cases. _So it should not be the "code"=
._
>> Of course it is not a Web App, its only a Test.
>>
>> Differences are:
>> Local host has Tomcat 6.x, VPS server has Tomcat 5.3.35
>> Local host has Java 1.6.0_22 / OpenJDK 64-Bit, VPS server has Java 1.6.0=
_29
>> / Java Hotspot 64-Bit
>>
>> I checked following files having basically the same default configuratio=
n:
>> server.xml, web.xml, context.xml
>>
>> When deployed on the /local server/ using the Tomcat Manager
>> I see the following directories:
>>
>>  docs
>>  examples
>>  host-manager
>>  manager
>>  ROOT
>>  sample
>>  Test-03
>>  Test-03.war
>>
>> Under ROOT is working the Test with URLs:
>>  localhost:8080/prg1.jsp
>>  localhost:8080/subdir/prg2.jsp

If you have deployed the broken config you originally posted then
there is a good chance that subdir is being treated as a web
application and Jasper is looking for the class in a non-existent
WEB-INF/lib.


p




>> Also work fine under Test-03
>>    localhost:8080/Test-03/prg1.jsp
>>    localhost:8080/Test-03/subdir/prg2.jsp
>>
>> The class files are respectively under ROOT/WEB-INF/classes and
>> Test-02/WEB-INF/classes
>> I just copied all content undet Test-03 to the ROOT folder and reloaded
>> (using the Manager)
>>
>
> There are two apparent differences with the above copy+reload
> procedure, as compared with "clean" deploy:
>
> 1. Reload !=3D (Start + Stop).
>
> It is a more lightweight operation than stopping and then starting a
> webapp. Maybe something went wrong there.
>
>
> 2. You have not cleared the work directory of the ROOT webapp.
>
> So there might be previous compiled classes for those JSPs. Depending
> on timestamps they will be not recompiled.  (E.g. if you replace a jsp
> with an older copy of that jsp, it will not be recompiled. Check
> whether the clock on the server has the correct time. Thought it is
> easier to just clean the work directory for the webapp.)
>
>
> The resource id for that "The value for the useBean class" message is
> "jsp.error.invalid.bean".
>
> It is thrown is in jasper.compiler.Generator#visit() when it visits
> <jsp:useBean> node if it cannot load the class specified in the
> useBean tag.
>
> http://svn.apache.org/viewvc/tomcat/tc5.5.x/tags/TOMCAT_5_5_35/jasper/src=
/share/org/apache/jasper/compiler/Generator.java?view=3Dmarkup#l1199
>
>
> You have to check that you did not forget to copy necessary supporting
> classes and libraries. If that fails, try to write a simple jsp that
> explicitly loads that class.
>
>> The same excersise on the VPS running CPanel for a domain like etrust.us
>> does only work for etrust.us/Test-03/prg1.jsp
>> When trying etrust.us/prg1.jsp it only works until trying
>> etrust.us/subdir/prg2.jsp,
>> then i get the error 500: JasperException: The value for the useBean cla=
ss
>> ___ attribute is invalid
>>
>> Log file shows no more details about the issue.
>>
>> As "main directory" I mean the docBase referenced in the server.xml file=
.
>> I have read the Servlet Specificacion (2.4) and did several changes to t=
he
>> configuration files with no success.
>>
>> Does someone here have any idea where to check some configuration ?
>>
>>
>> El 18/04/2012 12:08 p.m., Konstantin Kolinko escribi=C3=B3:
>>>
>>> 2012/4/18 Chris Patterson<tomcat@vittox.com>:
>>>>
>>>> More on this, now I think it is some configuration issue for the tomca=
t
>>>> server:
>>>>
>>>> I am using eclipse to check both JSP files, and they work without any
>>>> problems
>>>> in my PC. When deploying to Tomcat 5.5.35 to a sub-directory like de
>>>> project
>>>> name
>>>> they also work fine. For example at www.domain.com/Test1/prg1.jsp and
>>>> www.domain.com/Test1/subdir/prg2.jsp.
>>>>
>>>> If I copy them to the main directory with a shell command:
>>>> cp -pr * .. from the Test1 directory and undeploy the Test1 applicatio=
n
>>>> then only www.domain.com/prg1.jsp works and but the second one,
>>>> www.domain.com/subdir/prg2.jsp gives me the same (500) error:
>>>>
>>>> /prg2.jsp(26,0) The value for the useBean class attribute
>>>> jdbcbean.Stringbean is invalid.
>>>>
>>>>
>>>> Is this like a BUG ? Or perhaps something about the Java version ?
>>>> I have the following version running on a CentOS release 5.8:
>>>> java version "1.6.0_29"
>>>> Java(TM) SE Runtime Environment (build 1.6.0_29-b11)
>>>> Java HotSpot(TM) 64-Bit Server VM (build 20.4-b02, mixed mode)
>>>>
>>>> Hope this info help a little more to find a solution.
>>>>
>>>>
>>> What is your experience level?
>>>
>>> Do you know what a "web application" is?
>>> Have you read The Servlet specification, Documentation, etc.?
>>>
>>> Do you know where your classes must be put in a Web application?
>>>
>>> Your "main directory" terminology does not make sense.
>>>
>
> Best regards,
> Konstantin Kolinko
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233656-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 07:35:14 2012
Return-Path: <users-return-233656-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2476192E8
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 07:35:14 +0000 (UTC)
Received: (qmail 95489 invoked by uid 500); 19 Apr 2012 07:35:10 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 95314 invoked by uid 500); 19 Apr 2012 07:35:10 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 95296 invoked by uid 99); 19 Apr 2012 07:35:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 07:35:09 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pid@pidster.com designates 209.85.160.45 as permitted sender)
Received: from [209.85.160.45] (HELO mail-pb0-f45.google.com) (209.85.160.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 07:35:02 +0000
Received: by pbcuo5 with SMTP id uo5so10698727pbc.18
        for <users@tomcat.apache.org>; Thu, 19 Apr 2012 00:34:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=references:from:in-reply-to:mime-version:date:message-id:subject:to
         :content-type;
        bh=HAsCmfq4qV2tab+yN187ipry+xlm7DuiTXH5HBs3iJc=;
        b=ha8aL9tbbXC9gXtaeFp3xFSANyDm2QoqE8i0W/8cpIWM74qmmAoqzTfChF+8cUxODQ
         /0A1+nTqHCexm6uh/IkloMxnb9EQXkTtYyTzp29Ug1yN1yXlH7e/yRaJ3qVzViPald3z
         0eJro/9V/OW0I57m5gSHJHEGYsKTFkejYj2pU=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=references:from:in-reply-to:mime-version:date:message-id:subject:to
         :content-type:x-gm-message-state;
        bh=HAsCmfq4qV2tab+yN187ipry+xlm7DuiTXH5HBs3iJc=;
        b=CtlYmF/UrMTbMC9PzZlQvkfyhwZo+LwHZBkfJbEIfG5Np9qwiO6PGsg/f5Oc6elZ1F
         EH9KnJhnwC+hheUhL2T6mnsxzZhTMVmK9p7Ve0jQa8nyiFUlerRoHILcgOUfyKL2u/UI
         3wKx8h+ZYM3waXY3WVnz1Xz3fwIgyrOYmiuR8I96mK56Gfh5baxOMNmkS6MwVY5wA1uE
         2OeYlTFp8AArwryh/U3XRJPmQu5PzeJYfW35D1Vo8PzFOQpNh1uenNzM2DtjrytbO6Do
         AnThPfVRTWyPbIpSKlhCRz0m/72vligLhLgjQR/kTqCn0GZy490NUv/UFm1fBi8kU3fn
         PpcA==
Received: by 10.68.223.234 with SMTP id qx10mr2888678pbc.154.1334820881042;
 Thu, 19 Apr 2012 00:34:41 -0700 (PDT)
References: <15D3435601304A49A5E13D0825711B6128CC5706@EXCHANGE07.webde.local>
 <c9852e00-8f22-4a9a-99b7-7543ab14d743@email.android.com> <15D3435601304A49A5E13D0825711B6128CC570C@EXCHANGE07.webde.local>
 <efd47547-82e2-4d89-b0e3-76747acb8a6c@email.android.com> <15D3435601304A49A5E13D0825711B6128CC5740@EXCHANGE07.webde.local>
 <2be74d4f-f0ca-42e2-850a-b856def1449c@email.android.com>
From: "Pid *" <pid@pidster.com>
In-Reply-To: <2be74d4f-f0ca-42e2-850a-b856def1449c@email.android.com>
Mime-Version: 1.0 (1.0)
Date: Thu, 19 Apr 2012 08:35:16 +0100
Message-ID: <-7644235873111289499@unknownmsgid>
Subject: Re: parallel deployment activation of new version
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=UTF-8
X-Gm-Message-State: ALoCoQmmfkkWxHQUJnOdYaSeX3H1CLSHCtn2bpzHwk+ub2UWr63lHM0aHNBk3ij9/+cprs1CJGxu

On 19 Apr 2012, at 08:07, "markt@apache.org" <markt@apache.org> wrote:

> Christoph Maser <Christoph.Maser@1und1.de> wrote:
>
>> Am Donnerstag, den 12.04.2012, 14:02 +0100 schrieb markt@apache.org:
>>> Christoph Maser <Christoph.Maser@1und1.de> wrote:
>>>
>>>> Do you see any chance a request for feature in that direction would
>> be
>>>> accpeted?
>>>
>>> Right now, no. I don't see a requirement that isn't met by the
>> existing implementation. If there was a use case that wasn't completely
>> off the wall that couldn't be met then it would get looked at. Actual
>> implementation would depend on an assessment of benefit against
>> complexity.
>>>
>>> Mark
>>>
>>
>> Well the idea is to have additional saftey measures that check if the
>> webapp is in the desired state after the context is started. This is
>> done by sending queries against the webapp for standard pages or
>> debug/health-status pages that the webapp provides.
>
> There is a logic problem with that requirement. Requests without sessions can't be sent to the app until after the health checks are complete and some switch flicked but the health checks are requests without sessions.
>
>> A reason to do not let the context startup fail in a case where the
>> webapp is in a non desired state is that you loose access to those
>> debug/healt-status pages the webapp provides and you end up searching
>> for the causes in the logfiles.
>
> However, this is probably the simplest solution. Put whatever info is in those pages in your error message on failure.
>
>> Antoher point are loadbalancers. Often loadbalancers have the
>> possibiity
>> to check if a "real Server" is "alive" by sending a request to a
>> defined
>> URL. So as enother safty maesure one might check this URL too before
>> switching. This one should of  course never happen, thats what proper
>> testing is for, but in real life strangest things happen.
>
> I can see what you are trying to do but the logic problem needs resolving.
>
> One possible solution:
> - add a flag to a context that enables/disables it for parallel deployment
> - provide a mechanism (tbd) to change this flag
> - deploy apps with this flag enabled by default
> - fake the session ID to route the health check to the new app
>
> I haven't looked at the mapper to see how complex this might be and what the performance impact is. Compared to a better error message when startup fails, my initial impression is that this feature wouldn't be worth implementing.

Especially when:

 ROOT/myapp1/healthcheck <- always reports app load failure
 ROOT/myapp2/healthcheck
 ROOT/myapp3/healthcheck

 /myapp1/healthcheck
 /myapp2/healthcheck
 /myapp3/healthcheck

would achieve the same.

A Filter in ROOT on /*/healthcheck would also work.

Better than both is to use the JMX API where you can see the presence
and state of each component.


p



>
> Mark
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233657-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 09:13:01 2012
Return-Path: <users-return-233657-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 509D79A16
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 09:13:01 +0000 (UTC)
Received: (qmail 49600 invoked by uid 500); 19 Apr 2012 09:12:57 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 49424 invoked by uid 500); 19 Apr 2012 09:12:57 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 49403 invoked by uid 99); 19 Apr 2012 09:12:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 09:12:56 +0000
X-ASF-Spam-Status: No, hits=3.4 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,HTML_MESSAGE,SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (athena.apache.org: transitioning domain of amine20@hotmail.com does not designate 216.139.250.139 as permitted sender)
Received: from [216.139.250.139] (HELO joe.nabble.com) (216.139.250.139)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 09:12:50 +0000
Received: from alf.nabble.com ([192.168.236.21])
	by joe.nabble.com with esmtp (Exim 4.72)
	(envelope-from <amine20@hotmail.com>)
	id 1SKnPi-0005RJ-2B
	for users@tomcat.apache.org; Thu, 19 Apr 2012 02:12:30 -0700
Date: Thu, 19 Apr 2012 02:12:30 -0700 (PDT)
From: amine20 <amine20@hotmail.com>
To: users@tomcat.apache.org
Message-ID: <BLU168-W33D52D044BF3EAF84CB6AAA33D0@phx.gbl>
In-Reply-To: <4F8DC4E3.1070700@pidster.com>
References: <1334659891301-4889811.post@n6.nabble.com> <1334667295617-4890173.post@n6.nabble.com> <4F8DC4E3.1070700@pidster.com>
Subject: RE: PLZ help: i've issue with SSL TOMCAT
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_21833_29875980.1334826750059"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_21833_29875980.1334826750059
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Hi,

i fixed the problem with SSL-TOMCAT6, yes the first cause is that the permissions on
the file don't allow the Tomcat user to
load the keystore file [as you see to me ( i'll give youhaz burger) :) ].

but the second & big cause is that keystool generate a "gkr" kind of format while it must be jks format by default. 
Why: because i use the java installed by the debian package, i've tried to use .bin java installed from the officiel website,
so and all works.

thank you for your help.


> i thank i need some file *.jar to add in

> ----/tomcat6/webapps/cas/WEB-INF/lib?

> i m wrong ??


Yes, you're wrong.  Read Igor's email again.


You've put the keystore in the /root directory which should not be

accessible to Tomcat.  Move it to tomcat/conf and change the path

reference to it.


Also check that the permissions on the file allow the Tomcat user* to

read the file.



Once you've done that Tomcat will start, but the certificate probably

won't work because you appear to have put the application name 'cas' in

the Common Name field - which should contain the hostname.


You put the hostname in Organization Name field, where it is not used.



p



*  Because you're not running Tomcat using 'root' right?

** Can I haz burger?



> --

> View this message in context: http://tomcat.10.n6.nabble.com/PLZ-help-i-ve-issue-with-SSL-TOMCAT-tp4889811p4890173.html
> Sent from the Tomcat - User mailing list archive at Nabble.com.

> 

> ---------------------------------------------------------------------

> To unsubscribe, e-mail: [hidden email]

> For additional commands, e-mail: [hidden email]

> 



-- 


[key:62590808]



 signature.asc (964 bytes) Download Attachment
	
	

	

	
	
		If you reply to this email, your message will be added to the discussion below:
		http://tomcat.10.n6.nabble.com/PLZ-help-i-ve-issue-with-SSL-TOMCAT-tp4889811p4891543.html
	
	
		
		To unsubscribe from PLZ help: i've issue with SSL TOMCAT, click here.

		NAML
	 		 	   		  

--
View this message in context: http://tomcat.10.n6.nabble.com/PLZ-help-i-ve-issue-with-SSL-TOMCAT-tp4889811p4897504.html
Sent from the Tomcat - User mailing list archive at Nabble.com.
------=_Part_21833_29875980.1334826750059--

From users-return-233658-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 09:32:43 2012
Return-Path: <users-return-233658-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 642219F75
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 09:32:43 +0000 (UTC)
Received: (qmail 98217 invoked by uid 500); 19 Apr 2012 09:32:39 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 98134 invoked by uid 500); 19 Apr 2012 09:32:39 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 98029 invoked by uid 99); 19 Apr 2012 09:32:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 09:32:37 +0000
X-ASF-Spam-Status: No, hits=4.7 required=5.0
	tests=FREEMAIL_FORGED_REPLYTO,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [98.139.91.220] (HELO nm21-vm0.bullet.mail.sp2.yahoo.com) (98.139.91.220)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 19 Apr 2012 09:32:26 +0000
Received: from [98.139.91.70] by nm21.bullet.mail.sp2.yahoo.com with NNFMP; 19 Apr 2012 09:32:04 -0000
Received: from [98.139.91.32] by tm10.bullet.mail.sp2.yahoo.com with NNFMP; 19 Apr 2012 09:32:04 -0000
Received: from [127.0.0.1] by omp1032.mail.sp2.yahoo.com with NNFMP; 19 Apr 2012 09:32:04 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 596094.13976.bm@omp1032.mail.sp2.yahoo.com
Received: (qmail 38360 invoked by uid 60001); 19 Apr 2012 09:32:04 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1334827924; bh=/bnvrkTt8TSSf4aiZ7yLJPI6B8lDO+gkjVvVvtsHJYo=; h=X-YMail-OSG:Received:X-Mailer:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type; b=rJUrRq70jHp5yYT9P3JFzKSvkDbW8QrtvkHMZm+ngrJMAHgV9SZdV2HUf0lQBFeZAZx9lQG6QFzsTxIfKyzhvtnRt3ViQ9nmN/bjaL894hq6WGSYe0gqudXGLGlRRY4bJlZhQ8cAc8ZZJW9hgLtVsW2PBRgO5TZoshLpFwuJ9C8=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type;
  b=Lq5UoZrnBHDFdQPj6qMUN5a+kww9sk1diG4xU8jHofWRLgdedWFiUaHkFKk9Sme07/R75NFWZR8zm0GNm9U61nufRF//sQvVLu8TrdL+a7GRGCoAEup8jqangtvK6OC1d1S45x3d5oi2cmxni+s+lNwoZvh0UKsB/pZKQv+V6MU=;
X-YMail-OSG: SN7JdjcVM1nDE7Y.eRkI1Kss8UtMPwxtfJfVg1V7UGACHP8
 w6B2wEFoDOi4PXHqLQuVUR7sd3oRUrF_Pbw9WyMkaVHnWT1sj7rK0X5QqDXa
 dHLSpbIHcCfbA3hPN.PFr64.0U4bCAL4gv5dtZ4Un1RGkms1lHzgzyPFVzWd
 WtSYuLwe754D4LlKj5C1NrHz9JfmsG7A26aYYjOzvZg9DtdYcVdlSarjb7Mh
 d26d.dwA20oXoz_s1YiBWrdhpwz873PeAiGQEdSCPi8ZK.HYSZYE2aP38jlJ
 CCtxsKjSvaXYemV5s3yMJ5DaMzF4B.S7d_DGQ0ZcDg8TIscuujrfVkcuycaC
 uWXAKJfOAAPjhoqaMq.gQ3BKGktFJRCN1_Ttk1kUGvWVnvH1XPczDQTwBUA9
 avKxm7vHlt7PUXY5qfuCgP8R8wybFzbRkNwmvNZ4mxD_WK3wlpGlleINErOl
 8lvxBa2SN
Received: from [116.203.40.222] by web113505.mail.gq1.yahoo.com via HTTP; Thu, 19 Apr 2012 02:32:04 PDT
X-Mailer: YahooMailWebService/0.8.117.340979
Message-ID: <1334827924.35471.YahooMailNeo@web113505.mail.gq1.yahoo.com>
Date: Thu, 19 Apr 2012 02:32:04 -0700 (PDT)
From: Amol Puglia <amolcpuglia@yahoo.com>
Reply-To: Amol Puglia <amolcpuglia@yahoo.com>
Subject: Issue in tomcat 6.0.26
To: Tomcat Users List <users@tomcat.apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="1109760091-428167227-1334827924=:35471"

--1109760091-428167227-1334827924=:35471
Content-Type: text/plain; charset=us-ascii

Hello Team,

We are getting following error in tomcat.
 Apr 19, 2012 11:10:13 AM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet jsp threw exception
java.lang.IllegalStateException: getOutputStream() has already been called for this response
at org.apache.catalina.connector.Response.getWriter(Response.java:610)
at org.apache.catalina.connector.ResponseFacade.getWriter(ResponseFacade.java:198)
at org.apache.jasper.runtime.JspWriterImpl.initOut(JspWriterImpl.java:125)
at org.apache.jasper.runtime.JspWriterImpl.write(JspWriterImpl.java:276)

Tomcat Version :- Apache Tomcat/6.0.26

JDK Version :- jdk1.6.0_24

Kindly provide the solution.

Let me know if you need more information.

--1109760091-428167227-1334827924=:35471--

From users-return-233659-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 09:35:38 2012
Return-Path: <users-return-233659-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A0AEE9018
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 09:35:38 +0000 (UTC)
Received: (qmail 6686 invoked by uid 500); 19 Apr 2012 09:35:35 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 6630 invoked by uid 500); 19 Apr 2012 09:35:34 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 6615 invoked by uid 99); 19 Apr 2012 09:35:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 09:35:34 +0000
X-ASF-Spam-Status: No, hits=0.9 required=5.0
	tests=RCVD_NUMERIC_HELO,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jak-tomcat-user@m.gmane.org designates 80.91.229.3 as permitted sender)
Received: from [80.91.229.3] (HELO plane.gmane.org) (80.91.229.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 09:35:25 +0000
Received: from list by plane.gmane.org with local (Exim 4.69)
	(envelope-from <jak-tomcat-user@m.gmane.org>)
	id 1SKnlX-0002Nt-Nn
	for users@tomcat.apache.org; Thu, 19 Apr 2012 11:35:03 +0200
Received: from 116.50.66.30 ([116.50.66.30])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <users@tomcat.apache.org>; Thu, 19 Apr 2012 11:35:03 +0200
Received: from neeraj.sood by 116.50.66.30 with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <users@tomcat.apache.org>; Thu, 19 Apr 2012 11:35:03 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: users@tomcat.apache.org
From: Neeraj Sood <neeraj.sood@ril.com>
Subject: my website is not opening after installing CA certificate successfully
Date: Thu, 19 Apr 2012 09:30:07 +0000 (UTC)
Lines: 29
Message-ID: <loom.20120419T112147-812@post.gmane.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@dough.gmane.org
X-Gmane-NNTP-Posting-Host: sea.gmane.org
User-Agent: Loom/3.14 (http://gmane.org/)
X-Loom-IP: 116.50.66.30 (Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; MS-RTC LM 8; .NET4.0C; .NET4.0E))

C:\Users\neeraj.sood>keytool -list
Enter keystore password:

Keystore type: JKS
Keystore provider: SUN

Your keystore contains 2 entries

rilrootca, 19 Apr, 2012, trustedCertEntry,
Certificate fingerprint (SHA1): 
99:67:6B:C9:B8:90:C1:F0:14:53:36:E3:C7:ED:05:9E:
61:DC:16:A2
rilca, 19 Apr, 2012, trustedCertEntry,
Certificate fingerprint (SHA1): 
99:67:6B:C9:B8:90:C1:F0:14:53:36:E3:C7:ED:05:9E:
61:DC:16:A2


I am able to install certificate successfully. But my site does not open the 
home page. But if I create new certificate using keytool command  :- keytool -
genkey -alias tomcat -keyalg RSA. My home page starts working , but the 
cerficate is not authenticated or validated by the browser.

how to configure certificate in my tomcat server.xml

Need urgent help on this.


Neeraj Sood


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233660-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 13:33:02 2012
Return-Path: <users-return-233660-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 62AE0916B
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 13:33:02 +0000 (UTC)
Received: (qmail 33970 invoked by uid 500); 19 Apr 2012 13:32:58 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 33914 invoked by uid 500); 19 Apr 2012 13:32:58 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 33905 invoked by uid 99); 19 Apr 2012 13:32:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 13:32:58 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cjderham@gmail.com designates 209.85.215.45 as permitted sender)
Received: from [209.85.215.45] (HELO mail-lpp01m010-f45.google.com) (209.85.215.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 13:32:52 +0000
Received: by lahe6 with SMTP id e6so8192284lah.18
        for <users@tomcat.apache.org>; Thu, 19 Apr 2012 06:32:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:reply-to:sender:in-reply-to:references:from:date
         :x-google-sender-auth:message-id:subject:to:content-type;
        bh=3pLvJH5MiBXSF30/Yk/g68+X0uSM7cwh2IhDl6xuEOY=;
        b=FimKA+vcTik0j2/SLWl28Frpl3Ub4u2lNRLZvQ0ZVcmbqPKAMW93pEx50Il9x935MP
         Zh9PpgO/K5Do4yP4fI1AsFliJ/bOsKqab7Efzs52KT8a6DM9JuLcUylAhnYnceUq+JPx
         dQA07nW0FXkZGZx5Ljs5pTtWUbMDSor63BXSAJvlbqus1Nr5wzNghkIpcFW112MhUkR8
         5nVpYa67ba7JJBqR4ISzO6v7cOT9l19JPadzfIEDq76yRbx4N3xiJk+IHNWmUlZ+0rEn
         EH6BdgAimVRoeQckhqfC3KtS0GxRl5Z/ueyHV8oA7WmNz3nxSmNhXatEYigpGhbyNMBg
         mHKA==
Received: by 10.112.27.198 with SMTP id v6mr988595lbg.57.1334842350505; Thu,
 19 Apr 2012 06:32:30 -0700 (PDT)
MIME-Version: 1.0
Reply-To: chris@derham.me.uk
Sender: cjderham@gmail.com
Received: by 10.112.117.37 with HTTP; Thu, 19 Apr 2012 06:32:10 -0700 (PDT)
In-Reply-To: <4F8F1EEB.2070000@apache.org>
References: <CAG6aRdX7aA9J8RZ1OAhyUQCayi2D2E=_9FJryTH4Z1v7dDSosw@mail.gmail.com>
 <4F8F1EEB.2070000@apache.org>
From: chris derham <chris@derham.me.uk>
Date: Thu, 19 Apr 2012 10:32:10 -0300
X-Google-Sender-Auth: MGPEmOYhcmLgjjxFZYSGoWP1JEA
Message-ID: <CAG6aRdXuMWqvXLTv=M=-YNQzxX8LQLiTYyoYtUoUCQF32Ln-yQ@mail.gmail.com>
Subject: Re: 64bit windows mod_jk connector download for apache httpd 2.4
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=bcaec554056c220f0504be083497
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec554056c220f0504be083497
Content-Type: text/plain; charset=ISO-8859-1

On Wed, Apr 18, 2012 at 5:07 PM, Mladen Turk <mturk@apache.org> wrote:

> On 04/18/2012 02:00 PM, chris derham wrote:
>
>> All,
>>
>> Our setup has apache tomcat running behind apache httpd using mod_jk. I
>> would like to upgrade to apache 2.4, but for this I need to find a 64bit
>> mod_jk release for httpd 2.4. The binaries contained at
>> http://tomcat.apache.org/**download-connectors.cgi<http://tomcat.apache.org/download-connectors.cgi>32 bit httpd connectors,
>> or a 64bit iis one.
>>
>>
> Why would you need a 64-bit httpd at the first place
> especially on windows.
>

Can't help feel that I am falling into a trap here, but if we have a
windows 64 bit os, using 64 bit jvm and 64 bit tomcat, are you suggesting
that it would be better to use a 32 bit httpd and mod_jk?

>
> Anyhow, building should be easy if you have 64-bit windows dev httpd.
>
> Open Vstudio command prompt for 64-bit development
> (You should have a shortcut for that)
>
> > cd where-ever-you-unzip\tomcat-**connectors-1.2.35-src\native\**
> apache-2.0
> > nmake -f Makefile.vc ARCH=AMD64 APACHE24_HOME=C:\httpd-2.4.2
>
> Worked perfectly. Thank you. Would you think that it is a good idea to add
this text to a new section in building.txt? I can supply the patch to the
documentation if you concur, just not sure if this should go into a new
file or an addendum to the existing one

I see that the binary releases that are available are signed by you. So
perhaps I could ask why there isn't a 64 bit mod_jk included? I assume the
answer will relate to your response to the above question

Thanks for your help

Chris

--bcaec554056c220f0504be083497--

From users-return-233661-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 16:15:27 2012
Return-Path: <users-return-233661-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 258B79617
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 16:15:27 +0000 (UTC)
Received: (qmail 31624 invoked by uid 500); 19 Apr 2012 16:15:23 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 31586 invoked by uid 500); 19 Apr 2012 16:15:23 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 31576 invoked by uid 99); 19 Apr 2012 16:15:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 16:15:23 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [76.96.62.24] (HELO qmta01.westchester.pa.mail.comcast.net) (76.96.62.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 16:15:16 +0000
Received: from omta14.westchester.pa.mail.comcast.net ([76.96.62.60])
	by qmta01.westchester.pa.mail.comcast.net with comcast
	id zsDU1i0061HzFnQ51sEvos; Thu, 19 Apr 2012 16:14:55 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta14.westchester.pa.mail.comcast.net with comcast
	id zsEw1i00B38FjT13asEwd8; Thu, 19 Apr 2012 16:14:56 +0000
Message-ID: <4F9039FE.2030304@christopherschultz.net>
Date: Thu, 19 Apr 2012 12:14:54 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: dbcp datasource encryption
References: <ea3af05622e4c1ba3d605731c5ebb98@tweb115-2.nm.nhnsystem.com>
In-Reply-To: <ea3af05622e4c1ba3d605731c5ebb98@tweb115-2.nm.nhnsystem.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

,

On 4/19/12 2:07 AM,  wrote:
> i am operating website on tomcat6 and tomcat7
> 
> and i used dbcp as datasource on tomcat7 so i want to encrypt dbcp 
> datasource
> 
> how do i encrypt my dbcp datasource .. plase give me some
> samples.. thanks.

It's not clear what you are trying to do:

Are you trying to encrypt your data in the database?
Are you trying to encrypt your connection to your database?
Are you trying to encrypt the password to your database in your
<Resource> element?

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+QOf4ACgkQ9CaO5/Lv0PBHogCggb3wdvpiYMRQfkgs9vWJ9LA9
T7cAn0g31CA6PuT3dZOVdtFc2BYmVRZK
=ra9N
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233662-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 16:18:41 2012
Return-Path: <users-return-233662-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 195A79743
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 16:18:41 +0000 (UTC)
Received: (qmail 50646 invoked by uid 500); 19 Apr 2012 16:18:37 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 50575 invoked by uid 500); 19 Apr 2012 16:18:37 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 50565 invoked by uid 99); 19 Apr 2012 16:18:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 16:18:37 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [76.96.62.32] (HELO qmta03.westchester.pa.mail.comcast.net) (76.96.62.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 16:18:29 +0000
Received: from omta17.westchester.pa.mail.comcast.net ([76.96.62.89])
	by qmta03.westchester.pa.mail.comcast.net with comcast
	id zsJ41i0021vXlb853sJ822; Thu, 19 Apr 2012 16:18:08 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta17.westchester.pa.mail.comcast.net with comcast
	id zsJ71i01C38FjT13dsJ7UP; Thu, 19 Apr 2012 16:18:07 +0000
Message-ID: <4F903ABE.2020903@christopherschultz.net>
Date: Thu, 19 Apr 2012 12:18:06 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: JasperException: The value for the useBean class ___ attribute
 is invalid
References: <4F8D9A5B.3020302@vittox.com> <4F8EF3C1.4010801@vittox.com> <CABzHfVk3DERdgHzZtQD_uh7a5x6y-cjcpFQfDOMg06nmp3rGsA@mail.gmail.com> <4F8F4FF1.2020307@vittox.com>
In-Reply-To: <4F8F4FF1.2020307@vittox.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Chris,

On 4/18/12 7:36 PM, Chris Patterson wrote:
> Differences are: Local host has Tomcat 6.x, VPS server has Tomcat
> 5.3.35 Local host has Java 1.6.0_22 / OpenJDK 64-Bit, VPS server
> has Java 1.6.0_29 / Java Hotspot 64-Bit
> 
> I checked following files having basically the same default
> configuration: server.xml, web.xml, context.xml

If you are using the same conf/server.xml and conf/context.xml (the
site-wide default, not the one in your WAR file) for both Tomcat 6.0.x
and 5.5.x, then you are probably getting things muddled-up: those
files are not compatible across Tomcat versions.

Please check to see that conf/server.xml and conf/context.xml isn't
your problem.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+QOr4ACgkQ9CaO5/Lv0PBNtQCggilBao3XiY2HDmmiQmtvyRoN
HfAAoLVeY+ugA2HHeHdpOqbQJKyjdXYM
=AUPO
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233663-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 16:21:55 2012
Return-Path: <users-return-233663-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1CE8E9A4C
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 16:21:55 +0000 (UTC)
Received: (qmail 67830 invoked by uid 500); 19 Apr 2012 16:21:51 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 67740 invoked by uid 500); 19 Apr 2012 16:21:51 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 67730 invoked by uid 99); 19 Apr 2012 16:21:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 16:21:51 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [76.96.62.96] (HELO qmta09.westchester.pa.mail.comcast.net) (76.96.62.96)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 16:21:44 +0000
Received: from omta22.westchester.pa.mail.comcast.net ([76.96.62.73])
	by qmta09.westchester.pa.mail.comcast.net with comcast
	id zoPa1i0021ap0As59sMQrh; Thu, 19 Apr 2012 16:21:24 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta22.westchester.pa.mail.comcast.net with comcast
	id zsMQ1i01s38FjT13isMQ8X; Thu, 19 Apr 2012 16:21:25 +0000
Message-ID: <4F903B82.6080508@christopherschultz.net>
Date: Thu, 19 Apr 2012 12:21:22 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: parallel deployment activation of new version
References: <15D3435601304A49A5E13D0825711B6128CC5706@EXCHANGE07.webde.local> <c9852e00-8f22-4a9a-99b7-7543ab14d743@email.android.com> <15D3435601304A49A5E13D0825711B6128CC570C@EXCHANGE07.webde.local> <efd47547-82e2-4d89-b0e3-76747acb8a6c@email.android.com> <15D3435601304A49A5E13D0825711B6128CC5740@EXCHANGE07.webde.local>
In-Reply-To: <15D3435601304A49A5E13D0825711B6128CC5740@EXCHANGE07.webde.local>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Christoph,

On 4/19/12 2:34 AM, Christoph Maser wrote:
> Well the idea is to have additional saftey measures that check if
> the webapp is in the desired state after the context is started.
> This is done by sending queries against the webapp for standard
> pages or debug/health-status pages that the webapp provides.

What about the webapp itself performing its own health-check as a last
step of deployment, and throwing an exception (thereby preventing
Tomcat from bringing it into service) if things aren't in working order?

That would seem to be easier than re-working Tomcat to allow *true*
parallel deployment where the client gets to pick the version of the
webapp to contact.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+QO4IACgkQ9CaO5/Lv0PAjtwCgizwupYsPsMk78IuzyNxarw9w
wcEAoKbmk7iCipLAN5u3uIeSRdCLma0h
=OC9u
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233664-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 16:25:44 2012
Return-Path: <users-return-233664-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 80D979BDA
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 16:25:44 +0000 (UTC)
Received: (qmail 87695 invoked by uid 500); 19 Apr 2012 16:25:41 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 87617 invoked by uid 500); 19 Apr 2012 16:25:41 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 87607 invoked by uid 99); 19 Apr 2012 16:25:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 16:25:40 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [76.96.59.211] (HELO QMTA11.westchester.pa.mail.comcast.net) (76.96.59.211)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 16:25:33 +0000
Received: from omta13.westchester.pa.mail.comcast.net ([76.96.62.52])
	by QMTA11.westchester.pa.mail.comcast.net with comcast
	id zsMp1i00417dt5G5BsREJE; Thu, 19 Apr 2012 16:25:14 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta13.westchester.pa.mail.comcast.net with comcast
	id zsRE1i00T38FjT13ZsREiv; Thu, 19 Apr 2012 16:25:14 +0000
Message-ID: <4F903C68.6070105@christopherschultz.net>
Date: Thu, 19 Apr 2012 12:25:12 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Issue in tomcat 6.0.26
References: <1334827924.35471.YahooMailNeo@web113505.mail.gq1.yahoo.com>
In-Reply-To: <1334827924.35471.YahooMailNeo@web113505.mail.gq1.yahoo.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Amol,

On 4/19/12 5:32 AM, Amol Puglia wrote:
> Hello Team,
> 
> We are getting following error in tomcat. Apr 19, 2012 11:10:13 AM
> org.apache.catalina.core.StandardWrapperValve invoke SEVERE:
> Servlet.service() for servlet jsp threw exception 
> java.lang.IllegalStateException: getOutputStream() has already been
> called for this response at
> org.apache.catalina.connector.Response.getWriter(Response.java:610)
>
> 
at
org.apache.catalina.connector.ResponseFacade.getWriter(ResponseFacade.java:198)
> at
> org.apache.jasper.runtime.JspWriterImpl.initOut(JspWriterImpl.java:125)
>
> 
at org.apache.jasper.runtime.JspWriterImpl.write(JspWriterImpl.java:276)

That can't be the end of the stack trace. Post the whole thing (no
matter how long).

> Tomcat Version :- Apache Tomcat/6.0.26

That's quite old (2 years out of date at this point). You might want
to move up to the latest version to get important security fixes
(including several "Moderate" and "Important" ones) as well as bug fixes.

> Kindly provide the solution.

Briefly: don't call getOutputStream more than once ;)

- -chris

-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+QPGgACgkQ9CaO5/Lv0PCT6ACdGH+weJ2jJxqXVpLdyAqaqzaQ
yD0AoMO5lVOV3fND5fiypVh2i7s6hufl
=FD9+
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233665-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 16:26:08 2012
Return-Path: <users-return-233665-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 903BF9E0D
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 16:26:08 +0000 (UTC)
Received: (qmail 91315 invoked by uid 500); 19 Apr 2012 16:26:05 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 91103 invoked by uid 500); 19 Apr 2012 16:26:05 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 91092 invoked by uid 99); 19 Apr 2012 16:26:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 16:26:05 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=HTML_MESSAGE,PLING_QUERY,RCVD_IN_DNSWL_NONE,SPF_PASS,SUBJ_OBFU_PUNCT_FEW
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dilipvshah@hotmail.com designates 65.55.111.107 as permitted sender)
Received: from [65.55.111.107] (HELO blu0-omc2-s32.blu0.hotmail.com) (65.55.111.107)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 16:25:55 +0000
Received: from BLU162-DS6 ([65.55.111.72]) by blu0-omc2-s32.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Thu, 19 Apr 2012 09:25:33 -0700
X-Originating-IP: [24.5.178.208]
X-Originating-Email: [dilipvshah@hotmail.com]
Message-ID: <BLU162-ds6E297DD17A3D09D5BD1B2D33D0@phx.gbl>
From: "Dilip Shah" <dilipvshah@hotmail.com>
To: <users@tomcat.apache.org>
Subject: catalina.out file is growing very rapidly! How to prevent Hibernate's INFO and DEBUG statements from getting added to catalina.out file?
Date: Thu, 19 Apr 2012 09:25:34 -0700
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_00EA_01CD1E0E.5F4BA1E0"
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 14.0.8117.416
X-MimeOLE: Produced By Microsoft MimeOLE V14.0.8117.416
X-OriginalArrivalTime: 19 Apr 2012 16:25:33.0868 (UTC) FILETIME=[0B8A6EC0:01CD1E49]

------=_NextPart_000_00EA_01CD1E0E.5F4BA1E0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

My Java application (Spring, Hibernate, MySQL) is running in Tomcat 5.5

After the last set of changes to my application, Tomcat's catalina.out =
file is growing very rapidly. With each query it adds a few MBs of INFO =
and DEBUG statements to the file.

The log file has very large number of INFO and DEBUG statements such as =
the following:
01:52:45.412 [main] INFO  o.hibernate.cfg.annotations.Version - =
Hibernate Annotations 3.5.6-Final
01:52:45.465 [main] INFO  org.hibernate.cfg.Environment - Hibernate =
3.5.6-Final
01:52:45.468 [main] INFO  org.hibernate.cfg.Environment - =
hibernate.properties not found
01:52:45.473 [main] INFO  org.hibernate.cfg.Environment - Bytecode =
provider name : javassist
01:52:45.479 [main] INFO  org.hibernate.cfg.Environment - using JDK 1.4 =
java.sql.Timestamp handling
01:52:45.629 [main] DEBUG o.h.i.f.DefaultIdentifierGeneratorFactory - =
Registering IdentifierGenerator strategy [uuid] -> [class =
org.hibernate.id.UUIDHexGenerator]
01:52:45.635 [main] DEBUG o.h.i.f.DefaultIdentifierGeneratorFactory - =
Registering IdentifierGenerator strategy [hilo] -> [class =
org.hibernate.id.TableHiLoGenerator]
01:52:45.636 [main] DEBUG o.h.i.f.DefaultIdentifierGeneratorFactory - =
Registering IdentifierGenerator strategy [assigned] -> [class =
org.hibernate.id.Assigned]
01:52:45.639 [main] DEBUG o.h.i.f.DefaultIdentifierGeneratorFactory - =
Registering IdentifierGenerator strategy [identity] -> [class =
org.hibernate.id.IdentityGenerator]
01:52:45.640 [main] DEBUG o.h.i.f.DefaultIdentifierGeneratorFactory - =
Registering IdentifierGenerator strategy [select] -> [class =
org.hibernate.id.SelectGenerator]

01:52:45.668 [main] INFO  o.h.annotations.common.Version - Hibernate =
Commons Annotations 3.2.0.Final
01:52:45.719 [main] DEBUG o.h.cfg.AnnotationConfiguration - Execute =
first pass mapping processing
01:52:45.780 [main] DEBUG o.h.cfg.AnnotationConfiguration - Process hbm =
files
01:52:45.780 [main] DEBUG o.h.cfg.AnnotationConfiguration - Process =
annotated classes
01:52:45.791 [main] INFO  org.hibernate.cfg.AnnotationBinder - Binding =
entity from annotated class: com.knownomy.scl.appcommon.domain.Language
01:52:45.805 [main] INFO  o.h.cfg.annotations.QueryBinder - Binding =
Named query: language.id =3D> from Language language where language.id =
=3D ?
01:52:45.821 [main] DEBUG org.hibernate.cfg.Ejb3Column - Binding column: =
Ejb3DiscriminatorColumn{logicalColumnName'DTYPE', =
discriminatorTypeName=3D'string'}
01:52:45.824 [main] DEBUG org.hibernate.cfg.AnnotationBinder - no value =
specified for 'javax.persistence.sharedCache.mode'; using UNSPECIFIED
01:52:45.843 [main] DEBUG o.h.cfg.annotations.EntityBinder - Import with =
entity name Language
01:52:45.849 [main] INFO  o.h.cfg.annotations.EntityBinder - Bind entity =
com.knownomy.scl.appcommon.domain.Language on table language

01:52:50.164 [main] DEBUG o.h.hql.ast.QueryTranslatorImpl - parse() - =
HQL: from com.knownomy.scl.quiz.domain.Question question where =
question.chapter.id=3D? and question.questionSource.id=3D? and =
question.mcq.questionText=3D?
01:52:50.177 [main] DEBUG org.hibernate.hql.ast.AST - --- HQL AST ---
 \-[QUERY] Node: 'query'
    +-[SELECT_FROM] Node: 'SELECT_FROM'
    |  \-[FROM] Node: 'from'
    |     \-[RANGE] Node: 'RANGE'
    |        +-[DOT] Node: '.'
    |        |  +-[DOT] Node: '.'
    |        |  |  +-[DOT] Node: '.'
    |        |  |  |  +-[DOT] Node: '.'
    |        |  |  |  |  +-[DOT] Node: '.'
    |        |  |  |  |  |  +-[IDENT] Node: 'com'
    |        |  |  |  |  |  \-[IDENT] Node: 'knownomy'
    |        |  |  |  |  \-[IDENT] Node: 'scl'
    |        |  |  |  \-[IDENT] Node: 'quiz'
    |        |  |  \-[IDENT] Node: 'domain'
    |        |  \-[IDENT] Node: 'Question'
    |        \-[ALIAS] Node: 'question'
    \-[WHERE] Node: 'where'


Content of log4j.properties:
log4j.rootLogger=3DINFO, stdout, R

log4j.appender.stdout=3Dorg.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=3Dorg.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=3D[%5p] %d{yyyy-MM-dd =
HH:mm:ss} (%F:%M:%L) - %m%n
#log4j.appender.stdout.layout.ConversionPattern=3D[%5p] %t %d{yyyy-MM-dd =
HH:mm:ss} (%F:%M:%L) - %m%n

log4j.appender.R=3Dorg.apache.log4j.RollingFileAppender
log4j.appender.R.File=3D${catalina.home}/logs/SmartCloudLearningMobi.log
log4j.appender.R.MaxFileSize=3D10MB=20
log4j.appender.R.MaxBackupIndex=3D10=20
log4j.appender.R.layout=3Dorg.apache.log4j.PatternLayout
log4j.appender.R.layout.ConversionPattern=3D[%5p] %d{yyyy-MM-dd =
HH:mm:ss} (%F:%M:%L) - %m%n
#log4j.appender.R.layout.ConversionPattern=3D[%5p] %t %d{yyyy-MM-dd =
HH:mm:ss} (%F:%M:%L) - %m%n

log4j.logger.org.hibernate=3DERROR, stdout, R

### log HQL parse trees =20
log4j.logger.org.hibernate.hql=3DERROR, stdout, R

### Log HQL and SQL ASTs during query parsing ### =20
log4j.logger.org.hibernate.hql.ast.AST=3DERROR, stdout, R
log4j.additivity.org.hibernate.hql.ast.AST=3Dfalse

### log just the SQL =20
log4j.logger.org.hibernate.SQL=3DERROR, stdout, R
log4j.additivity.org.hibernate.SQL=3Dfalse

### log JDBC bind parameters. Very userfull, when debug parameterized =
queries ### =20
log4j.logger.org.hibernate.type=3DERROR, stdout, R
log4j.additivity.org.hibernate.type=3Dfalse

### log schema export/update ###
log4j.logger.org.hibernate.tool.hbm2ddl=3DERROR, stdout, R

### log cache activity ###
log4j.logger.org.hibernate.cache=3DERROR, stdout, R

### log transaction activity =20
log4j.logger.org.hibernate.transaction=3DERROR, stdout, R

### Log all JDBC resource acquisition =20
log4j.logger.org.hibernate.jdbc=3DERROR, stdout, R

### enable the following line if you want to track down connection ### =20
### leakages when using DriverManagerConnectionProvider ### =20
log4j.logger.org.hibernate.connection.DriverManagerConnectionProvider=3DE=
RROR, stdout, R

log4j.logger.org.hibernate.cfg=3DERROR, stdout, R


log4j.logger.org.springframework=3DERROR, stdout, R
log4j.logger.org.springframework.test.context.junit4.SpringJUnit4ClassRun=
ner=3DERROR, stdout, R


Content of application.properties file:
#  Application Properties
path.webinf=3Dwebapps/SmartCloudLearningMobi/WEB-INF
# JDBC Connection information
jdbc.driverClassName=3Dcom.mysql.jdbc.Driver
jdbc.url=3Djdbc:mysql://localhost:3306/databasename?useUnicode=3Dtrue&cha=
racterEncoding=3DUTF8
jdbc.username=3Droot
jdbc.password=3Dmypassword
###hibernate
hibernate.show_sql=3Dfalse
hibernate.format_sql=3Dtrue
hibernate.transaction.factory_class=3Dorg.hibernate.transaction.JDBCTrans=
actionFactory
hibernate.dialect=3Dorg.hibernate.dialect.MySQLDialect
hibernate.c3p0.min_size=3D1
hibernate.c3p0.max_size=3D25
hibernate.c3p0.acquire_increment=3D5
hibernate.c3p0.timeout=3D1800
hibernate.c3p0.max_statements=3D50
hibernate.c3p0.idle_test_period=3D3600

In the last change, I removed the following jar file:
ejb3-persistance.jar

and added the following jar files:
aspectjtools-1.5.4.jar
bval-core-0.3-incubating.jar
hibernate-validator-4.1.0.Final.jar
jackson-core-asl-1.6.4.jar
jackson-mapper-asl-1.6.4.jar
joda-time-1.6.2.jar
joda-time-jsptags-1.0.2.jar
jstl-1.2.jar
validation-api-1.0.0.GA.jar

I've been struggling with this for 2+ days!

I asked this question on a couple of other forums but that hasn't helped =
me solve this issue.
StackOverflow: =
http://stackoverflow.com/questions/10196154/tomcat-catalina-out-file-is-g=
rowing-very-rapidly-how-to-prevent-hibernates-inf
Hibernate: https://forum.hibernate.org/viewtopic.php?f=3D1&t=3D1015204

Could someone tell me how to prevent these Hibernate's INFO and DEBUG =
statements from getting added to catalina.out file? Much appreciated.

Dilip

------=_NextPart_000_00EA_01CD1E0E.5F4BA1E0--


From users-return-233666-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 16:32:38 2012
Return-Path: <users-return-233666-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 709199338
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 16:32:38 +0000 (UTC)
Received: (qmail 9654 invoked by uid 500); 19 Apr 2012 16:32:35 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 9610 invoked by uid 500); 19 Apr 2012 16:32:35 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 9600 invoked by uid 99); 19 Apr 2012 16:32:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 16:32:34 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.250.139 is neither permitted nor denied by domain of adam.n.gordon@gmail.com)
Received: from [216.139.250.139] (HELO joe.nabble.com) (216.139.250.139)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 16:32:28 +0000
Received: from alf.nabble.com ([192.168.236.21])
	by joe.nabble.com with esmtp (Exim 4.72)
	(envelope-from <adam.n.gordon@gmail.com>)
	id 1SKuHA-00018R-2K
	for users@tomcat.apache.org; Thu, 19 Apr 2012 09:32:08 -0700
Date: Thu, 19 Apr 2012 09:32:08 -0700 (PDT)
From: icfantv <adam.n.gordon@gmail.com>
To: users@tomcat.apache.org
Message-ID: <1334853128059-4898810.post@n6.nabble.com>
In-Reply-To: <1334850523993-4898646.post@n6.nabble.com>
References: <1334850523993-4898646.post@n6.nabble.com>
Subject: Re: Classpath issues with Embedded Tomcat 7
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

UPDATE:

Adding ALL my WEB-INF/lib jars to my launch command classpath causes the web
application to start, but I'm not sure this is correct.  If it is, what's
the point of the WEB-INF/lib directory?

Anyone have any thoughts here?

--
View this message in context: http://tomcat.10.n6.nabble.com/Classpath-issues-with-Embedded-Tomcat-7-tp4898646p4898810.html
Sent from the Tomcat - User mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233667-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 16:33:48 2012
Return-Path: <users-return-233667-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 53B359518
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 16:33:48 +0000 (UTC)
Received: (qmail 15142 invoked by uid 500); 19 Apr 2012 16:33:45 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 14935 invoked by uid 500); 19 Apr 2012 16:33:44 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 14926 invoked by uid 99); 19 Apr 2012 16:33:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 16:33:44 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [76.96.59.211] (HELO QMTA11.westchester.pa.mail.comcast.net) (76.96.59.211)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 16:33:37 +0000
Received: from omta17.westchester.pa.mail.comcast.net ([76.96.62.89])
	by QMTA11.westchester.pa.mail.comcast.net with comcast
	id zsNb1i0031vXlb85BsZH4w; Thu, 19 Apr 2012 16:33:17 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta17.westchester.pa.mail.comcast.net with comcast
	id zsZG1i00H38FjT13dsZGSG; Thu, 19 Apr 2012 16:33:16 +0000
Message-ID: <4F903E4B.3090603@christopherschultz.net>
Date: Thu, 19 Apr 2012 12:33:15 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: 64bit windows mod_jk connector download for apache httpd 2.4
References: <CAG6aRdX7aA9J8RZ1OAhyUQCayi2D2E=_9FJryTH4Z1v7dDSosw@mail.gmail.com> <4F8F1EEB.2070000@apache.org> <CAG6aRdXuMWqvXLTv=M=-YNQzxX8LQLiTYyoYtUoUCQF32Ln-yQ@mail.gmail.com>
In-Reply-To: <CAG6aRdXuMWqvXLTv=M=-YNQzxX8LQLiTYyoYtUoUCQF32Ln-yQ@mail.gmail.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Chris,

On 4/19/12 9:32 AM, chris derham wrote:
> On Wed, Apr 18, 2012 at 5:07 PM, Mladen Turk <mturk@apache.org>
> wrote:
>> On 04/18/2012 02:00 PM, chris derham wrote:
>> 
>>> All,
>>> 
>>> Our setup has apache tomcat running behind apache httpd using
>>> mod_jk. I would like to upgrade to apache 2.4, but for this I
>>> need to find a 64bit mod_jk release for httpd 2.4. The binaries
>>> contained at 
>>> http://tomcat.apache.org/**download-connectors.cgi<http://tomcat.apache.org/download-connectors.cgi>32
>>> bit httpd connectors, or a 64bit iis one.
>>> 
>>> 
>> Why would you need a 64-bit httpd at the first place especially
>> on windows.

Huge in-memory disk caches? ;)

> Can't help feel that I am falling into a trap here, but if we have
> a windows 64 bit os, using 64 bit jvm and 64 bit tomcat, are you
> suggesting that it would be better to use a 32 bit httpd and
> mod_jk?

A 64-bit JVM makes total sense because you can get access to really
large heaps (well, if you think more than 1.5GiB is a large heap,
which I do).

IMO on the other hand, having a 64-bit httpd just wastes memory (from
pointers, mostly) because httpd itself does not require gobs of memory
to run (like Java webapps usually do, or databases, etc.).

Running a 32-bit httpd will give you a leaner process in terms of
memory as well as potentially faster execution time because more
32-bit data can be transferred at a time between memory and CPU. This
is why "compressed OOPs" exist in JVMs - because you need a 64-bit JVM
just to get to a 3GiB heap, but if all you need are 32-bit pointers
for your Java objects, then you can (almost) have the best of both worlds.

https://wikis.oracle.com/display/HotSpotInternals/CompressedOops

> Worked perfectly. Thank you. Would you think that it is a good idea
> to add this text to a new section in building.txt?

+1

> I see that the binary releases that are available are signed by
> you. So perhaps I could ask why there isn't a 64 bit mod_jk
> included? I assume the answer will relate to your response to the
> above question

I think it's reasonable for us to add x86-64 builds for mod_jk+httpd.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+QPksACgkQ9CaO5/Lv0PAxegCfaykEXxJFBfG6ci8TqQQM6fFu
QBoAn29qd884E2k4oTsdc0/69p9yihil
=qrNL
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233668-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 17:15:16 2012
Return-Path: <users-return-233668-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 941D69EB8
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 17:15:16 +0000 (UTC)
Received: (qmail 45382 invoked by uid 500); 19 Apr 2012 17:15:13 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 45277 invoked by uid 500); 19 Apr 2012 17:15:12 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 45265 invoked by uid 99); 19 Apr 2012 17:15:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 17:15:12 +0000
X-ASF-Spam-Status: No, hits=-0.4 required=5.0
	tests=PLING_QUERY,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of knst.kolinko@gmail.com designates 209.85.160.173 as permitted sender)
Received: from [209.85.160.173] (HELO mail-gy0-f173.google.com) (209.85.160.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 17:15:04 +0000
Received: by ghrr14 with SMTP id r14so5790574ghr.18
        for <users@tomcat.apache.org>; Thu, 19 Apr 2012 10:14:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=YDm7bBlMMgUYiypx+BTUiK24Cu+1q3H7aqjTi5t1Ajc=;
        b=iWx46kT3ptrfK1Xp1RcRjPwOlKeIZeb9gd07lkfbXSyeo58Oo+/z2PDf8Kz3w8FMHN
         y3Zkr/fSE7xKMde/oT/a8vEWKa8BSR9HaaZfvYhnwIWFpEA+udVE8ihKinXhWuXl06kn
         Eh3h7SdMTWC16xtEeUk9Vw2SWRKcoLuXji0Un9CtOP3L/h0WEghciF+XdyBQF70YwU3d
         35NjjQVE/XA6y+pCufCI9acbsSX3KIgPF3n5IMxQpA8Y7A+WAKeFYauY0YrqO6SIwMQL
         q5SXC41g7uV4RI3F2vG5xVwpLdTML7unukJrotFKzsq3t5ptwQdQsL5NKA04yquoesJU
         HD9A==
MIME-Version: 1.0
Received: by 10.236.170.71 with SMTP id o47mr2838252yhl.104.1334855684103;
 Thu, 19 Apr 2012 10:14:44 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Thu, 19 Apr 2012 10:14:44 -0700 (PDT)
In-Reply-To: <BLU162-ds6E297DD17A3D09D5BD1B2D33D0@phx.gbl>
References: <BLU162-ds6E297DD17A3D09D5BD1B2D33D0@phx.gbl>
Date: Thu, 19 Apr 2012 21:14:44 +0400
Message-ID: <CABzHfVmsp+bAXkBhjkdTdwVex85okAvWb=zFsChGcOndhBuFdw@mail.gmail.com>
Subject: Re: catalina.out file is growing very rapidly! How to prevent
 Hibernate's INFO and DEBUG statements from getting added to catalina.out file?
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

2012/4/19 Dilip Shah <dilipvshah@hotmail.com>:
> My Java application (Spring, Hibernate, MySQL) is running in Tomcat 5.5

What version of 5.5.x ?

>
> After the last set of changes to my application, Tomcat's catalina.out fi=
le is growing very rapidly. With each query it adds a few MBs of INFO and D=
EBUG statements to the file.
>
> The log file has very large number of INFO and DEBUG statements such as t=
he following:
> 01:52:45.412 [main] INFO =A0o.hibernate.cfg.annotations.Version - Hiberna=
te Annotations 3.5.6-Final
> 01:52:45.465 [main] INFO =A0org.hibernate.cfg.Environment - Hibernate 3.5=
.6-Final
> 01:52:45.468 [main] INFO =A0org.hibernate.cfg.Environment - hibernate.pro=
perties not found

Looks like misconfigured Log4J.logging framework.  You are missing
log4j.properties file somewhere (or you have several such files which
conflict with each other).

When Tomcat's JULI is used it formats its log statements differently.

> After the last set of changes to my application

And you know what those changes were?

Start over with a fresh configuration.


If nothing else helps you may try the following (~joke):

1. Create file bin/setenv.sh with the following content:
CATALINA_OUT=3D/dev/null

2. Make the file executable.
3. Restart Tomcat.

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233669-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 17:37:13 2012
Return-Path: <users-return-233669-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 18E0C969F
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 17:37:13 +0000 (UTC)
Received: (qmail 16101 invoked by uid 500); 19 Apr 2012 17:37:09 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 15990 invoked by uid 500); 19 Apr 2012 17:37:09 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 15980 invoked by uid 99); 19 Apr 2012 17:37:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 17:37:09 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of knst.kolinko@gmail.com designates 209.85.213.45 as permitted sender)
Received: from [209.85.213.45] (HELO mail-yw0-f45.google.com) (209.85.213.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 17:37:02 +0000
Received: by yhoo21 with SMTP id o21so5825136yho.18
        for <users@tomcat.apache.org>; Thu, 19 Apr 2012 10:36:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=0qyUVuoDi5skvVC0qQQ5OWWfGA2XyrGZMbifKDKqNU4=;
        b=QElrpqHFhOc/Cwi28CS3SzhuLTArXoYCd51Gz/PLYlky4OA93LPDPRoseRxUul+2Zc
         aGX2CFjXRG0LlCiDmhKHMQhxR1yDKdgeAUnPrFZkFZz8/Jbr2xCDqoiiigWw6dazhdiw
         uA8QAzURBptx8ulMIcbCOgURyg7XUhvPZGUlV3TwL2PMgubyLPTNzXhlJgoezKZTsAVp
         RtTds5CbXTrhiXTBPPyDB8zfa0D6YY0s7Bmbgexxmrz27Jv4Sg2zNyMavZCjGjYbPPmb
         Awyc3L4zDNtG2xXm2zq6ZweTVoMrpNQDR5yLBEi/6Qk9wVS1J5EJM9m3maaPIajkh9+D
         25nQ==
MIME-Version: 1.0
Received: by 10.236.114.200 with SMTP id c48mr901334yhh.23.1334857001484; Thu,
 19 Apr 2012 10:36:41 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Thu, 19 Apr 2012 10:36:41 -0700 (PDT)
In-Reply-To: <1334853128059-4898810.post@n6.nabble.com>
References: <1334850523993-4898646.post@n6.nabble.com>
	<1334853128059-4898810.post@n6.nabble.com>
Date: Thu, 19 Apr 2012 21:36:41 +0400
Message-ID: <CABzHfVnofH3S6AoqXeoP+nWpkpNWqohEtnDkb-W2XMDguNxq4g@mail.gmail.com>
Subject: Re: Classpath issues with Embedded Tomcat 7
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

2012/4/19 icfantv <adam.n.gordon@gmail.com>:
> UPDATE:
>
> Adding ALL my WEB-INF/lib jars to my launch command classpath causes the =
web
> application to start, but I'm not sure this is correct. =A0If it is, what=
's
> the point of the WEB-INF/lib directory?
>
> Anyone have any thoughts here?
>

Subscribe to the Mailing list properly. Do not use Nabble.

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233670-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 17:42:39 2012
Return-Path: <users-return-233670-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 60DC79862
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 17:42:39 +0000 (UTC)
Received: (qmail 32023 invoked by uid 500); 19 Apr 2012 17:42:36 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 31914 invoked by uid 500); 19 Apr 2012 17:42:36 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 31904 invoked by uid 99); 19 Apr 2012 17:42:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 17:42:36 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jdesodt@gmail.com designates 74.125.83.45 as permitted sender)
Received: from [74.125.83.45] (HELO mail-ee0-f45.google.com) (74.125.83.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 17:42:30 +0000
Received: by eeit10 with SMTP id t10so3734068eei.18
        for <users@tomcat.apache.org>; Thu, 19 Apr 2012 10:42:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=qfM+Di5w1oe7K4jM9YJw+4K2IFRNgntvQE8GlTN/Vh8=;
        b=Ykebz4lNX9TfpclJfUdNOoPEqQNfbWPQk0S6lZkQvvbDSnwTDkEdpKB5eLWKTzFqZT
         3g/yp87IrncfNK/M0zsYMU0gOQIe6kF/YmzdunIPqQlUZxVTGHO6ybq5gMGSmAaVk61Q
         3GuyXXlLXALwnirChFh3l1Np9FXv+yxNrisSdv5GIfXccn0k/K5IULl0a5zli6GdhLcg
         9pYyt+wJX9DP+kmBTcKcYj3My6hN8yvdbuDShYMq/wqxaTL8GeQWodyqjW5JoMOebUDg
         hmNkZJGMfJRnDgmX9qcCA6v5bU+E6Gm6ahThg76hpEUGCYBlCFfxUk6zDKvL6zT92IbG
         JxSQ==
MIME-Version: 1.0
Received: by 10.14.50.20 with SMTP id y20mr516416eeb.88.1334857328153; Thu, 19
 Apr 2012 10:42:08 -0700 (PDT)
Received: by 10.213.4.194 with HTTP; Thu, 19 Apr 2012 10:42:08 -0700 (PDT)
In-Reply-To: <CABzHfVmEt2WXhW0B2nHXmMWK9Q7hKoHHYW98JObxwq1gFwHR5g@mail.gmail.com>
References: <CAOHnQjpKCkJGNXGphTrVG4qRLpZK-6baivLi5oAD_dHtgtCQHw@mail.gmail.com>
	<4F8E1D13.1020406@christopherschultz.net>
	<CAOHnQjooVz1VH5TeGKnPMNnoqW0RCVmtGxkZqs72WaCpQ8hSRw@mail.gmail.com>
	<CAOHnQjpciUMv98YQy=rsighpRiVxh61jSVRg9g4dXRUnxGe5QQ@mail.gmail.com>
	<CABzHfVmEt2WXhW0B2nHXmMWK9Q7hKoHHYW98JObxwq1gFwHR5g@mail.gmail.com>
Date: Thu, 19 Apr 2012 19:42:08 +0200
Message-ID: <CAOHnQjqKTHZ1mB77a9oiwPmAM5nMy8-uZVeM2Gnj0uJRduWq5A@mail.gmail.com>
Subject: Re: In webapp, sending multipart email with Javamail : noname
 attachment instead of message
From: Jacques Desodt <jdesodt@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=00235445b9b2ded5d404be0bb07e
X-Virus-Checked: Checked by ClamAV on apache.org

--00235445b9b2ded5d404be0bb07e
Content-Type: text/plain; charset=ISO-8859-1

Hi Konstantin,

Good news, your solution is GREAT.
I looked at the libraries, and I saw geronimo-javamail_1.4_spec-1.7.1.jar
in the Tomcat lib folder (installed with CXF).
Removing it, everything works fine !

Thanks a lot,
Best regards,

Jacques

...and i'm using Tomcat 6.0.33 for this app :)



2012/4/18 Konstantin Kolinko <knst.kolinko@gmail.com>

> 2012/4/18 Jacques Desodt <jdesodt@gmail.com>:
> > Well, a little bit disappointed...
> > I changed my code :
> >
> >    public void sendTestMultipartMail(String host, final String username,
> > final String password, String from, String to) throws Exception {
> >
> >        Properties properties = new Properties();
> >        properties.put("mail.smtp.host", host);
> >        properties.put("mail.smtp.auth", "true");
> >        properties.put("mail.smtp.starttls.enable", "true");
> >        properties.put("mail.smtp.port", "587");
> >
> >        Session session = Session.getInstance(properties,
> >          new javax.mail.Authenticator() {
> >            protected PasswordAuthentication getPasswordAuthentication() {
> >                return new PasswordAuthentication(username, password);
> >            }
> >          });
> >
> >        Message msg = new MimeMessage(session);
> >
> >        msg.setFrom(new InternetAddress(from));
> >        msg.addRecipient(Message.RecipientType.TO, new
> InternetAddress(to));
> >        msg.setSubject("Test MultiPart Mail");
> >
> >        Multipart multipart = new MimeMultipart();
> >
> >        BodyPart part1 = new MimeBodyPart();
> >        part1.setText("This is multipart mail and u read part1......");
> >
> >        BodyPart part2 = new MimeBodyPart();
> >        part2.setText("This is multipart mail and u read part2......");
> >
> >        multipart.addBodyPart(part1);
> >        multipart.addBodyPart(part2);
> >
> >        msg.setContent(multipart);
> >
> >        Transport.send(msg);
> >    }
> >
> > -----------------------------------
> > Here is the raw message, sended by my local java app:
> >
> >(...)
> > ... and that's all...
> > Why ? I don't understand. Same method, same smtp server.
> > Any idea ?
>
> Different libraries?
>
> Try to check, what implementation is returned by those calls,
> Session.getInstance(..)
>
> Try running with a debugger,
>
> http://wiki.apache.org/tomcat/FAQ/Developing#Debugging
>
> Best regards,
> Konstantin Kolinko
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>
>

--00235445b9b2ded5d404be0bb07e--

From users-return-233671-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 17:45:07 2012
Return-Path: <users-return-233671-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 33E5198D9
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 17:45:07 +0000 (UTC)
Received: (qmail 39269 invoked by uid 500); 19 Apr 2012 17:45:02 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 39173 invoked by uid 500); 19 Apr 2012 17:45:02 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 38987 invoked by uid 99); 19 Apr 2012 17:45:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 17:45:01 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [216.82.241.196] (HELO mail46.messagelabs.com) (216.82.241.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 17:44:51 +0000
X-Env-Sender: Chuck.Caldarale@unisys.com
X-Msg-Ref: server-2.tower-46.messagelabs.com!1334857464!27556242!32
X-Originating-IP: [192.61.61.104]
X-StarScan-Version: 6.5.5; banners=-,-,-
X-VirusChecked: Checked
Received: (qmail 22054 invoked from network); 19 Apr 2012 17:44:29 -0000
Received: from unknown (HELO USEA-NAEDGE1.unisys.com) (192.61.61.104)
  by server-2.tower-46.messagelabs.com with RC4-SHA encrypted SMTP; 19 Apr 2012 17:44:29 -0000
Received: from usea-nahubcas1.na.uis.unisys.com (129.224.76.114) by
 USEA-NAEDGE1.unisys.com (192.61.61.104) with Microsoft SMTP Server (TLS) id
 8.3.83.0; Thu, 19 Apr 2012 12:44:19 -0500
Received: from USEA-EXCH8.na.uis.unisys.com ([129.224.76.41]) by
 usea-nahubcas1.na.uis.unisys.com ([129.224.76.114]) with mapi; Thu, 19 Apr
 2012 12:44:19 -0500
From: "Caldarale, Charles R" <Chuck.Caldarale@unisys.com>
To: Tomcat Users List <users@tomcat.apache.org>
Date: Thu, 19 Apr 2012 12:44:19 -0500
Subject: RE: Issue in tomcat 6.0.26
Thread-Topic: Issue in tomcat 6.0.26
Thread-Index: Ac0eSReaoAOcFI9vRzyazxrnJMRNsgACq2hg
Message-ID: <99C8B2929B39C24493377AC7A121E21FB0173ADAE6@USEA-EXCH8.na.uis.unisys.com>
References: <1334827924.35471.YahooMailNeo@web113505.mail.gq1.yahoo.com>
 <4F903C68.6070105@christopherschultz.net>
In-Reply-To: <4F903C68.6070105@christopherschultz.net>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0

PiBGcm9tOiBDaHJpc3RvcGhlciBTY2h1bHR6IFttYWlsdG86Y2hyaXNAY2hyaXN0b3BoZXJzY2h1
bHR6Lm5ldF0gDQo+IFN1YmplY3Q6IFJlOiBJc3N1ZSBpbiB0b21jYXQgNi4wLjI2DQoNCj4gPiBL
aW5kbHkgcHJvdmlkZSB0aGUgc29sdXRpb24uDQoNCj4gQnJpZWZseTogZG9uJ3QgY2FsbCBnZXRP
dXRwdXRTdHJlYW0gbW9yZSB0aGFuIG9uY2UgOykNCg0KQWN0dWFsbHksIEkgdGhpbmsgaXQncyBk
b24ndCBjYWxsIF9ib3RoXyBnZXRPdXRwdXRTdHJlYW0oKSBhbmQgZ2V0V3JpdGVyKCkgZm9yIHRo
ZSBzYW1lIHJlcXVlc3QuICBQaWNrIG9uZSBvciB0aGUgb3RoZXIuDQoNCiAtIENodWNrDQoNCg0K
VEhJUyBDT01NVU5JQ0FUSU9OIE1BWSBDT05UQUlOIENPTkZJREVOVElBTCBBTkQvT1IgT1RIRVJX
SVNFIFBST1BSSUVUQVJZIE1BVEVSSUFMIGFuZCBpcyB0aHVzIGZvciB1c2Ugb25seSBieSB0aGUg
aW50ZW5kZWQgcmVjaXBpZW50LiBJZiB5b3UgcmVjZWl2ZWQgdGhpcyBpbiBlcnJvciwgcGxlYXNl
IGNvbnRhY3QgdGhlIHNlbmRlciBhbmQgZGVsZXRlIHRoZSBlLW1haWwgYW5kIGl0cyBhdHRhY2ht
ZW50cyBmcm9tIGFsbCBjb21wdXRlcnMuDQo=
DQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IHVzZXJzLXVuc3Vi
c2NyaWJlQHRvbWNhdC5hcGFjaGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1t
YWlsOiB1c2Vycy1oZWxwQHRvbWNhdC5hcGFjaGUub3JnDQoN

From users-return-233672-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 17:47:14 2012
Return-Path: <users-return-233672-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DE9BF99B6
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 17:47:13 +0000 (UTC)
Received: (qmail 52586 invoked by uid 500); 19 Apr 2012 17:47:10 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 52518 invoked by uid 500); 19 Apr 2012 17:47:10 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 52507 invoked by uid 99); 19 Apr 2012 17:47:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 17:47:10 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adam.n.gordon@gmail.com designates 209.85.216.173 as permitted sender)
Received: from [209.85.216.173] (HELO mail-qc0-f173.google.com) (209.85.216.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 17:47:05 +0000
Received: by qcsc20 with SMTP id c20so6875017qcs.18
        for <users@tomcat.apache.org>; Thu, 19 Apr 2012 10:46:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:from:date:message-id:subject:to:content-type;
        bh=vi+5f1eMR49om+rjx96RBC16Xk/FecUxaOQ+z2L+wAw=;
        b=n/OeVRPxzzXRLMghTD/Y9fNkTxFtFbBKOfrSjlp68aoWqqXGsfl6IHUx2ynzSCk5vL
         Hx8PAqHcw763J3TNvhN6zZR2oJD2Bfv+kHf7bN5VWanFV0KM3Uo7SMYfBto9AHlk5PY1
         1WQyEGTi6cPz7Z2Es0GpPFJCupE5mfeVUpU5qEyVlK2cCOuQF3MdYv57iw3qjoLocZcB
         +6dK8JT3+NTFG0yiIUV2U4o2IARouCMpbB1fgH19subGYCXkPzoxyXj0Ilse5gEHDkDH
         TBcxNUiLn/aLccMatxZLlmukNDCVZnjuuB2126bG5lQAW5tnVLuk/NmDgdYotocyOXLX
         aCUw==
Received: by 10.229.136.203 with SMTP id s11mr1268236qct.38.1334857604662;
 Thu, 19 Apr 2012 10:46:44 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.5.68 with HTTP; Thu, 19 Apr 2012 10:46:29 -0700 (PDT)
From: Adam Gordon <adam.n.gordon@gmail.com>
Date: Thu, 19 Apr 2012 11:46:29 -0600
Message-ID: <CAONS=m=NEDdFcY7+vUZ+2wCAf8wZqbSpOwHsFpGLGk8_me76GQ@mail.gmail.com>
Subject: Classpath issues with Embedded Tomcat 7
To: users@tomcat.apache.org
Content-Type: multipart/alternative; boundary=002354790ff85a071f04be0bc114
X-Virus-Checked: Checked by ClamAV on apache.org

--002354790ff85a071f04be0bc114
Content-Type: text/plain; charset=UTF-8

UPDATE:

By adding all my jars in WEB-INF/lib to my launch command classpath, I can
get the embedded server to run, but this does not seem correct as then what
would be the point of WEB-INF/lib?

-----------------------------------

I've been unable to find any decent documentation on how to use Embedded
Tomcat so I've been winging it.  The issue I'm having is that from what
I've gleaned from the web all I *should* need in my classpath for my main
method is my main class, tomcat-embed-core.jar,
tomcat-embed-logging.juli.jar, tomcat-embed-jasper.jar, and ecj.jar but I'm
finding that when trying to launch my main from the command line I keep
having to append more and more jars from WEB-INF/lib to my classpath to get
it to continue to try and start up because it keeps spitting out
NoClassDefFoundErrors.  I was under the impression that it would use
WEB-INF/lib for the web app's  classpath but this is not what's happening.
 The syntax used below was used from
http://people.apache.org/~markt/presentations/2010-11-04-Embedding-Tomcat.pdf,
see the section for running a web application.

Here's my main:

public static void main(String[] args)
   throws LifecycleException, InterruptedException, ServletException {

   Tomcat tomcat = new Tomcat();
   tomcat.setPort(9090);

   File docBase = new File("/usr/local/foo/foo-ui");
   tomcat.addWebapp(null, "", docBase.getAbsolutePath());

   tomcat.start();
   tomcat.getServer().await();
 }

and here's my launch command:

user@host: /usr/local/foo/foo-ui
$ java -cp
WEB-INF/classes:WEB-INF/lib/tomcat-embed-core-7.0.27.jar:WEB-INF/lib/tomcat-juli-7.0.27.jar:WEB-INF/lib/tomcat-embed-jasper-7.0.27.jar:WEB-INF/lib/ecj-3.7.1.jar
com.foo.WebAppMain

Anyone have any ideas what I'm doing wrong?  Thanks.

--adam

http://gordonizer.com

--002354790ff85a071f04be0bc114--

From users-return-233673-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 17:48:30 2012
Return-Path: <users-return-233673-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EC71F99EB
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 17:48:29 +0000 (UTC)
Received: (qmail 57255 invoked by uid 500); 19 Apr 2012 17:48:26 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 57122 invoked by uid 500); 19 Apr 2012 17:48:26 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 57108 invoked by uid 99); 19 Apr 2012 17:48:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 17:48:26 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [76.96.62.56] (HELO qmta06.westchester.pa.mail.comcast.net) (76.96.62.56)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 17:48:20 +0000
Received: from omta18.westchester.pa.mail.comcast.net ([76.96.62.90])
	by qmta06.westchester.pa.mail.comcast.net with comcast
	id ztUQ1i0051wpRvQ56tnzP7; Thu, 19 Apr 2012 17:47:59 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta18.westchester.pa.mail.comcast.net with comcast
	id ztny1i01Q38FjT13etny4s; Thu, 19 Apr 2012 17:47:59 +0000
Message-ID: <4F904FCE.40206@christopherschultz.net>
Date: Thu, 19 Apr 2012 13:47:58 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Issue in tomcat 6.0.26
References: <1334827924.35471.YahooMailNeo@web113505.mail.gq1.yahoo.com> <4F903C68.6070105@christopherschultz.net> <99C8B2929B39C24493377AC7A121E21FB0173ADAE6@USEA-EXCH8.na.uis.unisys.com>
In-Reply-To: <99C8B2929B39C24493377AC7A121E21FB0173ADAE6@USEA-EXCH8.na.uis.unisys.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Chuck,

On 4/19/12 1:44 PM, Caldarale, Charles R wrote:
>> From: Christopher Schultz [mailto:chris@christopherschultz.net] 
>> Subject: Re: Issue in tomcat 6.0.26
> 
>>> Kindly provide the solution.
> 
>> Briefly: don't call getOutputStream more than once ;)
> 
> Actually, I think it's don't call _both_ getOutputStream() and 
> getWriter() for the same request.  Pick one or the other.

The JSP writer is supposed to be smart enough to determine which
output is in use (stream vs. writer) and then wrap that. IIRC there is
(was?) an ugly try/catch block that blindly calls getOutputStream and
then calls getWriter as a backup. Obviously, that's no the case here,
so I wonder if something is in a weird state.

That's why I want to see the stack trace.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+QT84ACgkQ9CaO5/Lv0PAwqQCgle/8An+h8rncGKMbIV/IHdOe
bQYAn2YYaqtj8ovP8HH03znBCJCYt7t4
=I7eD
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233674-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 18:23:25 2012
Return-Path: <users-return-233674-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4B2B096FA
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 18:23:25 +0000 (UTC)
Received: (qmail 53938 invoked by uid 500); 19 Apr 2012 18:23:21 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 53829 invoked by uid 500); 19 Apr 2012 18:23:21 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 53820 invoked by uid 99); 19 Apr 2012 18:23:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 18:23:21 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [76.96.62.48] (HELO qmta05.westchester.pa.mail.comcast.net) (76.96.62.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 18:23:15 +0000
Received: from omta03.westchester.pa.mail.comcast.net ([76.96.62.27])
	by qmta05.westchester.pa.mail.comcast.net with comcast
	id zuLP1i0020bG4ec55uNvmW; Thu, 19 Apr 2012 18:22:55 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta03.westchester.pa.mail.comcast.net with comcast
	id zuNt1i01338FjT13PuNt1M; Thu, 19 Apr 2012 18:22:53 +0000
Message-ID: <4F9057FD.2010605@christopherschultz.net>
Date: Thu, 19 Apr 2012 14:22:53 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Classpath issues with Embedded Tomcat 7
References: <CAONS=m=NEDdFcY7+vUZ+2wCAf8wZqbSpOwHsFpGLGk8_me76GQ@mail.gmail.com>
In-Reply-To: <CAONS=m=NEDdFcY7+vUZ+2wCAf8wZqbSpOwHsFpGLGk8_me76GQ@mail.gmail.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Adam,

On 4/19/12 1:46 PM, Adam Gordon wrote:
> UPDATE:

If this is an update, why not reply to your original thread? It's
difficult to keep everything in context when you start a new thread.

> By adding all my jars in WEB-INF/lib to my launch command
> classpath, I can get the embedded server to run, but this does not
> seem correct as then what would be the point of WEB-INF/lib?

Your instincts are correct: you shouldn't have to add
WEB-INF/lib/*.jar to your CLASSPATH. Something else must be incorrect
with your environment.

> I've been unable to find any decent documentation on how to use
> Embedded Tomcat so I've been winging it.


The Tomcat source (specifically the test cases) is rife with examples
of use of Tomcat embedded: any test case that needs a running instance
uses the Tomcat class. Look through the build script (specifically,
how tests are run) to see what libraries are added to the bootstrap
CLASSPATH when launching them.

> The issue I'm having is that from what I've gleaned from the web
> all I *should* need in my classpath for my main method is my main
> class, tomcat-embed-core.jar, tomcat-embed-logging.juli.jar,
> tomcat-embed-jasper.jar, and ecj.jar but I'm finding that when
> trying to launch my main from the command line I keep having to
> append more and more jars from WEB-INF/lib to my classpath to get 
> it to continue to try and start up because it keeps spitting out 
> NoClassDefFoundErrors.

Can you give a specific example?

I was under the impression that it would use
> WEB-INF/lib for the web app's  classpath but this is not what's
> happening. The syntax used below was used from 
> http://people.apache.org/~markt/presentations/2010-11-04-Embedding-Tomcat.pdf,
>
> 
see the section for running a web application.
> 
> Here's my main:
> 
> public static void main(String[] args) throws LifecycleException,
> InterruptedException, ServletException {
> 
> Tomcat tomcat = new Tomcat(); tomcat.setPort(9090);
> 
> File docBase = new File("/usr/local/foo/foo-ui"); 
> tomcat.addWebapp(null, "", docBase.getAbsolutePath());
> 
> tomcat.start(); tomcat.getServer().await(); }
> 
> and here's my launch command:
> 
> user@host: /usr/local/foo/foo-ui $ java -cp 
> WEB-INF/classes:WEB-INF/lib/tomcat-embed-core-7.0.27.jar:WEB-INF/lib/tomcat-juli-7.0.27.jar:WEB-INF/lib/tomcat-embed-jasper-7.0.27.jar:WEB-INF/lib/ecj-3.7.1.jar
>
> 
com.foo.WebAppMain
> 
> Anyone have any ideas what I'm doing wrong?  Thanks.

Well, first, there's no reason to have all the Tomcat JAR files in the
webapp's WEB-INF/lib directory. Put them somewhere else. You might be
getting NCDFE because (for example) Tomcat.class != Tomcat.class when
the two are loaded by two different ClassLoaders. Take everything out
of your webapp's WEB-INF/lib directory that it doesn't use directly or
indirectly (i.e. all the Tomcat-specific stuff).

So, let's see what the javadoc for Tomcat.java has to say:

> * Requirements: * * - all tomcat classes and possibly servlets are
> in the classpath. * ( for example all is in one big jar, or in
> eclipse CP, or in any other * combination )

Once you've moved the Tomcat .jar files, this should be true.

> * - we need one temporary directory for work files

I don't see that you've set that up: you need to call Tomcat.setBaseDir().

> * - no config file is required. This class provides methods to *
> use if you have a webapp with a web.xml file, but it is * optional
> - you can use your own servlets.

Do you have your own web.xml file? Probably. If you follow the code of
the method you are calling (not sure why you are calling the
undocumented method instead of the documented one), you'll see that
ultimately, your webapp should be deployed with no default web.xml
(the server-wide one) and the ability to load your webapp's
WEB-INF/web.xml file.

> * There are a variety of 'add' methods to configure servlets and
> webapps. These * methods, by default, create a simple in-memory
> security realm and apply it. * If you need more complex security
> processing, you can define a subclass of * this class. * * This
> class provides a set of convenience methods for configuring webapp 
> * contexts, all overloads of the method <code>addWebapp</code>.
> These methods * create a webapp context, configure it, and then add
> it to a {@link Host}. * They do not use a global default web.xml;
> rather, they add a lifecycle * listener that adds the standard
> DefaultServlet, JSP processing, and welcome * files.

What happens if you move the Tomcat classes outside of your webapp's
WEB-INF directory, adjust your CLASSPATH accordingly, and re-launch?
Be specific.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+QV/0ACgkQ9CaO5/Lv0PAx9QCfegBFQDChZN042ujT8X/DJ71z
8MgAn29JSoF3CtJ+SiQgc6nvDXEbxNVp
=GGaT
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233675-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 18:27:29 2012
Return-Path: <users-return-233675-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9E56A9C7B
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 18:27:29 +0000 (UTC)
Received: (qmail 71400 invoked by uid 500); 19 Apr 2012 18:27:26 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 71348 invoked by uid 500); 19 Apr 2012 18:27:26 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 71337 invoked by uid 99); 19 Apr 2012 18:27:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 18:27:26 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [76.96.62.24] (HELO qmta01.westchester.pa.mail.comcast.net) (76.96.62.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 18:27:18 +0000
Received: from omta01.westchester.pa.mail.comcast.net ([76.96.62.11])
	by qmta01.westchester.pa.mail.comcast.net with comcast
	id zuSy1i0020EZKEL51uSy0U; Thu, 19 Apr 2012 18:26:58 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta01.westchester.pa.mail.comcast.net with comcast
	id zuQn1i00V38FjT13MuQubT; Thu, 19 Apr 2012 18:26:58 +0000
Message-ID: <4F90586D.1000003@christopherschultz.net>
Date: Thu, 19 Apr 2012 14:24:45 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: my website is not opening after installing CA certificate successfully
References: <loom.20120419T112147-812@post.gmane.org>
In-Reply-To: <loom.20120419T112147-812@post.gmane.org>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Neeraj,

On 4/19/12 5:30 AM, Neeraj Sood wrote:
> C:\Users\neeraj.sood>keytool -list Enter keystore password:
> 
> Keystore type: JKS Keystore provider: SUN
> 
> Your keystore contains 2 entries
> 
> rilrootca, 19 Apr, 2012, trustedCertEntry, Certificate fingerprint
> (SHA1): 99:67:6B:C9:B8:90:C1:F0:14:53:36:E3:C7:ED:05:9E: 
> 61:DC:16:A2 rilca, 19 Apr, 2012, trustedCertEntry, Certificate
> fingerprint (SHA1): 
> 99:67:6B:C9:B8:90:C1:F0:14:53:36:E3:C7:ED:05:9E: 61:DC:16:A2
> 
> 
> I am able to install certificate successfully. But my site does not
> open the home page. But if I create new certificate using keytool
> command  :- keytool - genkey -alias tomcat -keyalg RSA. My home
> page starts working , but the cerficate is not authenticated or
> validated by the browser.
> 
> how to configure certificate in my tomcat server.xml

Server certificate (to allow SSL) or client certificate (to authenticate)?

> Need urgent help on this.

Need better description of the problem. You might also include the
steps you've already taken. And your configuration.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+QWG0ACgkQ9CaO5/Lv0PDeZQCfT7gTh++rV2WHq7zWqDi5ysYi
5zYAoL4fAFUvmoanpkw/ZKsoryeBkUEN
=++/8
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233676-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 19:19:48 2012
Return-Path: <users-return-233676-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 751929B32
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 19:19:48 +0000 (UTC)
Received: (qmail 24396 invoked by uid 500); 19 Apr 2012 19:19:45 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 24332 invoked by uid 500); 19 Apr 2012 19:19:45 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 24312 invoked by uid 99); 19 Apr 2012 19:19:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 19:19:45 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pid@pidster.com designates 209.85.210.41 as permitted sender)
Received: from [209.85.210.41] (HELO mail-pz0-f41.google.com) (209.85.210.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 19:19:40 +0000
Received: by dajx4 with SMTP id x4so13761270daj.0
        for <users@tomcat.apache.org>; Thu, 19 Apr 2012 12:19:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=references:from:in-reply-to:mime-version:date:message-id:subject:to
         :content-type;
        bh=IvByTcKibMnZAawioH6GKoDaviDiU7mYedooOTKGwjw=;
        b=U/rQnunNPkYlT5vwKNPSC6GzkOSLpQakudpl9lWoDANsjAUZkLEDGBn57f1VYHQNk/
         O+QKQHy5JxQnbOOA0taS7/WSkuo87znzUMEs8w0PGogeF84V/DpzJuqoX/W6czKiEAAa
         ocHJL8O9vYgPU4/8bD/eSRUUNdyc+MO4lW6U0=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=references:from:in-reply-to:mime-version:date:message-id:subject:to
         :content-type:x-gm-message-state;
        bh=IvByTcKibMnZAawioH6GKoDaviDiU7mYedooOTKGwjw=;
        b=NhgDS7mpSCXtGAZFdUUaDGlsX6FLmNjeNbkP6et2IknSZIMc7b9ShVEspmT/4Y2nNW
         WrS6WC07P27NGUHl/m4NqoprjWH4yv2RyBgi1dMi6BVb+pRkF+UyvGAW0IpG09wEm4ub
         30BnO7wMtLTCOOWiGyJ1n5T3nuDQY6Oou2//Eyw2JRKTCCocuBLEXPRKxckRP8CnLAKR
         ygL22mE+rOghRnKZNXX3D4xbfluary2fVnNZJcdMswVF9TYr8Fqmb59ua/rJvn9eD5l2
         FumUSHFThIPPbV/A9O6l8cdNfE2BxP4PbKBVbcXwRYNihnCHa0+9qF8zw9ctv8TdoKpS
         OB8Q==
Received: by 10.68.240.135 with SMTP id wa7mr6744999pbc.7.1334863159409; Thu,
 19 Apr 2012 12:19:19 -0700 (PDT)
References: <002001cd1d70$68e96000$3abc2000$@com> <CABzHfVmt96NcpRQPWp=by_T5MpMvW-S6Wzp91kx=Bq5nksB5Bg@mail.gmail.com>
 <004301cd1d7b$acb8d670$062a8350$@com>
From: "Pid *" <pid@pidster.com>
In-Reply-To: <004301cd1d7b$acb8d670$062a8350$@com>
Mime-Version: 1.0 (1.0)
Date: Thu, 19 Apr 2012 20:19:52 +0100
Message-ID: <-3099273714414342175@unknownmsgid>
Subject: Re: web.xml and schema location
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=UTF-8
X-Gm-Message-State: ALoCoQnHPRK6KtcfJYL3StTiM1TV2FaHdVTD46kg6HuYNQtKyOchKYmfZPI9XZ7fZauPhWLLUgJw
X-Virus-Checked: Checked by ClamAV on apache.org

On 18 Apr 2012, at 16:55, Mark Claassen <mac01@donnell.com> wrote:

>> 1. Do you have validation enabled?
>> E.g. with
>> org.apache.catalina.STRICT_SERVLET_COMPLIANCE=true
>
> I don't think so (but that was a long time ago).  Anyway, I am glad to know that the default config does not try to contact anything
> and I can leave by web.xml as is.

It is a fair question though and I wonder if Oracle's reduction in
support for sun.com domains is producing a large number of DNS failres
and 404s for some server admin somewhere.


p

>
> Thanks!
>
> -----Original Message-----
> From: Konstantin Kolinko [mailto:knst.kolinko@gmail.com]
> Sent: Wednesday, April 18, 2012 11:50 AM
> To: Tomcat Users List
> Subject: Re: web.xml and schema location
>
> 2012/4/18 Mark Claassen <mac01@donnell.com>:
>> Back in Tomcat 5, we had the problem with tomcat trying to access
>> java.sun.com.  Lots of our servers are behind firewalls, so this caused an error in the log.  We realized one way to fix this was
> just to remove the schemaLocation attribute from the web.xml files.
>>
>> Below is the top of the main web.xml in Tomcat 7.  I did a snoop, and
>> it didn't seem to try to access java.sun.com this time.  Has this been changed at some point?  Or did I just have some error in my
> snoop?
>>
>
> 1. Do you have validation enabled?
> E.g. with
> org.apache.catalina.STRICT_SERVLET_COMPLIANCE=true
>
> 2. Tomcat has all the necessary schemas bundled (servlet-api.jar). I do not know why it was contacting external resource in your
> case.
>
>>
>> <web-app xmlns="http://java.sun.com/xml/ns/javaee"
>>         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
>>         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
>>         version="3.0">
>>
>
> Best regards,
> Konstantin Kolinko
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233677-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 19:31:51 2012
Return-Path: <users-return-233677-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4017B9E2D
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 19:31:51 +0000 (UTC)
Received: (qmail 68013 invoked by uid 500); 19 Apr 2012 19:31:48 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 67896 invoked by uid 500); 19 Apr 2012 19:31:47 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 67883 invoked by uid 99); 19 Apr 2012 19:31:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 19:31:47 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of tomcat@vittox.com designates 72.9.228.36 as permitted sender)
Received: from [72.9.228.36] (HELO vps75.vittox.com) (72.9.228.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 19:31:40 +0000
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed; d=vittox.com; s=default;
	h=Content-Type:In-Reply-To:References:Subject:To:MIME-Version:From:Date:Message-ID; bh=LV26PBHE2lw7o4BM4G04K9rXI1loFEv8Ow886dL6O40=;
	b=mPYP3lghr2yPzSoGBl+swpcqOeUS5a1e8P3HEwxMMwniPso/VsJgWDH56inRvKx4AXUtG0atl3IiJjq/BSDLT35Z5Bw8feBWNcQ1fgMQi+u2Jndl/kwWbk3SnOdQ0DbE;
Received: from [190.187.22.189] (port=41016 helo=[192.168.1.10])
	by vps75.vittox.com with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.77)
	(envelope-from <tomcat@vittox.com>)
	id 1SKx4U-00021E-Ra
	for users@tomcat.apache.org; Thu, 19 Apr 2012 14:31:18 -0500
Message-ID: <4F9067F8.2010202@vittox.com>
Date: Thu, 19 Apr 2012 14:31:04 -0500
From: Chris Patterson <tomcat@vittox.com>
User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: JasperException: The value for the useBean class ___ attribute
 is invalid
References: <4F8D9A5B.3020302@vittox.com> <4F8EF3C1.4010801@vittox.com> <CABzHfVk3DERdgHzZtQD_uh7a5x6y-cjcpFQfDOMg06nmp3rGsA@mail.gmail.com> <4F8F4FF1.2020307@vittox.com> <CABzHfVm4SEANiWw01qzV311XZih8dFOBTTPeN3rb7xHeXFMXTQ@mail.gmail.com> <710805633277644507@unknownmsgid>
In-Reply-To: <710805633277644507@unknownmsgid>
Content-Type: multipart/alternative;
 boundary="------------050602010607020307020507"
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - vps75.vittox.com
X-AntiAbuse: Original Domain - tomcat.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - vittox.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 

--------------050602010607020307020507
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit

Thanks for your Hints.

Today I deployed the same execise (Test-03) onto the localhost at the 
VPS server having Tomcat 5.3.35 running.
So it works like the localhost running Tomcat 6.x. It is the same procedure:

- Deploying WAR
- Stop and Start
- Confirming that www.domain.com/Test-03/prg1.jsp and 
www.domain.com/Test-03/subdir/prg2.jsp work fine
- Copy all contents undet Test-03 to the appBase directory
- Undeploy Test-03
- Check if www.domain.com/prg1.jsp and www.domain.com/subdir/prg2.jsp 
work fine

So the problem is only on virtual hosts. I changed the server.xml file 
for that virtual host
replacing the appBase to "." instead of being the same as the docBase. 
Also changed
the docBase to see if results are different. No luck !

So configuration actually is as follows:

<Host name="server.com" appBase="/home/server/public_html">
<Alias>www.server.com</Alias>
<Context path="" reloadable="true" docBase="." debug="1"/>
<Context path="/manager" debug="0" privileged="true"
               docBase="/usr/local/jakarta/tomcat/server/webapps/manager">
</Context>
</Host>

Also tried to deploy that same WAR renamed as ROOT.war, but it doesn't work.
I got the following error:

FAIL - War file "ROOT.war" cannot be uploaded if context is defined in server.xml


Now the only difference on procedure at VPS server (localhost vs virtual 
host) is that I do not copy/replace
the web.xml (under Test-03 directory) file to the ROOT folder (meaning 
Tomcat_Home/webapps)
when doing the same excercise with the localhost.
Also, the localhost has a ROOT directory, the virtual host NOT.

Both JSP programs are ver simple and only call the same class 
Stringbeans, only prg1.jsp works.

Looking to the work directory (Catalina/domain.com) after undeployed 
Test-03 for domain.com:
I can see directory subdir, and under that: no files, only directories.

Chris


El 19/04/2012 02:25 a.m., Pid * escribi:
> On 19 Apr 2012, at 01:12, Konstantin Kolinko<knst.kolinko@gmail.com>  wrote:
>
>> 2012/4/19 Chris Patterson<tomcat@vittox.com>:
>>> Dear Konstantin, thanks for asking, I will try to answer your questions
>>>
>>> My experience level is relative, idea is to spend less time sharing your
>>> experience.
>>> I have installed Tomcat servers for many years mostly on Unix/Linux,
>>> and allready have a CentOS 5.6 with Tomcat 6.x (default) on  a local server.
>>>
>> OK. Thank you for detailed answer. It makes more sense now.
>>
>>> I could deploy my "Dynamic Web Application" (eclipse language) named Test-03
>>> from a
>>> WAR format and it worked for both cases. _So it should not be the "code"._
>>> Of course it is not a Web App, its only a Test.
>>>
>>> Differences are:
>>> Local host has Tomcat 6.x, VPS server has Tomcat 5.3.35
>>> Local host has Java 1.6.0_22 / OpenJDK 64-Bit, VPS server has Java 1.6.0_29
>>> / Java Hotspot 64-Bit
>>>
>>> I checked following files having basically the same default configuration:
>>> server.xml, web.xml, context.xml
>>>
>>> When deployed on the /local server/ using the Tomcat Manager
>>> I see the following directories:
>>>
>>>   docs
>>>   examples
>>>   host-manager
>>>   manager
>>>   ROOT
>>>   sample
>>>   Test-03
>>>   Test-03.war
>>>
>>> Under ROOT is working the Test with URLs:
>>>   localhost:8080/prg1.jsp
>>>   localhost:8080/subdir/prg2.jsp
> If you have deployed the broken config you originally posted then
> there is a good chance that subdir is being treated as a web
> application and Jasper is looking for the class in a non-existent
> WEB-INF/lib.
>
>
> p
>
>
>
>
>>> Also work fine under Test-03
>>>     localhost:8080/Test-03/prg1.jsp
>>>     localhost:8080/Test-03/subdir/prg2.jsp
>>>
>>> The class files are respectively under ROOT/WEB-INF/classes and
>>> Test-02/WEB-INF/classes
>>> I just copied all content undet Test-03 to the ROOT folder and reloaded
>>> (using the Manager)
>>>
>> There are two apparent differences with the above copy+reload
>> procedure, as compared with "clean" deploy:
>>
>> 1. Reload != (Start + Stop).
>>
>> It is a more lightweight operation than stopping and then starting a
>> webapp. Maybe something went wrong there.
>>
>>
>> 2. You have not cleared the work directory of the ROOT webapp.
>>
>> So there might be previous compiled classes for those JSPs. Depending
>> on timestamps they will be not recompiled.  (E.g. if you replace a jsp
>> with an older copy of that jsp, it will not be recompiled. Check
>> whether the clock on the server has the correct time. Thought it is
>> easier to just clean the work directory for the webapp.)
>>
>>
>> The resource id for that "The value for the useBean class" message is
>> "jsp.error.invalid.bean".
>>
>> It is thrown is in jasper.compiler.Generator#visit() when it visits
>> <jsp:useBean>  node if it cannot load the class specified in the
>> useBean tag.
>>
>> http://svn.apache.org/viewvc/tomcat/tc5.5.x/tags/TOMCAT_5_5_35/jasper/src/share/org/apache/jasper/compiler/Generator.java?view=markup#l1199
>>
>>
>> You have to check that you did not forget to copy necessary supporting
>> classes and libraries. If that fails, try to write a simple jsp that
>> explicitly loads that class.
>>
>>> The same excersise on the VPS running CPanel for a domain like etrust.us
>>> does only work for etrust.us/Test-03/prg1.jsp
>>> When trying etrust.us/prg1.jsp it only works until trying
>>> etrust.us/subdir/prg2.jsp,
>>> then i get the error 500: JasperException: The value for the useBean class
>>> ___ attribute is invalid
>>>
>>> Log file shows no more details about the issue.
>>>
>>> As "main directory" I mean the docBase referenced in the server.xml file.
>>> I have read the Servlet Specificacion (2.4) and did several changes to the
>>> configuration files with no success.
>>>
>>> Does someone here have any idea where to check some configuration ?
>>>
>>>
>>> El 18/04/2012 12:08 p.m., Konstantin Kolinko escribi:
>>>> 2012/4/18 Chris Patterson<tomcat@vittox.com>:
>>>>> More on this, now I think it is some configuration issue for the tomcat
>>>>> server:
>>>>>
>>>>> I am using eclipse to check both JSP files, and they work without any
>>>>> problems
>>>>> in my PC. When deploying to Tomcat 5.5.35 to a sub-directory like de
>>>>> project
>>>>> name
>>>>> they also work fine. For example at www.domain.com/Test1/prg1.jsp and
>>>>> www.domain.com/Test1/subdir/prg2.jsp.
>>>>>
>>>>> If I copy them to the main directory with a shell command:
>>>>> cp -pr * .. from the Test1 directory and undeploy the Test1 application
>>>>> then only www.domain.com/prg1.jsp works and but the second one,
>>>>> www.domain.com/subdir/prg2.jsp gives me the same (500) error:
>>>>>
>>>>> /prg2.jsp(26,0) The value for the useBean class attribute
>>>>> jdbcbean.Stringbean is invalid.
>>>>>
>>>>>
>>>>> Is this like a BUG ? Or perhaps something about the Java version ?
>>>>> I have the following version running on a CentOS release 5.8:
>>>>> java version "1.6.0_29"
>>>>> Java(TM) SE Runtime Environment (build 1.6.0_29-b11)
>>>>> Java HotSpot(TM) 64-Bit Server VM (build 20.4-b02, mixed mode)
>>>>>
>>>>> Hope this info help a little more to find a solution.
>>>>>
>>>>>
>>>> What is your experience level?
>>>>
>>>> Do you know what a "web application" is?
>>>> Have you read The Servlet specification, Documentation, etc.?
>>>>
>>>> Do you know where your classes must be put in a Web application?
>>>>
>>>> Your "main directory" terminology does not make sense.
>>>>
>> Best regards,
>> Konstantin Kolinko
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>> For additional commands, e-mail: users-help@tomcat.apache.org
>>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>
>

--------------050602010607020307020507--

From users-return-233678-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 19:49:40 2012
Return-Path: <users-return-233678-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5FB719BA4
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 19:49:40 +0000 (UTC)
Received: (qmail 24485 invoked by uid 500); 19 Apr 2012 19:49:37 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 24426 invoked by uid 500); 19 Apr 2012 19:49:37 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 24415 invoked by uid 99); 19 Apr 2012 19:49:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 19:49:37 +0000
X-ASF-Spam-Status: No, hits=3.5 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS,URIBL_BLACK
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [216.82.241.132] (HELO mail45.messagelabs.com) (216.82.241.132)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 19:49:27 +0000
X-Env-Sender: Chuck.Caldarale@unisys.com
X-Msg-Ref: server-4.tower-45.messagelabs.com!1334864941!26868272!22
X-Originating-IP: [192.61.61.105]
X-StarScan-Version: 6.5.5; banners=-,-,-
X-VirusChecked: Checked
Received: (qmail 26506 invoked from network); 19 Apr 2012 19:49:05 -0000
Received: from naedge.unisys.com (HELO USEA-NAEDGE2.unisys.com) (192.61.61.105)
  by server-4.tower-45.messagelabs.com with RC4-SHA encrypted SMTP; 19 Apr 2012 19:49:05 -0000
Received: from usea-nahubcas2.na.uis.unisys.com (129.224.76.115) by
 USEA-NAEDGE2.unisys.com (192.61.61.105) with Microsoft SMTP Server (TLS) id
 8.3.83.0; Thu, 19 Apr 2012 14:49:02 -0500
Received: from USEA-EXCH8.na.uis.unisys.com ([129.224.76.41]) by
 usea-nahubcas2.na.uis.unisys.com ([129.224.76.115]) with mapi; Thu, 19 Apr
 2012 14:49:02 -0500
From: "Caldarale, Charles R" <Chuck.Caldarale@unisys.com>
To: Tomcat Users List <users@tomcat.apache.org>
Date: Thu, 19 Apr 2012 14:49:01 -0500
Subject: RE: JasperException: The value for the useBean class ___ attribute
 is invalid
Thread-Topic: JasperException: The value for the useBean class ___ attribute
 is invalid
Thread-Index: Ac0eYxSLDi17NgmGRcuF/kpjWBOZqwAAclFg
Message-ID: <99C8B2929B39C24493377AC7A121E21FB0173ADE36@USEA-EXCH8.na.uis.unisys.com>
References: <4F8D9A5B.3020302@vittox.com> <4F8EF3C1.4010801@vittox.com>
 <CABzHfVk3DERdgHzZtQD_uh7a5x6y-cjcpFQfDOMg06nmp3rGsA@mail.gmail.com>
 <4F8F4FF1.2020307@vittox.com>
 <CABzHfVm4SEANiWw01qzV311XZih8dFOBTTPeN3rb7xHeXFMXTQ@mail.gmail.com>
 <710805633277644507@unknownmsgid> <4F9067F8.2010202@vittox.com>
In-Reply-To: <4F9067F8.2010202@vittox.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0

PiBGcm9tOiBDaHJpcyBQYXR0ZXJzb24gW21haWx0bzp0b21jYXRAdml0dG94LmNvbV0gDQo+IFN1
YmplY3Q6IFJlOiBKYXNwZXJFeGNlcHRpb246IFRoZSB2YWx1ZSBmb3IgdGhlIHVzZUJlYW4gY2xh
c3MgX19fIGF0dHJpYnV0ZSBpcyBpbnZhbGlkDQoNCj4gU28gY29uZmlndXJhdGlvbiBhY3R1YWxs
eSBpcyBhcyBmb2xsb3dzOg0KDQo+IDxIb3N0IG5hbWU9InNlcnZlci5jb20iIGFwcEJhc2U9Ii9o
b21lL3NlcnZlci9wdWJsaWNfaHRtbCI+DQo+IDxBbGlhcz53d3cuc2VydmVyLmNvbTwvQWxpYXM+
DQoNCklmIHlvdSBvbmx5IGhhdmUgb25lIDxIb3N0Piwgbm8gPEFsaWFzPiBpcyBuZWVkZWQuDQoN
Cj4gPENvbnRleHQgcGF0aD0iIiByZWxvYWRhYmxlPSJ0cnVlIiBkb2NCYXNlPSIuIiBkZWJ1Zz0i
MSIvPg0KPiA8Q29udGV4dCBwYXRoPSIvbWFuYWdlciIgZGVidWc9IjAiIHByaXZpbGVnZWQ9InRy
dWUiDQo+ICAgICAgICAgICAgICAgIGRvY0Jhc2U9Ii91c3IvbG9jYWwvamFrYXJ0YS90b21jYXQv
c2VydmVyL3dlYmFwcHMvbWFuYWdlciI+DQo+IDwvQ29udGV4dD4NCg0KUGxlYXNlLCBwbGVhc2Ug
cmVhZCB0aGUgZG9jdW1lbnRhdGlvbiBmb3IgdGhlIFRvbWNhdCB2ZXJzaW9uIHlvdSdyZSB1c2lu
Zy4gIDxDb250ZXh0PiBlbGVtZW50cyBzaG91bGQgTk9UIGJlIHBsYWNlZCBpbiBzZXJ2ZXIueG1s
LCB0aGVyZSBpcyBubyBkZWJ1ZyBhdHRyaWJ1dGUgZm9yIDxDb250ZXh0PiwgYW5kIGEgZG9jQmFz
ZSBhdHRyaWJ1dGUgb2YgIi4iIGlzIGNvbXBsZXRlbHkgYm9ndXMuICBTdGFydCBhZ2Fpbi4NCg0K
SSBzdGlsbCBjYW4ndCBmaWd1cmUgb3V0IGV4YWN0bHkgd2hhdCB5b3UgaW50ZW5kIHRoZSBkZWZh
dWx0IHdlYmFwcCAoUk9PVCkgdG8gYmUuDQoNCiAtIENodWNrDQoNCg0KVEhJUyBDT01NVU5JQ0FU
SU9OIE1BWSBDT05UQUlOIENPTkZJREVOVElBTCBBTkQvT1IgT1RIRVJXSVNFIFBST1BSSUVUQVJZ
IE1BVEVSSUFMIGFuZCBpcyB0aHVzIGZvciB1c2Ugb25seSBieSB0aGUgaW50ZW5kZWQgcmVjaXBp
ZW50LiBJZiB5b3UgcmVjZWl2ZWQgdGhpcyBpbiBlcnJvciwgcGxlYXNlIGNvbnRhY3QgdGhlIHNl
bmRlciBhbmQgZGVsZXRlIHRoZSBlLW1haWwgYW5kIGl0cyBhdHRhY2htZW50cyBmcm9tIGFsbCBj
b21wdXRlcnMuDQoNCg==
DQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IHVzZXJzLXVuc3Vi
c2NyaWJlQHRvbWNhdC5hcGFjaGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1t
YWlsOiB1c2Vycy1oZWxwQHRvbWNhdC5hcGFjaGUub3JnDQoN

From users-return-233679-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 21:00:19 2012
Return-Path: <users-return-233679-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 168019799
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 21:00:19 +0000 (UTC)
Received: (qmail 41041 invoked by uid 500); 19 Apr 2012 21:00:15 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 40988 invoked by uid 500); 19 Apr 2012 21:00:15 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 40977 invoked by uid 99); 19 Apr 2012 21:00:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 21:00:15 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of adam.n.gordon@gmail.com designates 209.85.216.173 as permitted sender)
Received: from [209.85.216.173] (HELO mail-qc0-f173.google.com) (209.85.216.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 21:00:08 +0000
Received: by qcsc20 with SMTP id c20so7013041qcs.18
        for <users@tomcat.apache.org>; Thu, 19 Apr 2012 13:59:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        bh=LeIS99uG5Cwea0Z7pc2oANgACHkVz48hizgIHVdUpPU=;
        b=UPVZh23c1vVWyxMGUkzxXQtU/cOQ5Nsabgol62QehAEf3ElonjT6pZd+FdqyRuC74w
         qS3Np5qeLBwlXG91BL11HhSQDEIL5LTJstNjXcw7MhkzfM7uHGRy2WEIMXJhjTAwr6YI
         gnpE2YL7Syx0ucvHLmafWJHeCI31FlPRwvXL59IcdKq0SW0HDn2M7hQvP+cXXKYz8x9k
         CN0O8UI9wyKeMncYOc+GgkkG0nK9N0ihMLEN5zSqFGwZGKDdRP6yyfsuwPwVj5nP1uF3
         vR4fOYNERE6FBjd3l80Iou5jn0ktMYGYxEo8ih5rq3SPSqD41gymU+1LZuZR57WMvORo
         tkAw==
Received: by 10.224.32.193 with SMTP id e1mr146555qad.44.1334869187204; Thu,
 19 Apr 2012 13:59:47 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.5.68 with HTTP; Thu, 19 Apr 2012 13:59:31 -0700 (PDT)
In-Reply-To: <4F9057FD.2010605@christopherschultz.net>
References: <CAONS=m=NEDdFcY7+vUZ+2wCAf8wZqbSpOwHsFpGLGk8_me76GQ@mail.gmail.com>
 <4F9057FD.2010605@christopherschultz.net>
From: Adam Gordon <adam.n.gordon@gmail.com>
Date: Thu, 19 Apr 2012 14:59:31 -0600
Message-ID: <CAONS=mkjVX_jJDUVgXCV38q-2sTKhVpr+MMs-n-udS6yMomXSA@mail.gmail.com>
Subject: Re: Classpath issues with Embedded Tomcat 7
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Chris-

> If this is an update, why not reply to your original thread? It's
> difficult to keep everything in context when you start a new thread.

I got in trouble for using Nabble and my original message never
posted, just the update. =C2=A0Since I wasn't sure how to handle or correct
it all I just created a new thread knowing I'd probably get in trouble
again. =C2=A0C'est la vie.

-------

As far as the issues I was having.  I had WEB-INF/classes in my
classpath so that it could find my main class and WEB-INF/classes also
contained all my servlets, Spring services, GWT code, etc... hence the
third-party library dependencies for SLF4J, GWT, Spring, etc...

To solve, I moved the four required JARs (the three tomcat ones and
the ECJ JAR) to a separate directory and also created the directory
structure for the package in which my main class lives (e.g.
com/foo/bar/MainClass) and then just ran:

java -cp lib:lib/tomcat-embed-core-7.0.27.jar:lib/tomcat-juli-7.0.27.jar:li=
b/tomcat-embed-jasper-7.0.27.jar:lib/ecj-3.7.1.jar
com.foo.bar.MainClass

and everything worked correctly.

As an FYI, the docs say Tomcat provides a sensible default for a temp
dir which is why I didn't set one.

Thanks,

--adam

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233680-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 21:12:34 2012
Return-Path: <users-return-233680-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 90E499B7F
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 21:12:34 +0000 (UTC)
Received: (qmail 83529 invoked by uid 500); 19 Apr 2012 21:12:31 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 83477 invoked by uid 500); 19 Apr 2012 21:12:31 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 83463 invoked by uid 99); 19 Apr 2012 21:12:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 21:12:31 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [216.82.250.179] (HELO mail210.messagelabs.com) (216.82.250.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 21:12:19 +0000
X-Env-Sender: Chuck.Caldarale@unisys.com
X-Msg-Ref: server-7.tower-210.messagelabs.com!1334869917!5282754!1
X-Originating-IP: [192.61.61.104]
X-StarScan-Version: 6.5.5; banners=-,-,-
X-VirusChecked: Checked
Received: (qmail 17626 invoked from network); 19 Apr 2012 21:11:58 -0000
Received: from unknown (HELO USEA-NAEDGE1.unisys.com) (192.61.61.104)
  by server-7.tower-210.messagelabs.com with RC4-SHA encrypted SMTP; 19 Apr 2012 21:11:58 -0000
Received: from usea-nahubcas2.na.uis.unisys.com (129.224.76.115) by
 USEA-NAEDGE1.unisys.com (192.61.61.104) with Microsoft SMTP Server (TLS) id
 8.3.83.0; Thu, 19 Apr 2012 16:11:57 -0500
Received: from USEA-EXCH8.na.uis.unisys.com ([129.224.76.41]) by
 usea-nahubcas2.na.uis.unisys.com ([129.224.76.115]) with mapi; Thu, 19 Apr
 2012 16:11:57 -0500
From: "Caldarale, Charles R" <Chuck.Caldarale@unisys.com>
To: Tomcat Users List <users@tomcat.apache.org>
Date: Thu, 19 Apr 2012 16:11:56 -0500
Subject: RE: Classpath issues with Embedded Tomcat 7
Thread-Topic: Classpath issues with Embedded Tomcat 7
Thread-Index: Ac0eb3EjQcIgGKfyTvi+YpS13MmmeQAADkzA
Message-ID: <99C8B2929B39C24493377AC7A121E21FB0173ADFC6@USEA-EXCH8.na.uis.unisys.com>
References: <CAONS=m=NEDdFcY7+vUZ+2wCAf8wZqbSpOwHsFpGLGk8_me76GQ@mail.gmail.com>
 <4F9057FD.2010605@christopherschultz.net>
 <CAONS=mkjVX_jJDUVgXCV38q-2sTKhVpr+MMs-n-udS6yMomXSA@mail.gmail.com>
In-Reply-To: <CAONS=mkjVX_jJDUVgXCV38q-2sTKhVpr+MMs-n-udS6yMomXSA@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

PiBGcm9tOiBBZGFtIEdvcmRvbiBbbWFpbHRvOmFkYW0ubi5nb3Jkb25AZ21haWwuY29tXSANCj4g
U3ViamVjdDogUmU6IENsYXNzcGF0aCBpc3N1ZXMgd2l0aCBFbWJlZGRlZCBUb21jYXQgNw0KDQo+
IHRoZSBkb2NzIHNheSBUb21jYXQgcHJvdmlkZXMgYSBzZW5zaWJsZSBkZWZhdWx0IGZvciBhIHRl
bXANCj4gZGlyIHdoaWNoIGlzIHdoeSBJIGRpZG4ndCBzZXQgb25lLg0KDQpUaGF0J3MgdHJ1ZSB3
aGVuIFRvbWNhdCBpcyBydW4gYXMgYSBub3JtYWwgc2VydmVyLCBidXQgZm9yIGVtYmVkZGVkLCBp
dCB3aWxsIHVzZSB3aGF0ZXZlciB0aGUgSlZNIGRlY2lkZXMgdG8gc2V0IGZvciB0aGUgc3lzdGVt
IHByb3BlcnR5IGphdmEuaW8udG1wZGlyLCB3aGljaCB2YXJpZXMgZGVwZW5kaW5nIG9uIHBsYXRm
b3JtLiAgTGlrZWx5IGJldHRlciBpZiB5b3UgcGljayBhbiBleHBsaWNpdCBsb2NhdGlvbi4NCg0K
IC0gQ2h1Y2sNCg0KDQpUSElTIENPTU1VTklDQVRJT04gTUFZIENPTlRBSU4gQ09ORklERU5USUFM
IEFORC9PUiBPVEhFUldJU0UgUFJPUFJJRVRBUlkgTUFURVJJQUwgYW5kIGlzIHRodXMgZm9yIHVz
ZSBvbmx5IGJ5IHRoZSBpbnRlbmRlZCByZWNpcGllbnQuIElmIHlvdSByZWNlaXZlZCB0aGlzIGlu
IGVycm9yLCBwbGVhc2UgY29udGFjdCB0aGUgc2VuZGVyIGFuZCBkZWxldGUgdGhlIGUtbWFpbCBh
bmQgaXRzIGF0dGFjaG1lbnRzIGZyb20gYWxsIGNvbXB1dGVycy4NCg==
DQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IHVzZXJzLXVuc3Vi
c2NyaWJlQHRvbWNhdC5hcGFjaGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1t
YWlsOiB1c2Vycy1oZWxwQHRvbWNhdC5hcGFjaGUub3JnDQoN

From users-return-233681-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 21:22:24 2012
Return-Path: <users-return-233681-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 082119ED4
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 21:22:24 +0000 (UTC)
Received: (qmail 12358 invoked by uid 500); 19 Apr 2012 21:22:20 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 12279 invoked by uid 500); 19 Apr 2012 21:22:20 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 12266 invoked by uid 99); 19 Apr 2012 21:22:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 21:22:20 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of adam.n.gordon@gmail.com designates 209.85.216.173 as permitted sender)
Received: from [209.85.216.173] (HELO mail-qc0-f173.google.com) (209.85.216.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 21:22:14 +0000
Received: by qcsc20 with SMTP id c20so7028182qcs.18
        for <users@tomcat.apache.org>; Thu, 19 Apr 2012 14:21:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        bh=uDmPMO1GwV9tznpnOFEmI3nPHuyIK+QQ2VW7g2d+33I=;
        b=Dlaa/2gh1zK7SVbK9G0LaQ9JSWeEwbI3TQxqJm512dN2YqjH7Rnut1CFrBS5EYD5Xh
         UdZmEGAE5+kx1oNG2Dh995R7COCza/79yWJy8xcFXoLLzq3AGFjrHZseW069wdoU7TRc
         teYtYzzGNVfZFb+AxVX36lix6einGSVwliFggeEYmIMPelXa+J7iOCVMwB8cXSysRREn
         PtZSPw1wYFdpN7uVjw1VwJpfLML1HTm+yoC6Mapsux9do6u4IRwfFeyhHyEvpez09WbF
         qVV9WbFXH/fUqTApK6U4pfEVFdsMN4Ckk4ICiHrye7DzISIshYzOXA4eynd1fo/M/S0q
         YkOw==
Received: by 10.224.101.10 with SMTP id a10mr5403335qao.5.1334870513482; Thu,
 19 Apr 2012 14:21:53 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.5.68 with HTTP; Thu, 19 Apr 2012 14:21:38 -0700 (PDT)
In-Reply-To: <99C8B2929B39C24493377AC7A121E21FB0173ADFC6@USEA-EXCH8.na.uis.unisys.com>
References: <CAONS=m=NEDdFcY7+vUZ+2wCAf8wZqbSpOwHsFpGLGk8_me76GQ@mail.gmail.com>
 <4F9057FD.2010605@christopherschultz.net> <CAONS=mkjVX_jJDUVgXCV38q-2sTKhVpr+MMs-n-udS6yMomXSA@mail.gmail.com>
 <99C8B2929B39C24493377AC7A121E21FB0173ADFC6@USEA-EXCH8.na.uis.unisys.com>
From: Adam Gordon <adam.n.gordon@gmail.com>
Date: Thu, 19 Apr 2012 15:21:38 -0600
Message-ID: <CAONS=mk2Xs=zWxqbPj3L2UiGVt3kTxhbtYhGh-8qKTRcxfWxBA@mail.gmail.com>
Subject: Re: Classpath issues with Embedded Tomcat 7
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Thu, Apr 19, 2012 at 15:11, Caldarale, Charles R
<Chuck.Caldarale@unisys.com> wrote:

>> the docs say Tomcat provides a sensible default for a temp
>> dir which is why I didn't set one.
>
> That's true when Tomcat is run as a normal server, but for embedded, it w=
ill use whatever the JVM decides to set for the system property java.io.tmp=
dir, which varies depending on platform. =C2=A0Likely better if you pick an=
 explicit location.

are you sure?  it's creating tomcat.9090 in the same directory as my
web application.

that aside, i do agree that it's FAR better to explicitly specify one
rather than crossing one's fingers.

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233682-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 21:30:09 2012
Return-Path: <users-return-233682-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A75F59F70
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 21:30:09 +0000 (UTC)
Received: (qmail 35944 invoked by uid 500); 19 Apr 2012 21:30:06 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 35881 invoked by uid 500); 19 Apr 2012 21:30:06 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 35871 invoked by uid 99); 19 Apr 2012 21:30:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 21:30:06 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [216.82.241.83] (HELO mail37.messagelabs.com) (216.82.241.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 21:29:56 +0000
X-Env-Sender: Chuck.Caldarale@unisys.com
X-Msg-Ref: server-5.tower-37.messagelabs.com!1334870974!22044502!3
X-Originating-IP: [192.61.61.104]
X-StarScan-Version: 6.5.5; banners=-,-,-
X-VirusChecked: Checked
Received: (qmail 23115 invoked from network); 19 Apr 2012 21:29:35 -0000
Received: from unknown (HELO USEA-NAEDGE1.unisys.com) (192.61.61.104)
  by server-5.tower-37.messagelabs.com with RC4-SHA encrypted SMTP; 19 Apr 2012 21:29:35 -0000
Received: from usea-nahubcas2.na.uis.unisys.com (129.224.76.115) by
 USEA-NAEDGE1.unisys.com (192.61.61.104) with Microsoft SMTP Server (TLS) id
 8.3.83.0; Thu, 19 Apr 2012 16:28:38 -0500
Received: from USEA-EXCH8.na.uis.unisys.com ([129.224.76.41]) by
 usea-nahubcas2.na.uis.unisys.com ([129.224.76.115]) with mapi; Thu, 19 Apr
 2012 16:28:38 -0500
From: "Caldarale, Charles R" <Chuck.Caldarale@unisys.com>
To: Tomcat Users List <users@tomcat.apache.org>
Date: Thu, 19 Apr 2012 16:28:37 -0500
Subject: RE: Classpath issues with Embedded Tomcat 7
Thread-Topic: Classpath issues with Embedded Tomcat 7
Thread-Index: Ac0ecotlAx3BdDW6QOSr/Pj3DRSVKAAAILWg
Message-ID: <99C8B2929B39C24493377AC7A121E21FB0173AE008@USEA-EXCH8.na.uis.unisys.com>
References: <CAONS=m=NEDdFcY7+vUZ+2wCAf8wZqbSpOwHsFpGLGk8_me76GQ@mail.gmail.com>
 <4F9057FD.2010605@christopherschultz.net>
 <CAONS=mkjVX_jJDUVgXCV38q-2sTKhVpr+MMs-n-udS6yMomXSA@mail.gmail.com>
 <99C8B2929B39C24493377AC7A121E21FB0173ADFC6@USEA-EXCH8.na.uis.unisys.com>
 <CAONS=mk2Xs=zWxqbPj3L2UiGVt3kTxhbtYhGh-8qKTRcxfWxBA@mail.gmail.com>
In-Reply-To: <CAONS=mk2Xs=zWxqbPj3L2UiGVt3kTxhbtYhGh-8qKTRcxfWxBA@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

PiBGcm9tOiBBZGFtIEdvcmRvbiBbbWFpbHRvOmFkYW0ubi5nb3Jkb25AZ21haWwuY29tXSANCj4g
U3ViamVjdDogUmU6IENsYXNzcGF0aCBpc3N1ZXMgd2l0aCBFbWJlZGRlZCBUb21jYXQgNw0KDQo+
IGl0J3MgY3JlYXRpbmcgdG9tY2F0LjkwOTAgaW4gdGhlIHNhbWUgZGlyZWN0b3J5IGFzIG15DQo+
IHdlYiBhcHBsaWNhdGlvbi4NCg0KVGhhdCBsb29rcyBsaWtlIHRoZSBwaWQgZmlsZSB1c2VkIGZv
ciBzaHV0dGluZyBkb3duIFRvbWNhdCB2aWEgc2NyaXB0cy4gIEkgZG9uJ3QgdGhpbmsgdGhhdCBo
YXMgYW55dGhpbmcgdG8gZG8gd2l0aCB3aGF0IFRvbWNhdCB1c2VzIGZvciBKU1AgY29tcGlsYXRp
b25zLg0KDQogLSBDaHVjaw0KDQoNClRISVMgQ09NTVVOSUNBVElPTiBNQVkgQ09OVEFJTiBDT05G
SURFTlRJQUwgQU5EL09SIE9USEVSV0lTRSBQUk9QUklFVEFSWSBNQVRFUklBTCBhbmQgaXMgdGh1
cyBmb3IgdXNlIG9ubHkgYnkgdGhlIGludGVuZGVkIHJlY2lwaWVudC4gSWYgeW91IHJlY2VpdmVk
IHRoaXMgaW4gZXJyb3IsIHBsZWFzZSBjb250YWN0IHRoZSBzZW5kZXIgYW5kIGRlbGV0ZSB0aGUg
ZS1tYWlsIGFuZCBpdHMgYXR0YWNobWVudHMgZnJvbSBhbGwgY29tcHV0ZXJzLg0KDQo=
DQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IHVzZXJzLXVuc3Vi
c2NyaWJlQHRvbWNhdC5hcGFjaGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1t
YWlsOiB1c2Vycy1oZWxwQHRvbWNhdC5hcGFjaGUub3JnDQoN

From users-return-233683-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 21:56:07 2012
Return-Path: <users-return-233683-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6B0FE963F
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 21:56:07 +0000 (UTC)
Received: (qmail 5247 invoked by uid 500); 19 Apr 2012 21:56:04 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 5186 invoked by uid 500); 19 Apr 2012 21:56:04 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 5175 invoked by uid 99); 19 Apr 2012 21:56:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 21:56:04 +0000
X-ASF-Spam-Status: No, hits=0.3 required=5.0
	tests=PLING_QUERY,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dilipvshah@hotmail.com designates 65.55.111.84 as permitted sender)
Received: from [65.55.111.84] (HELO blu0-omc2-s9.blu0.hotmail.com) (65.55.111.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 21:55:56 +0000
Received: from BLU162-DS12 ([65.55.111.71]) by blu0-omc2-s9.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Thu, 19 Apr 2012 14:55:35 -0700
X-Originating-IP: [24.5.178.208]
X-Originating-Email: [dilipvshah@hotmail.com]
Message-ID: <BLU162-ds12FB2B965DCCC1C6B5D679D33D0@phx.gbl>
From: "Dilip Shah" <dilipvshah@hotmail.com>
To: "Tomcat Users List" <users@tomcat.apache.org>
References: <BLU162-ds6E297DD17A3D09D5BD1B2D33D0@phx.gbl> <CABzHfVmsp+bAXkBhjkdTdwVex85okAvWb=zFsChGcOndhBuFdw@mail.gmail.com>
In-Reply-To: <CABzHfVmsp+bAXkBhjkdTdwVex85okAvWb=zFsChGcOndhBuFdw@mail.gmail.com>
Subject: Re: catalina.out file is growing very rapidly! How to prevent Hibernate's INFO and DEBUG statements from getting added to catalina.out file?
Date: Thu, 19 Apr 2012 14:55:35 -0700
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 14.0.8117.416
X-MimeOLE: Produced By Microsoft MimeOLE V14.0.8117.416
X-OriginalArrivalTime: 19 Apr 2012 21:55:35.0161 (UTC) FILETIME=[2607F690:01CD1E77]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Konstantin,

Thanks for the reply!

To answer your questions...
* Tomcat version info:
Server version: Apache Tomcat/5.5.28
Server built:   Jul 24 2009 01:33:09
Server number:  5.5.28.0
OS Name:        Linux
OS Version:     2.6.18-53.el5
Architecture:   i386
JVM Version:    1.6.0_23-ea-b01

* Since I'm configuring the application's logging via log4j.properties, I 
can safely assume that logging is done via Log4j and not JULI, right?
Your statement about log formatting also seems to suggest the same. Let me 
know if I interpreted your statement incorrectly.

* The changes I made to the application:
- I implemented Spring view controller (for the first time) and in the 
process added @Autowired, @JsonIgnore through the code
- in the process of getting jSON output to the client, I added the following 
jar files to common/lib
aspectjtools-1.5.4.jar
bval-core-0.3-incubating.jar
hibernate-validator-4.1.0.Final.jar
jackson-core-asl-1.6.4.jar
jackson-mapper-asl-1.6.4.jar
joda-time-1.6.2.jar
joda-time-jsptags-1.0.2.jar
jstl-1.2.jar
validation-api-1.0.0.GA.jar

I suspect packages in one or more of these jar files is generating these 
INFO and DEBUG log entries in catalina.out

* The application's log4j.properties file is in the application's 
WEB-INF/classes folder

Your suggestion (CATALINA_OUT=/dev/null) is interesting but the collateral 
damage may be too great!

Let me know if you can think of anything else after getting this additional 
information.

Best wishes,

Dilip



--------------------------------------------------
From: "Konstantin Kolinko" <knst.kolinko@gmail.com>
Sent: Thursday, April 19, 2012 10:14 AM
To: "Tomcat Users List" <users@tomcat.apache.org>
Subject: Re: catalina.out file is growing very rapidly! How to prevent 
Hibernate's INFO and DEBUG statements from getting added to catalina.out 
file?

> 2012/4/19 Dilip Shah <dilipvshah@hotmail.com>:
>> My Java application (Spring, Hibernate, MySQL) is running in Tomcat 5.5
>
> What version of 5.5.x ?
>
>>
>> After the last set of changes to my application, Tomcat's catalina.out 
>> file is growing very rapidly. With each query it adds a few MBs of INFO 
>> and DEBUG statements to the file.
>>
>> The log file has very large number of INFO and DEBUG statements such as 
>> the following:
>> 01:52:45.412 [main] INFO  o.hibernate.cfg.annotations.Version - Hibernate 
>> Annotations 3.5.6-Final
>> 01:52:45.465 [main] INFO  org.hibernate.cfg.Environment - Hibernate 
>> 3.5.6-Final
>> 01:52:45.468 [main] INFO  org.hibernate.cfg.Environment - 
>> hibernate.properties not found
>
> Looks like misconfigured Log4J.logging framework.  You are missing
> log4j.properties file somewhere (or you have several such files which
> conflict with each other).
>
> When Tomcat's JULI is used it formats its log statements differently.
>
>> After the last set of changes to my application
>
> And you know what those changes were?
>
> Start over with a fresh configuration.
>
>
> If nothing else helps you may try the following (~joke):
>
> 1. Create file bin/setenv.sh with the following content:
> CATALINA_OUT=/dev/null
>
> 2. Make the file executable.
> 3. Restart Tomcat.
>
> Best regards,
> Konstantin Kolinko
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233684-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 22:09:59 2012
Return-Path: <users-return-233684-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EE83C998C
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 22:09:58 +0000 (UTC)
Received: (qmail 38588 invoked by uid 500); 19 Apr 2012 22:09:55 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 38530 invoked by uid 500); 19 Apr 2012 22:09:55 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 38516 invoked by uid 99); 19 Apr 2012 22:09:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 22:09:55 +0000
X-ASF-Spam-Status: No, hits=0.3 required=5.0
	tests=FREEMAIL_REPLY,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of knst.kolinko@gmail.com designates 209.85.213.173 as permitted sender)
Received: from [209.85.213.173] (HELO mail-yx0-f173.google.com) (209.85.213.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 22:09:50 +0000
Received: by yenr5 with SMTP id r5so6084604yen.18
        for <users@tomcat.apache.org>; Thu, 19 Apr 2012 15:09:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=kyv/xFz0Y98ge45JgqQgzZYIkPdCS0kxaqoYXCvyih8=;
        b=vWUWQPsztpcS4+Djkwmovlpy/e6TH/PT0zcpTEoz0AahJYXdwrXrGa9RLG2y2McA9+
         xN579Bahy9sPIwhO21JMTRHCwBpAxjxQV9dVv5Nkf3HVxKtV3NZCWNjx+pWYbzqF+pkb
         XiFnV6PDSCB3jVSsYGRoHQLqtBQVc0hcteDCatBw+6T1FzoW4pSG7aQAee7wvepaFwuN
         eZyushtYrFQLyf9MT7ZwZ/ET23Y5b95xPt3ZPkTQtxXorgCO2/zKtBG3DXFLFG0CcFCg
         yxC5ijUEgT1CLxMK7F5dhVwz202mdcUX5uKRbUXBLHWmopSrRqJYKF3cZE/4ig+hhSD9
         +XIQ==
MIME-Version: 1.0
Received: by 10.236.114.200 with SMTP id c48mr1764722yhh.23.1334873370021;
 Thu, 19 Apr 2012 15:09:30 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Thu, 19 Apr 2012 15:09:29 -0700 (PDT)
In-Reply-To: <99C8B2929B39C24493377AC7A121E21FB0173AE008@USEA-EXCH8.na.uis.unisys.com>
References: <CAONS=m=NEDdFcY7+vUZ+2wCAf8wZqbSpOwHsFpGLGk8_me76GQ@mail.gmail.com>
	<4F9057FD.2010605@christopherschultz.net>
	<CAONS=mkjVX_jJDUVgXCV38q-2sTKhVpr+MMs-n-udS6yMomXSA@mail.gmail.com>
	<99C8B2929B39C24493377AC7A121E21FB0173ADFC6@USEA-EXCH8.na.uis.unisys.com>
	<CAONS=mk2Xs=zWxqbPj3L2UiGVt3kTxhbtYhGh-8qKTRcxfWxBA@mail.gmail.com>
	<99C8B2929B39C24493377AC7A121E21FB0173AE008@USEA-EXCH8.na.uis.unisys.com>
Date: Fri, 20 Apr 2012 02:09:29 +0400
Message-ID: <CABzHfVmzQGDDT4oYnFGJEqCNZKGo34E7NfQ87wZ0agpMGsbDXQ@mail.gmail.com>
Subject: Re: Classpath issues with Embedded Tomcat 7
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

2012/4/20 Caldarale, Charles R <Chuck.Caldarale@unisys.com>:
>> From: Adam Gordon [mailto:adam.n.gordon@gmail.com]
>> Subject: Re: Classpath issues with Embedded Tomcat 7
>
>> it's creating tomcat.9090 in the same directory as my
>> web application.
>
> That looks like the pid file used for shutting down Tomcat via scripts. =
=A0I don't think that has anything to do with what Tomcat uses for JSP comp=
ilations.
>

Citing from Tomcat.java:
[[[
    /**
     * Tomcat needs a directory for temp files. This should be the
     * first method called.
     *
     * By default, if this method is not called, we use:
     *  - system properties - catalina.base, catalina.home
     *  - $PWD/tomcat.$PORT
     * (/tmp doesn't seem a good choice for security).
     *
     * TODO: disable work dir if not needed ( no jsp, etc ).
     */
    public void setBaseDir(String basedir) {
        this.basedir =3D basedir;
    }
]]]

There is code somewhere in that class that implements what is written
in the above javadoc.

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233685-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 22:14:05 2012
Return-Path: <users-return-233685-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8DA9B9AA2
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 22:14:05 +0000 (UTC)
Received: (qmail 50813 invoked by uid 500); 19 Apr 2012 22:14:02 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 50762 invoked by uid 500); 19 Apr 2012 22:14:02 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 50751 invoked by uid 99); 19 Apr 2012 22:14:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 22:14:02 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of knst.kolinko@gmail.com designates 209.85.213.45 as permitted sender)
Received: from [209.85.213.45] (HELO mail-yw0-f45.google.com) (209.85.213.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 22:13:57 +0000
Received: by yhoo21 with SMTP id o21so6088793yho.18
        for <users@tomcat.apache.org>; Thu, 19 Apr 2012 15:13:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=hx+2QbfefsV65facI/E7nDrsnyWwhU32SAgZlTjR1BU=;
        b=kDn+Jme1LxELlOcbT6FBGrqnUJBjEFK2rj0Qe2Fyqk5FwSRpZGPMMzyYm+cvyprYvO
         lLRo2ckO/qIfCd23d6bTqD+UT7lZyR6pDRXQMaTOpb/I4463xf39jxOWKdH01caKbQqD
         NVBegbBxVEX/U15REjO2JujLcyJl9jftvqsRe0ieSFVObiaD5lQ1XBPaD8HNe43X97C9
         5yoq+Vxnjn0RoXgujB5GRUsWc8uRfM5Si+H+YeWOvS88hWDDdllvTHfNlf1J8blXZJhC
         jmYp0XadLF+l4pw/cTVZX2rsMGA9z5ph1TfL45N6wSxI75dNrn2FZb9ROgyc961f9g70
         Hzrg==
MIME-Version: 1.0
Received: by 10.236.114.169 with SMTP id c29mr3831598yhh.37.1334873616540;
 Thu, 19 Apr 2012 15:13:36 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Thu, 19 Apr 2012 15:13:36 -0700 (PDT)
In-Reply-To: <loom.20120419T112147-812@post.gmane.org>
References: <loom.20120419T112147-812@post.gmane.org>
Date: Fri, 20 Apr 2012 02:13:36 +0400
Message-ID: <CABzHfVmWwz7iLn5ecCCy8z_WZfT+JfeJRGxqN7QTArNURyzraA@mail.gmail.com>
Subject: Re: my website is not opening after installing CA certificate successfully
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

2012/4/19 Neeraj Sood <neeraj.sood@ril.com>:
> C:\Users\neeraj.sood>keytool -list
> Enter keystore password:
>
> Keystore type: JKS
> Keystore provider: SUN
>
> Your keystore contains 2 entries
>
> rilrootca, 19 Apr, 2012, trustedCertEntry,
> Certificate fingerprint (SHA1):
> 99:67:6B:C9:B8:90:C1:F0:14:53:36:E3:C7:ED:05:9E:
> 61:DC:16:A2
> rilca, 19 Apr, 2012, trustedCertEntry,
> Certificate fingerprint (SHA1):
> 99:67:6B:C9:B8:90:C1:F0:14:53:36:E3:C7:ED:05:9E:
> 61:DC:16:A2
>

The fingerprint is the same, so both are the same one.

You should note that 0 of them has name "tomcat".

> Need better description of the problem. You might also include the
> steps you've already taken. And your configuration.

+1

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233686-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 22:21:30 2012
Return-Path: <users-return-233686-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B21A09DA0
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 22:21:30 +0000 (UTC)
Received: (qmail 73309 invoked by uid 500); 19 Apr 2012 22:21:27 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 73163 invoked by uid 500); 19 Apr 2012 22:21:27 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 73154 invoked by uid 99); 19 Apr 2012 22:21:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 22:21:27 +0000
X-ASF-Spam-Status: No, hits=-0.4 required=5.0
	tests=PLING_QUERY,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of knst.kolinko@gmail.com designates 209.85.160.173 as permitted sender)
Received: from [209.85.160.173] (HELO mail-gy0-f173.google.com) (209.85.160.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 22:21:21 +0000
Received: by ghrr14 with SMTP id r14so6081841ghr.18
        for <users@tomcat.apache.org>; Thu, 19 Apr 2012 15:21:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=KRxR3a8v1INEorBPtE/uDcGIOVmXIb8c1kLxiXPQtzI=;
        b=mwzIlVg/YtyHM+YyeYDUV5+sddms7edOmbPzr7QoOqI8BG1A3afwzYwbUa42YbvtA5
         m71Mm8aQ+lARagb5B8nfT7ABmrH415azga4Tj6m0QaosytvZvYr9D7AC6BCZGQ7DmDQF
         ykLtNnUdaRi+IcbqSDrFw1Ke9rctTGZd0/f6A3BrmyzijBdbR55JQ/I37DHrO7VA7SG4
         e90wMRjT0k5FpkQ94mHMCwThZ28CB0RUXvXYifZBMLIG9f69phE40w1NKZD5M9rekm1H
         w9oWKXoG5YFHRROQBmi+TXP19p/39m/9Uy5ye4+4tFZ6qmALURQlm5TAmRctiHXdakVo
         Mtmg==
MIME-Version: 1.0
Received: by 10.236.170.71 with SMTP id o47mr3795333yhl.104.1334874060485;
 Thu, 19 Apr 2012 15:21:00 -0700 (PDT)
Received: by 10.146.204.18 with HTTP; Thu, 19 Apr 2012 15:21:00 -0700 (PDT)
In-Reply-To: <BLU162-ds12FB2B965DCCC1C6B5D679D33D0@phx.gbl>
References: <BLU162-ds6E297DD17A3D09D5BD1B2D33D0@phx.gbl>
	<CABzHfVmsp+bAXkBhjkdTdwVex85okAvWb=zFsChGcOndhBuFdw@mail.gmail.com>
	<BLU162-ds12FB2B965DCCC1C6B5D679D33D0@phx.gbl>
Date: Fri, 20 Apr 2012 02:21:00 +0400
Message-ID: <CABzHfV=bBjRigDG6wk_L4RY=QmpgCPxOWmXtbb1Xoy+++6Ndpw@mail.gmail.com>
Subject: Re: catalina.out file is growing very rapidly! How to prevent
 Hibernate's INFO and DEBUG statements from getting added to catalina.out file?
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

2012/4/20 Dilip Shah <dilipvshah@hotmail.com>:
> Hi Konstantin,
>
> Thanks for the reply!
>
> To answer your questions...
> * Tomcat version info:
> Server version: Apache Tomcat/5.5.28
> Server built: =A0 Jul 24 2009 01:33:09
> Server number: =A05.5.28.0
> OS Name: =A0 =A0 =A0 =A0Linux
> OS Version: =A0 =A0 2.6.18-53.el5
> Architecture: =A0 i386
> JVM Version: =A0 =A01.6.0_23-ea-b01
>
> * Since I'm configuring the application's logging via log4j.properties, I
> can safely assume that logging is done via Log4j and not JULI, right?
> Your statement about log formatting also seems to suggest the same. Let m=
e
> know if I interpreted your statement incorrectly.

OK.
The problem is that something configured logging for you  (e.g. by
providing its own copy of configuration file).

One example of such bad library is mentioned here:
https://issues.apache.org/bugzilla/show_bug.cgi?id=3D52011

IIRC Log4j supports 2 configuration file names: log4j.properties and
log4j.xml. See Log4J documentation for details.

Search whether some of jars that you added has such a file. If they
are in commons/lib it means that Tomcat sees them.

>
> * The changes I made to the application:
> - I implemented Spring view controller (for the first time) and in the
> process added @Autowired, @JsonIgnore through the code
> - in the process of getting jSON output to the client, I added the follow=
ing
> jar files to common/lib

Adding them to common/lib is a bad idea (a way to jar hell).

You'd better put them into your app's WEB-INF/lib.

> aspectjtools-1.5.4.jar
> bval-core-0.3-incubating.jar
> hibernate-validator-4.1.0.Final.jar
> jackson-core-asl-1.6.4.jar
> jackson-mapper-asl-1.6.4.jar
> joda-time-1.6.2.jar
> joda-time-jsptags-1.0.2.jar
> jstl-1.2.jar
> validation-api-1.0.0.GA.jar
>
> I suspect packages in one or more of these jar files is generating these
> INFO and DEBUG log entries in catalina.out
>
> * The application's log4j.properties file is in the application's
> WEB-INF/classes folder
>

What is in your configuration file?

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233687-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 22:39:13 2012
Return-Path: <users-return-233687-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C426E951B
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 22:39:13 +0000 (UTC)
Received: (qmail 16866 invoked by uid 500); 19 Apr 2012 22:39:10 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 16767 invoked by uid 500); 19 Apr 2012 22:39:10 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 16758 invoked by uid 99); 19 Apr 2012 22:39:10 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 22:39:10 +0000
Received: from localhost (HELO mail-yw0-f45.google.com) (127.0.0.1)
  (smtp-auth username olamy, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 22:39:10 +0000
Received: by yhoo21 with SMTP id o21so6097558yho.18
        for <users@tomcat.apache.org>; Thu, 19 Apr 2012 15:39:09 -0700 (PDT)
Received: by 10.236.181.70 with SMTP id k46mr3962293yhm.21.1334875149316; Thu,
 19 Apr 2012 15:39:09 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.100.14.18 with HTTP; Thu, 19 Apr 2012 15:38:47 -0700 (PDT)
In-Reply-To: <CAPJK9=KrJ-ehCtgBvSCn+VLtV62wGuii9r9WZYjNT6bn7qMXww@mail.gmail.com>
References: <CAPJK9=KrJ-ehCtgBvSCn+VLtV62wGuii9r9WZYjNT6bn7qMXww@mail.gmail.com>
From: Olivier Lamy <olamy@apache.org>
Date: Fri, 20 Apr 2012 00:38:47 +0200
Message-ID: <CAPoyBqTzvBbgjJZqUE2Fa+n+eZtGU7ZF64R9KaXkfG=PtgZ3jQ@mail.gmail.com>
Subject: Re: tomcat maven plugin deploy to multiple tomcat instances...
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64

RG8gdGhhdCB3b3JrIGFkZGluZyBpbiB0aGUgPGV4ZWN1dGlvbj4gc2VjdGlvbjoKCjxnb2Fscz4K
ICA8Z29hbD5kZXBsb3k8L2dvYWw+CjwvZ29hbHM+Cgo/CgoyMDEyLzQvMTkgSmVmZiA8cHJlZGF0
b3J2aUBnbWFpbC5jb20+Ogo+IChEaWRuJ3Qgc2VlIGEgc3BlY2lmaWMgbWFpbGluZyBsaXN0IGZv
ciB0aGUgdG9tY2F0LW1hdmVuLXBsdWdpbi4uLikKPgo+IEkgZmluYWxseSBnb3QgdGhlIDIuMC1T
TkFQU0hPVCB2ZXJzaW9uIG9mIHRoZSB0b21jYXQ2LW1hdmVuLXBsdWdpbiB3b3JraW5nCj4gYWdh
aW5zdCBhIHNpbmdsZSBzZXJ2ZXIsIGJ1dCB3b25kZXJlZCBob3cgSSBjb3VsZCBjb25maWd1cmUg
aXQgdG8gcHVzaCB0bwo+IG11bHRpcGxlIHRvbWNhdCBpbnN0YW5jZXMgYmFzZWQgb24gdGhlIGVu
dmlyb25tZW50LiDCoEZvciBleGFtcGxlLCBvdXIKPiBzdGFnaW5nIGVudmlyb25tZW50IGZvciB0
aGlzIGFwcGxpY2F0aW9uIGhhcyAyIGxvYWQgYmFsYW5jZSBzZXJ2ZXJzLgo+Cj4gSSB0cmllZCB1
c2luZyB0aGUgPGV4ZWN1dGlvbnMvPiBzdHJ1Y3R1cmUgbGlrZSBJIGRvIHdoZW4gcnVubmluZyB3
cy1pbXBvcnQKPiBidXQgaXQgZG9lc24ndCBzZWVtIHRvIHN1cHBvcnQgdGhhdC4KPgo+IElzIHRo
ZXJlIGFub3RoZXIgd2F5IHRvIGVhc2lseSBoYW5kbGUgZGVwbG95bWVudHMgdG8gbXVsdGlwbGUg
c2VydmVycyB3aXRoCj4gdGhpcyBwbHVnaW4/IMKgSWYgbm90LCB3aGF0IHdvdWxkIGl0IHRha2Ug
dG8gc3VwcG9ydCBleGVjdXRpb25zPyDCoEhlcmUgaXMKPiB3aGF0IEkgdHJpZWQuCj4KPgo+IMKg
PHByb2ZpbGU+Cj4gwqAgwqAgwqA8aWQ+ZGVwbG95LXN0YWdlPC9pZD4KPiDCoCDCoCDCoDxhY3Rp
dmF0aW9uPgo+IMKgIMKgIMKgIMKgPGFjdGl2ZUJ5RGVmYXVsdD5mYWxzZTwvYWN0aXZlQnlEZWZh
dWx0Pgo+IMKgIMKgIMKgPC9hY3RpdmF0aW9uPgo+IMKgIMKgIMKgPGJ1aWxkPgo+IMKgIMKgIMKg
IMKgPHBsdWdpbnM+Cj4gwqAgwqAgwqAgwqAgwqA8cGx1Z2luPgo+IMKgIMKgIMKgIMKgIMKgIMKg
PGdyb3VwSWQ+b3JnLmFwYWNoZS50b21jYXQubWF2ZW48L2dyb3VwSWQ+Cj4gwqAgwqAgwqAgwqAg
wqAgwqA8YXJ0aWZhY3RJZD50b21jYXQ2LW1hdmVuLXBsdWdpbjwvYXJ0aWZhY3RJZD4KPiDCoCDC
oCDCoCDCoCDCoCDCoDx2ZXJzaW9uPjIuMC1TTkFQU0hPVDwvdmVyc2lvbj4KPiDCoCDCoCDCoCDC
oCDCoCDCoDxleGVjdXRpb25zPgo+IMKgIMKgIMKgIMKgIMKgIMKgIMKgPGV4ZWN1dGlvbj4KPiDC
oCDCoCDCoCDCoCDCoCDCoCDCoCDCoDxpZD5zdGFnZTAxPC9pZD4KPiDCoCDCoCDCoCDCoCDCoCDC
oCDCoCDCoDxjb25maWd1cmF0aW9uPgo+IMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgPG1vZGU+
d2FyPC9tb2RlPgo+IMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgPHVybD5odHRwOi8vMTAuMTIu
NC4xL21hbmFnZXI8L3VybD4KPiDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoDxmYWlsT25FcnJv
cj50cnVlPC9mYWlsT25FcnJvcj4KPiDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoDxjaGFyc2V0
PlVURi04PC9jaGFyc2V0Pgo+IMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgPHVyaUVuY29kaW5n
PlVURi04PC91cmlFbmNvZGluZz4KPiDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoDxwcm90b2Nv
bD5IVFRQLzEuMTwvcHJvdG9jb2w+Cj4gwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqA8dXBkYXRl
PnRydWU8L3VwZGF0ZT4KPiDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoDxzZXJ2ZXI+c3RhZ2Uw
MTwvc2VydmVyPgo+IMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgPC9jb25maWd1cmF0aW9uPgo+IMKg
IMKgIMKgIMKgIMKgIMKgIMKgPC9leGVjdXRpb24+Cj4gwqAgwqAgwqAgwqAgwqAgwqAgwqA8ZXhl
Y3V0aW9uPgo+IMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgPGlkPnN0YWdlMDY8L2lkPgo+IMKgIMKg
IMKgIMKgIMKgIMKgIMKgIMKgPGNvbmZpZ3VyYXRpb24+Cj4gwqAgwqAgwqAgwqAgwqAgwqAgwqAg
wqAgwqA8bW9kZT53YXI8L21vZGU+Cj4gwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqA8dXJsPmh0
dHA6Ly8xMC4xMi40LjYvbWFuYWdlcjwvdXJsPgo+IMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKg
PGZhaWxPbkVycm9yPnRydWU8L2ZhaWxPbkVycm9yPgo+IMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKg
IMKgPGNoYXJzZXQ+VVRGLTg8L2NoYXJzZXQ+Cj4gwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqA8
dXJpRW5jb2Rpbmc+VVRGLTg8L3VyaUVuY29kaW5nPgo+IMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKg
IMKgPHByb3RvY29sPkhUVFAvMS4xPC9wcm90b2NvbD4KPiDCoCDCoCDCoCDCoCDCoCDCoCDCoCDC
oCDCoDx1cGRhdGU+dHJ1ZTwvdXBkYXRlPgo+IMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgPHNl
cnZlcj5zdGFnZTA2PC9zZXJ2ZXI+Cj4gwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqA8L2NvbmZpZ3Vy
YXRpb24+Cj4gwqAgwqAgwqAgwqAgwqAgwqAgwqA8L2V4ZWN1dGlvbj4KPiDCoCDCoCDCoCDCoCDC
oCDCoDwvZXhlY3V0aW9ucz4KPiDCoCDCoCDCoCDCoCDCoDwvcGx1Z2luPgo+IC0tCj4gSmVmZiBW
aW5jZW50Cj4gcHJlZGF0b3J2aUBnbWFpbC5jb20KPiBTZWUgbXkgTGlua2VkSW4gcHJvZmlsZSBh
dDoKPiBodHRwOi8vd3d3LmxpbmtlZGluLmNvbS9pbi9yamVmZnJleXZpbmNlbnQKPiBJIOKZpSBE
cm9wQm94IDxodHRwOi8vZGIudHQvOU82TGZCWD4gISEKCgoKLS0gCk9saXZpZXIgTGFteQpUYWxl
bmQ6IGh0dHA6Ly9jb2RlcnMudGFsZW5kLmNvbQpodHRwOi8vdHdpdHRlci5jb20vb2xhbXkgfCBo
dHRwOi8vbGlua2VkaW4uY29tL2luL29sYW15Cg==
DQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IHVzZXJzLXVuc3Vi
c2NyaWJlQHRvbWNhdC5hcGFjaGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1t
YWlsOiB1c2Vycy1oZWxwQHRvbWNhdC5hcGFjaGUub3JnDQoN

From users-return-233688-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 22:57:50 2012
Return-Path: <users-return-233688-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 34FB69906
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 22:57:50 +0000 (UTC)
Received: (qmail 64357 invoked by uid 500); 19 Apr 2012 22:57:46 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 64309 invoked by uid 500); 19 Apr 2012 22:57:46 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 64295 invoked by uid 99); 19 Apr 2012 22:57:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 22:57:46 +0000
X-ASF-Spam-Status: No, hits=0.3 required=5.0
	tests=PLING_QUERY,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dilipvshah@hotmail.com designates 65.55.111.105 as permitted sender)
Received: from [65.55.111.105] (HELO blu0-omc2-s30.blu0.hotmail.com) (65.55.111.105)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 22:57:39 +0000
Received: from BLU162-DS9 ([65.55.111.73]) by blu0-omc2-s30.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Thu, 19 Apr 2012 15:57:18 -0700
X-Originating-IP: [24.5.178.208]
X-Originating-Email: [dilipvshah@hotmail.com]
Message-ID: <BLU162-ds96AF12B0432754A29B6A7D33D0@phx.gbl>
From: "Dilip Shah" <dilipvshah@hotmail.com>
To: "Tomcat Users List" <users@tomcat.apache.org>
References: <BLU162-ds6E297DD17A3D09D5BD1B2D33D0@phx.gbl><CABzHfVmsp+bAXkBhjkdTdwVex85okAvWb=zFsChGcOndhBuFdw@mail.gmail.com><BLU162-ds12FB2B965DCCC1C6B5D679D33D0@phx.gbl> <CABzHfV=bBjRigDG6wk_L4RY=QmpgCPxOWmXtbb1Xoy+++6Ndpw@mail.gmail.com>
In-Reply-To: <CABzHfV=bBjRigDG6wk_L4RY=QmpgCPxOWmXtbb1Xoy+++6Ndpw@mail.gmail.com>
Subject: Re: catalina.out file is growing very rapidly! How to prevent Hibernate's INFO and DEBUG statements from getting added to catalina.out file?
Date: Thu, 19 Apr 2012 15:57:18 -0700
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 14.0.8117.416
X-MimeOLE: Produced By Microsoft MimeOLE V14.0.8117.416
X-OriginalArrivalTime: 19 Apr 2012 22:57:18.0455 (UTC) FILETIME=[C55DC870:01CD1E7F]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Konstantin,

I checked all the jar files I added to common/lib and none of them have 
log4j.properties file at the root location.

I get your suggestion on putting application specific jar files in the 
application's WEB-INF/lib folder... I'll go ahead and take care of it.

The application's web.xml:
====================
<web-app
	id="WebApp_ID"
	version="2.4"
	xmlns="http://java.sun.com/xml/ns/j2ee"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee
	http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"
	>

	<display-name>Smart Cloud Learning</display-name>
	<description>Smart Cloud Learning Application</description>

	<!-- The front controller of this Spring Web application,
		responsible for handling all application requests -->
	<servlet>
		<servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
		<servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
		<load-on-startup>1</load-on-startup>
		<init-param>
			<param-name>contextConfigLocation</param-name>
			<param-value>/WEB-INF/applicationContext.xml</param-value>
		</init-param>
	</servlet>

	<!-- Map all spring/* requests to the DispatcherServlet for handling -->
	<servlet-mapping>
		<servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
		<url-pattern>/rest/*</url-pattern>
	</servlet-mapping>

	<listener>
		<listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
	</listener>
</web-app>


applicationContext.xml:
=================
<beans
	xmlns="http://www.springframework.org/schema/beans"
	xmlns:context="http://www.springframework.org/schema/context"
	xmlns:mvc="http://www.springframework.org/schema/mvc"
	xmlns:tx="http://www.springframework.org/schema/tx"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
		http://www.springframework.org/schema/tx
		http://www.springframework.org/schema/tx/spring-tx-2.5.xsd
        ">

	<context:component-scan base-package="com.knownomy.scl">
	     <context:include-filter type="aspectj" expression="com.knownomy.scl.*" 
/>
	</context:component-scan>

	<mvc:annotation-driven />

	<!-- START Load application properties -->
	<bean id="propertyConfigurer"
		class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
		<property 
name="location"><value>WEB-INF/application.properties</value></property>
	</bean>

	<!-- Data source configuration -->
	<bean
		id="dataSource"
		class="com.mchange.v2.c3p0.ComboPooledDataSource">
		<property
			name="driverClass"
			value="${jdbc.driverClassName}"/>
		<property
			name="jdbcUrl"
			value="${jdbc.url}"/>
		<property
			name="user"
			value="${jdbc.username}"/>
		<property
			name="password"
			value="${jdbc.password}"/>
		<property
			name="minPoolSize">
			<value>${hibernate.c3p0.min_size}</value>
			</property>
		<property
			name="maxPoolSize">
			<value>${hibernate.c3p0.max_size}</value>
			</property>
		<property
			name="acquireRetryAttempts">
			<value>10</value>
			</property>
		<property
			name="acquireIncrement">
			<value>${hibernate.c3p0.acquire_increment}</value>
			</property>
		<property
			name="idleConnectionTestPeriod">
			<value>${hibernate.c3p0.idle_test_period}</value>
			</property>
		<property
			name="maxIdleTime">
			<value>${hibernate.c3p0.timeout}</value>
			</property>
		<property
			name="preferredTestQuery">
			<value>SELECT 1</value>
			</property>
		<property
			name="testConnectionOnCheckin">
			<value>false</value>
			</property>
	</bean>

	<!-- START HIBERNATE CONFIG -->
	<!-- Configure SessionFactory -->
	<bean
		id="sessionFactory"
		class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
		<property
			name="dataSource"
			ref="dataSource" />
		<property name="hibernateProperties">
			<props>
				<prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
				<prop key="hibernate.format_sql">${hibernate.format_sql}</prop>
				<prop 
key="hibernate.transaction.factory_class">${hibernate.transaction.factory_class}</prop>
				<prop key="hibernate.dialect">${hibernate.dialect}</prop>
				<prop key="hibernate.c3p0.min_size">${hibernate.c3p0.min_size}</prop>
				<prop key="hibernate.c3p0.max_size">${hibernate.c3p0.max_size}</prop>
				<prop 
key="hibernate.c3p0.acquire_increment">${hibernate.c3p0.acquire_increment}</prop>
				<prop key="hibernate.c3p0.timeout">${hibernate.c3p0.timeout}</prop>
				<prop 
key="hibernate.c3p0.max_statements">${hibernate.c3p0.max_statements}</prop>
				<prop 
key="hibernate.c3p0.idle_test_period">${hibernate.c3p0.idle_test_period}</prop>
			</props>
		</property>

		<property name="annotatedClasses">
			<list>
				<value>com.knownomy.scl.appcommon.domain.Language</value>
				<value>com.knownomy.scl.appcommon.domain.Syllabus</value>
				<value>com.knownomy.scl.appcommon.domain.Country</value>
				<value>com.knownomy.scl.appcommon.domain.State</value>
				<value>com.knownomy.scl.appcommon.domain.Grade</value>
				<value>com.knownomy.scl.appcommon.domain.Subject</value>
				<value>com.knownomy.scl.appcommon.domain.EmbeddedImage</value>
				<value>com.knownomy.scl.appcommon.domain.PageSetup</value>

			</list>
		</property>

	</bean>

	<!-- enable the configuration of transactional behavior based on 
annotations -->
	<tx:annotation-driven transaction-manager="txManager"/>

	<bean id="txManager" 
class="org.springframework.orm.hibernate3.HibernateTransactionManager">
		<property name="sessionFactory"><ref local="sessionFactory"/></property>
	</bean>

	<bean 
class="org.springframework.beans.factory.annotation.RequiredAnnotationBeanPostProcessor"/>
	<!-- END HIBERNATE CONFIG -->
</beans>


application.properties:
=================
#  Application Properties
path.webinf=webapps/SmartCloudLearningMobi/WEB-INF
# JDBC Connection information
jdbc.driverClassName=com.mysql.jdbc.Driver
jdbc.url=jdbc:mysql://localhost:3306/databasename?useUnicode=true&characterEncoding=UTF8
jdbc.username=root
jdbc.password=mypassword
###hibernate
hibernate.show_sql=false
hibernate.format_sql=true
hibernate.transaction.factory_class=org.hibernate.transaction.JDBCTransactionFactory
hibernate.dialect=org.hibernate.dialect.MySQLDialect
hibernate.c3p0.min_size=1
hibernate.c3p0.max_size=25
hibernate.c3p0.acquire_increment=5
hibernate.c3p0.timeout=1800
hibernate.c3p0.max_statements=50
hibernate.c3p0.idle_test_period=3600

Thanks,

Dilip

--------------------------------------------------
From: "Konstantin Kolinko" <knst.kolinko@gmail.com>
Sent: Thursday, April 19, 2012 3:21 PM
To: "Tomcat Users List" <users@tomcat.apache.org>
Subject: Re: catalina.out file is growing very rapidly! How to prevent 
Hibernate's INFO and DEBUG statements from getting added to catalina.out 
file?

> 2012/4/20 Dilip Shah <dilipvshah@hotmail.com>:
>> Hi Konstantin,
>>
>> Thanks for the reply!
>>
>> To answer your questions...
>> * Tomcat version info:
>> Server version: Apache Tomcat/5.5.28
>> Server built:   Jul 24 2009 01:33:09
>> Server number:  5.5.28.0
>> OS Name:        Linux
>> OS Version:     2.6.18-53.el5
>> Architecture:   i386
>> JVM Version:    1.6.0_23-ea-b01
>>
>> * Since I'm configuring the application's logging via log4j.properties, I
>> can safely assume that logging is done via Log4j and not JULI, right?
>> Your statement about log formatting also seems to suggest the same. Let 
>> me
>> know if I interpreted your statement incorrectly.
>
> OK.
> The problem is that something configured logging for you  (e.g. by
> providing its own copy of configuration file).
>
> One example of such bad library is mentioned here:
> https://issues.apache.org/bugzilla/show_bug.cgi?id=52011
>
> IIRC Log4j supports 2 configuration file names: log4j.properties and
> log4j.xml. See Log4J documentation for details.
>
> Search whether some of jars that you added has such a file. If they
> are in commons/lib it means that Tomcat sees them.
>
>>
>> * The changes I made to the application:
>> - I implemented Spring view controller (for the first time) and in the
>> process added @Autowired, @JsonIgnore through the code
>> - in the process of getting jSON output to the client, I added the 
>> following
>> jar files to common/lib
>
> Adding them to common/lib is a bad idea (a way to jar hell).
>
> You'd better put them into your app's WEB-INF/lib.
>
>> aspectjtools-1.5.4.jar
>> bval-core-0.3-incubating.jar
>> hibernate-validator-4.1.0.Final.jar
>> jackson-core-asl-1.6.4.jar
>> jackson-mapper-asl-1.6.4.jar
>> joda-time-1.6.2.jar
>> joda-time-jsptags-1.0.2.jar
>> jstl-1.2.jar
>> validation-api-1.0.0.GA.jar
>>
>> I suspect packages in one or more of these jar files is generating these
>> INFO and DEBUG log entries in catalina.out
>>
>> * The application's log4j.properties file is in the application's
>> WEB-INF/classes folder
>>
>
> What is in your configuration file?
>
> Best regards,
> Konstantin Kolinko
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233689-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 23:22:15 2012
Return-Path: <users-return-233689-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 359769F14
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 23:22:15 +0000 (UTC)
Received: (qmail 28143 invoked by uid 500); 19 Apr 2012 23:22:11 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 28079 invoked by uid 500); 19 Apr 2012 23:22:11 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 28065 invoked by uid 99); 19 Apr 2012 23:22:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 23:22:11 +0000
X-ASF-Spam-Status: No, hits=0.3 required=5.0
	tests=PLING_QUERY,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dilipvshah@hotmail.com designates 65.55.111.101 as permitted sender)
Received: from [65.55.111.101] (HELO blu0-omc2-s26.blu0.hotmail.com) (65.55.111.101)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 23:22:04 +0000
Received: from BLU162-DS18 ([65.55.111.72]) by blu0-omc2-s26.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Thu, 19 Apr 2012 16:21:43 -0700
X-Originating-IP: [24.5.178.208]
X-Originating-Email: [dilipvshah@hotmail.com]
Message-ID: <BLU162-ds184A4616683B70E86F7FFAD33D0@phx.gbl>
From: "Dilip Shah" <dilipvshah@hotmail.com>
To: "Tomcat Users List" <users@tomcat.apache.org>
Subject: Re: catalina.out file is growing very rapidly! How to prevent Hibernate's INFO and DEBUG statements from getting added to catalina.out file?
Date: Thu, 19 Apr 2012 16:21:43 -0700
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 14.0.8117.416
X-MimeOLE: Produced By Microsoft MimeOLE V14.0.8117.416
X-OriginalArrivalTime: 19 Apr 2012 23:21:43.0291 (UTC) FILETIME=[2E7A04B0:01CD1E83]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Konstantin,

I went through all 105 jar files (between common/lib and the application's 
WEB-INF/lib) and didn't find any of the jar having log4j.properties or 
log4j.xml at the root.

This is just some additional information.

Dilip


--------------------------------------------------
From: "Dilip Shah" <dilipvshah@hotmail.com>
Sent: Thursday, April 19, 2012 3:57 PM
To: "Tomcat Users List" <users@tomcat.apache.org>
Subject: Re: catalina.out file is growing very rapidly! How to prevent 
Hibernate's INFO and DEBUG statements from getting added to catalina.out 
file?

> Hi Konstantin,
>
> I checked all the jar files I added to common/lib and none of them have 
> log4j.properties file at the root location.
>
> I get your suggestion on putting application specific jar files in the 
> application's WEB-INF/lib folder... I'll go ahead and take care of it.
>
> The application's web.xml:
> ====================
> <web-app
> id="WebApp_ID"
> version="2.4"
> xmlns="http://java.sun.com/xml/ns/j2ee"
> xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
> xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee
> http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"
> >
>
> <display-name>Smart Cloud Learning</display-name>
> <description>Smart Cloud Learning Application</description>
>
> <!-- The front controller of this Spring Web application,
> responsible for handling all application requests -->
> <servlet>
> <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
> <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
> <load-on-startup>1</load-on-startup>
> <init-param>
> <param-name>contextConfigLocation</param-name>
> <param-value>/WEB-INF/applicationContext.xml</param-value>
> </init-param>
> </servlet>
>
> <!-- Map all spring/* requests to the DispatcherServlet for handling -->
> <servlet-mapping>
> <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
> <url-pattern>/rest/*</url-pattern>
> </servlet-mapping>
>
> <listener>
> <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
> </listener>
> </web-app>
>
>
> applicationContext.xml:
> =================
> <beans
> xmlns="http://www.springframework.org/schema/beans"
> xmlns:context="http://www.springframework.org/schema/context"
> xmlns:mvc="http://www.springframework.org/schema/mvc"
> xmlns:tx="http://www.springframework.org/schema/tx"
> xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
> xsi:schemaLocation="
>        http://www.springframework.org/schema/beans
>        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
>        http://www.springframework.org/schema/context
> 
> http://www.springframework.org/schema/context/spring-context-3.0.xsd
>        http://www.springframework.org/schema/mvc
>        http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
> http://www.springframework.org/schema/tx
> http://www.springframework.org/schema/tx/spring-tx-2.5.xsd
>        ">
>
> <context:component-scan base-package="com.knownomy.scl">
>      <context:include-filter type="aspectj" 
> expression="com.knownomy.scl.*" />
> </context:component-scan>
>
> <mvc:annotation-driven />
>
> <!-- START Load application properties -->
> <bean id="propertyConfigurer"
> class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
> <property 
> name="location"><value>WEB-INF/application.properties</value></property>
> </bean>
>
> <!-- Data source configuration -->
> <bean
> id="dataSource"
> class="com.mchange.v2.c3p0.ComboPooledDataSource">
> <property
> name="driverClass"
> value="${jdbc.driverClassName}"/>
> <property
> name="jdbcUrl"
> value="${jdbc.url}"/>
> <property
> name="user"
> value="${jdbc.username}"/>
> <property
> name="password"
> value="${jdbc.password}"/>
> <property
> name="minPoolSize">
> <value>${hibernate.c3p0.min_size}</value>
> </property>
> <property
> name="maxPoolSize">
> <value>${hibernate.c3p0.max_size}</value>
> </property>
> <property
> name="acquireRetryAttempts">
> <value>10</value>
> </property>
> <property
> name="acquireIncrement">
> <value>${hibernate.c3p0.acquire_increment}</value>
> </property>
> <property
> name="idleConnectionTestPeriod">
> <value>${hibernate.c3p0.idle_test_period}</value>
> </property>
> <property
> name="maxIdleTime">
> <value>${hibernate.c3p0.timeout}</value>
> </property>
> <property
> name="preferredTestQuery">
> <value>SELECT 1</value>
> </property>
> <property
> name="testConnectionOnCheckin">
> <value>false</value>
> </property>
> </bean>
>
> <!-- START HIBERNATE CONFIG -->
> <!-- Configure SessionFactory -->
> <bean
> id="sessionFactory"
> class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
> <property
> name="dataSource"
> ref="dataSource" />
> <property name="hibernateProperties">
> <props>
> <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
> <prop key="hibernate.format_sql">${hibernate.format_sql}</prop>
> <prop 
> key="hibernate.transaction.factory_class">${hibernate.transaction.factory_class}</prop>
> <prop key="hibernate.dialect">${hibernate.dialect}</prop>
> <prop key="hibernate.c3p0.min_size">${hibernate.c3p0.min_size}</prop>
> <prop key="hibernate.c3p0.max_size">${hibernate.c3p0.max_size}</prop>
> <prop 
> key="hibernate.c3p0.acquire_increment">${hibernate.c3p0.acquire_increment}</prop>
> <prop key="hibernate.c3p0.timeout">${hibernate.c3p0.timeout}</prop>
> <prop 
> key="hibernate.c3p0.max_statements">${hibernate.c3p0.max_statements}</prop>
> <prop 
> key="hibernate.c3p0.idle_test_period">${hibernate.c3p0.idle_test_period}</prop>
> </props>
> </property>
>
> <property name="annotatedClasses">
> <list>
> <value>com.knownomy.scl.appcommon.domain.Language</value>
> <value>com.knownomy.scl.appcommon.domain.Syllabus</value>
> <value>com.knownomy.scl.appcommon.domain.Country</value>
> <value>com.knownomy.scl.appcommon.domain.State</value>
> <value>com.knownomy.scl.appcommon.domain.Grade</value>
> <value>com.knownomy.scl.appcommon.domain.Subject</value>
> <value>com.knownomy.scl.appcommon.domain.EmbeddedImage</value>
> <value>com.knownomy.scl.appcommon.domain.PageSetup</value>
>
> </list>
> </property>
>
> </bean>
>
> <!-- enable the configuration of transactional behavior based on 
> annotations -->
> <tx:annotation-driven transaction-manager="txManager"/>
>
> <bean id="txManager" 
> class="org.springframework.orm.hibernate3.HibernateTransactionManager">
> <property name="sessionFactory"><ref local="sessionFactory"/></property>
> </bean>
>
> <bean 
> class="org.springframework.beans.factory.annotation.RequiredAnnotationBeanPostProcessor"/>
> <!-- END HIBERNATE CONFIG -->
> </beans>
>
>
> application.properties:
> =================
> #  Application Properties
> path.webinf=webapps/SmartCloudLearningMobi/WEB-INF
> # JDBC Connection information
> jdbc.driverClassName=com.mysql.jdbc.Driver
> jdbc.url=jdbc:mysql://localhost:3306/databasename?useUnicode=true&characterEncoding=UTF8
> jdbc.username=root
> jdbc.password=mypassword
> ###hibernate
> hibernate.show_sql=false
> hibernate.format_sql=true
> hibernate.transaction.factory_class=org.hibernate.transaction.JDBCTransactionFactory
> hibernate.dialect=org.hibernate.dialect.MySQLDialect
> hibernate.c3p0.min_size=1
> hibernate.c3p0.max_size=25
> hibernate.c3p0.acquire_increment=5
> hibernate.c3p0.timeout=1800
> hibernate.c3p0.max_statements=50
> hibernate.c3p0.idle_test_period=3600
>
> Thanks,
>
> Dilip
>
> --------------------------------------------------
> From: "Konstantin Kolinko" <knst.kolinko@gmail.com>
> Sent: Thursday, April 19, 2012 3:21 PM
> To: "Tomcat Users List" <users@tomcat.apache.org>
> Subject: Re: catalina.out file is growing very rapidly! How to prevent 
> Hibernate's INFO and DEBUG statements from getting added to catalina.out 
> file?
>
>> 2012/4/20 Dilip Shah <dilipvshah@hotmail.com>:
>>> Hi Konstantin,
>>>
>>> Thanks for the reply!
>>>
>>> To answer your questions...
>>> * Tomcat version info:
>>> Server version: Apache Tomcat/5.5.28
>>> Server built:   Jul 24 2009 01:33:09
>>> Server number:  5.5.28.0
>>> OS Name:        Linux
>>> OS Version:     2.6.18-53.el5
>>> Architecture:   i386
>>> JVM Version:    1.6.0_23-ea-b01
>>>
>>> * Since I'm configuring the application's logging via log4j.properties, 
>>> I
>>> can safely assume that logging is done via Log4j and not JULI, right?
>>> Your statement about log formatting also seems to suggest the same. Let 
>>> me
>>> know if I interpreted your statement incorrectly.
>>
>> OK.
>> The problem is that something configured logging for you  (e.g. by
>> providing its own copy of configuration file).
>>
>> One example of such bad library is mentioned here:
>> https://issues.apache.org/bugzilla/show_bug.cgi?id=52011
>>
>> IIRC Log4j supports 2 configuration file names: log4j.properties and
>> log4j.xml. See Log4J documentation for details.
>>
>> Search whether some of jars that you added has such a file. If they
>> are in commons/lib it means that Tomcat sees them.
>>
>>>
>>> * The changes I made to the application:
>>> - I implemented Spring view controller (for the first time) and in the
>>> process added @Autowired, @JsonIgnore through the code
>>> - in the process of getting jSON output to the client, I added the 
>>> following
>>> jar files to common/lib
>>
>> Adding them to common/lib is a bad idea (a way to jar hell).
>>
>> You'd better put them into your app's WEB-INF/lib.
>>
>>> aspectjtools-1.5.4.jar
>>> bval-core-0.3-incubating.jar
>>> hibernate-validator-4.1.0.Final.jar
>>> jackson-core-asl-1.6.4.jar
>>> jackson-mapper-asl-1.6.4.jar
>>> joda-time-1.6.2.jar
>>> joda-time-jsptags-1.0.2.jar
>>> jstl-1.2.jar
>>> validation-api-1.0.0.GA.jar
>>>
>>> I suspect packages in one or more of these jar files is generating these
>>> INFO and DEBUG log entries in catalina.out
>>>
>>> * The application's log4j.properties file is in the application's
>>> WEB-INF/classes folder
>>>
>>
>> What is in your configuration file?
>>
>> Best regards,
>> Konstantin Kolinko
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>> For additional commands, e-mail: users-help@tomcat.apache.org
>>
>> 

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233690-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 23:38:25 2012
Return-Path: <users-return-233690-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AECF9916B
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 23:38:25 +0000 (UTC)
Received: (qmail 64866 invoked by uid 500); 19 Apr 2012 23:38:22 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 64779 invoked by uid 500); 19 Apr 2012 23:38:22 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 64767 invoked by uid 99); 19 Apr 2012 23:38:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 23:38:22 +0000
X-ASF-Spam-Status: No, hits=2.9 required=5.0
	tests=HTML_IMAGE_ONLY_28,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of leejaemannet@naver.com designates 202.179.177.200 as permitted sender)
Received: from [202.179.177.200] (HELO tmailpost22-2.nm.naver.com) (202.179.177.200)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 19 Apr 2012 23:38:17 +0000
Received: (qmail 9972 invoked from network); 19 Apr 2012 23:37:55 -0000
Received: from 114.111.40.149 (HELO tweb109-2.nm.nhnsystem.com) (114.111.40.149)
  by tmailpost22-2.nm.naver.com with SMTP; 19 Apr 2012 23:37:55 -0000
Date: Fri, 20 Apr 2012 08:37:54 +0900 (KST)
From: =?UTF-8?B?7J207J6s66eM?= <leejaemannet@naver.com>
Reply-To: =?UTF-8?B?7J207J6s66eM?= <leejaemannet@naver.com>
To: Tomcat Users List <users@tomcat.apache.org>
Message-ID: <453022e4778e82432b42a4c9dcbc2bd7@tweb109-2.nm.nhnsystem.com>
In-Reply-To: <4F9039FE.2030304@christopherschultz.net>
References: <ea3af05622e4c1ba3d605731c5ebb98@tweb115-2.nm.nhnsystem.com>
	<4F9039FE.2030304@christopherschultz.net>
Subject: Re: dbcp datasource encryption
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_57137_987536019.1334878675254"
Importance: normal
X-Priority: 3 (Normal)
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_57137_987536019.1334878675254
Content-Type: text/plain;
	charset=UTF-8
Content-Transfer-Encoding: base64

dGhhbmtzLi4KCiAKCmkgd2FudCB0byBlbmNyeXB0IHBhc3N3b3JkIGFuZCBkYXRhYmFzZSBpbiBt
eSAmbHQ7UmVzb3VyY2UmZ3Q7IGVsZW1lbnQuCgpwbGVhc2UgZ2l2ZSBtZSBhIHNvbWUgaW1mb3Jt
YXRpb24gYWJvdXQgaXQuCgoKIAoKLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0KRnJvbTogIkNo
cmlzdG9waGVyIFNjaHVsdHoiJmx0O2NocmlzQGNocmlzdG9waGVyc2NodWx0ei5uZXQmZ3Q7IApU
bzogIlRvbWNhdCBVc2VycyBMaXN0IiZsdDt1c2Vyc0B0b21jYXQuYXBhY2hlLm9yZyZndDs7IApD
YzogClNlbnQ6IDIwMTItMDQtMjAgKOq4iCkgMDE6MTQ6NTQKU3ViamVjdDogUmU6IGRiY3AgZGF0
YXNvdXJjZSBlbmNyeXB0aW9uCgotLS0tLUJFR0lOIFBHUCBTSUdORUQgTUVTU0FHRS0tLS0tCkhh
c2g6IFNIQTEKCuydtOyerOunjCwKCk9uIDQvMTkvMTIgMjowNyBBTSwg7J207J6s66eMIHdyb3Rl
OgomZ3Q7IGkgYW0gb3BlcmF0aW5nIHdlYnNpdGUgb24gdG9tY2F0NiBhbmQgdG9tY2F0NwomZ3Q7
IAomZ3Q7IGFuZCBpIHVzZWQgZGJjcCBhcyBkYXRhc291cmNlIG9uIHRvbWNhdDcgc28gaSB3YW50
IHRvIGVuY3J5cHQgZGJjcCAKJmd0OyBkYXRhc291cmNlCiZndDsgCiZndDsgaG93IGRvIGkgZW5j
cnlwdCBteSBkYmNwIGRhdGFzb3VyY2UgLi4gcGxhc2UgZ2l2ZSBtZSBzb21lCiZndDsgc2FtcGxl
cy4uIHRoYW5rcy4KCkl0J3Mgbm90IGNsZWFyIHdoYXQgeW91IGFyZSB0cnlpbmcgdG8gZG86CgpB
cmUgeW91IHRyeWluZyB0byBlbmNyeXB0IHlvdXIgZGF0YSBpbiB0aGUgZGF0YWJhc2U/CkFyZSB5
b3UgdHJ5aW5nIHRvIGVuY3J5cHQgeW91ciBjb25uZWN0aW9uIHRvIHlvdXIgZGF0YWJhc2U/CkFy
ZSB5b3UgdHJ5aW5nIHRvIGVuY3J5cHQgdGhlIHBhc3N3b3JkIHRvIHlvdXIgZGF0YWJhc2UgaW4g
eW91cgombHQ7UmVzb3VyY2UmZ3Q7IGVsZW1lbnQ/CgotIC1jaHJpcwotLS0tLUJFR0lOIFBHUCBT
SUdOQVRVUkUtLS0tLQpWZXJzaW9uOiBHbnVQRy9NYWNHUEcyIHYyLjAuMTcgKERhcndpbikKQ29t
bWVudDogR1BHVG9vbHMgLSBodHRwOi8vZ3BndG9vbHMub3JnCkNvbW1lbnQ6IFVzaW5nIEdudVBH
IHdpdGggTW96aWxsYSAtIGh0dHA6Ly9lbmlnbWFpbC5tb3pkZXYub3JnLwoKaUVZRUFSRUNBQVlG
QWsrUU9mNEFDZ2tROUNhTzUvTHYwUEJIb2dDZ2diM3dkdnBpWU1SUWZrZ3M5dldKOUxBOQpUN2NB
bjBnMzFDQTZQdVQzZFpPVmR0RmMyQlltVlJaSwo9cmE5TgotLS0tLUVORCBQR1AgU0lHTkFUVVJF
LS0tLS0KCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLQpUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiB1c2Vycy11bnN1YnNj
cmliZUB0b21jYXQuYXBhY2hlLm9yZwpGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiB1
c2Vycy1oZWxwQHRvbWNhdC5hcGFjaGUub3JnCgoKCgo=
------=_Part_57137_987536019.1334878675254--

From users-return-233691-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 19 23:43:42 2012
Return-Path: <users-return-233691-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C855695D0
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 19 Apr 2012 23:43:42 +0000 (UTC)
Received: (qmail 79125 invoked by uid 500); 19 Apr 2012 23:43:39 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 79055 invoked by uid 500); 19 Apr 2012 23:43:39 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 79044 invoked by uid 99); 19 Apr 2012 23:43:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 23:43:39 +0000
X-ASF-Spam-Status: No, hits=0.3 required=5.0
	tests=PLING_QUERY,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dilipvshah@hotmail.com designates 65.55.111.93 as permitted sender)
Received: from [65.55.111.93] (HELO blu0-omc2-s18.blu0.hotmail.com) (65.55.111.93)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 Apr 2012 23:43:33 +0000
Received: from BLU162-DS18 ([65.55.111.71]) by blu0-omc2-s18.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Thu, 19 Apr 2012 16:43:12 -0700
X-Originating-IP: [24.5.178.208]
X-Originating-Email: [dilipvshah@hotmail.com]
Message-ID: <BLU162-ds182B349F37636714AC2D52D33D0@phx.gbl>
From: "Dilip Shah" <dilipvshah@hotmail.com>
To: "Tomcat Users List" <users@tomcat.apache.org>
Subject: Re: catalina.out file is growing very rapidly! How to prevent Hibernate's INFO and DEBUG statements from getting added to catalina.out file?
Date: Thu, 19 Apr 2012 16:43:12 -0700
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 14.0.8117.416
X-MimeOLE: Produced By Microsoft MimeOLE V14.0.8117.416
X-OriginalArrivalTime: 19 Apr 2012 23:43:12.0069 (UTC) FILETIME=[2EA5EF50:01CD1E86]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Konstantin,

According to http://www.mulesoft.com/tomcat-logging , to make sure my Log4j 
configuration is complete, I should have tomcat-juli.jar and 
tomcat-juli-adapters.jar files in $CATALINA_HOME/bin/
whereas, I have just the default tomcat-juli.jar that comes with Tomcat.
I tried to get hold of these files from Tomcat download site's bin/extras 
for version 5.5.28 but I don't see any 'extras' folder / compressed file.
Do you think this could be a problem and if so, would you know where I can 
get hold of these 2 jar files?


Also, my server's catalina.sh has the following:
# Set juli LogManager if it is present
if [ -r "$CATALINA_HOME"/bin/tomcat-juli.jar ]; then
  JAVA_OPTS="$JAVA_OPTS -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager"
  LOGGING_CONFIG="-Djava.util.logging.config.file=$CATALINA_BASE/conf/logging.properties"
else
  # Bugzilla 45585
  LOGGING_CONFIG="-Dnop"
fi


and I do have tomcat-juli.jar in $CATALINA_HOME/bin/
Should I remove these lines from the catalina.sh file?

Thanks,

Dilip

--------------------------------------------------
From: "Dilip Shah" <dilipvshah@hotmail.com>
Sent: Thursday, April 19, 2012 4:21 PM
To: "Tomcat Users List" <users@tomcat.apache.org>
Subject: Re: catalina.out file is growing very rapidly! How to prevent 
Hibernate's INFO and DEBUG statements from getting added to catalina.out 
file?

> Hi Konstantin,
>
> I went through all 105 jar files (between common/lib and the application's 
> WEB-INF/lib) and didn't find any of the jar having log4j.properties or 
> log4j.xml at the root.
>
> This is just some additional information.
>
> Dilip
>
>
> --------------------------------------------------
> From: "Dilip Shah" <dilipvshah@hotmail.com>
> Sent: Thursday, April 19, 2012 3:57 PM
> To: "Tomcat Users List" <users@tomcat.apache.org>
> Subject: Re: catalina.out file is growing very rapidly! How to prevent 
> Hibernate's INFO and DEBUG statements from getting added to catalina.out 
> file?
>
>> Hi Konstantin,
>>
>> I checked all the jar files I added to common/lib and none of them have 
>> log4j.properties file at the root location.
>>
>> I get your suggestion on putting application specific jar files in the 
>> application's WEB-INF/lib folder... I'll go ahead and take care of it.
>>
>> The application's web.xml:
>> ====================
>> <web-app
>> id="WebApp_ID"
>> version="2.4"
>> xmlns="http://java.sun.com/xml/ns/j2ee"
>> xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
>> xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee
>> http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"
>> >
>>
>> <display-name>Smart Cloud Learning</display-name>
>> <description>Smart Cloud Learning Application</description>
>>
>> <!-- The front controller of this Spring Web application,
>> responsible for handling all application requests -->
>> <servlet>
>> <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
>> <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
>> <load-on-startup>1</load-on-startup>
>> <init-param>
>> <param-name>contextConfigLocation</param-name>
>> <param-value>/WEB-INF/applicationContext.xml</param-value>
>> </init-param>
>> </servlet>
>>
>> <!-- Map all spring/* requests to the DispatcherServlet for handling -->
>> <servlet-mapping>
>> <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
>> <url-pattern>/rest/*</url-pattern>
>> </servlet-mapping>
>>
>> <listener>
>> <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
>> </listener>
>> </web-app>
>>
>>
>> applicationContext.xml:
>> =================
>> <beans
>> xmlns="http://www.springframework.org/schema/beans"
>> xmlns:context="http://www.springframework.org/schema/context"
>> xmlns:mvc="http://www.springframework.org/schema/mvc"
>> xmlns:tx="http://www.springframework.org/schema/tx"
>> xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
>> xsi:schemaLocation="
>>        http://www.springframework.org/schema/beans
>>        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
>>        http://www.springframework.org/schema/context
>>
>> http://www.springframework.org/schema/context/spring-context-3.0.xsd
>>        http://www.springframework.org/schema/mvc
>>        http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
>> http://www.springframework.org/schema/tx
>> http://www.springframework.org/schema/tx/spring-tx-2.5.xsd
>>        ">
>>
>> <context:component-scan base-package="com.knownomy.scl">
>>      <context:include-filter type="aspectj" 
>> expression="com.knownomy.scl.*" />
>> </context:component-scan>
>>
>> <mvc:annotation-driven />
>>
>> <!-- START Load application properties -->
>> <bean id="propertyConfigurer"
>> class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
>> <property 
>> name="location"><value>WEB-INF/application.properties</value></property>
>> </bean>
>>
>> <!-- Data source configuration -->
>> <bean
>> id="dataSource"
>> class="com.mchange.v2.c3p0.ComboPooledDataSource">
>> <property
>> name="driverClass"
>> value="${jdbc.driverClassName}"/>
>> <property
>> name="jdbcUrl"
>> value="${jdbc.url}"/>
>> <property
>> name="user"
>> value="${jdbc.username}"/>
>> <property
>> name="password"
>> value="${jdbc.password}"/>
>> <property
>> name="minPoolSize">
>> <value>${hibernate.c3p0.min_size}</value>
>> </property>
>> <property
>> name="maxPoolSize">
>> <value>${hibernate.c3p0.max_size}</value>
>> </property>
>> <property
>> name="acquireRetryAttempts">
>> <value>10</value>
>> </property>
>> <property
>> name="acquireIncrement">
>> <value>${hibernate.c3p0.acquire_increment}</value>
>> </property>
>> <property
>> name="idleConnectionTestPeriod">
>> <value>${hibernate.c3p0.idle_test_period}</value>
>> </property>
>> <property
>> name="maxIdleTime">
>> <value>${hibernate.c3p0.timeout}</value>
>> </property>
>> <property
>> name="preferredTestQuery">
>> <value>SELECT 1</value>
>> </property>
>> <property
>> name="testConnectionOnCheckin">
>> <value>false</value>
>> </property>
>> </bean>
>>
>> <!-- START HIBERNATE CONFIG -->
>> <!-- Configure SessionFactory -->
>> <bean
>> id="sessionFactory"
>> class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
>> <property
>> name="dataSource"
>> ref="dataSource" />
>> <property name="hibernateProperties">
>> <props>
>> <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
>> <prop key="hibernate.format_sql">${hibernate.format_sql}</prop>
>> <prop 
>> key="hibernate.transaction.factory_class">${hibernate.transaction.factory_class}</prop>
>> <prop key="hibernate.dialect">${hibernate.dialect}</prop>
>> <prop key="hibernate.c3p0.min_size">${hibernate.c3p0.min_size}</prop>
>> <prop key="hibernate.c3p0.max_size">${hibernate.c3p0.max_size}</prop>
>> <prop 
>> key="hibernate.c3p0.acquire_increment">${hibernate.c3p0.acquire_increment}</prop>
>> <prop key="hibernate.c3p0.timeout">${hibernate.c3p0.timeout}</prop>
>> <prop 
>> key="hibernate.c3p0.max_statements">${hibernate.c3p0.max_statements}</prop>
>> <prop 
>> key="hibernate.c3p0.idle_test_period">${hibernate.c3p0.idle_test_period}</prop>
>> </props>
>> </property>
>>
>> <property name="annotatedClasses">
>> <list>
>> <value>com.knownomy.scl.appcommon.domain.Language</value>
>> <value>com.knownomy.scl.appcommon.domain.Syllabus</value>
>> <value>com.knownomy.scl.appcommon.domain.Country</value>
>> <value>com.knownomy.scl.appcommon.domain.State</value>
>> <value>com.knownomy.scl.appcommon.domain.Grade</value>
>> <value>com.knownomy.scl.appcommon.domain.Subject</value>
>> <value>com.knownomy.scl.appcommon.domain.EmbeddedImage</value>
>> <value>com.knownomy.scl.appcommon.domain.PageSetup</value>
>>
>> </list>
>> </property>
>>
>> </bean>
>>
>> <!-- enable the configuration of transactional behavior based on 
>> annotations -->
>> <tx:annotation-driven transaction-manager="txManager"/>
>>
>> <bean id="txManager" 
>> class="org.springframework.orm.hibernate3.HibernateTransactionManager">
>> <property name="sessionFactory"><ref local="sessionFactory"/></property>
>> </bean>
>>
>> <bean 
>> class="org.springframework.beans.factory.annotation.RequiredAnnotationBeanPostProcessor"/>
>> <!-- END HIBERNATE CONFIG -->
>> </beans>
>>
>>
>> application.properties:
>> =================
>> #  Application Properties
>> path.webinf=webapps/SmartCloudLearningMobi/WEB-INF
>> # JDBC Connection information
>> jdbc.driverClassName=com.mysql.jdbc.Driver
>> jdbc.url=jdbc:mysql://localhost:3306/databasename?useUnicode=true&characterEncoding=UTF8
>> jdbc.username=root
>> jdbc.password=mypassword
>> ###hibernate
>> hibernate.show_sql=false
>> hibernate.format_sql=true
>> hibernate.transaction.factory_class=org.hibernate.transaction.JDBCTransactionFactory
>> hibernate.dialect=org.hibernate.dialect.MySQLDialect
>> hibernate.c3p0.min_size=1
>> hibernate.c3p0.max_size=25
>> hibernate.c3p0.acquire_increment=5
>> hibernate.c3p0.timeout=1800
>> hibernate.c3p0.max_statements=50
>> hibernate.c3p0.idle_test_period=3600
>>
>> Thanks,
>>
>> Dilip
>>
>> --------------------------------------------------
>> From: "Konstantin Kolinko" <knst.kolinko@gmail.com>
>> Sent: Thursday, April 19, 2012 3:21 PM
>> To: "Tomcat Users List" <users@tomcat.apache.org>
>> Subject: Re: catalina.out file is growing very rapidly! How to prevent 
>> Hibernate's INFO and DEBUG statements from getting added to catalina.out 
>> file?
>>
>>> 2012/4/20 Dilip Shah <dilipvshah@hotmail.com>:
>>>> Hi Konstantin,
>>>>
>>>> Thanks for the reply!
>>>>
>>>> To answer your questions...
>>>> * Tomcat version info:
>>>> Server version: Apache Tomcat/5.5.28
>>>> Server built:   Jul 24 2009 01:33:09
>>>> Server number:  5.5.28.0
>>>> OS Name:        Linux
>>>> OS Version:     2.6.18-53.el5
>>>> Architecture:   i386
>>>> JVM Version:    1.6.0_23-ea-b01
>>>>
>>>> * Since I'm configuring the application's logging via log4j.properties, 
>>>> I
>>>> can safely assume that logging is done via Log4j and not JULI, right?
>>>> Your statement about log formatting also seems to suggest the same. Let 
>>>> me
>>>> know if I interpreted your statement incorrectly.
>>>
>>> OK.
>>> The problem is that something configured logging for you  (e.g. by
>>> providing its own copy of configuration file).
>>>
>>> One example of such bad library is mentioned here:
>>> https://issues.apache.org/bugzilla/show_bug.cgi?id=52011
>>>
>>> IIRC Log4j supports 2 configuration file names: log4j.properties and
>>> log4j.xml. See Log4J documentation for details.
>>>
>>> Search whether some of jars that you added has such a file. If they
>>> are in commons/lib it means that Tomcat sees them.
>>>
>>>>
>>>> * The changes I made to the application:
>>>> - I implemented Spring view controller (for the first time) and in the
>>>> process added @Autowired, @JsonIgnore through the code
>>>> - in the process of getting jSON output to the client, I added the 
>>>> following
>>>> jar files to common/lib
>>>
>>> Adding them to common/lib is a bad idea (a way to jar hell).
>>>
>>> You'd better put them into your app's WEB-INF/lib.
>>>
>>>> aspectjtools-1.5.4.jar
>>>> bval-core-0.3-incubating.jar
>>>> hibernate-validator-4.1.0.Final.jar
>>>> jackson-core-asl-1.6.4.jar
>>>> jackson-mapper-asl-1.6.4.jar
>>>> joda-time-1.6.2.jar
>>>> joda-time-jsptags-1.0.2.jar
>>>> jstl-1.2.jar
>>>> validation-api-1.0.0.GA.jar
>>>>
>>>> I suspect packages in one or more of these jar files is generating 
>>>> these
>>>> INFO and DEBUG log entries in catalina.out
>>>>
>>>> * The application's log4j.properties file is in the application's
>>>> WEB-INF/classes folder
>>>>
>>>
>>> What is in your configuration file?
>>>
>>> Best regards,
>>> Konstantin Kolinko
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>
>>> 

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233692-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 20 00:26:35 2012
Return-Path: <users-return-233692-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9F67A9192
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 20 Apr 2012 00:26:35 +0000 (UTC)
Received: (qmail 66133 invoked by uid 500); 20 Apr 2012 00:26:32 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 66053 invoked by uid 500); 20 Apr 2012 00:26:32 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 66041 invoked by uid 99); 20 Apr 2012 00:26:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Apr 2012 00:26:32 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.138.91.163] (HELO nm3-vm4.bullet.mail.ne1.yahoo.com) (98.138.91.163)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 20 Apr 2012 00:26:24 +0000
Received: from [98.138.90.52] by nm3.bullet.mail.ne1.yahoo.com with NNFMP; 20 Apr 2012 00:26:03 -0000
Received: from [98.138.86.156] by tm5.bullet.mail.ne1.yahoo.com with NNFMP; 20 Apr 2012 00:26:03 -0000
Received: from [127.0.0.1] by omp1014.mail.ne1.yahoo.com with NNFMP; 20 Apr 2012 00:26:03 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 51708.20135.bm@omp1014.mail.ne1.yahoo.com
Received: (qmail 77101 invoked by uid 60001); 20 Apr 2012 00:26:03 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1334881562; bh=UX76jnODE+C2VcNEbIUi/OR/olsT9TQ+e/vHbhToBYk=; h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=DMPOnhXQrebKCx/qBT93xYaeFv/B4iZ5APyNzJZy4KUERXB0vv5UECrWDUk+rjlwV+Oc92+T4gsopz2BEIvIP3mbrQRedGZv3lnHodjxmxbWldMgfAB/M8zHPb1c+v8l8azKq4MqeA0M9RIp3eZPn4FyIlpbpY/bwVUP7Ngb7ag=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=dE03e1M6B9vJ1TIp2m4VLS2jF6HMhoEhBQ5v3Wr70Us0vfm2e9EBu9TGCfV//OsYNfaYhulrrDkEXlF04WV0kcV4ZLeFQ3CIY8prZB4MgshohpL3sQctLzC4TyeHA1hrxbDWSNycN9MaRYZto4UqxGi0GD5QIS0SqEukhkfcfnA=;
X-YMail-OSG: w_5O_NEVM1lzBqiALq0ucL3PVS91WmQaVSYcpE2N4Shrj67
 n28O9hDaFmtBvNT7dfoBn0bz8W5ry_gBI6uwOXD5vsG2Nf8wl41sOcu0f.zv
 XEXOC4TOFUK9bu37IatFCzfaZxuBOzLv_fl05IcQSxsR2JYM_IB47sDJ2E.E
 yGPmZ0JkMFaHyU4EMGM2trDcwTkbsk.ZFWAc1RFRGPVqQOhLFbKSG1_b6i4C
 .YsbrIIxQmy8mV5mxDxhvwQJnGlcGF3_a7jvVctll.FyvQ16rTuLxsNGh6q2
 WBk5V4iNPpLygndeXIxFd.OfWkpi4QOaKKWhdPS7EJVfQWglaAwzcWLrnn5h
 Jrd._XvSUQmjdeTVEXAEoj04Z5vA.RVBej7HxJmDqCgDint.gFxD4WMhHKKh
 o2mYzFPTR0oWCsl.COy_ky2XUmStFSGfi.K0GIA.lPk9fHV6U2Jgcb8FL66q
 9G.mbKfE8VO.mtb3FYl_ScTrFUmHn
Received: from [71.129.34.200] by web125502.mail.ne1.yahoo.com via HTTP; Thu, 19 Apr 2012 17:26:01 PDT
X-Mailer: YahooMailWebService/0.8.117.340979
References: <ea3af05622e4c1ba3d605731c5ebb98@tweb115-2.nm.nhnsystem.com> <4F9039FE.2030304@christopherschultz.net> <453022e4778e82432b42a4c9dcbc2bd7@tweb109-2.nm.nhnsystem.com>
Message-ID: <1334881561.75954.YahooMailNeo@web125502.mail.ne1.yahoo.com>
Date: Thu, 19 Apr 2012 17:26:01 -0700 (PDT)
From: Mark Eggers <its_toasted@yahoo.com>
Reply-To: Mark Eggers <its_toasted@yahoo.com>
Subject: Re: dbcp datasource encryption
To: Tomcat Users List <users@tomcat.apache.org>,
  =?utf-8?B?7J207J6s66eM?= <leejaemannet@naver.com>
In-Reply-To: <453022e4778e82432b42a4c9dcbc2bd7@tweb109-2.nm.nhnsystem.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

----- Original Message -----=0A=0A> From: =EC=9D=B4=EC=9E=AC=EB=A7=8C <leej=
aemannet@naver.com>=0A> To: Tomcat Users List <users@tomcat.apache.org>=0A>=
 Cc: =0A> Sent: Thursday, April 19, 2012 4:37 PM=0A> Subject: Re: dbcp data=
source encryption=0A> =0A>t hanks..=0A> =0A> =0A> =0A> i want to encrypt pa=
ssword and database in my &lt;Resource&gt; element.=0A> =0A> please give me=
 a some imformation about it.=0A> =0A> =0A> =0A> =0A> -----Original Message=
-----=0A> From: "Christopher =0A> Schultz"&lt;chris@christopherschultz.net&=
gt; =0A> To: "Tomcat Users List"&lt;users@tomcat.apache.org&gt;; =0A> Cc: =
=0A> Sent: 2012-04-20 (=EA=B8=88) 01:14:54=0A> Subject: Re: dbcp datasource=
 encryption=0A> =0A> -----BEGIN PGP SIGNED MESSAGE-----=0A> Hash: SHA1=0A> =
=0A> =EC=9D=B4=EC=9E=AC=EB=A7=8C,=0A> =0A> On 4/19/12 2:07 AM, =EC=9D=B4=EC=
=9E=AC=EB=A7=8C wrote:=0A> &gt; i am operating website on tomcat6 and tomca=
t7=0A> &gt; =0A> &gt; and i used dbcp as datasource on tomcat7 so i want to=
 encrypt dbcp =0A> &gt; datasource=0A> &gt; =0A> &gt; how do i encrypt my d=
bcp datasource .. plase give me some=0A> &gt; samples.. thanks.=0A> =0A> It=
's not clear what you are trying to do:=0A> =0A> Are you trying to encrypt =
your data in the database?=0A> Are you trying to encrypt your connection to=
 your database?=0A> Are you trying to encrypt the password to your database=
 in your=0A> &lt;Resource&gt; element?=0A> =0A> - -chris=0A=0A=0Ahttp://wik=
i.apache.org/tomcat/FAQ/Password=0A=0A=0AIn short, no.=0A=0AEncrypting your=
 database, database user, and database password buys you virtually (and mos=
t people would say actually) nothing.=0A=0A. . . . just my two cents.=0A/md=
e/

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233693-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 20 00:32:32 2012
Return-Path: <users-return-233693-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5A3579FA0
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 20 Apr 2012 00:32:32 +0000 (UTC)
Received: (qmail 81673 invoked by uid 500); 20 Apr 2012 00:32:29 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 81439 invoked by uid 500); 20 Apr 2012 00:32:29 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 81429 invoked by uid 99); 20 Apr 2012 00:32:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Apr 2012 00:32:29 +0000
X-ASF-Spam-Status: No, hits=3.5 required=5.0
	tests=SPF_PASS,URIBL_BLACK
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tomcat@vittox.com designates 72.9.228.36 as permitted sender)
Received: from [72.9.228.36] (HELO vps75.vittox.com) (72.9.228.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Apr 2012 00:32:23 +0000
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed; d=vittox.com; s=default;
	h=Content-Transfer-Encoding:Content-Type:In-Reply-To:References:Subject:To:MIME-Version:From:Date:Message-ID; bh=CTlY71If14GsDGgGRDWuMIrfbQZexdxYnFVGTD/LMFU=;
	b=eOwFMo1d2spXygWgzYCcFiEWdrVnEUN4hxe3iiJrf0C6mccyO+xkrkpDDzLyoASLySTGAxoSNxtDe7Ul8uBdz4nfzANAduTRXKh6m7GfJD+7fcDlWYdfr5fHraHeXw3V;
Received: from [190.187.22.189] (port=44141 helo=[192.168.1.10])
	by vps75.vittox.com with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.77)
	(envelope-from <tomcat@vittox.com>)
	id 1SL1lZ-0005ST-Rt
	for users@tomcat.apache.org; Thu, 19 Apr 2012 19:32:02 -0500
Message-ID: <4F90AE7F.9000501@vittox.com>
Date: Thu, 19 Apr 2012 19:31:59 -0500
From: Chris Patterson <tomcat@vittox.com>
User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: JasperException: The value for the useBean class ___ attribute
 is invalid
References: <4F8D9A5B.3020302@vittox.com> <4F8EF3C1.4010801@vittox.com> <CABzHfVk3DERdgHzZtQD_uh7a5x6y-cjcpFQfDOMg06nmp3rGsA@mail.gmail.com> <4F8F4FF1.2020307@vittox.com> <CABzHfVm4SEANiWw01qzV311XZih8dFOBTTPeN3rb7xHeXFMXTQ@mail.gmail.com> <710805633277644507@unknownmsgid> <4F9067F8.2010202@vittox.com> <99C8B2929B39C24493377AC7A121E21FB0173ADE36@USEA-EXCH8.na.uis.unisys.com>
In-Reply-To: <99C8B2929B39C24493377AC7A121E21FB0173ADE36@USEA-EXCH8.na.uis.unisys.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - vps75.vittox.com
X-AntiAbuse: Original Domain - tomcat.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - vittox.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org

I solved my proble in the following way:

Renamed Test-03 to ROOT.war
Deleted the /WEB-INF folder in the appBase directory AND all other JSPs 
(inluding sub-directories)
Changed the server.xml file deleting the following context element:
<Context path="" reloadable="true" docBase="/home/domain/public_html" 
debug="1"/>

Still have the context element for the manager:
<Context path="/manager" debug="0" privileged="true"
        docBase="/usr/local/jakarta/tomcat/server/webapps/manager">
</Context>

If I delete it, I cann not access the manager for that virtual host.

So I see the following directories in the appBase (public_html) folder:

images
index.htm
ROOT
ROOT.war

I can access:
www.domain.com to see static index.html
www.domain.com/prg1.jsp calling the class Stringbean
www.domain.com/subdir/prg2.jsp calling that same class

I hope this is correct way ?

Before this configuration I allways worked with different distribution:

images
index.html
prg1.jsp
subdir (subdir/prg2.jsp)
WEB-INF

I hope to read any comments from your side

Chris.


El 19/04/2012 02:49 p.m., Caldarale, Charles R escribi:
>> From: Chris Patterson [mailto:tomcat@vittox.com]
>> Subject: Re: JasperException: The value for the useBean class ___ attribute is invalid
>> So configuration actually is as follows:
>> <Host name="server.com" appBase="/home/server/public_html">
>> <Alias>www.server.com</Alias>
> If you only have one<Host>, no<Alias>  is needed.
>
>> <Context path="" reloadable="true" docBase="." debug="1"/>
>> <Context path="/manager" debug="0" privileged="true"
>>                 docBase="/usr/local/jakarta/tomcat/server/webapps/manager">
>> </Context>
> Please, please read the documentation for the Tomcat version you're using.<Context>  elements should NOT be placed in server.xml, there is no debug attribute for<Context>, and a docBase attribute of "." is completely bogus.  Start again.
>
> I still can't figure out exactly what you intend the default webapp (ROOT) to be.
>
>   - Chuck
>
>
> THIS COMMUNICATION MAY CONTAIN CONFIDENTIAL AND/OR OTHERWISE PROPRIETARY MATERIAL and is thus for use only by the intended recipient. If you received this in error, please contact the sender and delete the e-mail and its attachments from all computers.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233694-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 20 03:46:34 2012
Return-Path: <users-return-233694-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B95FB9227
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 20 Apr 2012 03:46:34 +0000 (UTC)
Received: (qmail 61097 invoked by uid 500); 20 Apr 2012 03:46:31 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 60950 invoked by uid 500); 20 Apr 2012 03:46:31 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 60916 invoked by uid 99); 20 Apr 2012 03:46:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Apr 2012 03:46:29 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [216.82.250.179] (HELO mail210.messagelabs.com) (216.82.250.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Apr 2012 03:46:18 +0000
X-Env-Sender: Chuck.Caldarale@unisys.com
X-Msg-Ref: server-14.tower-210.messagelabs.com!1334893552!5336011!11
X-Originating-IP: [192.61.61.105]
X-StarScan-Version: 6.5.5; banners=-,-,-
X-VirusChecked: Checked
Received: (qmail 6966 invoked from network); 20 Apr 2012 03:45:56 -0000
Received: from naedge.unisys.com (HELO USEA-NAEDGE2.unisys.com) (192.61.61.105)
  by server-14.tower-210.messagelabs.com with RC4-SHA encrypted SMTP; 20 Apr 2012 03:45:56 -0000
Received: from usea-nahubcas2.na.uis.unisys.com (129.224.76.115) by
 USEA-NAEDGE2.unisys.com (192.61.61.105) with Microsoft SMTP Server (TLS) id
 8.3.83.0; Thu, 19 Apr 2012 22:45:30 -0500
Received: from USEA-EXCH8.na.uis.unisys.com ([129.224.76.41]) by
 usea-nahubcas2.na.uis.unisys.com ([129.224.76.115]) with mapi; Thu, 19 Apr
 2012 22:45:31 -0500
From: "Caldarale, Charles R" <Chuck.Caldarale@unisys.com>
To: Tomcat Users List <users@tomcat.apache.org>
Date: Thu, 19 Apr 2012 22:45:28 -0500
Subject: RE: JasperException: The value for the useBean class ___ attribute
 is invalid
Thread-Topic: JasperException: The value for the useBean class ___ attribute
 is invalid
Thread-Index: Ac0ejRQSV3W/0Ey0Tma4bXI+Tv5drAAGZV3g
Message-ID: <99C8B2929B39C24493377AC7A121E21FB0173AE1B0@USEA-EXCH8.na.uis.unisys.com>
References: <4F8D9A5B.3020302@vittox.com> <4F8EF3C1.4010801@vittox.com>
 <CABzHfVk3DERdgHzZtQD_uh7a5x6y-cjcpFQfDOMg06nmp3rGsA@mail.gmail.com>
 <4F8F4FF1.2020307@vittox.com>
 <CABzHfVm4SEANiWw01qzV311XZih8dFOBTTPeN3rb7xHeXFMXTQ@mail.gmail.com>
 <710805633277644507@unknownmsgid> <4F9067F8.2010202@vittox.com>
 <99C8B2929B39C24493377AC7A121E21FB0173ADE36@USEA-EXCH8.na.uis.unisys.com>
 <4F90AE7F.9000501@vittox.com>
In-Reply-To: <4F90AE7F.9000501@vittox.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0

PiBGcm9tOiBDaHJpcyBQYXR0ZXJzb24gW21haWx0bzp0b21jYXRAdml0dG94LmNvbV0gDQo+IFN1
YmplY3Q6IFJlOiBKYXNwZXJFeGNlcHRpb246IFRoZSB2YWx1ZSBmb3IgdGhlIHVzZUJlYW4gY2xh
c3MgX19fIGF0dHJpYnV0ZSBpcyBpbnZhbGlkDQoNCj4gUmVuYW1lZCBUZXN0LTAzIHRvIFJPT1Qu
d2FyDQo+IERlbGV0ZWQgdGhlIC9XRUItSU5GIGZvbGRlciBpbiB0aGUgYXBwQmFzZSBkaXJlY3Rv
cnkgQU5EIGFsbCBvdGhlciBKU1BzIA0KPiAoaW5sdWRpbmcgc3ViLWRpcmVjdG9yaWVzKQ0KPiBD
aGFuZ2VkIHRoZSBzZXJ2ZXIueG1sIGZpbGUgZGVsZXRpbmcgdGhlIGZvbGxvd2luZyBjb250ZXh0
IGVsZW1lbnQ6DQo+IDxDb250ZXh0IHBhdGg9IiIgcmVsb2FkYWJsZT0idHJ1ZSIgZG9jQmFzZT0i
L2hvbWUvZG9tYWluL3B1YmxpY19odG1sIiANCj4gZGVidWc9IjEiLz4NCg0KQWxsIHRoZSBhYm92
ZSB3ZXJlIGRlZmluaXRlbHkgdGhlIHJpZ2h0IHRoaW5ncyB0byBkby4NCg0KPiBTdGlsbCBoYXZl
IHRoZSBjb250ZXh0IGVsZW1lbnQgZm9yIHRoZSBtYW5hZ2VyOg0KPiA8Q29udGV4dCBwYXRoPSIv
bWFuYWdlciIgZGVidWc9IjAiIHByaXZpbGVnZWQ9InRydWUiDQo+ICAgICAgICAgZG9jQmFzZT0i
L3Vzci9sb2NhbC9qYWthcnRhL3RvbWNhdC9zZXJ2ZXIvd2ViYXBwcy9tYW5hZ2VyIj4NCj4gPC9D
b250ZXh0Pg0KDQpUaGF0IHNob3VsZCBiZSByZW1vdmVkIGFzIHdlbGwuICBUaGUgcHJvcGVyIGxv
Y2F0aW9uIGZvciB0aGUgPENvbnRleHQ+IGVsZW1lbnQgaXMgaW4gY29uZi9baG9zdF0vbWFuYWdl
ci54bWwsIHJlbW92aW5nIHRoZSBwYXRoIGVsZW1lbnQgYW5kIHRoZSBsb25nIHVudXNlZCBkZWJ1
ZyBlbGVtZW50Lg0KDQo+IFNvIEkgc2VlIHRoZSBmb2xsb3dpbmcgZGlyZWN0b3JpZXMgaW4gdGhl
IGFwcEJhc2UgKHB1YmxpY19odG1sKSBmb2xkZXI6DQoNCj4gaW1hZ2VzDQoNClRoaXMgaXMgZXNz
ZW50aWFsbHkgdHJlYXRlZCBhcyBhbm90aGVyIHdlYmFwcC4gIElmIHlvdSBhbHNvIGhhdmUgYW4g
aW1hZ2VzIGRpcmVjdG9yeSBpbnNpZGUgUk9PVC53YXIsIHRoZSBvbmUgdW5kZXIgdGhlIGFwcEJh
c2UgdGFrZXMgcHJlY2VkZW5jZS4gIElmIHlvdSB3YW50IHRvIHVzZSB0aGUgb25lIGZyb20gUk9P
VC53YXIsIHJlbW92ZSB0aGUgaW1hZ2VzIGRpcmVjdG9yeSBmcm9tIHB1YmxpY19odG1sLg0KDQo+
IGluZGV4Lmh0bQ0KDQpSZW1vdmUgaW5kZXguaHRtOyBpdCBzZXJ2ZXMgbm8gcHVycG9zZSBoZXJl
Lg0KDQo+IFJPT1QNCj4gUk9PVC53YXINCg0KVGhpcyBpcyB0aGUgcHJvcGVyIGxvY2F0aW9uIGZv
ciBib3RoIChST09UIGlzIGp1c3QgdGhlIGV4cGFuZGVkIFJPT1Qud2FyKS4NCg0KPiBJIGhvcGUg
dGhpcyBpcyBjb3JyZWN0IHdheSA/DQoNCkNlcnRhaW5seSBtdWNoIGJldHRlci4NCg0KPiBCZWZv
cmUgdGhpcyBjb25maWd1cmF0aW9uIEkgYWxsd2F5cyB3b3JrZWQgd2l0aCBkaWZmZXJlbnQgZGlz
dHJpYnV0aW9uOg0KPiBpbWFnZXMNCj4gaW5kZXguaHRtbA0KPiBwcmcxLmpzcA0KPiBzdWJkaXIg
KHN1YmRpci9wcmcyLmpzcCkNCj4gV0VCLUlORg0KDQpUaG9zZSBhcmUgYWxsIGl0ZW1zIHRoYXQg
YmVsb25nIF9pbnNpZGVfIGEgd2ViYXBwLCBub3QgYXQgdGhlIGFwcEJhc2UgbGV2ZWwuICBPbmx5
IGluZGl2aWR1YWwgd2ViYXBwcyBtYXkgYmUgbG9jYXRlZCBpbW1lZGlhdGVseSB1bmRlciB0aGUg
YXBwQmFzZSBkaXJlY3RvcnkuDQoNCiAtIENodWNrDQoNCg0KVEhJUyBDT01NVU5JQ0FUSU9OIE1B
WSBDT05UQUlOIENPTkZJREVOVElBTCBBTkQvT1IgT1RIRVJXSVNFIFBST1BSSUVUQVJZIE1BVEVS
SUFMIGFuZCBpcyB0aHVzIGZvciB1c2Ugb25seSBieSB0aGUgaW50ZW5kZWQgcmVjaXBpZW50LiBJ
ZiB5b3UgcmVjZWl2ZWQgdGhpcyBpbiBlcnJvciwgcGxlYXNlIGNvbnRhY3QgdGhlIHNlbmRlciBh
bmQgZGVsZXRlIHRoZSBlLW1haWwgYW5kIGl0cyBhdHRhY2htZW50cyBmcm9tIGFsbCBjb21wdXRl
cnMuDQoNCg==
DQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IHVzZXJzLXVuc3Vi
c2NyaWJlQHRvbWNhdC5hcGFjaGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1t
YWlsOiB1c2Vycy1oZWxwQHRvbWNhdC5hcGFjaGUub3JnDQoN

From users-return-233695-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 20 07:57:40 2012
Return-Path: <users-return-233695-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C7C0E9293
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 20 Apr 2012 07:57:40 +0000 (UTC)
Received: (qmail 98467 invoked by uid 500); 20 Apr 2012 07:57:37 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 98262 invoked by uid 500); 20 Apr 2012 07:57:37 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 98238 invoked by uid 99); 20 Apr 2012 07:57:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Apr 2012 07:57:36 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pid@pidster.com designates 209.85.210.41 as permitted sender)
Received: from [209.85.210.41] (HELO mail-pz0-f41.google.com) (209.85.210.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Apr 2012 07:57:31 +0000
Received: by dajx4 with SMTP id x4so14495702daj.0
        for <users@tomcat.apache.org>; Fri, 20 Apr 2012 00:57:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=references:from:in-reply-to:mime-version:date:message-id:subject:to
         :content-type;
        bh=5/rFB67+mEm8FD9hRI/u2gbDnqb8U/Gas2Xf7NiK+MI=;
        b=NMwb1CNVpnXyn+LcMWHl0SNznnpKASjoaIYkobf4jT82DllOgz8gVnuLwyg/AloYgX
         TlR9L+qRZCPYFLZHTzptFM5ZcgNbmHN5dzLssoZ3WAKbcu2/0pHOTcP2BpZYLwtHQ085
         aReIYDDz1RX06Uv3gAu9Gl9VT1uW1o4PKju38=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=references:from:in-reply-to:mime-version:date:message-id:subject:to
         :content-type:x-gm-message-state;
        bh=5/rFB67+mEm8FD9hRI/u2gbDnqb8U/Gas2Xf7NiK+MI=;
        b=Yjad62NMxsIN/bvxsY3dRLSlqUH7q5cmt1noIPKMVkOjdE4eHAKk+OVnsXbxPbHWZX
         WHJCKNnVivC2ehsaGUWOjyjozDJRvZlHuv3g2rqwZTgqXRG5zkr7a6ipt1Jo/32TYaO0
         NZyv9q6P/HzU+c7L6PdjFvOXogrT4KeeBEDDdgWJPkl/9uBXFbDYd3uRRCfB5f9brzfk
         mXVpGxMdwWLgz8ZoVk441yRn0i7AZU3eX3T5xpGHKgKM8WswuYWu2rJbpO6LCH/04a/4
         8jEvo4HIAxEcHGKN2PwRvSVQVzuWuij5V2MmFIuUuDGze7ufDOfCTvLXbR6jBl+zigBK
         4lVw==
Received: by 10.68.212.163 with SMTP id nl3mr11071997pbc.112.1334908629660;
 Fri, 20 Apr 2012 00:57:09 -0700 (PDT)
References: <CAONS=m=NEDdFcY7+vUZ+2wCAf8wZqbSpOwHsFpGLGk8_me76GQ@mail.gmail.com>
 <4F9057FD.2010605@christopherschultz.net> <CAONS=mkjVX_jJDUVgXCV38q-2sTKhVpr+MMs-n-udS6yMomXSA@mail.gmail.com>
 <99C8B2929B39C24493377AC7A121E21FB0173ADFC6@USEA-EXCH8.na.uis.unisys.com>
 <CAONS=mk2Xs=zWxqbPj3L2UiGVt3kTxhbtYhGh-8qKTRcxfWxBA@mail.gmail.com>
 <99C8B2929B39C24493377AC7A121E21FB0173AE008@USEA-EXCH8.na.uis.unisys.com> <CABzHfVmzQGDDT4oYnFGJEqCNZKGo34E7NfQ87wZ0agpMGsbDXQ@mail.gmail.com>
From: "Pid *" <pid@pidster.com>
In-Reply-To: <CABzHfVmzQGDDT4oYnFGJEqCNZKGo34E7NfQ87wZ0agpMGsbDXQ@mail.gmail.com>
Mime-Version: 1.0 (1.0)
Date: Fri, 20 Apr 2012 08:57:44 +0100
Message-ID: <-6479061906558148326@unknownmsgid>
Subject: Re: Classpath issues with Embedded Tomcat 7
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=UTF-8
X-Gm-Message-State: ALoCoQntM2mxeSpZ6TleJMUrfbelo3U2JoTcBSzNnq9Xgp7oAsfA1/KFWe+Gaf/r1tT01aNqqyK+
X-Virus-Checked: Checked by ClamAV on apache.org

On 19 Apr 2012, at 23:09, Konstantin Kolinko <knst.kolinko@gmail.com> wrote:

> 2012/4/20 Caldarale, Charles R <Chuck.Caldarale@unisys.com>:
>>> From: Adam Gordon [mailto:adam.n.gordon@gmail.com]
>>> Subject: Re: Classpath issues with Embedded Tomcat 7
>>
>>> it's creating tomcat.9090 in the same directory as my
>>> web application.
>>
>> That looks like the pid file used for shutting down Tomcat via scripts.  I don't think that has anything to do with what Tomcat uses for JSP compilations.
>>
>
> Citing from Tomcat.java:
> [[[
>    /**
>     * Tomcat needs a directory for temp files. This should be the
>     * first method called.

Maybe this should be a constructor argument, if it's a pre-requisite.


p





>     *
>     * By default, if this method is not called, we use:
>     *  - system properties - catalina.base, catalina.home
>     *  - $PWD/tomcat.$PORT
>     * (/tmp doesn't seem a good choice for security).
>     *
>     * TODO: disable work dir if not needed ( no jsp, etc ).
>     */
>    public void setBaseDir(String basedir) {
>        this.basedir = basedir;
>    }
> ]]]
>
> There is code somewhere in that class that implements what is written
> in the above javadoc.
>
> Best regards,
> Konstantin Kolinko
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233696-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 20 13:32:43 2012
Return-Path: <users-return-233696-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4F2E69D9C
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 20 Apr 2012 13:32:43 +0000 (UTC)
Received: (qmail 36850 invoked by uid 500); 20 Apr 2012 13:32:39 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 36687 invoked by uid 500); 20 Apr 2012 13:32:39 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 36669 invoked by uid 99); 20 Apr 2012 13:32:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Apr 2012 13:32:38 +0000
X-ASF-Spam-Status: No, hits=-0.4 required=5.0
	tests=PLING_QUERY,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pid@pidster.com designates 74.125.83.45 as permitted sender)
Received: from [74.125.83.45] (HELO mail-ee0-f45.google.com) (74.125.83.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Apr 2012 13:32:32 +0000
Received: by eeit10 with SMTP id t10so4081033eei.18
        for <users@tomcat.apache.org>; Fri, 20 Apr 2012 06:32:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type;
        bh=vHe7Nrev1YOp9vagRWEtDpATS7OozmWMhwpVK4MNG88=;
        b=omeZvr9C2xUHGXnrfXDSLn38Fx6jvFzY+XMNKpJ9su+ts7Hrs1qvtUk2fMBlnYg42j
         Ao19M9KvauFGy3DEgdKq/AKZD5hLDa4N/FZCuCB4tGlf/2cUYJcEQ6tDu3Cb4kHrabr1
         VbMuAtvJekkm3k1QjDqOm2bI+QDmBc3vc38Cg=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type:x-gm-message-state;
        bh=vHe7Nrev1YOp9vagRWEtDpATS7OozmWMhwpVK4MNG88=;
        b=PT8qXLDzcTdbhft1tdZZVhMMIY8N6E4BxcAd3K2EuFxpjV37wPu+oIqEdlosY9Nvum
         FiodWvQu3Uz9fXtoOUbCBqOU++I2e3y+A0jLVtP3tdq152xLH2GD8ZR0zAhYxyLdrNj7
         pjtw4S+sseU1RK72nrkWoounQc80KpO8ldrDRlGa3LPHlHjGL0A2tDXgUIUrNRV+Vm0g
         J8jU/EkWfHmt7AzL1+t00H24+AynaVS2ms1oNTD1JXZ1Mey111DK/nW8NbT+onrvvYLP
         3mzgeEe+pFSLyvWAP8xZzG8ztoYxA1H9ZQ1COHvPZmO1yfTxhjfOHJQwCfLa9jwnuZ5I
         LABQ==
Received: by 10.213.8.197 with SMTP id i5mr543385ebi.212.1334928731483;
        Fri, 20 Apr 2012 06:32:11 -0700 (PDT)
Received: from Asura.local ([81.134.122.147])
        by mx.google.com with ESMTPS id y11sm26392884eem.3.2012.04.20.06.32.08
        (version=SSLv3 cipher=OTHER);
        Fri, 20 Apr 2012 06:32:09 -0700 (PDT)
Message-ID: <4F916540.8030708@pidster.com>
Date: Fri, 20 Apr 2012 14:31:44 +0100
From: Pid <pid@pidster.com>
Organization: Pidster Inc
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: catalina.out file is growing very rapidly! How to prevent Hibernate's
 INFO and DEBUG statements from getting added to catalina.out file?
References: <BLU162-ds182B349F37636714AC2D52D33D0@phx.gbl>
In-Reply-To: <BLU162-ds182B349F37636714AC2D52D33D0@phx.gbl>
X-Enigmail-Version: 1.4
OpenPGP: id=62590808
Content-Type: multipart/signed; micalg=pgp-sha512;
 protocol="application/pgp-signature";
 boundary="------------enig4D5F71EABFDB7300301F7A26"
X-Gm-Message-State: ALoCoQnq4pOvKZq3F7gONQ6NuSYwQmOgd/LUtoONDE8y8Fa54yD4DrAE15crANapROSKhh0ZSC5w

--------------enig4D5F71EABFDB7300301F7A26
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

On 20/04/2012 00:43, Dilip Shah wrote:
> Hi Konstantin,
>=20
> According to http://www.mulesoft.com/tomcat-logging , to make sure my
> Log4j configuration is complete, I should have tomcat-juli.jar and
> tomcat-juli-adapters.jar files in $CATALINA_HOME/bin/
> whereas, I have just the default tomcat-juli.jar that comes with Tomcat=
=2E

This is only if you are using log4j for *Tomcat's* own logging, as
opposed to your *application's* logging.


> I tried to get hold of these files from Tomcat download site's
> bin/extras for version 5.5.28 but I don't see any 'extras' folder /
> compressed file.
> Do you think this could be a problem and if so, would you know where I
> can get hold of these 2 jar files?

This is not relevant.  Ignore it.

You need to put log4j.properties file in yourapp/WEB-INF/classes, with
the appropriate logging config.


p


> Also, my server's catalina.sh has the following:
> # Set juli LogManager if it is present
> if [ -r "$CATALINA_HOME"/bin/tomcat-juli.jar ]; then
>  JAVA_OPTS=3D"$JAVA_OPTS
> -Djava.util.logging.manager=3Dorg.apache.juli.ClassLoaderLogManager"
>  LOGGING_CONFIG=3D"-Djava.util.logging.config.file=3D$CATALINA_BASE/con=
f/logging.properties"
>=20
> else
>  # Bugzilla 45585
>  LOGGING_CONFIG=3D"-Dnop"
> fi
>=20
>=20
> and I do have tomcat-juli.jar in $CATALINA_HOME/bin/
> Should I remove these lines from the catalina.sh file?
>=20
> Thanks,
>=20
> Dilip
>=20
> --------------------------------------------------
> From: "Dilip Shah" <dilipvshah@hotmail.com>
> Sent: Thursday, April 19, 2012 4:21 PM
> To: "Tomcat Users List" <users@tomcat.apache.org>
> Subject: Re: catalina.out file is growing very rapidly! How to prevent
> Hibernate's INFO and DEBUG statements from getting added to catalina.ou=
t
> file?
>=20
>> Hi Konstantin,
>>
>> I went through all 105 jar files (between common/lib and the
>> application's WEB-INF/lib) and didn't find any of the jar having
>> log4j.properties or log4j.xml at the root.
>>
>> This is just some additional information.
>>
>> Dilip
>>
>>
>> --------------------------------------------------
>> From: "Dilip Shah" <dilipvshah@hotmail.com>
>> Sent: Thursday, April 19, 2012 3:57 PM
>> To: "Tomcat Users List" <users@tomcat.apache.org>
>> Subject: Re: catalina.out file is growing very rapidly! How to prevent=

>> Hibernate's INFO and DEBUG statements from getting added to
>> catalina.out file?
>>
>>> Hi Konstantin,
>>>
>>> I checked all the jar files I added to common/lib and none of them
>>> have log4j.properties file at the root location.
>>>
>>> I get your suggestion on putting application specific jar files in
>>> the application's WEB-INF/lib folder... I'll go ahead and take care
>>> of it.
>>>
>>> The application's web.xml:
>>> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
>>> <web-app
>>> id=3D"WebApp_ID"
>>> version=3D"2.4"
>>> xmlns=3D"http://java.sun.com/xml/ns/j2ee"
>>> xmlns:xsi=3D"http://www.w3.org/2001/XMLSchema-instance"
>>> xsi:schemaLocation=3D"http://java.sun.com/xml/ns/j2ee
>>> http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"
>>> >
>>>
>>> <display-name>Smart Cloud Learning</display-name>
>>> <description>Smart Cloud Learning Application</description>
>>>
>>> <!-- The front controller of this Spring Web application,
>>> responsible for handling all application requests -->
>>> <servlet>
>>> <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
>>> <servlet-class>org.springframework.web.servlet.DispatcherServlet</ser=
vlet-class>
>>>
>>> <load-on-startup>1</load-on-startup>
>>> <init-param>
>>> <param-name>contextConfigLocation</param-name>
>>> <param-value>/WEB-INF/applicationContext.xml</param-value>
>>> </init-param>
>>> </servlet>
>>>
>>> <!-- Map all spring/* requests to the DispatcherServlet for handling =
-->
>>> <servlet-mapping>
>>> <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
>>> <url-pattern>/rest/*</url-pattern>
>>> </servlet-mapping>
>>>
>>> <listener>
>>> <listener-class>org.springframework.web.context.ContextLoaderListener=
</listener-class>
>>>
>>> </listener>
>>> </web-app>
>>>
>>>
>>> applicationContext.xml:
>>> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
>>> <beans
>>> xmlns=3D"http://www.springframework.org/schema/beans"
>>> xmlns:context=3D"http://www.springframework.org/schema/context"
>>> xmlns:mvc=3D"http://www.springframework.org/schema/mvc"
>>> xmlns:tx=3D"http://www.springframework.org/schema/tx"
>>> xmlns:xsi=3D"http://www.w3.org/2001/XMLSchema-instance"
>>> xsi:schemaLocation=3D"
>>>        http://www.springframework.org/schema/beans
>>>        http://www.springframework.org/schema/beans/spring-beans-3.0.x=
sd
>>>        http://www.springframework.org/schema/context
>>>
>>> http://www.springframework.org/schema/context/spring-context-3.0.xsd
>>>        http://www.springframework.org/schema/mvc
>>>        http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
>>> http://www.springframework.org/schema/tx
>>> http://www.springframework.org/schema/tx/spring-tx-2.5.xsd
>>>        ">
>>>
>>> <context:component-scan base-package=3D"com.knownomy.scl">
>>>      <context:include-filter type=3D"aspectj"
>>> expression=3D"com.knownomy.scl.*" />
>>> </context:component-scan>
>>>
>>> <mvc:annotation-driven />
>>>
>>> <!-- START Load application properties -->
>>> <bean id=3D"propertyConfigurer"
>>> class=3D"org.springframework.beans.factory.config.PropertyPlaceholder=
Configurer">
>>>
>>> <property
>>> name=3D"location"><value>WEB-INF/application.properties</value></prop=
erty>
>>> </bean>
>>>
>>> <!-- Data source configuration -->
>>> <bean
>>> id=3D"dataSource"
>>> class=3D"com.mchange.v2.c3p0.ComboPooledDataSource">
>>> <property
>>> name=3D"driverClass"
>>> value=3D"${jdbc.driverClassName}"/>
>>> <property
>>> name=3D"jdbcUrl"
>>> value=3D"${jdbc.url}"/>
>>> <property
>>> name=3D"user"
>>> value=3D"${jdbc.username}"/>
>>> <property
>>> name=3D"password"
>>> value=3D"${jdbc.password}"/>
>>> <property
>>> name=3D"minPoolSize">
>>> <value>${hibernate.c3p0.min_size}</value>
>>> </property>
>>> <property
>>> name=3D"maxPoolSize">
>>> <value>${hibernate.c3p0.max_size}</value>
>>> </property>
>>> <property
>>> name=3D"acquireRetryAttempts">
>>> <value>10</value>
>>> </property>
>>> <property
>>> name=3D"acquireIncrement">
>>> <value>${hibernate.c3p0.acquire_increment}</value>
>>> </property>
>>> <property
>>> name=3D"idleConnectionTestPeriod">
>>> <value>${hibernate.c3p0.idle_test_period}</value>
>>> </property>
>>> <property
>>> name=3D"maxIdleTime">
>>> <value>${hibernate.c3p0.timeout}</value>
>>> </property>
>>> <property
>>> name=3D"preferredTestQuery">
>>> <value>SELECT 1</value>
>>> </property>
>>> <property
>>> name=3D"testConnectionOnCheckin">
>>> <value>false</value>
>>> </property>
>>> </bean>
>>>
>>> <!-- START HIBERNATE CONFIG -->
>>> <!-- Configure SessionFactory -->
>>> <bean
>>> id=3D"sessionFactory"
>>> class=3D"org.springframework.orm.hibernate3.annotation.AnnotationSess=
ionFactoryBean">
>>>
>>> <property
>>> name=3D"dataSource"
>>> ref=3D"dataSource" />
>>> <property name=3D"hibernateProperties">
>>> <props>
>>> <prop key=3D"hibernate.show_sql">${hibernate.show_sql}</prop>
>>> <prop key=3D"hibernate.format_sql">${hibernate.format_sql}</prop>
>>> <prop
>>> key=3D"hibernate.transaction.factory_class">${hibernate.transaction.f=
actory_class}</prop>
>>>
>>> <prop key=3D"hibernate.dialect">${hibernate.dialect}</prop>
>>> <prop key=3D"hibernate.c3p0.min_size">${hibernate.c3p0.min_size}</pro=
p>
>>> <prop key=3D"hibernate.c3p0.max_size">${hibernate.c3p0.max_size}</pro=
p>
>>> <prop
>>> key=3D"hibernate.c3p0.acquire_increment">${hibernate.c3p0.acquire_inc=
rement}</prop>
>>>
>>> <prop key=3D"hibernate.c3p0.timeout">${hibernate.c3p0.timeout}</prop>=

>>> <prop
>>> key=3D"hibernate.c3p0.max_statements">${hibernate.c3p0.max_statements=
}</prop>
>>>
>>> <prop
>>> key=3D"hibernate.c3p0.idle_test_period">${hibernate.c3p0.idle_test_pe=
riod}</prop>
>>>
>>> </props>
>>> </property>
>>>
>>> <property name=3D"annotatedClasses">
>>> <list>
>>> <value>com.knownomy.scl.appcommon.domain.Language</value>
>>> <value>com.knownomy.scl.appcommon.domain.Syllabus</value>
>>> <value>com.knownomy.scl.appcommon.domain.Country</value>
>>> <value>com.knownomy.scl.appcommon.domain.State</value>
>>> <value>com.knownomy.scl.appcommon.domain.Grade</value>
>>> <value>com.knownomy.scl.appcommon.domain.Subject</value>
>>> <value>com.knownomy.scl.appcommon.domain.EmbeddedImage</value>
>>> <value>com.knownomy.scl.appcommon.domain.PageSetup</value>
>>>
>>> </list>
>>> </property>
>>>
>>> </bean>
>>>
>>> <!-- enable the configuration of transactional behavior based on
>>> annotations -->
>>> <tx:annotation-driven transaction-manager=3D"txManager"/>
>>>
>>> <bean id=3D"txManager"
>>> class=3D"org.springframework.orm.hibernate3.HibernateTransactionManag=
er">
>>> <property name=3D"sessionFactory"><ref local=3D"sessionFactory"/></pr=
operty>
>>> </bean>
>>>
>>> <bean
>>> class=3D"org.springframework.beans.factory.annotation.RequiredAnnotat=
ionBeanPostProcessor"/>
>>>
>>> <!-- END HIBERNATE CONFIG -->
>>> </beans>
>>>
>>>
>>> application.properties:
>>> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
>>> #  Application Properties
>>> path.webinf=3Dwebapps/SmartCloudLearningMobi/WEB-INF
>>> # JDBC Connection information
>>> jdbc.driverClassName=3Dcom.mysql.jdbc.Driver
>>> jdbc.url=3Djdbc:mysql://localhost:3306/databasename?useUnicode=3Dtrue=
&characterEncoding=3DUTF8
>>>
>>> jdbc.username=3Droot
>>> jdbc.password=3Dmypassword
>>> ###hibernate
>>> hibernate.show_sql=3Dfalse
>>> hibernate.format_sql=3Dtrue
>>> hibernate.transaction.factory_class=3Dorg.hibernate.transaction.JDBCT=
ransactionFactory
>>>
>>> hibernate.dialect=3Dorg.hibernate.dialect.MySQLDialect
>>> hibernate.c3p0.min_size=3D1
>>> hibernate.c3p0.max_size=3D25
>>> hibernate.c3p0.acquire_increment=3D5
>>> hibernate.c3p0.timeout=3D1800
>>> hibernate.c3p0.max_statements=3D50
>>> hibernate.c3p0.idle_test_period=3D3600
>>>
>>> Thanks,
>>>
>>> Dilip
>>>
>>> --------------------------------------------------
>>> From: "Konstantin Kolinko" <knst.kolinko@gmail.com>
>>> Sent: Thursday, April 19, 2012 3:21 PM
>>> To: "Tomcat Users List" <users@tomcat.apache.org>
>>> Subject: Re: catalina.out file is growing very rapidly! How to
>>> prevent Hibernate's INFO and DEBUG statements from getting added to
>>> catalina.out file?
>>>
>>>> 2012/4/20 Dilip Shah <dilipvshah@hotmail.com>:
>>>>> Hi Konstantin,
>>>>>
>>>>> Thanks for the reply!
>>>>>
>>>>> To answer your questions...
>>>>> * Tomcat version info:
>>>>> Server version: Apache Tomcat/5.5.28
>>>>> Server built:   Jul 24 2009 01:33:09
>>>>> Server number:  5.5.28.0
>>>>> OS Name:        Linux
>>>>> OS Version:     2.6.18-53.el5
>>>>> Architecture:   i386
>>>>> JVM Version:    1.6.0_23-ea-b01
>>>>>
>>>>> * Since I'm configuring the application's logging via
>>>>> log4j.properties, I
>>>>> can safely assume that logging is done via Log4j and not JULI, righ=
t?
>>>>> Your statement about log formatting also seems to suggest the same.=

>>>>> Let me
>>>>> know if I interpreted your statement incorrectly.
>>>>
>>>> OK.
>>>> The problem is that something configured logging for you  (e.g. by
>>>> providing its own copy of configuration file).
>>>>
>>>> One example of such bad library is mentioned here:
>>>> https://issues.apache.org/bugzilla/show_bug.cgi?id=3D52011
>>>>
>>>> IIRC Log4j supports 2 configuration file names: log4j.properties and=

>>>> log4j.xml. See Log4J documentation for details.
>>>>
>>>> Search whether some of jars that you added has such a file. If they
>>>> are in commons/lib it means that Tomcat sees them.
>>>>
>>>>>
>>>>> * The changes I made to the application:
>>>>> - I implemented Spring view controller (for the first time) and in =
the
>>>>> process added @Autowired, @JsonIgnore through the code
>>>>> - in the process of getting jSON output to the client, I added the
>>>>> following
>>>>> jar files to common/lib
>>>>
>>>> Adding them to common/lib is a bad idea (a way to jar hell).
>>>>
>>>> You'd better put them into your app's WEB-INF/lib.
>>>>
>>>>> aspectjtools-1.5.4.jar
>>>>> bval-core-0.3-incubating.jar
>>>>> hibernate-validator-4.1.0.Final.jar
>>>>> jackson-core-asl-1.6.4.jar
>>>>> jackson-mapper-asl-1.6.4.jar
>>>>> joda-time-1.6.2.jar
>>>>> joda-time-jsptags-1.0.2.jar
>>>>> jstl-1.2.jar
>>>>> validation-api-1.0.0.GA.jar
>>>>>
>>>>> I suspect packages in one or more of these jar files is generating
>>>>> these
>>>>> INFO and DEBUG log entries in catalina.out
>>>>>
>>>>> * The application's log4j.properties file is in the application's
>>>>> WEB-INF/classes folder
>>>>>
>>>>
>>>> What is in your configuration file?
>>>>
>>>> Best regards,
>>>> Konstantin Kolinko
>>>>
>>>> --------------------------------------------------------------------=
-
>>>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>>>> For additional commands, e-mail: users-help@tomcat.apache.org
>>>>
>>>>
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>=20


--=20

[key:62590808]


--------------enig4D5F71EABFDB7300301F7A26
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.18 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iQIcBAEBCgAGBQJPkWVWAAoJEGoM2OGpOvr9mI8P/i4DPzW/hPfjmQpGjDmYcm2e
oaP2YwNyPtkk8ADYjt1fKIxb9ot51iAFVz1Q0rcSSiuYyMYT6RoimHZk3JFel+zU
9p9KHnN9AgxiL7VR8NyvmNsz2riFOCsK9wQkP8mGH0SR1JI4ayRmqo4NIEiXZHwI
FkCKSMQ/DRJC9XeaOpqh5Hny4wvAgdeF2W9966LkV++/6llOiKoB6Prv+YQ4RN8B
HY9Xf/N1Qn9jXeaZdHXWiBhH5rBSB8AdNQRTdEbWpc9LYXIAIkyfPF/AEmS5Xcg+
bv4SP7TP/mG6LKv+aV5V51GGaqa9ns0CFANQxUwVTshJVP0uNKOSYf6+JcflT1Sr
aPHGoJihZRIE81SSn5Rfnl/L14m98uWSKJiKtTsEY4SHvIPKwDb5DfJ7LKUIDuoB
jLYnKXUAgzjmlyuHArk0U77nDTPTV4+bIqNyYseLs7Pkpda57DykNcznhxJRarUZ
134Mryl/bW4Ay+crbNAK8oVlESCUNgYLblDw9B5L0dq388kvkfIicqJWZM5pOQN3
VsD406UjvM32rJgS3xG/AG0PhChAUrkrKZSPQ+sflHkQQfGOSdpYyMQwQb6Lqi0B
rbGGH7Hz76lmFEssCzmXMrw1Pwexe4rhcXcRrA+pPAjeF+hJVZngHorMg4ICmiZh
uIDnITyaoCW7UsqCBFER
=7Mer
-----END PGP SIGNATURE-----

--------------enig4D5F71EABFDB7300301F7A26--

From users-return-233697-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 20 14:08:16 2012
Return-Path: <users-return-233697-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C45E99CBF
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 20 Apr 2012 14:08:16 +0000 (UTC)
Received: (qmail 37419 invoked by uid 500); 20 Apr 2012 14:08:13 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 37183 invoked by uid 500); 20 Apr 2012 14:08:13 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 37173 invoked by uid 99); 20 Apr 2012 14:08:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Apr 2012 14:08:13 +0000
X-ASF-Spam-Status: No, hits=-0.4 required=5.0
	tests=PLING_QUERY,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of knst.kolinko@gmail.com designates 209.85.213.45 as permitted sender)
Received: from [209.85.213.45] (HELO mail-yw0-f45.google.com) (209.85.213.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Apr 2012 14:08:08 +0000
Received: by yhoo21 with SMTP id o21so6475107yho.18
        for <users@tomcat.apache.org>; Fri, 20 Apr 2012 07:07:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=Tbu4NIgGXCnz07KXt8xXlhbUprCI70WDcYr9xtMtW0E=;
        b=CBSpRxZ2u9Rk0m30JJP9hEp/YXEbHZi49OF+XhrwdOG2UF4LUdsODfYKd/JtMMMayn
         Z+Lpit/xD3up+OQCCnY/OncJFrxZoPAi2zbTLtbpdgzw+3jcD5UjDR1oSXPMmvGUj1kj
         BHtT6jPA6cNMvszDenzbF/yBBnO+APj5eVlsZneY48T2qW57KgfLNTr11lD65PI1R/aV
         QdJ/oncCKKs0nRCEeqWb+Pu9O8Dhj3Hve7iKyj0PNOEBsYghSBlTa4q7EcshC2Xkq2WM
         zu9VdRh9FpGXNRKj462ee6ajQ4KAFqdMd0IfUaa9a3afatmFeVEqrbdH4YKmr9d+bUUl
         s7Dg==
MIME-Version: 1.0
Received: by 10.236.85.209 with SMTP id u57mr6163006yhe.20.1334930867918; Fri,
 20 Apr 2012 07:07:47 -0700 (PDT)
Received: by 10.146.161.7 with HTTP; Fri, 20 Apr 2012 07:07:47 -0700 (PDT)
In-Reply-To: <4F916540.8030708@pidster.com>
References: <BLU162-ds182B349F37636714AC2D52D33D0@phx.gbl>
	<4F916540.8030708@pidster.com>
Date: Fri, 20 Apr 2012 18:07:47 +0400
Message-ID: <CABzHfVkx4j2ctpNPCpnycuC-sn2L6WZr0uvmNKvVLUTuejMCqg@mail.gmail.com>
Subject: Re: catalina.out file is growing very rapidly! How to prevent
 Hibernate's INFO and DEBUG statements from getting added to catalina.out file?
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

2012/4/20 Pid <pid@pidster.com>:
> On 20/04/2012 00:43, Dilip Shah wrote:
>> Hi Konstantin,
>>
>> According to http://www.mulesoft.com/tomcat-logging , to make sure my
>> Log4j configuration is complete, I should have tomcat-juli.jar and
>> tomcat-juli-adapters.jar files in $CATALINA_HOME/bin/
>> whereas, I have just the default tomcat-juli.jar that comes with Tomcat.
>
> This is only if you are using log4j for *Tomcat's* own logging, as
> opposed to your *application's* logging.
>
>
>> I tried to get hold of these files from Tomcat download site's
>> bin/extras for version 5.5.28 but I don't see any 'extras' folder /
>> compressed file.
>> Do you think this could be a problem and if so, would you know where I
>> can get hold of these 2 jar files?
>
> This is not relevant. =A0Ignore it.
>

1. The page says little more that official Logging documentation in Tomcat.

2. The page does not mention it, but most of what is written there is
applicable to Tomcat 6 and later. That is why there is no "extras" in
5.5.

Tomcat 5.5 uses Apache Commons Logging library "as is"

Tomcat 6 uses its own build of that library, renamed into different
package to minimize interference with webapps. There are several
variants of that library - one is provided in "extras".

Tomcat 5.5 reaches EOL in several months, so we wouldn't need to care
about the difference soon. I'm already starting to forget things.


> You need to put log4j.properties file in yourapp/WEB-INF/classes, with
> the appropriate logging config.
>

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233698-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 20 14:24:39 2012
Return-Path: <users-return-233698-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 28FAE9695
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 20 Apr 2012 14:24:39 +0000 (UTC)
Received: (qmail 84957 invoked by uid 500); 20 Apr 2012 14:24:35 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 84798 invoked by uid 500); 20 Apr 2012 14:24:35 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 84788 invoked by uid 99); 20 Apr 2012 14:24:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Apr 2012 14:24:35 +0000
X-ASF-Spam-Status: No, hits=-0.4 required=5.0
	tests=PLING_QUERY,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of knst.kolinko@gmail.com designates 209.85.160.173 as permitted sender)
Received: from [209.85.160.173] (HELO mail-gy0-f173.google.com) (209.85.160.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Apr 2012 14:24:29 +0000
Received: by ghrr14 with SMTP id r14so6483438ghr.18
        for <users@tomcat.apache.org>; Fri, 20 Apr 2012 07:24:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=NbkWCymWq5Z30ll3Zuf0yKUDO4o6mz9pPfBiEXdqvQE=;
        b=MFSzfvWndcliBQwkdF0qgXAwmV6tGsoXmLgDVLF2Ks/8GZsB6ueQ60Zjr2cg4WB+dd
         aRfR2urqgYHYOpp3RqqCZOy2iv16vFRpW+ddgNBrGHPTaXyeE6vI8dQXGJCsCAGPRwwU
         ptkIKSDr8WK78r2ux3A47qiOJj6aVgK5Vw7kjZS6lERSodec1MEzufbudrzEMjxV7lok
         zafaA1tWPC2VlvwTRL4RymqdkRL5q32BlYdgy+L6Hq1MYiOI0+mkoga/c2HHkgR463li
         x4eq/MSDg6kQRy3UGpIpCxg40NVHDCf8wGW/TuaBmwqJg7432N6w08D1/zT0y0bh1av1
         0Qfw==
MIME-Version: 1.0
Received: by 10.236.78.70 with SMTP id f46mr5979279yhe.99.1334931848786; Fri,
 20 Apr 2012 07:24:08 -0700 (PDT)
Received: by 10.146.161.7 with HTTP; Fri, 20 Apr 2012 07:24:08 -0700 (PDT)
In-Reply-To: <BLU162-ds96AF12B0432754A29B6A7D33D0@phx.gbl>
References: <BLU162-ds6E297DD17A3D09D5BD1B2D33D0@phx.gbl>
	<CABzHfVmsp+bAXkBhjkdTdwVex85okAvWb=zFsChGcOndhBuFdw@mail.gmail.com>
	<BLU162-ds12FB2B965DCCC1C6B5D679D33D0@phx.gbl>
	<CABzHfV=bBjRigDG6wk_L4RY=QmpgCPxOWmXtbb1Xoy+++6Ndpw@mail.gmail.com>
	<BLU162-ds96AF12B0432754A29B6A7D33D0@phx.gbl>
Date: Fri, 20 Apr 2012 18:24:08 +0400
Message-ID: <CABzHfV=J7SbYdJJdZ1HEBEWU5o9gT6b9y60soP8t8HD13XHruA@mail.gmail.com>
Subject: Re: catalina.out file is growing very rapidly! How to prevent
 Hibernate's INFO and DEBUG statements from getting added to catalina.out file?
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

2012/4/20 Dilip Shah <dilipvshah@hotmail.com>:
> Hi Konstantin,
>
> I checked all the jar files I added to common/lib and none of them have
> log4j.properties file at the root location.
>


The log4j.properties that you cited in your first mail - it is in your
app's WEB-INF/classes?

Where is log4j**.jar ? Is there one copy of it, or several?

Do you have log4j.properties in Tomcat's common/classes?


Are any log files created in the logs folder, or everything is written
to the console (that is catalina.out) ?

Try changing log format in your log4j.properties file  -- to make sure
that it is this file that has control and not some default elsewhere.

BTW, log4j project:
http://logging.apache.org/log4j/

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233699-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 20 16:43:46 2012
Return-Path: <users-return-233699-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 46B0A9B13
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 20 Apr 2012 16:43:46 +0000 (UTC)
Received: (qmail 56540 invoked by uid 500); 20 Apr 2012 16:43:42 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 56460 invoked by uid 500); 20 Apr 2012 16:43:42 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 56434 invoked by uid 99); 20 Apr 2012 16:43:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Apr 2012 16:43:42 +0000
X-ASF-Spam-Status: No, hits=0.3 required=5.0
	tests=PLING_QUERY,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dilipvshah@hotmail.com designates 65.55.111.110 as permitted sender)
Received: from [65.55.111.110] (HELO blu0-omc2-s35.blu0.hotmail.com) (65.55.111.110)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Apr 2012 16:43:34 +0000
Received: from BLU162-DS17 ([65.55.111.72]) by blu0-omc2-s35.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Fri, 20 Apr 2012 09:43:12 -0700
X-Originating-IP: [24.5.178.208]
X-Originating-Email: [dilipvshah@hotmail.com]
Message-ID: <BLU162-ds17349592A08291CD68D932D3220@phx.gbl>
From: "Dilip Shah" <dilipvshah@hotmail.com>
To: "Tomcat Users List" <users@tomcat.apache.org>
Subject: Re: catalina.out file is growing very rapidly! How to prevent Hibernate's INFO and DEBUG statements from getting added to catalina.out file?
Date: Fri, 20 Apr 2012 09:43:16 -0700
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_NextPart_000_00C0_01CD1EDA.02D24190"
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 14.0.8117.416
X-MimeOLE: Produced By Microsoft MimeOLE V14.0.8117.416
X-OriginalArrivalTime: 20 Apr 2012 16:43:12.0652 (UTC) FILETIME=[AD09CCC0:01CD1F14]
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_00C0_01CD1EDA.02D24190
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit

The following provides clarifications / details on the environments in which 
the application is developed and then hosted:
(quite a bit of detail but I'm hoping this will help get to the root of the 
issue)

Develop environment:
=================
* Windows XP SP3
* Tomcat version information:
C:\apache-tomcat-5.5.25\bin>version
Server version: Apache Tomcat/5.5.25
Server built:   Aug 24 2007 05:33:50
Server number:  5.5.25.0
OS Name:        Windows XP
OS Version:     5.1
Architecture:   x86
JVM Version:    1.6.0_30-b12
* There is a log4j.properties file in CATALINA_HOME\common\classes\
(attached as log4j.properties.dev.tomcat)
* There is a log4j.properties file in the application's WEB-INF\classes\
(attached as log4j.properties.dev.application)
* jar files in the application's WEB-INF\lib folder:
Directory of 
C:\apache-tomcat-5.5.25\webapps\SmartCloudLearningMobi\WEB-INF\lib
09/11/2009  05:35 PM            60,841 commons-logging-1.1.1.jar
05/19/2009  01:51 PM           391,834 log4j-1.2.15.jar
* log4j-1.2.15.jar is also in CATALINA_HOME\common\lib\
* I've attached catalina.bat file
* After I start Tomcat, hit the application once in the browser and then 
shutdown Tomcat, CATALINA_HOME\logs\ has the following log files:
Directory of C:\apache-tomcat-5.5.25\logs
04/20/2012  08:33 AM    <DIR>          .
04/20/2012  08:33 AM    <DIR>          ..
04/20/2012  08:31 AM                 0 admin.2012-04-20.log
04/20/2012  08:31 AM                 0 catalina.2012-04-20.log
04/20/2012  08:31 AM                 0 host-manager.2012-04-20.log
04/20/2012  08:31 AM                 0 localhost.2012-04-20.log
04/20/2012  08:31 AM                 0 manager.2012-04-20.log
04/20/2012  08:33 AM             1,599 SmartCloudLearning.log
04/20/2012  08:33 AM             1,361 SmartCloudLearningMobi.log
04/20/2012  08:33 AM               455 SpringMVC.log
04/20/2012  08:31 AM                 0 tomcat.log
* I've attached the concerned application's log file, renamed as 
SmartCloudLearningMobi.log.dev
- note that logging pattern in the application's log file matches what's 
defined in the application's WEB-INF\classes\log4j.properties
- I see some output on the console that I have attached as file 
DevConsoleOutput.txt. The application related output is in file 
SmartCloudLearningMobi.log but I don't see Tomcat related output in any log 
file
- note that catalina.2012-04-20.log is empty!
*** The problem I'm trying to solve does not exist in the development 
environment!!! ***
- note that here also, I have the Spring and Hibernate related jar files 
that I suspect are adding these INFO and DEBUG entries in 
CATALINA_HOME\common\lib\

Question:
* where are the other files such as admin.2012-04-20.log, 
catalina.2012-04-20.log, etc configured?


Live environment:
==============
* CentOS release 5.4 (Final)
Linux ip-208-109-190-155.ip.secureserver.net 2.6.18-53.el5 #1 SMP Mon Nov 12 
02:22:48 EST 2007 i686 i686 i386 GNU/Linux
* Tomcat version information:
Server version: Apache Tomcat/5.5.28
Server built:   Jul 24 2009 01:33:09
Server number:  5.5.28.0
OS Name:        Linux
OS Version:     2.6.18-53.el5
Architecture:   i386
JVM Version:    1.6.0_23-ea-b01
* There is a log4j.properties file in $CATALINA_HOME/common/classes/
(attached as log4j.properties.live.tomcat)
* There is a log4j.properties file in the application's WEB-INF/classes/
(attached as log4j.properties.live.application)
* jar files in the application's WEB-INF/lib folder:
total 500
drwxr-xr-x 2 tomcat tomcat   4096 Apr 20 01:09 .
drwxr-xr-x 4 tomcat tomcat   4096 Apr 18 23:59 ..
-rw-r--r-- 1 tomcat tomcat  60841 Sep 11  2009 commons-logging-1.1.1.jar
-rw-r--r-- 1 tomcat tomcat 391834 May 19  2009 log4j-1.2.15.jar
* log4j-1.2.15.jar is also in $CATALINA_HOME/common/lib/
* I've attached catalina.sh file
* After I start Tomcat, hit the application once in the browser, 
$CATALINA_HOME/logs/ has the following log files:
[root@ip-208-109-190-155 logs]# ls -la
total 9980
drwxr-xr-x  2 tomcat tomcat     4096 Apr 20 01:11 .
drwxr-xr-x 13 root   root       4096 Apr  9 07:31 ..
-rw-r--r--  1 root   root          0 Apr 20 01:11 admin.2012-04-20.log
-rw-r--r--  1 root   root          0 Apr 20 01:11 catalina.2012-04-20.log
-rw-r--r--  1 root   root   10178109 Apr 20 01:12 catalina.out
-rw-r--r--  1 root   root          0 Apr 20 01:11 
host-manager.2012-04-20.log
-rw-r--r--  1 root   root          0 Apr 20 01:11 localhost.2012-04-20.log
-rw-r--r--  1 root   root          0 Apr 20 01:11 manager.2012-04-20.log
-rw-r--r--  1 root   root       1468 Apr 20 01:11 SmartCloudLearning.log
-rw-r--r--  1 root   root       1113 Apr 20 01:12 SmartCloudLearningMobi.log
-rw-r--r--  1 root   root        244 Apr 20 01:11 
SmartCloudLearningMobi-QA.log
-rw-r--r--  1 root   root       1469 Apr 20 01:11 SmartCloudLearning-QA.log
-rw-r--r--  1 root   root          0 Apr 20 01:11 tomcat.log
-rw-r--r--  1 root   root          0 Apr 20 01:11 VeggieFoodie-mobile.log
* I've attached the concerned application's log file, renamed as 
SmartCloudLearningMobi.log.live
- note that logging pattern in the application's log file matches what's 
defined in the application's WEB-INF/classes/log4j.properties
- note that catalina.2012-04-20.log is empty!
- *** note that there one extra file, catalina.out that's already 10 MB ***
- I've attached only a part of the file to the email
- logging pattern in catalina.log does not match what's defined in the 
application's WEB-INF/classes/log4j.properties
- note that I have the Spring and Hibernate related jar files that I suspect 
are adding these INFO and DEBUG entries in $CATALINA_HOME/common/lib/

Question:
* who could be responsible for creating and configuring catalina.out file on 
the Linux sever? Where do I look?

Thanks for working with me on this.

Dilip

------=_NextPart_000_00C0_01CD1EDA.02D24190
Content-Type: application/x-ms-application;
	name="log4j.properties.dev.application"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename="log4j.properties.dev.application"

log4j.rootLogger=3DINFO, stdout, R

log4j.appender.stdout=3Dorg.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=3Dorg.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=3D[%5p] %d{yyyy-MM-dd =
HH:mm:ss} (%F:%M:%L) - %m%n
#log4j.appender.stdout.layout.ConversionPattern=3D[%5p] %t %d{yyyy-MM-dd =
HH:mm:ss} (%F:%M:%L) - %m%n

log4j.appender.R=3Dorg.apache.log4j.RollingFileAppender
log4j.appender.R.File=3D${catalina.home}/logs/SmartCloudLearningMobi.log
log4j.appender.R.MaxFileSize=3D10MB=20
log4j.appender.R.MaxBackupIndex=3D10=20
log4j.appender.R.layout=3Dorg.apache.log4j.PatternLayout
log4j.appender.R.layout.ConversionPattern=3D[%5p] %d{yyyy-MM-dd =
HH:mm:ss} (%F:%M:%L) - %m%n
#log4j.appender.R.layout.ConversionPattern=3D[%5p] %t %d{yyyy-MM-dd =
HH:mm:ss} (%F:%M:%L) - %m%n

log4j.logger.org.hibernate=3DERROR, stdout, R

### log HQL parse trees =20
log4j.logger.org.hibernate.hql=3DERROR, stdout, R

### Log HQL and SQL ASTs during query parsing ### =20
log4j.logger.org.hibernate.hql.ast.AST=3DERROR, stdout, R
log4j.additivity.org.hibernate.hql.ast.AST=3Dfalse

### log just the SQL =20
log4j.logger.org.hibernate.SQL=3DERROR, stdout, R
log4j.additivity.org.hibernate.SQL=3Dfalse

### log JDBC bind parameters. Very userfull, when debug parameterized =
queries ### =20
log4j.logger.org.hibernate.type=3DERROR, stdout, R
log4j.additivity.org.hibernate.type=3Dfalse

### log schema export/update ###
log4j.logger.org.hibernate.tool.hbm2ddl=3DERROR, stdout, R

### log cache activity ###
log4j.logger.org.hibernate.cache=3DERROR, stdout, R

### log transaction activity =20
log4j.logger.org.hibernate.transaction=3DERROR, stdout, R

### Log all JDBC resource acquisition =20
log4j.logger.org.hibernate.jdbc=3DERROR, stdout, R

### enable the following line if you want to track down connection ### =20
### leakages when using DriverManagerConnectionProvider ### =20
log4j.logger.org.hibernate.connection.DriverManagerConnectionProvider=3DE=
RROR, stdout, R

log4j.logger.org.hibernate.cfg=3DERROR, stdout, R


log4j.logger.org.springframework=3DERROR, stdout, R
log4j.logger.org.springframework.test.context.junit4.SpringJUnit4ClassRun=
ner=3DERROR, stdout, R

------=_NextPart_000_00C0_01CD1EDA.02D24190
Content-Type: text/plain;
	format=flowed;
	name="DevConsoleOutput.txt";
	reply-type=original
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename="DevConsoleOutput.txt"

[ INFO] 2012-04-20 08:55:50 (ApplicationContext.java:log:647) - =
Initializing
Spr
ing FrameworkServlet 'Spring MVC Dispatcher Servlet'
[ INFO] 2012-04-20 08:55:51 (MLog.java:<clinit>:80) - MLog clients using
log4j l
ogging.
[ INFO] 2012-04-20 08:55:51 (C3P0Registry.java:banner:77) - Initializing
c3p0-0.
9.0 [built 11-July-2005 00:43:29 -0400; debug? true; trace: 10]
[ INFO] 2012-04-20 08:55:52 =
(PoolBackedDataSource.java:getPoolManager:257) -
Ini
tializing c3p0 pool... com.mchange.v2.c3p0.ComboPooledDataSource@a30fd[
acquireI
ncrement -> 5, acquireRetryAttempts -> 10, acquireRetryDelay -> 1000,
autoCommit
OnClose -> false, automaticTestTable -> null, breakAfterAcquireFailure =
->
false,
 checkoutTimeout -> 0, connectionTesterClassName ->
com.mchange.v2.c3p0.impl.Def
aultConnectionTester, description -> null, driverClass ->
com.mysql.jdbc.Driver,
 factoryClassLocation -> null, forceIgnoreUnresolvedTransactions -> =
false,
ident
ityToken -> a30fd, idleConnectionTestPeriod -> 3600, initialPoolSize -> =
3,
jdbcU
rl ->
jdbc:mysql://localhost/smartcloudlearning?useUnicode=3Dtrue&characterEnco=
din
g=3DUTF8, loginTimeout -> 0, maxIdleTime -> 1800, maxPoolSize -> 25,
maxStatements
 -> 0, maxStatementsPerConnection -> 0, minPoolSize -> 1,
numHelperThreads -> 3,
 preferredTestQuery -> SELECT 1, properties -> {user=3D******,
password=3D******}, p
ropertyCycle -> 300, testConnectionOnCheckin -> false,
testConnectionOnCheckout
-> false, usesTraditionalReflectiveProxies -> false ]
[ INFO] 2012-04-20 08:55:55 (ApplicationContext.java:log:647) - =
Initializing
Spr
ing root WebApplicationContext
[ INFO] 2012-04-20 08:55:59 (ApplicationContext.java:log:647) - =
Initializing
Spr
ing FrameworkServlet 'Spring MVC Dispatcher Servlet'
[ INFO] 2012-04-20 08:56:00 (ApplicationContext.java:log:647) - =
Initializing
Spr
ing root WebApplicationContext
[ INFO] 2012-04-20 08:56:00 (ApplicationContext.java:log:647) - =
Initializing
Spr
ing FrameworkServlet 'mvc-dispatcher'
[ INFO] 2012-04-20 08:56:24
(ResourceServiceImpl.java:getResourceTypes:200) - Ge
tting resource types...
[ INFO] 2012-04-20 08:56:24
(ResourceServiceImpl.java:getResourceTypes:210) - Re
turning the following resource types:
Video
Audio
Image
Document

[ INFO] 2012-04-20 08:56:24
(OrganizationController.java:getDefaultOrganizationI
nJSON:44) - default session id
[ INFO] 2012-04-20 08:56:24
(OrganizationController.java:getDefaultOrganizationI
nJSON:45) - default email address
[ INFO] 2012-04-20 08:56:24
(OrganizationServiceImpl.java:getDefaultOrganization
:146) - getting default organization id...
[ INFO] 2012-04-20 08:56:24
(OrganizationServiceImpl.java:getDefaultOrganization
:164) - default email address : got organization Pre-sign-in =
Organization
[ INFO] 2012-04-20 08:56:24
(OrganizationController.java:getDefaultOrganizationI
nJSON:49) - got default organization

------=_NextPart_000_00C0_01CD1EDA.02D24190
Content-Type: application/x-ms-application;
	name="log4j.properties.live.application"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename="log4j.properties.live.application"

log4j.rootLogger=3DINFO, stdout, R

log4j.appender.stdout=3Dorg.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=3Dorg.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=3D[%5p] %d{yyyy-MM-dd =
HH:mm:ss} (%F:%M:%L) - %m%n
#log4j.appender.stdout.layout.ConversionPattern=3D[%5p] %t %d{yyyy-MM-dd =
HH:mm:ss} (%F:%M:%L) - %m%n

log4j.appender.R=3Dorg.apache.log4j.RollingFileAppender
log4j.appender.R.File=3D${catalina.home}/logs/SmartCloudLearningMobi.log
log4j.appender.R.MaxFileSize=3D10MB=20
log4j.appender.R.MaxBackupIndex=3D10=20
log4j.appender.R.layout=3Dorg.apache.log4j.PatternLayout
log4j.appender.R.layout.ConversionPattern=3D[%5p] %d{yyyy-MM-dd =
HH:mm:ss} (%F:%M:%L) - %m%n
#log4j.appender.R.layout.ConversionPattern=3D[%5p] %t %d{yyyy-MM-dd =
HH:mm:ss} (%F:%M:%L) - %m%n

log4j.logger.org.hibernate=3DERROR, stdout, R

### log HQL parse trees =20
log4j.logger.org.hibernate.hql=3DERROR, stdout, R

### Log HQL and SQL ASTs during query parsing ### =20
log4j.logger.org.hibernate.hql.ast.AST=3DERROR, stdout, R
log4j.additivity.org.hibernate.hql.ast.AST=3Dfalse

### log just the SQL =20
log4j.logger.org.hibernate.SQL=3DERROR, stdout, R
log4j.additivity.org.hibernate.SQL=3Dfalse

### log JDBC bind parameters. Very userfull, when debug parameterized =
queries ### =20
log4j.logger.org.hibernate.type=3DERROR, stdout, R
log4j.additivity.org.hibernate.type=3Dfalse

### log schema export/update ###
log4j.logger.org.hibernate.tool.hbm2ddl=3DERROR, stdout, R

### log cache activity ###
log4j.logger.org.hibernate.cache=3DERROR, stdout, R

### log transaction activity =20
log4j.logger.org.hibernate.transaction=3DERROR, stdout, R

### Log all JDBC resource acquisition =20
log4j.logger.org.hibernate.jdbc=3DERROR, stdout, R

### enable the following line if you want to track down connection ### =20
### leakages when using DriverManagerConnectionProvider ### =20
log4j.logger.org.hibernate.connection.DriverManagerConnectionProvider=3DE=
RROR, stdout, R

log4j.logger.org.hibernate.cfg=3DERROR, stdout, R


log4j.logger.org.springframework=3DERROR, stdout, R
log4j.logger.org.springframework.test.context.junit4.SpringJUnit4ClassRun=
ner=3DERROR, stdout, R


------=_NextPart_000_00C0_01CD1EDA.02D24190
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org
------=_NextPart_000_00C0_01CD1EDA.02D24190--


From users-return-233700-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 20 17:16:56 2012
Return-Path: <users-return-233700-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 20A0697A1
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 20 Apr 2012 17:16:56 +0000 (UTC)
Received: (qmail 37915 invoked by uid 500); 20 Apr 2012 17:16:52 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 37856 invoked by uid 500); 20 Apr 2012 17:16:52 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 37840 invoked by uid 99); 20 Apr 2012 17:16:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Apr 2012 17:16:52 +0000
X-ASF-Spam-Status: No, hits=0.3 required=5.0
	tests=PLING_QUERY,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dilipvshah@hotmail.com designates 65.55.111.84 as permitted sender)
Received: from [65.55.111.84] (HELO blu0-omc2-s9.blu0.hotmail.com) (65.55.111.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Apr 2012 17:16:39 +0000
Received: from BLU162-DS8 ([65.55.111.73]) by blu0-omc2-s9.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Fri, 20 Apr 2012 10:16:17 -0700
X-Originating-IP: [24.5.178.208]
X-Originating-Email: [dilipvshah@hotmail.com]
Message-ID: <BLU162-ds82103DF22019AB0A0B338D3220@phx.gbl>
From: "Dilip Shah" <dilipvshah@hotmail.com>
To: "Tomcat Users List" <users@tomcat.apache.org>
Subject: Re: catalina.out file is growing very rapidly! How to prevent Hibernate's INFO and DEBUG statements from getting added to catalina.out file?
Date: Fri, 20 Apr 2012 10:16:20 -0700
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_NextPart_000_01A0_01CD1EDE.A1D0C880"
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 14.0.8117.416
X-MimeOLE: Produced By Microsoft MimeOLE V14.0.8117.416
X-OriginalArrivalTime: 20 Apr 2012 17:16:17.0578 (UTC) FILETIME=[4C2578A0:01CD1F19]

------=_NextPart_000_01A0_01CD1EDE.A1D0C880
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit

(sorry for sending the same email again... the earlier delivery wasn't all 
successful since one of the attachments had .bat file extension)

The following provides clarifications / details on the environments in which 
the application is developed and then hosted:
(quite a bit of detail but I'm hoping this will help get to the root of the 
issue)

Develop environment:
=================
* Windows XP SP3
* Tomcat version information:
C:\apache-tomcat-5.5.25\bin>version
Server version: Apache Tomcat/5.5.25
Server built:   Aug 24 2007 05:33:50
Server number:  5.5.25.0
OS Name:        Windows XP
OS Version:     5.1
Architecture:   x86
JVM Version:    1.6.0_30-b12
* There is a log4j.properties file in CATALINA_HOME\common\classes\
(attached as log4j.properties.dev.tomcat)
* There is a log4j.properties file in the application's WEB-INF\classes\
(attached as log4j.properties.dev.application)
* jar files in the application's WEB-INF\lib folder:
Directory of
C:\apache-tomcat-5.5.25\webapps\SmartCloudLearningMobi\WEB-INF\lib
09/11/2009  05:35 PM            60,841 commons-logging-1.1.1.jar
05/19/2009  01:51 PM           391,834 log4j-1.2.15.jar
* log4j-1.2.15.jar is also in CATALINA_HOME\common\lib\
* I've attached catalina.bat file (renamed)
* After I start Tomcat, hit the application once in the browser and then 
shutdown Tomcat, CATALINA_HOME\logs\ has the following log files:
Directory of C:\apache-tomcat-5.5.25\logs
04/20/2012  08:33 AM    <DIR>          .
04/20/2012  08:33 AM    <DIR>          ..
04/20/2012  08:31 AM                 0 admin.2012-04-20.log
04/20/2012  08:31 AM                 0 catalina.2012-04-20.log
04/20/2012  08:31 AM                 0 host-manager.2012-04-20.log
04/20/2012  08:31 AM                 0 localhost.2012-04-20.log
04/20/2012  08:31 AM                 0 manager.2012-04-20.log
04/20/2012  08:33 AM             1,599 SmartCloudLearning.log
04/20/2012  08:33 AM             1,361 SmartCloudLearningMobi.log
04/20/2012  08:33 AM               455 SpringMVC.log
04/20/2012  08:31 AM                 0 tomcat.log
* I've attached the concerned application's log file, renamed as 
SmartCloudLearningMobi.log.dev
- note that logging pattern in the application's log file matches what's 
defined in the application's WEB-INF\classes\log4j.properties
- I see some output on the console that I have attached as file 
DevConsoleOutput.txt. The application related output is in file 
SmartCloudLearningMobi.log but I don't see Tomcat related output in any log 
file
- note that catalina.2012-04-20.log is empty!
*** The problem I'm trying to solve does not exist in the development 
environment!!! ***
- note that here also, I have the Spring and Hibernate related jar files 
that I suspect are adding these INFO and DEBUG entries in 
CATALINA_HOME\common\lib\

Question:
* where are the other files such as admin.2012-04-20.log, 
catalina.2012-04-20.log, etc configured?


Live environment:
==============
* CentOS release 5.4 (Final) Linux ip-208-109-190-155.ip.secureserver.net 
2.6.18-53.el5 #1 SMP Mon Nov 12 02:22:48 EST 2007 i686 i686 i386 GNU/Linux
* Tomcat version information:
Server version: Apache Tomcat/5.5.28
Server built:   Jul 24 2009 01:33:09
Server number:  5.5.28.0
OS Name:        Linux
OS Version:     2.6.18-53.el5
Architecture:   i386
JVM Version:    1.6.0_23-ea-b01
* There is a log4j.properties file in $CATALINA_HOME/common/classes/
(attached as log4j.properties.live.tomcat)
* There is a log4j.properties file in the application's WEB-INF/classes/
(attached as log4j.properties.live.application)
* jar files in the application's WEB-INF/lib folder:
total 500
drwxr-xr-x 2 tomcat tomcat   4096 Apr 20 01:09 .
drwxr-xr-x 4 tomcat tomcat   4096 Apr 18 23:59 ..
-rw-r--r-- 1 tomcat tomcat  60841 Sep 11  2009 commons-logging-1.1.1.jar
-rw-r--r-- 1 tomcat tomcat 391834 May 19  2009 log4j-1.2.15.jar
* log4j-1.2.15.jar is also in $CATALINA_HOME/common/lib/
* I've attached catalina.sh file
* After I start Tomcat, hit the application once in the browser, 
$CATALINA_HOME/logs/ has the following log files:
[root@ip-208-109-190-155 logs]# ls -la
total 9980
drwxr-xr-x  2 tomcat tomcat     4096 Apr 20 01:11 .
drwxr-xr-x 13 root   root       4096 Apr  9 07:31 ..
-rw-r--r--  1 root   root          0 Apr 20 01:11 admin.2012-04-20.log
-rw-r--r--  1 root   root          0 Apr 20 01:11 catalina.2012-04-20.log
-rw-r--r--  1 root   root   10178109 Apr 20 01:12 catalina.out
-rw-r--r--  1 root   root          0 Apr 20 01:11 
host-manager.2012-04-20.log
-rw-r--r--  1 root   root          0 Apr 20 01:11 localhost.2012-04-20.log
-rw-r--r--  1 root   root          0 Apr 20 01:11 manager.2012-04-20.log
-rw-r--r--  1 root   root       1468 Apr 20 01:11 SmartCloudLearning.log
-rw-r--r--  1 root   root       1113 Apr 20 01:12 SmartCloudLearningMobi.log
-rw-r--r--  1 root   root        244 Apr 20 01:11 
SmartCloudLearningMobi-QA.log
-rw-r--r--  1 root   root       1469 Apr 20 01:11 SmartCloudLearning-QA.log
-rw-r--r--  1 root   root          0 Apr 20 01:11 tomcat.log
-rw-r--r--  1 root   root          0 Apr 20 01:11 VeggieFoodie-mobile.log
* I've attached the concerned application's log file, renamed as 
SmartCloudLearningMobi.log.live
- note that logging pattern in the application's log file matches what's 
defined in the application's WEB-INF/classes/log4j.properties
- note that catalina.2012-04-20.log is empty!
- *** note that there one extra file, catalina.out that's already 10 MB ***
- I've attached only a part of the file to the email
- logging pattern in catalina.log does not match what's defined in the 
application's WEB-INF/classes/log4j.properties
- note that I have the Spring and Hibernate related jar files that I suspect 
are adding these INFO and DEBUG entries in $CATALINA_HOME/common/lib/

Question:
* who could be responsible for creating and configuring catalina.out file on 
the Linux sever? Where do I look?

Thanks for working with me on this.

Dilip
 

------=_NextPart_000_01A0_01CD1EDE.A1D0C880
Content-Type: application/x-ms-application;
	name="log4j.properties.dev.application"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename="log4j.properties.dev.application"

log4j.rootLogger=3DINFO, stdout, R

log4j.appender.stdout=3Dorg.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=3Dorg.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=3D[%5p] %d{yyyy-MM-dd =
HH:mm:ss} (%F:%M:%L) - %m%n
#log4j.appender.stdout.layout.ConversionPattern=3D[%5p] %t %d{yyyy-MM-dd =
HH:mm:ss} (%F:%M:%L) - %m%n

log4j.appender.R=3Dorg.apache.log4j.RollingFileAppender
log4j.appender.R.File=3D${catalina.home}/logs/SmartCloudLearningMobi.log
log4j.appender.R.MaxFileSize=3D10MB=20
log4j.appender.R.MaxBackupIndex=3D10=20
log4j.appender.R.layout=3Dorg.apache.log4j.PatternLayout
log4j.appender.R.layout.ConversionPattern=3D[%5p] %d{yyyy-MM-dd =
HH:mm:ss} (%F:%M:%L) - %m%n
#log4j.appender.R.layout.ConversionPattern=3D[%5p] %t %d{yyyy-MM-dd =
HH:mm:ss} (%F:%M:%L) - %m%n

log4j.logger.org.hibernate=3DERROR, stdout, R

### log HQL parse trees =20
log4j.logger.org.hibernate.hql=3DERROR, stdout, R

### Log HQL and SQL ASTs during query parsing ### =20
log4j.logger.org.hibernate.hql.ast.AST=3DERROR, stdout, R
log4j.additivity.org.hibernate.hql.ast.AST=3Dfalse

### log just the SQL =20
log4j.logger.org.hibernate.SQL=3DERROR, stdout, R
log4j.additivity.org.hibernate.SQL=3Dfalse

### log JDBC bind parameters. Very userfull, when debug parameterized =
queries ### =20
log4j.logger.org.hibernate.type=3DERROR, stdout, R
log4j.additivity.org.hibernate.type=3Dfalse

### log schema export/update ###
log4j.logger.org.hibernate.tool.hbm2ddl=3DERROR, stdout, R

### log cache activity ###
log4j.logger.org.hibernate.cache=3DERROR, stdout, R

### log transaction activity =20
log4j.logger.org.hibernate.transaction=3DERROR, stdout, R

### Log all JDBC resource acquisition =20
log4j.logger.org.hibernate.jdbc=3DERROR, stdout, R

### enable the following line if you want to track down connection ### =20
### leakages when using DriverManagerConnectionProvider ### =20
log4j.logger.org.hibernate.connection.DriverManagerConnectionProvider=3DE=
RROR, stdout, R

log4j.logger.org.hibernate.cfg=3DERROR, stdout, R


log4j.logger.org.springframework=3DERROR, stdout, R
log4j.logger.org.springframework.test.context.junit4.SpringJUnit4ClassRun=
ner=3DERROR, stdout, R

------=_NextPart_000_01A0_01CD1EDE.A1D0C880
Content-Type: text/plain;
	format=flowed;
	name="DevConsoleOutput.txt";
	reply-type=original
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename="DevConsoleOutput.txt"

[ INFO] 2012-04-20 08:55:50 (ApplicationContext.java:log:647) - =
Initializing
Spr
ing FrameworkServlet 'Spring MVC Dispatcher Servlet'
[ INFO] 2012-04-20 08:55:51 (MLog.java:<clinit>:80) - MLog clients using
log4j l
ogging.
[ INFO] 2012-04-20 08:55:51 (C3P0Registry.java:banner:77) - Initializing
c3p0-0.
9.0 [built 11-July-2005 00:43:29 -0400; debug? true; trace: 10]
[ INFO] 2012-04-20 08:55:52 =
(PoolBackedDataSource.java:getPoolManager:257) -
Ini
tializing c3p0 pool... com.mchange.v2.c3p0.ComboPooledDataSource@a30fd[
acquireI
ncrement -> 5, acquireRetryAttempts -> 10, acquireRetryDelay -> 1000,
autoCommit
OnClose -> false, automaticTestTable -> null, breakAfterAcquireFailure =
->
false,
 checkoutTimeout -> 0, connectionTesterClassName ->
com.mchange.v2.c3p0.impl.Def
aultConnectionTester, description -> null, driverClass ->
com.mysql.jdbc.Driver,
 factoryClassLocation -> null, forceIgnoreUnresolvedTransactions -> =
false,
ident
ityToken -> a30fd, idleConnectionTestPeriod -> 3600, initialPoolSize -> =
3,
jdbcU
rl ->
jdbc:mysql://localhost/smartcloudlearning?useUnicode=3Dtrue&characterEnco=
din
g=3DUTF8, loginTimeout -> 0, maxIdleTime -> 1800, maxPoolSize -> 25,
maxStatements
 -> 0, maxStatementsPerConnection -> 0, minPoolSize -> 1,
numHelperThreads -> 3,
 preferredTestQuery -> SELECT 1, properties -> {user=3D******,
password=3D******}, p
ropertyCycle -> 300, testConnectionOnCheckin -> false,
testConnectionOnCheckout
-> false, usesTraditionalReflectiveProxies -> false ]
[ INFO] 2012-04-20 08:55:55 (ApplicationContext.java:log:647) - =
Initializing
Spr
ing root WebApplicationContext
[ INFO] 2012-04-20 08:55:59 (ApplicationContext.java:log:647) - =
Initializing
Spr
ing FrameworkServlet 'Spring MVC Dispatcher Servlet'
[ INFO] 2012-04-20 08:56:00 (ApplicationContext.java:log:647) - =
Initializing
Spr
ing root WebApplicationContext
[ INFO] 2012-04-20 08:56:00 (ApplicationContext.java:log:647) - =
Initializing
Spr
ing FrameworkServlet 'mvc-dispatcher'
[ INFO] 2012-04-20 08:56:24
(ResourceServiceImpl.java:getResourceTypes:200) - Ge
tting resource types...
[ INFO] 2012-04-20 08:56:24
(ResourceServiceImpl.java:getResourceTypes:210) - Re
turning the following resource types:
Video
Audio
Image
Document

[ INFO] 2012-04-20 08:56:24
(OrganizationController.java:getDefaultOrganizationI
nJSON:44) - default session id
[ INFO] 2012-04-20 08:56:24
(OrganizationController.java:getDefaultOrganizationI
nJSON:45) - default email address
[ INFO] 2012-04-20 08:56:24
(OrganizationServiceImpl.java:getDefaultOrganization
:146) - getting default organization id...
[ INFO] 2012-04-20 08:56:24
(OrganizationServiceImpl.java:getDefaultOrganization
:164) - default email address : got organization Pre-sign-in =
Organization
[ INFO] 2012-04-20 08:56:24
(OrganizationController.java:getDefaultOrganizationI
nJSON:49) - got default organization

------=_NextPart_000_01A0_01CD1EDE.A1D0C880
Content-Type: application/x-ms-application;
	name="log4j.properties.live.application"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename="log4j.properties.live.application"

log4j.rootLogger=3DINFO, stdout, R

log4j.appender.stdout=3Dorg.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=3Dorg.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=3D[%5p] %d{yyyy-MM-dd =
HH:mm:ss} (%F:%M:%L) - %m%n
#log4j.appender.stdout.layout.ConversionPattern=3D[%5p] %t %d{yyyy-MM-dd =
HH:mm:ss} (%F:%M:%L) - %m%n

log4j.appender.R=3Dorg.apache.log4j.RollingFileAppender
log4j.appender.R.File=3D${catalina.home}/logs/SmartCloudLearningMobi.log
log4j.appender.R.MaxFileSize=3D10MB=20
log4j.appender.R.MaxBackupIndex=3D10=20
log4j.appender.R.layout=3Dorg.apache.log4j.PatternLayout
log4j.appender.R.layout.ConversionPattern=3D[%5p] %d{yyyy-MM-dd =
HH:mm:ss} (%F:%M:%L) - %m%n
#log4j.appender.R.layout.ConversionPattern=3D[%5p] %t %d{yyyy-MM-dd =
HH:mm:ss} (%F:%M:%L) - %m%n

log4j.logger.org.hibernate=3DERROR, stdout, R

### log HQL parse trees =20
log4j.logger.org.hibernate.hql=3DERROR, stdout, R

### Log HQL and SQL ASTs during query parsing ### =20
log4j.logger.org.hibernate.hql.ast.AST=3DERROR, stdout, R
log4j.additivity.org.hibernate.hql.ast.AST=3Dfalse

### log just the SQL =20
log4j.logger.org.hibernate.SQL=3DERROR, stdout, R
log4j.additivity.org.hibernate.SQL=3Dfalse

### log JDBC bind parameters. Very userfull, when debug parameterized =
queries ### =20
log4j.logger.org.hibernate.type=3DERROR, stdout, R
log4j.additivity.org.hibernate.type=3Dfalse

### log schema export/update ###
log4j.logger.org.hibernate.tool.hbm2ddl=3DERROR, stdout, R

### log cache activity ###
log4j.logger.org.hibernate.cache=3DERROR, stdout, R

### log transaction activity =20
log4j.logger.org.hibernate.transaction=3DERROR, stdout, R

### Log all JDBC resource acquisition =20
log4j.logger.org.hibernate.jdbc=3DERROR, stdout, R

### enable the following line if you want to track down connection ### =20
### leakages when using DriverManagerConnectionProvider ### =20
log4j.logger.org.hibernate.connection.DriverManagerConnectionProvider=3DE=
RROR, stdout, R

log4j.logger.org.hibernate.cfg=3DERROR, stdout, R


log4j.logger.org.springframework=3DERROR, stdout, R
log4j.logger.org.springframework.test.context.junit4.SpringJUnit4ClassRun=
ner=3DERROR, stdout, R


------=_NextPart_000_01A0_01CD1EDE.A1D0C880
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org
------=_NextPart_000_01A0_01CD1EDE.A1D0C880--


From users-return-233701-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 20 19:39:33 2012
Return-Path: <users-return-233701-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3DF50924F
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 20 Apr 2012 19:39:33 +0000 (UTC)
Received: (qmail 64441 invoked by uid 500); 20 Apr 2012 19:39:29 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 64324 invoked by uid 500); 20 Apr 2012 19:39:29 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 64315 invoked by uid 99); 20 Apr 2012 19:39:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Apr 2012 19:39:29 +0000
X-ASF-Spam-Status: No, hits=-0.4 required=5.0
	tests=PLING_QUERY,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of knst.kolinko@gmail.com designates 209.85.160.173 as permitted sender)
Received: from [209.85.160.173] (HELO mail-gy0-f173.google.com) (209.85.160.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Apr 2012 19:39:25 +0000
Received: by ghrr14 with SMTP id r14so6793176ghr.18
        for <users@tomcat.apache.org>; Fri, 20 Apr 2012 12:39:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=D6lQ6oolFNaX16eYDKI3W187aj+aQPSpD6O8pBoNY+A=;
        b=ckngsGyTVN1t4lLUCGUVrvTriLmlhE7ML9S2rY6zVcsuEXrCorQvjgZpEYMNCerKYc
         YnZmhvHAgAxeWypWESJcv5M1PtKOFF64hp4j8ae+kLEHYuE7HKB4BNtWqqbfjST72m6u
         60iGowgvixZ+Ee4N70VsmsUvP35NWT37kkclT+nvyxxqbgNkpRQkyj41Asu4L+H+fePN
         isYp4iq5PBehRqUpti4pWDOEmFFmHUtPjeQX7nIjyyLyUmfnEGKt5utZymltyqdFoK+u
         t1oTNMK+eCorbkyc9FkhwenKzuqQjodDxH6D9mp7qCiGo3UIPerF5TnjDOFkltFyBIlz
         AWxw==
MIME-Version: 1.0
Received: by 10.236.37.168 with SMTP id y28mr663049yha.111.1334950744590; Fri,
 20 Apr 2012 12:39:04 -0700 (PDT)
Received: by 10.146.161.7 with HTTP; Fri, 20 Apr 2012 12:39:04 -0700 (PDT)
In-Reply-To: <BLU162-ds17349592A08291CD68D932D3220@phx.gbl>
References: <BLU162-ds17349592A08291CD68D932D3220@phx.gbl>
Date: Fri, 20 Apr 2012 23:39:04 +0400
Message-ID: <CABzHfVk9HWEFBS8b2-2MS0X4LYbD_NOn5w1ncuqWm21_PkRmbA@mail.gmail.com>
Subject: Re: catalina.out file is growing very rapidly! How to prevent
 Hibernate's INFO and DEBUG statements from getting added to catalina.out file?
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

2012/4/20 Dilip Shah <dilipvshah@hotmail.com>:
> The following provides clarifications / details on the environments in wh=
ich
> the application is developed and then hosted:
> (quite a bit of detail but I'm hoping this will help get to the root of t=
he
> issue)
>
> Develop environment:
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> * Windows XP SP3
> * Tomcat version information:
> C:\apache-tomcat-5.5.25\bin>version
> Server version: Apache Tomcat/5.5.25
> Server built: =A0 Aug 24 2007 05:33:50
> Server number: =A05.5.25.0
> OS Name: =A0 =A0 =A0 =A0Windows XP
> OS Version: =A0 =A0 5.1
> Architecture: =A0 x86
> JVM Version: =A0 =A01.6.0_30-b12
>(...)
> Live environment:
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> * CentOS release 5.4 (Final)
> Linux ip-208-109-190-155.ip.secureserver.net 2.6.18-53.el5 #1 SMP Mon Nov=
 12
> 02:22:48 EST 2007 i686 i686 i386 GNU/Linux
> * Tomcat version information:
>
> Server version: Apache Tomcat/5.5.28
> Server built: =A0 Jul 24 2009 01:33:09
> Server number: =A05.5.28.0
> OS Name: =A0 =A0 =A0 =A0Linux
> OS Version: =A0 =A0 2.6.18-53.el5
> Architecture: =A0 i386
> JVM Version: =A0 =A01.6.0_23-ea-b01
> (...)

1. This list generally does not allow attachments.

It may allow ones that have text/plain as their mime type (e.g. files
with *.txt extension), but it is nowhere written.

2. I'll comment on the files that you sent to me directly.

DevConsoleOutput.txt (that is console output on the Windows machine) contai=
ns:

[[[
[ INFO] 2012-04-20 08:55:55 (ApplicationContext.java:log:647) -
Initializing Spring root WebApplicationContext
]]]

catalina.out (from live system on CentOS) contains:
[[[
[ INFO] 2012-04-20 01:11:41 (ApplicationContext.java:log:653) -
Initializing Spring root WebApplicationContext
SLF4J: Class path contains multiple SLF4J bindings.
SLF4J: Found binding in
[jar:file:/usr/java/tomcat-5.5/common/lib/logback-classic.jar!/org/slf4j/im=
pl/StaticLoggerBinder.class]
SLF4J: Found binding in
[jar:file:/usr/java/tomcat-5.5/common/lib/slf4j-log4j12-1.5.2.jar!/org/slf4=
j/impl/StaticLoggerBinder.class]
SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explana=
tion.
]]]

Note:
1. Different source line numbers in ApplicationContext logging output.

That is - you run with different libraries in Dev vs Production.  That
is besides the different versions of Tomcat.

2. Note the SLF4J logging library complaining that you have multiple
conflicting copies of the library.

There is no such SF4J warning in your dev environment. Starting with
it your logging goes crazy.

You have some mess in your common/lib.
You'd better remove all libs that do not belong to the default Tomcat
configuration and features configured in server.xml/context.xml files
(e.g. JDBC drivers) and keep them inside of your webapp.

> Question:
> * where are the other files such as admin.2012-04-20.log, catalina.2012-0=
4-20.log, etc configured?

It is a bit complicated. In short:

1. Tomcat 5.5 -> uses Apache Common Logging library

2. Apache Common Logging library -> decides whether to use log4j or
java.util.logging (differently in each classloader, depending on what
classes are available).

3. java.util.logging  configuration is specified in
conf/logging.properties. It creates those files.

> Question:
> * who could be responsible for creating and configuring catalina.out file=
 on the Linux sever? Where do I look?

The last executed line of catalina.sh (the one that starts Tomcat)
redirects stderr and stdout streams from started java application - by
default to that file.

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233702-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 20 19:48:19 2012
Return-Path: <users-return-233702-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8C7119CD6
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 20 Apr 2012 19:48:19 +0000 (UTC)
Received: (qmail 94756 invoked by uid 500); 20 Apr 2012 19:48:16 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 94709 invoked by uid 500); 20 Apr 2012 19:48:16 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 94699 invoked by uid 99); 20 Apr 2012 19:48:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Apr 2012 19:48:15 +0000
X-ASF-Spam-Status: No, hits=0.9 required=5.0
	tests=PLING_QUERY,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [76.96.59.227] (HELO qmta12.westchester.pa.mail.comcast.net) (76.96.59.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Apr 2012 19:48:09 +0000
Received: from omta18.westchester.pa.mail.comcast.net ([76.96.62.90])
	by qmta12.westchester.pa.mail.comcast.net with comcast
	id 0Gjn1j0021wpRvQ5CKnppx; Fri, 20 Apr 2012 19:47:49 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta18.westchester.pa.mail.comcast.net with comcast
	id 0Knn1j01d38FjT13eKno5R; Fri, 20 Apr 2012 19:47:48 +0000
Message-ID: <4F91BD64.3070808@christopherschultz.net>
Date: Fri, 20 Apr 2012 15:47:48 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: catalina.out file is growing very rapidly! How to prevent Hibernate's
 INFO and DEBUG statements from getting added to catalina.out file?
References: <BLU162-ds17349592A08291CD68D932D3220@phx.gbl>
In-Reply-To: <BLU162-ds17349592A08291CD68D932D3220@phx.gbl>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Dilip,

On 4/20/12 12:43 PM, Dilip Shah wrote:
> The following provides clarifications / details on the environments
> in which the application is developed and then hosted: (quite a bit
> of detail but I'm hoping this will help get to the root of the
> issue)
> 
> Develop environment: ================= * Windows XP SP3

You should upgrade, eventually. IIRC, Microsoft just extended support
for WinXP (again) but it's quite long in the tooth.

> * Tomcat version information: C:\apache-tomcat-5.5.25\bin>version 
> Server version: Apache Tomcat/5.5.25

Same here. 5.5.x will reach end-of-life in September 2012. It's time
to start testing your applications with a new version of Tomcat. I
recommend skipping all the way up to 7.0.x.

> * There is a log4j.properties file in
> CATALINA_HOME\common\classes\ (attached as
> log4j.properties.dev.tomcat)

This will confuse things.

> * There is a log4j.properties file in the application's
> WEB-INF\classes\ (attached as log4j.properties.dev.application)

This is where this file belongs.

> * jar files in the application's WEB-INF\lib folder: Directory of 
> C:\apache-tomcat-5.5.25\webapps\SmartCloudLearningMobi\WEB-INF\lib 
> 09/11/2009  05:35 PM            60,841 commons-logging-1.1.1.jar 
> 05/19/2009  01:51 PM           391,834 log4j-1.2.15.jar

This is where log4j.jar belongs. Are you also using commons-logging in
your own webapp -- or does some component require it? If not, remove
it because it will just cause confusion. (Note that many Apache
libraries do require commons-logging).

> * log4j-1.2.15.jar is also in CATALINA_HOME\common\lib\

This will confuse things.

If all is as it should be, the libraries in common/lib and the
log4j.properties file in common/classes should both be ignored if you
are initializing log4j from within your own webapp (are you? or is
some other component initializing it?): the ClassLoader should be
loading resources from WEB-INF/classes and WEB-INF/lib before it tries
to load from common/*.

If you are using a library stored in common/lib or a class in
common/classes that is initializing log4j, then you may be getting
both the common library and the common configuration loaded, depending
on exactly how the initialization is done.

Would it be possible to remove everything from common/*? It seemed
like a good idea at the time, but common/* turns out to be a really
bad idea for a number of reasons.

> *** The problem I'm trying to solve does not exist in the
> development environment!!! ***

Obviously, there is some difference. What are those differences?

> - note that here also, I have the Spring and Hibernate related jar
> files that I suspect are adding these INFO and DEBUG entries in 
> CATALINA_HOME\common\lib\

Stop doing that. If you use Hibernate directly in your app (or Spring
does it for you, which is more likely) then these libraries ought to
be in WEB-INF/lib.

> Question: * where are the other files such as
> admin.2012-04-20.log, catalina.2012-04-20.log, etc configured?

If you are using JULI, then they should be configured in
logging.properties. Read the "Logging" section of the User's Guide for
details. Note that this is "server" logging and not application logging.

> Question: * who could be responsible for creating and configuring
> catalina.out file on the Linux sever? Where do I look?

As Konstantin says under separate cover, catalina.out is redirected
stdout. The only place that filename should appear is in bin/catalina.sh.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+RvWQACgkQ9CaO5/Lv0PCdGQCgghtjinWYH4z2I46la7SI7NwI
YNsAn3QT7qKbojGkAc40UdeBiELbqY8X
=wMTJ
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233703-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 20 20:26:54 2012
Return-Path: <users-return-233703-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2A8AA9DDB
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 20 Apr 2012 20:26:54 +0000 (UTC)
Received: (qmail 80549 invoked by uid 500); 20 Apr 2012 20:26:50 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 80442 invoked by uid 500); 20 Apr 2012 20:26:50 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 80429 invoked by uid 99); 20 Apr 2012 20:26:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Apr 2012 20:26:50 +0000
X-ASF-Spam-Status: No, hits=0.3 required=5.0
	tests=PLING_QUERY,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dilipvshah@hotmail.com designates 65.55.111.92 as permitted sender)
Received: from [65.55.111.92] (HELO blu0-omc2-s17.blu0.hotmail.com) (65.55.111.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Apr 2012 20:26:43 +0000
Received: from BLU162-DS15 ([65.55.111.71]) by blu0-omc2-s17.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Fri, 20 Apr 2012 13:26:21 -0700
X-Originating-IP: [207.62.246.62]
X-Originating-Email: [dilipvshah@hotmail.com]
Message-ID: <BLU162-ds159CEB27401FB22CE47B64D3220@phx.gbl>
From: "Dilip Shah" <dilipvshah@hotmail.com>
To: "Tomcat Users List" <users@tomcat.apache.org>
References: <BLU162-ds17349592A08291CD68D932D3220@phx.gbl> <4F91BD64.3070808@christopherschultz.net>
In-Reply-To: <4F91BD64.3070808@christopherschultz.net>
Subject: Re: catalina.out file is growing very rapidly! How to prevent Hibernate's INFO and DEBUG statements from getting added to catalina.out file?
Date: Fri, 20 Apr 2012 13:26:22 -0700
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="utf-8";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 14.0.8117.416
X-MimeOLE: Produced By Microsoft MimeOLE V14.0.8117.416
X-OriginalArrivalTime: 20 Apr 2012 20:26:21.0843 (UTC) FILETIME=[D99E3630:01CD1F33]

Konstantin and Chris,

Very much appreciate your observations and suggestions. To start with, I'm 
going to streamline the jar files in common/lib and WEB-INF/lib. If that 
still doesn't help, I'll bite the bullet and upgrade to Tomcat 7. Any 
suggested reading on delta between 5.5 and 7.x, steps to follow, what to 
look for / be careful of when upgrading from Tomcat 5.5 to 7?

I'll come back with my discoveries as I implement your suggestions.

Thanks,

Dilip

--------------------------------------------------
From: "Christopher Schultz" <chris@christopherschultz.net>
Sent: Friday, April 20, 2012 12:47 PM
To: "Tomcat Users List" <users@tomcat.apache.org>
Subject: Re: catalina.out file is growing very rapidly! How to prevent 
Hibernate's INFO and DEBUG statements from getting added to catalina.out 
file?

> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Dilip,
>
> On 4/20/12 12:43 PM, Dilip Shah wrote:
>> The following provides clarifications / details on the environments
>> in which the application is developed and then hosted: (quite a bit
>> of detail but I'm hoping this will help get to the root of the
>> issue)
>>
>> Develop environment: ================= * Windows XP SP3
>
> You should upgrade, eventually. IIRC, Microsoft just extended support
> for WinXP (again) but it's quite long in the tooth.
>
>> * Tomcat version information: C:\apache-tomcat-5.5.25\bin>version
>> Server version: Apache Tomcat/5.5.25
>
> Same here. 5.5.x will reach end-of-life in September 2012. It's time
> to start testing your applications with a new version of Tomcat. I
> recommend skipping all the way up to 7.0.x.
>
>> * There is a log4j.properties file in
>> CATALINA_HOME\common\classes\ (attached as
>> log4j.properties.dev.tomcat)
>
> This will confuse things.
>
>> * There is a log4j.properties file in the application's
>> WEB-INF\classes\ (attached as log4j.properties.dev.application)
>
> This is where this file belongs.
>
>> * jar files in the application's WEB-INF\lib folder: Directory of
>> C:\apache-tomcat-5.5.25\webapps\SmartCloudLearningMobi\WEB-INF\lib
>> 09/11/2009  05:35 PM            60,841 commons-logging-1.1.1.jar
>> 05/19/2009  01:51 PM           391,834 log4j-1.2.15.jar
>
> This is where log4j.jar belongs. Are you also using commons-logging in
> your own webapp -- or does some component require it? If not, remove
> it because it will just cause confusion. (Note that many Apache
> libraries do require commons-logging).
>
>> * log4j-1.2.15.jar is also in CATALINA_HOME\common\lib\
>
> This will confuse things.
>
> If all is as it should be, the libraries in common/lib and the
> log4j.properties file in common/classes should both be ignored if you
> are initializing log4j from within your own webapp (are you? or is
> some other component initializing it?): the ClassLoader should be
> loading resources from WEB-INF/classes and WEB-INF/lib before it tries
> to load from common/*.
>
> If you are using a library stored in common/lib or a class in
> common/classes that is initializing log4j, then you may be getting
> both the common library and the common configuration loaded, depending
> on exactly how the initialization is done.
>
> Would it be possible to remove everything from common/*? It seemed
> like a good idea at the time, but common/* turns out to be a really
> bad idea for a number of reasons.
>
>> *** The problem I'm trying to solve does not exist in the
>> development environment!!! ***
>
> Obviously, there is some difference. What are those differences?
>
>> - note that here also, I have the Spring and Hibernate related jar
>> files that I suspect are adding these INFO and DEBUG entries in
>> CATALINA_HOME\common\lib\
>
> Stop doing that. If you use Hibernate directly in your app (or Spring
> does it for you, which is more likely) then these libraries ought to
> be in WEB-INF/lib.
>
>> Question: * where are the other files such as
>> admin.2012-04-20.log, catalina.2012-04-20.log, etc configured?
>
> If you are using JULI, then they should be configured in
> logging.properties. Read the "Logging" section of the User's Guide for
> details. Note that this is "server" logging and not application logging.
>
>> Question: * who could be responsible for creating and configuring
>> catalina.out file on the Linux sever? Where do I look?
>
> As Konstantin says under separate cover, catalina.out is redirected
> stdout. The only place that filename should appear is in bin/catalina.sh.
>
> - -chris
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
> Comment: GPGTools - http://gpgtools.org
> Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/
>
> iEYEARECAAYFAk+RvWQACgkQ9CaO5/Lv0PCdGQCgghtjinWYH4z2I46la7SI7NwI
> YNsAn3QT7qKbojGkAc40UdeBiELbqY8X
> =wMTJ
> -----END PGP SIGNATURE-----
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233704-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 20 20:31:02 2012
Return-Path: <users-return-233704-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 28AA79AA6
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 20 Apr 2012 20:31:02 +0000 (UTC)
Received: (qmail 91785 invoked by uid 500); 20 Apr 2012 20:30:59 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 91624 invoked by uid 500); 20 Apr 2012 20:30:58 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 91614 invoked by uid 99); 20 Apr 2012 20:30:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Apr 2012 20:30:58 +0000
X-ASF-Spam-Status: No, hits=-0.4 required=5.0
	tests=PLING_QUERY,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of knst.kolinko@gmail.com designates 209.85.160.173 as permitted sender)
Received: from [209.85.160.173] (HELO mail-gy0-f173.google.com) (209.85.160.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Apr 2012 20:30:52 +0000
Received: by ghrr14 with SMTP id r14so6827756ghr.18
        for <users@tomcat.apache.org>; Fri, 20 Apr 2012 13:30:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=JzSrMfwdjSY4xGHY7GRstxvjBHcrfXQzefceLTrAwVg=;
        b=OVQIbEUPLyYEBSRxgZwFG+Z2SHiQPe4I3p5YlP/NN4QTw3iBhE4TOBZqvONNRU6Tn5
         bSxLLubBg0OgoQ1OzNNxKoBkYIOlK4Y6cqWCcRuhVN2ZHRZLSSlUjQr0LinY426c9FL7
         MuL3OcGc9AsCzPOeCzwVgQpqmfn/xZ3vdBBihTczQGGSbqPKhjf2i7bwA16uJOCPThou
         VKIWIPu0ZwUTVxT8EYjWnKKfDgQ7N3rwBaLDtE01u8KfQ0p+muxQYulUtcY7yGqBDMl5
         6zMri4MvqRMCBhib+7eipJdw/3kXXIu2snxEIG19Sh2Tscdu04HdoAj5RFxNInfUDalh
         dVBA==
MIME-Version: 1.0
Received: by 10.101.166.32 with SMTP id t32mr2212097ano.41.1334953832078; Fri,
 20 Apr 2012 13:30:32 -0700 (PDT)
Received: by 10.146.161.7 with HTTP; Fri, 20 Apr 2012 13:30:31 -0700 (PDT)
In-Reply-To: <BLU162-ds159CEB27401FB22CE47B64D3220@phx.gbl>
References: <BLU162-ds17349592A08291CD68D932D3220@phx.gbl>
	<4F91BD64.3070808@christopherschultz.net>
	<BLU162-ds159CEB27401FB22CE47B64D3220@phx.gbl>
Date: Sat, 21 Apr 2012 00:30:31 +0400
Message-ID: <CABzHfV=bAyn0qcHmzvRmobMJ2u7ujrY6CqG5MmbAE+hSWmWEHg@mail.gmail.com>
Subject: Re: catalina.out file is growing very rapidly! How to prevent
 Hibernate's INFO and DEBUG statements from getting added to catalina.out file?
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

2012/4/21 Dilip Shah <dilipvshah@hotmail.com>:
> Konstantin and Chris,
>
> Very much appreciate your observations and suggestions. To start with, I'm
> going to streamline the jar files in common/lib and WEB-INF/lib. If that
> still doesn't help, I'll bite the bullet and upgrade to Tomcat 7. Any
> suggested reading on delta between 5.5 and 7.x, steps to follow, what to
> look for / be careful of when upgrading from Tomcat 5.5 to 7?
>

http://tomcat.apache.org/migration.html
http://tomcat.apache.org/tomcat-7.0-doc/security-howto.html

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233705-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 20 21:47:55 2012
Return-Path: <users-return-233705-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 256F492F1
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 20 Apr 2012 21:47:55 +0000 (UTC)
Received: (qmail 82449 invoked by uid 500); 20 Apr 2012 21:47:51 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 82408 invoked by uid 500); 20 Apr 2012 21:47:51 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 82396 invoked by uid 99); 20 Apr 2012 21:47:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Apr 2012 21:47:51 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=MSGID_MULTIPLE_AT,RCVD_IN_DNSWL_NONE,SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.25.134.20] (HELO mailout08.t-online.de) (194.25.134.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Apr 2012 21:47:43 +0000
Received: from fwd22.aul.t-online.de (fwd22.aul.t-online.de )
	by mailout08.t-online.de with smtp 
	id 1SLLfn-0005Zz-2v; Fri, 20 Apr 2012 23:47:23 +0200
Received: from Preissa (SyTBtyZdZhHWXbP4WzBMoUMPON3iHbikeUk9QroO6qPL21UAjw4mQUWgggL77bDZ3f@[217.95.115.213]) by fwd22.t-online.de
	with esmtp id 1SLLfY-03MR4S0; Fri, 20 Apr 2012 23:47:08 +0200
From: =?utf-8?Q?Konstantin_Prei=C3=9Fer?= <verlag.preisser@t-online.de>
To: "'Tomcat Users List'" <users@tomcat.apache.org>
Subject: BufferOverflowException in Tomcat 7.0.x at AjpAprProcessor.output()
Date: Fri, 20 Apr 2012 23:47:06 +0200
Message-ID: <000001cd1f3f$217c5710$64750530$@preisser@t-online.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Ac0fPyFLZaA2Tb7sTr64ZM7pAX3rhQ==
Content-Language: de
X-ID: SyTBtyZdZhHWXbP4WzBMoUMPON3iHbikeUk9QroO6qPL21UAjw4mQUWgggL77bDZ3f
X-TOI-MSGID: a0e781bf-1fea-49b8-bdab-76b27d786e22

Hi all,

some time ago, I wrote about a BufferOverflowException which I got =
sporadically on my Tomcat 7.0.21 [1], when using the AJP-APR-Connector.
However, at that time I couldn't reproduce the exception.

When I looked at this again today, I was able to create a client that =
sends an AJP message and aborts the connection, resulting in the =
BufferOverflowException in Tomcat. I was using Tomcat 7.0.27 with Tomcat =
Native 1.1.23, on Oracle JDK 1.7.0_03 and Windows 7 32-bit.


To reproduce,

1. On the Server side, create a web application containing a servlet =
which will generate some random data:

@WebServlet("/index.html")
public class MyTestServlet extends HttpServlet {
    private static final long serialVersionUID =3D 1L;
      =20
    protected void doGet(HttpServletRequest request, HttpServletResponse =
response) throws ServletException, IOException {
        try {
            response.setContentType("text/plain");
            response.setCharacterEncoding("utf-8");
           =20
            byte[] bytesToWrite =3D {48, 49, 50, 51, 52, 53, 54, 55, 56, =
57};
           =20
            // Try to write 1,000,000 bytes to the client.
            try (OutputStream out =3D response.getOutputStream()) {
                for (int i =3D 0; i < 100000; i++) {
                    out.write(bytesToWrite);
                }
            }
           =20
        } catch (IOException ex) {
            // Ignore
        }
    }
}

Deploy the application as ROOT, so that the servlet will be reachable at =
"/".
Configure Tomcat to have an AJP-APR connector listening on port 8009.


2. On the client side, create a program like this:

public class AjpTester {
    public static void main(String[] args) throws IOException {

        byte[] ajpPacketBytes =3D { // JK_AJP13_FORWARD_REQUEST for "/"
            0x12, 0x34, 0x00, 0x54, 0x02, 0x02, 0x00, 0x08,
            0x48, 0x54, 0x54, 0x50, 0x2f, 0x31, 0x2e, 0x31,
            0x00, 0x00, 0x01, 0x2f, 0x00, 0x00, 0x07, 0x31,
            0x2e, 0x32, 0x2e, 0x33, 0x2e, 0x34, 0x00, 0x00,
            0x07, 0x31, 0x2e, 0x32, 0x2e, 0x33, 0x2e, 0x34,
            0x00, 0x00, 0x09, 0x6c, 0x6f, 0x63, 0x61, 0x6c,
            0x68, 0x6f, 0x73, 0x74, 0x00, 0x00, 0x50, 0x00,
            0x00, 0x02, (byte)0xa0, 0x06, 0x00, 0x0a, 0x4b, 0x65,
            0x65, 0x70, 0x2d, 0x41, 0x6c, 0x69, 0x76, 0x65,
            0x00, (byte)0xa0, 0x0b, 0x00, 0x09, 0x6c, 0x6f, 0x63,
            0x61, 0x6c, 0x68, 0x6f, 0x73, 0x74, 0x00, (byte)0xff
        };

        Socket s =3D new Socket("localhost", 8009); // connect to AJP =
port
        OutputStream sout =3D s.getOutputStream();
        InputStream sin =3D s.getInputStream();

        sout.write(ajpPacketBytes); // request Url "/"

        // Read between 10,000 and 11,023 bytes, then exit the JVM
        byte[] buf =3D new byte[1024];
        int read;
        int bytesRead =3D 0;
        while ((read =3D sin.read(buf)) > 0) {
            bytesRead +=3D read;
            if (bytesRead >=3D 10000) {
                System.exit(1);
            }
        }
    }
}

The client will send an JK_AJP13_FORWARD_REQUEST message which requests =
URL "/" and sends "Connection: keep-alive" and "Host: localhost" =
headers.


3. Tomcat will display this exception:

Apr 20, 2012 10:57:08 PM org.apache.coyote.ajp.AjpAprProcessor process
Schwerwiegend: Error processing request
java.nio.BufferOverflowException
	at java.nio.DirectByteBuffer.put(DirectByteBuffer.java:357)
	at =
org.apache.coyote.ajp.AjpAprProcessor.output(AjpAprProcessor.java:285)
	at =
org.apache.coyote.ajp.AbstractAjpProcessor$SocketOutputBuffer.doWrite(Abs=
tractAjpProcessor.java:1119)
	at org.apache.coyote.Response.doWrite(Response.java:504)
	at =
org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.ja=
va:383)
	at org.apache.tomcat.util.buf.ByteChunk.flushBuffer(ByteChunk.java:462)
	at =
org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:334)=

	at =
org.apache.catalina.connector.OutputBuffer.close(OutputBuffer.java:283)
	at =
org.apache.catalina.connector.Response.finishResponse(Response.java:511)
	at =
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:43=
4)
	at =
org.apache.coyote.ajp.AjpAprProcessor.process(AjpAprProcessor.java:197)
	at =
org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(Abst=
ractProtocol.java:565)
	at =
org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.ja=
va:1812)
	at =
java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java=
:1110)
	at =
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.jav=
a:603)
	at java.lang.Thread.run(Thread.java:722)


I guess the exception itself is harmless, but it may fill up log files, =
if clients disconnect frequently while receiving data.
Note that before that exception occurs, a regular "ClientAbortException: =
 java.io.IOException: Failed to send AJP message" is thrown by =
org.apache.catalina.connector.OutputBuffer.realWriteBytes(OutputBuffer.ja=
va:388).

The exception occurs neither with AJP-BIO nor with AJP-NIO.


Regards,
Konstantin Prei=C3=9Fer


[1] http://markmail.org/message/zogi3tfbz2kyw3jg


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233706-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 20 22:50:45 2012
Return-Path: <users-return-233706-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 00A07979C
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 20 Apr 2012 22:50:44 +0000 (UTC)
Received: (qmail 42887 invoked by uid 500); 20 Apr 2012 22:50:41 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 42682 invoked by uid 500); 20 Apr 2012 22:50:41 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 42671 invoked by uid 99); 20 Apr 2012 22:50:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Apr 2012 22:50:41 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of knst.kolinko@gmail.com designates 209.85.160.173 as permitted sender)
Received: from [209.85.160.173] (HELO mail-gy0-f173.google.com) (209.85.160.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Apr 2012 22:50:35 +0000
Received: by ghrr14 with SMTP id r14so6879490ghr.18
        for <users@tomcat.apache.org>; Fri, 20 Apr 2012 15:50:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=4TW/Q7Giwql/JUT2s5SPC+P/mrweriWK2HpoDxk0Z40=;
        b=0s9thK6o4DgOWOwHCDJd/RnLN6o+Rz9qsynZQVh+x6eaFcJ0tjQbvf1RrxV1r/lF2N
         nCzgSctccE2UJlPg+AICe7SjN+bs03micdDinmC2szw1e+qQLLt8ulhFB16nS+fRq443
         wz7SvL1ma7MRcvKf8O1zvGYNEt/QXmgrebXo944itwsIk01Go/YEJaQZx2aU6njkDhwT
         jBIDSB4X5WaTBbazzyVtqapGZwmQHej5/fyIxVzI0xLsJaeVb7j4DpMV+gZiyi178US+
         nl6ghFOYsV0rECuh+nyB3dAragMjZnlnecJ/uLktZbZNY6tVPI6WDrS05sGKXXvEFnKC
         pqzQ==
MIME-Version: 1.0
Received: by 10.236.73.169 with SMTP id v29mr7555098yhd.12.1334962214632; Fri,
 20 Apr 2012 15:50:14 -0700 (PDT)
Received: by 10.146.161.7 with HTTP; Fri, 20 Apr 2012 15:50:14 -0700 (PDT)
In-Reply-To: <4f91d98a.ea38440a.5505.6460SMTPIN_ADDED@mx.google.com>
References: <4f91d98a.ea38440a.5505.6460SMTPIN_ADDED@mx.google.com>
Date: Sat, 21 Apr 2012 02:50:14 +0400
Message-ID: <CABzHfV=s84ON-OCN5vquPe2PW6t8MU-CRso3AQ-d5sdkyTOsmA@mail.gmail.com>
Subject: Re: BufferOverflowException in Tomcat 7.0.x at AjpAprProcessor.output()
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

2012/4/21 Konstantin Prei=DFer <verlag.preisser@t-online.de>:
> Hi all,
>
> some time ago, I wrote about a BufferOverflowException which I got sporad=
ically on my Tomcat 7.0.21 [1], when using the AJP-APR-Connector.
> However, at that time I couldn't reproduce the exception.
>
> When I looked at this again today, I was able to create a client that sen=
ds an AJP message and aborts the connection, resulting in the BufferOverflo=
wException in Tomcat. I was using Tomcat 7.0.27 with Tomcat Native 1.1.23, =
on Oracle JDK 1.7.0_03 and Windows 7 32-bit.
> (...)

Good report. Can you add this to Bugzilla?

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233707-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 20 23:00:52 2012
Return-Path: <users-return-233707-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3459B9984
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 20 Apr 2012 23:00:52 +0000 (UTC)
Received: (qmail 65260 invoked by uid 500); 20 Apr 2012 23:00:48 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 65204 invoked by uid 500); 20 Apr 2012 23:00:48 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 65194 invoked by uid 99); 20 Apr 2012 23:00:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Apr 2012 23:00:48 +0000
X-ASF-Spam-Status: No, hits=0.3 required=5.0
	tests=PLING_QUERY,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.138.91.225] (HELO nm3-vm5.bullet.mail.ne1.yahoo.com) (98.138.91.225)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 20 Apr 2012 23:00:39 +0000
Received: from [98.138.90.54] by nm3.bullet.mail.ne1.yahoo.com with NNFMP; 20 Apr 2012 23:00:18 -0000
Received: from [98.138.87.9] by tm7.bullet.mail.ne1.yahoo.com with NNFMP; 20 Apr 2012 23:00:18 -0000
Received: from [127.0.0.1] by omp1009.mail.ne1.yahoo.com with NNFMP; 20 Apr 2012 23:00:18 -0000
X-Yahoo-Newman-Property: ymail-5
X-Yahoo-Newman-Id: 21430.40417.bm@omp1009.mail.ne1.yahoo.com
Received: (qmail 12311 invoked by uid 60001); 20 Apr 2012 23:00:17 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1334962817; bh=lB7DbZLkDTvCg8S97yFj17Ltr0fNzHkExVKuFi7oK2c=; h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=ydbk2GG9xRhLz1rnavDb3QJ/vIsM8a53OBk/ssmDu5I1sTGTopDvV8mo0wtXy2iCUz6dJxAld5uBrM6mEHSAtl9mEDbSCBrBm9dw/MvO8dF+QiEAzbGwFE/yutb0UaNkfbLGYidChPuNlFAT8aETVsoAllKyahcS9hw6WoTdCeM=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=HJZhLPLkXxGLpetQucYAGyGPyoO6pAOrbVxp+tpX4eX++YzHAwKUyLQ8bqu7/St56uXGusMtuPIdsdBpOAevJiZREVQkIPwNyzaM2bJ95vY0kQB3RcBjEk8oUzi7iamgu/OUXR03quygOLA+4Fu6Ss58qjtkoEF9kPMfQojIFwM=;
X-YMail-OSG: 1.2KyBMVM1k623TlLWiVQvWkHNtSivobL7m6s4_u1WDhy5Y
 SIYgwqzEKFmI1g20il7RABvPGG5Zl2PAC2dQxA3YFDC0r6v07LAC2Z4.y4Jo
 n68NPoVX0bBNI_6SwtzpPkSfcAekIGf0kdnmI424lBo78zN3fFXa6YjRe8Tc
 cV6O8w1FZSF4xSCn0rPzEFz_RrQy3nzYvPJG2DF06QfaHcGFjGMjty9gn6bm
 .Pb4A5rwowpz6caQmt7wmDQJi9THwMUlm0K8Jjs4A8ATZgnYRmiwhrOf7qZA
 yE8z6Lh1H12tI_pfskYfO04bTKFJdtkA.Pitd_HLGsCLIC.NQ86xs0XGnTA4
 s4hTtJO.NV7EjXs47QxJ1438cJJRJICBT33ShVcJqQTob_EI7UyBboDKEDLi
 MB6doeiJdSjTYVg4lgfYMpvmWtPK99l00pHlcp733CSJeSao1lRPQlitgvTQ
 FtwU.j1YlPDERmEqdSD6L25IFkbpP
Received: from [71.129.34.200] by web125505.mail.ne1.yahoo.com via HTTP; Fri, 20 Apr 2012 16:00:17 PDT
X-Mailer: YahooMailWebService/0.8.117.340979
References: <BLU162-ds17349592A08291CD68D932D3220@phx.gbl> <4F91BD64.3070808@christopherschultz.net> <BLU162-ds159CEB27401FB22CE47B64D3220@phx.gbl> <CABzHfV=bAyn0qcHmzvRmobMJ2u7ujrY6CqG5MmbAE+hSWmWEHg@mail.gmail.com>
Message-ID: <1334962817.10959.YahooMailNeo@web125505.mail.ne1.yahoo.com>
Date: Fri, 20 Apr 2012 16:00:17 -0700 (PDT)
From: Mark Eggers <its_toasted@yahoo.com>
Reply-To: Mark Eggers <its_toasted@yahoo.com>
Subject: Re: catalina.out file is growing very rapidly! How to prevent Hibernate's INFO and DEBUG statements from getting added to catalina.out file?
To: Tomcat Users List <users@tomcat.apache.org>
In-Reply-To: <CABzHfV=bAyn0qcHmzvRmobMJ2u7ujrY6CqG5MmbAE+hSWmWEHg@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

----- Original Message -----

> From: Konstantin Kolinko <knst.kolinko@gmail.com>
> To: Tomcat Users List <users@tomcat.apache.org>
> Cc: 
> Sent: Friday, April 20, 2012 1:30 PM
> Subject: Re: catalina.out file is growing very rapidly! How to prevent Hibernate's INFO and DEBUG statements from getting added to catalina.out file?
> 
> 2012/4/21 Dilip Shah <dilipvshah@hotmail.com>:
>>  Konstantin and Chris,
>> 
>>  Very much appreciate your observations and suggestions. To start with, 
> I'm
>>  going to streamline the jar files in common/lib and WEB-INF/lib. If that
>>  still doesn't help, I'll bite the bullet and upgrade to Tomcat 7. 
> Any
>>  suggested reading on delta between 5.5 and 7.x, steps to follow, what to
>>  look for / be careful of when upgrading from Tomcat 5.5 to 7?
>> 
> 
> http://tomcat.apache.org/migration.html
> http://tomcat.apache.org/tomcat-7.0-doc/security-howto.html
> 
> Best regards,
> Konstantin Kolinko


As always, late in commenting.

I'm going to start from the top down, and amplify what Christopher
and Konstantin have already said.

A. Tomcat issues

1. Tomcat

Upgrade at least to 6.0.35 (latest 6.0 when this was written) or
preferably to 7.0.27 (lastest 7.0 when this was written).

Read and follow the migration guides. Do NOT just blindly copy
server.xml configurations.

http://tomcat.apache.org/migration.html


2. JAR files

Web applications are designed by specification to be independent. This
means unless Tomcat is using the JARs (for example, Tomcat-controlled
connection pools), the JARs should NOT be in:

Tomcat 5: commons/lib
Tomcat 6: lib
Tomcat 7: lib

3. Configuration files

Log4j uses either log4j.properties or log4j.xml (preferred). This
should NOT be in:

Tomcat 5: commons/classes
Tomcat 6: ??
Tomcat 7: ??


B. Application Issues

1. Pooling

Your application manages database pooling with C3P0. This is
not recommended for production. Look at using JNDI with Hibernate. An
example on how to do this with Tomcat can be found here:

http://wiki.apache.org/tomcat/TomcatHibernate

It's a bit dated, but it should still work. If not, I will update it.

2. log4j.properties

You should really look at using log4j.xml. There are at least two
advantages in doing so.

a. In the battle of log4j.properties versus log4j.xml, log4j.xml wins

This means that if some JAR file in your project has a
log4j.properties file, your log4j.xml file will take precedence.

b. Modern editor support for DTD - based editing

Emacs, jEdit, NetBeans, Eclipse, and IDEA IntelliJ all support DTD -
based editing. This eliminates lots of mistakes when configuring
log4j.

3. log4j.properties part 2

You should really look at writing your application log files to a
different file than Tomcat log files. Your operations people will
thank you for it.

This is quite easy, and you have most of the boilerplate already.
Just change to ${catalina.base}/logs/app-name.log for your log file.
If your system already does log rotation based on file name
extension, then this should fit right in.

4. log4j.properties part 3

If you are set on using log4j.properties, here is an example
log4j.properties file that I've used to keep logging down to a
minimum. Your mileage may vary.

### direct messages to file hibernate.log ###
log4j.appender.file=org.apache.log4j.FileAppender
log4j.appender.file.File=${catalina.home}/logs/app-name.log
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n

### set log levels - for more verbose logging change 'warn' to
### 'info' or 'debug'
###

log4j.rootLogger=warn, file

log4j.logger.org.hibernate=warn
# log4j.logger.org.hibernate=debug

### log HQL query parser activity
#log4j.logger.org.hibernate.hql.ast.AST=debug

### log just the SQL
#log4j.logger.org.hibernate.SQL=debug

### log JDBC bind parameters ###
# log4j.logger.org.hibernate.type=info
# log4j.logger.org.hibernate.type=debug

### log schema export/update ###
# log4j.logger.org.hibernate.tool.hbm2ddl=debug

### log HQL parse trees
#log4j.logger.org.hibernate.hql=debug

### log cache activity ###
#log4j.logger.org.hibernate.cache=debug

### log transaction activity
#log4j.logger.org.hibernate.transaction=debug

### log JDBC resource acquisition
#log4j.logger.org.hibernate.jdbc=debug

### enable the following line if you want to track down connection ###
### leakages when using DriverManagerConnectionProvider ###
#log4j.logger.org.hibernate.connection.DriverManagerConnectionProvider=trace

### Spring Framework logging
log4j.logger.org.springframework=warn

. . . . just my two cents.
/mde/


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233708-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 20 23:37:03 2012
Return-Path: <users-return-233708-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 53B6D9DBC
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 20 Apr 2012 23:37:03 +0000 (UTC)
Received: (qmail 34581 invoked by uid 500); 20 Apr 2012 23:37:00 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 34535 invoked by uid 500); 20 Apr 2012 23:37:00 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 34526 invoked by uid 99); 20 Apr 2012 23:36:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Apr 2012 23:36:59 +0000
X-ASF-Spam-Status: No, hits=0.3 required=5.0
	tests=PLING_QUERY,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dilipvshah@hotmail.com designates 65.55.111.83 as permitted sender)
Received: from [65.55.111.83] (HELO blu0-omc2-s8.blu0.hotmail.com) (65.55.111.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 Apr 2012 23:36:49 +0000
Received: from BLU162-DS6 ([65.55.111.71]) by blu0-omc2-s8.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Fri, 20 Apr 2012 16:36:28 -0700
X-Originating-IP: [207.62.246.62]
X-Originating-Email: [dilipvshah@hotmail.com]
Message-ID: <BLU162-ds63AC88D552E51A9DF46C8D3220@phx.gbl>
From: "Dilip Shah" <dilipvshah@hotmail.com>
To: "Tomcat Users List" <users@tomcat.apache.org>
References: <BLU162-ds17349592A08291CD68D932D3220@phx.gbl> <4F91BD64.3070808@christopherschultz.net> <BLU162-ds159CEB27401FB22CE47B64D3220@phx.gbl> <CABzHfV=bAyn0qcHmzvRmobMJ2u7ujrY6CqG5MmbAE+hSWmWEHg@mail.gmail.com> <1334962817.10959.YahooMailNeo@web125505.mail.ne1.yahoo.com>
In-Reply-To: <1334962817.10959.YahooMailNeo@web125505.mail.ne1.yahoo.com>
Subject: Re: catalina.out file is growing very rapidly! How to prevent Hibernate's INFO and DEBUG statements from getting added to catalina.out file?
Date: Fri, 20 Apr 2012 16:36:28 -0700
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 14.0.8117.416
X-MimeOLE: Produced By Microsoft MimeOLE V14.0.8117.416
X-OriginalArrivalTime: 20 Apr 2012 23:36:28.0254 (UTC) FILETIME=[685E67E0:01CD1F4E]

Mark,

Thanks for the comments and suggestions... very much appreciated.

About your comment '3. log4j.properties part 2'...
I do have application specific log4j.properties in the application's 
WEB-INF/classes/ folder and I'm happy with the logging that's taking place 
in the specified log file in ${catalina.base}/logs/
The problem is that there seem to be one / several jar files that I use in 
my application that are adding vast number of INFO and DEBUG statements in 
catalina.out
I'm unable to determine how this is happening and how to prevent it. These 
log entries have patterns that are completely different from the one I've 
defined in my application's log4j.properties

Example of statement that I log from my application from the application's 
log file ${catalina.base}/logs/SmartCloudLearningMobi.log
[ INFO] 2012-04-20 03:17:25 
(ResourceServiceImpl.java:getResourceTypes:210) - Returning the following 
resource types:
Video
Audio
Image
Document

Whereas example of the 'mysterious' log statements from 
${catalina.base}/logs/catalina.out
01:52:46.050 [main] DEBUG org.hibernate.cfg.Ejb3Column - Binding column: 
Ejb3Column{table=org.hibernate.mapping.Table(organizationSubject), 
mappingColumn=subject, insertable=true, updatable=true, unique=false}
01:52:46.050 [main] DEBUG o.h.cfg.annotations.PropertyBinder - Building 
property subject
01:52:46.051 [main] INFO  org.hibernate.cfg.AnnotationBinder - Binding 
entity from annotated class: 
com.knownomy.scl.organization.domain.OrganizationRelationship
01:52:46.051 [main] DEBUG org.hibernate.cfg.Ejb3Column - Binding column: 
Ejb3DiscriminatorColumn{logicalColumnName'DTYPE', 
discriminatorTypeName='string'}

Dilip

--------------------------------------------------
From: "Mark Eggers" <its_toasted@yahoo.com>
Sent: Friday, April 20, 2012 4:00 PM
To: "Tomcat Users List" <users@tomcat.apache.org>
Subject: Re: catalina.out file is growing very rapidly! How to prevent 
Hibernate's INFO and DEBUG statements from getting added to catalina.out 
file?

> ----- Original Message -----
>
>> From: Konstantin Kolinko <knst.kolinko@gmail.com>
>> To: Tomcat Users List <users@tomcat.apache.org>
>> Cc:
>> Sent: Friday, April 20, 2012 1:30 PM
>> Subject: Re: catalina.out file is growing very rapidly! How to prevent 
>> Hibernate's INFO and DEBUG statements from getting added to catalina.out 
>> file?
>>
>> 2012/4/21 Dilip Shah <dilipvshah@hotmail.com>:
>>>  Konstantin and Chris,
>>>
>>>  Very much appreciate your observations and suggestions. To start with,
>> I'm
>>>  going to streamline the jar files in common/lib and WEB-INF/lib. If 
>>> that
>>>  still doesn't help, I'll bite the bullet and upgrade to Tomcat 7.
>> Any
>>>  suggested reading on delta between 5.5 and 7.x, steps to follow, what 
>>> to
>>>  look for / be careful of when upgrading from Tomcat 5.5 to 7?
>>>
>>
>> http://tomcat.apache.org/migration.html
>> http://tomcat.apache.org/tomcat-7.0-doc/security-howto.html
>>
>> Best regards,
>> Konstantin Kolinko
>
>
> As always, late in commenting.
>
> I'm going to start from the top down, and amplify what Christopher
> and Konstantin have already said.
>
> A. Tomcat issues
>
> 1. Tomcat
>
> Upgrade at least to 6.0.35 (latest 6.0 when this was written) or
> preferably to 7.0.27 (lastest 7.0 when this was written).
>
> Read and follow the migration guides. Do NOT just blindly copy
> server.xml configurations.
>
> http://tomcat.apache.org/migration.html
>
>
> 2. JAR files
>
> Web applications are designed by specification to be independent. This
> means unless Tomcat is using the JARs (for example, Tomcat-controlled
> connection pools), the JARs should NOT be in:
>
> Tomcat 5: commons/lib
> Tomcat 6: lib
> Tomcat 7: lib
>
> 3. Configuration files
>
> Log4j uses either log4j.properties or log4j.xml (preferred). This
> should NOT be in:
>
> Tomcat 5: commons/classes
> Tomcat 6: ??
> Tomcat 7: ??
>
>
> B. Application Issues
>
> 1. Pooling
>
> Your application manages database pooling with C3P0. This is
> not recommended for production. Look at using JNDI with Hibernate. An
> example on how to do this with Tomcat can be found here:
>
> http://wiki.apache.org/tomcat/TomcatHibernate
>
> It's a bit dated, but it should still work. If not, I will update it.
>
> 2. log4j.properties
>
> You should really look at using log4j.xml. There are at least two
> advantages in doing so.
>
> a. In the battle of log4j.properties versus log4j.xml, log4j.xml wins
>
> This means that if some JAR file in your project has a
> log4j.properties file, your log4j.xml file will take precedence.
>
> b. Modern editor support for DTD - based editing
>
> Emacs, jEdit, NetBeans, Eclipse, and IDEA IntelliJ all support DTD -
> based editing. This eliminates lots of mistakes when configuring
> log4j.
>
> 3. log4j.properties part 2
>
> You should really look at writing your application log files to a
> different file than Tomcat log files. Your operations people will
> thank you for it.
>
> This is quite easy, and you have most of the boilerplate already.
> Just change to ${catalina.base}/logs/app-name.log for your log file.
> If your system already does log rotation based on file name
> extension, then this should fit right in.
>
> 4. log4j.properties part 3
>
> If you are set on using log4j.properties, here is an example
> log4j.properties file that I've used to keep logging down to a
> minimum. Your mileage may vary.
>
> ### direct messages to file hibernate.log ###
> log4j.appender.file=org.apache.log4j.FileAppender
> log4j.appender.file.File=${catalina.home}/logs/app-name.log
> log4j.appender.file.layout=org.apache.log4j.PatternLayout
> log4j.appender.file.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - 
> %m%n
>
> ### set log levels - for more verbose logging change 'warn' to
> ### 'info' or 'debug'
> ###
>
> log4j.rootLogger=warn, file
>
> log4j.logger.org.hibernate=warn
> # log4j.logger.org.hibernate=debug
>
> ### log HQL query parser activity
> #log4j.logger.org.hibernate.hql.ast.AST=debug
>
> ### log just the SQL
> #log4j.logger.org.hibernate.SQL=debug
>
> ### log JDBC bind parameters ###
> # log4j.logger.org.hibernate.type=info
> # log4j.logger.org.hibernate.type=debug
>
> ### log schema export/update ###
> # log4j.logger.org.hibernate.tool.hbm2ddl=debug
>
> ### log HQL parse trees
> #log4j.logger.org.hibernate.hql=debug
>
> ### log cache activity ###
> #log4j.logger.org.hibernate.cache=debug
>
> ### log transaction activity
> #log4j.logger.org.hibernate.transaction=debug
>
> ### log JDBC resource acquisition
> #log4j.logger.org.hibernate.jdbc=debug
>
> ### enable the following line if you want to track down connection ###
> ### leakages when using DriverManagerConnectionProvider ###
> #log4j.logger.org.hibernate.connection.DriverManagerConnectionProvider=trace
>
> ### Spring Framework logging
> log4j.logger.org.springframework=warn
>
> . . . . just my two cents.
> /mde/
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233709-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sat Apr 21 09:00:06 2012
Return-Path: <users-return-233709-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 870999249
	for <apmail-tomcat-users-archive@www.apache.org>; Sat, 21 Apr 2012 09:00:06 +0000 (UTC)
Received: (qmail 69530 invoked by uid 500); 21 Apr 2012 09:00:02 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 69028 invoked by uid 500); 21 Apr 2012 08:59:56 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 68921 invoked by uid 99); 21 Apr 2012 08:59:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Apr 2012 08:59:51 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pid@pidster.com designates 209.85.160.45 as permitted sender)
Received: from [209.85.160.45] (HELO mail-pb0-f45.google.com) (209.85.160.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Apr 2012 08:59:45 +0000
Received: by pbcuo5 with SMTP id uo5so2055546pbc.18
        for <users@tomcat.apache.org>; Sat, 21 Apr 2012 01:59:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=references:from:in-reply-to:mime-version:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        bh=IV4Wnb1aL3CKxq7dEgUCcavYHWv8C4WWem7WUgBHX6w=;
        b=LLZVvnXpXG6KoIogOBtywQCOzzKI3UbXOo70EnYSThZeMW8k9lCCQXD4XYK/1QW9ly
         oHpSSBwWduJn5fNYXAWJ6nbaRyFU0/3s/U2A9197QIEoBDME154y2uCHKeoE0m7U5rLr
         biPxI7Yb7TkYMczlE0KWNd4YZ4LS7LgeWFURI=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=references:from:in-reply-to:mime-version:date:message-id:subject:to
         :content-type:content-transfer-encoding:x-gm-message-state;
        bh=IV4Wnb1aL3CKxq7dEgUCcavYHWv8C4WWem7WUgBHX6w=;
        b=R4t0tqzkZK9K0HhJ3ZpbeqfMUF6fCSNpCuDD9dBkuo1EoHooSVSFgayiYG0bdF5g0e
         wU9P/O+TP/ZVS3caVR+Ow3JZ66g4n50Z9qhUUmh0xNwCf4EdHCfb80ABtxBWMusvy9c6
         Qc6nDfFiPBV1WUQBOR/8vJMOi1L5DHvuzyRdhna3cETIMqxttqwpxzpc11FGnf2GUfgO
         3GwvXCBbEZ/3cSSD9T55AqCaD9qitS036gxtdoFCHp2JEo54kRUroR2AMXXt9tyFogxR
         jlbhsjXlk3DQNYBZiBw8x/PY1E2wEIEuFFalaDycKgndiOijhKdGybxSdjNp6HRkkbFT
         7c8g==
Received: by 10.68.231.233 with SMTP id tj9mr10621815pbc.49.1334998763662;
 Sat, 21 Apr 2012 01:59:23 -0700 (PDT)
References: <4f91d98a.ea38440a.5505.6460SMTPIN_ADDED@mx.google.com> <CABzHfV=s84ON-OCN5vquPe2PW6t8MU-CRso3AQ-d5sdkyTOsmA@mail.gmail.com>
From: "Pid *" <pid@pidster.com>
In-Reply-To: <CABzHfV=s84ON-OCN5vquPe2PW6t8MU-CRso3AQ-d5sdkyTOsmA@mail.gmail.com>
Mime-Version: 1.0 (1.0)
Date: Sat, 21 Apr 2012 10:00:04 +0100
Message-ID: <-3723261660451475248@unknownmsgid>
Subject: Re: BufferOverflowException in Tomcat 7.0.x at AjpAprProcessor.output()
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Gm-Message-State: ALoCoQnWZVwHBMU6bpKrs10O2N54ky+ey/TVYBEm6NhGU15H+ClDDA21g1Y/a2zn7Dy8MCzFo02m
X-Virus-Checked: Checked by ClamAV on apache.org

On 20 Apr 2012, at 23:50, Konstantin Kolinko <knst.kolinko@gmail.com> wrote=
:

> 2012/4/21 Konstantin Prei=C3=9Fer <verlag.preisser@t-online.de>:
>> Hi all,
>>
>> some time ago, I wrote about a BufferOverflowException which I got spora=
dically on my Tomcat 7.0.21 [1], when using the AJP-APR-Connector.
>> However, at that time I couldn't reproduce the exception.
>>
>> When I looked at this again today, I was able to create a client that se=
nds an AJP message and aborts the connection, resulting in the BufferOverfl=
owException in Tomcat. I was using Tomcat 7.0.27 with Tomcat Native 1.1.23,=
 on Oracle JDK 1.7.0_03 and Windows 7 32-bit.
>> (...)
>
> Good report. Can you add this to Bugzilla?

What about on Java 6?


p



>
> Best regards,
> Konstantin Kolinko
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233710-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sat Apr 21 11:56:21 2012
Return-Path: <users-return-233710-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 094C695D0
	for <apmail-tomcat-users-archive@www.apache.org>; Sat, 21 Apr 2012 11:56:21 +0000 (UTC)
Received: (qmail 70546 invoked by uid 500); 21 Apr 2012 11:56:16 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 70181 invoked by uid 500); 21 Apr 2012 11:56:11 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 70153 invoked by uid 99); 21 Apr 2012 11:56:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Apr 2012 11:56:10 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=MSGID_MULTIPLE_AT,RCVD_IN_DNSWL_NONE,SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.25.134.83] (HELO mailout07.t-online.de) (194.25.134.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Apr 2012 11:56:03 +0000
Received: from fwd03.aul.t-online.de (fwd03.aul.t-online.de )
	by mailout07.t-online.de with smtp 
	id 1SLYuj-0006lp-AO; Sat, 21 Apr 2012 13:55:41 +0200
Received: from Preissa (XRi8RyZa8hfZaLVhdG+Y25t4lBA8NlVJHDHmcSTPv-vRkBvcEBrgXqxM4tifQ61ZYf@[217.95.62.33]) by fwd03.t-online.de
	with esmtp id 1SLYuh-0eOXRo0; Sat, 21 Apr 2012 13:55:39 +0200
From: =?UTF-8?Q?Konstantin_Prei=C3=9Fer?= <verlag.preisser@t-online.de>
To: "'Tomcat Users List'" <users@tomcat.apache.org>
References: <4f91d98a.ea38440a.5505.6460SMTPIN_ADDED@mx.google.com> <CABzHfV=s84ON-OCN5vquPe2PW6t8MU-CRso3AQ-d5sdkyTOsmA@mail.gmail.com> <-3723261660451475248@unknownmsgid>
In-Reply-To: <-3723261660451475248@unknownmsgid>
Subject: RE: BufferOverflowException in Tomcat 7.0.x at AjpAprProcessor.output()
Date: Sat, 21 Apr 2012 13:55:35 +0200
Message-ID: <001501cd1fb5$a9645940$fc2d0bc0$@preisser@t-online.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Ac0fnSvfe/47XlwvQYGt7XNuRwOqnQAF+RCQ
Content-Language: de
X-ID: XRi8RyZa8hfZaLVhdG+Y25t4lBA8NlVJHDHmcSTPv-vRkBvcEBrgXqxM4tifQ61ZYf
X-TOI-MSGID: 51a9011d-5daa-4660-a4c9-824c5b6f0b8b
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Konstantin and Pid,

thank you for your replies.

> -----Original Message-----
> From: Pid * [mailto:pid@pidster.com]
> Sent: Saturday, April 21, 2012 11:00 AM
> To: Tomcat Users List
> Subject: Re: BufferOverflowException in Tomcat 7.0.x at
> AjpAprProcessor.output()
>=20
>=20
> What about on Java 6?
>=20

I just installed JDK 1.6.0_31 (and compiled the apps for Java 6), and it =
seems the result (BufferOverflowException) is the same as an Java 7 =
(only the line numbers in the stack trace for the Java libraries =
differ).

> On 20 Apr 2012, at 23:50, Konstantin Kolinko <knst.kolinko@gmail.com>
> wrote:
> >
> > Good report. Can you add this to Bugzilla?

Ok, I added a bug report here: =
https://issues.apache.org/bugzilla/show_bug.cgi?id=3D53119

Thanks!


Regards,
Konstantin Prei=C3=9Fer


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233711-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sat Apr 21 16:02:53 2012
Return-Path: <users-return-233711-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C7FA59C68
	for <apmail-tomcat-users-archive@www.apache.org>; Sat, 21 Apr 2012 16:02:53 +0000 (UTC)
Received: (qmail 1645 invoked by uid 500); 21 Apr 2012 16:02:49 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 1433 invoked by uid 500); 21 Apr 2012 16:02:49 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 1422 invoked by uid 99); 21 Apr 2012 16:02:48 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Apr 2012 16:02:48 +0000
Received: from localhost (HELO fc16x86v0.jboss.hr) (127.0.0.1)
  (smtp-auth username mturk, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Apr 2012 16:02:48 +0000
Message-ID: <4F92DA1E.7080000@apache.org>
Date: Sat, 21 Apr 2012 18:02:38 +0200
From: Mladen Turk <mturk@apache.org>
User-Agent: Mozilla/5.0 (X11; Linux i686; rv:11.0) Gecko/20120329 Thunderbird/11.0.1
MIME-Version: 1.0
To: users@tomcat.apache.org
Subject: Re: 64bit windows mod_jk connector download for apache httpd 2.4
References: <CAG6aRdX7aA9J8RZ1OAhyUQCayi2D2E=_9FJryTH4Z1v7dDSosw@mail.gmail.com> <4F8F1EEB.2070000@apache.org> <CAG6aRdXuMWqvXLTv=M=-YNQzxX8LQLiTYyoYtUoUCQF32Ln-yQ@mail.gmail.com> <4F903E4B.3090603@christopherschultz.net>
In-Reply-To: <4F903E4B.3090603@christopherschultz.net>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit

On 04/19/2012 06:33 PM, Christopher Schultz wrote:
>
> I think it's reasonable for us to add x86-64 builds for mod_jk+httpd.
>

The problem is that there are no more 'official' httpd binaries.
Probably because the current maintainer just get bored, so the
suggested use is to use apachelaunge's binaries.

At the end we could try to convince those guys to produce
mod_jk binaries as well.


Regards
-- 
^TM

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233712-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sat Apr 21 18:39:07 2012
Return-Path: <users-return-233712-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4D89D9DFA
	for <apmail-tomcat-users-archive@www.apache.org>; Sat, 21 Apr 2012 18:39:07 +0000 (UTC)
Received: (qmail 71587 invoked by uid 500); 21 Apr 2012 18:39:03 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 71494 invoked by uid 500); 21 Apr 2012 18:39:03 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 71417 invoked by uid 99); 21 Apr 2012 18:39:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Apr 2012 18:39:02 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.215.173] (HELO mail-ey0-f173.google.com) (209.85.215.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 Apr 2012 18:38:55 +0000
Received: by eaaf11 with SMTP id f11so4466728eaa.18
        for <users@tomcat.apache.org>; Sat, 21 Apr 2012 11:38:35 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:x-gm-message-state;
        bh=yt/TeOnSj/r72AMSKU8UTBLLtnseBeaxdcMq+ys2nc0=;
        b=dDmOwD2viTgiSjaiM1xFOmpjQvg37/f23eGP+QIYslDT8ka8CRV1kPK16XlQv7BJ52
         Ew3az0bxBU7MW0tlpBkBY2dFyG956RekwTKnjQbNWy4xbhBmlYpY6Sxhz4dl6RM4AfKi
         L3XENE3epgFtnuQD7jzWzifSCgBzyiQ02v2/NZ0z+NgTk8MUAZ1umrldfiK4oyjRF/gF
         kv3dnrBBq+VObnGCwWq9VnXLxBKegvqVT/FIDY5Kqesga7HJHV0IjkaHl9MzcpmFbbMO
         7XYUnPTXzIyWgUk0xrJiUo8mevte/5Z14MeWS/X8yRaE9ZKheRcMSWBqBCuqpwfj8uGm
         vh1g==
MIME-Version: 1.0
Received: by 10.213.17.8 with SMTP id q8mr392330eba.190.1335033514706; Sat, 21
 Apr 2012 11:38:34 -0700 (PDT)
Reply-To: victoria.kio.2011@my.bristol.ac.uk
Received: by 10.213.27.194 with HTTP; Sat, 21 Apr 2012 11:38:34 -0700 (PDT)
In-Reply-To: <loom.20120419T112147-812@post.gmane.org>
References: <loom.20120419T112147-812@post.gmane.org>
Date: Sat, 21 Apr 2012 19:38:34 +0100
Message-ID: <CADnZG67uS4CMnB3vm8kyffCq1GBXfjAyVWb2CdvUUJT1C2vG0w@mail.gmail.com>
Subject: Re: my website is not opening after installing CA certificate successfully
From: Victoria Johnson  - Kio <victoria.kio.2011@my.bristol.ac.uk>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=0015174c350468464704be34b69d
X-Gm-Message-State: ALoCoQnBHbP9lcvkyixhx1U4LvR6Ht5cUoVkICwT/lelXC4rpghAnnqkei/kAVWsiVCWaeGq5Cfj

--0015174c350468464704be34b69d
Content-Type: text/plain; charset=ISO-8859-1

Did you use two separate password when going through creating the Keystore
and Certificate?

Try creating the certificate again but when you are promoted for second
password, hit enter so that it is same with the first password that you
used most probably "changeit" and make sure that it is first password that
you set in your connector when you configure server.xml

On Thu, Apr 19, 2012 at 10:30 AM, Neeraj Sood <neeraj.sood@ril.com> wrote:

> C:\Users\neeraj.sood>keytool -list
> Enter keystore password:
>
> Keystore type: JKS
> Keystore provider: SUN
>
> Your keystore contains 2 entries
>
> rilrootca, 19 Apr, 2012, trustedCertEntry,
> Certificate fingerprint (SHA1):
> 99:67:6B:C9:B8:90:C1:F0:14:53:36:E3:C7:ED:05:9E:
> 61:DC:16:A2
> rilca, 19 Apr, 2012, trustedCertEntry,
> Certificate fingerprint (SHA1):
> 99:67:6B:C9:B8:90:C1:F0:14:53:36:E3:C7:ED:05:9E:
> 61:DC:16:A2
>
>
> I am able to install certificate successfully. But my site does not open
> the
> home page. But if I create new certificate using keytool command  :-
> keytool -
> genkey -alias tomcat -keyalg RSA. My home page starts working , but the
> cerficate is not authenticated or validated by the browser.
>
> how to configure certificate in my tomcat server.xml
>
> Need urgent help on this.
>
>
> Neeraj Sood
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>
>


-- 
Victoria Captain Johnson-Kio
BS81EA
+44(0)7936297429
Here's my professional profile
<http://uk.linkedin.com/pub/victoria-captain-johnson-kio/19/9a5/70%20>on
LinkedIn
Personal Impact <http://twitter.com/#%21/VictoriaKio> on Twitter, and some
fun <http://www.facebook.com/kio.victoria> things I do at facebook

--0015174c350468464704be34b69d--

From users-return-233713-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sun Apr 22 15:55:50 2012
Return-Path: <users-return-233713-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4CE919C73
	for <apmail-tomcat-users-archive@www.apache.org>; Sun, 22 Apr 2012 15:55:50 +0000 (UTC)
Received: (qmail 43536 invoked by uid 500); 22 Apr 2012 15:55:46 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 43325 invoked by uid 500); 22 Apr 2012 15:55:43 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 43291 invoked by uid 99); 22 Apr 2012 15:55:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Apr 2012 15:55:42 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Christoph.Maser@1und1.de designates 212.227.126.201 as permitted sender)
Received: from [212.227.126.201] (HELO mxintern.schlund.de) (212.227.126.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Apr 2012 15:55:34 +0000
Received: from [10.2.3.78] (helo=exnlb03.webde.local)
	by mxintern.schlund.de with esmtps (TLS1.0:RSA_AES_128_CBC_SHA1:16)
	(envelope-from <Christoph.Maser@1und1.de>)
	id 1SLz85-0003kI-3b
	for users@tomcat.apache.org; Sun, 22 Apr 2012 17:55:13 +0200
Received: from exnlb12.webde.local (172.19.74.13) by exnlb03.webde.local
 (10.2.3.78) with Microsoft SMTP Server (TLS) id 8.3.245.1; Sun, 22 Apr 2012
 17:55:12 +0200
Received: from [192.168.33.6] (92.229.20.8) by owa.extranet.1and1.com
 (217.72.200.71) with Microsoft SMTP Server (TLS) id 8.3.245.1; Sun, 22 Apr
 2012 17:55:12 +0200
Message-ID: <1335110109.8682.4.camel@meierpad.localdomain>
Subject: Re: parallel deployment activation of new version
From: Christoph Maser <christoph.maser@1und1.de>
To: Tomcat Users List <users@tomcat.apache.org>
Date: Sun, 22 Apr 2012 17:55:09 +0200
In-Reply-To: <4F903B82.6080508@christopherschultz.net>
References: <15D3435601304A49A5E13D0825711B6128CC5706@EXCHANGE07.webde.local>
	 <c9852e00-8f22-4a9a-99b7-7543ab14d743@email.android.com>
	 <15D3435601304A49A5E13D0825711B6128CC570C@EXCHANGE07.webde.local>
	 <efd47547-82e2-4d89-b0e3-76747acb8a6c@email.android.com>
	 <15D3435601304A49A5E13D0825711B6128CC5740@EXCHANGE07.webde.local>
	 <4F903B82.6080508@christopherschultz.net>
Content-Type: text/plain; charset="UTF-8"
X-Mailer: Evolution 3.2.3 (3.2.3-2.fc16) 
Content-Transfer-Encoding: 7bit
MIME-Version: 1.0
X-Virus-Scanned: Symantec AntiVirus Scan Engine
X-UI-Msg-Verification: 49b72c388fcd16c3371736ffaf024146
X-Virus-Checked: Checked by ClamAV on apache.org

Chris,

Am Donnerstag, den 19.04.2012, 18:21 +0200 schrieb Christopher Schultz:
> Christoph,
> 
> What about the webapp itself performing its own health-check as a last
> step of deployment, and throwing an exception (thereby preventing
> Tomcat from bringing it into service) if things aren't in working order?

this is the obvious way to do it as it is now. As I said before that way
one looses the access to the wapps status pages.

Christoph


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233714-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sun Apr 22 18:27:19 2012
Return-Path: <users-return-233714-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EADE69A76
	for <apmail-tomcat-users-archive@www.apache.org>; Sun, 22 Apr 2012 18:27:18 +0000 (UTC)
Received: (qmail 64319 invoked by uid 500); 22 Apr 2012 18:27:15 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 63874 invoked by uid 500); 22 Apr 2012 18:27:09 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 63842 invoked by uid 99); 22 Apr 2012 18:27:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Apr 2012 18:27:08 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.217.173] (HELO mail-lb0-f173.google.com) (209.85.217.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 Apr 2012 18:26:59 +0000
Received: by lboi15 with SMTP id i15so6017293lbo.18
        for <users@tomcat.apache.org>; Sun, 22 Apr 2012 11:26:39 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=message-id:from:to:subject:date:mime-version:content-type
         :x-priority:x-msmail-priority:importance:x-mailer:x-mimeole
         :x-gm-message-state;
        bh=21P7zAYxPmYdgeWdu2NVIJtM0QS+Rk7/zEbmLG02CNM=;
        b=TcFiYSLTXr4zSFrUbaMOIaWQV9IcE0WopIyWPHSTcG+0S/LMArNRkSR4s29Ho5Y5/Q
         sqlXbPtbfog8TcjOuLX/16zgy36kXpGv0ZX4odSFXr64GZkraYCsPIge/dBkR50MtD5h
         wAlRga+4WZDAxrlxUDKw7otabxz2StLPFzNnw9DY8dlVDNCgG7zw3X3zlZ+iUfj0PIis
         y7e7P1e8eZiTW91tJblUNkGlGwHVOe/2lp6m9tqUcl1dS+QHOj5otfkSxgdS2msGYQLs
         77vvUSYtOjgjfp1syyvkq5x8PBWcsIBzIr6fH5Z7Ylg9msvXkyjpq0W6o5hi9dKPv4TV
         pUqQ==
Received: by 10.112.42.41 with SMTP id k9mr6274509lbl.96.1335119198780;
        Sun, 22 Apr 2012 11:26:38 -0700 (PDT)
Received: from LudwigVAIO (c-b78270d5.08-18-6d6c6d2.cust.bredbandsbolaget.se. [213.112.130.183])
        by mx.google.com with ESMTPS id h8sm16551689lbx.8.2012.04.22.11.26.37
        (version=SSLv3 cipher=OTHER);
        Sun, 22 Apr 2012 11:26:37 -0700 (PDT)
Message-ID: <FB8C0152D957401CA6FF8702C3FE8918@LudwigVAIO>
From: Ludwig Magnusson <ludwig@itcatapult.com>
To: <users@tomcat.apache.org>
Subject: Tomcat 6.0.35 filters not invoked for error-pages
Date: Sun, 22 Apr 2012 20:26:33 +0200
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_000D_01CD20C6.357A66C0"
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3538.513
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3538.513
X-Gm-Message-State: ALoCoQnrCHQom1wQoak65CyM96NZKOTK2iAq5cGYycB1kTVaTxGcGx+lcfOGRxWwYXI0px5qHKvX

------=_NextPart_000_000D_01CD20C6.357A66C0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hello.
I found some strange behavour in tomcat 6.0.35 when declaring =
error-pages in my web.xml. When tomcat picks up an error and redirects =
it to the location given by the <location> element in <error-page>, the =
filters that would have been invoked for that location are actually not =
invoked.

I found an almost identical report in the bug database: =
https://issues.apache.org/bugzilla/show_bug.cgi?id=3D49098 (the user had =
the same problem when using query strings in <location>).
However, I do not use query strings in my locations and I still get the =
error.

Is this a bug and is it known?
/Ludwig
------=_NextPart_000_000D_01CD20C6.357A66C0--


From users-return-233715-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 23 11:12:53 2012
Return-Path: <users-return-233715-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 45F8C9C37
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 23 Apr 2012 11:12:53 +0000 (UTC)
Received: (qmail 10873 invoked by uid 500); 23 Apr 2012 11:12:49 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 10433 invoked by uid 500); 23 Apr 2012 11:12:45 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 10416 invoked by uid 99); 23 Apr 2012 11:12:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 11:12:44 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ironclawhand@hotmail.com designates 65.55.34.90 as permitted sender)
Received: from [65.55.34.90] (HELO col0-omc2-s16.col0.hotmail.com) (65.55.34.90)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 11:12:37 +0000
Received: from COL113-W24 ([65.55.34.73]) by col0-omc2-s16.col0.hotmail.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Mon, 23 Apr 2012 04:12:16 -0700
Message-ID: <COL113-W248A31965DC681CB4DA9BACF210@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_8b88ce33-324a-491e-9f2d-6fe90a339fb9_"
X-Originating-IP: [194.176.105.144]
From: ironclaw hand <ironclawhand@hotmail.com>
To: <users@tomcat.apache.org>
Subject: Mod_jk returning source code of jsp files
Date: Mon, 23 Apr 2012 12:12:16 +0100
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 23 Apr 2012 11:12:16.0572 (UTC) FILETIME=[F121AFC0:01CD2141]
X-Virus-Checked: Checked by ClamAV on apache.org

--_8b88ce33-324a-491e-9f2d-6fe90a339fb9_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable



Hi=2C

I am attempting to set up apache and tomcat together for the first time on =
a new machine using some existing configuration files. I am not sure what i=
s happening but it looks like apache is just serving up all files so when i=
 acccess a jsp file I get the source as if tomcat never executed it.

I have installed the following versions of software:

httpd 2.4.2
Tomcat connectors 1.2.35
Tomcat 7.0.27

Below are the mod_jk config (workers.properties and mod_jk.conf) files I am=
 currently trying to get working if there is anything else that is needed t=
hen I can include this. My worker softcat1 is defined in my server.xml for =
tomcat.

Tomcat works on its own if I access it directly and it does run the jsp fil=
es ok=2C it just seems to be when I try via apache.=20

I have included my httpd.conf in case it is needed:


ServerTokens Prod


ServerRoot "/etc/httpd"

PidFile run/httpd.pid


Timeout 120


KeepAlive Off

MaxKeepAliveRequests 100


KeepAliveTimeout 15


<IfModule prefork.c>
StartServers       8
MinSpareServers    5
MaxSpareServers   20
ServerLimit      1024
#ServerLimit       50
MaxClients       1024
#MaxClients        50
MaxRequestsPerChild  4000
</IfModule>


<IfModule worker.c>
StartServers         2
MaxClients         150
MinSpareThreads     25
MaxSpareThreads     75=20
ThreadsPerChild     25
MaxRequestsPerChild  0
</IfModule>


LoadModule access_compat_module modules/mod_access_compat.so
LoadModule authz_core_module modules/mod_authz_core.so
LoadModule authz_host_module modules/mod_authz_host.so
LoadModule auth_basic_module modules/mod_auth_basic.so
LoadModule authn_file_module modules/mod_authn_file.so
LoadModule authn_anon_module modules/mod_authn_anon.so
LoadModule authn_dbm_module modules/mod_authn_dbm.so
LoadModule auth_digest_module modules/mod_auth_digest.so
LoadModule ldap_module modules/mod_ldap.so
LoadModule authnz_ldap_module modules/mod_authnz_ldap.so
LoadModule include_module modules/mod_include.so
LoadModule log_config_module modules/mod_log_config.so
LoadModule env_module modules/mod_env.so
LoadModule mime_magic_module modules/mod_mime_magic.so
LoadModule cern_meta_module modules/mod_cern_meta.so
LoadModule expires_module modules/mod_expires.so
LoadModule deflate_module modules/mod_deflate.so
LoadModule headers_module modules/mod_headers.so
LoadModule usertrack_module modules/mod_usertrack.so
LoadModule setenvif_module modules/mod_setenvif.so
LoadModule mime_module modules/mod_mime.so
LoadModule dav_module modules/mod_dav.so
LoadModule status_module modules/mod_status.so
LoadModule autoindex_module modules/mod_autoindex.so
LoadModule asis_module modules/mod_asis.so
LoadModule info_module modules/mod_info.so
LoadModule dav_fs_module modules/mod_dav_fs.so
LoadModule vhost_alias_module modules/mod_vhost_alias.so
LoadModule negotiation_module modules/mod_negotiation.so
LoadModule dir_module modules/mod_dir.so
LoadModule imagemap_module modules/mod_imagemap.so
LoadModule actions_module modules/mod_actions.so
LoadModule speling_module modules/mod_speling.so
LoadModule userdir_module modules/mod_userdir.so
LoadModule alias_module modules/mod_alias.so
LoadModule rewrite_module modules/mod_rewrite.so
LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_ftp_module modules/mod_proxy_ftp.so
LoadModule proxy_http_module modules/mod_proxy_http.so
LoadModule proxy_connect_module modules/mod_proxy_connect.so
LoadModule cache_module modules/mod_cache.so
LoadModule suexec_module modules/mod_suexec.so
#LoadModule disk_cache_module modules/mod_disk_cache.so
LoadModule file_cache_module modules/mod_file_cache.so
#LoadModule mem_cache_module modules/mod_mem_cache.so
LoadModule cgi_module modules/mod_cgi.so
LoadModule version_module modules/mod_version.so
LoadModule socache_shmcb_module modules/mod_socache_shmcb.so
LoadModule unixd_module modules/mod_unixd.so


Include conf.d/*.conf

User apache
Group apache


ServerAdmin root@localhost


UseCanonicalName Off

DocumentRoot "/var/webapps"


<Directory />
    Options FollowSymLinks
    AllowOverride None
</Directory>


<Directory "/var/webapps">


    Options Indexes FollowSymLinks

    AllowOverride None

    Order allow=2Cdeny
    Allow from all

</Directory>


<IfModule mod_userdir.c>
   =20
    UserDir disable

=20

</IfModule>


DirectoryIndex index.html index.html.var


AccessFileName .htaccess

<Files ~ "^\.ht">
    Order allow=2Cdeny
    Deny from all
</Files>


TypesConfig /etc/mime.types

DefaultType text/plain


<IfModule mod_mime_magic.c>
#   MIMEMagicFile /usr/share/magic.mime
    MIMEMagicFile conf/magic
</IfModule>


HostnameLookups Off


ErrorLog logs/error_log


LogLevel warn


LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" co=
mbined
LogFormat "%h %l %u %t \"%r\" %>s %b" common
LogFormat "%{Referer}i -> %U" referer
LogFormat "%{User-agent}i" agent


CustomLog logs/access_log combined


ServerSignature Off


Alias /icons/ "/var/www/icons/"

<Directory "/var/www/icons">
    Options Indexes MultiViews
    AllowOverride None
    Order allow=2Cdeny
    Allow from all
</Directory>


<IfModule mod_dav_fs.c>
    # Location of the WebDAV lock database.
    DAVLockDB /var/lib/dav/lockdb
</IfModule>


ScriptAlias /cgi-bin/ "/var/www/cgi-bin/"


<Directory "/var/www/cgi-bin">
    AllowOverride None
    Options None
    Order allow=2Cdeny
    Allow from all
</Directory>


IndexOptions FancyIndexing VersionSort NameWidth=3D*


AddIconByEncoding (CMP=2C/icons/compressed.gif) x-compress x-gzip

AddIconByType (TXT=2C/icons/text.gif) text/*
AddIconByType (IMG=2C/icons/image2.gif) image/*
AddIconByType (SND=2C/icons/sound2.gif) audio/*
AddIconByType (VID=2C/icons/movie.gif) video/*

AddIcon /icons/binary.gif .bin .exe
AddIcon /icons/binhex.gif .hqx
AddIcon /icons/tar.gif .tar
AddIcon /icons/world2.gif .wrl .wrl.gz .vrml .vrm .iv
AddIcon /icons/compressed.gif .Z .z .tgz .gz .zip
AddIcon /icons/a.gif .ps .ai .eps
AddIcon /icons/layout.gif .html .shtml .htm .pdf
AddIcon /icons/text.gif .txt
AddIcon /icons/c.gif .c
AddIcon /icons/p.gif .pl .py
AddIcon /icons/f.gif .for
AddIcon /icons/dvi.gif .dvi
AddIcon /icons/uuencoded.gif .uu
AddIcon /icons/script.gif .conf .sh .shar .csh .ksh .tcl
AddIcon /icons/tex.gif .tex
AddIcon /icons/bomb.gif core

AddIcon /icons/back.gif ..
AddIcon /icons/hand.right.gif README
AddIcon /icons/folder.gif ^^DIRECTORY^^
AddIcon /icons/blank.gif ^^BLANKICON^^


DefaultIcon /icons/unknown.gif


ReadmeName README.html
HeaderName HEADER.html


IndexIgnore .??* *~ *# HEADER* README* RCS CVS *=2Cv *=2Ct


AddLanguage ca .ca
AddLanguage cs .cz .cs
AddLanguage da .dk
AddLanguage de .de
AddLanguage el .el
AddLanguage en .en
AddLanguage eo .eo
AddLanguage es .es
AddLanguage et .et
AddLanguage fr .fr
AddLanguage he .he
AddLanguage hr .hr
AddLanguage it .it
AddLanguage ja .ja
AddLanguage ko .ko
AddLanguage ltz .ltz
AddLanguage nl .nl
AddLanguage nn .nn
AddLanguage no .no
AddLanguage pl .po
AddLanguage pt .pt
AddLanguage pt-BR .pt-br
AddLanguage ru .ru
AddLanguage sv .sv
AddLanguage zh-CN .zh-cn
AddLanguage zh-TW .zh-tw


LanguagePriority en ca cs da de el eo es et fr he hr it ja ko ltz nl nn no =
pl pt pt-BR ru sv zh-CN zh-TW


ForceLanguagePriority Prefer Fallback


AddDefaultCharset UTF-8


AddCharset ISO-8859-1  .iso8859-1  .latin1
AddCharset ISO-8859-2  .iso8859-2  .latin2 .cen
AddCharset ISO-8859-3  .iso8859-3  .latin3
AddCharset ISO-8859-4  .iso8859-4  .latin4
AddCharset ISO-8859-5  .iso8859-5  .latin5 .cyr .iso-ru
AddCharset ISO-8859-6  .iso8859-6  .latin6 .arb
AddCharset ISO-8859-7  .iso8859-7  .latin7 .grk
AddCharset ISO-8859-8  .iso8859-8  .latin8 .heb
AddCharset ISO-8859-9  .iso8859-9  .latin9 .trk
AddCharset ISO-2022-JP .iso2022-jp .jis
AddCharset ISO-2022-KR .iso2022-kr .kis
AddCharset ISO-2022-CN .iso2022-cn .cis
AddCharset Big5        .Big5       .big5
# For russian=2C more than one charset is used (depends on client=2C mostly=
):
AddCharset WINDOWS-1251 .cp-1251   .win-1251
AddCharset CP866       .cp866
AddCharset KOI8-r      .koi8-r .koi8-ru
AddCharset KOI8-ru     .koi8-uk .ua
AddCharset ISO-10646-UCS-2 .ucs2
AddCharset ISO-10646-UCS-4 .ucs4
AddCharset UTF-8       .utf8


AddCharset GB2312      .gb2312 .gb=20
AddCharset utf-7       .utf7
AddCharset utf-8       .utf8
AddCharset big5        .big5 .b5
AddCharset EUC-TW      .euc-tw
AddCharset EUC-JP      .euc-jp
AddCharset EUC-KR      .euc-kr
AddCharset shift_jis   .sjis


AddType application/x-compress .Z
AddType application/x-gzip .gz .tgz


AddHandler imap-file map


AddHandler type-map var


AddType text/html .shtml
AddOutputFilter INCLUDES .shtml



Alias /error/ "/var/www/error/"

<IfModule mod_negotiation.c>
<IfModule mod_include.c>
    <Directory "/var/www/error">
        AllowOverride None
        Options IncludesNoExec
        AddOutputFilter Includes html
        AddHandler type-map var
        Order allow=2Cdeny
        Allow from all
        LanguagePriority en es de fr
        ForceLanguagePriority Prefer Fallback
    </Directory>


</IfModule>
</IfModule>


BrowserMatch "Mozilla/2" nokeepalive
BrowserMatch "MSIE 4\.0b2=3B" nokeepalive downgrade-1.0 force-response-1.0
BrowserMatch "RealPlayer 4\.0" force-response-1.0
BrowserMatch "Java/1\.0" force-response-1.0
BrowserMatch "JDK/1\.0" force-response-1.0


BrowserMatch "Microsoft Data Access Internet Publishing Provider" redirect-=
carefully
BrowserMatch "^WebDrive" redirect-carefully
BrowserMatch "^WebDAVFS/1.[012]" redirect-carefully
BrowserMatch "^gnome-vfs" redirect-carefully



LoadModule jk_module modules/mod_jk.so
Include /etc/httpd/conf/mod_jk.conf


NameVirtualHost sfta.npfit.nhs.uk:443

<VirtualHost 192.168.25.178:443>

RewriteEngine On
RewriteCond %{REQUEST_METHOD} ^TRACE [OR]
RewriteCond %{REQUEST_METHOD} ^TRACK
RewriteRule .* - [F]


RewriteCond %{REQUEST_URI} ^(.*)//(.*)$
RewriteRule . %1/%2 [R=3D301=2CL]

SSLEngine on


ServerName sfta.x.x.x

DocumentRoot "/var/webapps/"

ErrorLog logs/error_sft_log
CustomLog logs/access_sft_log combined
ErrorDocument 404 /sft/error404.html
ErrorDocument 503 /sft/error503.html

SSLProtocol ALL -SSLv2
SSLCipherSuite HIGH:MEDIUM


SSLCertificateFile /etc/httpd/conf/ssl.crt/SFTA.crt

SSLCertificateKeyFile /etc/httpd/conf/ssl.crt/SFTA.key

<Files ~ "\.(cgi|shtml|phtml|php3?)$">
    SSLOptions +StdEnvVars +ExportCertData
    SSLRequire %{SSL_CIPHER_USEKEYSIZE} >=3D 128
</Files>
<Directory "/var/www/cgi-bin">
    SSLOptions +StdEnvVars +ExportCertData
    SSLRequire %{SSL_CIPHER_USEKEYSIZE} >=3D 128
</Directory>

#   SSL Protocol Adjustments:
#   The safe and default but still SSL/TLS standard compliant shutdown
#   approach is that mod_ssl sends the close notify alert but doesn't wait =
for
#   the close notify alert from client. When you need a different shutdown
#   approach you can use one of the following variables:
#   o ssl-unclean-shutdown:
#     This forces an unclean shutdown when the connection is closed=2C i.e.=
 no
#     SSL close notify alert is send or allowed to received.  This violates
#     the SSL/TLS standard but is needed for some brain-dead browsers. Use
#     this when you receive I/O errors because of the standard approach whe=
re
#     mod_ssl sends the close notify alert.
#   o ssl-accurate-shutdown:
#     This forces an accurate shutdown when the connection is closed=2C i.e=
. a
#     SSL close notify alert is send and mod_ssl waits for the close notify
#     alert of the client. This is 100% SSL/TLS standard compliant=2C but i=
n
#     practice often causes hanging connections with brain-dead browsers. U=
se
#     this only for browsers where you know that their SSL implementation
#     works correctly.
#   Notice: Most problems of broken clients are also related to the HTTP
#   keep-alive facility=2C so you usually additionally want to disable
#   keep-alive for those clients=2C too. Use variable "nokeepalive" for thi=
s.
#   Similarly=2C one has to force some clients to use HTTP/1.0 to workaroun=
d
#   their broken HTTP/1.1 implementation. Use variables "downgrade-1.0" and
#   "force-response-1.0" for this.
SetEnvIf User-Agent ".*MSIE.*" \
         nokeepalive ssl-unclean-shutdown \
         downgrade-1.0 force-response-1.0

#   Per-Server Logging:
#   The home of a custom SSL log file. Use this when you want a
#   compact non-error SSL logfile on a virtual host basis.
CustomLog logs/ssl_request_nww.sft.nhs.uk_log \
          "%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \"%r\" %b"

</VirtualHost>


#Disable Apache supporting HTTP TRACE
RewriteEngine On
RewriteCond %{REQUEST_METHOD} ^TRACE [OR]
RewriteCond %{REQUEST_METHOD} ^TRACK
RewriteRule .* - [F]

# Remove multiple slashes anywhere in URL
RewriteCond %{REQUEST_URI} ^(.*)//(.*)$
RewriteRule . %1/%2 [R=3D301=2CL]

#The TraceEnable command isn't available on this version of apache
#TraceEnable Off



Mod_jk.conf

JkWorkersFile /etc/httpd/conf/workers.properties
JkLogFile     /var/log/httpd/mod_jk.log
JkLogLevel error


JkExtractSSL On
=20
JkHTTPSIndicator HTTPS

JkSESSIONIndicator SSL_SESSION_ID

JkCIPHERIndicator SSL_CIPHER

Alias /sft "/var/webapps/sft"
<Directory "/var/webapps/sft">
    Options Indexes FollowSymLinks
</Directory>


JkMount /sft/* loadbalancer


JkUnMount /*.html loadbalancer


<Location "/sft/WEB-INF/">
    AllowOverride None
    deny from all
</Location>

My workers.properties file:



workers.apache_log=3D/var/log/httpd/


workers.tomcat_home=3D/var/tomcat

workers.java_home=3D/usr/java/latest


ps=3D/


worker.list=3Dsoftcat1=2C loadbalancer

worker.softcat1.port=3D8009
worker.softcat1.host=3Dlocalhost
worker.softcat1.type=3Dajp13
worker.softcat1.lbfactor=3D100


worker.loadbalancer.type=3Dlb
worker.loadbalancer.balanced_workers=3Dsoftcat1

If anyone has any ideas about what is wrong in the config I would be very g=
rateful as I have spent hours trying to get this to work to no avail.

Thanks








 		 	   		  =

--_8b88ce33-324a-491e-9f2d-6fe90a339fb9_--

From users-return-233716-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 23 12:37:11 2012
Return-Path: <users-return-233716-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 751A6969F
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 23 Apr 2012 12:37:11 +0000 (UTC)
Received: (qmail 40955 invoked by uid 500); 23 Apr 2012 12:37:07 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 40873 invoked by uid 500); 23 Apr 2012 12:37:05 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 40824 invoked by uid 99); 23 Apr 2012 12:37:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 12:37:04 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,NORMAL_HTTP_TO_IP,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of icicimov@gmail.com designates 209.85.160.173 as permitted sender)
Received: from [209.85.160.173] (HELO mail-gy0-f173.google.com) (209.85.160.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 12:36:57 +0000
Received: by ghrr14 with SMTP id r14so7575849ghr.18
        for <users@tomcat.apache.org>; Mon, 23 Apr 2012 05:36:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=RUKTivK2YsxgKIM6T/RBykvDjGToLMkIiBMzjNT2mQ0=;
        b=m65EA5jCDFg485JU1Qs178wtU02XY7VxBguXt/5Tq8U6Hu8i8mJ8BNOLEXbuosqJ0h
         v75Hs6qS852J/duWAersnRjxAw50EgRPj39uHn3c/9r+7ZTAP56xd9y5LKvlbl5mMmO6
         PO8dkWglPx5Z6fEPyCcdiTHyMZrfQ8fe+6OShbVWGaoqCUHbfom1wqiPfwMBtgg3xMRv
         /jYfdGFhmKJoqzsrJcCV8l0akZ4BVZvmXCLEM88q0ye4dmXNkyAs3+UKZ4QnEY2D+9xM
         rEIPAvYzOJk9JpPugU3TBY92iJu+vQHgWrdcn0AQxe53mJtoPn5CT5npSikbW0eSwhUY
         Obkg==
MIME-Version: 1.0
Received: by 10.50.194.232 with SMTP id hz8mr6261726igc.38.1335184596042; Mon,
 23 Apr 2012 05:36:36 -0700 (PDT)
Received: by 10.42.71.9 with HTTP; Mon, 23 Apr 2012 05:36:35 -0700 (PDT)
Received: by 10.42.71.9 with HTTP; Mon, 23 Apr 2012 05:36:35 -0700 (PDT)
In-Reply-To: <COL113-W248A31965DC681CB4DA9BACF210@phx.gbl>
References: <COL113-W248A31965DC681CB4DA9BACF210@phx.gbl>
Date: Mon, 23 Apr 2012 22:36:35 +1000
Message-ID: <CAAKASGwj8CegxJh_3GHPtVo1ABCeHxzadEHaZ6Janag4z9EaBA@mail.gmail.com>
Subject: Re: Mod_jk returning source code of jsp files
From: Igor Cicimov <icicimov@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=14dae93405a18e84f704be57e3b7
X-Virus-Checked: Checked by ClamAV on apache.org

--14dae93405a18e84f704be57e3b7
Content-Type: text/plain; charset=ISO-8859-1

Put this line

Include /etc/httpd/conf/mod_jk.conf

inside virtual host.
 On Apr 23, 2012 9:12 PM, "ironclaw hand" <ironclawhand@hotmail.com> wrote:

>
>
> Hi,
>
> I am attempting to set up apache and tomcat together for the first time on
> a new machine using some existing configuration files. I am not sure what
> is happening but it looks like apache is just serving up all files so when
> i acccess a jsp file I get the source as if tomcat never executed it.
>
> I have installed the following versions of software:
>
> httpd 2.4.2
> Tomcat connectors 1.2.35
> Tomcat 7.0.27
>
> Below are the mod_jk config (workers.properties and mod_jk.conf) files I
> am currently trying to get working if there is anything else that is needed
> then I can include this. My worker softcat1 is defined in my server.xml for
> tomcat.
>
> Tomcat works on its own if I access it directly and it does run the jsp
> files ok, it just seems to be when I try via apache.
>
> I have included my httpd.conf in case it is needed:
>
>
> ServerTokens Prod
>
>
> ServerRoot "/etc/httpd"
>
> PidFile run/httpd.pid
>
>
> Timeout 120
>
>
> KeepAlive Off
>
> MaxKeepAliveRequests 100
>
>
> KeepAliveTimeout 15
>
>
> <IfModule prefork.c>
> StartServers       8
> MinSpareServers    5
> MaxSpareServers   20
> ServerLimit      1024
> #ServerLimit       50
> MaxClients       1024
> #MaxClients        50
> MaxRequestsPerChild  4000
> </IfModule>
>
>
> <IfModule worker.c>
> StartServers         2
> MaxClients         150
> MinSpareThreads     25
> MaxSpareThreads     75
> ThreadsPerChild     25
> MaxRequestsPerChild  0
> </IfModule>
>
>
> LoadModule access_compat_module modules/mod_access_compat.so
> LoadModule authz_core_module modules/mod_authz_core.so
> LoadModule authz_host_module modules/mod_authz_host.so
> LoadModule auth_basic_module modules/mod_auth_basic.so
> LoadModule authn_file_module modules/mod_authn_file.so
> LoadModule authn_anon_module modules/mod_authn_anon.so
> LoadModule authn_dbm_module modules/mod_authn_dbm.so
> LoadModule auth_digest_module modules/mod_auth_digest.so
> LoadModule ldap_module modules/mod_ldap.so
> LoadModule authnz_ldap_module modules/mod_authnz_ldap.so
> LoadModule include_module modules/mod_include.so
> LoadModule log_config_module modules/mod_log_config.so
> LoadModule env_module modules/mod_env.so
> LoadModule mime_magic_module modules/mod_mime_magic.so
> LoadModule cern_meta_module modules/mod_cern_meta.so
> LoadModule expires_module modules/mod_expires.so
> LoadModule deflate_module modules/mod_deflate.so
> LoadModule headers_module modules/mod_headers.so
> LoadModule usertrack_module modules/mod_usertrack.so
> LoadModule setenvif_module modules/mod_setenvif.so
> LoadModule mime_module modules/mod_mime.so
> LoadModule dav_module modules/mod_dav.so
> LoadModule status_module modules/mod_status.so
> LoadModule autoindex_module modules/mod_autoindex.so
> LoadModule asis_module modules/mod_asis.so
> LoadModule info_module modules/mod_info.so
> LoadModule dav_fs_module modules/mod_dav_fs.so
> LoadModule vhost_alias_module modules/mod_vhost_alias.so
> LoadModule negotiation_module modules/mod_negotiation.so
> LoadModule dir_module modules/mod_dir.so
> LoadModule imagemap_module modules/mod_imagemap.so
> LoadModule actions_module modules/mod_actions.so
> LoadModule speling_module modules/mod_speling.so
> LoadModule userdir_module modules/mod_userdir.so
> LoadModule alias_module modules/mod_alias.so
> LoadModule rewrite_module modules/mod_rewrite.so
> LoadModule proxy_module modules/mod_proxy.so
> LoadModule proxy_ftp_module modules/mod_proxy_ftp.so
> LoadModule proxy_http_module modules/mod_proxy_http.so
> LoadModule proxy_connect_module modules/mod_proxy_connect.so
> LoadModule cache_module modules/mod_cache.so
> LoadModule suexec_module modules/mod_suexec.so
> #LoadModule disk_cache_module modules/mod_disk_cache.so
> LoadModule file_cache_module modules/mod_file_cache.so
> #LoadModule mem_cache_module modules/mod_mem_cache.so
> LoadModule cgi_module modules/mod_cgi.so
> LoadModule version_module modules/mod_version.so
> LoadModule socache_shmcb_module modules/mod_socache_shmcb.so
> LoadModule unixd_module modules/mod_unixd.so
>
>
> Include conf.d/*.conf
>
> User apache
> Group apache
>
>
> ServerAdmin root@localhost
>
>
> UseCanonicalName Off
>
> DocumentRoot "/var/webapps"
>
>
> <Directory />
>    Options FollowSymLinks
>    AllowOverride None
> </Directory>
>
>
> <Directory "/var/webapps">
>
>
>    Options Indexes FollowSymLinks
>
>    AllowOverride None
>
>    Order allow,deny
>    Allow from all
>
> </Directory>
>
>
> <IfModule mod_userdir.c>
>
>    UserDir disable
>
>
>
> </IfModule>
>
>
> DirectoryIndex index.html index.html.var
>
>
> AccessFileName .htaccess
>
> <Files ~ "^\.ht">
>    Order allow,deny
>    Deny from all
> </Files>
>
>
> TypesConfig /etc/mime.types
>
> DefaultType text/plain
>
>
> <IfModule mod_mime_magic.c>
> #   MIMEMagicFile /usr/share/magic.mime
>    MIMEMagicFile conf/magic
> </IfModule>
>
>
> HostnameLookups Off
>
>
> ErrorLog logs/error_log
>
>
> LogLevel warn
>
>
> LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\""
> combined
> LogFormat "%h %l %u %t \"%r\" %>s %b" common
> LogFormat "%{Referer}i -> %U" referer
> LogFormat "%{User-agent}i" agent
>
>
> CustomLog logs/access_log combined
>
>
> ServerSignature Off
>
>
> Alias /icons/ "/var/www/icons/"
>
> <Directory "/var/www/icons">
>    Options Indexes MultiViews
>    AllowOverride None
>    Order allow,deny
>    Allow from all
> </Directory>
>
>
> <IfModule mod_dav_fs.c>
>    # Location of the WebDAV lock database.
>    DAVLockDB /var/lib/dav/lockdb
> </IfModule>
>
>
> ScriptAlias /cgi-bin/ "/var/www/cgi-bin/"
>
>
> <Directory "/var/www/cgi-bin">
>    AllowOverride None
>    Options None
>    Order allow,deny
>    Allow from all
> </Directory>
>
>
> IndexOptions FancyIndexing VersionSort NameWidth=*
>
>
> AddIconByEncoding (CMP,/icons/compressed.gif) x-compress x-gzip
>
> AddIconByType (TXT,/icons/text.gif) text/*
> AddIconByType (IMG,/icons/image2.gif) image/*
> AddIconByType (SND,/icons/sound2.gif) audio/*
> AddIconByType (VID,/icons/movie.gif) video/*
>
> AddIcon /icons/binary.gif .bin .exe
> AddIcon /icons/binhex.gif .hqx
> AddIcon /icons/tar.gif .tar
> AddIcon /icons/world2.gif .wrl .wrl.gz .vrml .vrm .iv
> AddIcon /icons/compressed.gif .Z .z .tgz .gz .zip
> AddIcon /icons/a.gif .ps .ai .eps
> AddIcon /icons/layout.gif .html .shtml .htm .pdf
> AddIcon /icons/text.gif .txt
> AddIcon /icons/c.gif .c
> AddIcon /icons/p.gif .pl .py
> AddIcon /icons/f.gif .for
> AddIcon /icons/dvi.gif .dvi
> AddIcon /icons/uuencoded.gif .uu
> AddIcon /icons/script.gif .conf .sh .shar .csh .ksh .tcl
> AddIcon /icons/tex.gif .tex
> AddIcon /icons/bomb.gif core
>
> AddIcon /icons/back.gif ..
> AddIcon /icons/hand.right.gif README
> AddIcon /icons/folder.gif ^^DIRECTORY^^
> AddIcon /icons/blank.gif ^^BLANKICON^^
>
>
> DefaultIcon /icons/unknown.gif
>
>
> ReadmeName README.html
> HeaderName HEADER.html
>
>
> IndexIgnore .??* *~ *# HEADER* README* RCS CVS *,v *,t
>
>
> AddLanguage ca .ca
> AddLanguage cs .cz .cs
> AddLanguage da .dk
> AddLanguage de .de
> AddLanguage el .el
> AddLanguage en .en
> AddLanguage eo .eo
> AddLanguage es .es
> AddLanguage et .et
> AddLanguage fr .fr
> AddLanguage he .he
> AddLanguage hr .hr
> AddLanguage it .it
> AddLanguage ja .ja
> AddLanguage ko .ko
> AddLanguage ltz .ltz
> AddLanguage nl .nl
> AddLanguage nn .nn
> AddLanguage no .no
> AddLanguage pl .po
> AddLanguage pt .pt
> AddLanguage pt-BR .pt-br
> AddLanguage ru .ru
> AddLanguage sv .sv
> AddLanguage zh-CN .zh-cn
> AddLanguage zh-TW .zh-tw
>
>
> LanguagePriority en ca cs da de el eo es et fr he hr it ja ko ltz nl nn no
> pl pt pt-BR ru sv zh-CN zh-TW
>
>
> ForceLanguagePriority Prefer Fallback
>
>
> AddDefaultCharset UTF-8
>
>
> AddCharset ISO-8859-1  .iso8859-1  .latin1
> AddCharset ISO-8859-2  .iso8859-2  .latin2 .cen
> AddCharset ISO-8859-3  .iso8859-3  .latin3
> AddCharset ISO-8859-4  .iso8859-4  .latin4
> AddCharset ISO-8859-5  .iso8859-5  .latin5 .cyr .iso-ru
> AddCharset ISO-8859-6  .iso8859-6  .latin6 .arb
> AddCharset ISO-8859-7  .iso8859-7  .latin7 .grk
> AddCharset ISO-8859-8  .iso8859-8  .latin8 .heb
> AddCharset ISO-8859-9  .iso8859-9  .latin9 .trk
> AddCharset ISO-2022-JP .iso2022-jp .jis
> AddCharset ISO-2022-KR .iso2022-kr .kis
> AddCharset ISO-2022-CN .iso2022-cn .cis
> AddCharset Big5        .Big5       .big5
> # For russian, more than one charset is used (depends on client, mostly):
> AddCharset WINDOWS-1251 .cp-1251   .win-1251
> AddCharset CP866       .cp866
> AddCharset KOI8-r      .koi8-r .koi8-ru
> AddCharset KOI8-ru     .koi8-uk .ua
> AddCharset ISO-10646-UCS-2 .ucs2
> AddCharset ISO-10646-UCS-4 .ucs4
> AddCharset UTF-8       .utf8
>
>
> AddCharset GB2312      .gb2312 .gb
> AddCharset utf-7       .utf7
> AddCharset utf-8       .utf8
> AddCharset big5        .big5 .b5
> AddCharset EUC-TW      .euc-tw
> AddCharset EUC-JP      .euc-jp
> AddCharset EUC-KR      .euc-kr
> AddCharset shift_jis   .sjis
>
>
> AddType application/x-compress .Z
> AddType application/x-gzip .gz .tgz
>
>
> AddHandler imap-file map
>
>
> AddHandler type-map var
>
>
> AddType text/html .shtml
> AddOutputFilter INCLUDES .shtml
>
>
>
> Alias /error/ "/var/www/error/"
>
> <IfModule mod_negotiation.c>
> <IfModule mod_include.c>
>    <Directory "/var/www/error">
>        AllowOverride None
>        Options IncludesNoExec
>        AddOutputFilter Includes html
>        AddHandler type-map var
>        Order allow,deny
>        Allow from all
>        LanguagePriority en es de fr
>        ForceLanguagePriority Prefer Fallback
>    </Directory>
>
>
> </IfModule>
> </IfModule>
>
>
> BrowserMatch "Mozilla/2" nokeepalive
> BrowserMatch "MSIE 4\.0b2;" nokeepalive downgrade-1.0 force-response-1.0
> BrowserMatch "RealPlayer 4\.0" force-response-1.0
> BrowserMatch "Java/1\.0" force-response-1.0
> BrowserMatch "JDK/1\.0" force-response-1.0
>
>
> BrowserMatch "Microsoft Data Access Internet Publishing Provider"
> redirect-carefully
> BrowserMatch "^WebDrive" redirect-carefully
> BrowserMatch "^WebDAVFS/1.[012]" redirect-carefully
> BrowserMatch "^gnome-vfs" redirect-carefully
>
>
>
> LoadModule jk_module modules/mod_jk.so
> Include /etc/httpd/conf/mod_jk.conf
>
>
> NameVirtualHost sfta.npfit.nhs.uk:443
>
> <VirtualHost 192.168.25.178:443>
>
> RewriteEngine On
> RewriteCond %{REQUEST_METHOD} ^TRACE [OR]
> RewriteCond %{REQUEST_METHOD} ^TRACK
> RewriteRule .* - [F]
>
>
> RewriteCond %{REQUEST_URI} ^(.*)//(.*)$
> RewriteRule . %1/%2 [R=301,L]
>
> SSLEngine on
>
>
> ServerName sfta.x.x.x
>
> DocumentRoot "/var/webapps/"
>
> ErrorLog logs/error_sft_log
> CustomLog logs/access_sft_log combined
> ErrorDocument 404 /sft/error404.html
> ErrorDocument 503 /sft/error503.html
>
> SSLProtocol ALL -SSLv2
> SSLCipherSuite HIGH:MEDIUM
>
>
> SSLCertificateFile /etc/httpd/conf/ssl.crt/SFTA.crt
>
> SSLCertificateKeyFile /etc/httpd/conf/ssl.crt/SFTA.key
>
> <Files ~ "\.(cgi|shtml|phtml|php3?)$">
>    SSLOptions +StdEnvVars +ExportCertData
>    SSLRequire %{SSL_CIPHER_USEKEYSIZE} >= 128
> </Files>
> <Directory "/var/www/cgi-bin">
>    SSLOptions +StdEnvVars +ExportCertData
>    SSLRequire %{SSL_CIPHER_USEKEYSIZE} >= 128
> </Directory>
>
> #   SSL Protocol Adjustments:
> #   The safe and default but still SSL/TLS standard compliant shutdown
> #   approach is that mod_ssl sends the close notify alert but doesn't wait
> for
> #   the close notify alert from client. When you need a different shutdown
> #   approach you can use one of the following variables:
> #   o ssl-unclean-shutdown:
> #     This forces an unclean shutdown when the connection is closed, i.e.
> no
> #     SSL close notify alert is send or allowed to received.  This violates
> #     the SSL/TLS standard but is needed for some brain-dead browsers. Use
> #     this when you receive I/O errors because of the standard approach
> where
> #     mod_ssl sends the close notify alert.
> #   o ssl-accurate-shutdown:
> #     This forces an accurate shutdown when the connection is closed, i.e.
> a
> #     SSL close notify alert is send and mod_ssl waits for the close notify
> #     alert of the client. This is 100% SSL/TLS standard compliant, but in
> #     practice often causes hanging connections with brain-dead browsers.
> Use
> #     this only for browsers where you know that their SSL implementation
> #     works correctly.
> #   Notice: Most problems of broken clients are also related to the HTTP
> #   keep-alive facility, so you usually additionally want to disable
> #   keep-alive for those clients, too. Use variable "nokeepalive" for this.
> #   Similarly, one has to force some clients to use HTTP/1.0 to workaround
> #   their broken HTTP/1.1 implementation. Use variables "downgrade-1.0" and
> #   "force-response-1.0" for this.
> SetEnvIf User-Agent ".*MSIE.*" \
>         nokeepalive ssl-unclean-shutdown \
>         downgrade-1.0 force-response-1.0
>
> #   Per-Server Logging:
> #   The home of a custom SSL log file. Use this when you want a
> #   compact non-error SSL logfile on a virtual host basis.
> CustomLog logs/ssl_request_nww.sft.nhs.uk_log \
>          "%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \"%r\" %b"
>
> </VirtualHost>
>
>
> #Disable Apache supporting HTTP TRACE
> RewriteEngine On
> RewriteCond %{REQUEST_METHOD} ^TRACE [OR]
> RewriteCond %{REQUEST_METHOD} ^TRACK
> RewriteRule .* - [F]
>
> # Remove multiple slashes anywhere in URL
> RewriteCond %{REQUEST_URI} ^(.*)//(.*)$
> RewriteRule . %1/%2 [R=301,L]
>
> #The TraceEnable command isn't available on this version of apache
> #TraceEnable Off
>
>
>
> Mod_jk.conf
>
> JkWorkersFile /etc/httpd/conf/workers.properties
> JkLogFile     /var/log/httpd/mod_jk.log
> JkLogLevel error
>
>
> JkExtractSSL On
>
> JkHTTPSIndicator HTTPS
>
> JkSESSIONIndicator SSL_SESSION_ID
>
> JkCIPHERIndicator SSL_CIPHER
>
> Alias /sft "/var/webapps/sft"
> <Directory "/var/webapps/sft">
>    Options Indexes FollowSymLinks
> </Directory>
>
>
> JkMount /sft/* loadbalancer
>
>
> JkUnMount /*.html loadbalancer
>
>
> <Location "/sft/WEB-INF/">
>    AllowOverride None
>    deny from all
> </Location>
>
> My workers.properties file:
>
>
>
> workers.apache_log=/var/log/httpd/
>
>
> workers.tomcat_home=/var/tomcat
>
> workers.java_home=/usr/java/latest
>
>
> ps=/
>
>
> worker.list=softcat1, loadbalancer
>
> worker.softcat1.port=8009
> worker.softcat1.host=localhost
> worker.softcat1.type=ajp13
> worker.softcat1.lbfactor=100
>
>
> worker.loadbalancer.type=lb
> worker.loadbalancer.balanced_workers=softcat1
>
> If anyone has any ideas about what is wrong in the config I would be very
> grateful as I have spent hours trying to get this to work to no avail.
>
> Thanks
>
>
>
>
>
>
>
>
>

--14dae93405a18e84f704be57e3b7--

From users-return-233717-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 23 12:39:23 2012
Return-Path: <users-return-233717-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id ADA0D986E
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 23 Apr 2012 12:39:23 +0000 (UTC)
Received: (qmail 52936 invoked by uid 500); 23 Apr 2012 12:39:20 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 52761 invoked by uid 500); 23 Apr 2012 12:39:20 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 52747 invoked by uid 99); 23 Apr 2012 12:39:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 12:39:19 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of afkham@gmail.com designates 74.125.82.43 as permitted sender)
Received: from [74.125.82.43] (HELO mail-wg0-f43.google.com) (74.125.82.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 12:39:12 +0000
Received: by wgbdr12 with SMTP id dr12so9667390wgb.0
        for <users@tomcat.apache.org>; Mon, 23 Apr 2012 05:38:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:from:date:message-id:subject:to:content-type;
        bh=GAN9SbnDpBGQue40uFUNNMRSnCO+D9A2scj4Ut/ZFGU=;
        b=CxP0ZypnmMGxGAqy49TUolNZRtKmPKr+1VbxS+GQCoD6ftfZ/+r0vSreHIVZ5s50nx
         DKGi03h+CzKHJjHrOGKCWfXUtbNb6tdt5LzwuKK6qWhbn5mBNe1NKtt2rDov/bDM0EmR
         7TOvMnzyTG66JhhmtVza//is7j+g2WXtXSGcWLzEq6z1Uj81PX4dgFr6onbXeEJxkl4a
         PpnVtqFKwpug3qSmck4msm7wdXNnIJJC1twqbII/hlWj+0IRsQmxciKJeRERcVfSFOB/
         jW7JzfZdXIKam8Yz/ct31fIG16p1/r1W1hCSyZ98SjFTD6g/n0sHSYE31H8ASxBr84eV
         W4Pw==
Received: by 10.216.134.155 with SMTP id s27mr11131276wei.80.1335184732310;
 Mon, 23 Apr 2012 05:38:52 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.180.104.199 with HTTP; Mon, 23 Apr 2012 05:38:31 -0700 (PDT)
From: Afkham Azeez <afkham@gmail.com>
Date: Mon, 23 Apr 2012 18:08:31 +0530
Message-ID: <CAG7MYhmkZvk7Nfk9L--jnoOevDv0XnhNYuiLZz2+MPr4iHM3kQ@mail.gmail.com>
Subject: Tribes coordinator
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=001636d34cd2adcc1304be57ebcb

--001636d34cd2adcc1304be57ebcb
Content-Type: text/plain; charset=ISO-8859-1

We are using Tribes in Axis2. In a cluster, we want to have leader
election, and one member to be designated as the coordinator. How can this
be achieved using Tribes?

Thanks
Azeez

--001636d34cd2adcc1304be57ebcb--

From users-return-233718-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 23 12:53:38 2012
Return-Path: <users-return-233718-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5AFBB9CBA
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 23 Apr 2012 12:53:38 +0000 (UTC)
Received: (qmail 96722 invoked by uid 500); 23 Apr 2012 12:53:34 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 96669 invoked by uid 500); 23 Apr 2012 12:53:34 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 96638 invoked by uid 99); 23 Apr 2012 12:53:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 12:53:33 +0000
X-ASF-Spam-Status: No, hits=3.2 required=5.0
	tests=FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ironclawhand@hotmail.com designates 65.55.34.78 as permitted sender)
Received: from [65.55.34.78] (HELO col0-omc2-s4.col0.hotmail.com) (65.55.34.78)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 12:53:22 +0000
Received: from COL113-W44 ([65.55.34.71]) by col0-omc2-s4.col0.hotmail.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Mon, 23 Apr 2012 05:53:00 -0700
Message-ID: <COL113-W44B1E7156B779CB03139C0CF210@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_2c592a2c-cbfc-49fb-89c4-af1c552805f1_"
X-Originating-IP: [194.176.105.144]
From: ironclaw hand <ironclawhand@hotmail.com>
To: <users@tomcat.apache.org>
Subject: RE: Mod_jk returning source code of jsp files
Date: Mon, 23 Apr 2012 13:53:00 +0100
Importance: Normal
In-Reply-To:
 <CAAKASGwj8CegxJh_3GHPtVo1ABCeHxzadEHaZ6Janag4z9EaBA@mail.gmail.com>
References:
 <COL113-W248A31965DC681CB4DA9BACF210@phx.gbl>,<CAAKASGwj8CegxJh_3GHPtVo1ABCeHxzadEHaZ6Janag4z9EaBA@mail.gmail.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 23 Apr 2012 12:53:00.0521 (UTC) FILETIME=[039B1D90:01CD2150]

--_2c592a2c-cbfc-49fb-89c4-af1c552805f1_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable



Ok I tried that but apache wont start now. It gives the following error:

AH00526: Syntax error on line 1 of /etc/httpd/conf/mod_jk.conf:
JkWorkersFile cannot occur within <VirtualHost> section
                                                           [FAILED]


> Date: Mon=2C 23 Apr 2012 22:36:35 +1000
> Subject: Re: Mod_jk returning source code of jsp files
> From: icicimov@gmail.com
> To: users@tomcat.apache.org
>=20
> Put this line
>=20
> Include /etc/httpd/conf/mod_jk.conf
>=20
> inside virtual host.
>  On Apr 23=2C 2012 9:12 PM=2C "ironclaw hand" <ironclawhand@hotmail.com> =
wrote:
>=20
> >
> >
> > Hi=2C
> >
> > I am attempting to set up apache and tomcat together for the first time=
 on
> > a new machine using some existing configuration files. I am not sure wh=
at
> > is happening but it looks like apache is just serving up all files so w=
hen
> > i acccess a jsp file I get the source as if tomcat never executed it.
> >
> > I have installed the following versions of software:
> >
> > httpd 2.4.2
> > Tomcat connectors 1.2.35
> > Tomcat 7.0.27
> >
> > Below are the mod_jk config (workers.properties and mod_jk.conf) files =
I
> > am currently trying to get working if there is anything else that is ne=
eded
> > then I can include this. My worker softcat1 is defined in my server.xml=
 for
> > tomcat.
> >
> > Tomcat works on its own if I access it directly and it does run the jsp
> > files ok=2C it just seems to be when I try via apache.
> >
> > I have included my httpd.conf in case it is needed:
> >
> >
> > ServerTokens Prod
> >
> >
> > ServerRoot "/etc/httpd"
> >
> > PidFile run/httpd.pid
> >
> >
> > Timeout 120
> >
> >
> > KeepAlive Off
> >
> > MaxKeepAliveRequests 100
> >
> >
> > KeepAliveTimeout 15
> >
> >
> > <IfModule prefork.c>
> > StartServers       8
> > MinSpareServers    5
> > MaxSpareServers   20
> > ServerLimit      1024
> > #ServerLimit       50
> > MaxClients       1024
> > #MaxClients        50
> > MaxRequestsPerChild  4000
> > </IfModule>
> >
> >
> > <IfModule worker.c>
> > StartServers         2
> > MaxClients         150
> > MinSpareThreads     25
> > MaxSpareThreads     75
> > ThreadsPerChild     25
> > MaxRequestsPerChild  0
> > </IfModule>
> >
> >
> > LoadModule access_compat_module modules/mod_access_compat.so
> > LoadModule authz_core_module modules/mod_authz_core.so
> > LoadModule authz_host_module modules/mod_authz_host.so
> > LoadModule auth_basic_module modules/mod_auth_basic.so
> > LoadModule authn_file_module modules/mod_authn_file.so
> > LoadModule authn_anon_module modules/mod_authn_anon.so
> > LoadModule authn_dbm_module modules/mod_authn_dbm.so
> > LoadModule auth_digest_module modules/mod_auth_digest.so
> > LoadModule ldap_module modules/mod_ldap.so
> > LoadModule authnz_ldap_module modules/mod_authnz_ldap.so
> > LoadModule include_module modules/mod_include.so
> > LoadModule log_config_module modules/mod_log_config.so
> > LoadModule env_module modules/mod_env.so
> > LoadModule mime_magic_module modules/mod_mime_magic.so
> > LoadModule cern_meta_module modules/mod_cern_meta.so
> > LoadModule expires_module modules/mod_expires.so
> > LoadModule deflate_module modules/mod_deflate.so
> > LoadModule headers_module modules/mod_headers.so
> > LoadModule usertrack_module modules/mod_usertrack.so
> > LoadModule setenvif_module modules/mod_setenvif.so
> > LoadModule mime_module modules/mod_mime.so
> > LoadModule dav_module modules/mod_dav.so
> > LoadModule status_module modules/mod_status.so
> > LoadModule autoindex_module modules/mod_autoindex.so
> > LoadModule asis_module modules/mod_asis.so
> > LoadModule info_module modules/mod_info.so
> > LoadModule dav_fs_module modules/mod_dav_fs.so
> > LoadModule vhost_alias_module modules/mod_vhost_alias.so
> > LoadModule negotiation_module modules/mod_negotiation.so
> > LoadModule dir_module modules/mod_dir.so
> > LoadModule imagemap_module modules/mod_imagemap.so
> > LoadModule actions_module modules/mod_actions.so
> > LoadModule speling_module modules/mod_speling.so
> > LoadModule userdir_module modules/mod_userdir.so
> > LoadModule alias_module modules/mod_alias.so
> > LoadModule rewrite_module modules/mod_rewrite.so
> > LoadModule proxy_module modules/mod_proxy.so
> > LoadModule proxy_ftp_module modules/mod_proxy_ftp.so
> > LoadModule proxy_http_module modules/mod_proxy_http.so
> > LoadModule proxy_connect_module modules/mod_proxy_connect.so
> > LoadModule cache_module modules/mod_cache.so
> > LoadModule suexec_module modules/mod_suexec.so
> > #LoadModule disk_cache_module modules/mod_disk_cache.so
> > LoadModule file_cache_module modules/mod_file_cache.so
> > #LoadModule mem_cache_module modules/mod_mem_cache.so
> > LoadModule cgi_module modules/mod_cgi.so
> > LoadModule version_module modules/mod_version.so
> > LoadModule socache_shmcb_module modules/mod_socache_shmcb.so
> > LoadModule unixd_module modules/mod_unixd.so
> >
> >
> > Include conf.d/*.conf
> >
> > User apache
> > Group apache
> >
> >
> > ServerAdmin root@localhost
> >
> >
> > UseCanonicalName Off
> >
> > DocumentRoot "/var/webapps"
> >
> >
> > <Directory />
> >    Options FollowSymLinks
> >    AllowOverride None
> > </Directory>
> >
> >
> > <Directory "/var/webapps">
> >
> >
> >    Options Indexes FollowSymLinks
> >
> >    AllowOverride None
> >
> >    Order allow=2Cdeny
> >    Allow from all
> >
> > </Directory>
> >
> >
> > <IfModule mod_userdir.c>
> >
> >    UserDir disable
> >
> >
> >
> > </IfModule>
> >
> >
> > DirectoryIndex index.html index.html.var
> >
> >
> > AccessFileName .htaccess
> >
> > <Files ~ "^\.ht">
> >    Order allow=2Cdeny
> >    Deny from all
> > </Files>
> >
> >
> > TypesConfig /etc/mime.types
> >
> > DefaultType text/plain
> >
> >
> > <IfModule mod_mime_magic.c>
> > #   MIMEMagicFile /usr/share/magic.mime
> >    MIMEMagicFile conf/magic
> > </IfModule>
> >
> >
> > HostnameLookups Off
> >
> >
> > ErrorLog logs/error_log
> >
> >
> > LogLevel warn
> >
> >
> > LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"=
"
> > combined
> > LogFormat "%h %l %u %t \"%r\" %>s %b" common
> > LogFormat "%{Referer}i -> %U" referer
> > LogFormat "%{User-agent}i" agent
> >
> >
> > CustomLog logs/access_log combined
> >
> >
> > ServerSignature Off
> >
> >
> > Alias /icons/ "/var/www/icons/"
> >
> > <Directory "/var/www/icons">
> >    Options Indexes MultiViews
> >    AllowOverride None
> >    Order allow=2Cdeny
> >    Allow from all
> > </Directory>
> >
> >
> > <IfModule mod_dav_fs.c>
> >    # Location of the WebDAV lock database.
> >    DAVLockDB /var/lib/dav/lockdb
> > </IfModule>
> >
> >
> > ScriptAlias /cgi-bin/ "/var/www/cgi-bin/"
> >
> >
> > <Directory "/var/www/cgi-bin">
> >    AllowOverride None
> >    Options None
> >    Order allow=2Cdeny
> >    Allow from all
> > </Directory>
> >
> >
> > IndexOptions FancyIndexing VersionSort NameWidth=3D*
> >
> >
> > AddIconByEncoding (CMP=2C/icons/compressed.gif) x-compress x-gzip
> >
> > AddIconByType (TXT=2C/icons/text.gif) text/*
> > AddIconByType (IMG=2C/icons/image2.gif) image/*
> > AddIconByType (SND=2C/icons/sound2.gif) audio/*
> > AddIconByType (VID=2C/icons/movie.gif) video/*
> >
> > AddIcon /icons/binary.gif .bin .exe
> > AddIcon /icons/binhex.gif .hqx
> > AddIcon /icons/tar.gif .tar
> > AddIcon /icons/world2.gif .wrl .wrl.gz .vrml .vrm .iv
> > AddIcon /icons/compressed.gif .Z .z .tgz .gz .zip
> > AddIcon /icons/a.gif .ps .ai .eps
> > AddIcon /icons/layout.gif .html .shtml .htm .pdf
> > AddIcon /icons/text.gif .txt
> > AddIcon /icons/c.gif .c
> > AddIcon /icons/p.gif .pl .py
> > AddIcon /icons/f.gif .for
> > AddIcon /icons/dvi.gif .dvi
> > AddIcon /icons/uuencoded.gif .uu
> > AddIcon /icons/script.gif .conf .sh .shar .csh .ksh .tcl
> > AddIcon /icons/tex.gif .tex
> > AddIcon /icons/bomb.gif core
> >
> > AddIcon /icons/back.gif ..
> > AddIcon /icons/hand.right.gif README
> > AddIcon /icons/folder.gif ^^DIRECTORY^^
> > AddIcon /icons/blank.gif ^^BLANKICON^^
> >
> >
> > DefaultIcon /icons/unknown.gif
> >
> >
> > ReadmeName README.html
> > HeaderName HEADER.html
> >
> >
> > IndexIgnore .??* *~ *# HEADER* README* RCS CVS *=2Cv *=2Ct
> >
> >
> > AddLanguage ca .ca
> > AddLanguage cs .cz .cs
> > AddLanguage da .dk
> > AddLanguage de .de
> > AddLanguage el .el
> > AddLanguage en .en
> > AddLanguage eo .eo
> > AddLanguage es .es
> > AddLanguage et .et
> > AddLanguage fr .fr
> > AddLanguage he .he
> > AddLanguage hr .hr
> > AddLanguage it .it
> > AddLanguage ja .ja
> > AddLanguage ko .ko
> > AddLanguage ltz .ltz
> > AddLanguage nl .nl
> > AddLanguage nn .nn
> > AddLanguage no .no
> > AddLanguage pl .po
> > AddLanguage pt .pt
> > AddLanguage pt-BR .pt-br
> > AddLanguage ru .ru
> > AddLanguage sv .sv
> > AddLanguage zh-CN .zh-cn
> > AddLanguage zh-TW .zh-tw
> >
> >
> > LanguagePriority en ca cs da de el eo es et fr he hr it ja ko ltz nl nn=
 no
> > pl pt pt-BR ru sv zh-CN zh-TW
> >
> >
> > ForceLanguagePriority Prefer Fallback
> >
> >
> > AddDefaultCharset UTF-8
> >
> >
> > AddCharset ISO-8859-1  .iso8859-1  .latin1
> > AddCharset ISO-8859-2  .iso8859-2  .latin2 .cen
> > AddCharset ISO-8859-3  .iso8859-3  .latin3
> > AddCharset ISO-8859-4  .iso8859-4  .latin4
> > AddCharset ISO-8859-5  .iso8859-5  .latin5 .cyr .iso-ru
> > AddCharset ISO-8859-6  .iso8859-6  .latin6 .arb
> > AddCharset ISO-8859-7  .iso8859-7  .latin7 .grk
> > AddCharset ISO-8859-8  .iso8859-8  .latin8 .heb
> > AddCharset ISO-8859-9  .iso8859-9  .latin9 .trk
> > AddCharset ISO-2022-JP .iso2022-jp .jis
> > AddCharset ISO-2022-KR .iso2022-kr .kis
> > AddCharset ISO-2022-CN .iso2022-cn .cis
> > AddCharset Big5        .Big5       .big5
> > # For russian=2C more than one charset is used (depends on client=2C mo=
stly):
> > AddCharset WINDOWS-1251 .cp-1251   .win-1251
> > AddCharset CP866       .cp866
> > AddCharset KOI8-r      .koi8-r .koi8-ru
> > AddCharset KOI8-ru     .koi8-uk .ua
> > AddCharset ISO-10646-UCS-2 .ucs2
> > AddCharset ISO-10646-UCS-4 .ucs4
> > AddCharset UTF-8       .utf8
> >
> >
> > AddCharset GB2312      .gb2312 .gb
> > AddCharset utf-7       .utf7
> > AddCharset utf-8       .utf8
> > AddCharset big5        .big5 .b5
> > AddCharset EUC-TW      .euc-tw
> > AddCharset EUC-JP      .euc-jp
> > AddCharset EUC-KR      .euc-kr
> > AddCharset shift_jis   .sjis
> >
> >
> > AddType application/x-compress .Z
> > AddType application/x-gzip .gz .tgz
> >
> >
> > AddHandler imap-file map
> >
> >
> > AddHandler type-map var
> >
> >
> > AddType text/html .shtml
> > AddOutputFilter INCLUDES .shtml
> >
> >
> >
> > Alias /error/ "/var/www/error/"
> >
> > <IfModule mod_negotiation.c>
> > <IfModule mod_include.c>
> >    <Directory "/var/www/error">
> >        AllowOverride None
> >        Options IncludesNoExec
> >        AddOutputFilter Includes html
> >        AddHandler type-map var
> >        Order allow=2Cdeny
> >        Allow from all
> >        LanguagePriority en es de fr
> >        ForceLanguagePriority Prefer Fallback
> >    </Directory>
> >
> >
> > </IfModule>
> > </IfModule>
> >
> >
> > BrowserMatch "Mozilla/2" nokeepalive
> > BrowserMatch "MSIE 4\.0b2=3B" nokeepalive downgrade-1.0 force-response-=
1.0
> > BrowserMatch "RealPlayer 4\.0" force-response-1.0
> > BrowserMatch "Java/1\.0" force-response-1.0
> > BrowserMatch "JDK/1\.0" force-response-1.0
> >
> >
> > BrowserMatch "Microsoft Data Access Internet Publishing Provider"
> > redirect-carefully
> > BrowserMatch "^WebDrive" redirect-carefully
> > BrowserMatch "^WebDAVFS/1.[012]" redirect-carefully
> > BrowserMatch "^gnome-vfs" redirect-carefully
> >
> >
> >
> > LoadModule jk_module modules/mod_jk.so
> > Include /etc/httpd/conf/mod_jk.conf
> >
> >
> > NameVirtualHost sfta.npfit.nhs.uk:443
> >
> > <VirtualHost 192.168.25.178:443>
> >
> > RewriteEngine On
> > RewriteCond %{REQUEST_METHOD} ^TRACE [OR]
> > RewriteCond %{REQUEST_METHOD} ^TRACK
> > RewriteRule .* - [F]
> >
> >
> > RewriteCond %{REQUEST_URI} ^(.*)//(.*)$
> > RewriteRule . %1/%2 [R=3D301=2CL]
> >
> > SSLEngine on
> >
> >
> > ServerName sfta.x.x.x
> >
> > DocumentRoot "/var/webapps/"
> >
> > ErrorLog logs/error_sft_log
> > CustomLog logs/access_sft_log combined
> > ErrorDocument 404 /sft/error404.html
> > ErrorDocument 503 /sft/error503.html
> >
> > SSLProtocol ALL -SSLv2
> > SSLCipherSuite HIGH:MEDIUM
> >
> >
> > SSLCertificateFile /etc/httpd/conf/ssl.crt/SFTA.crt
> >
> > SSLCertificateKeyFile /etc/httpd/conf/ssl.crt/SFTA.key
> >
> > <Files ~ "\.(cgi|shtml|phtml|php3?)$">
> >    SSLOptions +StdEnvVars +ExportCertData
> >    SSLRequire %{SSL_CIPHER_USEKEYSIZE} >=3D 128
> > </Files>
> > <Directory "/var/www/cgi-bin">
> >    SSLOptions +StdEnvVars +ExportCertData
> >    SSLRequire %{SSL_CIPHER_USEKEYSIZE} >=3D 128
> > </Directory>
> >
> > #   SSL Protocol Adjustments:
> > #   The safe and default but still SSL/TLS standard compliant shutdown
> > #   approach is that mod_ssl sends the close notify alert but doesn't w=
ait
> > for
> > #   the close notify alert from client. When you need a different shutd=
own
> > #   approach you can use one of the following variables:
> > #   o ssl-unclean-shutdown:
> > #     This forces an unclean shutdown when the connection is closed=2C =
i.e.
> > no
> > #     SSL close notify alert is send or allowed to received.  This viol=
ates
> > #     the SSL/TLS standard but is needed for some brain-dead browsers. =
Use
> > #     this when you receive I/O errors because of the standard approach
> > where
> > #     mod_ssl sends the close notify alert.
> > #   o ssl-accurate-shutdown:
> > #     This forces an accurate shutdown when the connection is closed=2C=
 i.e.
> > a
> > #     SSL close notify alert is send and mod_ssl waits for the close no=
tify
> > #     alert of the client. This is 100% SSL/TLS standard compliant=2C b=
ut in
> > #     practice often causes hanging connections with brain-dead browser=
s.
> > Use
> > #     this only for browsers where you know that their SSL implementati=
on
> > #     works correctly.
> > #   Notice: Most problems of broken clients are also related to the HTT=
P
> > #   keep-alive facility=2C so you usually additionally want to disable
> > #   keep-alive for those clients=2C too. Use variable "nokeepalive" for=
 this.
> > #   Similarly=2C one has to force some clients to use HTTP/1.0 to worka=
round
> > #   their broken HTTP/1.1 implementation. Use variables "downgrade-1.0"=
 and
> > #   "force-response-1.0" for this.
> > SetEnvIf User-Agent ".*MSIE.*" \
> >         nokeepalive ssl-unclean-shutdown \
> >         downgrade-1.0 force-response-1.0
> >
> > #   Per-Server Logging:
> > #   The home of a custom SSL log file. Use this when you want a
> > #   compact non-error SSL logfile on a virtual host basis.
> > CustomLog logs/ssl_request_nww.sft.nhs.uk_log \
> >          "%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \"%r\" %b"
> >
> > </VirtualHost>
> >
> >
> > #Disable Apache supporting HTTP TRACE
> > RewriteEngine On
> > RewriteCond %{REQUEST_METHOD} ^TRACE [OR]
> > RewriteCond %{REQUEST_METHOD} ^TRACK
> > RewriteRule .* - [F]
> >
> > # Remove multiple slashes anywhere in URL
> > RewriteCond %{REQUEST_URI} ^(.*)//(.*)$
> > RewriteRule . %1/%2 [R=3D301=2CL]
> >
> > #The TraceEnable command isn't available on this version of apache
> > #TraceEnable Off
> >
> >
> >
> > Mod_jk.conf
> >
> > JkWorkersFile /etc/httpd/conf/workers.properties
> > JkLogFile     /var/log/httpd/mod_jk.log
> > JkLogLevel error
> >
> >
> > JkExtractSSL On
> >
> > JkHTTPSIndicator HTTPS
> >
> > JkSESSIONIndicator SSL_SESSION_ID
> >
> > JkCIPHERIndicator SSL_CIPHER
> >
> > Alias /sft "/var/webapps/sft"
> > <Directory "/var/webapps/sft">
> >    Options Indexes FollowSymLinks
> > </Directory>
> >
> >
> > JkMount /sft/* loadbalancer
> >
> >
> > JkUnMount /*.html loadbalancer
> >
> >
> > <Location "/sft/WEB-INF/">
> >    AllowOverride None
> >    deny from all
> > </Location>
> >
> > My workers.properties file:
> >
> >
> >
> > workers.apache_log=3D/var/log/httpd/
> >
> >
> > workers.tomcat_home=3D/var/tomcat
> >
> > workers.java_home=3D/usr/java/latest
> >
> >
> > ps=3D/
> >
> >
> > worker.list=3Dsoftcat1=2C loadbalancer
> >
> > worker.softcat1.port=3D8009
> > worker.softcat1.host=3Dlocalhost
> > worker.softcat1.type=3Dajp13
> > worker.softcat1.lbfactor=3D100
> >
> >
> > worker.loadbalancer.type=3Dlb
> > worker.loadbalancer.balanced_workers=3Dsoftcat1
> >
> > If anyone has any ideas about what is wrong in the config I would be ve=
ry
> > grateful as I have spent hours trying to get this to work to no avail.
> >
> > Thanks
> >
> >
> >
> >
> >
> >
> >
> >
> >
 		 	   		  =

--_2c592a2c-cbfc-49fb-89c4-af1c552805f1_--

From users-return-233719-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 23 13:11:30 2012
Return-Path: <users-return-233719-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9FF8492D7
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 23 Apr 2012 13:11:30 +0000 (UTC)
Received: (qmail 54043 invoked by uid 500); 23 Apr 2012 13:11:27 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 53838 invoked by uid 500); 23 Apr 2012 13:11:26 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 53783 invoked by uid 99); 23 Apr 2012 13:11:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 13:11:24 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,NORMAL_HTTP_TO_IP,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of icicimov@gmail.com designates 209.85.210.173 as permitted sender)
Received: from [209.85.210.173] (HELO mail-iy0-f173.google.com) (209.85.210.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 13:11:16 +0000
Received: by iafj26 with SMTP id j26so22869141iaf.18
        for <users@tomcat.apache.org>; Mon, 23 Apr 2012 06:10:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=aKwIz4Cmka4NF0k1xPEbA7AHYq/3zAnYjZHfT6LxTaI=;
        b=zTz+XokVs1/bUlhvhKtaflvfauBAYbvbZiIMBP66ogjOwqAuBd+ugGB4D5HvlGlLBK
         +Gyc6cGVqJXEOicwnXS2MJcavj7SwjVgrFcPU30lu6AMfYKjzYExiAfC6LIzMVnMg03d
         paE8Lfqblswr34k1rSjCcv2pL1sb4gbY4IOssQGMQ/Hbo6EyopDnWAVaYfWlpiUJO1AR
         kT390tIfV485xaX5ITeNcnFzbZvX3KIo5p2OgEKVqc6ytgjlf3WvdgAI922Zxd52tB8r
         032m8WaFN3MMcqaGZPHkaNNFxR8fQdBG6PwbQHKwvUmP8vPuwSaYenlJq/NFrpiCScAd
         7BFA==
MIME-Version: 1.0
Received: by 10.50.51.197 with SMTP id m5mr6395132igo.38.1335186655951; Mon,
 23 Apr 2012 06:10:55 -0700 (PDT)
Received: by 10.42.71.9 with HTTP; Mon, 23 Apr 2012 06:10:55 -0700 (PDT)
Received: by 10.42.71.9 with HTTP; Mon, 23 Apr 2012 06:10:55 -0700 (PDT)
In-Reply-To: <COL113-W44B1E7156B779CB03139C0CF210@phx.gbl>
References: <COL113-W248A31965DC681CB4DA9BACF210@phx.gbl>
	<CAAKASGwj8CegxJh_3GHPtVo1ABCeHxzadEHaZ6Janag4z9EaBA@mail.gmail.com>
	<COL113-W44B1E7156B779CB03139C0CF210@phx.gbl>
Date: Mon, 23 Apr 2012 23:10:55 +1000
Message-ID: <CAAKASGwaSYN2=Lsi1Wi9mj7m9+rjKvCJcqYSh-DPBJrcXnYP0A@mail.gmail.com>
Subject: RE: Mod_jk returning source code of jsp files
From: Igor Cicimov <icicimov@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=14dae934039f563b7004be585e5d
X-Virus-Checked: Checked by ClamAV on apache.org

--14dae934039f563b7004be585e5d
Content-Type: text/plain; charset=ISO-8859-1

Well you need to have JkMount command inside the virtual host so its up to
you how to do it.
 On Apr 23, 2012 10:53 PM, "ironclaw hand" <ironclawhand@hotmail.com> wrote:

>
>
> Ok I tried that but apache wont start now. It gives the following error:
>
> AH00526: Syntax error on line 1 of /etc/httpd/conf/mod_jk.conf:
> JkWorkersFile cannot occur within <VirtualHost> section
>                                                           [FAILED]
>
>
> > Date: Mon, 23 Apr 2012 22:36:35 +1000
> > Subject: Re: Mod_jk returning source code of jsp files
> > From: icicimov@gmail.com
> > To: users@tomcat.apache.org
> >
> > Put this line
> >
> > Include /etc/httpd/conf/mod_jk.conf
> >
> > inside virtual host.
> >  On Apr 23, 2012 9:12 PM, "ironclaw hand" <ironclawhand@hotmail.com>
> wrote:
> >
> > >
> > >
> > > Hi,
> > >
> > > I am attempting to set up apache and tomcat together for the first
> time on
> > > a new machine using some existing configuration files. I am not sure
> what
> > > is happening but it looks like apache is just serving up all files so
> when
> > > i acccess a jsp file I get the source as if tomcat never executed it.
> > >
> > > I have installed the following versions of software:
> > >
> > > httpd 2.4.2
> > > Tomcat connectors 1.2.35
> > > Tomcat 7.0.27
> > >
> > > Below are the mod_jk config (workers.properties and mod_jk.conf) files
> I
> > > am currently trying to get working if there is anything else that is
> needed
> > > then I can include this. My worker softcat1 is defined in my
> server.xml for
> > > tomcat.
> > >
> > > Tomcat works on its own if I access it directly and it does run the jsp
> > > files ok, it just seems to be when I try via apache.
> > >
> > > I have included my httpd.conf in case it is needed:
> > >
> > >
> > > ServerTokens Prod
> > >
> > >
> > > ServerRoot "/etc/httpd"
> > >
> > > PidFile run/httpd.pid
> > >
> > >
> > > Timeout 120
> > >
> > >
> > > KeepAlive Off
> > >
> > > MaxKeepAliveRequests 100
> > >
> > >
> > > KeepAliveTimeout 15
> > >
> > >
> > > <IfModule prefork.c>
> > > StartServers       8
> > > MinSpareServers    5
> > > MaxSpareServers   20
> > > ServerLimit      1024
> > > #ServerLimit       50
> > > MaxClients       1024
> > > #MaxClients        50
> > > MaxRequestsPerChild  4000
> > > </IfModule>
> > >
> > >
> > > <IfModule worker.c>
> > > StartServers         2
> > > MaxClients         150
> > > MinSpareThreads     25
> > > MaxSpareThreads     75
> > > ThreadsPerChild     25
> > > MaxRequestsPerChild  0
> > > </IfModule>
> > >
> > >
> > > LoadModule access_compat_module modules/mod_access_compat.so
> > > LoadModule authz_core_module modules/mod_authz_core.so
> > > LoadModule authz_host_module modules/mod_authz_host.so
> > > LoadModule auth_basic_module modules/mod_auth_basic.so
> > > LoadModule authn_file_module modules/mod_authn_file.so
> > > LoadModule authn_anon_module modules/mod_authn_anon.so
> > > LoadModule authn_dbm_module modules/mod_authn_dbm.so
> > > LoadModule auth_digest_module modules/mod_auth_digest.so
> > > LoadModule ldap_module modules/mod_ldap.so
> > > LoadModule authnz_ldap_module modules/mod_authnz_ldap.so
> > > LoadModule include_module modules/mod_include.so
> > > LoadModule log_config_module modules/mod_log_config.so
> > > LoadModule env_module modules/mod_env.so
> > > LoadModule mime_magic_module modules/mod_mime_magic.so
> > > LoadModule cern_meta_module modules/mod_cern_meta.so
> > > LoadModule expires_module modules/mod_expires.so
> > > LoadModule deflate_module modules/mod_deflate.so
> > > LoadModule headers_module modules/mod_headers.so
> > > LoadModule usertrack_module modules/mod_usertrack.so
> > > LoadModule setenvif_module modules/mod_setenvif.so
> > > LoadModule mime_module modules/mod_mime.so
> > > LoadModule dav_module modules/mod_dav.so
> > > LoadModule status_module modules/mod_status.so
> > > LoadModule autoindex_module modules/mod_autoindex.so
> > > LoadModule asis_module modules/mod_asis.so
> > > LoadModule info_module modules/mod_info.so
> > > LoadModule dav_fs_module modules/mod_dav_fs.so
> > > LoadModule vhost_alias_module modules/mod_vhost_alias.so
> > > LoadModule negotiation_module modules/mod_negotiation.so
> > > LoadModule dir_module modules/mod_dir.so
> > > LoadModule imagemap_module modules/mod_imagemap.so
> > > LoadModule actions_module modules/mod_actions.so
> > > LoadModule speling_module modules/mod_speling.so
> > > LoadModule userdir_module modules/mod_userdir.so
> > > LoadModule alias_module modules/mod_alias.so
> > > LoadModule rewrite_module modules/mod_rewrite.so
> > > LoadModule proxy_module modules/mod_proxy.so
> > > LoadModule proxy_ftp_module modules/mod_proxy_ftp.so
> > > LoadModule proxy_http_module modules/mod_proxy_http.so
> > > LoadModule proxy_connect_module modules/mod_proxy_connect.so
> > > LoadModule cache_module modules/mod_cache.so
> > > LoadModule suexec_module modules/mod_suexec.so
> > > #LoadModule disk_cache_module modules/mod_disk_cache.so
> > > LoadModule file_cache_module modules/mod_file_cache.so
> > > #LoadModule mem_cache_module modules/mod_mem_cache.so
> > > LoadModule cgi_module modules/mod_cgi.so
> > > LoadModule version_module modules/mod_version.so
> > > LoadModule socache_shmcb_module modules/mod_socache_shmcb.so
> > > LoadModule unixd_module modules/mod_unixd.so
> > >
> > >
> > > Include conf.d/*.conf
> > >
> > > User apache
> > > Group apache
> > >
> > >
> > > ServerAdmin root@localhost
> > >
> > >
> > > UseCanonicalName Off
> > >
> > > DocumentRoot "/var/webapps"
> > >
> > >
> > > <Directory />
> > >    Options FollowSymLinks
> > >    AllowOverride None
> > > </Directory>
> > >
> > >
> > > <Directory "/var/webapps">
> > >
> > >
> > >    Options Indexes FollowSymLinks
> > >
> > >    AllowOverride None
> > >
> > >    Order allow,deny
> > >    Allow from all
> > >
> > > </Directory>
> > >
> > >
> > > <IfModule mod_userdir.c>
> > >
> > >    UserDir disable
> > >
> > >
> > >
> > > </IfModule>
> > >
> > >
> > > DirectoryIndex index.html index.html.var
> > >
> > >
> > > AccessFileName .htaccess
> > >
> > > <Files ~ "^\.ht">
> > >    Order allow,deny
> > >    Deny from all
> > > </Files>
> > >
> > >
> > > TypesConfig /etc/mime.types
> > >
> > > DefaultType text/plain
> > >
> > >
> > > <IfModule mod_mime_magic.c>
> > > #   MIMEMagicFile /usr/share/magic.mime
> > >    MIMEMagicFile conf/magic
> > > </IfModule>
> > >
> > >
> > > HostnameLookups Off
> > >
> > >
> > > ErrorLog logs/error_log
> > >
> > >
> > > LogLevel warn
> > >
> > >
> > > LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\"
> \"%{User-Agent}i\""
> > > combined
> > > LogFormat "%h %l %u %t \"%r\" %>s %b" common
> > > LogFormat "%{Referer}i -> %U" referer
> > > LogFormat "%{User-agent}i" agent
> > >
> > >
> > > CustomLog logs/access_log combined
> > >
> > >
> > > ServerSignature Off
> > >
> > >
> > > Alias /icons/ "/var/www/icons/"
> > >
> > > <Directory "/var/www/icons">
> > >    Options Indexes MultiViews
> > >    AllowOverride None
> > >    Order allow,deny
> > >    Allow from all
> > > </Directory>
> > >
> > >
> > > <IfModule mod_dav_fs.c>
> > >    # Location of the WebDAV lock database.
> > >    DAVLockDB /var/lib/dav/lockdb
> > > </IfModule>
> > >
> > >
> > > ScriptAlias /cgi-bin/ "/var/www/cgi-bin/"
> > >
> > >
> > > <Directory "/var/www/cgi-bin">
> > >    AllowOverride None
> > >    Options None
> > >    Order allow,deny
> > >    Allow from all
> > > </Directory>
> > >
> > >
> > > IndexOptions FancyIndexing VersionSort NameWidth=*
> > >
> > >
> > > AddIconByEncoding (CMP,/icons/compressed.gif) x-compress x-gzip
> > >
> > > AddIconByType (TXT,/icons/text.gif) text/*
> > > AddIconByType (IMG,/icons/image2.gif) image/*
> > > AddIconByType (SND,/icons/sound2.gif) audio/*
> > > AddIconByType (VID,/icons/movie.gif) video/*
> > >
> > > AddIcon /icons/binary.gif .bin .exe
> > > AddIcon /icons/binhex.gif .hqx
> > > AddIcon /icons/tar.gif .tar
> > > AddIcon /icons/world2.gif .wrl .wrl.gz .vrml .vrm .iv
> > > AddIcon /icons/compressed.gif .Z .z .tgz .gz .zip
> > > AddIcon /icons/a.gif .ps .ai .eps
> > > AddIcon /icons/layout.gif .html .shtml .htm .pdf
> > > AddIcon /icons/text.gif .txt
> > > AddIcon /icons/c.gif .c
> > > AddIcon /icons/p.gif .pl .py
> > > AddIcon /icons/f.gif .for
> > > AddIcon /icons/dvi.gif .dvi
> > > AddIcon /icons/uuencoded.gif .uu
> > > AddIcon /icons/script.gif .conf .sh .shar .csh .ksh .tcl
> > > AddIcon /icons/tex.gif .tex
> > > AddIcon /icons/bomb.gif core
> > >
> > > AddIcon /icons/back.gif ..
> > > AddIcon /icons/hand.right.gif README
> > > AddIcon /icons/folder.gif ^^DIRECTORY^^
> > > AddIcon /icons/blank.gif ^^BLANKICON^^
> > >
> > >
> > > DefaultIcon /icons/unknown.gif
> > >
> > >
> > > ReadmeName README.html
> > > HeaderName HEADER.html
> > >
> > >
> > > IndexIgnore .??* *~ *# HEADER* README* RCS CVS *,v *,t
> > >
> > >
> > > AddLanguage ca .ca
> > > AddLanguage cs .cz .cs
> > > AddLanguage da .dk
> > > AddLanguage de .de
> > > AddLanguage el .el
> > > AddLanguage en .en
> > > AddLanguage eo .eo
> > > AddLanguage es .es
> > > AddLanguage et .et
> > > AddLanguage fr .fr
> > > AddLanguage he .he
> > > AddLanguage hr .hr
> > > AddLanguage it .it
> > > AddLanguage ja .ja
> > > AddLanguage ko .ko
> > > AddLanguage ltz .ltz
> > > AddLanguage nl .nl
> > > AddLanguage nn .nn
> > > AddLanguage no .no
> > > AddLanguage pl .po
> > > AddLanguage pt .pt
> > > AddLanguage pt-BR .pt-br
> > > AddLanguage ru .ru
> > > AddLanguage sv .sv
> > > AddLanguage zh-CN .zh-cn
> > > AddLanguage zh-TW .zh-tw
> > >
> > >
> > > LanguagePriority en ca cs da de el eo es et fr he hr it ja ko ltz nl
> nn no
> > > pl pt pt-BR ru sv zh-CN zh-TW
> > >
> > >
> > > ForceLanguagePriority Prefer Fallback
> > >
> > >
> > > AddDefaultCharset UTF-8
> > >
> > >
> > > AddCharset ISO-8859-1  .iso8859-1  .latin1
> > > AddCharset ISO-8859-2  .iso8859-2  .latin2 .cen
> > > AddCharset ISO-8859-3  .iso8859-3  .latin3
> > > AddCharset ISO-8859-4  .iso8859-4  .latin4
> > > AddCharset ISO-8859-5  .iso8859-5  .latin5 .cyr .iso-ru
> > > AddCharset ISO-8859-6  .iso8859-6  .latin6 .arb
> > > AddCharset ISO-8859-7  .iso8859-7  .latin7 .grk
> > > AddCharset ISO-8859-8  .iso8859-8  .latin8 .heb
> > > AddCharset ISO-8859-9  .iso8859-9  .latin9 .trk
> > > AddCharset ISO-2022-JP .iso2022-jp .jis
> > > AddCharset ISO-2022-KR .iso2022-kr .kis
> > > AddCharset ISO-2022-CN .iso2022-cn .cis
> > > AddCharset Big5        .Big5       .big5
> > > # For russian, more than one charset is used (depends on client,
> mostly):
> > > AddCharset WINDOWS-1251 .cp-1251   .win-1251
> > > AddCharset CP866       .cp866
> > > AddCharset KOI8-r      .koi8-r .koi8-ru
> > > AddCharset KOI8-ru     .koi8-uk .ua
> > > AddCharset ISO-10646-UCS-2 .ucs2
> > > AddCharset ISO-10646-UCS-4 .ucs4
> > > AddCharset UTF-8       .utf8
> > >
> > >
> > > AddCharset GB2312      .gb2312 .gb
> > > AddCharset utf-7       .utf7
> > > AddCharset utf-8       .utf8
> > > AddCharset big5        .big5 .b5
> > > AddCharset EUC-TW      .euc-tw
> > > AddCharset EUC-JP      .euc-jp
> > > AddCharset EUC-KR      .euc-kr
> > > AddCharset shift_jis   .sjis
> > >
> > >
> > > AddType application/x-compress .Z
> > > AddType application/x-gzip .gz .tgz
> > >
> > >
> > > AddHandler imap-file map
> > >
> > >
> > > AddHandler type-map var
> > >
> > >
> > > AddType text/html .shtml
> > > AddOutputFilter INCLUDES .shtml
> > >
> > >
> > >
> > > Alias /error/ "/var/www/error/"
> > >
> > > <IfModule mod_negotiation.c>
> > > <IfModule mod_include.c>
> > >    <Directory "/var/www/error">
> > >        AllowOverride None
> > >        Options IncludesNoExec
> > >        AddOutputFilter Includes html
> > >        AddHandler type-map var
> > >        Order allow,deny
> > >        Allow from all
> > >        LanguagePriority en es de fr
> > >        ForceLanguagePriority Prefer Fallback
> > >    </Directory>
> > >
> > >
> > > </IfModule>
> > > </IfModule>
> > >
> > >
> > > BrowserMatch "Mozilla/2" nokeepalive
> > > BrowserMatch "MSIE 4\.0b2;" nokeepalive downgrade-1.0
> force-response-1.0
> > > BrowserMatch "RealPlayer 4\.0" force-response-1.0
> > > BrowserMatch "Java/1\.0" force-response-1.0
> > > BrowserMatch "JDK/1\.0" force-response-1.0
> > >
> > >
> > > BrowserMatch "Microsoft Data Access Internet Publishing Provider"
> > > redirect-carefully
> > > BrowserMatch "^WebDrive" redirect-carefully
> > > BrowserMatch "^WebDAVFS/1.[012]" redirect-carefully
> > > BrowserMatch "^gnome-vfs" redirect-carefully
> > >
> > >
> > >
> > > LoadModule jk_module modules/mod_jk.so
> > > Include /etc/httpd/conf/mod_jk.conf
> > >
> > >
> > > NameVirtualHost sfta.npfit.nhs.uk:443
> > >
> > > <VirtualHost 192.168.25.178:443>
> > >
> > > RewriteEngine On
> > > RewriteCond %{REQUEST_METHOD} ^TRACE [OR]
> > > RewriteCond %{REQUEST_METHOD} ^TRACK
> > > RewriteRule .* - [F]
> > >
> > >
> > > RewriteCond %{REQUEST_URI} ^(.*)//(.*)$
> > > RewriteRule . %1/%2 [R=301,L]
> > >
> > > SSLEngine on
> > >
> > >
> > > ServerName sfta.x.x.x
> > >
> > > DocumentRoot "/var/webapps/"
> > >
> > > ErrorLog logs/error_sft_log
> > > CustomLog logs/access_sft_log combined
> > > ErrorDocument 404 /sft/error404.html
> > > ErrorDocument 503 /sft/error503.html
> > >
> > > SSLProtocol ALL -SSLv2
> > > SSLCipherSuite HIGH:MEDIUM
> > >
> > >
> > > SSLCertificateFile /etc/httpd/conf/ssl.crt/SFTA.crt
> > >
> > > SSLCertificateKeyFile /etc/httpd/conf/ssl.crt/SFTA.key
> > >
> > > <Files ~ "\.(cgi|shtml|phtml|php3?)$">
> > >    SSLOptions +StdEnvVars +ExportCertData
> > >    SSLRequire %{SSL_CIPHER_USEKEYSIZE} >= 128
> > > </Files>
> > > <Directory "/var/www/cgi-bin">
> > >    SSLOptions +StdEnvVars +ExportCertData
> > >    SSLRequire %{SSL_CIPHER_USEKEYSIZE} >= 128
> > > </Directory>
> > >
> > > #   SSL Protocol Adjustments:
> > > #   The safe and default but still SSL/TLS standard compliant shutdown
> > > #   approach is that mod_ssl sends the close notify alert but doesn't
> wait
> > > for
> > > #   the close notify alert from client. When you need a different
> shutdown
> > > #   approach you can use one of the following variables:
> > > #   o ssl-unclean-shutdown:
> > > #     This forces an unclean shutdown when the connection is closed,
> i.e.
> > > no
> > > #     SSL close notify alert is send or allowed to received.  This
> violates
> > > #     the SSL/TLS standard but is needed for some brain-dead browsers.
> Use
> > > #     this when you receive I/O errors because of the standard approach
> > > where
> > > #     mod_ssl sends the close notify alert.
> > > #   o ssl-accurate-shutdown:
> > > #     This forces an accurate shutdown when the connection is closed,
> i.e.
> > > a
> > > #     SSL close notify alert is send and mod_ssl waits for the close
> notify
> > > #     alert of the client. This is 100% SSL/TLS standard compliant,
> but in
> > > #     practice often causes hanging connections with brain-dead
> browsers.
> > > Use
> > > #     this only for browsers where you know that their SSL
> implementation
> > > #     works correctly.
> > > #   Notice: Most problems of broken clients are also related to the
> HTTP
> > > #   keep-alive facility, so you usually additionally want to disable
> > > #   keep-alive for those clients, too. Use variable "nokeepalive" for
> this.
> > > #   Similarly, one has to force some clients to use HTTP/1.0 to
> workaround
> > > #   their broken HTTP/1.1 implementation. Use variables
> "downgrade-1.0" and
> > > #   "force-response-1.0" for this.
> > > SetEnvIf User-Agent ".*MSIE.*" \
> > >         nokeepalive ssl-unclean-shutdown \
> > >         downgrade-1.0 force-response-1.0
> > >
> > > #   Per-Server Logging:
> > > #   The home of a custom SSL log file. Use this when you want a
> > > #   compact non-error SSL logfile on a virtual host basis.
> > > CustomLog logs/ssl_request_nww.sft.nhs.uk_log \
> > >          "%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \"%r\" %b"
> > >
> > > </VirtualHost>
> > >
> > >
> > > #Disable Apache supporting HTTP TRACE
> > > RewriteEngine On
> > > RewriteCond %{REQUEST_METHOD} ^TRACE [OR]
> > > RewriteCond %{REQUEST_METHOD} ^TRACK
> > > RewriteRule .* - [F]
> > >
> > > # Remove multiple slashes anywhere in URL
> > > RewriteCond %{REQUEST_URI} ^(.*)//(.*)$
> > > RewriteRule . %1/%2 [R=301,L]
> > >
> > > #The TraceEnable command isn't available on this version of apache
> > > #TraceEnable Off
> > >
> > >
> > >
> > > Mod_jk.conf
> > >
> > > JkWorkersFile /etc/httpd/conf/workers.properties
> > > JkLogFile     /var/log/httpd/mod_jk.log
> > > JkLogLevel error
> > >
> > >
> > > JkExtractSSL On
> > >
> > > JkHTTPSIndicator HTTPS
> > >
> > > JkSESSIONIndicator SSL_SESSION_ID
> > >
> > > JkCIPHERIndicator SSL_CIPHER
> > >
> > > Alias /sft "/var/webapps/sft"
> > > <Directory "/var/webapps/sft">
> > >    Options Indexes FollowSymLinks
> > > </Directory>
> > >
> > >
> > > JkMount /sft/* loadbalancer
> > >
> > >
> > > JkUnMount /*.html loadbalancer
> > >
> > >
> > > <Location "/sft/WEB-INF/">
> > >    AllowOverride None
> > >    deny from all
> > > </Location>
> > >
> > > My workers.properties file:
> > >
> > >
> > >
> > > workers.apache_log=/var/log/httpd/
> > >
> > >
> > > workers.tomcat_home=/var/tomcat
> > >
> > > workers.java_home=/usr/java/latest
> > >
> > >
> > > ps=/
> > >
> > >
> > > worker.list=softcat1, loadbalancer
> > >
> > > worker.softcat1.port=8009
> > > worker.softcat1.host=localhost
> > > worker.softcat1.type=ajp13
> > > worker.softcat1.lbfactor=100
> > >
> > >
> > > worker.loadbalancer.type=lb
> > > worker.loadbalancer.balanced_workers=softcat1
> > >
> > > If anyone has any ideas about what is wrong in the config I would be
> very
> > > grateful as I have spent hours trying to get this to work to no avail.
> > >
> > > Thanks
> > >
> > >
> > >
> > >
> > >
> > >
> > >
> > >
> > >
>

--14dae934039f563b7004be585e5d--

From users-return-233720-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 23 13:19:09 2012
Return-Path: <users-return-233720-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6C4099684
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 23 Apr 2012 13:19:09 +0000 (UTC)
Received: (qmail 79738 invoked by uid 500); 23 Apr 2012 13:19:05 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 79627 invoked by uid 500); 23 Apr 2012 13:19:05 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 79602 invoked by uid 99); 23 Apr 2012 13:19:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 13:19:04 +0000
X-ASF-Spam-Status: No, hits=3.2 required=5.0
	tests=FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ironclawhand@hotmail.com designates 65.55.34.83 as permitted sender)
Received: from [65.55.34.83] (HELO col0-omc2-s9.col0.hotmail.com) (65.55.34.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 13:18:57 +0000
Received: from COL113-W54 ([65.55.34.72]) by col0-omc2-s9.col0.hotmail.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Mon, 23 Apr 2012 06:18:36 -0700
Message-ID: <COL113-W54359168808CAD3842C8A6CF210@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_99a942d0-5dfd-41e5-87ec-e3646d09c2df_"
X-Originating-IP: [194.176.105.144]
From: ironclaw hand <ironclawhand@hotmail.com>
To: <users@tomcat.apache.org>
Subject: RE: Mod_jk returning source code of jsp files
Date: Mon, 23 Apr 2012 14:18:35 +0100
Importance: Normal
In-Reply-To:
 <CAAKASGwaSYN2=Lsi1Wi9mj7m9+rjKvCJcqYSh-DPBJrcXnYP0A@mail.gmail.com>
References:
 <COL113-W248A31965DC681CB4DA9BACF210@phx.gbl>,<CAAKASGwj8CegxJh_3GHPtVo1ABCeHxzadEHaZ6Janag4z9EaBA@mail.gmail.com>,<COL113-W44B1E7156B779CB03139C0CF210@phx.gbl>,<CAAKASGwaSYN2=Lsi1Wi9mj7m9+rjKvCJcqYSh-DPBJrcXnYP0A@mail.gmail.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 23 Apr 2012 13:18:36.0134 (UTC) FILETIME=[96E71060:01CD2153]
X-Virus-Checked: Checked by ClamAV on apache.org

--_99a942d0-5dfd-41e5-87ec-e3646d09c2df_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable



So are you saying I should do away with the mod_jk.conf completely?

I have already tried putting everything into httpd.conf like you suggested:

NameVirtualHost sfta.npfit.nhs.uk:443
<VirtualHost sfta.npfit.nhs.uk:443>
     LoadModule jk_module modules/mod_jk.so =20
</Virtualhost>

<IfModule mod_jk.c>
        JkWorkersFile /etc/httpd/conf/workers.properties
    JkLogFile     /var/log/httpd/mod_jk.log
    JkLogLevel info
   =20
    Alias /sft "/var/webapps/sft"
    <Directory "/var/webapps/sft">
            Options Indexes FollowSymLinks
    </Directory>

    JkMount /sft/* loadbalancer

    JkUnMount /*.html loadbalancer
    <Location "/sft/WEB-INF/">
            AllowOverride None
            deny from all
    </Location>
</IfModule>

Whilst apache seemed to start up ok and there were no errors in my mod_jk.l=
og I still had exactly the same issue in that accessing a jsp would return =
the sourcecode.

Is the example above what you meant?

> Date: Mon=2C 23 Apr 2012 23:10:55 +1000
> Subject: RE: Mod_jk returning source code of jsp files
> From: icicimov@gmail.com
> To: users@tomcat.apache.org
>=20
> Well you need to have JkMount command inside the virtual host so its up t=
o
> you how to do it.
>  On Apr 23=2C 2012 10:53 PM=2C "ironclaw hand" <ironclawhand@hotmail.com>=
 wrote:
>=20
> >
> >
> > Ok I tried that but apache wont start now. It gives the following error=
:
> >
> > AH00526: Syntax error on line 1 of /etc/httpd/conf/mod_jk.conf:
> > JkWorkersFile cannot occur within <VirtualHost> section
> >                                                           [FAILED]
> >
> >
> > > Date: Mon=2C 23 Apr 2012 22:36:35 +1000
> > > Subject: Re: Mod_jk returning source code of jsp files
> > > From: icicimov@gmail.com
> > > To: users@tomcat.apache.org
> > >
> > > Put this line
> > >
> > > Include /etc/httpd/conf/mod_jk.conf
> > >
> > > inside virtual host.
> > >  On Apr 23=2C 2012 9:12 PM=2C "ironclaw hand" <ironclawhand@hotmail.c=
om>
> > wrote:
> > >
> > > >
> > > >
> > > > Hi=2C
> > > >
> > > > I am attempting to set up apache and tomcat together for the first
> > time on
> > > > a new machine using some existing configuration files. I am not sur=
e
> > what
> > > > is happening but it looks like apache is just serving up all files =
so
> > when
> > > > i acccess a jsp file I get the source as if tomcat never executed i=
t.
> > > >
> > > > I have installed the following versions of software:
> > > >
> > > > httpd 2.4.2
> > > > Tomcat connectors 1.2.35
> > > > Tomcat 7.0.27
> > > >
> > > > Below are the mod_jk config (workers.properties and mod_jk.conf) fi=
les
> > I
> > > > am currently trying to get working if there is anything else that i=
s
> > needed
> > > > then I can include this. My worker softcat1 is defined in my
> > server.xml for
> > > > tomcat.
> > > >
> > > > Tomcat works on its own if I access it directly and it does run the=
 jsp
> > > > files ok=2C it just seems to be when I try via apache.
> > > >
> > > > I have included my httpd.conf in case it is needed:
> > > >
> > > >
> > > > ServerTokens Prod
> > > >
> > > >
> > > > ServerRoot "/etc/httpd"
> > > >
> > > > PidFile run/httpd.pid
> > > >
> > > >
> > > > Timeout 120
> > > >
> > > >
> > > > KeepAlive Off
> > > >
> > > > MaxKeepAliveRequests 100
> > > >
> > > >
> > > > KeepAliveTimeout 15
> > > >
> > > >
> > > > <IfModule prefork.c>
> > > > StartServers       8
> > > > MinSpareServers    5
> > > > MaxSpareServers   20
> > > > ServerLimit      1024
> > > > #ServerLimit       50
> > > > MaxClients       1024
> > > > #MaxClients        50
> > > > MaxRequestsPerChild  4000
> > > > </IfModule>
> > > >
> > > >
> > > > <IfModule worker.c>
> > > > StartServers         2
> > > > MaxClients         150
> > > > MinSpareThreads     25
> > > > MaxSpareThreads     75
> > > > ThreadsPerChild     25
> > > > MaxRequestsPerChild  0
> > > > </IfModule>
> > > >
> > > >
> > > > LoadModule access_compat_module modules/mod_access_compat.so
> > > > LoadModule authz_core_module modules/mod_authz_core.so
> > > > LoadModule authz_host_module modules/mod_authz_host.so
> > > > LoadModule auth_basic_module modules/mod_auth_basic.so
> > > > LoadModule authn_file_module modules/mod_authn_file.so
> > > > LoadModule authn_anon_module modules/mod_authn_anon.so
> > > > LoadModule authn_dbm_module modules/mod_authn_dbm.so
> > > > LoadModule auth_digest_module modules/mod_auth_digest.so
> > > > LoadModule ldap_module modules/mod_ldap.so
> > > > LoadModule authnz_ldap_module modules/mod_authnz_ldap.so
> > > > LoadModule include_module modules/mod_include.so
> > > > LoadModule log_config_module modules/mod_log_config.so
> > > > LoadModule env_module modules/mod_env.so
> > > > LoadModule mime_magic_module modules/mod_mime_magic.so
> > > > LoadModule cern_meta_module modules/mod_cern_meta.so
> > > > LoadModule expires_module modules/mod_expires.so
> > > > LoadModule deflate_module modules/mod_deflate.so
> > > > LoadModule headers_module modules/mod_headers.so
> > > > LoadModule usertrack_module modules/mod_usertrack.so
> > > > LoadModule setenvif_module modules/mod_setenvif.so
> > > > LoadModule mime_module modules/mod_mime.so
> > > > LoadModule dav_module modules/mod_dav.so
> > > > LoadModule status_module modules/mod_status.so
> > > > LoadModule autoindex_module modules/mod_autoindex.so
> > > > LoadModule asis_module modules/mod_asis.so
> > > > LoadModule info_module modules/mod_info.so
> > > > LoadModule dav_fs_module modules/mod_dav_fs.so
> > > > LoadModule vhost_alias_module modules/mod_vhost_alias.so
> > > > LoadModule negotiation_module modules/mod_negotiation.so
> > > > LoadModule dir_module modules/mod_dir.so
> > > > LoadModule imagemap_module modules/mod_imagemap.so
> > > > LoadModule actions_module modules/mod_actions.so
> > > > LoadModule speling_module modules/mod_speling.so
> > > > LoadModule userdir_module modules/mod_userdir.so
> > > > LoadModule alias_module modules/mod_alias.so
> > > > LoadModule rewrite_module modules/mod_rewrite.so
> > > > LoadModule proxy_module modules/mod_proxy.so
> > > > LoadModule proxy_ftp_module modules/mod_proxy_ftp.so
> > > > LoadModule proxy_http_module modules/mod_proxy_http.so
> > > > LoadModule proxy_connect_module modules/mod_proxy_connect.so
> > > > LoadModule cache_module modules/mod_cache.so
> > > > LoadModule suexec_module modules/mod_suexec.so
> > > > #LoadModule disk_cache_module modules/mod_disk_cache.so
> > > > LoadModule file_cache_module modules/mod_file_cache.so
> > > > #LoadModule mem_cache_module modules/mod_mem_cache.so
> > > > LoadModule cgi_module modules/mod_cgi.so
> > > > LoadModule version_module modules/mod_version.so
> > > > LoadModule socache_shmcb_module modules/mod_socache_shmcb.so
> > > > LoadModule unixd_module modules/mod_unixd.so
> > > >
> > > >
> > > > Include conf.d/*.conf
> > > >
> > > > User apache
> > > > Group apache
> > > >
> > > >
> > > > ServerAdmin root@localhost
> > > >
> > > >
> > > > UseCanonicalName Off
> > > >
> > > > DocumentRoot "/var/webapps"
> > > >
> > > >
> > > > <Directory />
> > > >    Options FollowSymLinks
> > > >    AllowOverride None
> > > > </Directory>
> > > >
> > > >
> > > > <Directory "/var/webapps">
> > > >
> > > >
> > > >    Options Indexes FollowSymLinks
> > > >
> > > >    AllowOverride None
> > > >
> > > >    Order allow=2Cdeny
> > > >    Allow from all
> > > >
> > > > </Directory>
> > > >
> > > >
> > > > <IfModule mod_userdir.c>
> > > >
> > > >    UserDir disable
> > > >
> > > >
> > > >
> > > > </IfModule>
> > > >
> > > >
> > > > DirectoryIndex index.html index.html.var
> > > >
> > > >
> > > > AccessFileName .htaccess
> > > >
> > > > <Files ~ "^\.ht">
> > > >    Order allow=2Cdeny
> > > >    Deny from all
> > > > </Files>
> > > >
> > > >
> > > > TypesConfig /etc/mime.types
> > > >
> > > > DefaultType text/plain
> > > >
> > > >
> > > > <IfModule mod_mime_magic.c>
> > > > #   MIMEMagicFile /usr/share/magic.mime
> > > >    MIMEMagicFile conf/magic
> > > > </IfModule>
> > > >
> > > >
> > > > HostnameLookups Off
> > > >
> > > >
> > > > ErrorLog logs/error_log
> > > >
> > > >
> > > > LogLevel warn
> > > >
> > > >
> > > > LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\"
> > \"%{User-Agent}i\""
> > > > combined
> > > > LogFormat "%h %l %u %t \"%r\" %>s %b" common
> > > > LogFormat "%{Referer}i -> %U" referer
> > > > LogFormat "%{User-agent}i" agent
> > > >
> > > >
> > > > CustomLog logs/access_log combined
> > > >
> > > >
> > > > ServerSignature Off
> > > >
> > > >
> > > > Alias /icons/ "/var/www/icons/"
> > > >
> > > > <Directory "/var/www/icons">
> > > >    Options Indexes MultiViews
> > > >    AllowOverride None
> > > >    Order allow=2Cdeny
> > > >    Allow from all
> > > > </Directory>
> > > >
> > > >
> > > > <IfModule mod_dav_fs.c>
> > > >    # Location of the WebDAV lock database.
> > > >    DAVLockDB /var/lib/dav/lockdb
> > > > </IfModule>
> > > >
> > > >
> > > > ScriptAlias /cgi-bin/ "/var/www/cgi-bin/"
> > > >
> > > >
> > > > <Directory "/var/www/cgi-bin">
> > > >    AllowOverride None
> > > >    Options None
> > > >    Order allow=2Cdeny
> > > >    Allow from all
> > > > </Directory>
> > > >
> > > >
> > > > IndexOptions FancyIndexing VersionSort NameWidth=3D*
> > > >
> > > >
> > > > AddIconByEncoding (CMP=2C/icons/compressed.gif) x-compress x-gzip
> > > >
> > > > AddIconByType (TXT=2C/icons/text.gif) text/*
> > > > AddIconByType (IMG=2C/icons/image2.gif) image/*
> > > > AddIconByType (SND=2C/icons/sound2.gif) audio/*
> > > > AddIconByType (VID=2C/icons/movie.gif) video/*
> > > >
> > > > AddIcon /icons/binary.gif .bin .exe
> > > > AddIcon /icons/binhex.gif .hqx
> > > > AddIcon /icons/tar.gif .tar
> > > > AddIcon /icons/world2.gif .wrl .wrl.gz .vrml .vrm .iv
> > > > AddIcon /icons/compressed.gif .Z .z .tgz .gz .zip
> > > > AddIcon /icons/a.gif .ps .ai .eps
> > > > AddIcon /icons/layout.gif .html .shtml .htm .pdf
> > > > AddIcon /icons/text.gif .txt
> > > > AddIcon /icons/c.gif .c
> > > > AddIcon /icons/p.gif .pl .py
> > > > AddIcon /icons/f.gif .for
> > > > AddIcon /icons/dvi.gif .dvi
> > > > AddIcon /icons/uuencoded.gif .uu
> > > > AddIcon /icons/script.gif .conf .sh .shar .csh .ksh .tcl
> > > > AddIcon /icons/tex.gif .tex
> > > > AddIcon /icons/bomb.gif core
> > > >
> > > > AddIcon /icons/back.gif ..
> > > > AddIcon /icons/hand.right.gif README
> > > > AddIcon /icons/folder.gif ^^DIRECTORY^^
> > > > AddIcon /icons/blank.gif ^^BLANKICON^^
> > > >
> > > >
> > > > DefaultIcon /icons/unknown.gif
> > > >
> > > >
> > > > ReadmeName README.html
> > > > HeaderName HEADER.html
> > > >
> > > >
> > > > IndexIgnore .??* *~ *# HEADER* README* RCS CVS *=2Cv *=2Ct
> > > >
> > > >
> > > > AddLanguage ca .ca
> > > > AddLanguage cs .cz .cs
> > > > AddLanguage da .dk
> > > > AddLanguage de .de
> > > > AddLanguage el .el
> > > > AddLanguage en .en
> > > > AddLanguage eo .eo
> > > > AddLanguage es .es
> > > > AddLanguage et .et
> > > > AddLanguage fr .fr
> > > > AddLanguage he .he
> > > > AddLanguage hr .hr
> > > > AddLanguage it .it
> > > > AddLanguage ja .ja
> > > > AddLanguage ko .ko
> > > > AddLanguage ltz .ltz
> > > > AddLanguage nl .nl
> > > > AddLanguage nn .nn
> > > > AddLanguage no .no
> > > > AddLanguage pl .po
> > > > AddLanguage pt .pt
> > > > AddLanguage pt-BR .pt-br
> > > > AddLanguage ru .ru
> > > > AddLanguage sv .sv
> > > > AddLanguage zh-CN .zh-cn
> > > > AddLanguage zh-TW .zh-tw
> > > >
> > > >
> > > > LanguagePriority en ca cs da de el eo es et fr he hr it ja ko ltz n=
l
> > nn no
> > > > pl pt pt-BR ru sv zh-CN zh-TW
> > > >
> > > >
> > > > ForceLanguagePriority Prefer Fallback
> > > >
> > > >
> > > > AddDefaultCharset UTF-8
> > > >
> > > >
> > > > AddCharset ISO-8859-1  .iso8859-1  .latin1
> > > > AddCharset ISO-8859-2  .iso8859-2  .latin2 .cen
> > > > AddCharset ISO-8859-3  .iso8859-3  .latin3
> > > > AddCharset ISO-8859-4  .iso8859-4  .latin4
> > > > AddCharset ISO-8859-5  .iso8859-5  .latin5 .cyr .iso-ru
> > > > AddCharset ISO-8859-6  .iso8859-6  .latin6 .arb
> > > > AddCharset ISO-8859-7  .iso8859-7  .latin7 .grk
> > > > AddCharset ISO-8859-8  .iso8859-8  .latin8 .heb
> > > > AddCharset ISO-8859-9  .iso8859-9  .latin9 .trk
> > > > AddCharset ISO-2022-JP .iso2022-jp .jis
> > > > AddCharset ISO-2022-KR .iso2022-kr .kis
> > > > AddCharset ISO-2022-CN .iso2022-cn .cis
> > > > AddCharset Big5        .Big5       .big5
> > > > # For russian=2C more than one charset is used (depends on client=
=2C
> > mostly):
> > > > AddCharset WINDOWS-1251 .cp-1251   .win-1251
> > > > AddCharset CP866       .cp866
> > > > AddCharset KOI8-r      .koi8-r .koi8-ru
> > > > AddCharset KOI8-ru     .koi8-uk .ua
> > > > AddCharset ISO-10646-UCS-2 .ucs2
> > > > AddCharset ISO-10646-UCS-4 .ucs4
> > > > AddCharset UTF-8       .utf8
> > > >
> > > >
> > > > AddCharset GB2312      .gb2312 .gb
> > > > AddCharset utf-7       .utf7
> > > > AddCharset utf-8       .utf8
> > > > AddCharset big5        .big5 .b5
> > > > AddCharset EUC-TW      .euc-tw
> > > > AddCharset EUC-JP      .euc-jp
> > > > AddCharset EUC-KR      .euc-kr
> > > > AddCharset shift_jis   .sjis
> > > >
> > > >
> > > > AddType application/x-compress .Z
> > > > AddType application/x-gzip .gz .tgz
> > > >
> > > >
> > > > AddHandler imap-file map
> > > >
> > > >
> > > > AddHandler type-map var
> > > >
> > > >
> > > > AddType text/html .shtml
> > > > AddOutputFilter INCLUDES .shtml
> > > >
> > > >
> > > >
> > > > Alias /error/ "/var/www/error/"
> > > >
> > > > <IfModule mod_negotiation.c>
> > > > <IfModule mod_include.c>
> > > >    <Directory "/var/www/error">
> > > >        AllowOverride None
> > > >        Options IncludesNoExec
> > > >        AddOutputFilter Includes html
> > > >        AddHandler type-map var
> > > >        Order allow=2Cdeny
> > > >        Allow from all
> > > >        LanguagePriority en es de fr
> > > >        ForceLanguagePriority Prefer Fallback
> > > >    </Directory>
> > > >
> > > >
> > > > </IfModule>
> > > > </IfModule>
> > > >
> > > >
> > > > BrowserMatch "Mozilla/2" nokeepalive
> > > > BrowserMatch "MSIE 4\.0b2=3B" nokeepalive downgrade-1.0
> > force-response-1.0
> > > > BrowserMatch "RealPlayer 4\.0" force-response-1.0
> > > > BrowserMatch "Java/1\.0" force-response-1.0
> > > > BrowserMatch "JDK/1\.0" force-response-1.0
> > > >
> > > >
> > > > BrowserMatch "Microsoft Data Access Internet Publishing Provider"
> > > > redirect-carefully
> > > > BrowserMatch "^WebDrive" redirect-carefully
> > > > BrowserMatch "^WebDAVFS/1.[012]" redirect-carefully
> > > > BrowserMatch "^gnome-vfs" redirect-carefully
> > > >
> > > >
> > > >
> > > > LoadModule jk_module modules/mod_jk.so
> > > > Include /etc/httpd/conf/mod_jk.conf
> > > >
> > > >
> > > > NameVirtualHost sfta.npfit.nhs.uk:443
> > > >
> > > > <VirtualHost 192.168.25.178:443>
> > > >
> > > > RewriteEngine On
> > > > RewriteCond %{REQUEST_METHOD} ^TRACE [OR]
> > > > RewriteCond %{REQUEST_METHOD} ^TRACK
> > > > RewriteRule .* - [F]
> > > >
> > > >
> > > > RewriteCond %{REQUEST_URI} ^(.*)//(.*)$
> > > > RewriteRule . %1/%2 [R=3D301=2CL]
> > > >
> > > > SSLEngine on
> > > >
> > > >
> > > > ServerName sfta.x.x.x
> > > >
> > > > DocumentRoot "/var/webapps/"
> > > >
> > > > ErrorLog logs/error_sft_log
> > > > CustomLog logs/access_sft_log combined
> > > > ErrorDocument 404 /sft/error404.html
> > > > ErrorDocument 503 /sft/error503.html
> > > >
> > > > SSLProtocol ALL -SSLv2
> > > > SSLCipherSuite HIGH:MEDIUM
> > > >
> > > >
> > > > SSLCertificateFile /etc/httpd/conf/ssl.crt/SFTA.crt
> > > >
> > > > SSLCertificateKeyFile /etc/httpd/conf/ssl.crt/SFTA.key
> > > >
> > > > <Files ~ "\.(cgi|shtml|phtml|php3?)$">
> > > >    SSLOptions +StdEnvVars +ExportCertData
> > > >    SSLRequire %{SSL_CIPHER_USEKEYSIZE} >=3D 128
> > > > </Files>
> > > > <Directory "/var/www/cgi-bin">
> > > >    SSLOptions +StdEnvVars +ExportCertData
> > > >    SSLRequire %{SSL_CIPHER_USEKEYSIZE} >=3D 128
> > > > </Directory>
> > > >
> > > > #   SSL Protocol Adjustments:
> > > > #   The safe and default but still SSL/TLS standard compliant shutd=
own
> > > > #   approach is that mod_ssl sends the close notify alert but doesn=
't
> > wait
> > > > for
> > > > #   the close notify alert from client. When you need a different
> > shutdown
> > > > #   approach you can use one of the following variables:
> > > > #   o ssl-unclean-shutdown:
> > > > #     This forces an unclean shutdown when the connection is closed=
=2C
> > i.e.
> > > > no
> > > > #     SSL close notify alert is send or allowed to received.  This
> > violates
> > > > #     the SSL/TLS standard but is needed for some brain-dead browse=
rs.
> > Use
> > > > #     this when you receive I/O errors because of the standard appr=
oach
> > > > where
> > > > #     mod_ssl sends the close notify alert.
> > > > #   o ssl-accurate-shutdown:
> > > > #     This forces an accurate shutdown when the connection is close=
d=2C
> > i.e.
> > > > a
> > > > #     SSL close notify alert is send and mod_ssl waits for the clos=
e
> > notify
> > > > #     alert of the client. This is 100% SSL/TLS standard compliant=
=2C
> > but in
> > > > #     practice often causes hanging connections with brain-dead
> > browsers.
> > > > Use
> > > > #     this only for browsers where you know that their SSL
> > implementation
> > > > #     works correctly.
> > > > #   Notice: Most problems of broken clients are also related to the
> > HTTP
> > > > #   keep-alive facility=2C so you usually additionally want to disa=
ble
> > > > #   keep-alive for those clients=2C too. Use variable "nokeepalive"=
 for
> > this.
> > > > #   Similarly=2C one has to force some clients to use HTTP/1.0 to
> > workaround
> > > > #   their broken HTTP/1.1 implementation. Use variables
> > "downgrade-1.0" and
> > > > #   "force-response-1.0" for this.
> > > > SetEnvIf User-Agent ".*MSIE.*" \
> > > >         nokeepalive ssl-unclean-shutdown \
> > > >         downgrade-1.0 force-response-1.0
> > > >
> > > > #   Per-Server Logging:
> > > > #   The home of a custom SSL log file. Use this when you want a
> > > > #   compact non-error SSL logfile on a virtual host basis.
> > > > CustomLog logs/ssl_request_nww.sft.nhs.uk_log \
> > > >          "%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \"%r\" %b"
> > > >
> > > > </VirtualHost>
> > > >
> > > >
> > > > #Disable Apache supporting HTTP TRACE
> > > > RewriteEngine On
> > > > RewriteCond %{REQUEST_METHOD} ^TRACE [OR]
> > > > RewriteCond %{REQUEST_METHOD} ^TRACK
> > > > RewriteRule .* - [F]
> > > >
> > > > # Remove multiple slashes anywhere in URL
> > > > RewriteCond %{REQUEST_URI} ^(.*)//(.*)$
> > > > RewriteRule . %1/%2 [R=3D301=2CL]
> > > >
> > > > #The TraceEnable command isn't available on this version of apache
> > > > #TraceEnable Off
> > > >
> > > >
> > > >
> > > > Mod_jk.conf
> > > >
> > > > JkWorkersFile /etc/httpd/conf/workers.properties
> > > > JkLogFile     /var/log/httpd/mod_jk.log
> > > > JkLogLevel error
> > > >
> > > >
> > > > JkExtractSSL On
> > > >
> > > > JkHTTPSIndicator HTTPS
> > > >
> > > > JkSESSIONIndicator SSL_SESSION_ID
> > > >
> > > > JkCIPHERIndicator SSL_CIPHER
> > > >
> > > > Alias /sft "/var/webapps/sft"
> > > > <Directory "/var/webapps/sft">
> > > >    Options Indexes FollowSymLinks
> > > > </Directory>
> > > >
> > > >
> > > > JkMount /sft/* loadbalancer
> > > >
> > > >
> > > > JkUnMount /*.html loadbalancer
> > > >
> > > >
> > > > <Location "/sft/WEB-INF/">
> > > >    AllowOverride None
> > > >    deny from all
> > > > </Location>
> > > >
> > > > My workers.properties file:
> > > >
> > > >
> > > >
> > > > workers.apache_log=3D/var/log/httpd/
> > > >
> > > >
> > > > workers.tomcat_home=3D/var/tomcat
> > > >
> > > > workers.java_home=3D/usr/java/latest
> > > >
> > > >
> > > > ps=3D/
> > > >
> > > >
> > > > worker.list=3Dsoftcat1=2C loadbalancer
> > > >
> > > > worker.softcat1.port=3D8009
> > > > worker.softcat1.host=3Dlocalhost
> > > > worker.softcat1.type=3Dajp13
> > > > worker.softcat1.lbfactor=3D100
> > > >
> > > >
> > > > worker.loadbalancer.type=3Dlb
> > > > worker.loadbalancer.balanced_workers=3Dsoftcat1
> > > >
> > > > If anyone has any ideas about what is wrong in the config I would b=
e
> > very
> > > > grateful as I have spent hours trying to get this to work to no ava=
il.
> > > >
> > > > Thanks
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> >
 		 	   		  =

--_99a942d0-5dfd-41e5-87ec-e3646d09c2df_--

From users-return-233721-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 23 14:05:00 2012
Return-Path: <users-return-233721-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1A3CF9281
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 23 Apr 2012 14:05:00 +0000 (UTC)
Received: (qmail 15806 invoked by uid 500); 23 Apr 2012 14:04:56 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 15516 invoked by uid 500); 23 Apr 2012 14:04:55 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 15224 invoked by uid 99); 23 Apr 2012 14:04:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 14:04:54 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [76.96.62.64] (HELO qmta07.westchester.pa.mail.comcast.net) (76.96.62.64)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 14:04:46 +0000
Received: from omta19.westchester.pa.mail.comcast.net ([76.96.62.98])
	by qmta07.westchester.pa.mail.comcast.net with comcast
	id 1Pxh1j00527AodY57S4QKq; Mon, 23 Apr 2012 14:04:24 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta19.westchester.pa.mail.comcast.net with comcast
	id 1S421j00Z38FjT13fS433N; Mon, 23 Apr 2012 14:04:03 +0000
Message-ID: <4F956150.6050705@christopherschultz.net>
Date: Mon, 23 Apr 2012 10:04:00 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Mod_jk returning source code of jsp files
References: <COL113-W248A31965DC681CB4DA9BACF210@phx.gbl>,<CAAKASGwj8CegxJh_3GHPtVo1ABCeHxzadEHaZ6Janag4z9EaBA@mail.gmail.com>,<COL113-W44B1E7156B779CB03139C0CF210@phx.gbl>,<CAAKASGwaSYN2=Lsi1Wi9mj7m9+rjKvCJcqYSh-DPBJrcXnYP0A@mail.gmail.com> <COL113-W54359168808CAD3842C8A6CF210@phx.gbl>
In-Reply-To: <COL113-W54359168808CAD3842C8A6CF210@phx.gbl>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Ironclaw,

On 4/23/12 9:18 AM, ironclaw hand wrote:
> So are you saying I should do away with the mod_jk.conf
> completely?

That depends upon what is in mod_jk.conf. Your mod_jk.conf looks like
a mix between global mod_jk directives (e.g. JkWorkersFile) and
VirtualHost-specific directives (e.g. <Location> and JkMounts).

I would recommend putting all your global configuration into
mod_jk.conf and then putting your VirtualHost-specific configuration
into the appropriate VirtualHost (possibly the default one).

It looks like you have an old example of how to set up mod_jk. The
following properties are no longer useful in workers.properties:

workers.apache_log=/var/log/httpd/
workers.tomcat_home=/var/tomcat
workers.java_home=/usr/java/latest
ps=/

Finally, if you are going to do this:

Alias /sft "/var/webapps/sft"
<Directory "/var/webapps/sft">
    Options Indexes FollowSymLinks
</Directory>

You'll have to protect more than just this:

<Location "/sft/WEB-INF/">
    AllowOverride None
    deny from all
</Location>

If you have anything sensitive in sft/META-INF (like a context.xml
containing your LDAP or database credentials for instance).

Also, since the content lives on the filesystem, you might be better
off using a <Directory> directive instead (or in addition to)
<Location>. Be very careful if you decide to use an Alias to your
appBase: it's usually discouraged on a security basis.

> JkMount /sft/* loadbalancer
> 
> JkUnMount /*.html loadbalancer

JkMounts need to be *inside* a VirtualHost: otherwise, they have no
effect.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+VYVAACgkQ9CaO5/Lv0PCkVgCgqw11nIU5ZnJ1DZ165WQQ1ZEN
UTAAn2CKlcjIiOO+oFkQFGHeJFpfVHQt
=w8JP
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233722-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 23 14:05:55 2012
Return-Path: <users-return-233722-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AED3D92E5
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 23 Apr 2012 14:05:55 +0000 (UTC)
Received: (qmail 20138 invoked by uid 500); 23 Apr 2012 14:05:52 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 19900 invoked by uid 500); 23 Apr 2012 14:05:52 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 19883 invoked by uid 99); 23 Apr 2012 14:05:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 14:05:52 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [76.96.59.212] (HELO qmta14.westchester.pa.mail.comcast.net) (76.96.59.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 14:05:45 +0000
Received: from omta20.westchester.pa.mail.comcast.net ([76.96.62.71])
	by qmta14.westchester.pa.mail.comcast.net with comcast
	id 1P2G1j0081YDfWL5ES5Rzv; Mon, 23 Apr 2012 14:05:25 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta20.westchester.pa.mail.comcast.net with comcast
	id 1S5Q1j00y38FjT13gS5Qbv; Mon, 23 Apr 2012 14:05:24 +0000
Message-ID: <4F9561A3.5070000@christopherschultz.net>
Date: Mon, 23 Apr 2012 10:05:23 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Tomcat 6.0.35 filters not invoked for error-pages
References: <FB8C0152D957401CA6FF8702C3FE8918@LudwigVAIO>
In-Reply-To: <FB8C0152D957401CA6FF8702C3FE8918@LudwigVAIO>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Ludwig,

On 4/22/12 2:26 PM, Ludwig Magnusson wrote:
> Hello. I found some strange behavour in tomcat 6.0.35 when
> declaring error-pages in my web.xml. When tomcat picks up an error
> and redirects it to the location given by the <location> element in
> <error-page>, the filters that would have been invoked for that
> location are actually not invoked.
> 
> I found an almost identical report in the bug database:
> https://issues.apache.org/bugzilla/show_bug.cgi?id=49098 (the user
> had the same problem when using query strings in <location>). 
> However, I do not use query strings in my locations and I still get
> the error.
> 
> Is this a bug and is it known?

What does your web.xml look like?

The error page is probably treated as a FORWARD, and you'll have to
configure your filters to fire on FORWARD as well as REQUEST (the
default).

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+VYaMACgkQ9CaO5/Lv0PD4cwCff6+JoDHqehqsEtTMU471Np1+
MicAoKYezgJgAQ+0EWP71UkDFRb41nBf
=/UDF
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233723-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 23 14:07:14 2012
Return-Path: <users-return-233723-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E0B3495D0
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 23 Apr 2012 14:07:14 +0000 (UTC)
Received: (qmail 26170 invoked by uid 500); 23 Apr 2012 14:07:11 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 26111 invoked by uid 500); 23 Apr 2012 14:07:11 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 26102 invoked by uid 99); 23 Apr 2012 14:07:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 14:07:11 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [76.96.62.16] (HELO qmta01.westchester.pa.mail.comcast.net) (76.96.62.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 14:07:03 +0000
Received: from omta03.westchester.pa.mail.comcast.net ([76.96.62.27])
	by qmta01.westchester.pa.mail.comcast.net with comcast
	id 1Rz11j0080bG4ec51S6k55; Mon, 23 Apr 2012 14:06:44 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta03.westchester.pa.mail.comcast.net with comcast
	id 1S6g1j00E38FjT13PS6gV1; Mon, 23 Apr 2012 14:06:40 +0000
Message-ID: <4F9561F2.3050702@christopherschultz.net>
Date: Mon, 23 Apr 2012 10:06:42 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: parallel deployment activation of new version
References: <15D3435601304A49A5E13D0825711B6128CC5706@EXCHANGE07.webde.local>  <c9852e00-8f22-4a9a-99b7-7543ab14d743@email.android.com>  <15D3435601304A49A5E13D0825711B6128CC570C@EXCHANGE07.webde.local>  <efd47547-82e2-4d89-b0e3-76747acb8a6c@email.android.com>  <15D3435601304A49A5E13D0825711B6128CC5740@EXCHANGE07.webde.local>  <4F903B82.6080508@christopherschultz.net> <1335110109.8682.4.camel@meierpad.localdomain>
In-Reply-To: <1335110109.8682.4.camel@meierpad.localdomain>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Christoph,

On 4/22/12 11:55 AM, Christoph Maser wrote:
> Chris,
> 
> Am Donnerstag, den 19.04.2012, 18:21 +0200 schrieb Christopher
> Schultz:
>> Christoph,
>> 
>> What about the webapp itself performing its own health-check as a
>> last step of deployment, and throwing an exception (thereby
>> preventing Tomcat from bringing it into service) if things aren't
>> in working order?
> 
> this is the obvious way to do it as it is now. As I said before
> that way one looses the access to the wapps status pages.

So you want the webapp both up (for status) and down (for traffic) at
the same time? Tomcat certainly can't manage that for you.

If you need "status" on a failed-deployment, why not dump it to a file
or something like that?

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+VYfIACgkQ9CaO5/Lv0PAkGgCfYpk2VWmy2sYRmVQXSQu/pLZS
SskAoJnS1aUGHBMZZk+mZY82Zie9aG2x
=Czs4
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233724-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 23 14:12:26 2012
Return-Path: <users-return-233724-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D27B49824
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 23 Apr 2012 14:12:26 +0000 (UTC)
Received: (qmail 43643 invoked by uid 500); 23 Apr 2012 14:12:23 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 43585 invoked by uid 500); 23 Apr 2012 14:12:23 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 43563 invoked by uid 99); 23 Apr 2012 14:12:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 14:12:22 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [76.96.62.40] (HELO qmta04.westchester.pa.mail.comcast.net) (76.96.62.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 14:12:15 +0000
Received: from omta22.westchester.pa.mail.comcast.net ([76.96.62.73])
	by qmta04.westchester.pa.mail.comcast.net with comcast
	id 1S4W1j0051ap0As54SBvsR; Mon, 23 Apr 2012 14:11:55 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta22.westchester.pa.mail.comcast.net with comcast
	id 1SBv1j00e38FjT13iSBvS4; Mon, 23 Apr 2012 14:11:56 +0000
Message-ID: <4F956329.4060003@christopherschultz.net>
Date: Mon, 23 Apr 2012 10:11:53 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: 64bit windows mod_jk connector download for apache httpd 2.4
References: <CAG6aRdX7aA9J8RZ1OAhyUQCayi2D2E=_9FJryTH4Z1v7dDSosw@mail.gmail.com> <4F8F1EEB.2070000@apache.org> <CAG6aRdXuMWqvXLTv=M=-YNQzxX8LQLiTYyoYtUoUCQF32Ln-yQ@mail.gmail.com> <4F903E4B.3090603@christopherschultz.net> <4F92DA1E.7080000@apache.org>
In-Reply-To: <4F92DA1E.7080000@apache.org>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Mladen,

On 4/21/12 12:02 PM, Mladen Turk wrote:
> On 04/19/2012 06:33 PM, Christopher Schultz wrote:
>> 
>> I think it's reasonable for us to add x86-64 builds for
>> mod_jk+httpd.
> 
> The problem is that there are no more 'official' httpd binaries.

Aah, I didn't realize that ASF doesn't have official httpd x86-64
binaries.

> Probably because the current maintainer just get bored, so the 
> suggested use is to use apachelaunge's binaries.
> 
> At the end we could try to convince those guys to produce mod_jk
> binaries as well.

Yeah, it would seem reasonable to suggest that to them. Maybe OP can
make such a request, since he's the one who wants the package?

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+VYykACgkQ9CaO5/Lv0PAAegCeOTgNter6/C+fiLsRQ/9fgLEY
bvcAn18GHR+JNEf3ZxLV4D2k2BFD1pF3
=Xchq
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233725-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 23 14:20:10 2012
Return-Path: <users-return-233725-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D0D739B7B
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 23 Apr 2012 14:20:10 +0000 (UTC)
Received: (qmail 68948 invoked by uid 500); 23 Apr 2012 14:20:07 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 68888 invoked by uid 500); 23 Apr 2012 14:20:07 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 68877 invoked by uid 99); 23 Apr 2012 14:20:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 14:20:07 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ironclawhand@hotmail.com designates 65.55.34.79 as permitted sender)
Received: from [65.55.34.79] (HELO col0-omc2-s5.col0.hotmail.com) (65.55.34.79)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 14:20:01 +0000
Received: from COL113-W12 ([65.55.34.73]) by col0-omc2-s5.col0.hotmail.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Mon, 23 Apr 2012 07:19:40 -0700
Message-ID: <COL113-W1267B3596B51C8C14E51F2CF210@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_7161d0b2-5c21-4f01-8392-de9e9533133a_"
X-Originating-IP: [194.176.105.144]
From: ironclaw hand <ironclawhand@hotmail.com>
To: <users@tomcat.apache.org>
Subject: RE: Mod_jk returning source code of jsp files
Date: Mon, 23 Apr 2012 15:19:40 +0100
Importance: Normal
In-Reply-To: <4F956150.6050705@christopherschultz.net>
References:
 <COL113-W248A31965DC681CB4DA9BACF210@phx.gbl>,<CAAKASGwj8CegxJh_3GHPtVo1ABCeHxzadEHaZ6Janag4z9EaBA@mail.gmail.com>,<COL113-W44B1E7156B779CB03139C0CF210@phx.gbl>,<CAAKASGwaSYN2=Lsi1Wi9mj7m9+rjKvCJcqYSh-DPBJrcXnYP0A@mail.gmail.com>
 <COL113-W54359168808CAD3842C8A6CF210@phx.gbl>,<4F956150.6050705@christopherschultz.net>
MIME-Version: 1.0
X-OriginalArrivalTime: 23 Apr 2012 14:19:40.0708 (UTC) FILETIME=[1F28AE40:01CD215C]
X-Virus-Checked: Checked by ClamAV on apache.org

--_7161d0b2-5c21-4f01-8392-de9e9533133a_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Thanks Christopher I will address the security issues if I am actually able=
 to get mod_jk to execute a jsp!

I have now removed everything from mod_jk.conf except for the global direct=
ives and I now have my httpd.conf looking like:

#
# JK for connections to Tomcat
#
LoadModule jk_module modules/mod_jk.so
Include /etc/httpd/conf/mod_jk.conf

<IfModule jk_module>
JkWorkersFile /etc/httpd/conf/workers.properties
JkLogFile     /var/log/httpd/mod_jk.log
JkLogLevel info

Alias /sft "/var/webapps/sft"

<Directory "/var/webapps/sft">
 Options Indexes FollowSymLinks
</Directory>

<Location "/sft/WEB-INF/">
   AllowOverride None
   deny from all
</Location>
</IfModule>


##
## SSL Virtual Host Context
<VirtualHost sfta.a.b.c:443>   =20
JkMount /sft/* loadbalancer
JkUnMount /*.html loadbalancer
</VirtualHost>

I still get the jsp file returned as text so I obviously still have problem=
s and initially I would just like to get apache to invoke mod_jk and return=
 me the dynamic content. I have looked in the mod_jk.conf file and there ar=
e no errors so I assume the versions of software I have installed are compa=
tible? This is in my mod_jk.conf file:

[Mon Apr 23 15:11:51.006 2012] [9293:3078489792] [info] init_jk::mod_jk.c (=
3365): mod_jk/1.2.35 initialized


> Date: Mon=2C 23 Apr 2012 10:04:00 -0400
> From: chris@christopherschultz.net
> To: users@tomcat.apache.org
> Subject: Re: Mod_jk returning source code of jsp files
>=20
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>=20
> Ironclaw=2C
>=20
> On 4/23/12 9:18 AM=2C ironclaw hand wrote:
> > So are you saying I should do away with the mod_jk.conf
> > completely?
>=20
> That depends upon what is in mod_jk.conf. Your mod_jk.conf looks like
> a mix between global mod_jk directives (e.g. JkWorkersFile) and
> VirtualHost-specific directives (e.g. <Location> and JkMounts).
>=20
> I would recommend putting all your global configuration into
> mod_jk.conf and then putting your VirtualHost-specific configuration
> into the appropriate VirtualHost (possibly the default one).
>=20
> It looks like you have an old example of how to set up mod_jk. The
> following properties are no longer useful in workers.properties:
>=20
> workers.apache_log=3D/var/log/httpd/
> workers.tomcat_home=3D/var/tomcat
> workers.java_home=3D/usr/java/latest
> ps=3D/
>=20
> Finally=2C if you are going to do this:
>=20
> Alias /sft "/var/webapps/sft"
> <Directory "/var/webapps/sft">
>     Options Indexes FollowSymLinks
> </Directory>
>=20
> You'll have to protect more than just this:
>=20
> <Location "/sft/WEB-INF/">
>     AllowOverride None
>     deny from all
> </Location>
>=20
> If you have anything sensitive in sft/META-INF (like a context.xml
> containing your LDAP or database credentials for instance).
>=20
> Also=2C since the content lives on the filesystem=2C you might be better
> off using a <Directory> directive instead (or in addition to)
> <Location>. Be very careful if you decide to use an Alias to your
> appBase: it's usually discouraged on a security basis.
>=20
> > JkMount /sft/* loadbalancer
> >=20
> > JkUnMount /*.html loadbalancer
>=20
> JkMounts need to be *inside* a VirtualHost: otherwise=2C they have no
> effect.
>=20
> - -chris
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
> Comment: GPGTools - http://gpgtools.org
> Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/
>=20
> iEYEARECAAYFAk+VYVAACgkQ9CaO5/Lv0PCkVgCgqw11nIU5ZnJ1DZ165WQQ1ZEN
> UTAAn2CKlcjIiOO+oFkQFGHeJFpfVHQt
> =3Dw8JP
> -----END PGP SIGNATURE-----
>=20
> ---------------------------------------------------------------------
> To unsubscribe=2C e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands=2C e-mail: users-help@tomcat.apache.org
>=20
 		 	   		  =

--_7161d0b2-5c21-4f01-8392-de9e9533133a_--

From users-return-233726-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 23 14:20:58 2012
Return-Path: <users-return-233726-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 201A49BD0
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 23 Apr 2012 14:20:58 +0000 (UTC)
Received: (qmail 74664 invoked by uid 500); 23 Apr 2012 14:20:54 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 74468 invoked by uid 500); 23 Apr 2012 14:20:54 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 74458 invoked by uid 99); 23 Apr 2012 14:20:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 14:20:54 +0000
X-ASF-Spam-Status: No, hits=0.9 required=5.0
	tests=PLING_QUERY,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [76.96.62.40] (HELO qmta04.westchester.pa.mail.comcast.net) (76.96.62.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 14:20:48 +0000
Received: from omta15.westchester.pa.mail.comcast.net ([76.96.62.87])
	by qmta04.westchester.pa.mail.comcast.net with comcast
	id 1QJw1j0041swQuc54SLUT1; Mon, 23 Apr 2012 14:20:28 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta15.westchester.pa.mail.comcast.net with comcast
	id 1SLU1j01538FjT13bSLUQc; Mon, 23 Apr 2012 14:20:28 +0000
Message-ID: <4F95652A.8070702@christopherschultz.net>
Date: Mon, 23 Apr 2012 10:20:26 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: catalina.out file is growing very rapidly! How to prevent Hibernate's
 INFO and DEBUG statements from getting added to catalina.out file?
References: <BLU162-ds17349592A08291CD68D932D3220@phx.gbl> <4F91BD64.3070808@christopherschultz.net> <BLU162-ds159CEB27401FB22CE47B64D3220@phx.gbl> <CABzHfV=bAyn0qcHmzvRmobMJ2u7ujrY6CqG5MmbAE+hSWmWEHg@mail.gmail.com> <1334962817.10959.YahooMailNeo@web125505.mail.ne1.yahoo.com> <BLU162-ds63AC88D552E51A9DF46C8D3220@phx.gbl>
In-Reply-To: <BLU162-ds63AC88D552E51A9DF46C8D3220@phx.gbl>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Dilip,

On 4/20/12 7:36 PM, Dilip Shah wrote:
> The problem is that there seem to be one / several jar files that I
> use in my application that are adding vast number of INFO and
> DEBUG statements in catalina.out

I suspect that the following are true:

1. You have libraries in common/lib or shared/lib
2. One or more of them use log4j, or they use commons-logging in such
a way as to allow them to use log4j if it is configured at all
3. One or more of them initialize log4j, so those in #2 log to log4j
4. There is either no log4j configuration at all (default?) or a
stupid one (including logging DEBUG to stdout)
5. Tomcat puts all stdout into logs/catalina.out (this is definitely true)

MY first step would be to get everything out of common/lib. That may
solve everything right off the bat. You should do this whether or not
you intend to upgrade.

Let us know how it goes. Until then, there's no reason for any of us
(yourself included) to waste our time considering why you are
experiencing this.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+VZSoACgkQ9CaO5/Lv0PD2EwCeJ/G5iwFVk+ov47zRxGtEpLLW
hH0AoKRmO87yrYWM6LnQVT/WAJs/uFQh
=WCl3
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233727-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 23 14:54:40 2012
Return-Path: <users-return-233727-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9A07C992F
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 23 Apr 2012 14:54:40 +0000 (UTC)
Received: (qmail 93392 invoked by uid 500); 23 Apr 2012 14:54:34 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 92854 invoked by uid 500); 23 Apr 2012 14:54:34 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 92640 invoked by uid 99); 23 Apr 2012 14:54:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 14:54:33 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anjibcs@hotmail.com designates 65.55.111.87 as permitted sender)
Received: from [65.55.111.87] (HELO blu0-omc2-s12.blu0.hotmail.com) (65.55.111.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 14:54:22 +0000
Received: from BLU0-SMTP363 ([65.55.111.72]) by blu0-omc2-s12.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Mon, 23 Apr 2012 07:54:01 -0700
X-Originating-IP: [146.243.44.97]
X-Originating-Email: [anjibcs@hotmail.com]
Message-ID: <BLU0-SMTP363FF9D3D79D7D4719D6A70B1210@phx.gbl>
Received: from [146.243.44.97] ([146.243.44.97]) by BLU0-SMTP363.phx.gbl over TLS secured channel with Microsoft SMTPSVC(6.0.3790.4675);
	 Mon, 23 Apr 2012 07:54:00 -0700
Date: Mon, 23 Apr 2012 10:53:58 -0400
From: Anjib Mulepati <anjibcs@hotmail.com>
User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Connection between Web Application and DB
Content-Type: multipart/alternative;
	boundary="------------070005040403080402070901"
X-OriginalArrivalTime: 23 Apr 2012 14:54:00.0130 (UTC) FILETIME=[EAAB8A20:01CD2160]

--------------070005040403080402070901
Content-Type: text/plain; charset="ISO-8859-1"; format=flowed
Content-Transfer-Encoding: 7bit

Hi All,

I have my DB and web application running in different machine. And 
whenever my DB machine restart my application fail since it can't 
connect to the DB. I have to restart my application every time my DB start.
I am using Struts Plug-in  to load connection information from web.xml 
file and creating the DAO factory from the information. DAO factory is 
stored in servlet context. Now this daoFactory is used by each DAO class 
to create the connection.

This problem exist in my system for long time and trying to fix it. I 
have put my most code here to make things clear. I am using tomcat 7.0.26

1. Context parameter in web.xml

<context-param>
<description>Type of DB.{ 1 = Oracle }</description>
<param-name>dbType</param-name>
<param-value>1</param-value>
</context-param>
<context-param>
<description>Resource reference for the database.</description>
<param-name>resRef</param-name>
<param-value>jdbc/mydb</param-value>
</context-param>

2. Plug-in configuration in struts-config.xml

<plug-in className="com.anjib.plugin.DBConfigPlugin">

3. My DBConfigPlugin class

     public class DBConfigPlugin implements PlugIn {

         private static Log log = 
LogFactory.getLog(DBConfigPlugin.class.getName());

         private DBConfig dbConfig;

         public void destroy() {
             //Nothing to do here
         }

         public void init(ActionServlet servlet, ModuleConfig config) 
throws ServletException {
             ServletContext servletContext = servlet.getServletContext();

             /* Create factory for database */
             String resRef = servletContext.getInitParameter("resRef");
             int dbType = 0;
             if (resRef == null || resRef.trim().length() == 0) {
                 log.fatal("Parameter resRef is null or invalid");
             }
             try {
                 dbType = 
Integer.parseInt(servletContext.getInitParameter("dbType"));
             } catch (NumberFormatException nfe) {
                 log.fatal(nfe);
                 log.error("Parameter dbType is not numeric");
             }
             if (dbType != DBConfig.ORACLE) {
                 log.fatal("Parameter dbType has to be 1 (Oracle)");
             }
             DBConfig = new DBConfig(resRef, dbType);
             DAOFactory daoFactory = DAOFactory.getDAOFactory(DBConfig);
             servletContext.setAttribute("daoFactory", daoFactory);
         }

         public DBConfig getDBConfig() {
             return DBConfig;
         }

         public void setDBConfig(DBConfig DBConfig) {
             this.DBConfig = DBConfig;
         }
     }

4. Create connection in DAOFactory class
         public abstract class DAOFactory {

             private DBConfig dbConfig;

             public static DAOFactory getDAOFactory(DBConfig dbConfig) {
                 switch (dbConfig.getDbType()) {
                     case DBConfig.ORACLE:
                         return new OracleDAOFactory(dbConfig);
                     default:
                         return null;
                 }
             }

             public DAOFactory(DBConfig dbConfig) {
                 this.dbConfig = dbConfig;
             }

            public Connection createConnection() throws DAOException {
                 try {
                     String str = "java:comp/env/" + dbConfig.getResRef();
                     DataSource dataSource = (DataSource) 
ServiceLocator.getInstance().getDataSource(str);
                     return dataSource.getConnection();
                 } catch (SQLException se) {
                     throw new DAOException(se.getMessage(), se);
                 } catch (ServiceLocatorException tase) {
                     throw new DAOException(tase.getMessage(), tase);
                 }
            }
     }

5. In my com.anjib.actions.BaseAction class

     public abstract class BaseAction extends 
org.apache.struts.action.Action {

         private static Log log = 
LogFactory.getLog(BaseAction.class.getName());

         protected DAOFactory daoFactory = null;

         private String message = null;

         private UserInfo userInfo = null;

         @Override
         public ActionForward execute(ActionMapping mapping, ActionForm 
form,
                 HttpServletRequest request, HttpServletResponse response)
                 throws IOException, ServletException {
             userInfo = new UserInfo();
             setUserInfo((UserInfo) 
request.getSession().getAttribute("userInfo"));
             ActionErrors errors = new ActionErrors();
             if (request.getSession().getAttribute("loginStatus") == 
null) {
                 errors.add("error", new 
ActionMessage("error.notloggedin"));
                 this.saveErrors(request, errors);
                 return mapping.findForward("sessionEnded");
             }
             ServletContext servletContext = servlet.getServletContext();
             try {
                 daoFactory = (DAOFactory) 
servletContext.getAttribute("daoFactory");
             } catch (NullPointerException npex) {
                 log.debug(npex);
                 log.error("Couldn't find the valid factory class.");
                 message = "Factory value is NULL.";
                 errors.add("label", new 
ActionMessage("error.null.factory"));
                 saveErrors(request, errors);
                 request.setAttribute("MYEXCEPTION", new 
DAOException(message, npex));
             }
         }

         protected abstract ActionForward executeAction(ActionMapping 
mapping,
             ActionForm form, HttpServletRequest request,
             HttpServletResponse response) throws IOException, 
ServletException;


         public UserInfo getUserInfo() {
             return userInfo;
         }

        public void setUserInfo(UserInfo userInfo) {
            this.userInfo = userInfo;
         }
}

6. Context.xml

<Resource auth="Container"
             driverClassName="oracle.jdbc.driver.OracleDriver"
             maxActive="20"
             maxIdle="10"
             maxWait="2000"
             name="jdbc/mydb"
             password="passw0rd"
             testOnBorrow="true"
             type="javax.sql.DataSource"
             url="jdbc:oracle:thin:@//localhost:5000/TESTDB"
             username="scott"
             validationQuery="SELECT 1 FROM DUAL"
              />




--------------070005040403080402070901--

From users-return-233728-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 23 15:28:37 2012
Return-Path: <users-return-233728-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0FB489E8F
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 23 Apr 2012 15:28:37 +0000 (UTC)
Received: (qmail 10016 invoked by uid 500); 23 Apr 2012 15:28:33 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 9945 invoked by uid 500); 23 Apr 2012 15:28:33 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 9936 invoked by uid 99); 23 Apr 2012 15:28:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 15:28:33 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aw@ice-sa.com designates 212.85.38.228 as permitted sender)
Received: from [212.85.38.228] (HELO tor.combios.es) (212.85.38.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 15:28:25 +0000
Received: from [192.168.245.129] (p549E8C3B.dip0.t-ipconnect.de [84.158.140.59])
	by tor.combios.es (Postfix) with ESMTPA id 3DA83DA0713
	for <users@tomcat.apache.org>; Mon, 23 Apr 2012 17:28:02 +0200 (CEST)
Message-ID: <4F957500.7070801@ice-sa.com>
Date: Mon, 23 Apr 2012 17:28:00 +0200
From: =?ISO-8859-1?Q?Andr=E9_Warnier?= <aw@ice-sa.com>
Reply-To: Tomcat Users List <users@tomcat.apache.org>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Mod_jk returning source code of jsp files
References: <COL113-W248A31965DC681CB4DA9BACF210@phx.gbl>,<CAAKASGwj8CegxJh_3GHPtVo1ABCeHxzadEHaZ6Janag4z9EaBA@mail.gmail.com>,<COL113-W44B1E7156B779CB03139C0CF210@phx.gbl>,<CAAKASGwaSYN2=Lsi1Wi9mj7m9+rjKvCJcqYSh-DPBJrcXnYP0A@mail.gmail.com> <COL113-W54359168808CAD3842C8A6CF210@phx.gbl>,<4F956150.6050705@christopherschultz.net> <COL113-W1267B3596B51C8C14E51F2CF210@phx.gbl>
In-Reply-To: <COL113-W1267B3596B51C8C14E51F2CF210@phx.gbl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

ironclaw hand wrote:
> Thanks Christopher I will address the security issues if I am actually able to get mod_jk to execute a jsp!

No.  You should do things right first, in a secure way.  And then, when it works, you can 
start "optimising" carefully and step by step, and try not to introduce security holes 
while doing so.
I put "optimise" between quotes here, because what you are apparently trying is not much 
of an optimisation, while it IS creating security issues (and confusing things).  It would 
be better to let Tomcat serve all your content, including the static pages that are inside 
your webapp directory anyway.  This way, you will not compromise whatever access security 
is implemented at the Tomcat side, and the overhead of having Tomcat serve those static 
pages is measured in microseconds at worst.

> 
> I have now removed everything from mod_jk.conf except for the global directives and I now have my httpd.conf looking like:
> 
> #
> # JK for connections to Tomcat
> #
> LoadModule jk_module modules/mod_jk.so
> Include /etc/httpd/conf/mod_jk.conf
> 
> <IfModule jk_module>
> JkWorkersFile /etc/httpd/conf/workers.properties
> JkLogFile     /var/log/httpd/mod_jk.log
> JkLogLevel info
> 

remove from here

> Alias /sft "/var/webapps/sft"
> 
> <Directory "/var/webapps/sft">
>  Options Indexes FollowSymLinks
> </Directory>
> 
> <Location "/sft/WEB-INF/">
>    AllowOverride None
>    deny from all
> </Location>
> 
until here

 > </IfModule>

> 
> ##
> ## SSL Virtual Host Context
> <VirtualHost sfta.a.b.c:443>    

change this

> JkMount /sft/* loadbalancer
> JkUnMount /*.html loadbalancer

to this

JkMount /sft loadbalancer
JkMount /sft/* loadbalancer


> </VirtualHost>
> 
> I still get the jsp file returned as text 

which means that Apache is serving them, not Tomcat.

so I obviously still have problems and initially I would just like to get apache to invoke 
mod_jk and return me the dynamic content.

And let it first return the static content as well, since it is anyway located in your 
webapps directory.

One could also question why you are using the term (or name) "loadbalancer" above, since 
all your content seems to be on the same host anyway.  Do you really have one httpd and 
several Tomcat's ?

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233729-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 23 15:36:19 2012
Return-Path: <users-return-233729-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 595BC974B
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 23 Apr 2012 15:36:19 +0000 (UTC)
Received: (qmail 42799 invoked by uid 500); 23 Apr 2012 15:36:16 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 42593 invoked by uid 500); 23 Apr 2012 15:36:16 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 42583 invoked by uid 99); 23 Apr 2012 15:36:16 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 15:36:16 +0000
Received: from localhost (HELO fc16x86v0.jboss.hr) (127.0.0.1)
  (smtp-auth username mturk, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 15:36:15 +0000
Message-ID: <4F9576EC.5060508@apache.org>
Date: Mon, 23 Apr 2012 17:36:12 +0200
From: Mladen Turk <mturk@apache.org>
User-Agent: Mozilla/5.0 (X11; Linux i686; rv:11.0) Gecko/20120329 Thunderbird/11.0.1
MIME-Version: 1.0
To: users@tomcat.apache.org
Subject: Re: 64bit windows mod_jk connector download for apache httpd 2.4
References: <CAG6aRdX7aA9J8RZ1OAhyUQCayi2D2E=_9FJryTH4Z1v7dDSosw@mail.gmail.com> <4F8F1EEB.2070000@apache.org> <CAG6aRdXuMWqvXLTv=M=-YNQzxX8LQLiTYyoYtUoUCQF32Ln-yQ@mail.gmail.com> <4F903E4B.3090603@christopherschultz.net> <4F92DA1E.7080000@apache.org> <4F956329.4060003@christopherschultz.net>
In-Reply-To: <4F956329.4060003@christopherschultz.net>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit

On 04/23/2012 04:11 PM, Christopher Schultz wrote:
>>
>> The problem is that there are no more 'official' httpd binaries.
>
> Aah, I didn't realize that ASF doesn't have official httpd x86-64
> binaries.
>

Right, never did have 64-bit, and now no more 32-bit as well.

>> Probably because the current maintainer just get bored, so the
>> suggested use is to use apachelaunge's binaries.
>>
>> At the end we could try to convince those guys to produce mod_jk
>> binaries as well.
>
> Yeah, it would seem reasonable to suggest that to them. Maybe OP can
> make such a request, since he's the one who wants the package?
>

Exactly. Might be better to come from "userland"


Regards
-- 
^TM

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233730-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 23 15:45:45 2012
Return-Path: <users-return-233730-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 34D3A9D20
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 23 Apr 2012 15:45:45 +0000 (UTC)
Received: (qmail 86739 invoked by uid 500); 23 Apr 2012 15:45:41 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 86672 invoked by uid 500); 23 Apr 2012 15:45:41 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 86663 invoked by uid 99); 23 Apr 2012 15:45:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 15:45:41 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.160.196.165] (HELO arizona.hanik.com) (66.160.196.165)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 15:45:33 +0000
Received: from arizona.hanik.com (arizona.hanik.com [66.160.196.165])
	by arizona.hanik.com (Postfix) with ESMTP id 9439CA9C1CA8
	for <users@tomcat.apache.org>; Mon, 23 Apr 2012 09:42:05 -0600 (MDT)
Date: Mon, 23 Apr 2012 09:42:05 -0600 (MDT)
From: Filip Hanik Mailing Lists <devlists@hanik.com>
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Tribes coordinator
Message-ID: <65775494-0122-4ceb-84e1-759c916ad481@arizona.hanik.com>
In-Reply-To: <CAG7MYhmkZvk7Nfk9L--jnoOevDv0XnhNYuiLZz2+MPr4iHM3kQ@mail.gmail.com>
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
MIME-Version: 1.0
X-Originating-IP: [46.195.129.53]
X-Mailer: Zimbra 7.1.1_GA_3196 (ZimbraWebClient - FF3.0 (Mac)/7.1.1_GA_3196)
X-Virus-Checked: Checked by ClamAV on apache.org

http://tomcat.apache.org/tomcat-7.0-doc/api/org/apache/catalina/tribes/group/interceptors/package-summary.html

Take a look at SimpleCoordinator and NonBlockingCoordinator

Equally simple to implement your own based on the requirement you have for leader election.

It does depend on what you need leader ship for, sometimes, like virtual synchrony, leaders are used to determine atomic delivery of a message to an entire group. Either the entire group gets it, or doesn't.

Filip

----- Original Message -----
> From: "Afkham Azeez" <afkham@gmail.com>
> To: "Tomcat Users List" <users@tomcat.apache.org>
> Sent: Monday, April 23, 2012 6:38:31 AM
> Subject: Tribes coordinator
> 
> We are using Tribes in Axis2. In a cluster, we want to have leader
> election, and one member to be designated as the coordinator. How can
> this
> be achieved using Tribes?
> 
> Thanks
> Azeez
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233731-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 23 17:50:52 2012
Return-Path: <users-return-233731-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4A84F9ABF
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 23 Apr 2012 17:50:52 +0000 (UTC)
Received: (qmail 68759 invoked by uid 500); 23 Apr 2012 17:50:49 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 68665 invoked by uid 500); 23 Apr 2012 17:50:48 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 68641 invoked by uid 99); 23 Apr 2012 17:50:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 17:50:47 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.160.196.165] (HELO arizona.hanik.com) (66.160.196.165)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 17:50:41 +0000
Received: from arizona.hanik.com (arizona.hanik.com [66.160.196.165])
	by arizona.hanik.com (Postfix) with ESMTP id 1FC76A84089C;
	Mon, 23 Apr 2012 11:47:13 -0600 (MDT)
Date: Mon, 23 Apr 2012 11:47:13 -0600 (MDT)
From: Filip Hanik Mailing Lists <devlists@hanik.com>
To: Tomcat Users List <users@tomcat.apache.org>, Mark Eggers <its_toasted@yahoo.com>
Cc: =?utf-8?B?7J207J6s66eM?= <leejaemannet@naver.com>
Subject: Re: dbcp datasource encryption
Message-ID: <8c40ea76-295f-471d-956a-65d9d4659461@arizona.hanik.com>
In-Reply-To: <1334881561.75954.YahooMailNeo@web125502.mail.ne1.yahoo.com>
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
MIME-Version: 1.0
X-Originating-IP: [46.195.129.53]
X-Mailer: Zimbra 7.1.1_GA_3196 (ZimbraWebClient - FF3.0 (Mac)/7.1.1_GA_3196)
X-Virus-Checked: Checked by ClamAV on apache.org



----- Original Message -----

> 
> http://wiki.apache.org/tomcat/FAQ/Password
> 
> 
> In short, no.
> 
> Encrypting your database, database user, and database password buys
> you virtually (and most people would say actually) nothing.

"virtually nothing" is the opposite of what I would call it. What about compliance, this is HUGE for companies, and not to be discarded as an unimportant requirement

http://tomcat.markmail.org/thread/wmdu4e52y2msjzal

If you wish to implement password obfuscator/deobfuscator yourself, you can set the 
org.apache.tomcat.util.digester.PROPERTY_SOURCE system property to a class that deobfuscates your password for you

reference: http://tomcat.apache.org/tomcat-7.0-doc/config/systemprops.html


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233732-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 23 19:58:24 2012
Return-Path: <users-return-233732-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 34F229280
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 23 Apr 2012 19:58:24 +0000 (UTC)
Received: (qmail 3931 invoked by uid 500); 23 Apr 2012 19:58:20 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 2434 invoked by uid 500); 23 Apr 2012 19:58:00 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 2232 invoked by uid 99); 23 Apr 2012 19:57:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 19:57:51 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [217.146.183.244] (HELO nm11-vm0.bullet.mail.ukl.yahoo.com) (217.146.183.244)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 23 Apr 2012 19:57:44 +0000
Received: from [217.146.183.183] by nm11.bullet.mail.ukl.yahoo.com with NNFMP; 23 Apr 2012 19:57:22 -0000
Received: from [77.238.184.53] by tm14.bullet.mail.ukl.yahoo.com with NNFMP; 23 Apr 2012 19:57:22 -0000
Received: from [127.0.0.1] by smtp122.mail.ukl.yahoo.com with NNFMP; 23 Apr 2012 19:57:22 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.es; s=s1024; t=1335211042; bh=eymxbb6pB7Z7I2Ao/hDWz2NRnW9y6ayO7nrQM3zFQfs=; h=X-Yahoo-Newman-Id:X-Yahoo-Newman-Property:X-YMail-OSG:X-Yahoo-SMTP:Received:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding:X-Antivirus:X-Antivirus-Status; b=NXxzBSN16xzLIPu/P0YvasG7oe3t73+LGWt/i4v8NYIOMdi20KjX5nQwyGNa2QxMR5V1Jrd0n1rvROdGbEkJ4F+jpoYVvGy64MbWeP/5DX3TmXW8R9ajcrmenR6uXwMSIGvmogEnt7lLVvhpeURStgPF2rT+AOE50zfoCB1KGXg=
X-Yahoo-Newman-Id: 908367.2273.bm@smtp122.mail.ukl.yahoo.com
X-Yahoo-Newman-Property: ymail-3
X-YMail-OSG: Fo4tS8UVM1lIbaXnUomp37ZHNfTZNJQLiBshtzc4_pJIyEw
 jVTC8HOSjAiKT1bKsHB8OZSBGR8U4aNvPmPrH_xzUSJNqSwVhj_kS8Ds3z72
 aiCv0utOZT_1OicKaCcbG63nY2qC_mBNbcS4GDCxnNachZX9Ydi.EsUas0.b
 9Cbg0b5KTqobe4JzooHTo2RwVYj8zC6dFr6SjZZD99lqWbqb2f69zvSSq.ZZ
 QhRSlZuitQafdietJEsPE9Fnl2iEQVTL6IBwZ3i0awjKjQNf7oQevsZM8K6k
 7c0lH68mNO29DWDtP_qgdCu8Le.Sq.iqhp4ymjtMSCc.Mty5IkGbWGxLnRIa
 yDJzTA0XA.AWCifzefrfVRfaa_b6cPIqSHLhPBkpieSKoTpPpc0OKAOeVYqs
 i4MXHa3lNwsjx_3P5qByv3MYc8BL_NeufOd9jTzjVXATW9lC9keH2JKuoEa9
 pYCibXqlSHVpyFsb.vw8wpO6PsmbXUXh_3i06jOV_nXBG9NUfn7I-
X-Yahoo-SMTP: 4morDKeswBDE3lIuzd.cm_qbJNxlcsznEWqdK4MN
Received: from [127.0.0.1] (miguel_3_gonzalez@85.49.216.142 with plain)
        by smtp122.mail.ukl.yahoo.com with SMTP; 23 Apr 2012 19:57:22 +0000 GMT
Message-ID: <4F95B427.9040400@yahoo.es>
Date: Mon, 23 Apr 2012 21:57:27 +0200
From: =?ISO-8859-1?Q?Miguel_Gonz=E1lez_Casta=F1os?= <miguel_3_gonzalez@yahoo.es>
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Javamelody and Struts
References: <CBB234E5.2AAB3%darryl.lewis@unsw.edu.au>
In-Reply-To: <CBB234E5.2AAB3%darryl.lewis@unsw.edu.au>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Antivirus: avast! (VPS 120423-0, 23/04/2012), Outbound message
X-Antivirus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org

On 16/04/2012 12:43, Darryl Lewis wrote:
> Make sure the monitoring code is before the struts call.
>
> On 16/04/12 5:38 PM, "Miguel Gonzlez Castaos"
> <miguel_3_gonzalez@yahoo.es>  wrote:
>
>> On 16/04/2012 09:34, Debraj Mallick wrote:
>>> hi there,
>>>
>>> to access use :*http://<host>/<context>/monitoring*
>>>
>>> link:
>>> *http://code.google.com/p/javamelody/wiki/UserGuide#3._First_results*
>> Don't get me wrong, but what does it matter the access URL if my webapp
>> doesn't even work?
Hi,
  I was able to configure javamelody in Tomcat 6 with a HTTP protocol in a virtual machine.

  Now that I'm trying to configure javamelody in Tomcat 5 with HTTPS I get the following
error when I try to add the context and the URL:
  javamelody avax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed:
sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target.

  However the site certificate is signed by Verisign. What we are doing wrong?

  Regards,

  Miguel


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233733-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 23 19:59:35 2012
Return-Path: <users-return-233733-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8D3709512
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 23 Apr 2012 19:59:35 +0000 (UTC)
Received: (qmail 10851 invoked by uid 500); 23 Apr 2012 19:59:31 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 10768 invoked by uid 500); 23 Apr 2012 19:59:30 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 10696 invoked by uid 99); 23 Apr 2012 19:59:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 19:59:28 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [76.96.62.48] (HELO qmta05.westchester.pa.mail.comcast.net) (76.96.62.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 19:59:20 +0000
Received: from omta09.westchester.pa.mail.comcast.net ([76.96.62.20])
	by qmta05.westchester.pa.mail.comcast.net with comcast
	id 1XwD1j0010SCNGk55Xz0iy; Mon, 23 Apr 2012 19:59:00 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta09.westchester.pa.mail.comcast.net with comcast
	id 1Xyx1j01Y38FjT13VXyyUh; Mon, 23 Apr 2012 19:58:58 +0000
Message-ID: <4F95B482.4030809@christopherschultz.net>
Date: Mon, 23 Apr 2012 15:58:58 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: dbcp datasource encryption
References: <8c40ea76-295f-471d-956a-65d9d4659461@arizona.hanik.com>
In-Reply-To: <8c40ea76-295f-471d-956a-65d9d4659461@arizona.hanik.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Filip,

On 4/23/12 1:47 PM, Filip Hanik Mailing Lists wrote:
>> http://wiki.apache.org/tomcat/FAQ/Password
>> 
>> 
>> In short, no.
>> 
>> Encrypting your database, database user, and database password
>> buys you virtually (and most people would say actually) nothing.
> 
> "virtually nothing" is the opposite of what I would call it. What 
> about compliance, this is HUGE for companies, and not to be
> discarded as an unimportant requirement

While it is viewed as an important requirement, there are really only
3 possible ways to fulfill it:

1. Enter the password at the command-prompt as the service starts (or
   allow such credentials to be provided after start-up in some way).
   This is the only one of these 3 possibilities that actually offers
   any real security. Unfortunately, it's an operational impossibility.
   Apache httpd has the same problem with server keys. See #3 for how
   that is (stupidly and commonly) handled.

2. Use a de-obfuscator to recover your plaintext credentials from some
   non-plain-text input (your suggestion, Filip). This just moves the
   problem somewhere else. So, your server.xml (or, better,
   context.xml) is clean but your context.xml.secret-stuff is suddenly
   not clean because it contains the password for the password. Sure,
   you pass an audit that is looking for something very specific, but
   you don't buy yourself any real security. It's like requiring a
   really good lock on a door when the window next to the door is
   always wide open. Yep, that's a great-lookin' lock you got there...
   you're definitely protected.

3. Remove the password completely. That is, use a password-less
   credential. Sounds completely stupid, right? Well, having a
   plaintext password is essentially the same thing, since who would
   guess that the password is nothing, right? You'd have to have access
   to the server.xml (or context.xml) to know that (unless you just
   /tried/ it, of course). Your database ought to be locked-down
   enough that you can't connect from just anywhere, so having
   remove access to the server that connects to the database is just
   as good as having access to the database, right?
   This is how Apache httpd recommends that you *don't* set up your
   web server's certificate keys. In my experience, *everybody* does
   this: you make a password-less key and use that to start your
   server. Just make sure you set permissions appropriately.
   This is also not secure, but it's very practical: if someone
   has access to your box, the game is over anyway. Having a
   trivially-discovered password is as good as having no password.

> http://tomcat.markmail.org/thread/wmdu4e52y2msjzal

VMWare's documentation shows you how to do #2 above either with some
other credential (good luck protecting that one any better) or with no
credential (in the example of using Base64 encoding).

- From a requirements-complance perspective, yes, there's some utility
to not having a cleartext password in your configuration file. An
honest risk analysis will show that the case before and after such
obfuscation is identical: you are no more protected than when you
started. It's actually worse, because you *think* you are somehow
magically protected. The security checkboxes have all been checked.
We're secure, right? Drinks all around.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+VtIIACgkQ9CaO5/Lv0PB1ggCgtGxUz183qITETmSyZS7yW2JU
nDoAoJSFWQJvY3B5TGeJlAolohb0rxOg
=LfY/
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233734-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 23 20:00:25 2012
Return-Path: <users-return-233734-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 51CF29583
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 23 Apr 2012 20:00:25 +0000 (UTC)
Received: (qmail 19231 invoked by uid 500); 23 Apr 2012 20:00:22 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 19012 invoked by uid 500); 23 Apr 2012 20:00:21 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 18997 invoked by uid 99); 23 Apr 2012 20:00:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 20:00:21 +0000
X-ASF-Spam-Status: No, hits=0.3 required=5.0
	tests=PLING_QUERY,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dilipvshah@hotmail.com designates 65.55.111.79 as permitted sender)
Received: from [65.55.111.79] (HELO blu0-omc2-s4.blu0.hotmail.com) (65.55.111.79)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 20:00:13 +0000
Received: from BLU162-DS18 ([65.55.111.72]) by blu0-omc2-s4.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Mon, 23 Apr 2012 12:59:52 -0700
X-Originating-IP: [24.5.178.208]
X-Originating-Email: [dilipvshah@hotmail.com]
Message-ID: <BLU162-ds18A7C7212CC0796A7F5EB1D3210@phx.gbl>
From: "Dilip Shah" <dilipvshah@hotmail.com>
To: "Tomcat Users List" <users@tomcat.apache.org>
Subject: Re: catalina.out file is growing very rapidly! How to prevent Hibernate's INFO and DEBUG statements from getting added to catalina.out file?
Date: Mon, 23 Apr 2012 12:59:54 -0700
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 14.0.8117.416
X-MimeOLE: Produced By Microsoft MimeOLE V14.0.8117.416
X-OriginalArrivalTime: 23 Apr 2012 19:59:52.0046 (UTC) FILETIME=[A543B0E0:01CD218B]
X-Virus-Checked: Checked by ClamAV on apache.org

ok, the issue is resolved!

Konstantin,
Your observation that output in catalina.out in Linux Live environment is 
different from console output in my Windows development environment
and
your statement "You have some mess in your common/lib"
prompted me to compare jar files in both the environments.
Just to check, I replaced entire content of common/lib on the Live server 
with the content from Development environment and voila... it worked! No 
more unwanted INFO and DEBUG statements in catalina.out! Thanks you very 
very much!

I spent some more time to find out who the culprit was. I had the following 
files from Xuggler (video manipulation library)  build I had done on the 
CentOS server a couple of years ago in the Live server's common/lib folder:
* slf4j-api.jar
* logback-classic.jar
* logback-core.jar

Even though I had these these jar files for the last couple of years, I 
didn't encounter any issues but it looks like the last changes to my 
application 'triggered' these new INFO and DEBUG statements in catalina.out. 
I suspect that Spring's @Autowired, @JsonIgnore  starts adding this INFO and 
DEBUG statements when you have this particular version of slf4j-api.jar and 
the other 2 jar files mentioned above.

It's still a bit mysterious to me but I'm going to spent my time and effort 
on moving application related jar files out of Tomcat's common/lib to the 
application's WEB-INF/lib and then on upgrading to Tomcat 7

I really appreciate all the help I got in helping me solve this issue. I 
haven't seen this level of participation and received this level of support 
in any other forums I have interacted with over the last 3-4 years!

Dilip Shah


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233735-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 23 20:00:40 2012
Return-Path: <users-return-233735-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EB9D7959F
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 23 Apr 2012 20:00:39 +0000 (UTC)
Received: (qmail 22233 invoked by uid 500); 23 Apr 2012 20:00:36 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 22187 invoked by uid 500); 23 Apr 2012 20:00:36 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 22178 invoked by uid 99); 23 Apr 2012 20:00:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 20:00:36 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [76.96.59.227] (HELO qmta12.westchester.pa.mail.comcast.net) (76.96.59.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 20:00:30 +0000
Received: from omta16.westchester.pa.mail.comcast.net ([76.96.62.88])
	by qmta12.westchester.pa.mail.comcast.net with comcast
	id 1Vgs1j0051uE5Es5CY0Bcq; Mon, 23 Apr 2012 20:00:11 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta16.westchester.pa.mail.comcast.net with comcast
	id 1Y0B1j01u38FjT13cY0Clk; Mon, 23 Apr 2012 20:00:12 +0000
Message-ID: <4F95B4C9.9010802@christopherschultz.net>
Date: Mon, 23 Apr 2012 16:00:09 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Javamelody and Struts
References: <CBB234E5.2AAB3%darryl.lewis@unsw.edu.au> <4F95B427.9040400@yahoo.es>
In-Reply-To: <4F95B427.9040400@yahoo.es>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Miguel,

On 4/23/12 3:57 PM, Miguel Gonzlez Castaos wrote:
> On 16/04/2012 12:43, Darryl Lewis wrote:
>> Make sure the monitoring code is before the struts call.
>> 
>> On 16/04/12 5:38 PM, "Miguel Gonzlez Castaos" 
>> <miguel_3_gonzalez@yahoo.es>  wrote:
>> 
>>> On 16/04/2012 09:34, Debraj Mallick wrote:
>>>> hi there,
>>>> 
>>>> to access use :*http://<host>/<context>/monitoring*
>>>> 
>>>> link: 
>>>> *http://code.google.com/p/javamelody/wiki/UserGuide#3._First_results*
>>>
>>>> 
Don't get me wrong, but what does it matter the access URL if my webapp
>>> doesn't even work?
> Hi, I was able to configure javamelody in Tomcat 6 with a HTTP
> protocol in a virtual machine.
> 
> Now that I'm trying to configure javamelody in Tomcat 5 with HTTPS
> I get the following error when I try to add the context and the
> URL: javamelody avax.net.ssl.SSLHandshakeException: 
> sun.security.validator.ValidatorException: PKIX path building
> failed: sun.security.provider.certpath.SunCertPathBuilderException:
> unable to find valid certification path to requested target.
> 
> However the site certificate is signed by Verisign. What we are
> doing wrong?

Have you imported all of the "intermediate" certificates from
VeriSign. I think that for some SSL certificates, you need *two*
intermediate certificates from VeriSign.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+VtMkACgkQ9CaO5/Lv0PD4YACgnOcGKyNgapJbRQFKa0EYtyR+
59wAn2K4dmgvh/cbJleQY6kt66eyUEgo
=pLMj
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233736-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 23 20:03:10 2012
Return-Path: <users-return-233736-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 50510964C
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 23 Apr 2012 20:03:10 +0000 (UTC)
Received: (qmail 30645 invoked by uid 500); 23 Apr 2012 20:03:07 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 30577 invoked by uid 500); 23 Apr 2012 20:03:07 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 30568 invoked by uid 99); 23 Apr 2012 20:03:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 20:03:06 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [76.96.62.32] (HELO qmta03.westchester.pa.mail.comcast.net) (76.96.62.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 20:02:59 +0000
Received: from omta11.westchester.pa.mail.comcast.net ([76.96.62.36])
	by qmta03.westchester.pa.mail.comcast.net with comcast
	id 1Xkb1j0030mv7h053Y2fkU; Mon, 23 Apr 2012 20:02:39 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta11.westchester.pa.mail.comcast.net with comcast
	id 1Y2g1j00138FjT13XY2gSQ; Mon, 23 Apr 2012 20:02:40 +0000
Message-ID: <4F95B55D.9050606@christopherschultz.net>
Date: Mon, 23 Apr 2012 16:02:37 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: 64bit windows mod_jk connector download for apache httpd 2.4
References: <CAG6aRdX7aA9J8RZ1OAhyUQCayi2D2E=_9FJryTH4Z1v7dDSosw@mail.gmail.com> <4F8F1EEB.2070000@apache.org> <CAG6aRdXuMWqvXLTv=M=-YNQzxX8LQLiTYyoYtUoUCQF32Ln-yQ@mail.gmail.com> <4F903E4B.3090603@christopherschultz.net> <4F92DA1E.7080000@apache.org> <4F956329.4060003@christopherschultz.net> <4F9576EC.5060508@apache.org>
In-Reply-To: <4F9576EC.5060508@apache.org>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Mladen,

On 4/23/12 11:36 AM, Mladen Turk wrote:
> On 04/23/2012 04:11 PM, Christopher Schultz wrote:
>>> 
>>> The problem is that there are no more 'official' httpd
>>> binaries.
>> 
>> Aah, I didn't realize that ASF doesn't have official httpd
>> x86-64 binaries.
>> 
> 
> Right, never did have 64-bit, and now no more 32-bit as well.

Is this the ASF using its market dominance to try to destroy the win32
server market? ;) Would that it were true...

> Exactly. Might be better to come from "userland"

+1

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEUEARECAAYFAk+VtV0ACgkQ9CaO5/Lv0PD5OQCXWP/oMYyKsPne92/XcIXvHH2d
JACgvGAd4Cj29u3sMiC6Ygic3TTobkU=
=RhMW
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233737-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 23 20:36:53 2012
Return-Path: <users-return-233737-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7F988971C
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 23 Apr 2012 20:36:53 +0000 (UTC)
Received: (qmail 33052 invoked by uid 500); 23 Apr 2012 20:36:53 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 32601 invoked by uid 500); 23 Apr 2012 20:36:52 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 32348 invoked by uid 99); 23 Apr 2012 20:36:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 20:36:52 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [76.96.62.80] (HELO qmta08.westchester.pa.mail.comcast.net) (76.96.62.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 20:36:46 +0000
Received: from omta09.westchester.pa.mail.comcast.net ([76.96.62.20])
	by qmta08.westchester.pa.mail.comcast.net with comcast
	id 1YcA1j0030SCNGk58YcTV4; Mon, 23 Apr 2012 20:36:27 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta09.westchester.pa.mail.comcast.net with comcast
	id 1YcQ1j01a38FjT13VYcRg5; Mon, 23 Apr 2012 20:36:25 +0000
Message-ID: <4F95BD49.9050505@christopherschultz.net>
Date: Mon, 23 Apr 2012 16:36:25 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Developers List <dev@tomcat.apache.org>, 
 Tomcat Users List <users@tomcat.apache.org>
Subject: Re: asp file and session creation
References: <93D3BC6E-1267-4956-BB99-FD5B1E7C7D58@gmail.com> <CABzHfVkKy834K+4ue62e=zAR0+pzJTab6C0KEat1Few6m6h9PQ@mail.gmail.com> <F275FD26-6620-449A-B34C-04F8E8E56E1B@gmail.com>
In-Reply-To: <F275FD26-6620-449A-B34C-04F8E8E56E1B@gmail.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Gunay,

On 4/21/12 2:58 AM, gunay arslan wrote:
> Seems like I could not explain what exactly I was trying to show.
> A reference implementation of the PageContextImpl is attached, and
> I tested this with one of our in-house web application. The point
> is

This is a discussion best had on the users' list. I'm cross-posting
here to encourage a transition.

> 1) Spec says that a session variable needs to be present: but this 
> creates a  problem for the web applications, as a simple attack to
> a web application can force creation of dummy sessions, filling the
> memory. Most of the applications are using some sort of persistent
> session management, which is another problem, as this increases the
> processing time , for these dummy sessions.

There are many ways to create a session without even hitting a JSP.
Closing this "hole" doesn't safeguard the server from such an attack.
You'll need to use some other mechanism to prevent a malicious client
from creating sessions without bound.

> 2) Most of the applications do not use the session inside the jsp

That's not only a fairly big assertion, it also suggests that it's
okay to violate the spec. Which is not a good idea.

> , so why to create a new session , before it is needed ?? Maybe we 
> can name the definition LAZY_SESSION_CREATION ??

Konstantin already explained that there needs to be a local variable
available called "session" for scriptlets. If the spec required that
all session access be routed through some method (such as
HttpServletRequest.getSession), then your suggestion might be
possible. Instead, the spec requires that there be a valid, non-null
local variable available to scriplets. This is not possible with any
kind of lazy-loading scenario.

> 3) Most of the applications , do not create a session in the jsp,
> the session is created  at the servlet level, and just checked for
> attribute presence at the jsp level.

Another fairly big assertion. Maybe this is how things are in your own
webapp, but yours is different from everyone else's.

> My point is to reduce the number of "useless created sessions",
> the same problem was described at
> http://www.tomcatexpert.com/blog/2011/05/18/crawler-session-manager-valve
> , showing a simple solution, but this solution does not solve the
> real problem.

The real problem is that the webapp is (perhaps inadvertently)
requesting that the container create sessions when they are not
necessary. The solution is to fix the webapp. Tomcat can only be
leveraged to stop the bleeding while you go repair the root of the
problem.

It might be worthwhile proposing a setting for Jasper where the
default "session" setting could be set to "false" (in obvious
violation of the servlet specification) so that JSPs must specifically
set session="true" in their headers, but such a patch might be very
far-reaching.

Personally, I would find it easier to write a simple
search-and-replace (search-and-add?) script to find JSPs that don't
need sessions and set session="false" in their <%@page> directives.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+VvUkACgkQ9CaO5/Lv0PCmPwCdH8qhXYPjpGvJICnMRIa7Dq2/
qrYAnjEy4X0oU//7UB+0y44aRGtVupfN
=rkI8
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233738-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 23 21:01:12 2012
Return-Path: <users-return-233738-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E9AB1922B
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 23 Apr 2012 21:01:11 +0000 (UTC)
Received: (qmail 5516 invoked by uid 500); 23 Apr 2012 21:01:08 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 5447 invoked by uid 500); 23 Apr 2012 21:01:08 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 5421 invoked by uid 99); 23 Apr 2012 21:01:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 21:01:07 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [217.146.183.185] (HELO nm11.bullet.mail.ukl.yahoo.com) (217.146.183.185)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 23 Apr 2012 21:00:59 +0000
Received: from [217.146.183.183] by nm11.bullet.mail.ukl.yahoo.com with NNFMP; 23 Apr 2012 21:00:38 -0000
Received: from [77.238.184.59] by tm14.bullet.mail.ukl.yahoo.com with NNFMP; 23 Apr 2012 21:00:38 -0000
Received: from [127.0.0.1] by smtp128.mail.ukl.yahoo.com with NNFMP; 23 Apr 2012 21:00:38 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.es; s=s1024; t=1335214838; bh=oVARkH7GHrhzXoNQUY4so4JSdpF4RL8IwwydSdn+UDs=; h=X-Yahoo-Newman-Id:X-Yahoo-Newman-Property:X-YMail-OSG:X-Yahoo-SMTP:Received:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding:X-Antivirus:X-Antivirus-Status; b=JC8BhWPFfFiIaT7/2UyHWJyqKF/if6N2BZ1dSXG4LVZkakH0AjLgMxZRbsJpD86kxCjtN/i+qejBRfYd9B+oZTEMHzaaH3JYsZGoEDqQt/m11hObxvSMPUlTbMhCVAKZnt/VpM9IfjOzGdTRAHBmXDs90B4SQEBN6uz+w6Co6P8=
X-Yahoo-Newman-Id: 156830.2239.bm@smtp128.mail.ukl.yahoo.com
X-Yahoo-Newman-Property: ymail-3
X-YMail-OSG: 4ECuF.cVM1lK8JDTkz4Vk4vmm4dEeRZqs8CfWOP3Fneed_w
 joldPmbn3YAEUnOfxxMA3qA6.Y9OD66DsbzPyRheXt5zE0_QcLkwr6esr_ha
 h6fwChqBWygH_IlrNZg5xbiVqE0Unhq6vLlZDWf..88kZ1RW1BSVeubTQIBk
 pKqOI_7qcRp4CgR6hGpvKfI6vLaCV8fJIFEIwPQ.w5a5joR3GB7LYVYjQy.O
 fFS.ud.Ed4__qHsvmKsXhvMCpul55RQTF52H1gI2oZHou5XdaFHfke51g6Fn
 gFG9PkFjz69KH7pk4TqkMkR4oy1YnUKo24ro_7AgoCVpL5h3wnoOKdcBgV6i
 HdEwsf25AKjurA4SvaNYbTahxhxFmQN7a1wt7EOnmMXOtJEn3bIpAVRdtn4F
 DgkF3tGJL
X-Yahoo-SMTP: 4morDKeswBDE3lIuzd.cm_qbJNxlcsznEWqdK4MN
Received: from [127.0.0.1] (miguel_3_gonzalez@85.49.216.142 with plain)
        by smtp128.mail.ukl.yahoo.com with SMTP; 23 Apr 2012 21:00:37 +0000 GMT
Message-ID: <4F95C2F3.9040307@yahoo.es>
Date: Mon, 23 Apr 2012 23:00:35 +0200
From: =?UTF-8?B?TWlndWVsIEdvbnrDoWxleiBDYXN0YcOxb3M=?= <miguel_3_gonzalez@yahoo.es>
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Javamelody and Struts
References: <CBB234E5.2AAB3%darryl.lewis@unsw.edu.au> <4F95B427.9040400@yahoo.es> <4F95B4C9.9010802@christopherschultz.net>
In-Reply-To: <4F95B4C9.9010802@christopherschultz.net>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Antivirus: avast! (VPS 120423-0, 23/04/2012), Outbound message
X-Antivirus-Status: Clean

> Have you imported all of the "intermediate" certificates from
> VeriSign. I think that for some SSL certificates, you need *two*
> intermediate certificates from VeriSign.
No, I didn't know that I had to do that. Where can I download those 
intermediate certificates?

Many thanks for the hint

Miguel

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233739-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 23 21:07:07 2012
Return-Path: <users-return-233739-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 791AE99D8
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 23 Apr 2012 21:07:07 +0000 (UTC)
Received: (qmail 28762 invoked by uid 500); 23 Apr 2012 21:07:01 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 28671 invoked by uid 500); 23 Apr 2012 21:07:01 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 28506 invoked by uid 99); 23 Apr 2012 21:07:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 21:07:01 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of knst.kolinko@gmail.com designates 209.85.213.173 as permitted sender)
Received: from [209.85.213.173] (HELO mail-yx0-f173.google.com) (209.85.213.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 21:06:56 +0000
Received: by yenr5 with SMTP id r5so8188986yen.18
        for <users@tomcat.apache.org>; Mon, 23 Apr 2012 14:06:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=wpZN4NDUAvIm7n7iLm/lK+jwDRZ7EmKbtnO8i9KkRj8=;
        b=SD4Rc+6bnUPHP7WVkYZaXKkssTfAPDZ3AbS/le8sVaBUUcfEVqV6/9XaMUT6X1jsQi
         afhNFk/TUvriBCT7XpwpIw6X81QyfP92JiKbcAzmgfyr50hbiH7HSnfq4/WafN0cih3h
         hCQfPcauGS9canNBwjyWg7Is4wJgO9/df1IayyBZeg8XIW5Is2JgoWBYfUi2kTicdQyk
         fMlCzkRzwJ5LVfgafZFwC0dgGYgLJY0mzd+LbG2nv5eM/8/065xeA5vW1zvDPtAwexpU
         pC12OWEew/efD9SSp/dhpga3/oGA6tUmNm/xcDqhqUWgOXTqZpdddl+B0Dc3Y2L42XCy
         9Pcw==
MIME-Version: 1.0
Received: by 10.236.185.138 with SMTP id u10mr11563034yhm.106.1335215195588;
 Mon, 23 Apr 2012 14:06:35 -0700 (PDT)
Received: by 10.146.161.7 with HTTP; Mon, 23 Apr 2012 14:06:35 -0700 (PDT)
In-Reply-To: <4F95BD49.9050505@christopherschultz.net>
References: <93D3BC6E-1267-4956-BB99-FD5B1E7C7D58@gmail.com>
	<CABzHfVkKy834K+4ue62e=zAR0+pzJTab6C0KEat1Few6m6h9PQ@mail.gmail.com>
	<F275FD26-6620-449A-B34C-04F8E8E56E1B@gmail.com>
	<4F95BD49.9050505@christopherschultz.net>
Date: Tue, 24 Apr 2012 01:06:35 +0400
Message-ID: <CABzHfV=UxVxvRZR2MTLiJUG0221AW8HwzObGJU43qkO7V3+khQ@mail.gmail.com>
Subject: Re: asp file and session creation
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

2012/4/24 Christopher Schultz <chris@christopherschultz.net>:
>
> It might be worthwhile proposing a setting for Jasper where the
> default "session" setting could be set to "false" (in obvious
> violation of the servlet specification) so that JSPs must specifically
> set session="true" in their headers, but such a patch might be very
> far-reaching.
>

I wonder whether this is already possible to do using
"jsp-property-group" + "include-prelude" in web.xml.

Just saying.

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233740-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 23 21:36:04 2012
Return-Path: <users-return-233740-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A23429FBB
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 23 Apr 2012 21:36:04 +0000 (UTC)
Received: (qmail 24829 invoked by uid 500); 23 Apr 2012 21:36:01 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 24673 invoked by uid 500); 23 Apr 2012 21:36:01 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 24664 invoked by uid 99); 23 Apr 2012 21:36:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 21:36:01 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [217.146.183.219] (HELO nm2.bullet.mail.ukl.yahoo.com) (217.146.183.219)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 23 Apr 2012 21:35:54 +0000
Received: from [217.146.183.212] by nm2.bullet.mail.ukl.yahoo.com with NNFMP; 23 Apr 2012 21:35:33 -0000
Received: from [217.146.183.122] by tm5.bullet.mail.ukl.yahoo.com with NNFMP; 23 Apr 2012 21:35:33 -0000
Received: from [127.0.0.1] by smtp111.mail.ukl.yahoo.com with NNFMP; 23 Apr 2012 21:35:33 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.es; s=s1024; t=1335216933; bh=CjZOWm62NDpVle4xtMooE7HzuJpcctom+1R5NgxexMo=; h=X-Yahoo-Newman-Id:X-Yahoo-Newman-Property:X-YMail-OSG:X-Yahoo-SMTP:Received:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding:X-Antivirus:X-Antivirus-Status; b=dDhkftL7rHJJBmr9p/W4Ou3512dovYIsSnC/gsBSw4+8qW43svETwgWO+H0qt2u6odM7B+nysdsMrpHUQmF5xbkFz5XLb8RJjIlr903Wa7NGo1k4nej/RncObdXq+Pj1X7vMKCgE6kSMPxddm5Tt+yb4VUEgcOgAT1xvSL/Yr4g=
X-Yahoo-Newman-Id: 553587.77272.bm@smtp111.mail.ukl.yahoo.com
X-Yahoo-Newman-Property: ymail-3
X-YMail-OSG: .gDrOvgVM1nDQTtQeOtj8LYgNs8Fs8ar0jQr1F0iowbMRwB
 8geRVF3h5HbsXvLt3XWdPEy4imnXAZwPkKDdWjd_LDHIkmiofeF1F1A.fHIu
 BrIsksuVQ4Qbisldi15sWJScEngomqqroEm4S7C4aoxKZCtnWX6e84uJuczr
 tkhMrmplz1vRh44Lk3xAdYmpu9.sesmr67NfzHZQelmaazictVq8gxfcuc3I
 twVxYJhPvT29fiB2aMFU_jl400DFduCCq3kB9eW7GAVPibnJxowfKBsjiJ8q
 nAXZH_Hz20ypoQgyuOIS7oBnfd9OsmO6Eg0dU224MD5VKitmMKmVildDis6O
 SC.73kxF6UYYaOdt9G1Tc4uZFhhtJ_UdUwHtzOWCxsb23I73iayyfdd8Oo14
 OEHniE384RpDrBp_5Z_X1uCRr31t9BDvwlsszTnpHDdNZIhUlxUmMmxPSnhk
 A5H.Q_osyiqi3nm0h1YkDHKU.g4GvR5sLXMZNnJ8EEe_6Eyi5AVoDe5wB8Aw
 TeKVf8lvzsqWZsDFQClk3D5d5WmlGncX_IK_Fbinmczs-
X-Yahoo-SMTP: 4morDKeswBDE3lIuzd.cm_qbJNxlcsznEWqdK4MN
Received: from [127.0.0.1] (miguel_3_gonzalez@85.49.216.142 with plain)
        by smtp111.mail.ukl.yahoo.com with SMTP; 23 Apr 2012 14:35:33 -0700 PDT
Message-ID: <4F95CB23.5070803@yahoo.es>
Date: Mon, 23 Apr 2012 23:35:31 +0200
From: =?UTF-8?B?TWlndWVsIEdvbnrDoWxleiBDYXN0YcOxb3M=?= <miguel_3_gonzalez@yahoo.es>
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Javamelody and Struts
References: <CBB234E5.2AAB3%darryl.lewis@unsw.edu.au> <4F95B427.9040400@yahoo.es> <4F95B4C9.9010802@christopherschultz.net> <4F95C2F3.9040307@yahoo.es>
In-Reply-To: <4F95C2F3.9040307@yahoo.es>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Antivirus: avast! (VPS 120423-0, 23/04/2012), Outbound message
X-Antivirus-Status: Clean

On 23/04/2012 23:00, Miguel Gonzlez Castaos wrote:
>> Have you imported all of the "intermediate" certificates from
>> VeriSign. I think that for some SSL certificates, you need *two*
>> intermediate certificates from VeriSign.
> No, I didn't know that I had to do that. Where can I download those 
> intermediate certificates?
>
> Many thanks for the hint
I found them here I believe

http://www.verisign.com/support/verisign-intermediate-ca/secure-site-intermediate/index.html

I will give it a try

Miguel

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233741-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 23 21:43:21 2012
Return-Path: <users-return-233741-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 806E89622
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 23 Apr 2012 21:43:21 +0000 (UTC)
Received: (qmail 64858 invoked by uid 500); 23 Apr 2012 21:43:15 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 64793 invoked by uid 500); 23 Apr 2012 21:43:15 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 64760 invoked by uid 99); 23 Apr 2012 21:43:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 21:43:15 +0000
X-ASF-Spam-Status: No, hits=-0.4 required=5.0
	tests=PLING_QUERY,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of knst.kolinko@gmail.com designates 209.85.213.45 as permitted sender)
Received: from [209.85.213.45] (HELO mail-yw0-f45.google.com) (209.85.213.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 21:43:09 +0000
Received: by yhoo21 with SMTP id o21so7885yho.18
        for <users@tomcat.apache.org>; Mon, 23 Apr 2012 14:42:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=BIdYn6FZQmXh+aL6f4T7ivQQv77DrqNu0uGpG25OsBM=;
        b=ejxu9sqNeefLgKYLp8j98L6Ztta8vr8a1fsTlFXYK7hpCF7MNzAvMJ1DqsuZxFcPXC
         ThWBESwOvC0XOWmpCShoOkMxEIdbEGy8h43IAtpR8kXKnLePc8ddsWSFcY4Me4nnHg+q
         u5YfGdooI2d6NF7rY7Av1qecXryyHzkjq6Ym2tY8XIs9YHtJDYvfIQDFwY68NRvyMs1l
         neGfs49/CTBZ7MosNphk8ke0M/mihYB7PDpfsX5eC4tqaZZEtQhL3OMiniwWdA/L++6R
         hXwIqR88ICzjG2y+dVuDvl3h1temx9mHI4uDqXyCgNTXVXk4VAXBTR3lzfOiTWykXXbu
         Kcnw==
MIME-Version: 1.0
Received: by 10.236.185.138 with SMTP id u10mr11650911yhm.106.1335217368572;
 Mon, 23 Apr 2012 14:42:48 -0700 (PDT)
Received: by 10.146.161.7 with HTTP; Mon, 23 Apr 2012 14:42:48 -0700 (PDT)
In-Reply-To: <BLU162-ds18A7C7212CC0796A7F5EB1D3210@phx.gbl>
References: <BLU162-ds18A7C7212CC0796A7F5EB1D3210@phx.gbl>
Date: Tue, 24 Apr 2012 01:42:48 +0400
Message-ID: <CABzHfVkFw+Oycr8n2Xtchz=bX5ZL2hJSVsULcupo9TJ6xSNfgA@mail.gmail.com>
Subject: Re: catalina.out file is growing very rapidly! How to prevent
 Hibernate's INFO and DEBUG statements from getting added to catalina.out file?
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

2012/4/23 Dilip Shah <dilipvshah@hotmail.com>:
> ok, the issue is resolved!
>
> Konstantin,
> Your observation that output in catalina.out in Linux Live environment is
> different from console output in my Windows development environment
> and
> your statement "You have some mess in your common/lib"
> prompted me to compare jar files in both the environments.
> Just to check, I replaced entire content of common/lib on the Live server
> with the content from Development environment and voila... it worked! No
> more unwanted INFO and DEBUG statements in catalina.out! Thanks you very
> very much!
>
> I spent some more time to find out who the culprit was. I had the followi=
ng
> files from Xuggler (video manipulation library) =A0build I had done on th=
e
> CentOS server a couple of years ago in the Live server's common/lib folde=
r:
> * slf4j-api.jar
> * logback-classic.jar
> * logback-core.jar
>
> Even though I had these these jar files for the last couple of years, I
> didn't encounter any issues but it looks like the last changes to my
> application 'triggered' these new INFO and DEBUG statements in catalina.o=
ut.
> I suspect that Spring's @Autowired, @JsonIgnore =A0starts adding this INF=
O and
> DEBUG statements when you have this particular version of slf4j-api.jar a=
nd
> the other 2 jar files mentioned above.
>
> It's still a bit mysterious to me but I'm going to spent my time and effo=
rt
> on moving application related jar files out of Tomcat's common/lib to the
> application's WEB-INF/lib and then on upgrading to Tomcat 7
>
> I really appreciate all the help I got in helping me solve this issue. I
> haven't seen this level of participation and received this level of suppo=
rt
> in any other forums I have interacted with over the last 3-4 years!
>

(As I mentioned previously) SLF4J is yet another logging framework
that you have in your configuration. It is a competitor of Apache
Commons Logging, a facade for log4j or other logging framework.

http://www.slf4j.org/

It is explained on their site about that "Class path contains multiple
SLF4J bindings." warning that when several conflicting implementations
for slf4j are available, the first found wins.

The first one mentioned is logback-classic.jar

http://logback.qos.ch/

Logback is yet another logging framework, at the level of log4j.
You have no configuration file for it, so apparently what you get is
its default configuration.
(Just from code it seems that their root Logger has level of DEBUG by defau=
lt).


Maybe you started to use classes that depend on slf4j and thus the
library had to initialize itself.

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233742-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 23 21:44:37 2012
Return-Path: <users-return-233742-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 457EF96B2
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 23 Apr 2012 21:44:37 +0000 (UTC)
Received: (qmail 72418 invoked by uid 500); 23 Apr 2012 21:44:33 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 72364 invoked by uid 500); 23 Apr 2012 21:44:33 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 72355 invoked by uid 99); 23 Apr 2012 21:44:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 21:44:33 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of cjderham@gmail.com designates 209.85.217.173 as permitted sender)
Received: from [209.85.217.173] (HELO mail-lb0-f173.google.com) (209.85.217.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 Apr 2012 21:44:26 +0000
Received: by lboi15 with SMTP id i15so9682lbo.18
        for <users@tomcat.apache.org>; Mon, 23 Apr 2012 14:44:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:reply-to:sender:in-reply-to:references:from:date
         :x-google-sender-auth:message-id:subject:to:content-type;
        bh=sorUERLILsUisRe5RXe+VtqMc24yVbttrpbknEdB/Uk=;
        b=rAInmlnlBNHJMgaBt/MaUza+PrEm+4wkMVSsdXunQkzuxSjlCRwZicxftjKmlNhmBB
         /+ujjcpRj5IkndPpm4YsTb9+xr8r/JY5QcQ94kAmA49Pu/RCjYct+FA5wSyJTlZbqq9t
         RcHeL1ZmUCzIMzPNizM0hTvcBlrb4ogghvzrIzaL8g0gLWazuzIPHedY0tPC4YV1010k
         vH2PeT0Deee8uM4FDdTBG7SN/7bzpN6itiywJpXogLD7Xh8ZrWU3phbeDRHUehG76ri+
         oHLsKnJ4uCUeeFTQ7KoVUUOysUPqvmjrJDIKDBVTMDTI6L5KmRWMk6OFDcpm4nQjVQTG
         UnTQ==
Received: by 10.152.148.101 with SMTP id tr5mr5212313lab.36.1335217445627;
 Mon, 23 Apr 2012 14:44:05 -0700 (PDT)
MIME-Version: 1.0
Reply-To: chris@derham.me.uk
Sender: cjderham@gmail.com
Received: by 10.112.117.37 with HTTP; Mon, 23 Apr 2012 14:43:45 -0700 (PDT)
In-Reply-To: <4F95B55D.9050606@christopherschultz.net>
References: <CAG6aRdX7aA9J8RZ1OAhyUQCayi2D2E=_9FJryTH4Z1v7dDSosw@mail.gmail.com>
 <4F8F1EEB.2070000@apache.org> <CAG6aRdXuMWqvXLTv=M=-YNQzxX8LQLiTYyoYtUoUCQF32Ln-yQ@mail.gmail.com>
 <4F903E4B.3090603@christopherschultz.net> <4F92DA1E.7080000@apache.org>
 <4F956329.4060003@christopherschultz.net> <4F9576EC.5060508@apache.org> <4F95B55D.9050606@christopherschultz.net>
From: chris derham <chris@derham.me.uk>
Date: Mon, 23 Apr 2012 18:43:45 -0300
X-Google-Sender-Auth: kt-CT0dDEUk2D1iCB07UbOgPIR0
Message-ID: <CAG6aRdUny40_+b7bQjRSuKvjZinpgC9-5piart3Uh6XVPvkHLw@mail.gmail.com>
Subject: Re: 64bit windows mod_jk connector download for apache httpd 2.4
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=e89a8f22c6638b68ee04be5f8911

--e89a8f22c6638b68ee04be5f8911
Content-Type: text/plain; charset=ISO-8859-1

>
> > Exactly. Might be better to come from "userland"
>
> +1
>

I have emailed the apache lounge contact email asking if they would
consider including a build of mod_jk - lets see what happens

Thanks

Chris

--e89a8f22c6638b68ee04be5f8911--

From users-return-233743-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 24 01:51:08 2012
Return-Path: <users-return-233743-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8712C95BC
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 24 Apr 2012 01:51:08 +0000 (UTC)
Received: (qmail 40090 invoked by uid 500); 24 Apr 2012 01:51:05 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 40001 invoked by uid 500); 24 Apr 2012 01:51:04 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 39992 invoked by uid 99); 24 Apr 2012 01:51:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2012 01:51:04 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pid@pidster.com designates 74.125.82.173 as permitted sender)
Received: from [74.125.82.173] (HELO mail-we0-f173.google.com) (74.125.82.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2012 01:50:58 +0000
Received: by werp12 with SMTP id p12so114216wer.18
        for <users@tomcat.apache.org>; Mon, 23 Apr 2012 18:50:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type;
        bh=G4f35rCHwOMZ3yUU+IhrSKdSD0EMMGuk6PDcH6KGKI0=;
        b=FbJDxWj8/GgHU8JLvha18knHsKUB44cHv/+1diHw8g52JuDKHYk3IwxxlGgsJ/n35f
         sFISzYcx7xdKkIifN+z23B6PtDLzw4Jmo+vbnO3wDhtwTMjqiTgL4U85eZfA4LqgkZID
         jvLWpmUM1psVL/adJaxbl1y+52Fy42/eLwrRY=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type:x-gm-message-state;
        bh=G4f35rCHwOMZ3yUU+IhrSKdSD0EMMGuk6PDcH6KGKI0=;
        b=fiA0QwP9Ji8gQq0Q7ON+W4U9Gk85C8b1YCi9OWNgOyELlokmDPrS4jxG7zM2AzukpJ
         7U7okM9Xd2pCiMYTaL1ljNECDD5kaElhNVV+EHc0bjj6eYM4/6zm0bCUbvhJ/SQHCGlU
         eAlDTVXbGpcR6AYQxspbirRKsyOy4MqFKf+eyJ9/tcHyWxdHv74ZFtVFbdYidsyBFd+g
         G79g50KIyPR11Sg6/qixPEM0JiNtM2A2HsLWTgIGfSvrt17edBiRNO7Qh9X6uv+fyOmQ
         EvJqIfE56T59TjwGlPtQrlMikQGtJ7NHkNtIwdGL5Lq/18bq1aJcS2AZVQj2jjhBlivD
         SnIA==
Received: by 10.180.87.106 with SMTP id w10mr26599917wiz.2.1335232235192;
        Mon, 23 Apr 2012 18:50:35 -0700 (PDT)
Received: from Asura.local (cpc10-lewi14-2-0-cust355.2-4.cable.virginmedia.com. [82.4.249.100])
        by mx.google.com with ESMTPS id o2sm41297244wiv.11.2012.04.23.18.50.33
        (version=SSLv3 cipher=OTHER);
        Mon, 23 Apr 2012 18:50:34 -0700 (PDT)
Message-ID: <4F9606E5.5070100@pidster.com>
Date: Tue, 24 Apr 2012 02:50:29 +0100
From: Pid <pid@pidster.com>
Organization: Pidster Inc
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: parallel deployment activation of new version
References: <15D3435601304A49A5E13D0825711B6128CC5706@EXCHANGE07.webde.local>  <c9852e00-8f22-4a9a-99b7-7543ab14d743@email.android.com>  <15D3435601304A49A5E13D0825711B6128CC570C@EXCHANGE07.webde.local>  <efd47547-82e2-4d89-b0e3-76747acb8a6c@email.android.com>  <15D3435601304A49A5E13D0825711B6128CC5740@EXCHANGE07.webde.local>  <4F903B82.6080508@christopherschultz.net> <1335110109.8682.4.camel@meierpad.localdomain> <4F9561F2.3050702@christopherschultz.net>
In-Reply-To: <4F9561F2.3050702@christopherschultz.net>
X-Enigmail-Version: 1.4
OpenPGP: id=62590808
Content-Type: multipart/signed; micalg=pgp-sha512;
 protocol="application/pgp-signature";
 boundary="------------enig93A6B41BD49C06310603F3DE"
X-Gm-Message-State: ALoCoQlmcgd0UIp8iJg9gxyVjbDB1sivBbhWpWZLxKs4YiwXqYr2qiyLoxpqbGqw9/la2l0tDl8U
X-Virus-Checked: Checked by ClamAV on apache.org

--------------enig93A6B41BD49C06310603F3DE
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On 23/04/2012 15:06, Christopher Schultz wrote:
> Christoph,
>=20
> On 4/22/12 11:55 AM, Christoph Maser wrote:
>> Chris,
>=20
>> Am Donnerstag, den 19.04.2012, 18:21 +0200 schrieb Christopher
>> Schultz:
>>> Christoph,
>>>
>>> What about the webapp itself performing its own health-check as a
>>> last step of deployment, and throwing an exception (thereby
>>> preventing Tomcat from bringing it into service) if things aren't
>>> in working order?
>=20
>> this is the obvious way to do it as it is now. As I said before
>> that way one looses the access to the wapps status pages.
>=20
> So you want the webapp both up (for status) and down (for traffic) at
> the same time? Tomcat certainly can't manage that for you.
>=20
> If you need "status" on a failed-deployment, why not dump it to a file
> or something like that?

Or use JMX rather than HTTP to acquire status information.


p



--=20

[key:62590808]


--------------enig93A6B41BD49C06310603F3DE
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.18 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iQIcBAEBCgAGBQJPlgboAAoJEGoM2OGpOvr9zxAQAIH1V1pwAXeooLpt4mlBOzJ3
WnYyrZrVGx/cXcdqdThdIJcvBvdGi4ehBt52plHRJteuQ8YXtzX47lIqcY6BLJcr
TTiMs183mgHtUPnXXMar+Aw4lPuZNc0uOSf/TXtHVmBbm1fcZE3YgxjpGoR2KMXt
sztUhABC7CiNMlzBC6ngr7c89sOT2hddpgzWWAZD1OWG1753adVZozG9gmF71V1U
31XrSyPYmUI1l4aKGUPwaW5bi6axt7psrdZqrjCG35b0SOt44J4RLa5KoD0hhQWl
QVFqQFC7oezubEMkB6/eoErXbUejFuc4T0ZhxyTki2i/XN59CgoTOq8AMoaIFqTf
ibUrbx+XjsaZwRf6p5EpmeItUVUhHNG+dIid3d/E4G3nNTc5WgqSjStOTPV6V8BI
kV43D/OODNifocVqCECfieMs6hhzPqR+CXXIiHk5wuUuqlHT9kh2Iv5k5DqUz2Hq
znBWfcWDqROCLX82ziSksWXtqFQVRPQ7RTHUJctZ/LT/9LpS+rURw2R7PjIwXh34
6ZIhpLvkUiLWphpdfI1b6MM3fh7Sd642Io9kQswPNrxNVvkcZbmx/YXKGU5QL3p9
uY6jy1nfCobgI4VR73guekNWOBtW+ZrVbqvW0GKlhiCr0gr+XzAQ++uPxj1Idv+B
iySMgJW85tm9+YRSssw9
=GG/Y
-----END PGP SIGNATURE-----

--------------enig93A6B41BD49C06310603F3DE--

From users-return-233744-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 24 05:57:30 2012
Return-Path: <users-return-233744-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 39A8F9809
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 24 Apr 2012 05:57:30 +0000 (UTC)
Received: (qmail 77929 invoked by uid 500); 24 Apr 2012 05:57:26 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 77836 invoked by uid 500); 24 Apr 2012 05:57:24 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 77809 invoked by uid 99); 24 Apr 2012 05:57:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2012 05:57:23 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of afkham@gmail.com designates 74.125.82.173 as permitted sender)
Received: from [74.125.82.173] (HELO mail-we0-f173.google.com) (74.125.82.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2012 05:57:18 +0000
Received: by werp12 with SMTP id p12so224341wer.18
        for <users@tomcat.apache.org>; Mon, 23 Apr 2012 22:56:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=0IiKB6dMyx5kc1G20F734htdHrEZ36G1taHyzAOI8u4=;
        b=oxuWjoRcOOZ8uTr0/ml1TlU7BMzHN/BMBur2jigvwRTlrfn+8dU7Du5zmhVcxUUoNt
         MAturIfCgcP+wRfLgHKBGC/ggX23Fe9yLTg58y3dnAyqrkYI8kpR+LVNSqFKVp7zrmzF
         b6fwIGOozzhsH5Fizfhkwqkia0pv0/PMBXWswlH1C+3iBkCaTZuilGr4HKyPCMZPbCaW
         TOQcmstWInXaWoS7pBZPIx741FE553Ukp08rjTjrY8iUl3mP7cLpx0lhN0n1HZI5SHVr
         FA4gl3Jee9XD6V3h5ndgxbF+FYFqXPXrwuimC86bvgqXVo2DIjkSLu5GgzznnnAtM91c
         Yo9A==
Received: by 10.180.104.137 with SMTP id ge9mr27692856wib.20.1335247016963;
 Mon, 23 Apr 2012 22:56:56 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.180.104.199 with HTTP; Mon, 23 Apr 2012 22:56:36 -0700 (PDT)
In-Reply-To: <65775494-0122-4ceb-84e1-759c916ad481@arizona.hanik.com>
References: <CAG7MYhmkZvk7Nfk9L--jnoOevDv0XnhNYuiLZz2+MPr4iHM3kQ@mail.gmail.com>
 <65775494-0122-4ceb-84e1-759c916ad481@arizona.hanik.com>
From: Afkham Azeez <afkham@gmail.com>
Date: Tue, 24 Apr 2012 11:26:36 +0530
Message-ID: <CAG7MYh=itrdWHsSPt6Nhfy6ePUec+1G+HQ-Ztn6d7iY3NJOrww@mail.gmail.com>
Subject: Re: Tribes coordinator
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=f46d04182638222f5a04be666cf2
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d04182638222f5a04be666cf2
Content-Type: text/plain; charset=ISO-8859-1

Thanks for the pointers Filip. I will take a look.

On Mon, Apr 23, 2012 at 9:12 PM, Filip Hanik Mailing Lists <
devlists@hanik.com> wrote:

>
> http://tomcat.apache.org/tomcat-7.0-doc/api/org/apache/catalina/tribes/group/interceptors/package-summary.html
>
> Take a look at SimpleCoordinator and NonBlockingCoordinator
>
> Equally simple to implement your own based on the requirement you have for
> leader election.
>
> It does depend on what you need leader ship for, sometimes, like virtual
> synchrony, leaders are used to determine atomic delivery of a message to an
> entire group. Either the entire group gets it, or doesn't.
>
> Filip
>
> ----- Original Message -----
> > From: "Afkham Azeez" <afkham@gmail.com>
> > To: "Tomcat Users List" <users@tomcat.apache.org>
> > Sent: Monday, April 23, 2012 6:38:31 AM
> > Subject: Tribes coordinator
> >
> > We are using Tribes in Axis2. In a cluster, we want to have leader
> > election, and one member to be designated as the coordinator. How can
> > this
> > be achieved using Tribes?
> >
> > Thanks
> > Azeez
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>
>

--f46d04182638222f5a04be666cf2--

From users-return-233745-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 24 07:40:46 2012
Return-Path: <users-return-233745-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 62F5A98B2
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 24 Apr 2012 07:40:46 +0000 (UTC)
Received: (qmail 20363 invoked by uid 500); 24 Apr 2012 07:40:42 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 20121 invoked by uid 500); 24 Apr 2012 07:40:37 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 20092 invoked by uid 99); 24 Apr 2012 07:40:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2012 07:40:36 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ironclawhand@hotmail.com designates 65.55.34.87 as permitted sender)
Received: from [65.55.34.87] (HELO col0-omc2-s13.col0.hotmail.com) (65.55.34.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2012 07:40:29 +0000
Received: from COL113-W60 ([65.55.34.71]) by col0-omc2-s13.col0.hotmail.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Tue, 24 Apr 2012 00:40:08 -0700
Message-ID: <COL113-W60DD7E57142510B66954F4CF260@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_a0d12618-9308-404f-9f53-aa482eb6ed62_"
X-Originating-IP: [194.176.105.144]
From: ironclaw hand <ironclawhand@hotmail.com>
To: <users@tomcat.apache.org>
Subject: RE: Mod_jk returning source code of jsp files
Date: Tue, 24 Apr 2012 08:40:08 +0100
Importance: Normal
In-Reply-To: <4F957500.7070801@ice-sa.com>
References:
 <COL113-W248A31965DC681CB4DA9BACF210@phx.gbl>,<CAAKASGwj8CegxJh_3GHPtVo1ABCeHxzadEHaZ6Janag4z9EaBA@mail.gmail.com>,<COL113-W44B1E7156B779CB03139C0CF210@phx.gbl>,<CAAKASGwaSYN2=Lsi1Wi9mj7m9+rjKvCJcqYSh-DPBJrcXnYP0A@mail.gmail.com>
 <COL113-W54359168808CAD3842C8A6CF210@phx.gbl>,<4F956150.6050705@christopherschultz.net>
 <COL113-W1267B3596B51C8C14E51F2CF210@phx.gbl>,<4F957500.7070801@ice-sa.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 24 Apr 2012 07:40:08.0858 (UTC) FILETIME=[793C67A0:01CD21ED]
X-Virus-Checked: Checked by ClamAV on apache.org

--_a0d12618-9308-404f-9f53-aa482eb6ed62_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Ok thanks for the reply and the points are taken on board but as I said bef=
ore I havent actually done this before and I am initially trying to get it =
to work as the existing system does (using the config files from the curren=
t installation).

I know in an ideal world your suggestion would be best but I was just asked=
 to install current versions of apache=2C tomcat and mod_jk and get it all =
to work and I was given some existing config files=2C as said I have never =
done this before so initially I would actually like to get mod_jk working s=
o that I can actually see the java code getting executed and the dynamic co=
ntent returned.

I dont think the overhead of tomcat serving static pages is the reason apac=
he is installed on these machines=2C I think it is because of the load bala=
ncing as there are a number of machines with Tomcat installed on them that =
will be in the load although initially I am only trying to get apache to di=
rect to a tomcat on local host.

I was looking for some help understanding why mod_jk  doesnt work for me=2C=
 surely this cant be related to the security issues you mentioned?

> Date: Mon=2C 23 Apr 2012 17:28:00 +0200
> From: aw@ice-sa.com
> To: users@tomcat.apache.org
> Subject: Re: Mod_jk returning source code of jsp files
>=20
> ironclaw hand wrote:
> > Thanks Christopher I will address the security issues if I am actually =
able to get mod_jk to execute a jsp!
>=20
> No.  You should do things right first=2C in a secure way.  And then=2C wh=
en it works=2C you can=20
> start "optimising" carefully and step by step=2C and try not to introduce=
 security holes=20
> while doing so.
> I put "optimise" between quotes here=2C because what you are apparently t=
rying is not much=20
> of an optimisation=2C while it IS creating security issues (and confusing=
 things).  It would=20
> be better to let Tomcat serve all your content=2C including the static pa=
ges that are inside=20
> your webapp directory anyway.  This way=2C you will not compromise whatev=
er access security=20
> is implemented at the Tomcat side=2C and the overhead of having Tomcat se=
rve those static=20
> pages is measured in microseconds at worst.
>=20
> >=20
> > I have now removed everything from mod_jk.conf except for the global di=
rectives and I now have my httpd.conf looking like:
> >=20
> > #
> > # JK for connections to Tomcat
> > #
> > LoadModule jk_module modules/mod_jk.so
> > Include /etc/httpd/conf/mod_jk.conf
> >=20
> > <IfModule jk_module>
> > JkWorkersFile /etc/httpd/conf/workers.properties
> > JkLogFile     /var/log/httpd/mod_jk.log
> > JkLogLevel info
> >=20
>=20
> remove from here
>=20
> > Alias /sft "/var/webapps/sft"
> >=20
> > <Directory "/var/webapps/sft">
> >  Options Indexes FollowSymLinks
> > </Directory>
> >=20
> > <Location "/sft/WEB-INF/">
> >    AllowOverride None
> >    deny from all
> > </Location>
> >=20
> until here
>=20
>  > </IfModule>
>=20
> >=20
> > ##
> > ## SSL Virtual Host Context
> > <VirtualHost sfta.a.b.c:443>   =20
>=20
> change this
>=20
> > JkMount /sft/* loadbalancer
> > JkUnMount /*.html loadbalancer
>=20
> to this
>=20
> JkMount /sft loadbalancer
> JkMount /sft/* loadbalancer
>=20
>=20
> > </VirtualHost>
> >=20
> > I still get the jsp file returned as text=20
>=20
> which means that Apache is serving them=2C not Tomcat.
>=20
> so I obviously still have problems and initially I would just like to get=
 apache to invoke=20
> mod_jk and return me the dynamic content.
>=20
> And let it first return the static content as well=2C since it is anyway =
located in your=20
> webapps directory.
>=20
> One could also question why you are using the term (or name) "loadbalance=
r" above=2C since=20
> all your content seems to be on the same host anyway.  Do you really have=
 one httpd and=20
> several Tomcat's ?
>=20
> ---------------------------------------------------------------------
> To unsubscribe=2C e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands=2C e-mail: users-help@tomcat.apache.org
>=20
 		 	   		  =

--_a0d12618-9308-404f-9f53-aa482eb6ed62_--

From users-return-233746-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 24 08:00:38 2012
Return-Path: <users-return-233746-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B9F5190F2
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 24 Apr 2012 08:00:38 +0000 (UTC)
Received: (qmail 69072 invoked by uid 500); 24 Apr 2012 08:00:35 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 68659 invoked by uid 500); 24 Apr 2012 08:00:31 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 68612 invoked by uid 99); 24 Apr 2012 08:00:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2012 08:00:29 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ironclawhand@hotmail.com designates 65.55.34.83 as permitted sender)
Received: from [65.55.34.83] (HELO col0-omc2-s9.col0.hotmail.com) (65.55.34.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2012 08:00:20 +0000
Received: from COL113-W63 ([65.55.34.71]) by col0-omc2-s9.col0.hotmail.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Tue, 24 Apr 2012 00:59:58 -0700
Message-ID: <COL113-W634AE1C545EF2F2FD4963FCF260@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_a8cfcbc4-8521-42c1-88ba-7827130335e2_"
X-Originating-IP: [194.176.105.144]
From: ironclaw hand <ironclawhand@hotmail.com>
To: <users@tomcat.apache.org>
Subject: RE: Mod_jk returning source code of jsp files
Date: Tue, 24 Apr 2012 08:59:58 +0100
Importance: Normal
In-Reply-To: <COL113-W60DD7E57142510B66954F4CF260@phx.gbl>
References:
 <COL113-W248A31965DC681CB4DA9BACF210@phx.gbl>,<CAAKASGwj8CegxJh_3GHPtVo1ABCeHxzadEHaZ6Janag4z9EaBA@mail.gmail.com>,<COL113-W44B1E7156B779CB03139C0CF210@phx.gbl>,<CAAKASGwaSYN2=Lsi1Wi9mj7m9+rjKvCJcqYSh-DPBJrcXnYP0A@mail.gmail.com>,<COL113-W54359168808CAD3842C8A6CF210@phx.gbl>,<4F956150.6050705@christopherschultz.net>,<COL113-W1267B3596B51C8C14E51F2CF210@phx.gbl>,<4F957500.7070801@ice-sa.com>,<COL113-W60DD7E57142510B66954F4CF260@phx.gbl>
MIME-Version: 1.0
X-OriginalArrivalTime: 24 Apr 2012 07:59:58.0968 (UTC) FILETIME=[3E98C780:01CD21F0]

--_a8cfcbc4-8521-42c1-88ba-7827130335e2_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Hi Andre=2C

I tried your suggestions but apache is still serving the content plus the W=
EB-INF directory is now available via the URL. I am only trying to get this=
 set up on one machine initially as I said in my earlier message but the re=
ason the term load balancer is used is because there will actually be a num=
ber of machines running tomcat and one machine running apache and tomcat.=20

I did'nt choose this solution and I dont know why this solution was preferr=
ed and I didnt have anything to do with configuring or installing the origi=
nal set up. The machines are being replaced and I have been asked to instal=
l new versions of the software but I cannot even get this working with one =
apache and localhost tomcat.=20

> From: ironclawhand@hotmail.com
> To: users@tomcat.apache.org
> Subject: RE: Mod_jk returning source code of jsp files
> Date: Tue=2C 24 Apr 2012 08:40:08 +0100
>=20
>=20
> Ok thanks for the reply and the points are taken on board but as I said b=
efore I havent actually done this before and I am initially trying to get i=
t to work as the existing system does (using the config files from the curr=
ent installation).
>=20
> I know in an ideal world your suggestion would be best but I was just ask=
ed to install current versions of apache=2C tomcat and mod_jk and get it al=
l to work and I was given some existing config files=2C as said I have neve=
r done this before so initially I would actually like to get mod_jk working=
 so that I can actually see the java code getting executed and the dynamic =
content returned.
>=20
> I dont think the overhead of tomcat serving static pages is the reason ap=
ache is installed on these machines=2C I think it is because of the load ba=
lancing as there are a number of machines with Tomcat installed on them tha=
t will be in the load although initially I am only trying to get apache to =
direct to a tomcat on local host.
>=20
> I was looking for some help understanding why mod_jk  doesnt work for me=
=2C surely this cant be related to the security issues you mentioned?
>=20
> > Date: Mon=2C 23 Apr 2012 17:28:00 +0200
> > From: aw@ice-sa.com
> > To: users@tomcat.apache.org
> > Subject: Re: Mod_jk returning source code of jsp files
> >=20
> > ironclaw hand wrote:
> > > Thanks Christopher I will address the security issues if I am actuall=
y able to get mod_jk to execute a jsp!
> >=20
> > No.  You should do things right first=2C in a secure way.  And then=2C =
when it works=2C you can=20
> > start "optimising" carefully and step by step=2C and try not to introdu=
ce security holes=20
> > while doing so.
> > I put "optimise" between quotes here=2C because what you are apparently=
 trying is not much=20
> > of an optimisation=2C while it IS creating security issues (and confusi=
ng things).  It would=20
> > be better to let Tomcat serve all your content=2C including the static =
pages that are inside=20
> > your webapp directory anyway.  This way=2C you will not compromise what=
ever access security=20
> > is implemented at the Tomcat side=2C and the overhead of having Tomcat =
serve those static=20
> > pages is measured in microseconds at worst.
> >=20
> > >=20
> > > I have now removed everything from mod_jk.conf except for the global =
directives and I now have my httpd.conf looking like:
> > >=20
> > > #
> > > # JK for connections to Tomcat
> > > #
> > > LoadModule jk_module modules/mod_jk.so
> > > Include /etc/httpd/conf/mod_jk.conf
> > >=20
> > > <IfModule jk_module>
> > > JkWorkersFile /etc/httpd/conf/workers.properties
> > > JkLogFile     /var/log/httpd/mod_jk.log
> > > JkLogLevel info
> > >=20
> >=20
> > remove from here
> >=20
> > > Alias /sft "/var/webapps/sft"
> > >=20
> > > <Directory "/var/webapps/sft">
> > >  Options Indexes FollowSymLinks
> > > </Directory>
> > >=20
> > > <Location "/sft/WEB-INF/">
> > >    AllowOverride None
> > >    deny from all
> > > </Location>
> > >=20
> > until here
> >=20
> >  > </IfModule>
> >=20
> > >=20
> > > ##
> > > ## SSL Virtual Host Context
> > > <VirtualHost sfta.a.b.c:443>   =20
> >=20
> > change this
> >=20
> > > JkMount /sft/* loadbalancer
> > > JkUnMount /*.html loadbalancer
> >=20
> > to this
> >=20
> > JkMount /sft loadbalancer
> > JkMount /sft/* loadbalancer
> >=20
> >=20
> > > </VirtualHost>
> > >=20
> > > I still get the jsp file returned as text=20
> >=20
> > which means that Apache is serving them=2C not Tomcat.
> >=20
> > so I obviously still have problems and initially I would just like to g=
et apache to invoke=20
> > mod_jk and return me the dynamic content.
> >=20
> > And let it first return the static content as well=2C since it is anywa=
y located in your=20
> > webapps directory.
> >=20
> > One could also question why you are using the term (or name) "loadbalan=
cer" above=2C since=20
> > all your content seems to be on the same host anyway.  Do you really ha=
ve one httpd and=20
> > several Tomcat's ?
> >=20
> > ---------------------------------------------------------------------
> > To unsubscribe=2C e-mail: users-unsubscribe@tomcat.apache.org
> > For additional commands=2C e-mail: users-help@tomcat.apache.org
> >=20
>  		 	   		 =20
 		 	   		  =

--_a8cfcbc4-8521-42c1-88ba-7827130335e2_--

From users-return-233747-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 24 08:41:12 2012
Return-Path: <users-return-233747-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0064F9A88
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 24 Apr 2012 08:41:12 +0000 (UTC)
Received: (qmail 62330 invoked by uid 500); 24 Apr 2012 08:41:08 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 62047 invoked by uid 500); 24 Apr 2012 08:41:02 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 61974 invoked by uid 99); 24 Apr 2012 08:41:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2012 08:41:01 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of afkham@gmail.com designates 74.125.82.173 as permitted sender)
Received: from [74.125.82.173] (HELO mail-we0-f173.google.com) (74.125.82.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2012 08:40:54 +0000
Received: by werp12 with SMTP id p12so344408wer.18
        for <users@tomcat.apache.org>; Tue, 24 Apr 2012 01:40:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=z7jEiHtS3lTXZIB32ls/EbJ+9Qz8Q7Ql56qY27tJTh0=;
        b=S90RFVgggLOWnMee8CVbvpTJRXjNCMoGc8YLfE4Jkw8Zve4WurZbn+Gr6T99nbj96N
         lYieosQDO2WL4UrupxyEzv/27Tu66F2Y1qY8KN4ei+UsZqNFNBTfAvRlksn/QtpW5R6T
         GquFFqP1C+EvRe8qO1HICEzaeasbRcIccMaMzyNuYs+kkhFZWpuvtWVjpHotL8Ug+NBq
         FDDE0GnNELvJBGCpfQcCqT+j1c4CXglg6Vppjz+0RdVxC41qv8p5lkpIDzqQS9kROgU2
         t2WEQin4EofqJaDYTvCU9Yy0QwD+5XOeI1eFCPoBjA1F/A+/LlmtxBrhzeKqAGeaLxkc
         mL5g==
Received: by 10.216.134.155 with SMTP id s27mr13477183wei.80.1335256749919;
 Tue, 24 Apr 2012 01:39:09 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.180.104.199 with HTTP; Tue, 24 Apr 2012 01:38:49 -0700 (PDT)
In-Reply-To: <CAG7MYh=itrdWHsSPt6Nhfy6ePUec+1G+HQ-Ztn6d7iY3NJOrww@mail.gmail.com>
References: <CAG7MYhmkZvk7Nfk9L--jnoOevDv0XnhNYuiLZz2+MPr4iHM3kQ@mail.gmail.com>
 <65775494-0122-4ceb-84e1-759c916ad481@arizona.hanik.com> <CAG7MYh=itrdWHsSPt6Nhfy6ePUec+1G+HQ-Ztn6d7iY3NJOrww@mail.gmail.com>
From: Afkham Azeez <afkham@gmail.com>
Date: Tue, 24 Apr 2012 14:08:49 +0530
Message-ID: <CAG7MYhk94vhTtVve+ZLawoxgs0ioqS+nxNKmnqv03ufqG32XTQ@mail.gmail.com>
Subject: Re: Tribes coordinator
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=001636d34cd2434e7104be68b082

--001636d34cd2434e7104be68b082
Content-Type: text/plain; charset=ISO-8859-1

Hi Filip,
I have integrated the NonBlockingCoordinator & committed to the Axis2
trunk. One thing I noticed is that even if the current coordinator is
alive, and a new member joins, it is possible for the new member to be made
the coordinator while the existing coordinator transforms into a normal
member. Is this the intended behavior? Is it possible to change the
coordinator only if the existing coordinator fails?

Thanks
Azeez

On Tue, Apr 24, 2012 at 11:26 AM, Afkham Azeez <afkham@gmail.com> wrote:

> Thanks for the pointers Filip. I will take a look.
>
>
> On Mon, Apr 23, 2012 at 9:12 PM, Filip Hanik Mailing Lists <
> devlists@hanik.com> wrote:
>
>>
>> http://tomcat.apache.org/tomcat-7.0-doc/api/org/apache/catalina/tribes/group/interceptors/package-summary.html
>>
>> Take a look at SimpleCoordinator and NonBlockingCoordinator
>>
>> Equally simple to implement your own based on the requirement you have
>> for leader election.
>>
>> It does depend on what you need leader ship for, sometimes, like virtual
>> synchrony, leaders are used to determine atomic delivery of a message to an
>> entire group. Either the entire group gets it, or doesn't.
>>
>> Filip
>>
>> ----- Original Message -----
>> > From: "Afkham Azeez" <afkham@gmail.com>
>> > To: "Tomcat Users List" <users@tomcat.apache.org>
>> > Sent: Monday, April 23, 2012 6:38:31 AM
>> > Subject: Tribes coordinator
>> >
>> > We are using Tribes in Axis2. In a cluster, we want to have leader
>> > election, and one member to be designated as the coordinator. How can
>> > this
>> > be achieved using Tribes?
>> >
>> > Thanks
>> > Azeez
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>> For additional commands, e-mail: users-help@tomcat.apache.org
>>
>>

--001636d34cd2434e7104be68b082--

From users-return-233748-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 24 09:12:10 2012
Return-Path: <users-return-233748-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DEBB49804
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 24 Apr 2012 09:12:09 +0000 (UTC)
Received: (qmail 40887 invoked by uid 500); 24 Apr 2012 09:12:06 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 40699 invoked by uid 500); 24 Apr 2012 09:12:06 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 40676 invoked by uid 99); 24 Apr 2012 09:12:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2012 09:12:05 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aw@ice-sa.com designates 212.85.38.228 as permitted sender)
Received: from [212.85.38.228] (HELO tor.combios.es) (212.85.38.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2012 09:11:55 +0000
Received: from [192.168.245.129] (p549E8CE4.dip0.t-ipconnect.de [84.158.140.228])
	by tor.combios.es (Postfix) with ESMTPA id 27AE4DA0687
	for <users@tomcat.apache.org>; Tue, 24 Apr 2012 11:11:34 +0200 (CEST)
Message-ID: <4F966E45.6040803@ice-sa.com>
Date: Tue, 24 Apr 2012 11:11:33 +0200
From: =?ISO-8859-1?Q?Andr=E9_Warnier?= <aw@ice-sa.com>
Reply-To: Tomcat Users List <users@tomcat.apache.org>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Mod_jk returning source code of jsp files
References: <COL113-W248A31965DC681CB4DA9BACF210@phx.gbl>,<CAAKASGwj8CegxJh_3GHPtVo1ABCeHxzadEHaZ6Janag4z9EaBA@mail.gmail.com>,<COL113-W44B1E7156B779CB03139C0CF210@phx.gbl>,<CAAKASGwaSYN2=Lsi1Wi9mj7m9+rjKvCJcqYSh-DPBJrcXnYP0A@mail.gmail.com> <COL113-W54359168808CAD3842C8A6CF210@phx.gbl>,<4F956150.6050705@christopherschultz.net> <COL113-W1267B3596B51C8C14E51F2CF210@phx.gbl>,<4F957500.7070801@ice-sa.com> <COL113-W60DD7E57142510B66954F4CF260@phx.gbl>
In-Reply-To: <COL113-W60DD7E57142510B66954F4CF260@phx.gbl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

ironclaw hand wrote:
> Ok thanks for the reply and the points are taken on board but as I said before I havent actually done this before and I am initially trying to get it to work as the existing system does (using the config files from the current installation).
> 
> I know in an ideal world your suggestion would be best but I was just asked to install current versions of apache, tomcat and mod_jk and get it all to work and I was given some existing config files, as said I have never done this before so initially I would actually like to get mod_jk working so that I can actually see the java code getting executed and the dynamic content returned.
> 
> I dont think the overhead of tomcat serving static pages is the reason apache is installed on these machines, I think it is because of the load balancing as there are a number of machines with Tomcat installed on them that will be in the load although initially I am only trying to get apache to direct to a tomcat on local host.
> 
> I was looking for some help understanding why mod_jk  doesnt work for me, surely this cant be related to the security issues you mentioned?
> 
Well, you are probably mistaken there.
With the current configuration, what is apparently attempted is, for some URLs, to have 
Apache httpd /not/ forwarding them to Tomcat via mod_jk, and instead having Apache httpd 
serving them directly, using a "back door" into Tomcat's webapps/sft/ directory.

This /is/ a security issue, because in this way, any security mechanism that may be in 
place at the Tomcat level to avoid delivering the wrong content, are bypassed.
That is why, from a security point of view, it is strongly recommended not to allow Apache 
to see, and serve the content of, directories whose content should be controlled by 
Tomcat.  Your Alias and <Directory> section at the Apache level do just that, so they 
create a large potential security hole, which then someone tries to plug using other 
instructions (which by the way look like they're wrong and/or incomplete).

But apart from the security issue, this scheme has further drawbacks :
- it makes things more confusing as to whom is serving what
- Tomcat "knows" that a .jsp file's content is not to be served as is.  It knows that this 
kind of file has to be "compiled" into a servlet, and that instead of delivering the 
content of the .jsp file, it should run the resulting servlet, and serve its response.
Apache httpd has no idea about that. It sees a .jsp file as just a text file, and happily 
serves its contents as is (even if the .jsp source file contained some information which a 
user should never see).
And that is exactly what you are seeing.

Something in your present configuration allows Apache to "see" these jsp's, and serve them 
directly.  It is not very clear at the moment how this happens.  In order to remove some 
potential reasons why this could happen, Chris and I showed you how to modify your 
configuration so that in the principle, it should not happen. Or at least, it should 
remove one potential way in which it could be happening, leaving us with a more 
transparent situation helping to find the real reason.

A useful tool to find out what happens is the mod_jk logfile.  Increase JkLogLevel 
gradually, until you see which URLs mod_jk is actually forwarding to Tomcat (and which 
ones it is not, and why not).

A bit of background, to understand what happens :
When mod_jk is configured within Apache httpd, it acts as a "content generator".  For 
Apache httpd, it is mod_jk itself which creates the content that is returned to the user. 
  Apache httpd has no idea that behind mod_jk, there are one or more Tomcats who actually 
do the work.
When it comes time to generate the response to a request URL, Apache passes this URL in 
turn to all configured "content generators" (one of them being mod_jk).  Each of these 
content generators gets a shot at deciding whether it wants to generate content for that 
URL, or just decline.  If the content generator declines, Apache passes the URL through 
the next content generator in the chain, to see if it does better.  The last content 
generator in the chain is the Apache builtin one, which reads the file from disk and sends 
the content back "as is".
In other words, mod_jk gets to see /every/ request URL, and gets to decide if for this 
one, it wants to pass it on to Tomcat or not.  It decides this on the base of an internal 
table it has built at server startup, on the base of the JkMount/JkUnmount instructions it 
knows about. If it decides that this URL is not for Tomcat, it returns a "declined" answer 
to Apache, and Apache proceeds to ask the next module.  If mod_jk decides to pass this 
request to Tomcat, then it does so using the AJP connection, and waits for Tomcat's 
response. When it gets the Tomcat response, it returns it to Apache (as if it had created 
it itself), along with a return code that means "here is the response, you do not need to 
call any other module anymore".

What is most probably happening in your case is one of two cases :
- either this request never makes it to the VirtualHost in which this mod_jk is activated. 
  In that case, the mod_jk log would not even show the requests for these .jsp's.
As a result, Apache defaults to handling the request with its own content generator, which 
just returns the .jsp file from disk.
- or the request makes it to the VirtualHost, and mod_jk sees it (and puts this in the 
log), but mod_jk for some reason does not find a match with the request patterns that it 
should forward to Tomcat.  The log will show you that also.
As a result, Apache also defaults to handling the request with its own content generator, 
which just returns the .jsp file from disk.

In both these cases, due to your present configuration, Apache /can/ deliver the .jsp file 
"as is", because it can see them, directly in the Tomcat webapps/sft directory.  If it 
didn't, then you'd get a 404 error when you request a /sft/*.jsp URL.


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233749-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 24 09:31:42 2012
Return-Path: <users-return-233749-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3A2AD9B5A
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 24 Apr 2012 09:31:42 +0000 (UTC)
Received: (qmail 97143 invoked by uid 500); 24 Apr 2012 09:31:38 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 96904 invoked by uid 500); 24 Apr 2012 09:31:38 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 96871 invoked by uid 99); 24 Apr 2012 09:31:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2012 09:31:37 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.173] (HELO mail-lb0-f173.google.com) (209.85.217.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2012 09:31:31 +0000
Received: by lboi15 with SMTP id i15so431201lbo.18
        for <users@tomcat.apache.org>; Tue, 24 Apr 2012 02:31:09 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=sender:message-id:from:to:references:in-reply-to:subject:date
         :mime-version:content-type:content-transfer-encoding:x-priority
         :x-msmail-priority:importance:x-mailer:x-mimeole:x-gm-message-state;
        bh=bfzXYp9W415k96YiNVq7aejHVSZG043LyrFwO9dtEkE=;
        b=jIQDjEg06Cq33lJtn4xoA1SaNCvo4gK5ZNJC5zc2ndKZIMLw8mQLHM6MBb55xrK9Uk
         9TWpqRKfdlT1haobJFAugfTeZ4qquYAA/3qeD/i7qw3F8hyNm1H/sSp+P6fj9UXYjuXy
         rzk35+qQhtpRIjPkXAuqoiwUHuN4SGPFkIYUmkwwpWyZxxNVk078znMFoqex4QpPkV4t
         jBGcYqjB+rr9sz0QpTFBNCdiz5UsszhVHhwYMh5YURbcWOidwj3XT8Pb6HkPI0jXKep/
         sz0B21cbl0v5Rcr81P52kzIwFWRDY6eQpoE0hH0xnoTvltDCQv3vlwiBGjq/ihqkw1xU
         94Iw==
Received: by 10.152.132.233 with SMTP id ox9mr2541064lab.4.1335259869067;
        Tue, 24 Apr 2012 02:31:09 -0700 (PDT)
Received: from LudwigVAIO (84-55-122-205.customers.ownit.se. [84.55.122.205])
        by mx.google.com with ESMTPS id ox7sm23423028lbb.17.2012.04.24.02.31.07
        (version=SSLv3 cipher=OTHER);
        Tue, 24 Apr 2012 02:31:07 -0700 (PDT)
Sender: Ludwig Magnusson <ludwig@itcatapult.com>
Message-ID: <5219E55047AF4F7FABF460F593B4E216@LudwigVAIO>
From: Ludwig Magnusson <ludwig@mediatool.com>
To: "Tomcat Users List" <users@tomcat.apache.org>
References: <FB8C0152D957401CA6FF8702C3FE8918@LudwigVAIO> <4F9561A3.5070000@christopherschultz.net>
In-Reply-To: <4F9561A3.5070000@christopherschultz.net>
Subject: Re: Tomcat 6.0.35 filters not invoked for error-pages
Date: Tue, 24 Apr 2012 11:31:02 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="UTF-8";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3538.513
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3538.513
X-Gm-Message-State: ALoCoQnj9EzZFW96PqmJwFUAXeg3XxXkqsohowY9yEJ8ku3k5wkimGA0mUYrpnRJtJ4uBQDC007n
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for your reply.

First of all: I have solved the acutal problem caused by this in a more 
stable way.

But out of curiosity I tried your solution and it does not work either.
this is my setup:

<servlet>
    <servlet-name>myservlet</servlet-name>
    <servlet-class>mypackage.MyServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>myservlet</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping>

<filter-mapping>
    <filter-name>myfilter</filter-name>
    <servlet-name>myservlet</servlet-name>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>FORWARD</dispatcher>
</filter-mapping>

/Ludwig

-----Ursprungligt meddelande----- 
From: Christopher Schultz
Sent: Monday, April 23, 2012 4:05 PM
To: Tomcat Users List
Subject: Re: Tomcat 6.0.35 filters not invoked for error-pages

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Ludwig,

On 4/22/12 2:26 PM, Ludwig Magnusson wrote:
> Hello. I found some strange behavour in tomcat 6.0.35 when
> declaring error-pages in my web.xml. When tomcat picks up an error
> and redirects it to the location given by the <location> element in
> <error-page>, the filters that would have been invoked for that
> location are actually not invoked.
>
> I found an almost identical report in the bug database:
> https://issues.apache.org/bugzilla/show_bug.cgi?id=49098 (the user
> had the same problem when using query strings in <location>).
> However, I do not use query strings in my locations and I still get
> the error.
>
> Is this a bug and is it known?

What does your web.xml look like?

The error page is probably treated as a FORWARD, and you'll have to
configure your filters to fire on FORWARD as well as REQUEST (the
default).

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+VYaMACgkQ9CaO5/Lv0PD4cwCff6+JoDHqehqsEtTMU471Np1+
MicAoKYezgJgAQ+0EWP71UkDFRb41nBf
=/UDF
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org 


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233750-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 24 09:52:06 2012
Return-Path: <users-return-233750-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EAFDF9127
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 24 Apr 2012 09:52:06 +0000 (UTC)
Received: (qmail 58648 invoked by uid 500); 24 Apr 2012 09:52:03 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 58568 invoked by uid 500); 24 Apr 2012 09:52:01 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 58518 invoked by uid 99); 24 Apr 2012 09:52:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2012 09:52:00 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ironclawhand@hotmail.com designates 65.55.34.80 as permitted sender)
Received: from [65.55.34.80] (HELO col0-omc2-s6.col0.hotmail.com) (65.55.34.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2012 09:51:52 +0000
Received: from COL113-W41 ([65.55.34.72]) by col0-omc2-s6.col0.hotmail.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Tue, 24 Apr 2012 02:51:32 -0700
Message-ID: <COL113-W419FE5182973F0BE03AEC1CF260@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_98f99427-7813-4822-b411-9fa4707356a0_"
X-Originating-IP: [194.176.105.144]
From: ironclaw hand <ironclawhand@hotmail.com>
To: <users@tomcat.apache.org>
Subject: RE: Mod_jk returning source code of jsp files
Date: Tue, 24 Apr 2012 10:51:32 +0100
Importance: Normal
In-Reply-To: <4F966E45.6040803@ice-sa.com>
References:
 <COL113-W248A31965DC681CB4DA9BACF210@phx.gbl>,<CAAKASGwj8CegxJh_3GHPtVo1ABCeHxzadEHaZ6Janag4z9EaBA@mail.gmail.com>,<COL113-W44B1E7156B779CB03139C0CF210@phx.gbl>,<CAAKASGwaSYN2=Lsi1Wi9mj7m9+rjKvCJcqYSh-DPBJrcXnYP0A@mail.gmail.com>
 <COL113-W54359168808CAD3842C8A6CF210@phx.gbl>,<4F956150.6050705@christopherschultz.net>
 <COL113-W1267B3596B51C8C14E51F2CF210@phx.gbl>,<4F957500.7070801@ice-sa.com>
 <COL113-W60DD7E57142510B66954F4CF260@phx.gbl>,<4F966E45.6040803@ice-sa.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 24 Apr 2012 09:51:32.0168 (UTC) FILETIME=[D40E0C80:01CD21FF]
X-Virus-Checked: Checked by ClamAV on apache.org

--_98f99427-7813-4822-b411-9fa4707356a0_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Andre=2C

Thank you for the detailed response I can see now that the config was proba=
bly never actually quite right...

I have amended the log level to debug and I now can see this in the mod_jk.=
log file:=20

[Tue Apr 24 10:45:35.203 2012] [20188:3044006768] [debug] jk_map_to_storage=
::mod_jk.c (3773): missing uri map for sfta.a.b.c:/sft/announcement.jsp
[Tue Apr 24 10:45:35.266 2012] [20287:2844699504] [debug] jk_map_to_storage=
::mod_jk.c (3773): missing uri map for sfta.a.b.c:/sft/images/sft.css
[Tue Apr 24 10:45:35.269 2012] [20188:3033516912] [debug] jk_map_to_storage=
::mod_jk.c (3773): missing uri map for sfta.a.b.c:/sft/images/logo.gif

It looks like mod_jk is receiving from apache but it doesnt know what to do=
 with the request. Is this correct? I have been reading about this and peop=
le have suggested in other forum posts to use:

JKMountCopy On -  within the virtual host directive

I have tried this and it doesnt make any difference although I am assuming =
this is because my JKMounts are actually defined within the virtual host an=
d not globally? If I run a tcpdump on port 8009 I never actually see any pa=
ckets so it never reaches tomcat again probably because of the missing uri =
map issue.

As a side note would you reccommend dropping mod_jk and using mod_proxy as =
some posts suggest?


> Date: Tue=2C 24 Apr 2012 11:11:33 +0200
> From: aw@ice-sa.com
> To: users@tomcat.apache.org
> Subject: Re: Mod_jk returning source code of jsp files
>=20
> ironclaw hand wrote:
> > Ok thanks for the reply and the points are taken on board but as I said=
 before I havent actually done this before and I am initially trying to get=
 it to work as the existing system does (using the config files from the cu=
rrent installation).
> >=20
> > I know in an ideal world your suggestion would be best but I was just a=
sked to install current versions of apache=2C tomcat and mod_jk and get it =
all to work and I was given some existing config files=2C as said I have ne=
ver done this before so initially I would actually like to get mod_jk worki=
ng so that I can actually see the java code getting executed and the dynami=
c content returned.
> >=20
> > I dont think the overhead of tomcat serving static pages is the reason =
apache is installed on these machines=2C I think it is because of the load =
balancing as there are a number of machines with Tomcat installed on them t=
hat will be in the load although initially I am only trying to get apache t=
o direct to a tomcat on local host.
> >=20
> > I was looking for some help understanding why mod_jk  doesnt work for m=
e=2C surely this cant be related to the security issues you mentioned?
> >=20
> Well=2C you are probably mistaken there.
> With the current configuration=2C what is apparently attempted is=2C for =
some URLs=2C to have=20
> Apache httpd /not/ forwarding them to Tomcat via mod_jk=2C and instead ha=
ving Apache httpd=20
> serving them directly=2C using a "back door" into Tomcat's webapps/sft/ d=
irectory.
>=20
> This /is/ a security issue=2C because in this way=2C any security mechani=
sm that may be in=20
> place at the Tomcat level to avoid delivering the wrong content=2C are by=
passed.
> That is why=2C from a security point of view=2C it is strongly recommende=
d not to allow Apache=20
> to see=2C and serve the content of=2C directories whose content should be=
 controlled by=20
> Tomcat.  Your Alias and <Directory> section at the Apache level do just t=
hat=2C so they=20
> create a large potential security hole=2C which then someone tries to plu=
g using other=20
> instructions (which by the way look like they're wrong and/or incomplete)=
.
>=20
> But apart from the security issue=2C this scheme has further drawbacks :
> - it makes things more confusing as to whom is serving what
> - Tomcat "knows" that a .jsp file's content is not to be served as is.  I=
t knows that this=20
> kind of file has to be "compiled" into a servlet=2C and that instead of d=
elivering the=20
> content of the .jsp file=2C it should run the resulting servlet=2C and se=
rve its response.
> Apache httpd has no idea about that. It sees a .jsp file as just a text f=
ile=2C and happily=20
> serves its contents as is (even if the .jsp source file contained some in=
formation which a=20
> user should never see).
> And that is exactly what you are seeing.
>=20
> Something in your present configuration allows Apache to "see" these jsp'=
s=2C and serve them=20
> directly.  It is not very clear at the moment how this happens.  In order=
 to remove some=20
> potential reasons why this could happen=2C Chris and I showed you how to =
modify your=20
> configuration so that in the principle=2C it should not happen. Or at lea=
st=2C it should=20
> remove one potential way in which it could be happening=2C leaving us wit=
h a more=20
> transparent situation helping to find the real reason.
>=20
> A useful tool to find out what happens is the mod_jk logfile.  Increase J=
kLogLevel=20
> gradually=2C until you see which URLs mod_jk is actually forwarding to To=
mcat (and which=20
> ones it is not=2C and why not).
>=20
> A bit of background=2C to understand what happens :
> When mod_jk is configured within Apache httpd=2C it acts as a "content ge=
nerator".  For=20
> Apache httpd=2C it is mod_jk itself which creates the content that is ret=
urned to the user.=20
>   Apache httpd has no idea that behind mod_jk=2C there are one or more To=
mcats who actually=20
> do the work.
> When it comes time to generate the response to a request URL=2C Apache pa=
sses this URL in=20
> turn to all configured "content generators" (one of them being mod_jk).  =
Each of these=20
> content generators gets a shot at deciding whether it wants to generate c=
ontent for that=20
> URL=2C or just decline.  If the content generator declines=2C Apache pass=
es the URL through=20
> the next content generator in the chain=2C to see if it does better.  The=
 last content=20
> generator in the chain is the Apache builtin one=2C which reads the file =
from disk and sends=20
> the content back "as is".
> In other words=2C mod_jk gets to see /every/ request URL=2C and gets to d=
ecide if for this=20
> one=2C it wants to pass it on to Tomcat or not.  It decides this on the b=
ase of an internal=20
> table it has built at server startup=2C on the base of the JkMount/JkUnmo=
unt instructions it=20
> knows about. If it decides that this URL is not for Tomcat=2C it returns =
a "declined" answer=20
> to Apache=2C and Apache proceeds to ask the next module.  If mod_jk decid=
es to pass this=20
> request to Tomcat=2C then it does so using the AJP connection=2C and wait=
s for Tomcat's=20
> response. When it gets the Tomcat response=2C it returns it to Apache (as=
 if it had created=20
> it itself)=2C along with a return code that means "here is the response=
=2C you do not need to=20
> call any other module anymore".
>=20
> What is most probably happening in your case is one of two cases :
> - either this request never makes it to the VirtualHost in which this mod=
_jk is activated.=20
>   In that case=2C the mod_jk log would not even show the requests for the=
se .jsp's.
> As a result=2C Apache defaults to handling the request with its own conte=
nt generator=2C which=20
> just returns the .jsp file from disk.
> - or the request makes it to the VirtualHost=2C and mod_jk sees it (and p=
uts this in the=20
> log)=2C but mod_jk for some reason does not find a match with the request=
 patterns that it=20
> should forward to Tomcat.  The log will show you that also.
> As a result=2C Apache also defaults to handling the request with its own =
content generator=2C=20
> which just returns the .jsp file from disk.
>=20
> In both these cases=2C due to your present configuration=2C Apache /can/ =
deliver the .jsp file=20
> "as is"=2C because it can see them=2C directly in the Tomcat webapps/sft =
directory.  If it=20
> didn't=2C then you'd get a 404 error when you request a /sft/*.jsp URL.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe=2C e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands=2C e-mail: users-help@tomcat.apache.org
>=20
 		 	   		  =

--_98f99427-7813-4822-b411-9fa4707356a0_--

From users-return-233751-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 24 11:25:43 2012
Return-Path: <users-return-233751-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5D54F97B6
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 24 Apr 2012 11:25:43 +0000 (UTC)
Received: (qmail 2327 invoked by uid 500); 24 Apr 2012 11:25:40 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 2062 invoked by uid 500); 24 Apr 2012 11:25:39 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 2038 invoked by uid 99); 24 Apr 2012 11:25:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2012 11:25:38 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aw@ice-sa.com designates 212.85.38.228 as permitted sender)
Received: from [212.85.38.228] (HELO tor.combios.es) (212.85.38.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2012 11:25:29 +0000
Received: from [192.168.245.129] (p549E8CE4.dip0.t-ipconnect.de [84.158.140.228])
	by tor.combios.es (Postfix) with ESMTPA id 8ED2FDA0777
	for <users@tomcat.apache.org>; Tue, 24 Apr 2012 13:25:07 +0200 (CEST)
Message-ID: <4F968D93.50907@ice-sa.com>
Date: Tue, 24 Apr 2012 13:25:07 +0200
From: =?ISO-8859-1?Q?Andr=E9_Warnier?= <aw@ice-sa.com>
Reply-To: Tomcat Users List <users@tomcat.apache.org>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Mod_jk returning source code of jsp files
References: <COL113-W248A31965DC681CB4DA9BACF210@phx.gbl>,<CAAKASGwj8CegxJh_3GHPtVo1ABCeHxzadEHaZ6Janag4z9EaBA@mail.gmail.com>,<COL113-W44B1E7156B779CB03139C0CF210@phx.gbl>,<CAAKASGwaSYN2=Lsi1Wi9mj7m9+rjKvCJcqYSh-DPBJrcXnYP0A@mail.gmail.com> <COL113-W54359168808CAD3842C8A6CF210@phx.gbl>,<4F956150.6050705@christopherschultz.net> <COL113-W1267B3596B51C8C14E51F2CF210@phx.gbl>,<4F957500.7070801@ice-sa.com> <COL113-W60DD7E57142510B66954F4CF260@phx.gbl>,<4F966E45.6040803@ice-sa.com> <COL113-W419FE5182973F0BE03AEC1CF260@phx.gbl>
In-Reply-To: <COL113-W419FE5182973F0BE03AEC1CF260@phx.gbl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

ironclaw hand wrote:
> Andre,
> 
> Thank you for the detailed response I can see now that the config was probably never actually quite right...
> 
> I have amended the log level to debug and I now can see this in the mod_jk.log file: 
> 
> [Tue Apr 24 10:45:35.203 2012] [20188:3044006768] [debug] jk_map_to_storage::mod_jk.c (3773): missing uri map for sfta.a.b.c:/sft/announcement.jsp
> [Tue Apr 24 10:45:35.266 2012] [20287:2844699504] [debug] jk_map_to_storage::mod_jk.c (3773): missing uri map for sfta.a.b.c:/sft/images/sft.css
> [Tue Apr 24 10:45:35.269 2012] [20188:3033516912] [debug] jk_map_to_storage::mod_jk.c (3773): missing uri map for sfta.a.b.c:/sft/images/logo.gif
> 
> It looks like mod_jk is receiving from apache but it doesnt know what to do with the request. Is this correct? 

Yes. mod_jk is looking at the URI pattern, and it does not match any pattern in the table 
which it has built on the base of its JkMount directives.  So it returns "declined" to 
Apache, and Apache proceeds to serve that URI itself, as a "blob".

Actually, the mod_jk log, at the moment your httpd server is restarted, should show the 
processing of the JkMount/jkUnmount directives, when mod_jk builds its "URI map" which it 
refers to above.

What I am not quite sure about anymore, is what the mention in the loglines above of the 
actual hostname means, It could be a function of your JkLogFormat directive, or it could 
be that these requests are actually processed by the wrong VirtualHost.
I remember that this subject has come up previously on the list, but I don't remember 
precisely in which context or when.
Maybe someone else can answer that.

If your Apache configuration is such that you have a separate access log for the different 
VirtualHosts (and one for the "main" server), then you should be able to see which 
requests go to which VirtualHost (independently of whether they are forwarded to Tomcat or 
not).

> I have been reading about this and people have suggested in other forum posts to use:
> 
> JKMountCopy On -  within the virtual host directive
> 
> I have tried this and it doesnt make any difference although I am assuming this is because my JKMounts are actually defined within the virtual host and not globally? If I run a tcpdump on port 8009 I never actually see any packets so it never reaches tomcat again probably because of the missing uri map issue.
> 

This takes us into the realm of understanding Apache's VirtualHost workings, and how 
VirtualHosts inherit or not some configuration from the "main" configuration part.
I was hoping to avoid that part...

Generally, when a configuration directive is present in the "main" part of httpd.conf, it 
acts as a default for all VirtualHosts.  That is, it is valid in (or inherited by) each 
VirtualHost, unless the <VirtualHost> section specifically overrides it.

JkMount/JkUnmount are an exception.  They are not automatically inherited.
So either you put the JkMount/JkUnmount directives directly in each <VirtualHost> section 
(as you seem to have done), or you use either one of two "tricks".

Trick #1 : in the main part of the configuration, you put the JkMount/JkUnmount 
directives, and you add a "JkMountCopy all" directive.  This causes the main 
JkMount/JkUnmount directives to be copied to *all* VirtualHosts.

Trick #2 : in the main part of the configuration, you put the JkMount/JkUnmount 
directives.  In the select VirtualHosts in which you want to inherit the main 
JkMount/JkUnmount directives, you add a "JkMountCopy on" directive.  This will copy the 
main configuration's JkMount/JkUnmount directives to *this* VirtualHost only.

Which one is best to use in your case is a matter of choice depending on your whole setup 
(how many VirtualHosts you have and how similar they are).


> As a side note would you reccommend dropping mod_jk and using mod_proxy as some posts suggest?

That is your choice of yourse.  But in my view, it is a bit like throwing out the baby 
along with the bath water.
I personally prefer mod_jk, and find that it has a lot more configuration options.

> 

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233752-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 24 11:54:09 2012
Return-Path: <users-return-233752-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AEF7F952E
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 24 Apr 2012 11:54:09 +0000 (UTC)
Received: (qmail 95506 invoked by uid 500); 24 Apr 2012 11:54:06 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 95383 invoked by uid 500); 24 Apr 2012 11:54:05 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 95303 invoked by uid 99); 24 Apr 2012 11:54:04 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2012 11:54:04 +0000
Received: from localhost (HELO mail-iy0-f173.google.com) (127.0.0.1)
  (smtp-auth username funkman, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2012 11:54:04 +0000
Received: by iafj26 with SMTP id j26so1296613iaf.18
        for <users@tomcat.apache.org>; Tue, 24 Apr 2012 04:54:03 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.50.161.225 with SMTP id xv1mr9494152igb.35.1335268443742; Tue,
 24 Apr 2012 04:54:03 -0700 (PDT)
Received: by 10.43.48.135 with HTTP; Tue, 24 Apr 2012 04:54:03 -0700 (PDT)
In-Reply-To: <CABzHfV=UxVxvRZR2MTLiJUG0221AW8HwzObGJU43qkO7V3+khQ@mail.gmail.com>
References: <93D3BC6E-1267-4956-BB99-FD5B1E7C7D58@gmail.com>
	<CABzHfVkKy834K+4ue62e=zAR0+pzJTab6C0KEat1Few6m6h9PQ@mail.gmail.com>
	<F275FD26-6620-449A-B34C-04F8E8E56E1B@gmail.com>
	<4F95BD49.9050505@christopherschultz.net>
	<CABzHfV=UxVxvRZR2MTLiJUG0221AW8HwzObGJU43qkO7V3+khQ@mail.gmail.com>
Date: Tue, 24 Apr 2012 07:54:03 -0400
Message-ID: <CANSu_-845wfcf5tZ3D+T292xPxfPgdUh+5BgUOkV8YRgY_4dRA@mail.gmail.com>
Subject: Re: asp file and session creation
From: Tim Funk <funkman@apache.org>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=14dae934128144e24104be6b693f

--14dae934128144e24104be6b693f
Content-Type: text/plain; charset=ISO-8859-1

yes - this is the pattern we use and trivial to put in your own webapp

For completeness ...
in web.xml
<jsp-config>
  <jsp-property-group>
    <url-pattern>*.jsp</url-pattern>
    <include-prelude>/WEB-INF/prelude1.jspf</include-prelude>
  </jsp-property-group>
</jsp-config>

prelude1.jspf contents: <%@page session='false' %>


-Tim

On Mon, Apr 23, 2012 at 5:06 PM, Konstantin Kolinko
<knst.kolinko@gmail.com>wrote:

> 2012/4/24 Christopher Schultz <chris@christopherschultz.net>:
> >
> > It might be worthwhile proposing a setting for Jasper where the
> > default "session" setting could be set to "false" (in obvious
> > violation of the servlet specification) so that JSPs must specifically
> > set session="true" in their headers, but such a patch might be very
> > far-reaching.
> >
>
> I wonder whether this is already possible to do using
> "jsp-property-group" + "include-prelude" in web.xml.
>

--14dae934128144e24104be6b693f--

From users-return-233753-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 24 12:20:56 2012
Return-Path: <users-return-233753-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 71E1A9C83
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 24 Apr 2012 12:20:56 +0000 (UTC)
Received: (qmail 63309 invoked by uid 500); 24 Apr 2012 12:20:53 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 63180 invoked by uid 500); 24 Apr 2012 12:20:52 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 63149 invoked by uid 99); 24 Apr 2012 12:20:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2012 12:20:51 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [68.232.135.97] (HELO esa3.firstam.iphmx.com) (68.232.135.97)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2012 12:20:43 +0000
X-IronPort-AV: E=Sophos;i="4.75,473,1330934400"; 
   d="scan'208,217";a="139254369"
Received: from unknown (HELO FAHQSNA09AMXS02.corp.firstam.com) ([69.87.16.91])
  by esa3.firstam.iphmx.com with ESMTP/TLS/RC4-SHA; 24 Apr 2012 05:20:21 -0700
X-ExtLoop1: 1
Received: from fahqsna09vxht05.corp.firstam.com ([172.17.247.127])
  by FAHQSNA09AMXS02.corp.firstam.com with ESMTP; 24 Apr 2012 05:20:08 -0700
Received: from FAHQSNA09SXMB03.corp.firstam.com ([fe80::90e:3cc4:7daf:ccde])
 by FAHQSNA09VXHT05.corp.firstam.com ([::1]) with mapi id 14.02.0247.003; Tue,
 24 Apr 2012 05:20:07 -0700
From: "Husain, Yavar" <yhusain@firstam.com>
To: "users@tomcat.apache.org" <users@tomcat.apache.org>
Subject: Tomcat 6.X 64 bit Crash on Windows Server 2008 R2
Thread-Topic: Tomcat 6.X 64 bit Crash on Windows Server 2008 R2
Thread-Index: Ac0iFJHtEpAnJiXsQl61lYlJo+64lg==
Date: Tue, 24 Apr 2012 12:20:01 +0000
Message-ID: <B686CB7902C3204CB9E867F069DEEFDC47B5D192@fahqsna09sxmb03.corp.firstam.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [172.17.247.1]
Content-Type: multipart/alternative;
	boundary="_000_B686CB7902C3204CB9E867F069DEEFDC47B5D192fahqsna09sxmb03_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_B686CB7902C3204CB9E867F069DEEFDC47B5D192fahqsna09sxmb03_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi


Solr 3.5 (Apache Java Search Application) was not returning results. To my =
surprise Tomcat 6.x (64 bit) was not running on my Windows Server 2008 R2 a=
nd hence the problem. I restarted it and everything seems to be fine now.



Went to the Windows Event viewer and exported the following information as =
it relates to Tomcat:



Level   Date and Time   Source  Event ID        Task Category

Information      04/23/2012 8:51:58 AM  Service Control Manager 7036    Non=
e    The Apache Tomcat 6 service entered the running state.

Error            04/23/2012 4:17:12 AM  Service Control Manager 7034    Non=
e    The Apache Tomcat 6 service terminated unexpectedly.  It has done this=
 2 time(s).

Information      04/16/2012 3:13:15 PM  Service Control Manager 7036    Non=
e    The Apache Tomcat 6 service entered the running state.

Error            04/16/2012 1:12:47 PM  Service Control Manager 7034    Non=
e    The Apache Tomcat 6 service terminated unexpectedly.  It has done this=
 1 time(s).

Information      04/07/2012 10:02:25 PM Service Control Manager 7036    Non=
e    The Apache Tomcat 6 service entered the running state.





Here is what I see in the Tomcat Logs:


2012-04-16 15:13:13 Commons Daemon procrun stdout initialized
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (os_windows_x86.cpp:149), pid=3D3496, tid=3D4124
#  guarantee(result =3D=3D EXCEPTION_CONTINUE_EXECUTION) failed: Unexpected=
 result from topLevelExceptionFilter
#
# JRE version: 7.0_02-b13
# Java VM: Java HotSpot(TM) 64-Bit Server VM (22.0-b10 mixed mode windows-a=
md64 compressed oops)
# Failed to write core dump. Call to MiniDumpWriteDump() failed
#
# An error report file with more information is saved as:
# C:\Windows\system32\hs_err_pid3496.log
#
# If you would like to submit a bug report, please visit:
#   http://bugreport.sun.com/bugreport/crash.jsp
#



Any help would be appreciated.



Thanks,

Yavar
</PRE>
<BR>
***************************************************************************=
***************<BR>This message may contain confidential or proprietary inf=
ormation intended only for the use of the<BR>addressee(s) named above or ma=
y contain information that is legally privileged. If you are<BR>not the int=
ended addressee, or the person responsible for delivering it to the intende=
d addressee,<BR>you are hereby notified that reading, disseminating, distri=
buting or copying this message is strictly<BR>prohibited. If you have recei=
ved this message by mistake, please immediately notify us by<BR>replying to=
 the message and delete the original message and any copies immediately the=
reafter.<BR>
<BR>
Thank you.~<BR>
***************************************************************************=
***************<BR>
FAFLD<BR>
<PRE>

--_000_B686CB7902C3204CB9E867F069DEEFDC47B5D192fahqsna09sxmb03_--


From users-return-233754-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 24 12:54:06 2012
Return-Path: <users-return-233754-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2193F9D47
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 24 Apr 2012 12:54:06 +0000 (UTC)
Received: (qmail 89193 invoked by uid 500); 24 Apr 2012 12:54:02 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 88963 invoked by uid 500); 24 Apr 2012 12:54:02 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 88738 invoked by uid 99); 24 Apr 2012 12:54:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2012 12:54:01 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aw@ice-sa.com designates 212.85.38.228 as permitted sender)
Received: from [212.85.38.228] (HELO tor.combios.es) (212.85.38.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2012 12:53:53 +0000
Received: from [192.168.245.129] (p549E8CE4.dip0.t-ipconnect.de [84.158.140.228])
	by tor.combios.es (Postfix) with ESMTPA id 19413DA0655
	for <users@tomcat.apache.org>; Tue, 24 Apr 2012 14:53:31 +0200 (CEST)
Message-ID: <4F96A24A.3080508@ice-sa.com>
Date: Tue, 24 Apr 2012 14:53:30 +0200
From: =?ISO-8859-1?Q?Andr=E9_Warnier?= <aw@ice-sa.com>
Reply-To: Tomcat Users List <users@tomcat.apache.org>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Tomcat 6.X 64 bit Crash on Windows Server 2008 R2
References: <B686CB7902C3204CB9E867F069DEEFDC47B5D192@fahqsna09sxmb03.corp.firstam.com>
In-Reply-To: <B686CB7902C3204CB9E867F069DEEFDC47B5D192@fahqsna09sxmb03.corp.firstam.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Husain, Yavar wrote:
> Hi
> 
> 
> Solr 3.5 (Apache Java Search Application) was not returning results. To my surprise Tomcat 6.x (64 bit) was not running on my Windows Server 2008 R2 and hence the problem. I restarted it and everything seems to be fine now.
> 
> 
> 
> Went to the Windows Event viewer and exported the following information as it relates to Tomcat:
> 
> 
> 
> Level   Date and Time   Source  Event ID        Task Category
> 
> Information      04/23/2012 8:51:58 AM  Service Control Manager 7036    None    The Apache Tomcat 6 service entered the running state.
> 
> Error            04/23/2012 4:17:12 AM  Service Control Manager 7034    None    The Apache Tomcat 6 service terminated unexpectedly.  It has done this 2 time(s).
> 
> Information      04/16/2012 3:13:15 PM  Service Control Manager 7036    None    The Apache Tomcat 6 service entered the running state.
> 
> Error            04/16/2012 1:12:47 PM  Service Control Manager 7034    None    The Apache Tomcat 6 service terminated unexpectedly.  It has done this 1 time(s).
> 
> Information      04/07/2012 10:02:25 PM Service Control Manager 7036    None    The Apache Tomcat 6 service entered the running state.
> 
> 
> 
> 
> 
> Here is what I see in the Tomcat Logs:
> 
> 
> 2012-04-16 15:13:13 Commons Daemon procrun stdout initialized
> #
> # A fatal error has been detected by the Java Runtime Environment:
> #
> #  Internal Error (os_windows_x86.cpp:149), pid=3496, tid=4124
> #  guarantee(result == EXCEPTION_CONTINUE_EXECUTION) failed: Unexpected result from topLevelExceptionFilter
> #
> # JRE version: 7.0_02-b13
> # Java VM: Java HotSpot(TM) 64-Bit Server VM (22.0-b10 mixed mode windows-amd64 compressed oops)
> # Failed to write core dump. Call to MiniDumpWriteDump() failed
> #
> # An error report file with more information is saved as:
> # C:\Windows\system32\hs_err_pid3496.log
> #
> # If you would like to submit a bug report, please visit:
> #   http://bugreport.sun.com/bugreport/crash.jsp
> #
> 
> 
> 
> Any help would be appreciated.
> 

I don't want to be snappy, but it seems to me that the above message is fairly clear, in 
indicating an error within the Java VM, and even providing a URL to report it.
What other kind of help would you like from this Tomcat list ?


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233755-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 24 17:08:47 2012
Return-Path: <users-return-233755-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6D7859E96
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 24 Apr 2012 17:08:47 +0000 (UTC)
Received: (qmail 43011 invoked by uid 500); 24 Apr 2012 17:08:43 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 42929 invoked by uid 500); 24 Apr 2012 17:08:43 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 42917 invoked by uid 99); 24 Apr 2012 17:08:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2012 17:08:43 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of knst.kolinko@gmail.com designates 209.85.213.173 as permitted sender)
Received: from [209.85.213.173] (HELO mail-yx0-f173.google.com) (209.85.213.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2012 17:08:37 +0000
Received: by yenr5 with SMTP id r5so723843yen.18
        for <users@tomcat.apache.org>; Tue, 24 Apr 2012 10:08:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=8gdD2tYBazngEbgPQ4WDx/5SS8Mu5so2CGF26AqmvP8=;
        b=dMSnY+uHd/p68OEXldKTHJUQFkVnP4bEJVzUHYOkvYi5+Pj5ZRSO7lt3+3iyphaTuN
         sl8ehmGeazmHxLZikT6E9E/aFfWVOtgwhQZsqlPzvumYWqvyfebPLrN2rk3xqPEwZrQg
         ctVsNsS9H0VeDNilkic4D/C9PWce/DZGGmWx9Rn9sD6iWMki7Vjj8D9eHjqXq5QfnVdg
         Ge/RAig/m56zT6WIpqm6w8o+UlCJQ6zwyXm7QSzNQ+tF8bzrZIOu4u/XtFY5bmUxAS2z
         G0ygPZok+kujeU8URC+m0+h40/Jr3Z+iPKbKuFh3j0Lr+OefbyHjfolm4V3Q3yRLviOm
         3e0w==
MIME-Version: 1.0
Received: by 10.236.185.138 with SMTP id u10mr2484016yhm.106.1335287297317;
 Tue, 24 Apr 2012 10:08:17 -0700 (PDT)
Received: by 10.146.161.7 with HTTP; Tue, 24 Apr 2012 10:08:16 -0700 (PDT)
In-Reply-To: <5219E55047AF4F7FABF460F593B4E216@LudwigVAIO>
References: <FB8C0152D957401CA6FF8702C3FE8918@LudwigVAIO>
	<4F9561A3.5070000@christopherschultz.net>
	<5219E55047AF4F7FABF460F593B4E216@LudwigVAIO>
Date: Tue, 24 Apr 2012 21:08:16 +0400
Message-ID: <CABzHfV=biLkSRc44QgiKe5bu_Sf84JkG1DRasx77Cy=ibQwGjA@mail.gmail.com>
Subject: Re: Tomcat 6.0.35 filters not invoked for error-pages
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

2012/4/24 Ludwig Magnusson <ludwig@mediatool.com>:
> Thanks for your reply.
>
> First of all: I have solved the acutal problem caused by this in a more
> stable way.
>
> But out of curiosity I tried your solution and it does not work either.
> this is my setup:
>
> <servlet>
> =A0 <servlet-name>myservlet</servlet-name>
> =A0 <servlet-class>mypackage.MyServlet</servlet-class>
> </servlet>
>
> <servlet-mapping>
> =A0 <servlet-name>myservlet</servlet-name>
> =A0 <url-pattern>/*</url-pattern>
> </servlet-mapping>
>
> <filter-mapping>
> =A0 <filter-name>myfilter</filter-name>
> =A0 <servlet-name>myservlet</servlet-name>
> =A0 <dispatcher>REQUEST</dispatcher>
> =A0 <dispatcher>FORWARD</dispatcher>

<dispatcher>ERROR</dispatcher>
Since Servlet 2.4.

> </filter-mapping>
>

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233756-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 24 19:30:57 2012
Return-Path: <users-return-233756-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7A84A9A94
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 24 Apr 2012 19:30:57 +0000 (UTC)
Received: (qmail 46562 invoked by uid 500); 24 Apr 2012 19:30:53 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 46460 invoked by uid 500); 24 Apr 2012 19:30:53 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 46450 invoked by uid 99); 24 Apr 2012 19:30:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2012 19:30:53 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of cjderham@gmail.com designates 209.85.217.173 as permitted sender)
Received: from [209.85.217.173] (HELO mail-lb0-f173.google.com) (209.85.217.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2012 19:30:47 +0000
Received: by lboi15 with SMTP id i15so1040525lbo.18
        for <users@tomcat.apache.org>; Tue, 24 Apr 2012 12:30:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:reply-to:sender:in-reply-to:references:from:date
         :x-google-sender-auth:message-id:subject:to:content-type;
        bh=a5H7qfhUwcORVsmBEllKrD+cXmWRjYdB2IlBcF5rfI0=;
        b=Zzcg2/mIxi41CEb2tVT3edTEyM9pmUejs4YlbrV+k/F0MGsmo85aehx9LVgaLyU0zY
         Djrvh1dBVEPvFfDfAJoLWrFhLWZ40d/tpC7V69jQolqkzj11Fml3QiygpXIs4O0ipvqb
         QOaebufrZXLv5RXCIQJLI/jIRZ95AdyGNtXPBLHhqWpU8Ljf74hrTKc0osX74b8w7ppl
         1FF6xf4vbPjz3Y5tnv9SuwXrhQc/JtpmWrmvDnPAACi3Nrrs+7zdsJ+TD7xIJtvCWpu1
         plbD4muTZva/bav+VHlUFGDSqt0L22P4DrxLu/Y/wYrI3jJsd78LD50aEbp1Tga4KJjM
         0Pww==
Received: by 10.152.108.171 with SMTP id hl11mr20201013lab.29.1335295827034;
 Tue, 24 Apr 2012 12:30:27 -0700 (PDT)
MIME-Version: 1.0
Reply-To: chris@derham.me.uk
Sender: cjderham@gmail.com
Received: by 10.112.117.37 with HTTP; Tue, 24 Apr 2012 12:30:06 -0700 (PDT)
In-Reply-To: <CAG6aRdUny40_+b7bQjRSuKvjZinpgC9-5piart3Uh6XVPvkHLw@mail.gmail.com>
References: <CAG6aRdX7aA9J8RZ1OAhyUQCayi2D2E=_9FJryTH4Z1v7dDSosw@mail.gmail.com>
 <4F8F1EEB.2070000@apache.org> <CAG6aRdXuMWqvXLTv=M=-YNQzxX8LQLiTYyoYtUoUCQF32Ln-yQ@mail.gmail.com>
 <4F903E4B.3090603@christopherschultz.net> <4F92DA1E.7080000@apache.org>
 <4F956329.4060003@christopherschultz.net> <4F9576EC.5060508@apache.org>
 <4F95B55D.9050606@christopherschultz.net> <CAG6aRdUny40_+b7bQjRSuKvjZinpgC9-5piart3Uh6XVPvkHLw@mail.gmail.com>
From: chris derham <chris@derham.me.uk>
Date: Tue, 24 Apr 2012 16:30:06 -0300
X-Google-Sender-Auth: X_MJ6GjgEGesICpLSW6n6sLN5aI
Message-ID: <CAG6aRdVF_VwRAjqG7QRffSOPPz-mte3mL2qk+TR52+ELZ4hHNA@mail.gmail.com>
Subject: Re: 64bit windows mod_jk connector download for apache httpd 2.4
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=bcaec54fbd3c70c04104be71c916

--bcaec54fbd3c70c04104be71c916
Content-Type: text/plain; charset=ISO-8859-1

>
>  > Exactly. Might be better to come from "userland"
>>
>> +1
>>
>
> I have emailed the apache lounge contact email asking if they would
> consider including a build of mod_jk - lets see what happens
>
> Thanks
>
> Chris
>

And we have a winner - 64 bit mod_jk now present on
http://www.apachelounge.com/download/win64/

Thanks for all your help, and apache lounge for doing the work

Chris

--bcaec54fbd3c70c04104be71c916--

From users-return-233757-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 24 21:58:06 2012
Return-Path: <users-return-233757-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4B3599FDB
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 24 Apr 2012 21:58:06 +0000 (UTC)
Received: (qmail 94419 invoked by uid 500); 24 Apr 2012 21:58:02 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 94352 invoked by uid 500); 24 Apr 2012 21:58:02 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 94342 invoked by uid 99); 24 Apr 2012 21:58:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2012 21:58:02 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=MIME_QP_LONG_LINE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [66.219.55.137] (HELO mail.polydyne.com) (66.219.55.137)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2012 21:57:54 +0000
Received: from Unknown [10.1.1.19] by mail.polydyne.com - Websense Email Security (7.2.0); Tue, 24 Apr 2012 17:02:08 -0500
Received: from POSTOFFICE02.polydyne.com ([::1]) by POSTOFFICE02.polydyne.com
 ([::1]) with mapi id 14.01.0339.001; Tue, 24 Apr 2012 16:57:27 -0500
From: Jeffrey Janner <Jeffrey.Janner@PolyDyne.com>
To: 'Tomcat Users List' <users@tomcat.apache.org>
Subject: RE: Tomcat 6.X 64 bit Crash on Windows Server 2008 R2
Thread-Topic: Tomcat 6.X 64 bit Crash on Windows Server 2008 R2
Thread-Index: Ac0iFJHtEpAnJiXsQl61lYlJo+64lgAUFfCw
Date: Tue, 24 Apr 2012 21:57:27 +0000
Message-ID: <7215BA462D00D343B2837F9113F0131F0105FCB688@POSTOFFICE02.polydyne.com>
References: <B686CB7902C3204CB9E867F069DEEFDC47B5D192@fahqsna09sxmb03.corp.firstam.com>
In-Reply-To: <B686CB7902C3204CB9E867F069DEEFDC47B5D192@fahqsna09sxmb03.corp.firstam.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [10.1.1.27]
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-SEF-7853D99-ADF1-478E-8894-213D316B8FFA: 1
X-SEF-Processed: 7_2_0_00504__2012_04_24_17_02_09

> -----Original Message-----=0D=0A> From: Husain, Yavar [mailto:yhusain@fir=
stam.com]=0D=0A> Sent: Tuesday, April 24, 2012 7:20 AM=0D=0A> To: users@tom=
cat.apache.org=0D=0A> Subject: Tomcat 6.X 64 bit Crash on Windows Server 20=
08 R2=0D=0A>=20=0D=0A> Hi=0D=0A>=20=0D=0A>=20=0D=0A> Solr 3.5 (Apache Java =
Search Application) was not returning results. To=0D=0A> my surprise Tomcat=
 6.x (64 bit) was not running on my Windows Server=0D=0A> 2008 R2 and hence=
 the problem. I restarted it and everything seems to=0D=0A> be fine now.=0D=
=0A>=20=0D=0A>=20=0D=0A>=20=0D=0A> Went to the Windows Event viewer and exp=
orted the following information=0D=0A> as it relates to Tomcat:=0D=0A>=20=0D=
=0A>=20=0D=0A>=20=0D=0A> Level   Date and Time   Source  Event ID        Ta=
sk Category=0D=0A>=20=0D=0A> Information      04/23/2012 8:51:58 AM  Servic=
e Control Manager 7036=0D=0A> None    The Apache Tomcat 6 service entered t=
he running state.=0D=0A>=20=0D=0A> Error            04/23/2012 4:17:12 AM  =
Service Control Manager 7034=0D=0A> None    The Apache Tomcat 6 service ter=
minated unexpectedly.  It has=0D=0A> done this 2 time(s).=0D=0A>=20=0D=0A> =
Information      04/16/2012 3:13:15 PM  Service Control Manager 7036=0D=0A>=
 None    The Apache Tomcat 6 service entered the running state.=0D=0A>=20=0D=
=0A> Error            04/16/2012 1:12:47 PM  Service Control Manager 7034=0D=
=0A> None    The Apache Tomcat 6 service terminated unexpectedly.  It has=0D=
=0A> done this 1 time(s).=0D=0A>=20=0D=0A> Information      04/07/2012 10:0=
2:25 PM Service Control Manager 7036=0D=0A> None    The Apache Tomcat 6 ser=
vice entered the running state.=0D=0A>=20=0D=0A>=20=0D=0A>=20=0D=0A>=20=0D=0A=
>=20=0D=0A> Here is what I see in the Tomcat Logs:=0D=0A>=20=0D=0A>=20=0D=0A=
> 2012-04-16 15:13:13 Commons Daemon procrun stdout initialized # # A=0D=0A=
> fatal error has been detected by the Java Runtime Environment:=0D=0A> #=0D=
=0A> #  Internal Error (os=5Fwindows=5Fx86.cpp:149), pid=3D3496, tid=3D4124=
 #=0D=0A> guarantee(result =3D=3D EXCEPTION=5FCONTINUE=5FEXECUTION) failed:=
 Unexpected=0D=0A> result from topLevelExceptionFilter # # JRE version: 7.0=
=5F02-b13 # Java=0D=0A> VM: Java HotSpot(TM) 64-Bit Server VM (22.0-b10 mix=
ed mode windows-=0D=0A> amd64 compressed oops) # Failed to write core dump.=
 Call to=0D=0A> MiniDumpWriteDump() failed # # An error report file with mo=
re=0D=0A> information is saved as:=0D=0A> # C:\Windows\system32\hs=5Ferr=5F=
pid3496.log=0D=0A> #=0D=0A> # If you would like to submit a bug report, ple=
ase visit:=0D=0A> #   http://bugreport.sun.com/bugreport/crash.jsp=0D=0A> #=0D=
=0A>=20=0D=0A>=20=0D=0A>=20=0D=0A> Any help would be appreciated.=0D=0A> =0D=
=0A>=20=0D=0A>=20=0D=0A> Thanks,=0D=0A>=20=0D=0A> Yavar=0D=0A=20=0D=0ARepor=
t the Java 7 bug to Sun via the url provided.=0D=0AThen drop your Tomcat 6.=
x back to using the latest Java 6 release for 64-bit Windows. It's seem pre=
tty stable.=0D=0A(that is if you are not relying on some new feature of Jav=
a 7).=0D=0A=0D=0AJeff=0D=0A=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=
=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=
=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=5F=
=5F=5F=5F=5F=5F=5F=5F=5F=0D=0A=0D=0AConfidentiality Notice:  This Transmiss=
ion (including any attachments) may contain information that is privileged,=
 confidential, and exempt from disclosure under applicable law.  If the rea=
der of this message is not the intended recipient you are hereby notified t=
hat any dissemination, distribution, or copying of this communication is st=
rictly prohibited. =20=0D=0A=0D=0AIf you have received this transmission in=
 error, please immediately reply to the sender or telephone (512) 343-9100 =
and delete this transmission from your system.=0D=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233758-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Tue Apr 24 22:11:03 2012
Return-Path: <users-return-233758-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 035B79596
	for <apmail-tomcat-users-archive@www.apache.org>; Tue, 24 Apr 2012 22:11:03 +0000 (UTC)
Received: (qmail 30782 invoked by uid 500); 24 Apr 2012 22:10:59 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 30592 invoked by uid 500); 24 Apr 2012 22:10:59 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 30583 invoked by uid 99); 24 Apr 2012 22:10:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2012 22:10:59 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.215.45] (HELO mail-lpp01m010-f45.google.com) (209.85.215.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 Apr 2012 22:10:52 +0000
Received: by lahe6 with SMTP id e6so1175372lah.18
        for <users@tomcat.apache.org>; Tue, 24 Apr 2012 15:10:27 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=sender:message-id:from:to:references:in-reply-to:subject:date
         :mime-version:content-type:content-transfer-encoding:x-priority
         :x-msmail-priority:importance:x-mailer:x-mimeole:x-gm-message-state;
        bh=1vrNl6MyD3yDytR5sF8DursczH/CYcIzFbTVsj64TLs=;
        b=X3NyiilLC+gcdMqEWhXDd9PGTPATpgsvAIU0bnM6fAYDSnl55/ttIVfQcZRz9/p22Q
         7OjbAZ+dgCP4lvGhZwRKH6K3NZz7uEbZmNZCywgSLolQrT6Y4olu6FXO3OFesB+qL2zV
         YkLE3WSDF9M5pXKsq/MqNtTHoYeSerCbu9j9TBAzReCh2YKCBLWLDLY3l6EjGQoAqFGb
         Chcs05HtYQiaihjnJQKdPXT5CQab6jhzpRls57CZby4ldya69cOifrMR6M8pTS7B+Lor
         9wmY8D9wIGkEaUKVHFYvUImsgGCU/vBPBYCfcLlF2brq5CynbheCEOB/4WLAkDCsYyts
         Xm5A==
Received: by 10.112.103.8 with SMTP id fs8mr118439lbb.29.1335305427407;
        Tue, 24 Apr 2012 15:10:27 -0700 (PDT)
Received: from LudwigVAIO (84-55-122-205.customers.ownit.se. [84.55.122.205])
        by mx.google.com with ESMTPS id h8sm25700148lbx.8.2012.04.24.15.10.25
        (version=SSLv3 cipher=OTHER);
        Tue, 24 Apr 2012 15:10:26 -0700 (PDT)
Sender: Ludwig Magnusson <ludwig@itcatapult.com>
Message-ID: <092F988E698A4813B2A1F45CFA6C6E76@LudwigVAIO>
From: Ludwig Magnusson <ludwig@mediatool.com>
To: "Tomcat Users List" <users@tomcat.apache.org>
References: <FB8C0152D957401CA6FF8702C3FE8918@LudwigVAIO><4F9561A3.5070000@christopherschultz.net><5219E55047AF4F7FABF460F593B4E216@LudwigVAIO> <CABzHfV=biLkSRc44QgiKe5bu_Sf84JkG1DRasx77Cy=ibQwGjA@mail.gmail.com>
In-Reply-To: <CABzHfV=biLkSRc44QgiKe5bu_Sf84JkG1DRasx77Cy=ibQwGjA@mail.gmail.com>
Subject: Re: Tomcat 6.0.35 filters not invoked for error-pages
Date: Wed, 25 Apr 2012 00:10:18 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3538.513
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3538.513
X-Gm-Message-State: ALoCoQnLi4ikCFN6rk9R1pYvhkF370W4KCZL9jhEICanMIWvuhYzwp54jdDqqzx5hAn3pWY6rRkB
X-Virus-Checked: Checked by ClamAV on apache.org

That was it. Thanks =)

---------- 
From: Konstantin Kolinko 
Sent: Tuesday, April 24, 2012 7:08 PM 
To: Tomcat Users List 
Subject: Re: Tomcat 6.0.35 filters not invoked for error-pages 

2012/4/24 Ludwig Magnusson <ludwig@mediatool.com>:
> Thanks for your reply.
>
> First of all: I have solved the acutal problem caused by this in a more
> stable way.
>
> But out of curiosity I tried your solution and it does not work either.
> this is my setup:
>
> <servlet>
>   <servlet-name>myservlet</servlet-name>
>   <servlet-class>mypackage.MyServlet</servlet-class>
> </servlet>
>
> <servlet-mapping>
>   <servlet-name>myservlet</servlet-name>
>   <url-pattern>/*</url-pattern>
> </servlet-mapping>
>
> <filter-mapping>
>   <filter-name>myfilter</filter-name>
>   <servlet-name>myservlet</servlet-name>
>   <dispatcher>REQUEST</dispatcher>
>   <dispatcher>FORWARD</dispatcher>

<dispatcher>ERROR</dispatcher>
Since Servlet 2.4.

> </filter-mapping>
>

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233759-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 25 04:21:51 2012
Return-Path: <users-return-233759-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CB1149F06
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 25 Apr 2012 04:21:51 +0000 (UTC)
Received: (qmail 77520 invoked by uid 500); 25 Apr 2012 04:21:48 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 77467 invoked by uid 500); 25 Apr 2012 04:21:47 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 77452 invoked by uid 99); 25 Apr 2012 04:21:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2012 04:21:47 +0000
X-ASF-Spam-Status: No, hits=2.9 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [98.139.91.216] (HELO nm19-vm0.bullet.mail.sp2.yahoo.com) (98.139.91.216)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 25 Apr 2012 04:21:37 +0000
Received: from [72.30.22.77] by nm19.bullet.mail.sp2.yahoo.com with NNFMP; 25 Apr 2012 04:21:16 -0000
Received: from [68.142.194.244] by tm11.bullet.mail.sp2.yahoo.com with NNFMP; 25 Apr 2012 04:21:16 -0000
Received: from [66.94.237.103] by t2.bullet.mud.yahoo.com with NNFMP; 25 Apr 2012 04:21:16 -0000
Received: from [127.0.0.1] by omp1008.access.mail.mud.yahoo.com with NNFMP; 25 Apr 2012 04:21:16 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 598375.52898.bm@omp1008.access.mail.mud.yahoo.com
Received: (qmail 5145 invoked by uid 60001); 25 Apr 2012 04:21:16 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1335327676; bh=gL6kMxzoOWH4XC3PY7lFdkfTZ+wApzW9f1I+onX+nMw=; h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=q5k9wUaV7u+s2qa9IwW91bi1sILtvgB9ox50KfQkse4hbsylWPmOBnlznC/lgLll2iosr6fIfrvfmwmwnMhzWqPfTo/YbMUomWdlv8EbhuSbB1GTvHP2JguvPNJkUIYc+/79C1UiCCM8Hj72R+vDldZ/paq8GqAiVtd2MxixDR4=
X-YMail-OSG: nBlLWVUVM1kq0DxoFKETUz2hACEh.d4CHgcDVR9QPTdmU92
 xM0o3hMcNzsgKVExHtfKArWQOYGmT0xYdn0paSt6v0OyyM5v581B2mOBHZ6F
 cR3cuAiuaZjlzkEK2ltpH1Mn8L9ql_F.Z9ME.i32.mErjfBlNbHyina21f03
 RGas_fZXOBLJs5IL03CYEuhu9xiVO2uxyUHFhD0dsPvhxadCS0nDrE25YeP1
 WfZH3KffiCpDHu0hoSCEXmLTMUBpqwM8Z57VHsKDmDgp.Z8_KsVFdiUPFWAD
 Uo4F0bOpm9L3FmeXeYHmLwaW_NLC7DRoQ8Y70ZHAjlt9qXkV9j0nwHH5jdzE
 dNv512cnLhiuPnlgUzHzoIBrowQVYnUhRSRa9yNAiATMNf6yzUhC_7_5qdwR
 kE7vi8PsFqcXPhBQ4edt6lOFp402Vzhn_zsVcV1q.cfckXDDGdiXuYpswD4F
 TY2zBkL5CMiaRF9g_GNN7_R5_s2JO11thdeFc
Received: from [110.77.150.66] by web2815.biz.mail.ne1.yahoo.com via HTTP; Tue, 24 Apr 2012 21:21:16 PDT
X-Mailer: YahooMailWebService/0.8.117.340979
References: <1335319979.91033.YahooMailNeo@web2818.biz.mail.ne1.yahoo.com>
Message-ID: <1335327676.4964.YahooMailNeo@web2815.biz.mail.ne1.yahoo.com>
Date: Tue, 24 Apr 2012 21:21:16 -0700 (PDT)
From: "Harold H. Hibbert" <hhibbert@bioinfogen.com>
Reply-To: "Harold H. Hibbert" <hhibbert@bioinfogen.com>
Subject: Tomcat fails on forwarded IP Address
To: "users@tomcat.apache.org" <users@tomcat.apache.org>
In-Reply-To: <1335319979.91033.YahooMailNeo@web2818.biz.mail.ne1.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="702752695-686032927-1335327676=:4964"
X-Virus-Checked: Checked by ClamAV on apache.org

--702752695-686032927-1335327676=:4964
Content-Type: text/plain; charset=us-ascii

Hello,



I am using Tomcat 7.0.25 running on Windows 7 64-bit.

The port for my Tomcat server is 8181.

I have had my IP Address forwarded to a public IP address and the Tomcat server is not visible.

Whenever
 I try to connect to the Tomcat page from another computer located 
anywhere, I get "The connection has timed out" message in my browser. 
Locally, all is well, localhost:8181 show the Tomcat page, same as using
 the IP Address:8181.

The Apache server is visible to other 
machines, just Tomcat is not. Are there any configuration issues with 
Tomcat and forwarded IP Addresses?

Thanks in Advance.
--702752695-686032927-1335327676=:4964--

From users-return-233760-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 25 05:18:47 2012
Return-Path: <users-return-233760-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B18F7989D
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 25 Apr 2012 05:18:47 +0000 (UTC)
Received: (qmail 85264 invoked by uid 500); 25 Apr 2012 05:18:44 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 85090 invoked by uid 500); 25 Apr 2012 05:18:41 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 84838 invoked by uid 99); 25 Apr 2012 05:18:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2012 05:18:40 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [216.82.254.211] (HELO mail201.messagelabs.com) (216.82.254.211)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2012 05:18:31 +0000
X-Env-Sender: Chuck.Caldarale@unisys.com
X-Msg-Ref: server-16.tower-201.messagelabs.com!1335331087!4637955!16
X-Originating-IP: [192.61.61.104]
X-StarScan-Version: 6.5.7; banners=-,-,-
X-VirusChecked: Checked
Received: (qmail 13469 invoked from network); 25 Apr 2012 05:18:09 -0000
Received: from unknown (HELO USEA-NAEDGE1.unisys.com) (192.61.61.104)
  by server-16.tower-201.messagelabs.com with RC4-SHA encrypted SMTP; 25 Apr 2012 05:18:09 -0000
Received: from usea-nahubcas1.na.uis.unisys.com (129.224.76.114) by
 USEA-NAEDGE1.unisys.com (192.61.61.104) with Microsoft SMTP Server (TLS) id
 8.3.83.0; Wed, 25 Apr 2012 00:17:37 -0500
Received: from USEA-EXCH8.na.uis.unisys.com ([129.224.76.41]) by
 usea-nahubcas1.na.uis.unisys.com ([129.224.76.114]) with mapi; Wed, 25 Apr
 2012 00:17:37 -0500
From: "Caldarale, Charles R" <Chuck.Caldarale@unisys.com>
To: Tomcat Users List <users@tomcat.apache.org>
Date: Wed, 25 Apr 2012 00:17:35 -0500
Subject: RE: Tomcat fails on forwarded IP Address
Thread-Topic: Tomcat fails on forwarded IP Address
Thread-Index: Ac0imvEzMgSlLwHCSJqMzT/6UiI21AAB2//g
Message-ID: <99C8B2929B39C24493377AC7A121E21FB0193031DA@USEA-EXCH8.na.uis.unisys.com>
References: <1335319979.91033.YahooMailNeo@web2818.biz.mail.ne1.yahoo.com>
 <1335327676.4964.YahooMailNeo@web2815.biz.mail.ne1.yahoo.com>
In-Reply-To: <1335327676.4964.YahooMailNeo@web2815.biz.mail.ne1.yahoo.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

> From: Harold H. Hibbert [mailto:hhibbert@bioinfogen.com]=20
> Subject: Tomcat fails on forwarded IP Address

> I have had my IP Address forwarded to a public IP address

I hope you mean the reverse, since the above doesn't make sense.

> Are there any configuration issues with Tomcat and forwarded IP Addresses=
?

Sounds like the port is being blocked by a firewall on your Windows system.

 - Chuck


THIS COMMUNICATION MAY CONTAIN CONFIDENTIAL AND/OR OTHERWISE PROPRIETARY MA=
TERIAL and is thus for use only by the intended recipient. If you received =
this in error, please contact the sender and delete the e-mail and its atta=
chments from all computers.


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233761-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 25 06:43:55 2012
Return-Path: <users-return-233761-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9230B901F
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 25 Apr 2012 06:43:55 +0000 (UTC)
Received: (qmail 69332 invoked by uid 500); 25 Apr 2012 06:43:52 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 68977 invoked by uid 500); 25 Apr 2012 06:43:47 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 68943 invoked by uid 99); 25 Apr 2012 06:43:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2012 06:43:46 +0000
X-ASF-Spam-Status: No, hits=2.9 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [98.139.91.230] (HELO nm26-vm0.bullet.mail.sp2.yahoo.com) (98.139.91.230)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 25 Apr 2012 06:43:37 +0000
Received: from [98.139.91.66] by nm26.bullet.mail.sp2.yahoo.com with NNFMP; 25 Apr 2012 06:43:14 -0000
Received: from [98.139.44.66] by tm6.bullet.mail.sp2.yahoo.com with NNFMP; 25 Apr 2012 06:43:14 -0000
Received: from [127.0.0.1] by omp1003.access.mail.sp2.yahoo.com with NNFMP; 25 Apr 2012 06:43:14 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 96726.5986.bm@omp1003.access.mail.sp2.yahoo.com
Received: (qmail 57570 invoked by uid 60001); 25 Apr 2012 06:43:13 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1335336193; bh=lQO45uRj8arrEPUt514jXCp8SdIY49JdIA7zVVZ/Cq0=; h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=mqdkt5+PGUj4udBtSd6QhHE/RpChvTrYijJ5XT3p2I733A26nOlxJ0nCtMXCGO+1VOQONO87faCu65HZf2xSXNkYVqlaAF89Cne0HmDddWIrkePFYzdDBz8sVFZ2Kb+rpVgJaVCVQtbFbxPSPBtyxewoADb/kRvPeTk4uB7KNB8=
X-YMail-OSG: yCbJd8kVM1kHmz.jCqXs.fm1No2j3_irnOZvMkaBgFpoY6x
 2vDBz_2HJYtmyEQW5YaYbIw1BJjfrqrjCpGsz.3Pwmji7LbFOkj9TQQjT6l6
 sV.EWLxuB6i5F4sZP.oPUpBHRYPR_N3exITEur5_r3cyT5OubF32wGWREwRG
 anLgC3lMZaGPU5daJc9jJZcI2IpA_E4zuowlDG1eNWedbmV0SSYSQkUVIG.c
 1rK92zgUooaT0Hr21igjDGUibzwPLPsPlS7bpvTwWfHS7IrWBR0_IKwUNn.W
 zUTZp8jVVrfpJniXrzM1kJh56rnlVVfJ8K3.31GjrijDnyYF8pwk8c8VacnA
 o1RmJYySvCotKj1eUN7QRRqIeoKdY3NbrFt98K1xUJ2t06UvTuuKtx4N5xI_
 i5tNNOk21C6Nc6O1qVqAJjWB21OAi76ElaLexfl7qk5_tbp782i6yJy.JCl3
 S_3kO.pb6hEzgXww82ELgg3PhwLOG.yY-
Received: from [110.77.150.66] by web2811.biz.mail.ne1.yahoo.com via HTTP; Tue, 24 Apr 2012 23:43:13 PDT
X-Mailer: YahooMailWebService/0.8.117.340979
References: <1335319979.91033.YahooMailNeo@web2818.biz.mail.ne1.yahoo.com> <1335327676.4964.YahooMailNeo@web2815.biz.mail.ne1.yahoo.com> <99C8B2929B39C24493377AC7A121E21FB0193031DA@USEA-EXCH8.na.uis.unisys.com>
Message-ID: <1335336193.37593.YahooMailNeo@web2811.biz.mail.ne1.yahoo.com>
Date: Tue, 24 Apr 2012 23:43:13 -0700 (PDT)
From: "Harold H. Hibbert" <hhibbert@bioinfogen.com>
Reply-To: "Harold H. Hibbert" <hhibbert@bioinfogen.com>
Subject: Re: Tomcat fails on forwarded IP Address
To: Tomcat Users List <users@tomcat.apache.org>
In-Reply-To: <99C8B2929B39C24493377AC7A121E21FB0193031DA@USEA-EXCH8.na.uis.unisys.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="-759923333-621570184-1335336193=:37593"

---759923333-621570184-1335336193=:37593
Content-Type: text/plain; charset=us-ascii

Dear Chuck,

Thanks for the reply.

I did mean the reverse, and it was an issue with Windows and Firewall management.

Cheers



________________________________
 From: "Caldarale, Charles R" <Chuck.Caldarale@unisys.com>
To: Tomcat Users List <users@tomcat.apache.org> 
Sent: Wednesday, April 25, 2012 12:17 PM
Subject: RE: Tomcat fails on forwarded IP Address
 
> From: Harold H. Hibbert [mailto:hhibbert@bioinfogen.com] 
> Subject: Tomcat fails on forwarded IP Address

> I have had my IP Address forwarded to a public IP address

I hope you mean the reverse, since the above doesn't make sense.

> Are there any configuration issues with Tomcat and forwarded IP Addresses?

Sounds like the port is being blocked by a firewall on your Windows system.

- Chuck


THIS COMMUNICATION MAY CONTAIN CONFIDENTIAL AND/OR OTHERWISE PROPRIETARY MATERIAL and is thus for use only by the intended recipient. If you received this in error, please contact the sender and delete the e-mail and its attachments from all computers.


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org
---759923333-621570184-1335336193=:37593--

From users-return-233762-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 25 10:35:11 2012
Return-Path: <users-return-233762-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 56C619887
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 25 Apr 2012 10:35:11 +0000 (UTC)
Received: (qmail 66496 invoked by uid 500); 25 Apr 2012 10:35:07 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 66438 invoked by uid 500); 25 Apr 2012 10:35:07 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 66404 invoked by uid 99); 25 Apr 2012 10:35:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2012 10:35:06 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rajat.ray@gmail.com designates 209.85.215.173 as permitted sender)
Received: from [209.85.215.173] (HELO mail-ey0-f173.google.com) (209.85.215.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2012 10:34:57 +0000
Received: by eaaf11 with SMTP id f11so4181341eaa.18
        for <users@tomcat.apache.org>; Wed, 25 Apr 2012 03:34:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=message-id:date:from:subject:to:reply-to:mime-version:x-priority
         :content-type:content-transfer-encoding;
        bh=HzVOjztI6+FEt2JRtXrVsq60Lfdc9ld3pshmcnbeHc8=;
        b=mEBQnqWPNGE0hhrEgxaOTHmkOGpMuDHwG08MvgDKggSxlSSeZkHmv+gQCnEctYKWNo
         YIUiq2ES0e5gtaD1sLFcwewY/ip0wOP2NrwgPPdNhER5CVdhU1/xmMsEQ1kuw63yhnpS
         hIrytrzC7+NaVy3uZe020QdDPmWz0PQOZok5nHzm7SJv1lI0l5L/kf05KWY6FaAwQ5kx
         9pGHmZdqZ7GQYZF7MKJs4iLgGEyU9v0bClgcihcu2vm6BVUZIGXdv7FFHkw6Ng8zSdjY
         vcKyJ50iF+w86Gg6RdPFyfux5/w6zRBecHoAh5lNrY+fstmEnvVoJ78sTXkmdns0oe6J
         +Y2Q==
Received: by 10.14.49.11 with SMTP id w11mr340794eeb.40.1335350076938;
        Wed, 25 Apr 2012 03:34:36 -0700 (PDT)
Received: from lhrnms-0067-fe.pr.nmsg.s.nokia.com (em1x-53.lhr.messaging.nokia.com. [131.228.18.53])
        by mx.google.com with ESMTPS id d54sm101611135eei.9.2012.04.25.03.34.35
        (version=SSLv3 cipher=OTHER);
        Wed, 25 Apr 2012 03:34:36 -0700 (PDT)
Message-ID: <4f97d33c.ce7f0e0a.12bc.ffff810b@mx.google.com>
Date: Wed, 25 Apr 2012 10:35:00 +0000
From: "Rajat" <rajat.ray@gmail.com>
Subject: Payload for Tomcat 7
To: "users@tomcat.apache.org" <users@tomcat.apache.org>
Reply-To: rajat.ray@gmail.com
MIME-Version: 1.0
X-Priority: 3
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable



Hi,
How to use the payload in Tomcat 7.
What I have observed is payload is not being sent for self member in To=
mcat 7 when we start the cluster.=20

Regards
Rajat=20


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233763-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 25 10:46:18 2012
Return-Path: <users-return-233763-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7F6549B54
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 25 Apr 2012 10:46:18 +0000 (UTC)
Received: (qmail 93775 invoked by uid 500); 25 Apr 2012 10:46:15 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 93723 invoked by uid 500); 25 Apr 2012 10:46:14 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 93696 invoked by uid 99); 25 Apr 2012 10:46:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2012 10:46:13 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [68.232.135.97] (HELO esa3.firstam.iphmx.com) (68.232.135.97)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2012 10:46:04 +0000
X-IronPort-AV: E=Sophos;i="4.75,480,1330934400"; 
   d="scan'208";a="139539414"
Received: from unknown (HELO FAHQSNA09AMXS01.corp.firstam.com) ([69.87.16.90])
  by esa3.firstam.iphmx.com with ESMTP/TLS/RC4-SHA; 25 Apr 2012 03:45:42 -0700
X-ExtLoop1: 1
Received: from fahqsna09vxht03.corp.firstam.com ([172.17.247.137])
  by FAHQSNA09AMXS01.corp.firstam.com with ESMTP; 25 Apr 2012 03:45:42 -0700
Received: from FAHQSNA09SXMB03.corp.firstam.com ([fe80::90e:3cc4:7daf:ccde])
 by FAHQSNA09VXHT03.corp.firstam.com ([::1]) with mapi id 14.02.0247.003; Wed,
 25 Apr 2012 03:45:41 -0700
From: "Husain, Yavar" <yhusain@firstam.com>
To: Tomcat Users List <users@tomcat.apache.org>
Subject: RE: Tomcat 6.X 64 bit Crash on Windows Server 2008 R2
Thread-Topic: Tomcat 6.X 64 bit Crash on Windows Server 2008 R2
Thread-Index: Ac0iFJHtEpAnJiXsQl61lYlJo+64lgAUFfCwABrbBYA=
Date: Wed, 25 Apr 2012 10:45:41 +0000
Message-ID: <B686CB7902C3204CB9E867F069DEEFDC47B5D417@fahqsna09sxmb03.corp.firstam.com>
References: <B686CB7902C3204CB9E867F069DEEFDC47B5D192@fahqsna09sxmb03.corp.firstam.com>
 <7215BA462D00D343B2837F9113F0131F0105FCB688@POSTOFFICE02.polydyne.com>
In-Reply-To: <7215BA462D00D343B2837F9113F0131F0105FCB688@POSTOFFICE02.polydyne.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-originating-ip: [172.17.247.1]
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: quoted-printable

Thanks Jeffrey. Reverted back to Java 6 Update 31.=20

-----Original Message-----
From: Jeffrey Janner [mailto:Jeffrey.Janner@PolyDyne.com]=20
Sent: Wednesday, April 25, 2012 3:27 AM
To: 'Tomcat Users List'
Subject: RE: Tomcat 6.X 64 bit Crash on Windows Server 2008 R2

> -----Original Message-----
> From: Husain, Yavar [mailto:yhusain@firstam.com]
> Sent: Tuesday, April 24, 2012 7:20 AM
> To: users@tomcat.apache.org
> Subject: Tomcat 6.X 64 bit Crash on Windows Server 2008 R2
>=20
> Hi
>=20
>=20
> Solr 3.5 (Apache Java Search Application) was not returning results.=20
> To my surprise Tomcat 6.x (64 bit) was not running on my Windows=20
> Server
> 2008 R2 and hence the problem. I restarted it and everything seems to=20
> be fine now.
>=20
>=20
>=20
> Went to the Windows Event viewer and exported the following=20
> information as it relates to Tomcat:
>=20
>=20
>=20
> Level   Date and Time   Source  Event ID        Task Category
>=20
> Information      04/23/2012 8:51:58 AM  Service Control Manager 7036
> None    The Apache Tomcat 6 service entered the running state.
>=20
> Error            04/23/2012 4:17:12 AM  Service Control Manager 7034
> None    The Apache Tomcat 6 service terminated unexpectedly.  It has
> done this 2 time(s).
>=20
> Information      04/16/2012 3:13:15 PM  Service Control Manager 7036
> None    The Apache Tomcat 6 service entered the running state.
>=20
> Error            04/16/2012 1:12:47 PM  Service Control Manager 7034
> None    The Apache Tomcat 6 service terminated unexpectedly.  It has
> done this 1 time(s).
>=20
> Information      04/07/2012 10:02:25 PM Service Control Manager 7036
> None    The Apache Tomcat 6 service entered the running state.
>=20
>=20
>=20
>=20
>=20
> Here is what I see in the Tomcat Logs:
>=20
>=20
> 2012-04-16 15:13:13 Commons Daemon procrun stdout initialized # # A=20
> fatal error has been detected by the Java Runtime Environment:
> #
> #  Internal Error (os_windows_x86.cpp:149), pid=3D3496, tid=3D4124 #=20
> guarantee(result =3D=3D EXCEPTION_CONTINUE_EXECUTION) failed: Unexpected=20
> result from topLevelExceptionFilter # # JRE version: 7.0_02-b13 # Java
> VM: Java HotSpot(TM) 64-Bit Server VM (22.0-b10 mixed mode windows-
> amd64 compressed oops) # Failed to write core dump. Call to
> MiniDumpWriteDump() failed # # An error report file with more=20
> information is saved as:
> # C:\Windows\system32\hs_err_pid3496.log
> #
> # If you would like to submit a bug report, please visit:
> #   http://bugreport.sun.com/bugreport/crash.jsp
> #
>=20
>=20
>=20
> Any help would be appreciated.
>=20
>=20
>=20
> Thanks,
>=20
> Yavar
=20
Report the Java 7 bug to Sun via the url provided.
Then drop your Tomcat 6.x back to using the latest Java 6 release for 64-bi=
t Windows. It's seem pretty stable.
(that is if you are not relying on some new feature of Java 7).

Jeff
__________________________________________________________________________

Confidentiality Notice:  This Transmission (including any attachments) may =
contain information that is privileged, confidential, and exempt from discl=
osure under applicable law.  If the reader of this message is not the inten=
ded recipient you are hereby notified that any dissemination, distribution,=
 or copying of this communication is strictly prohibited. =20

If you have received this transmission in error, please immediately reply t=
o the sender or telephone (512) 343-9100 and delete this transmission from =
your system.


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org

***************************************************************************=
***************=20
This message may contain confidential or proprietary information intended o=
nly for the use of the=20
addressee(s) named above or may contain information that is legally privile=
ged. If you are=20
not the intended addressee, or the person responsible for delivering it to =
the intended addressee,=20
you are hereby notified that reading, disseminating, distributing or copyin=
g this message is strictly=20
prohibited. If you have received this message by mistake, please immediatel=
y notify us by=20
replying to the message and delete the original message and any copies imme=
diately thereafter.=20

Thank you.-=20
***************************************************************************=
***************
FAFLD


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233764-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 25 12:56:39 2012
Return-Path: <users-return-233764-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9C644950D
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 25 Apr 2012 12:56:39 +0000 (UTC)
Received: (qmail 74354 invoked by uid 500); 25 Apr 2012 12:56:35 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 74268 invoked by uid 500); 25 Apr 2012 12:56:35 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 74249 invoked by uid 99); 25 Apr 2012 12:56:35 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2012 12:56:35 +0000
Received: from localhost (HELO fc16x86v0.jboss.hr) (127.0.0.1)
  (smtp-auth username mturk, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2012 12:56:35 +0000
Message-ID: <4F97F47E.6020903@apache.org>
Date: Wed, 25 Apr 2012 14:56:30 +0200
From: Mladen Turk <mturk@apache.org>
User-Agent: Mozilla/5.0 (X11; Linux i686; rv:11.0) Gecko/20120329 Thunderbird/11.0.1
MIME-Version: 1.0
To: users@tomcat.apache.org
Subject: Re: 64bit windows mod_jk connector download for apache httpd 2.4
References: <CAG6aRdX7aA9J8RZ1OAhyUQCayi2D2E=_9FJryTH4Z1v7dDSosw@mail.gmail.com> <4F8F1EEB.2070000@apache.org> <CAG6aRdXuMWqvXLTv=M=-YNQzxX8LQLiTYyoYtUoUCQF32Ln-yQ@mail.gmail.com> <4F903E4B.3090603@christopherschultz.net> <4F92DA1E.7080000@apache.org> <4F956329.4060003@christopherschultz.net> <4F9576EC.5060508@apache.org> <4F95B55D.9050606@christopherschultz.net> <CAG6aRdUny40_+b7bQjRSuKvjZinpgC9-5piart3Uh6XVPvkHLw@mail.gmail.com> <CAG6aRdVF_VwRAjqG7QRffSOPPz-mte3mL2qk+TR52+ELZ4hHNA@mail.gmail.com>
In-Reply-To: <CAG6aRdVF_VwRAjqG7QRffSOPPz-mte3mL2qk+TR52+ELZ4hHNA@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

On 04/24/2012 09:30 PM, chris derham wrote:
>>
> And we have a winner - 64 bit mod_jk now present on
> http://www.apachelounge.com/download/win64/
>
> Thanks for all your help, and apache lounge for doing the work
>

Wow, that was fast.


Regards
-- 
^TM

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233765-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 25 13:48:41 2012
Return-Path: <users-return-233765-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CCA8591F8
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 25 Apr 2012 13:48:41 +0000 (UTC)
Received: (qmail 49493 invoked by uid 500); 25 Apr 2012 13:48:38 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 49410 invoked by uid 500); 25 Apr 2012 13:48:37 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 49400 invoked by uid 99); 25 Apr 2012 13:48:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2012 13:48:37 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aw@ice-sa.com designates 212.85.38.228 as permitted sender)
Received: from [212.85.38.228] (HELO tor.combios.es) (212.85.38.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2012 13:48:31 +0000
Received: from [192.168.245.129] (p549E8C28.dip0.t-ipconnect.de [84.158.140.40])
	by tor.combios.es (Postfix) with ESMTPA id A23D4DA079A
	for <users@tomcat.apache.org>; Wed, 25 Apr 2012 15:48:08 +0200 (CEST)
Message-ID: <4F980098.9090402@ice-sa.com>
Date: Wed, 25 Apr 2012 15:48:08 +0200
From: =?ISO-8859-1?Q?Andr=E9_Warnier?= <aw@ice-sa.com>
Reply-To: Tomcat Users List <users@tomcat.apache.org>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: 64bit windows mod_jk connector download for apache httpd 2.4
References: <CAG6aRdX7aA9J8RZ1OAhyUQCayi2D2E=_9FJryTH4Z1v7dDSosw@mail.gmail.com> <4F8F1EEB.2070000@apache.org> <CAG6aRdXuMWqvXLTv=M=-YNQzxX8LQLiTYyoYtUoUCQF32Ln-yQ@mail.gmail.com> <4F903E4B.3090603@christopherschultz.net> <4F92DA1E.7080000@apache.org> <4F956329.4060003@christopherschultz.net> <4F9576EC.5060508@apache.org> <4F95B55D.9050606@christopherschultz.net> <CAG6aRdUny40_+b7bQjRSuKvjZinpgC9-5piart3Uh6XVPvkHLw@mail.gmail.com> <CAG6aRdVF_VwRAjqG7QRffSOPPz-mte3mL2qk+TR52+ELZ4hHNA@mail.gmail.com> <4F97F47E.6020903@apache.org>
In-Reply-To: <4F97F47E.6020903@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Mladen Turk wrote:
> On 04/24/2012 09:30 PM, chris derham wrote:
>>>
>> And we have a winner - 64 bit mod_jk now present on
>> http://www.apachelounge.com/download/win64/
>>
>> Thanks for all your help, and apache lounge for doing the work
>>
> 
> Wow, that was fast.
> 
I am grateful too for the above, but since you appear to have a good connection, and for 
the sake of symmetry, should not one ask them also for the 32-bit version ?
Or does that make no sense anymore nowadays ?
(I just happen to still use a venerable XP 32-bit for testing, so it would be nice-to-have)


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233766-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 25 14:21:55 2012
Return-Path: <users-return-233766-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8893D9DA8
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 25 Apr 2012 14:21:55 +0000 (UTC)
Received: (qmail 49971 invoked by uid 500); 25 Apr 2012 14:21:52 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 49905 invoked by uid 500); 25 Apr 2012 14:21:51 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 49896 invoked by uid 99); 25 Apr 2012 14:21:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2012 14:21:51 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cjderham@gmail.com designates 209.85.217.173 as permitted sender)
Received: from [209.85.217.173] (HELO mail-lb0-f173.google.com) (209.85.217.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2012 14:21:45 +0000
Received: by lboi15 with SMTP id i15so163240lbo.18
        for <users@tomcat.apache.org>; Wed, 25 Apr 2012 07:21:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:reply-to:sender:in-reply-to:references:from:date
         :x-google-sender-auth:message-id:subject:to:content-type;
        bh=DdI/wddwBpb26wAiefsAcnaUVUWvmsv6GZGEG/YXxBc=;
        b=R/B4ALDTqWDZnvbZ8HVxyVYbqmWrwZfp7nYCc/4cwmCYPjTRnMROtCBqx3yp2otW/c
         Az3MoLn8H0jDCt3QPbou1J8FqURj9HZLXode+fUXnKmBQvP2M5UgIq4f6iOO/yA1ZgPo
         Cb27C20aqDLcqoWbFfZMz65KQZwCinBP/dRYOLslgozIxOukTXVEd04B6ZzUFqYDva/o
         sF04VEbD7yzAwXpNxrnJVkzb1FCZzwVoZm7/O3Bn6M86OxGF0xo9HFSJixkEt9KqA48S
         NfE0A8o7JTmuPlXiWem2nkVbW9tOwBO+8PKHAef0XJ9pIPKQ8VB2FJ/PaGoZmOzg7RWC
         IelA==
Received: by 10.112.48.6 with SMTP id h6mr1367556lbn.94.1335363684077; Wed, 25
 Apr 2012 07:21:24 -0700 (PDT)
MIME-Version: 1.0
Reply-To: chris@derham.me.uk
Sender: cjderham@gmail.com
Received: by 10.112.36.167 with HTTP; Wed, 25 Apr 2012 07:20:59 -0700 (PDT)
In-Reply-To: <4F980098.9090402@ice-sa.com>
References: <CAG6aRdX7aA9J8RZ1OAhyUQCayi2D2E=_9FJryTH4Z1v7dDSosw@mail.gmail.com>
 <4F8F1EEB.2070000@apache.org> <CAG6aRdXuMWqvXLTv=M=-YNQzxX8LQLiTYyoYtUoUCQF32Ln-yQ@mail.gmail.com>
 <4F903E4B.3090603@christopherschultz.net> <4F92DA1E.7080000@apache.org>
 <4F956329.4060003@christopherschultz.net> <4F9576EC.5060508@apache.org>
 <4F95B55D.9050606@christopherschultz.net> <CAG6aRdUny40_+b7bQjRSuKvjZinpgC9-5piart3Uh6XVPvkHLw@mail.gmail.com>
 <CAG6aRdVF_VwRAjqG7QRffSOPPz-mte3mL2qk+TR52+ELZ4hHNA@mail.gmail.com>
 <4F97F47E.6020903@apache.org> <4F980098.9090402@ice-sa.com>
From: chris derham <chris@derham.me.uk>
Date: Wed, 25 Apr 2012 11:20:59 -0300
X-Google-Sender-Auth: bt8A9BnZtVWfUtPH3DoSZVecn0U
Message-ID: <CAG6aRdXWRhGfRhNzVnS0tUBMBFBWwAFn6Pe_PRCBejyPqDirWg@mail.gmail.com>
Subject: Re: 64bit windows mod_jk connector download for apache httpd 2.4
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=bcaec554dce4090f9804be8196cf
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec554dce4090f9804be8196cf
Content-Type: text/plain; charset=ISO-8859-1

> Wow, that was fast.
>>
>> Far better than commercial support IMO


>  I am grateful too for the above, but since you appear to have a good
> connection, and for the sake of symmetry, should not one ask them also for
> the 32-bit version ?
>

I sent one email, and he went for it. I don't really call that a "good
connection". I also thought about the symmetry thing yesterday and asked
for a 32 bit one. He replied last night saying it was bed time, and would
do it tomorrow. He emailed again today saying it was there now, and when I
checked today and it was there. So I think we owe Steffen from apache
lounge some thanks/donations

Chris

--bcaec554dce4090f9804be8196cf--

From users-return-233767-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 25 14:46:12 2012
Return-Path: <users-return-233767-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E319995A0
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 25 Apr 2012 14:46:11 +0000 (UTC)
Received: (qmail 37569 invoked by uid 500); 25 Apr 2012 14:46:08 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 37526 invoked by uid 500); 25 Apr 2012 14:46:07 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 37513 invoked by uid 99); 25 Apr 2012 14:46:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2012 14:46:07 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [76.96.62.17] (HELO qmta10.westchester.pa.mail.comcast.net) (76.96.62.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2012 14:46:01 +0000
Received: from omta09.westchester.pa.mail.comcast.net ([76.96.62.20])
	by qmta10.westchester.pa.mail.comcast.net with comcast
	id 2E961j0060SCNGk5AEliKk; Wed, 25 Apr 2012 14:45:42 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta09.westchester.pa.mail.comcast.net with comcast
	id 2Elf1j00t38FjT13VElfE4; Wed, 25 Apr 2012 14:45:39 +0000
Message-ID: <4F980E16.7090904@christopherschultz.net>
Date: Wed, 25 Apr 2012 10:45:42 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: [OT ANNOUNCE]: Apache BarCamp D.C.
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

All,

(As this is off-topic, please reply directly to me or join the mailing
list indicated below... please don't reply to users@tomcat).

The Apache Software Foundation (ASF) is hosting its first Apache
BarCamp D.C. on Saturday, May 19 2012 from 9am-5pm.

If you will be in the area, do sign up and join us!

As with all Apache BarCamps, there will be a mix of Apache and
non-Apache talks given based on who comes and the topics that interest
them - with an emphasis on sharing knowledge and having a fun time.
For more details and/or to sign up, please take a look at our event
site http://events.apache.org/event/2012/barcamp-dc.

If you have specific questions or want to help out, feel free to email
me or the planning group <apachebarcampdc@googlegroups.com>.

While the discussion will be based on who shows up, we anticipate at
least good discussion on Apache Mahout, Apache Tika, Apache
Lucene/Solr, Apache Accumulo, Contributing to Apache, and the Apache Way!

** Sponsorship Opportunities**
We are also wanting a few more sponsors, so if the D.C. market is
interesting to your company, sponsoring is a great way to get your
name out there.  If you'd like to find out some sponsoring details,
please send me a note privately.

Thanks!
- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+YDhYACgkQ9CaO5/Lv0PB/zQCgqkqwti2cAYAdOpGu+8BdbEIw
L7UAn0F8Bu8L5ViFr6YVvmneew2KMn11
=OSaW
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233768-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 25 14:57:24 2012
Return-Path: <users-return-233768-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 829F99A2D
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 25 Apr 2012 14:57:24 +0000 (UTC)
Received: (qmail 81169 invoked by uid 500); 25 Apr 2012 14:57:20 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 81098 invoked by uid 500); 25 Apr 2012 14:57:20 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 81084 invoked by uid 99); 25 Apr 2012 14:57:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2012 14:57:20 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [76.96.62.56] (HELO qmta06.westchester.pa.mail.comcast.net) (76.96.62.56)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2012 14:57:14 +0000
Received: from omta16.westchester.pa.mail.comcast.net ([76.96.62.88])
	by qmta06.westchester.pa.mail.comcast.net with comcast
	id 2DFY1j0051uE5Es56EwuLZ; Wed, 25 Apr 2012 14:56:54 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta16.westchester.pa.mail.comcast.net with comcast
	id 2Ewv1j01c38FjT13cEwwPB; Wed, 25 Apr 2012 14:56:56 +0000
Message-ID: <4F9810B6.4010602@christopherschultz.net>
Date: Wed, 25 Apr 2012 10:56:54 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Mod_jk returning source code of jsp files
References: <COL113-W248A31965DC681CB4DA9BACF210@phx.gbl>,<CAAKASGwj8CegxJh_3GHPtVo1ABCeHxzadEHaZ6Janag4z9EaBA@mail.gmail.com>,<COL113-W44B1E7156B779CB03139C0CF210@phx.gbl>,<CAAKASGwaSYN2=Lsi1Wi9mj7m9+rjKvCJcqYSh-DPBJrcXnYP0A@mail.gmail.com> <COL113-W54359168808CAD3842C8A6CF210@phx.gbl>,<4F956150.6050705@christopherschultz.net> <COL113-W1267B3596B51C8C14E51F2CF210@phx.gbl>
In-Reply-To: <COL113-W1267B3596B51C8C14E51F2CF210@phx.gbl>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Ironclaw,

Let's take a step back.

On 4/23/12 10:19 AM, ironclaw hand wrote:
> Thanks Christopher I will address the security issues if I am 
> actually able to get mod_jk to execute a jsp!

I tend to agree with Andr, here and his assertions that there's no
reason to wait "until it's working". Presumably, since you've been
tasked with getting this to work, it /must/ work at the end...
scrapping httpd isn't an option for you, so you may as well solve this
problem since it's the easier one to solve.

Honestly, I'm not sure exactly why your configuration doesn't work:
I've never had trouble configuring mod_jk.

> I have now removed everything from mod_jk.conf except for the
> global directives and I now have my httpd.conf looking like:

So what *is* in your mod_jk.conf file? I would have expected
"LoadModule" and "Include" to be in there, as well as JkWorkersFile,
JkLogLevel, etc. Basically, everything but Jk(Un)?Mount directives.

Oh! I also usually recommend setting "JkStripSession On" so that URLs
to static content that happen to contain jsessionid path parameters
don't confuse httpd and prevent those resources from loading.

> # # JK for connections to Tomcat # LoadModule jk_module
> modules/mod_jk.so Include /etc/httpd/conf/mod_jk.conf
> 
> <IfModule jk_module> JkWorkersFile
> /etc/httpd/conf/workers.properties JkLogFile
> /var/log/httpd/mod_jk.log JkLogLevel info

Put all of the above at the top-level. It's not surprising that it
doesn't work, but I didn't actually know that you can't put
JkWorkersFile in a VirtualHost. I guess the documentation[1] is fairly
clear:

"
JkWorkersFile

The name of a worker file for the Tomcat servlet containers.
This directive is only allowed once. It must be put into the global
part of the configuration.
"
[1] http://tomcat.apache.org/connectors-doc/reference/apache.html

> Alias /sft "/var/webapps/sft"

[security]: we've discussed this

> <Directory "/var/webapps/sft"> Options Indexes FollowSymLinks

[security]: do you really need Indexes enabled? I find that to be a
security vulnerability unless you want people to be able to browse and
download arbitrary files. Sometimes that's what you want, but usually
not within a webapp.

> </Directory>
> 
> <Location "/sft/WEB-INF/"> AllowOverride None deny from all 
> </Location>

[security]: I would definitely do this as a <Directory> instead of a
<Location>: that way, you're protected no matter how the URL resolves
to the filesystem.

> <VirtualHost sfta.a.b.c:443> JkMount /sft/* loadbalancer JkUnMount
> /*.html loadbalancer

Just for parity, I'd make that:

JkUnMount /sft/*.html loadbalancer

That way, you don't accidentally unmount everything on the whole site
when you really only wanted to allow static files form that one webapp
to be unmounted.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+YELYACgkQ9CaO5/Lv0PDqmACgiPptfKAAC+Lah1I8B1tszZ4f
a0wAoJxU9ft/xII/8ubKM14ariJT5sWL
=lokh
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233769-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 25 14:58:28 2012
Return-Path: <users-return-233769-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C37389A87
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 25 Apr 2012 14:58:28 +0000 (UTC)
Received: (qmail 86277 invoked by uid 500); 25 Apr 2012 14:58:25 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 86219 invoked by uid 500); 25 Apr 2012 14:58:25 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 86208 invoked by uid 99); 25 Apr 2012 14:58:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2012 14:58:25 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [76.96.62.48] (HELO qmta05.westchester.pa.mail.comcast.net) (76.96.62.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2012 14:58:17 +0000
Received: from omta07.westchester.pa.mail.comcast.net ([76.96.62.59])
	by qmta05.westchester.pa.mail.comcast.net with comcast
	id 2Eul1j0061GhbT855Exx08; Wed, 25 Apr 2012 14:57:57 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta07.westchester.pa.mail.comcast.net with comcast
	id 2Exy1j01E38FjT13TExzTc; Wed, 25 Apr 2012 14:57:59 +0000
Message-ID: <4F9810F5.1090401@christopherschultz.net>
Date: Wed, 25 Apr 2012 10:57:57 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: parallel deployment activation of new version
References: <15D3435601304A49A5E13D0825711B6128CC5706@EXCHANGE07.webde.local>  <c9852e00-8f22-4a9a-99b7-7543ab14d743@email.android.com>  <15D3435601304A49A5E13D0825711B6128CC570C@EXCHANGE07.webde.local>  <efd47547-82e2-4d89-b0e3-76747acb8a6c@email.android.com>  <15D3435601304A49A5E13D0825711B6128CC5740@EXCHANGE07.webde.local>  <4F903B82.6080508@christopherschultz.net> <1335110109.8682.4.camel@meierpad.localdomain> <4F9561F2.3050702@christopherschultz.net> <4F9606E5.5070100@pidster.com>
In-Reply-To: <4F9606E5.5070100@pidster.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Pid,

On 4/23/12 9:50 PM, Pid wrote:
> On 23/04/2012 15:06, Christopher Schultz wrote:
>> Christoph,
>> 
>> On 4/22/12 11:55 AM, Christoph Maser wrote:
>>> Chris,
>> 
>>> Am Donnerstag, den 19.04.2012, 18:21 +0200 schrieb Christopher 
>>> Schultz:
>>>> Christoph,
>>>> 
>>>> What about the webapp itself performing its own health-check
>>>> as a last step of deployment, and throwing an exception
>>>> (thereby preventing Tomcat from bringing it into service) if
>>>> things aren't in working order?
>> 
>>> this is the obvious way to do it as it is now. As I said
>>> before that way one looses the access to the wapps status
>>> pages.
>> 
>> So you want the webapp both up (for status) and down (for
>> traffic) at the same time? Tomcat certainly can't manage that for
>> you.
>> 
>> If you need "status" on a failed-deployment, why not dump it to a
>> file or something like that?
> 
> Or use JMX rather than HTTP to acquire status information.

In theory that sounds good, but the webapp needs to be deployed in
order to interrogate it via JMX. Once it's deployed, it's in service
(even if it's broken) and the system falls apart.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+YEPUACgkQ9CaO5/Lv0PB+PQCcChgwpeR0ODTcnn8+RiOHFdaR
mOwAoJcHd4fb6hTUf+Zy3OkpgfV2G97o
=o1DV
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233770-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 25 15:00:43 2012
Return-Path: <users-return-233770-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 880149B91
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 25 Apr 2012 15:00:43 +0000 (UTC)
Received: (qmail 95465 invoked by uid 500); 25 Apr 2012 15:00:40 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 95374 invoked by uid 500); 25 Apr 2012 15:00:40 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 95365 invoked by uid 99); 25 Apr 2012 15:00:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2012 15:00:40 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [76.96.62.16] (HELO qmta01.westchester.pa.mail.comcast.net) (76.96.62.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2012 15:00:33 +0000
Received: from omta20.westchester.pa.mail.comcast.net ([76.96.62.71])
	by qmta01.westchester.pa.mail.comcast.net with comcast
	id 2C5k1j0031YDfWL51F0Eax; Wed, 25 Apr 2012 15:00:14 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta20.westchester.pa.mail.comcast.net with comcast
	id 2F0C1j01038FjT13gF0Ddc; Wed, 25 Apr 2012 15:00:13 +0000
Message-ID: <4F98117E.4040307@christopherschultz.net>
Date: Wed, 25 Apr 2012 11:00:14 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Payload for Tomcat 7
References: <4f97d33c.ce7f0e0a.12bc.ffff810b@mx.google.com>
In-Reply-To: <4f97d33c.ce7f0e0a.12bc.ffff810b@mx.google.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Rajat,

On 4/25/12 6:35 AM, Rajat wrote:
> How to use the payload in Tomcat 7.

??

> What I have observed is payload is not being sent for self member
> in Tomcat 7 when we start the cluster.

I think you're going to have to give us a better explanation of your
question. We'd be glad to help if you give us more information.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+YEX4ACgkQ9CaO5/Lv0PCecACfZoluYBqAOpwoJE2WQyc/cVgR
CIMAn0KM438v8f2LV6vct0puhSZYOp7k
=p2sG
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233771-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 25 15:03:01 2012
Return-Path: <users-return-233771-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 542A79C59
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 25 Apr 2012 15:03:01 +0000 (UTC)
Received: (qmail 8880 invoked by uid 500); 25 Apr 2012 15:02:57 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 8700 invoked by uid 500); 25 Apr 2012 15:02:57 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 8691 invoked by uid 99); 25 Apr 2012 15:02:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2012 15:02:57 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [76.96.62.56] (HELO qmta06.westchester.pa.mail.comcast.net) (76.96.62.56)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2012 15:02:50 +0000
Received: from omta22.westchester.pa.mail.comcast.net ([76.96.62.73])
	by qmta06.westchester.pa.mail.comcast.net with comcast
	id 2B941j0021ap0As56F2Xu3; Wed, 25 Apr 2012 15:02:31 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta22.westchester.pa.mail.comcast.net with comcast
	id 2F2X1j01V38FjT13iF2Yvu; Wed, 25 Apr 2012 15:02:32 +0000
Message-ID: <4F981207.70307@christopherschultz.net>
Date: Wed, 25 Apr 2012 11:02:31 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: 64bit windows mod_jk connector download for apache httpd 2.4
References: <CAG6aRdX7aA9J8RZ1OAhyUQCayi2D2E=_9FJryTH4Z1v7dDSosw@mail.gmail.com> <4F8F1EEB.2070000@apache.org> <CAG6aRdXuMWqvXLTv=M=-YNQzxX8LQLiTYyoYtUoUCQF32Ln-yQ@mail.gmail.com> <4F903E4B.3090603@christopherschultz.net> <4F92DA1E.7080000@apache.org> <4F956329.4060003@christopherschultz.net> <4F9576EC.5060508@apache.org> <4F95B55D.9050606@christopherschultz.net> <CAG6aRdUny40_+b7bQjRSuKvjZinpgC9-5piart3Uh6XVPvkHLw@mail.gmail.com> <CAG6aRdVF_VwRAjqG7QRffSOPPz-mte3mL2qk+TR52+ELZ4hHNA@mail.gmail.com> <4F97F47E.6020903@apache.org>
In-Reply-To: <4F97F47E.6020903@apache.org>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Mladen,

On 4/25/12 8:56 AM, Mladen Turk wrote:
> On 04/24/2012 09:30 PM, chris derham wrote:
>>> 
>> And we have a winner - 64 bit mod_jk now present on 
>> http://www.apachelounge.com/download/win64/
>> 
>> Thanks for all your help, and apache lounge for doing the work
>> 
> 
> Wow, that was fast.

Well, you give good build instructions :)

We should probably link to them on our downloads page, since they are
being so courteous.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+YEgcACgkQ9CaO5/Lv0PD/ugCfS7qO5EzY5buvtueYzoVOOfav
xsMAoK74h1bFsNUvDPIpJIcbz9J3+VmF
=Z0K/
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233772-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 25 15:11:35 2012
Return-Path: <users-return-233772-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 845EF9FA3
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 25 Apr 2012 15:11:35 +0000 (UTC)
Received: (qmail 40052 invoked by uid 500); 25 Apr 2012 15:11:32 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 39844 invoked by uid 500); 25 Apr 2012 15:11:31 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 39833 invoked by uid 99); 25 Apr 2012 15:11:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2012 15:11:31 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [216.82.241.99] (HELO mail51.messagelabs.com) (216.82.241.99)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2012 15:11:23 +0000
X-Env-Sender: Chuck.Caldarale@unisys.com
X-Msg-Ref: server-16.tower-51.messagelabs.com!1335366657!9834636!14
X-Originating-IP: [192.61.61.105]
X-StarScan-Version: 6.5.5; banners=-,-,-
X-VirusChecked: Checked
Received: (qmail 17384 invoked from network); 25 Apr 2012 15:11:01 -0000
Received: from naedge.unisys.com (HELO USEA-NAEDGE2.unisys.com) (192.61.61.105)
  by server-16.tower-51.messagelabs.com with RC4-SHA encrypted SMTP; 25 Apr 2012 15:11:01 -0000
Received: from usea-nahubcas1.na.uis.unisys.com (129.224.76.114) by
 USEA-NAEDGE2.unisys.com (192.61.61.105) with Microsoft SMTP Server (TLS) id
 8.3.83.0; Wed, 25 Apr 2012 10:10:44 -0500
Received: from USEA-EXCH8.na.uis.unisys.com ([129.224.76.41]) by
 usea-nahubcas1.na.uis.unisys.com ([129.224.76.114]) with mapi; Wed, 25 Apr
 2012 10:10:44 -0500
From: "Caldarale, Charles R" <Chuck.Caldarale@unisys.com>
To: Tomcat Users List <users@tomcat.apache.org>
Date: Wed, 25 Apr 2012 10:10:40 -0500
Subject: RE: Payload for Tomcat 7
Thread-Topic: Payload for Tomcat 7
Thread-Index: Ac0i9SDMKvcX9uwNTOqQ3X3RLHpozgAAB6UA
Message-ID: <99C8B2929B39C24493377AC7A121E21FB019303883@USEA-EXCH8.na.uis.unisys.com>
References: <4f97d33c.ce7f0e0a.12bc.ffff810b@mx.google.com>
 <4F98117E.4040307@christopherschultz.net>
In-Reply-To: <4F98117E.4040307@christopherschultz.net>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0

PiBGcm9tOiBDaHJpc3RvcGhlciBTY2h1bHR6IFttYWlsdG86Y2hyaXNAY2hyaXN0b3BoZXJzY2h1
bHR6Lm5ldF0gDQo+IFN1YmplY3Q6IFJlOiBQYXlsb2FkIGZvciBUb21jYXQgNw0KDQo+IE9uIDQv
MjUvMTIgNjozNSBBTSwgUmFqYXQgd3JvdGU6DQo+ID4gSG93IHRvIHVzZSB0aGUgcGF5bG9hZCBp
biBUb21jYXQgNy4NCg0KPiA/Pw0KDQpDbGVhcmx5LCB0aGUgYW5zd2VyIGlzIDQyLg0KDQo+ID4g
V2hhdCBJIGhhdmUgb2JzZXJ2ZWQgaXMgcGF5bG9hZCBpcyBub3QgYmVpbmcgc2VudCBmb3Igc2Vs
ZiBtZW1iZXINCj4gPiBpbiBUb21jYXQgNyB3aGVuIHdlIHN0YXJ0IHRoZSBjbHVzdGVyLg0KDQo+
IEkgdGhpbmsgeW91J3JlIGdvaW5nIHRvIGhhdmUgdG8gZ2l2ZSB1cyBhIGJldHRlciBleHBsYW5h
dGlvbiBvZiB5b3VyDQo+IHF1ZXN0aW9uLiBXZSdkIGJlIGdsYWQgdG8gaGVscCBpZiB5b3UgZ2l2
ZSB1cyBtb3JlIGluZm9ybWF0aW9uLg0KDQpPciB0byBwdXQgaXQgYW5vdGhlciB3YXksIHJlYWQg
dGhpczoNCg0KaHR0cDovL3d3dy5jYXRiLm9yZy9+ZXNyL2ZhcXMvc21hcnQtcXVlc3Rpb25zLmh0
bWwNCg0KdGhlbiBwb3N0Lg0KDQogLSBDaHVjaw0KDQoNClRISVMgQ09NTVVOSUNBVElPTiBNQVkg
Q09OVEFJTiBDT05GSURFTlRJQUwgQU5EL09SIE9USEVSV0lTRSBQUk9QUklFVEFSWSBNQVRFUklB
TCBhbmQgaXMgdGh1cyBmb3IgdXNlIG9ubHkgYnkgdGhlIGludGVuZGVkIHJlY2lwaWVudC4gSWYg
eW91IHJlY2VpdmVkIHRoaXMgaW4gZXJyb3IsIHBsZWFzZSBjb250YWN0IHRoZSBzZW5kZXIgYW5k
IGRlbGV0ZSB0aGUgZS1tYWlsIGFuZCBpdHMgYXR0YWNobWVudHMgZnJvbSBhbGwgY29tcHV0ZXJz
Lg0KDQo=
DQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IHVzZXJzLXVuc3Vi
c2NyaWJlQHRvbWNhdC5hcGFjaGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1t
YWlsOiB1c2Vycy1oZWxwQHRvbWNhdC5hcGFjaGUub3JnDQoN

From users-return-233773-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 25 19:39:45 2012
Return-Path: <users-return-233773-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BECC39601
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 25 Apr 2012 19:39:45 +0000 (UTC)
Received: (qmail 54131 invoked by uid 500); 25 Apr 2012 19:39:42 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 54068 invoked by uid 500); 25 Apr 2012 19:39:42 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 54059 invoked by uid 99); 25 Apr 2012 19:39:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2012 19:39:42 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [76.96.62.64] (HELO qmta07.westchester.pa.mail.comcast.net) (76.96.62.64)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2012 19:39:34 +0000
Received: from omta18.westchester.pa.mail.comcast.net ([76.96.62.90])
	by qmta07.westchester.pa.mail.comcast.net with comcast
	id 2H5V1j0041wpRvQ57KfEfQ; Wed, 25 Apr 2012 19:39:14 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta18.westchester.pa.mail.comcast.net with comcast
	id 2KfB1j02738FjT13eKfC7a; Wed, 25 Apr 2012 19:39:12 +0000
Message-ID: <4F9852E0.9060401@christopherschultz.net>
Date: Wed, 25 Apr 2012 15:39:12 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Connection between Web Application and DB
References: <BLU0-SMTP363FF9D3D79D7D4719D6A70B1210@phx.gbl>
In-Reply-To: <BLU0-SMTP363FF9D3D79D7D4719D6A70B1210@phx.gbl>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Anjib,

On 4/23/12 10:53 AM, Anjib Mulepati wrote:
> I have my DB and web application running in different machine. And 
> whenever my DB machine restart my application fail since it can't 
> connect to the DB.

That sounds like something that's fixable. :)

(Since we're here already, might I ask if you are using SSL or some
kind of secure VPN or something to connect your app server to your db
server? If not, you should seriously consider it.)

> I am using Struts Plug-in  to load connection information from
> web.xml file and creating the DAO factory from the information. DAO
> factory is stored in servlet context. Now this daoFactory is used
> by each DAO class to create the connection.

Okay.

> This problem exist in my system for long time and trying to fix it.
> I have put my most code here to make things clear. I am using
> tomcat 7.0.26
> 
> 1. Context parameter in web.xml

If your db works at all, then this is set up correctly.

> [...]
> 
> public Connection createConnection() throws DAOException { try { 
> String str = "java:comp/env/" + dbConfig.getResRef(); DataSource
> dataSource = (DataSource) 
> ServiceLocator.getInstance().getDataSource(str); return
> dataSource.getConnection();

Good: you always get a connection from the JNDI DataSource.

> <Resource auth="Container" 
> driverClassName="oracle.jdbc.driver.OracleDriver" maxActive="20" 
> maxIdle="10" maxWait="2000" name="jdbc/mydb" password="passw0rd" 
> testOnBorrow="true" type="javax.sql.DataSource" 
> url="jdbc:oracle:thin:@//localhost:5000/TESTDB" username="scott" 
> validationQuery="SELECT 1 FROM DUAL" />

I would expect that the above configuration would recover from severed
database connections: you have a validationQuery and testOnBorrow is
true by default (though it doesn't really hurt to specify it, here).

Are you sure Tomcat is using the configuration you have posted here?
If you've been playing with it a lot lately and haven't properly
re-deployed then Tomcat may be using an old configuration. Look in
CATALINA_BASE/conf/[engine]/[hostname]/ for a .xml file matching the
name of your webapp. That's the one Tomcat is using if it's there.

If everything looks good with the context.xml file, then the next
question is whether there is some other code in your webapp that might
be getting a database connection in some other way. Does your stack
trace (should occur when the database restarts) show that the error is
happening in code where the connection definitely came through your
DAOFactory class(es)?

Finally, you might be able to check to see if something funny is going
on by setting your validationQuery to something syntactically invalid
(like "SELECT this is broken") just to see if you can get the
validation query itself to fail. You might learn something from that
exercise.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+YUuAACgkQ9CaO5/Lv0PCRsgCfQdw8OmMqbou8YyULz9GaP0vl
3CYAn1UPhwrXWVbcY8PxdLbEMSJzHIhQ
=ObFm
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233774-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 25 20:09:47 2012
Return-Path: <users-return-233774-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 86DD5910E
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 25 Apr 2012 20:09:47 +0000 (UTC)
Received: (qmail 52491 invoked by uid 500); 25 Apr 2012 20:09:44 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 52423 invoked by uid 500); 25 Apr 2012 20:09:44 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 52414 invoked by uid 99); 25 Apr 2012 20:09:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2012 20:09:44 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [217.12.10.35] (HELO nm21-vm3.bullet.mail.ukl.yahoo.com) (217.12.10.35)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 25 Apr 2012 20:09:37 +0000
Received: from [217.146.183.216] by nm21.bullet.mail.ukl.yahoo.com with NNFMP; 25 Apr 2012 20:09:17 -0000
Received: from [217.146.183.125] by tm9.bullet.mail.ukl.yahoo.com with NNFMP; 25 Apr 2012 20:09:17 -0000
Received: from [127.0.0.1] by smtp102.mail.ukl.yahoo.com with NNFMP; 25 Apr 2012 20:09:17 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.es; s=s1024; t=1335384557; bh=O8eWg51mOaKMgqtTwWPNpTQWhPqsnK6baafJWINgXJY=; h=X-Yahoo-Newman-Id:X-Yahoo-Newman-Property:X-YMail-OSG:X-Yahoo-SMTP:Received:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding:X-Antivirus:X-Antivirus-Status; b=0X9osxU2qt/QuXr/uAPAhowW0kmqq8MBrmQQTlLTT4v770wdCwSU4BTRD0t5tGVGbGaHywY84eq9/lzrP32Tl+ClmAtrt3yAnmXRyhsLHbc1guKU/tVFBXtC4s+oKowWhnHemPr05y3TCZ93iCG4psIrGMsBPED/BknSRzvUmGA=
X-Yahoo-Newman-Id: 17840.37006.bm@smtp102.mail.ukl.yahoo.com
X-Yahoo-Newman-Property: ymail-3
X-YMail-OSG: N1duvmMVM1ktBn5CCshorQKLemnQZsYBUqIvuXlSzjqB76A
 ngL5cbbncKVPe_Kx6gWeTV_wiYl.fZbs_KGdUyGrxUykKxwkFe3kxTfR4N7V
 FWgwelzHo.BX9gGNihl_zy9_CmroPAI3aXE4.CDIwGk_JEs9mrQWtCCJbnQO
 394Cn1fmqB1OzkzJoCk5NAhTX8JfFNZsSsj7x0JfLRTq0pVMvKK1h8_F32Bl
 GYPmBbe91pOzLsj7GFDE_2wrk3FCikRLOiK4x3k0ueLRMRsy2hnJdiIvLzUM
 ic3ccUO.7bW1W9RTXPbFX5Ps1TtwcHL9T2HTjdd1zqIOu.CHz8SfRFbHBrBw
 fGRgUEXca4p64U5MXqc35qrWZiii9_msNtAOcwyXmvmYgZ4ViQ0v5tRaZlen
 vIFt7AE8f8WXuEZo1Oz.CnSvUBNO9UPDtemSPlJI9bSlw8NJi_l0YDKSGXUq
 .3qWCioCGKKZgoIiS2Sw5EidbHm3XEkL1O7oMygzJvtU2R3TVkJOBD8ifEdW
 p7sEkXFdVC36iUrhwX9tGi3tZgPlumMSQdVqjVsGeWyuYbkQPNqUSH9AMh0O
 wnAyt4eopUiIJYeQ-
X-Yahoo-SMTP: 4morDKeswBDE3lIuzd.cm_qbJNxlcsznEWqdK4MN
Received: from [127.0.0.1] (miguel_3_gonzalez@85.49.201.214 with plain)
        by smtp102.mail.ukl.yahoo.com with SMTP; 25 Apr 2012 13:09:16 -0700 PDT
Message-ID: <4F9859EB.8080709@yahoo.es>
Date: Wed, 25 Apr 2012 22:09:15 +0200
From: =?UTF-8?B?TWlndWVsIEdvbnrDoWxleiBDYXN0YcOxb3M=?= <miguel_3_gonzalez@yahoo.es>
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Javamelody and Struts
References: <CBB234E5.2AAB3%darryl.lewis@unsw.edu.au> <4F95B427.9040400@yahoo.es> <4F95B4C9.9010802@christopherschultz.net> <4F95C2F3.9040307@yahoo.es> <4F95CB23.5070803@yahoo.es>
In-Reply-To: <4F95CB23.5070803@yahoo.es>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Antivirus: avast! (VPS 120425-0, 25/04/2012), Outbound message
X-Antivirus-Status: Clean

On 23/04/2012 23:35, Miguel Gonzlez Castaos wrote:
> On 23/04/2012 23:00, Miguel Gonzlez Castaos wrote:
>>> Have you imported all of the "intermediate" certificates from
>>> VeriSign. I think that for some SSL certificates, you need *two*
>>> intermediate certificates from VeriSign.
>> No, I didn't know that I had to do that. Where can I download those 
>> intermediate certificates?
>>
>> Many thanks for the hint
> I found them here I believe
>
> http://www.verisign.com/support/verisign-intermediate-ca/secure-site-intermediate/index.html 
>
>
> I will give it a try
I've downloaded the certificates as veriCA1.cer and veriCA2.cer and run:

keytool -import -trustcacerts -alias EV_root -keystore 
/opt/tomcat5/certs/tcc -file veriCA1.cer

keytool -import -trustcacerts -alias EVIntermediate -keystore 
/opt/tomcat5/certs/tcc -file veriCA2.cer

after that I restarted Tomcat.

Unfortunately I'm getting the same error

Miguel

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233775-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 25 20:21:43 2012
Return-Path: <users-return-233775-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id ECABB97C5
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 25 Apr 2012 20:21:43 +0000 (UTC)
Received: (qmail 92060 invoked by uid 500); 25 Apr 2012 20:21:40 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 91811 invoked by uid 500); 25 Apr 2012 20:21:40 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 91801 invoked by uid 99); 25 Apr 2012 20:21:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2012 20:21:40 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pid@pidster.com designates 74.125.82.43 as permitted sender)
Received: from [74.125.82.43] (HELO mail-wg0-f43.google.com) (74.125.82.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2012 20:21:32 +0000
Received: by wgbdr1 with SMTP id dr1so419695wgb.0
        for <users@tomcat.apache.org>; Wed, 25 Apr 2012 13:21:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type;
        bh=HXs/j9G+EwVGgOS+jn8MVc6xR2qpOR5P0mM2wucKk1U=;
        b=hVxyHsHClTxgWvvHzxgEFBYIYDvz4iDRIWanyLWt0Gqldpd6xahRMgsSI8aZZ0VM5O
         sPxN/3wqk1UAbnacElW2n0iXlQvKUI7VnaX0uV1ltpoc1RJh7wuuZB2G9u2frTaCTLd5
         MbVTNFu/LhtdzPCy224gcbrpuP2M5r4PZWEEE=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type:x-gm-message-state;
        bh=HXs/j9G+EwVGgOS+jn8MVc6xR2qpOR5P0mM2wucKk1U=;
        b=VQU87uoM8tCa5PV2aGIzoQObEHQ10IDRuAUPwYZ/fW/ewTIl8QjdqprY5xzhFXRbH/
         kiooIyVdj3BpLUNg7Dl6tav2jFta1O1LPvOWPLwCK3Yr5rERuol+I26qNVcv39ysQTZP
         3EQXw9HzyJI2Nj7BkaKa5C2CPjUrTcbTWa58RD5jA5q2s1GcLefJ7xMJgAyzCZw5P1UZ
         Ot87Dwtf5aNPZXqSCTQl0mxQYVl8vGYfHsowX37jWVT3nUNdbzTOcDz82Qx0jAXFXF7L
         Ci37Y3GXf4jsYd9wLlBcmhTyQiACHjfI+fA/it84k2xEN2qqZjG4nBedn2cglOBM+rZe
         SSEw==
Received: by 10.180.88.67 with SMTP id be3mr9714062wib.20.1335385271823;
        Wed, 25 Apr 2012 13:21:11 -0700 (PDT)
Received: from Asura.local (cpc10-lewi14-2-0-cust355.2-4.cable.virginmedia.com. [82.4.249.100])
        by mx.google.com with ESMTPS id j3sm2662278wiw.1.2012.04.25.13.21.10
        (version=SSLv3 cipher=OTHER);
        Wed, 25 Apr 2012 13:21:10 -0700 (PDT)
Message-ID: <4F985CB4.6040208@pidster.com>
Date: Wed, 25 Apr 2012 21:21:08 +0100
From: Pid <pid@pidster.com>
Organization: Pidster Inc
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:12.0) Gecko/20120420 Thunderbird/12.0
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: parallel deployment activation of new version
References: <15D3435601304A49A5E13D0825711B6128CC5706@EXCHANGE07.webde.local>  <c9852e00-8f22-4a9a-99b7-7543ab14d743@email.android.com>  <15D3435601304A49A5E13D0825711B6128CC570C@EXCHANGE07.webde.local>  <efd47547-82e2-4d89-b0e3-76747acb8a6c@email.android.com>  <15D3435601304A49A5E13D0825711B6128CC5740@EXCHANGE07.webde.local>  <4F903B82.6080508@christopherschultz.net> <1335110109.8682.4.camel@meierpad.localdomain> <4F9561F2.3050702@christopherschultz.net> <4F9606E5.5070100@pidster.com> <4F9810F5.1090401@christopherschultz.net>
In-Reply-To: <4F9810F5.1090401@christopherschultz.net>
X-Enigmail-Version: 1.4.1
OpenPGP: id=62590808
Content-Type: multipart/signed; micalg=pgp-sha512;
 protocol="application/pgp-signature";
 boundary="------------enig8FB43E959095330F8E0DA262"
X-Gm-Message-State: ALoCoQkJQaUOXdvQgx9Rj4sqb6Aet0fCOCEkZDcwmPA+GehCsV+xMij801l8Ge5BbmzMrPhCP+AN

--------------enig8FB43E959095330F8E0DA262
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On 25/04/2012 15:57, Christopher Schultz wrote:
> Pid,
>=20
> On 4/23/12 9:50 PM, Pid wrote:
>> On 23/04/2012 15:06, Christopher Schultz wrote:
>>> Christoph,
>>>
>>> On 4/22/12 11:55 AM, Christoph Maser wrote:
>>>> Chris,
>>>
>>>> Am Donnerstag, den 19.04.2012, 18:21 +0200 schrieb Christopher=20
>>>> Schultz:
>>>>> Christoph,
>>>>>
>>>>> What about the webapp itself performing its own health-check
>>>>> as a last step of deployment, and throwing an exception
>>>>> (thereby preventing Tomcat from bringing it into service) if
>>>>> things aren't in working order?
>>>
>>>> this is the obvious way to do it as it is now. As I said
>>>> before that way one looses the access to the wapps status
>>>> pages.
>>>
>>> So you want the webapp both up (for status) and down (for
>>> traffic) at the same time? Tomcat certainly can't manage that for
>>> you.
>>>
>>> If you need "status" on a failed-deployment, why not dump it to a
>>> file or something like that?
>=20
>> Or use JMX rather than HTTP to acquire status information.
>=20
> In theory that sounds good, but the webapp needs to be deployed in
> order to interrogate it via JMX. Once it's deployed, it's in service
> (even if it's broken) and the system falls apart.

Which 'system falls apart'?


JMX provides an alternative route to determine application status that
is not impacted by whether the app is up or down.

If the app is not deployed there will be no associated MBeans.

If it is deployed but not running the status attribute of the WebModule
MBean will indicate this.


An HTTP connection is much less reliable and trying to do what the OP is
asking is unlikely to provide a universally reliable result.

If the app is well behaved then it could start up enough to report it's
health, given some components not starting properly - but I think the OP
is asking for something else.


p






--=20

[key:62590808]


--------------enig8FB43E959095330F8E0DA262
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.18 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iQIcBAEBCgAGBQJPmFy0AAoJEGoM2OGpOvr9t2MP/2Sk+fX53nycEF3lxi6kp+uA
UlpAKYXOAi0/jcYEykf2gUaMSxHxV2StQAqEbjJNLlcGyo7fxS9UQeCa+K8KDF0j
Q8WhQdG+VlSnp7zIdW8+E1IPEzJqCN9byVjXi4OUEC3p1n5PHvNBZMjE/rAViAFb
Cb7zDO+ziiItiSa39M1gVs3k6m2cpVQZqafGJik4wzHKUIu0SMkAvlI6k9Hh/3AR
395Y/4J8hDJ5dVjO+QPFHlkT9Igl8LvXBqP+2CtiEcAac25gLFseMWeyqR1a0H3Y
cCN32o2gG174XNfkaRpY+iDzsLvyDEhZFBb0Hs8pO3MCLgQV8eAsZyriSAQCOXQB
PzWbANfXc8co+eybRx6DRK/nPRktmJFN1TLwm8I3gBNN57G6ub6ffjuMpzmqS6yU
vjy78I1PJEW7YF5JX976pUm1NpP6R/6/ZPfFszxGbgM/cgzDBdMlWuQrbTY2Mm56
hZv6FC9v9Hl9QCxUuYaUN/IUAgLxsJYckMQqoY7t+S/mPDdIjlbHz0ZbvBZ9osFn
fPGjxvE9jBaFlzO+ODvDTKRhtYdGA5D5eeK7Fhizw+87s7/EilZbnqVf2sARjCcc
oB8/X+LaKADMVWww2nCP2Vr/DnHR0dM6qso/6kD6ov/GTUuJruVE/5mQqtRM0Z9U
uDm3BYN0Qmc57xENSDtZ
=0dIN
-----END PGP SIGNATURE-----

--------------enig8FB43E959095330F8E0DA262--

From users-return-233776-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 25 20:52:20 2012
Return-Path: <users-return-233776-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EFDF29FC5
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 25 Apr 2012 20:52:19 +0000 (UTC)
Received: (qmail 79913 invoked by uid 500); 25 Apr 2012 20:52:16 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 79853 invoked by uid 500); 25 Apr 2012 20:52:16 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 79844 invoked by uid 99); 25 Apr 2012 20:52:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2012 20:52:16 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [76.96.62.64] (HELO qmta07.westchester.pa.mail.comcast.net) (76.96.62.64)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2012 20:52:10 +0000
Received: from omta22.westchester.pa.mail.comcast.net ([76.96.62.73])
	by qmta07.westchester.pa.mail.comcast.net with comcast
	id 2DgQ1j0031ap0As57LrqeK; Wed, 25 Apr 2012 20:51:50 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta22.westchester.pa.mail.comcast.net with comcast
	id 2Lrr1j01H38FjT13iLrrdx; Wed, 25 Apr 2012 20:51:51 +0000
Message-ID: <4F9863E4.3080300@christopherschultz.net>
Date: Wed, 25 Apr 2012 16:51:48 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: parallel deployment activation of new version
References: <15D3435601304A49A5E13D0825711B6128CC5706@EXCHANGE07.webde.local>  <c9852e00-8f22-4a9a-99b7-7543ab14d743@email.android.com>  <15D3435601304A49A5E13D0825711B6128CC570C@EXCHANGE07.webde.local>  <efd47547-82e2-4d89-b0e3-76747acb8a6c@email.android.com>  <15D3435601304A49A5E13D0825711B6128CC5740@EXCHANGE07.webde.local>  <4F903B82.6080508@christopherschultz.net> <1335110109.8682.4.camel@meierpad.localdomain> <4F9561F2.3050702@christopherschultz.net> <4F9606E5.5070100@pidster.com> <4F9810F5.1090401@christopherschultz.net> <4F985CB4.6040208@pidster.com>
In-Reply-To: <4F985CB4.6040208@pidster.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Pid,

On 4/25/12 4:21 PM, Pid wrote:
> On 25/04/2012 15:57, Christopher Schultz wrote:
>> Pid,
>> 
>> On 4/23/12 9:50 PM, Pid wrote:
>>> On 23/04/2012 15:06, Christopher Schultz wrote:
>>>> Christoph,
>>>> 
>>>> On 4/22/12 11:55 AM, Christoph Maser wrote:
>>>>> Chris,
>>>> 
>>>>> Am Donnerstag, den 19.04.2012, 18:21 +0200 schrieb
>>>>> Christopher Schultz:
>>>>>> Christoph,
>>>>>> 
>>>>>> What about the webapp itself performing its own
>>>>>> health-check as a last step of deployment, and throwing
>>>>>> an exception (thereby preventing Tomcat from bringing it
>>>>>> into service) if things aren't in working order?
>>>> 
>>>>> this is the obvious way to do it as it is now. As I said 
>>>>> before that way one looses the access to the wapps status 
>>>>> pages.
>>>> 
>>>> So you want the webapp both up (for status) and down (for 
>>>> traffic) at the same time? Tomcat certainly can't manage that
>>>> for you.
>>>> 
>>>> If you need "status" on a failed-deployment, why not dump it
>>>> to a file or something like that?
>> 
>>> Or use JMX rather than HTTP to acquire status information.
>> 
>> In theory that sounds good, but the webapp needs to be deployed
>> in order to interrogate it via JMX. Once it's deployed, it's in
>> service (even if it's broken) and the system falls apart.
> 
> Which 'system falls apart'?

Sorry... shorthand for "new version is in service, and broken, and yet
it accepts new sessions which seems to be contrary to the OP's
requirements".

> JMX provides an alternative route to determine application status
> that is not impacted by whether the app is up or down.

Sure.

> If the app is not deployed there will be no associated MBeans.
> 
> If it is deployed but not running the status attribute of the
> WebModule MBean will indicate this.

Right. Are you suggesting that the webapp can fail deployment and
still be interrogated via MBeans? That's essentially what I'm
suggesting: have the webapp fail on deployment. OP is saying he wants
the webapp to deploy successfully so it can be interrogated via HTTP.

I think we both agree that is both a bad idea and not really workable
without big (and honestly unnecessary) changes to Tomcat.

> An HTTP connection is much less reliable and trying to do what the
> OP is asking is unlikely to provide a universally reliable result.
> 
> If the app is well behaved then it could start up enough to report
> it's health, given some components not starting properly - but I
> think the OP is asking for something else.

We'll see.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+YY+QACgkQ9CaO5/Lv0PAVZQCgq8cEG4d5/GlSP3htC2vlwnTi
kwUAmwaZoGcvPaCfUqw4rwJQ3he3OOpp
=IRZv
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233777-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 25 22:15:34 2012
Return-Path: <users-return-233777-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9E9BD9565
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 25 Apr 2012 22:15:34 +0000 (UTC)
Received: (qmail 51742 invoked by uid 500); 25 Apr 2012 22:15:29 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 51652 invoked by uid 500); 25 Apr 2012 22:15:29 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 51607 invoked by uid 99); 25 Apr 2012 22:15:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2012 22:15:29 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [76.96.62.56] (HELO qmta06.westchester.pa.mail.comcast.net) (76.96.62.56)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2012 22:15:23 +0000
Received: from omta06.westchester.pa.mail.comcast.net ([76.96.62.51])
	by qmta06.westchester.pa.mail.comcast.net with comcast
	id 2NAA1j00116LCl056NF37g; Wed, 25 Apr 2012 22:15:03 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta06.westchester.pa.mail.comcast.net with comcast
	id 2NF41j00Y38FjT13SNF43W; Wed, 25 Apr 2012 22:15:05 +0000
Message-ID: <4F987765.4020205@christopherschultz.net>
Date: Wed, 25 Apr 2012 18:15:01 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Javamelody and Struts
References: <CBB234E5.2AAB3%darryl.lewis@unsw.edu.au> <4F95B427.9040400@yahoo.es> <4F95B4C9.9010802@christopherschultz.net> <4F95C2F3.9040307@yahoo.es> <4F95CB23.5070803@yahoo.es> <4F9859EB.8080709@yahoo.es>
In-Reply-To: <4F9859EB.8080709@yahoo.es>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Miguel,

On 4/25/12 4:09 PM, Miguel Gonzlez Castaos wrote:
> I've downloaded the certificates as veriCA1.cer and veriCA2.cer and
> run:

Do those certificates match the type of certificate that you have?
Last time I checked, VeriSign had a whole set of intermediate
certificates and you need the ones that match the type of certificate
you have (EV versus whatever the other flavors they have are).

> keytool -import -trustcacerts -alias EV_root -keystore 
> /opt/tomcat5/certs/tcc -file veriCA1.cer

Is /opt/tomcat5/certs/tcc the file you have configured in Tomcat?

Please post your SSL <Connector> configuration (cleansed of any
passwords).

Finally, you didn't post your original stack trace. Since this is
happening on the server-side, it's either a problem during startup or
during client-certificate verification. Since you mentioned the "site
certificate", I assume you are having problems with your server's SSL
certificate and not a client certificate being presented by a remote
client, right?

Can you show me what this command returns:

$ keytool -list -keystore /opt/tomcat5/certs/tcc -v

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+Yd2UACgkQ9CaO5/Lv0PDUcgCgg90suQAZyF1XEivzFJ/8kB5g
8bAAoI+2TDx6N/WWegOmFYY1caiwvrbC
=Ky/W
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233778-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Wed Apr 25 22:25:27 2012
Return-Path: <users-return-233778-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B6A0B932A
	for <apmail-tomcat-users-archive@www.apache.org>; Wed, 25 Apr 2012 22:25:27 +0000 (UTC)
Received: (qmail 93931 invoked by uid 500); 25 Apr 2012 22:25:24 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 93707 invoked by uid 500); 25 Apr 2012 22:25:24 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 93697 invoked by uid 99); 25 Apr 2012 22:25:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 Apr 2012 22:25:24 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [217.146.183.252] (HELO nm15-vm0.bullet.mail.ukl.yahoo.com) (217.146.183.252)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 25 Apr 2012 22:25:17 +0000
Received: from [217.146.183.184] by nm15.bullet.mail.ukl.yahoo.com with NNFMP; 25 Apr 2012 22:24:56 -0000
Received: from [77.238.184.71] by tm15.bullet.mail.ukl.yahoo.com with NNFMP; 25 Apr 2012 22:24:56 -0000
Received: from [127.0.0.1] by smtp140.mail.ukl.yahoo.com with NNFMP; 25 Apr 2012 22:24:56 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.es; s=s1024; t=1335392696; bh=0WI78O80ZZSZv/MMkrbRjIgW4349RPe5adzM8s6mdEc=; h=X-Yahoo-Newman-Id:X-Yahoo-Newman-Property:X-YMail-OSG:X-Yahoo-SMTP:Received:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding:X-Antivirus:X-Antivirus-Status; b=VA4ms9eMeXrZeVYC8nhsXeIcrVY9y5pAY8NOfK/QSqt+GBkRr5XFaxVw1A+nGR+IifLYIzpEQRREUJLLYi+0IwlSsUgPx3qD7KcEHHHEg773+dM9CrsnTLaqt80zqnFGUv8F6j7xtNNcOHoGn2bgUmiJbKxmUpDFPKyRRxqDJCQ=
X-Yahoo-Newman-Id: 642346.2237.bm@smtp140.mail.ukl.yahoo.com
X-Yahoo-Newman-Property: ymail-3
X-YMail-OSG: X.SiAvYVM1kjX7AUv00HMjCIt1d.km60Mg46QAND5xew_q6
 8cITZJxewiCja1gn8asXwY9F7fP2fwsa8_mD37ArczW5wxKcNZneOJvrH9oi
 MOuFmSvKuU7e0wihHW9duhG7LgHQvcTHydkLr_MQkEgIH3WUr.JbENiApH86
 EvYESvCvncah9YUS4B6PzC1LpRXhIUuMS60h7.upeJdv11WRPR4m2cFRolZK
 AEhEhgVarlv1F0zRmxEa5cEFO_5EEfn57mwutFnFwWhTnTojRkLSoX0yLk7W
 D9jq5cHsUA_tUmiN8xTVzKUGliHDP3mzJpRt2O2e3Kdrb_nncBEFdAdjY9li
 hU5IyMrhn6y7dbYudZ77k4B4G54TCrrAJTaTmMeJoCPpHqPh2m6_ZYJiW33g
 MKSZXyhotHheYIvzfivSE_pTtvP4aXy4hB3nDIKSABGHELWUV_xMNR4wq6nV
 PZPyXnPcuwjoqTZgi9JKZpG24A_W8QJoJd4_TEu71JpvAcsvlakEQkKGe9bk
 hYscwZ7OnB76MXw8wpm7nee13JPJYICmbzTEWmguac.b4EYPT1FCHHCVQPlo
 Hhk2A2q0gv8u_oSbwBb3KlhDWI_kwYh08mGGFRw--
X-Yahoo-SMTP: 4morDKeswBDE3lIuzd.cm_qbJNxlcsznEWqdK4MN
Received: from [127.0.0.1] (miguel_3_gonzalez@85.49.201.214 with plain)
        by smtp140.mail.ukl.yahoo.com with SMTP; 25 Apr 2012 22:24:56 +0000 GMT
Message-ID: <4F9879B6.6070501@yahoo.es>
Date: Thu, 26 Apr 2012 00:24:54 +0200
From: =?UTF-8?B?TWlndWVsIEdvbnrDoWxleiBDYXN0YcOxb3M=?= <miguel_3_gonzalez@yahoo.es>
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Javamelody and Struts
References: <CBB234E5.2AAB3%darryl.lewis@unsw.edu.au> <4F95B427.9040400@yahoo.es> <4F95B4C9.9010802@christopherschultz.net> <4F95C2F3.9040307@yahoo.es> <4F95CB23.5070803@yahoo.es> <4F9859EB.8080709@yahoo.es> <4F987765.4020205@christopherschultz.net>
In-Reply-To: <4F987765.4020205@christopherschultz.net>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Antivirus: avast! (VPS 120425-0, 25/04/2012), Outbound message
X-Antivirus-Status: Clean

> Do those certificates match the type of certificate that you have?
> Last time I checked, VeriSign had a whole set of intermediate
> certificates and you need the ones that match the type of certificate
> you have (EV versus whatever the other flavors they have are).
Which other flavors? How do I know?
>
>> keytool -import -trustcacerts -alias EV_root -keystore
>> /opt/tomcat5/certs/tcc -file veriCA1.cer
> Is /opt/tomcat5/certs/tcc the file you have configured in Tomcat?
It's the keystore and yes, configured in tomcat
>
> Please post your SSL<Connector>  configuration (cleansed of any
> passwords).
>
> Finally, you didn't post your original stack trace. Since this is
> happening on the server-side, it's either a problem during startup or
> during client-certificate verification. Since you mentioned the "site
> certificate", I assume you are having problems with your server's SSL
> certificate and not a client certificate being presented by a remote
> client, right?
I'm not sure what you mean with the server and client certificates. No 
web browser reports the server certificate as no valid.
>
> Can you show me what this command returns:
>
> $ keytool -list -keystore /opt/tomcat5/certs/tcc -v
>


Your keystore contains 3 entries

Alias name: evintermediate
Creation date: Apr 24, 2012
Entry type: trustedCertEntry

Owner: CN=VeriSign Class 3 Secure Server CA - G3, OU=Terms of use at 
https://www.verisign.com/rpa (c)10, OU=VeriSign Trust Network, 
O="VeriSign, Inc.", C=US
Issuer: CN=VeriSign Class 3 Public Primary Certification Authority - G5, 
OU="(c) 2006 VeriSign, Inc. - For authorized use only", OU=VeriSign 
Trust Network, O="VeriSign, Inc.", C=US
Serial number: 6ecc7aa5a7032009b8cebcf4e952d491
Valid from: Mon Feb 08 01:00:00 CET 2010 until: Sat Feb 08 00:59:59 CET 2020
Certificate fingerprints:
          MD5:  3C:48:42:0D:FF:58:1A:38:86:BC:FD:41:D4:8A:41:DE
          SHA1: 5D:EB:8F:33:9E:26:4C:19:F6:68:6F:5F:8F:32:B5:4A:4C:46:B4:76


*******************************************
*******************************************


Alias name: ev_root
Creation date: Apr 24, 2012
Entry type: trustedCertEntry

Owner: CN=VeriSign Class 3 Public Primary Certification Authority - G5, 
OU="(c) 2006 VeriSign, Inc. - For authorized use only", OU=VeriSign 
Trust Network, O="VeriSign, Inc.", C=US
Issuer: OU=Class 3 Public Primary Certification Authority, O="VeriSign, 
Inc.", C=US
Serial number: 250ce8e030612e9f2b89f7054d7cf8fd
Valid from: Wed Nov 08 01:00:00 CET 2006 until: Mon Nov 08 00:59:59 CET 2021
Certificate fingerprints:
          MD5:  F9:1F:FE:E6:A3:6B:99:88:41:D4:67:DD:E5:F8:97:7A
          SHA1: 32:F3:08:82:62:2B:87:CF:88:56:C6:3D:B8:73:DF:08:53:B4:DD:27


*******************************************
*******************************************


Alias name:
Creation date: Feb 24, 2012
Entry type: keyEntry
Certificate chain length: 1
Certificate[1]:
Owner: CN=www.mycompany.com, OU=Terms of use at www.verisign.com/rpa 
(c)05, OU=Comercial, O="My OU  S.L.", L=My city, ST=Madrid, C=ES
Issuer: CN=VeriSign Class 3 Secure Server CA - G3, OU=Terms of use at 
https://www.verisign.com/rpa (c)10, OU=VeriSign Trust Network, 
O="VeriSign, Inc.", C=US
Serial number: 7afc00006539f4e816f7fe6b65f47af0
Valid from: Sat Feb 11 01:00:00 CET 2012 until: Fri Apr 12 01:59:59 CEST 
2013
Certificate fingerprints:



*******************************************
*******************************************

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233779-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 26 01:58:34 2012
Return-Path: <users-return-233779-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D212397D0
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 26 Apr 2012 01:58:34 +0000 (UTC)
Received: (qmail 67988 invoked by uid 500); 26 Apr 2012 01:58:31 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 67918 invoked by uid 500); 26 Apr 2012 01:58:31 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 67907 invoked by uid 99); 26 Apr 2012 01:58:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2012 01:58:31 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [76.96.59.227] (HELO qmta12.westchester.pa.mail.comcast.net) (76.96.59.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2012 01:58:23 +0000
Received: from omta10.westchester.pa.mail.comcast.net ([76.96.62.28])
	by qmta12.westchester.pa.mail.comcast.net with comcast
	id 2Run1j0040cZkys5CRy3oL; Thu, 26 Apr 2012 01:58:03 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta10.westchester.pa.mail.comcast.net with comcast
	id 2Rxx1j01D38FjT13WRxyed; Thu, 26 Apr 2012 01:57:58 +0000
Message-ID: <4F98ABAA.4080108@christopherschultz.net>
Date: Wed, 25 Apr 2012 21:58:02 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Javamelody and Struts
References: <CBB234E5.2AAB3%darryl.lewis@unsw.edu.au> <4F95B427.9040400@yahoo.es> <4F95B4C9.9010802@christopherschultz.net> <4F95C2F3.9040307@yahoo.es> <4F95CB23.5070803@yahoo.es> <4F9859EB.8080709@yahoo.es> <4F987765.4020205@christopherschultz.net> <4F9879B6.6070501@yahoo.es>
In-Reply-To: <4F9879B6.6070501@yahoo.es>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Miguel,

On 4/25/12 6:24 PM, Miguel Gonzlez Castaos wrote:
>> Please post your SSL<Connector>  configuration (cleansed of any 
>> passwords).

??

>> Finally, you didn't post your original stack trace.

??

>> Since this is happening on the server-side, it's either a
>> problem during startup or during client-certificate verification.
>> Since you mentioned the "site certificate", I assume you are
>> having problems with your server's SSL certificate and not a
>> client certificate being presented by a remote client, right?
> 
> I'm not sure what you mean with the server and client certificates.
> No web browser reports the server certificate as no valid.

If no web browser reports the server certificate as not valid, then
what's the problem?

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+Yq6oACgkQ9CaO5/Lv0PCsiQCdEEo6EhFCXTnlKUCDdfN2wGaZ
yZ4Ani22HHlcMXCot6+PzLOeMYIMY9p3
=QE9L
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233780-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 26 06:14:16 2012
Return-Path: <users-return-233780-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5531A9A3F
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 26 Apr 2012 06:14:16 +0000 (UTC)
Received: (qmail 63658 invoked by uid 500); 26 Apr 2012 06:14:12 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 63451 invoked by uid 500); 26 Apr 2012 06:14:11 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 63420 invoked by uid 99); 26 Apr 2012 06:14:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2012 06:14:10 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [202.64.111.244] (HELO rvhk-mail2010.RADVISION.com) (202.64.111.244)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2012 06:14:03 +0000
Received: from RVHK-MAIL2010.RADVISION.com ([::1]) by
 rvhk-mail2010.RADVISION.com ([::1]) with mapi id 14.01.0355.002; Thu, 26 Apr
 2012 14:13:09 +0800
From: Guofeng Zhang <guofeng@radvision.com>
To: "users@tomcat.apache.org" <users@tomcat.apache.org>
Subject: java.io.IOException: Stream closed occurred frequently on Tomcat 7
Thread-Topic: java.io.IOException: Stream closed occurred frequently on
 Tomcat 7
Thread-Index: Ac0jcrAgKLaBX1G+SW6NDJu090fDFA==
Date: Thu, 26 Apr 2012 06:13:09 +0000
Message-ID: <D95833D5419B674D8BF30193FBE441D50AB32EF2@rvhk-mail2010.RADVISION.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-originating-ip: [192.168.225.202]
Content-Type: multipart/alternative;
	boundary="_000_D95833D5419B674D8BF30193FBE441D50AB32EF2rvhkmail2010RAD_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_D95833D5419B674D8BF30193FBE441D50AB32EF2rvhkmail2010RAD_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

This is a page generated by JSP using tags developed by us. This page works=
 well on JBoss 5 which using Tomcat 6.x (a branch or so). Because our app o=
nly use web technology, so we port the app to Tomcat 7.0.22 recently. When =
the app is access from browser for a while, "Stream closed" error occurred.

I google the internet and do not find useful information about how to solve=
 it.

Your advice is appreciated.

Thanks

Guofeng

2012-04-25 15:47:59,679 INFO  [STDE] java.io.IOException: Stream closed
2012-04-25 15:47:59,679 INFO  [STDE]     at org.apache.jasper.runtime.JspWr=
iterImpl.ensureOpen(JspWriterImpl.java:210)
2012-04-25 15:47:59,679 INFO  [STDE]     at org.apache.jasper.runtime.JspWr=
iterImpl.write(JspWriterImpl.java:322)
2012-04-25 15:47:59,679 INFO  [STDE]     at org.apache.jasper.runtime.JspWr=
iterImpl.write(JspWriterImpl.java:353)
2012-04-25 15:47:59,679 INFO  [STDE]     at org.apache.jasper.runtime.JspWr=
iterImpl.print(JspWriterImpl.java:488)
2012-04-25 15:47:59,679 INFO  [STDE]     at com.vnex.tags.VNeXBodyTagSuppor=
t.doEndTag(VNeXBodyTagSupport.java:68)
2012-04-25 15:47:59,679 INFO  [STDE]     at org.apache.jsp.jsp.virtualroom.=
main_jsp._jspx_meth_vnex_005finstance_005f0(main_jsp.java:1333)
2012-04-25 15:47:59,679 INFO  [STDE]     at org.apache.jsp.jsp.virtualroom.=
main_jsp._jspService(main_jsp.java:317)
2012-04-25 15:47:59,679 INFO  [STDE]     at org.apache.jasper.runtime.HttpJ=
spBase.service(HttpJspBase.java:70)
2012-04-25 15:47:59,679 INFO  [STDE]     at javax.servlet.http.HttpServlet.=
service(HttpServlet.java:722)
2012-04-25 15:47:59,679 INFO  [STDE]     at org.apache.catalina.core.Applic=
ationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
2012-04-25 15:47:59,679 INFO  [STDE]     at org.apache.catalina.core.Applic=
ationFilterChain.doFilter(ApplicationFilterChain.java:210)
2012-04-25 15:47:59,679 INFO  [STDE]     at org.apache.catalina.core.Applic=
ationDispatcher.invoke(ApplicationDispatcher.java:684)
2012-04-25 15:47:59,679 INFO  [STDE]     at org.apache.catalina.core.Applic=
ationDispatcher.doInclude(ApplicationDispatcher.java:593)
2012-04-25 15:47:59,679 INFO  [STDE]     at org.apache.catalina.core.Applic=
ationDispatcher.include(ApplicationDispatcher.java:530)
2012-04-25 15:47:59,679 INFO  [STDE]     at com.vnex.tags.GetTag.doEndTag(G=
etTag.java:209)
2012-04-25 15:47:59,679 INFO  [STDE]     at org.apache.jsp.jsp.OLtemplate_j=
sp._jspx_meth_vnex_005fget_005f0(OLtemplate_jsp.java:95)
2012-04-25 15:47:59,679 INFO  [STDE]     at org.apache.jsp.jsp.OLtemplate_j=
sp._jspService(OLtemplate_jsp.java:67)
2012-04-25 15:47:59,679 INFO  [STDE]     at org.apache.jasper.runtime.HttpJ=
spBase.service(HttpJspBase.java:70)
2012-04-25 15:47:59,679 INFO  [STDE]     at javax.servlet.http.HttpServlet.=
service(HttpServlet.java:722)
2012-04-25 15:47:59,679 INFO  [STDE]     at org.apache.catalina.core.Applic=
ationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
2012-04-25 15:47:59,679 INFO  [STDE]     at org.apache.catalina.core.Applic=
ationFilterChain.doFilter(ApplicationFilterChain.java:210)
2012-04-25 15:47:59,679 INFO  [STDE]     at org.apache.catalina.core.Applic=
ationDispatcher.invoke(ApplicationDispatcher.java:684)
2012-04-25 15:47:59,679 INFO  [STDE]     at org.apache.catalina.core.Applic=
ationDispatcher.processRequest(ApplicationDispatcher.java:471)
2012-04-25 15:47:59,679 INFO  [STDE]     at org.apache.catalina.core.Applic=
ationDispatcher.doForward(ApplicationDispatcher.java:402)
2012-04-25 15:47:59,679 INFO  [STDE]     at org.apache.catalina.core.Applic=
ationDispatcher.forward(ApplicationDispatcher.java:329)
2012-04-25 15:47:59,679 INFO  [STDE]     at com.vnex.core.MainEntry.doReque=
st(MainEntry.java:453)
2012-04-25 15:47:59,679 INFO  [STDE]     at com.vnex.core.MainEntry.doGet(M=
ainEntry.java:144)
2012-04-25 15:47:59,679 INFO  [STDE]     at com.vnex.core.MainEntry.doPost(=
MainEntry.java:159)
2012-04-25 15:47:59,679 INFO  [STDE]     at javax.servlet.http.HttpServlet.=
service(HttpServlet.java:641)
2012-04-25 15:47:59,679 INFO  [STDE]     at javax.servlet.http.HttpServlet.=
service(HttpServlet.java:722)
2012-04-25 15:47:59,679 INFO  [STDE]     at org.apache.catalina.core.Applic=
ationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
2012-04-25 15:47:59,679 INFO  [STDE]     at org.apache.catalina.core.Applic=
ationFilterChain.doFilter(ApplicationFilterChain.java:210)
2012-04-25 15:47:59,679 INFO  [STDE]     at com.visionnex.vcms.outlook.SetU=
serDisplayFormatFilter.doFilter(SetUserDisplayFormatFilter.java:64)
2012-04-25 15:47:59,679 INFO  [STDE]     at org.apache.catalina.core.Applic=
ationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
2012-04-25 15:47:59,679 INFO  [STDE]     at org.apache.catalina.core.Applic=
ationFilterChain.doFilter(ApplicationFilterChain.java:210)
2012-04-25 15:47:59,679 INFO  [STDE]     at com.visionnex.vcms.outlook.SetC=
haracterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:68)
2012-04-25 15:47:59,679 INFO  [STDE]     at org.apache.catalina.core.Applic=
ationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
2012-04-25 15:47:59,679 INFO  [STDE]     at org.apache.catalina.core.Applic=
ationFilterChain.doFilter(ApplicationFilterChain.java:210)
2012-04-25 15:47:59,679 INFO  [STDE]     at org.apache.catalina.core.Standa=
rdWrapperValve.invoke(StandardWrapperValve.java:224)
2012-04-25 15:47:59,679 INFO  [STDE]     at org.apache.catalina.core.Standa=
rdContextValve.invoke(StandardContextValve.java:169)
2012-04-25 15:47:59,679 INFO  [STDE]     at org.apache.catalina.authenticat=
or.AuthenticatorBase.invoke(AuthenticatorBase.java:581)
2012-04-25 15:47:59,679 INFO  [STDE]    at org.apache.catalina.core.Standar=
dHostValve.invoke(StandardHostValve.java:168)
2012-04-25 15:47:59,679 INFO  [STDE]     at org.apache.catalina.valves.Erro=
rReportValve.invoke(ErrorReportValve.java:100)
2012-04-25 15:47:59,679 INFO  [STDE]     at org.apache.catalina.valves.Acce=
ssLogValve.invoke(AccessLogValve.java:929)
2012-04-25 15:47:59,679 INFO  [STDE]     at org.apache.catalina.core.Standa=
rdEngineValve.invoke(StandardEngineValve.java:118)
2012-04-25 15:47:59,679 INFO  [STDE]     at org.apache.catalina.connector.C=
oyoteAdapter.service(CoyoteAdapter.java:405)
2012-04-25 15:47:59,679 INFO  [STDE]     at org.apache.coyote.http11.Abstra=
ctHttp11Processor.process(AbstractHttp11Processor.java:964)
2012-04-25 15:47:59,679 INFO  [STDE]     at org.apache.coyote.AbstractProto=
col$AbstractConnectionHandler.process(AbstractProtocol.java:515)
2012-04-25 15:47:59,679 INFO  [STDE]     at org.apache.tomcat.util.net.AprE=
ndpoint$SocketProcessor.run(AprEndpoint.java:1824)
2012-04-25 15:47:59,679 INFO  [STDE]     at java.util.concurrent.ThreadPool=
Executor$Worker.runTask(ThreadPoolExecutor.java:886)
2012-04-25 15:47:59,679 INFO  [STDE]     at java.util.concurrent.ThreadPool=
Executor$Worker.run(ThreadPoolExecutor.java:908)
2012-04-25 15:47:59,679 INFO  [STDE]     at java.lang.Thread.run(Thread.jav=
a:662)

--_000_D95833D5419B674D8BF30193FBE441D50AB32EF2rvhkmail2010RAD_--

From users-return-233781-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 26 07:36:05 2012
Return-Path: <users-return-233781-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8EBBD9DD8
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 26 Apr 2012 07:36:05 +0000 (UTC)
Received: (qmail 70843 invoked by uid 500); 26 Apr 2012 07:36:02 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 70294 invoked by uid 500); 26 Apr 2012 07:35:57 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 70265 invoked by uid 99); 26 Apr 2012 07:35:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2012 07:35:56 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [217.146.176.178] (HELO nm24-vm4.bullet.mail.ukl.yahoo.com) (217.146.176.178)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 26 Apr 2012 07:35:48 +0000
Received: from [217.146.183.184] by nm24.bullet.mail.ukl.yahoo.com with NNFMP; 26 Apr 2012 07:35:27 -0000
Received: from [217.146.182.74] by tm15.bullet.mail.ukl.yahoo.com with NNFMP; 26 Apr 2012 07:35:27 -0000
Received: from [127.0.0.1] by smtp105.mail.ukl.yahoo.com with NNFMP; 26 Apr 2012 07:35:27 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.es; s=s1024; t=1335425727; bh=PPuKLjlFTNm2ROz8ImYqD1gA6pijpvanrgk1F+h6WZ0=; h=X-Yahoo-Newman-Id:X-Yahoo-Newman-Property:X-YMail-OSG:X-Yahoo-SMTP:Received:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding:X-Antivirus:X-Antivirus-Status; b=HAP+X+ehEgWDfG/T+V48UCDUk7J27C3ZuTJS7utB5k1cwFib40fWcS79i/2TyEEB4HntDHTrHRJ3HbNhdQKKW88KgQnB+MSvHYS2VmaumVQ9raWFwd5PFHtB9DXmFZ9aBjmAk6znAybMKCNohKgBT16uKVZAmJ37FIDY7c4WtFs=
X-Yahoo-Newman-Id: 961693.84335.bm@smtp105.mail.ukl.yahoo.com
X-Yahoo-Newman-Property: ymail-3
X-YMail-OSG: A7Kj_gUVM1k35AWDAuR7CDSltxi6FYOIYlka3gGoVSvqpBj
 urTZUy4rXsJQboi9SybSVDM4dT3OMrP1.yRHQjGjvvDhf6vg5vzlrAT_sfqh
 YvyVLbkeyu.83pmBz2Uyb7T7XNjIIXxMODBdtQE2GoeN9z45YSN.jUBewVUI
 JUBkvhorxqm9u9rYZVrgn7DkY_J_GuhBfAqrbBAabKxGaRfsRzvb3mGUCFr7
 E3j40W2.FexEY6JO17.BFU_dbUqMCGisq5NufMZ8F._oA6nyHjzDJsJnEuNC
 JpTfDm5DM67P2_4phVEMeC35Qh4aG6QsPkBqTtmA_2vGejjDdUeTXZd22rvC
 N0pD1oHnQUV_om6hIiQITYvVqDJ529ncntnSiOCYeK.vqZotXgyK5DdC4.2Q
 UHcMMgh8WlmyVo_7liWbNx2WQugDjdlzoV8vIhiTNQ0OAtI.7nF7vzhK.KLc
 6mRQCbjfkYuAF
X-Yahoo-SMTP: 4morDKeswBDE3lIuzd.cm_qbJNxlcsznEWqdK4MN
Received: from [127.0.0.1] (miguel_3_gonzalez@85.54.58.10 with plain)
        by smtp105.mail.ukl.yahoo.com with SMTP; 26 Apr 2012 00:35:27 -0700 PDT
Message-ID: <4F98FABF.6010709@yahoo.es>
Date: Thu, 26 Apr 2012 09:35:27 +0200
From: =?UTF-8?B?TWlndWVsIEdvbnrDoWxleiBDYXN0YcOxb3M=?= <miguel_3_gonzalez@yahoo.es>
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Javamelody and Struts
References: <CBB234E5.2AAB3%darryl.lewis@unsw.edu.au> <4F95B427.9040400@yahoo.es> <4F95B4C9.9010802@christopherschultz.net> <4F95C2F3.9040307@yahoo.es> <4F95CB23.5070803@yahoo.es> <4F9859EB.8080709@yahoo.es> <4F987765.4020205@christopherschultz.net> <4F9879B6.6070501@yahoo.es> <4F98ABAA.4080108@christopherschultz.net>
In-Reply-To: <4F98ABAA.4080108@christopherschultz.net>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Antivirus: avast! (VPS 120425-1, 25/04/2012), Outbound message
X-Antivirus-Status: Clean

> If no web browser reports the server certificate as not valid, then
> what's the problem?
>
 From my original email:

"Now that I'm trying to configure javamelody in Tomcat 5 with HTTPS I 
get the following
error when I try to add the context and the URL:
  javamelody avax.net.ssl.SSLHandshakeException: 
sun.security.validator.ValidatorException: PKIX path building failed:
sun.security.provider.certpath.SunCertPathBuilderException: unable to 
find valid certification path to requested target."

I'm trying to add my context and the URL for my webapp in the javamelody 
application:

http://myweb.com/javamelody/?

I get two fields and an Add button to do that. In my tests I was able to 
do add a monitor for my webapp if it uses the HTTP protocol but not in 
the production system where it uses HTTPS.

The question is, how do I know that I have added the right intermediate 
certs from verisign?

Regards,

Miguel

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233782-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 26 08:04:53 2012
Return-Path: <users-return-233782-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D34BD99EF
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 26 Apr 2012 08:04:53 +0000 (UTC)
Received: (qmail 60184 invoked by uid 500); 26 Apr 2012 08:04:49 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 59878 invoked by uid 500); 26 Apr 2012 08:04:49 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 59854 invoked by uid 99); 26 Apr 2012 08:04:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2012 08:04:48 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [217.146.183.254] (HELO nm16-vm0.bullet.mail.ukl.yahoo.com) (217.146.183.254)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 26 Apr 2012 08:04:41 +0000
Received: from [217.146.183.216] by nm16.bullet.mail.ukl.yahoo.com with NNFMP; 26 Apr 2012 08:04:19 -0000
Received: from [77.238.184.65] by tm9.bullet.mail.ukl.yahoo.com with NNFMP; 26 Apr 2012 08:04:19 -0000
Received: from [127.0.0.1] by smtp134.mail.ukl.yahoo.com with NNFMP; 26 Apr 2012 08:04:19 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.es; s=s1024; t=1335427459; bh=dHZpbZ/299TvCzUAdukps8+UQiPDndcht/qe0UshySo=; h=X-Yahoo-Newman-Id:X-Yahoo-Newman-Property:X-YMail-OSG:X-Yahoo-SMTP:Received:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding:X-Antivirus:X-Antivirus-Status; b=kOe0pn+WKze0XkrQZGchtDS9QvhKnCiWYCntlGjQJwyvFrLXfsNugUcPi17u0Zk52uyAtUpo2hiHdURD6+pOcV3ixTr27Ifoi94sJgYM37+eOP6ydMPbyR1FJfqnSkTv1HoR+hrq/mhHTH45IxuOVsLo0xuhyOZlVF2WPT4h5gc=
X-Yahoo-Newman-Id: 234841.2285.bm@smtp134.mail.ukl.yahoo.com
X-Yahoo-Newman-Property: ymail-3
X-YMail-OSG: 6DVQoQoVM1nHAl7l7ccxhJ03kDmt5oWXvB3sAlh3.dYQBDS
 ELs5ksue.yI2PukHtIEHjugfG5QmJPpXdoOg1vuz0cjlMQDxRLAQ842V99IY
 Sa3mT4y4nBPG34mNqKjYUHOJ.VBMiOTlvfUu8pZl7czssOA8R6LEv_atdxqU
 jcX2SWsslz7STPYxsSInJkBYgdr6YMYx65D_FFNUE7FtaCPKn1skg4znEnN6
 yfGW7rJENzcFsmwh45PmEJoZrgSY85DgjT6Q4evkj9Py8Ww9PVOfElMIwwC4
 lxl0yZpRmw9lQz2DTsDuz_ct4Nv.YGxpaj_WCbvvj1SA4G1Dy0N75Kpr5_gw
 d.ew6N9Z0zhpOSI3R9zO.aLzFOL2owxXxLHjpYfLkz10t2XS3fMMIvm8Iluj
 VuaKe
X-Yahoo-SMTP: 4morDKeswBDE3lIuzd.cm_qbJNxlcsznEWqdK4MN
Received: from [127.0.0.1] (miguel_3_gonzalez@85.54.58.10 with plain)
        by smtp134.mail.ukl.yahoo.com with SMTP; 26 Apr 2012 08:04:18 +0000 GMT
Message-ID: <4F990182.6010103@yahoo.es>
Date: Thu, 26 Apr 2012 10:04:18 +0200
From: =?UTF-8?B?TWlndWVsIEdvbnrDoWxleiBDYXN0YcOxb3M=?= <miguel_3_gonzalez@yahoo.es>
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Javamelody and Struts
References: <CBB234E5.2AAB3%darryl.lewis@unsw.edu.au> <4F95B427.9040400@yahoo.es> <4F95B4C9.9010802@christopherschultz.net> <4F95C2F3.9040307@yahoo.es> <4F95CB23.5070803@yahoo.es> <4F9859EB.8080709@yahoo.es> <4F987765.4020205@christopherschultz.net> <4F9879B6.6070501@yahoo.es> <4F98ABAA.4080108@christopherschultz.net>
In-Reply-To: <4F98ABAA.4080108@christopherschultz.net>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Antivirus: avast! (VPS 120425-1, 25/04/2012), Outbound message
X-Antivirus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org


>>> Please post your SSL<Connector>   configuration (cleansed of any
>>> passwords).
<Connector port="443" maxHttpHeaderSize="8192"
                maxThreads="400" minSpareThreads="25" maxSpareThreads="75"
                enableLookups="false" disableUploadTimeout="true"
                acceptCount="100" scheme="https" secure="true" 
keystorePass="*******"
                            keystoreFile="/opt/tomcat5/certs/tcc" 
keyAlias="importkey"
                clientAuth="false" sslProtocol="TLS" compression="500"
                
compressableMimeType="text/html,text/xml,text/plain,application/octet-stream" 
/>


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233783-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 26 08:28:34 2012
Return-Path: <users-return-233783-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 103B69EBD
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 26 Apr 2012 08:28:34 +0000 (UTC)
Received: (qmail 31203 invoked by uid 500); 26 Apr 2012 08:28:30 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 31155 invoked by uid 500); 26 Apr 2012 08:28:30 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 31123 invoked by uid 99); 26 Apr 2012 08:28:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2012 08:28:29 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vogliotti.m@gtt.to.it designates 89.184.107.23 as permitted sender)
Received: from [89.184.107.23] (HELO postaoutaem.gtt.to.it) (89.184.107.23)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2012 08:28:23 +0000
Received: from smtp.gtt.to.it (mailinterna [172.31.1.2])
	by postaoutaem.gtt.to.it (Postfix) with ESMTP id 333C4C235
	for <users@tomcat.apache.org>; Thu, 26 Apr 2012 10:25:40 +0200 (CEST)
Received: from smtp.gtt.to.it ([172.30.100.199]) by smtp.gtt.to.it with Microsoft SMTPSVC(5.0.2195.6713);
	 Thu, 26 Apr 2012 10:25:40 +0200
x-mimeole: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CD2386.29CF73EB"
Subject: Problem "J2EE Web Profile support"
Date: Thu, 26 Apr 2012 10:25:34 +0200
Message-ID: <69E56F9824B18B4697B58E032CF77E08029C01D4@gttexc01.i.atm.to.it>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Problem "J2EE Web Profile support"
Thread-Index: Ac0jhiaUuMQrhO1WRCOcXTivcBIWYQ==
From: "Vogliotti Massimo" <Vogliotti.M@gtt.to.it>
To: <users@tomcat.apache.org>
X-OriginalArrivalTime: 26 Apr 2012 08:25:40.0069 (UTC) FILETIME=[29FDA150:01CD2386]
X-MailScanner-ID: 333C4C235.0D097
X-GTT-MailScanner: Found to be clean
X-GTT-MailScanner-SpamCheck: non spam, SpamAssassin (not cached,
	punteggio=-1.439, necessario 6, autolearn=not spam,
	ALL_TRUSTED -1.44, HTML_MESSAGE 0.00)
X-GTT-MailScanner-From: vogliotti.m@gtt.to.it
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No

------_=_NextPart_001_01CD2386.29CF73EB
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi, i use NetBeans 7.0.1 with tomcat 7.0.25 integrated.
I'm creating a web application with JSF 2.1 and Java EE 6,=20
when I try to create a "JSF Pages from entity classes"=20
I get the following error message:
    "JSF Pages for Java EE generated sources can not complete without
servers with J2EE Web Profile support.".=20
What can I do?
thanks
Max

------_=_NextPart_001_01CD2386.29CF73EB--

From users-return-233784-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 26 08:54:58 2012
Return-Path: <users-return-233784-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BE884C688
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 26 Apr 2012 08:54:58 +0000 (UTC)
Received: (qmail 91480 invoked by uid 500); 26 Apr 2012 08:54:55 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 91232 invoked by uid 500); 26 Apr 2012 08:54:55 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 91203 invoked by uid 99); 26 Apr 2012 08:54:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2012 08:54:54 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [62.153.77.47] (HELO gateway13.init-ka.de) (62.153.77.47)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2012 08:54:46 +0000
Received: from unknown (HELO srvtriton.init-ka.lan) ([172.21.100.5])
  by gateway13.init-ka.lan with SMTP; 26 Apr 2012 10:54:54 +0200
Received: from srvPegasus.init-ka.lan ([172.22.3.145])
 by srvtriton.init-ka.lan (SMSSMTP 4.0.0.59) with SMTP id M2012042610541202171
 for <users@tomcat.apache.org>; Thu, 26 Apr 2012 10:54:12 +0200
Received: from srvPegasus.init-ka.lan ([172.22.3.145]) by srvpegasus
 ([172.22.3.145]) with mapi; Thu, 26 Apr 2012 10:54:25 +0200
From: "Gubler, Ruediger" <rgubler@init-ka.de>
To: "users@tomcat.apache.org" <users@tomcat.apache.org>
Date: Thu, 26 Apr 2012 10:54:23 +0200
Subject: Reload servlet remotely
Thread-Topic: Reload servlet remotely
Thread-Index: Ac0jii1+/XpxvsA5TfSarvL/sjytWg==
Message-ID: <334319B2EBE0B144BAE1402B79D82DC5D5D2E46F@srvpegasus>
Accept-Language: de-DE, en-US
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, en-US
Content-Type: multipart/alternative;
	boundary="_000_334319B2EBE0B144BAE1402B79D82DC5D5D2E46Fsrvpegasus_"
MIME-Version: 1.0

--_000_334319B2EBE0B144BAE1402B79D82DC5D5D2E46Fsrvpegasus_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hello,

I want to reload a servlet by calling

        "http://<server>/manager/text/reload?path=3D/<servlet>"

This works from IE or Firefox but opens a form which asks for user and pass=
word.
But I need to call the reload from an groovy script.
How must the URL looks like to add the auth data?
The call of

        "http://<server>/manager/text/reload?path=3D/<servlet>&username=3Dm=
yUser&password=3DmyPass"

doesn't work.


Yours R=FCdiger




--_000_334319B2EBE0B144BAE1402B79D82DC5D5D2E46Fsrvpegasus_--

From users-return-233785-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 26 09:04:35 2012
Return-Path: <users-return-233785-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 41856CA69
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 26 Apr 2012 09:04:35 +0000 (UTC)
Received: (qmail 25857 invoked by uid 500); 26 Apr 2012 09:04:32 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 25817 invoked by uid 500); 26 Apr 2012 09:04:31 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 25787 invoked by uid 99); 26 Apr 2012 09:04:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2012 09:04:31 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of miki@ceti.pl designates 62.121.128.10 as permitted sender)
Received: from [62.121.128.10] (HELO relay.ceti.pl) (62.121.128.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2012 09:04:24 +0000
Received: from tau.ceti.pl (tau.ceti.pl [62.121.128.11])
	by relay.ceti.pl (Postfix) with ESMTP id 94F18D5891
	for <users@tomcat.apache.org>; Thu, 26 Apr 2012 11:04:02 +0200 (CEST)
Received: from poczta2.ceti.pl (ip-62-121-128-70.ceti.net.pl [62.121.128.70])
	by tau.ceti.pl (Postfix) with ESMTP id 60853202FE7;
	Thu, 26 Apr 2012 11:04:02 +0200 (CEST)
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8;
 format=flowed
Content-Transfer-Encoding: 7bit
Date: Thu, 26 Apr 2012 11:04:02 +0200
From: Mikolaj Rydzewski <miki@ceti.pl>
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Reload servlet remotely
In-Reply-To: <334319B2EBE0B144BAE1402B79D82DC5D5D2E46F@srvpegasus>
References: <334319B2EBE0B144BAE1402B79D82DC5D5D2E46F@srvpegasus>
Message-ID: <86727eecd7882541367621f6b42bf69f@tau.ceti.pl>
X-Sender: miki@ceti.pl
User-Agent: CETI Webmail/0.7.2
X-Virus-Checked: Checked by ClamAV on apache.org

On 26.04.2012 10:54, Gubler, Ruediger wrote:

> But I need to call the reload from an groovy script.
> How must the URL looks like to add the auth data?
> The call of
>
>
> 
> "http://<server>/manager/text/reload?path=/<servlet>&username=myUser&password=myPass"
>
> doesn't work.

http://username:password@<server>/manager/text/reload?path=/<servlet>

-- 
Mikolaj Rydzewski <miki@ceti.pl>

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233786-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 26 09:59:08 2012
Return-Path: <users-return-233786-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CCD579672
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 26 Apr 2012 09:59:08 +0000 (UTC)
Received: (qmail 80263 invoked by uid 500); 26 Apr 2012 09:59:05 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 80159 invoked by uid 500); 26 Apr 2012 09:59:05 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 80138 invoked by uid 99); 26 Apr 2012 09:59:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2012 09:59:04 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [217.146.183.113] (HELO nm19-vm0.bullet.mail.ukl.yahoo.com) (217.146.183.113)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 26 Apr 2012 09:58:57 +0000
Received: from [217.146.183.212] by nm19.bullet.mail.ukl.yahoo.com with NNFMP; 26 Apr 2012 09:58:36 -0000
Received: from [217.146.182.186] by tm5.bullet.mail.ukl.yahoo.com with NNFMP; 26 Apr 2012 09:58:36 -0000
Received: from [127.0.0.1] by smtp152.mail.ukl.yahoo.com with NNFMP; 26 Apr 2012 09:58:36 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.es; s=s1024; t=1335434316; bh=ijqG09dUatd6SRc9d+19r/isN1GhIoy6EB5HoWwAOew=; h=X-Yahoo-Newman-Id:X-Yahoo-Newman-Property:X-YMail-OSG:X-Yahoo-SMTP:Received:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding:X-Antivirus:X-Antivirus-Status; b=eoI5E6Kd+5QtSFvDIt8gzWmnGHa6/NM0TM5rr1Fz96S//qo2kaOnjj3evIi9yuarHfCYJtgO6P2jSYJZhELuNAErV8ZnwnNO9/3xeRYmkfpaLXfNGjbgbffqwyVlmN/b97FM1424/UK/w2acJG4gFKnYIi1UHCpRy6Ju7p+QmRA=
X-Yahoo-Newman-Id: 72988.58901.bm@smtp152.mail.ukl.yahoo.com
X-Yahoo-Newman-Property: ymail-3
X-YMail-OSG: TsTquTkVM1lRkfSCJMwj7B5QWDJNgMXVg6w.fLf_lUkK.ET
 754CQMeG2enEIPUreSGn7uZXF8a1w9nnsReEJy_sV4I9UHFD24QSvozjizKy
 9Jd5KuaqTovSX6.VBQi.B7BwNyX1.9V4aCtJI.W0MF0GMYj11z8ayfkDZmlI
 TXGD8Jj6ug8JYaqqZEHBpTGCVXCL6oncHQpxrMmXOBk4OR9I3Cd.L8FWamQS
 7v5c1WPAiGuGr6UgD0uTM.9ph7I5zErPuHkmWXrVdyx77zOQfwKJWEnwn6d9
 pBviLNsTCBlQzGziBJ7m9p98x9kt4UFRyStZaHW37a3uPSXb2lEyN7KlIOBv
 fp.FfTor2BoDy_N6s4y1aoNsvM1vzjp6jKZAtMz4L734xR3DHtrmcIBrL8Nb
 cmeMNpg--
X-Yahoo-SMTP: 4morDKeswBDE3lIuzd.cm_qbJNxlcsznEWqdK4MN
Received: from [127.0.0.1] (miguel_3_gonzalez@85.54.58.10 with plain)
        by smtp152.mail.ukl.yahoo.com with SMTP; 26 Apr 2012 02:58:35 -0700 PDT
Message-ID: <4F991C4A.8090206@yahoo.es>
Date: Thu, 26 Apr 2012 11:58:34 +0200
From: =?UTF-8?B?TWlndWVsIEdvbnrDoWxleiBDYXN0YcOxb3M=?= <miguel_3_gonzalez@yahoo.es>
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Javamelody and Struts
References: <CBB234E5.2AAB3%darryl.lewis@unsw.edu.au> <4F95B427.9040400@yahoo.es> <4F95B4C9.9010802@christopherschultz.net> <4F95C2F3.9040307@yahoo.es> <4F95CB23.5070803@yahoo.es> <4F9859EB.8080709@yahoo.es> <4F987765.4020205@christopherschultz.net> <4F9879B6.6070501@yahoo.es> <4F98ABAA.4080108@christopherschultz.net>
In-Reply-To: <4F98ABAA.4080108@christopherschultz.net>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Antivirus: avast! (VPS 120425-1, 25/04/2012), Outbound message
X-Antivirus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org

On 26/04/2012 03:58, Christopher Schultz wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Miguel,
>
> On 4/25/12 6:24 PM, Miguel Gonzlez Castaos wrote:
>>> Please post your SSL<Connector>   configuration (cleansed of any
>>> passwords).
By the way, double checking the info from my web browser I get this is a 
verisign class 3 secure server G3

I'm sorry but I come from the Apache world and I'm pretty new to Tomcat. 
Also I have inherited this server and the configuration is messy.

Maybe I'm wrong but should I add the CAcert somewhere in the SSL connector?

Miguel

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233787-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 26 12:22:29 2012
Return-Path: <users-return-233787-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5B5589C6B
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 26 Apr 2012 12:22:29 +0000 (UTC)
Received: (qmail 98342 invoked by uid 500); 26 Apr 2012 12:22:25 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 98283 invoked by uid 500); 26 Apr 2012 12:22:25 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 98272 invoked by uid 99); 26 Apr 2012 12:22:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2012 12:22:25 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of craig.silk@gmail.com designates 209.85.210.173 as permitted sender)
Received: from [209.85.210.173] (HELO mail-iy0-f173.google.com) (209.85.210.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2012 12:22:20 +0000
Received: by iafj26 with SMTP id j26so2078096iaf.18
        for <users@tomcat.apache.org>; Thu, 26 Apr 2012 05:21:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=JHdpfU8I0qXAkTZoLRpRm+ejSlZ/OY9ugrMlU0vxFoo=;
        b=vGa+JkA2uJQukvLHoum1sNXfFrGhBHVT0ofiZ37mONjFeDheH9z4mG8otjs1wdj6+i
         5oOd08r4jhTdcIEM3/FLPprrQpnAlxAOCJOY3npS5jvrmQcQmtjikMWZWGjj2YpQYJdD
         wqYG0gsQxlN/NlriHi94GycROyzFCtDQvRaluMWAsE3sXwDvezNNZ5GEStq4Zv8Gbg+x
         oqNebFdh9DvoZP7nqE0FRN7baZK2ro9Ccb+e9szYuToOonSwxRNtf+CUJmpBL/4sScmx
         Ban1sZ5bfb1f5Ne5IcSd9qpSUuVLsuUp1EbAe6vv7XYwVIrC9lXhLch/6cI84ZnE+igQ
         apgA==
MIME-Version: 1.0
Received: by 10.50.47.135 with SMTP id d7mr18066894ign.66.1335442919752; Thu,
 26 Apr 2012 05:21:59 -0700 (PDT)
Received: by 10.231.212.229 with HTTP; Thu, 26 Apr 2012 05:21:59 -0700 (PDT)
In-Reply-To: <D95833D5419B674D8BF30193FBE441D50AB32EF2@rvhk-mail2010.RADVISION.com>
References: <D95833D5419B674D8BF30193FBE441D50AB32EF2@rvhk-mail2010.RADVISION.com>
Date: Thu, 26 Apr 2012 13:21:59 +0100
Message-ID: <CAKaoAEw6LL9gVd0QduSB5Oj5z_QkENcTUY4t+CmU4imWoAM+_Q@mail.gmail.com>
Subject: Re: java.io.IOException: Stream closed occurred frequently on Tomcat 7
From: Craig Silk <craig.silk@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=14dae93403add982a804be94082b
X-Virus-Checked: Checked by ClamAV on apache.org

--14dae93403add982a804be94082b
Content-Type: text/plain; charset=ISO-8859-1

Hi Guofeng,

It would be really helpful if I could have the JSP page that is causing
this error and instructions on how to reproduce the error.

Thanks
Craig


On Thu, Apr 26, 2012 at 7:13 AM, Guofeng Zhang <guofeng@radvision.com>wrote:

> Hi,
>
> This is a page generated by JSP using tags developed by us. This page
> works well on JBoss 5 which using Tomcat 6.x (a branch or so). Because our
> app only use web technology, so we port the app to Tomcat 7.0.22 recently.
> When the app is access from browser for a while, "Stream closed" error
> occurred.
>
> I google the internet and do not find useful information about how to
> solve it.
>
> Your advice is appreciated.
>
> Thanks
>
> Guofeng
>
> 2012-04-25 15:47:59,679 INFO  [STDE] java.io.IOException: Stream closed
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> org.apache.jasper.runtime.JspWriterImpl.ensureOpen(JspWriterImpl.java:210)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> org.apache.jasper.runtime.JspWriterImpl.write(JspWriterImpl.java:322)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> org.apache.jasper.runtime.JspWriterImpl.write(JspWriterImpl.java:353)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> org.apache.jasper.runtime.JspWriterImpl.print(JspWriterImpl.java:488)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> com.vnex.tags.VNeXBodyTagSupport.doEndTag(VNeXBodyTagSupport.java:68)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> org.apache.jsp.jsp.virtualroom.main_jsp._jspx_meth_vnex_005finstance_005f0(main_jsp.java:1333)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> org.apache.jsp.jsp.virtualroom.main_jsp._jspService(main_jsp.java:317)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:593)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:530)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> com.vnex.tags.GetTag.doEndTag(GetTag.java:209)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> org.apache.jsp.jsp.OLtemplate_jsp._jspx_meth_vnex_005fget_005f0(OLtemplate_jsp.java:95)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> org.apache.jsp.jsp.OLtemplate_jsp._jspService(OLtemplate_jsp.java:67)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> com.vnex.core.MainEntry.doRequest(MainEntry.java:453)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> com.vnex.core.MainEntry.doGet(MainEntry.java:144)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> com.vnex.core.MainEntry.doPost(MainEntry.java:159)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> com.visionnex.vcms.outlook.SetUserDisplayFormatFilter.doFilter(SetUserDisplayFormatFilter.java:64)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> com.visionnex.vcms.outlook.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:68)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:581)
> 2012-04-25 15:47:59,679 INFO  [STDE]    at
> org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:964)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1824)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
> 2012-04-25 15:47:59,679 INFO  [STDE]     at
> java.lang.Thread.run(Thread.java:662)
>

--14dae93403add982a804be94082b--

From users-return-233788-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 26 13:42:49 2012
Return-Path: <users-return-233788-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BBFE398DE
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 26 Apr 2012 13:42:49 +0000 (UTC)
Received: (qmail 49881 invoked by uid 500); 26 Apr 2012 13:42:46 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 49803 invoked by uid 500); 26 Apr 2012 13:42:46 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 49794 invoked by uid 99); 26 Apr 2012 13:42:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2012 13:42:46 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [76.96.62.16] (HELO qmta01.westchester.pa.mail.comcast.net) (76.96.62.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2012 13:42:38 +0000
Received: from omta15.westchester.pa.mail.comcast.net ([76.96.62.87])
	by qmta01.westchester.pa.mail.comcast.net with comcast
	id 2cxF1j0041swQuc51diJbn; Thu, 26 Apr 2012 13:42:18 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta15.westchester.pa.mail.comcast.net with comcast
	id 2diJ1j00d38FjT13bdiJzP; Thu, 26 Apr 2012 13:42:18 +0000
Message-ID: <4F9950BC.20108@christopherschultz.net>
Date: Thu, 26 Apr 2012 09:42:20 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Javamelody and Struts
References: <CBB234E5.2AAB3%darryl.lewis@unsw.edu.au> <4F95B427.9040400@yahoo.es> <4F95B4C9.9010802@christopherschultz.net> <4F95C2F3.9040307@yahoo.es> <4F95CB23.5070803@yahoo.es> <4F9859EB.8080709@yahoo.es> <4F987765.4020205@christopherschultz.net> <4F9879B6.6070501@yahoo.es> <4F98ABAA.4080108@christopherschultz.net> <4F98FABF.6010709@yahoo.es>
In-Reply-To: <4F98FABF.6010709@yahoo.es>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Miguel,

On 4/26/12 3:35 AM, Miguel Gonzlez Castaos wrote:
>> If no web browser reports the server certificate as not valid,
>> then what's the problem?
>> 
> From my original email:
> 
> "Now that I'm trying to configure javamelody in Tomcat 5 with HTTPS
> I get the following error when I try to add the context and the
> URL: javamelody avax.net.ssl.SSLHandshakeException: 
> sun.security.validator.ValidatorException: PKIX path building
> failed: sun.security.provider.certpath.SunCertPathBuilderException:
> unable to find valid certification path to requested target."

So this is an error you get from Javamelody? I thought you were
getting this on the server you were monitoring (i.e. the main webapp,
not javamelody).

> I'm trying to add my context and the URL for my webapp in the
> javamelody application:
> 
> http://myweb.com/javamelody/?

Forgive my ignorance (I have no experience with Javamelody), but is
this how you add a webapp to javamelody for monitoring?

> I get two fields and an Add button to do that. In my tests I was
> able to do add a monitor for my webapp if it uses the HTTP protocol
> but not in the production system where it uses HTTPS.
> 
> The question is, how do I know that I have added the right
> intermediate certs from verisign?

I thought you needed to configure your own Tomcat server to *use* an
SSL certificate. It seems that you were already doing that without a
problem (because most clients seem to be happy with the certificate
chain presented by the server).

If Javamelody won't connect, it's probably because Javamelody is using
some keystore that doesn't have the intermediate certificates that I
was discussing. You should check the Javamelody documentation for what
keystore it uses, or how it can be configured to use the keystore of
your choice.

At this point, I think you need to go to the Javamelody folks and ask
over there: this does not seem to be a Tomcat-related problem at all.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+ZULwACgkQ9CaO5/Lv0PAKhwCgixeUlDkPQFiXg+k2AqxfUkPL
p0QAnRPmbpcTDGYJAsH93n4x6r3ZZdvO
=l5nQ
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233789-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 26 13:51:54 2012
Return-Path: <users-return-233789-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 11CD89B44
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 26 Apr 2012 13:51:54 +0000 (UTC)
Received: (qmail 79701 invoked by uid 500); 26 Apr 2012 13:51:50 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 79640 invoked by uid 500); 26 Apr 2012 13:51:50 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 79631 invoked by uid 99); 26 Apr 2012 13:51:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2012 13:51:50 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [76.96.59.212] (HELO qmta14.westchester.pa.mail.comcast.net) (76.96.59.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2012 13:51:45 +0000
Received: from omta11.westchester.pa.mail.comcast.net ([76.96.62.36])
	by qmta14.westchester.pa.mail.comcast.net with comcast
	id 2dq21j0060mv7h05EdrRut; Thu, 26 Apr 2012 13:51:25 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta11.westchester.pa.mail.comcast.net with comcast
	id 2drR1j00c38FjT13XdrSaF; Thu, 26 Apr 2012 13:51:26 +0000
Message-ID: <4F9952DE.501@christopherschultz.net>
Date: Thu, 26 Apr 2012 09:51:26 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Javamelody and Struts
References: <CBB234E5.2AAB3%darryl.lewis@unsw.edu.au> <4F95B427.9040400@yahoo.es> <4F95B4C9.9010802@christopherschultz.net> <4F95C2F3.9040307@yahoo.es> <4F95CB23.5070803@yahoo.es> <4F9859EB.8080709@yahoo.es> <4F987765.4020205@christopherschultz.net> <4F9879B6.6070501@yahoo.es> <4F98ABAA.4080108@christopherschultz.net> <4F991C4A.8090206@yahoo.es>
In-Reply-To: <4F991C4A.8090206@yahoo.es>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Miguel,

On 4/26/12 5:58 AM, Miguel Gonzlez Castaos wrote:
> On 26/04/2012 03:58, Christopher Schultz wrote:
>> -----BEGIN PGP SIGNED MESSAGE----- Hash: SHA1
>> 
>> Miguel,
>> 
>> On 4/25/12 6:24 PM, Miguel Gonzlez Castaos wrote:
>>>> Please post your SSL<Connector>   configuration (cleansed of
>>>> any passwords).
> By the way, double checking the info from my web browser I get this
> is a verisign class 3 secure server G3

It looks like you were using the "EV" intermediate certificates
before. This page[1] says that C3G3 certs are not frequently used
except for client certificates... is that what you've got?

[1] http://www.verisign.com/support/roots.html

> I'm sorry but I come from the Apache world and I'm pretty new to
> Tomcat. Also I have inherited this server and the configuration is
> messy.

When you use Java, you generally have to work with keystores. It's
just a file full of keys and certificates. Think of a Java keystore as
all of the following httpd directives mashed together into a single
binary entity:

  SSLCertificateKeyFile
  SSLCertificateFile
  SSLCertificateChainFile
  SSLCACertificateFile

Also, you have to use an "alias" that Tomcat uses (it's "tomcat") as
the alias for the certificate to actually use for the server (as
opposed to any other certificates you might have in the keystore).

> Maybe I'm wrong but should I add the CAcert somewhere in the SSL
> connector?

There's no place to do that: the whole chain must be in the keystore,
including the CA root all the way down to your own certificate. You
may be able to get away with not having the very top-root CA
certificate... I haven't worked too much with Java keystores so it's
possible that there is a set of root, trusted certificates that are
inherited by all keystores, but there are many ways to
create/configure a ServerSocketFactory, so it's probably possible to
set one up both with or without that globally-recognized set of root
CA certs (i.e. those trusted by the JVM implicitly).

If you are getting this error in Javamelody, then you need to
configure Javamelody properly -- this isn't a Tomcat thing if web
browsers can connect properly to Tomcat via HTTPS.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+ZUt4ACgkQ9CaO5/Lv0PDr1ACgrTdE7YioyGAbGGUU6wzJJOSL
vFsAoI1pjrU1YPs/hH4QMGaWYSlDLEzN
=47Nf
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233790-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 26 13:56:05 2012
Return-Path: <users-return-233790-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 77C089C70
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 26 Apr 2012 13:56:05 +0000 (UTC)
Received: (qmail 96132 invoked by uid 500); 26 Apr 2012 13:56:02 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 95936 invoked by uid 500); 26 Apr 2012 13:56:02 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 95926 invoked by uid 99); 26 Apr 2012 13:56:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2012 13:56:01 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [76.96.59.211] (HELO QMTA11.westchester.pa.mail.comcast.net) (76.96.59.211)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2012 13:55:54 +0000
Received: from omta04.westchester.pa.mail.comcast.net ([76.96.62.35])
	by QMTA11.westchester.pa.mail.comcast.net with comcast
	id 2dmQ1j0070ldTLk5Bdvaqf; Thu, 26 Apr 2012 13:55:34 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta04.westchester.pa.mail.comcast.net with comcast
	id 2dvW1j00J38FjT13QdvWiC; Thu, 26 Apr 2012 13:55:31 +0000
Message-ID: <4F9953D7.9060001@christopherschultz.net>
Date: Thu, 26 Apr 2012 09:55:35 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Reload servlet remotely
References: <334319B2EBE0B144BAE1402B79D82DC5D5D2E46F@srvpegasus> <86727eecd7882541367621f6b42bf69f@tau.ceti.pl>
In-Reply-To: <86727eecd7882541367621f6b42bf69f@tau.ceti.pl>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Mikolaj,

On 4/26/12 5:04 AM, Mikolaj Rydzewski wrote:
> On 26.04.2012 10:54, Gubler, Ruediger wrote:
> 
>> But I need to call the reload from an groovy script. How must the
>> URL looks like to add the auth data? The call of
>> 
>> "http://<server>/manager/text/reload?path=/<servlet>&username=myUser&password=myPass"
>>
>>
>> 
doesn't work.
> 
> http://username:password@<server>/manager/text/reload?path=/<servlet>

+1

Or,
> 
you can set HTTP headers that contain the username and password.
The Groovy class for making an HTTP connection should have a method
for setting HTTP Authentication credentials.

I highly recommend two additional items:

1. Use SSL : you are otherwise going to be sending credentials in the
   clear that are capable of deploying web applications onto your
   server.

2. Configure a RemoteIPFilter (or similar) to restrict clients to
   certain trusted machines. Otherwise, anyone on the Internet (or who
   can open an HTTP connection to your server) will be able to probe
   your manager webapp.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+ZU9cACgkQ9CaO5/Lv0PAYCACfY2kQ0UVvC/q5/wPeOQKx55zB
DIUAn3UExcI9eqfdXezV4ePjKBEXs5rt
=EESi
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233791-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 26 13:58:28 2012
Return-Path: <users-return-233791-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 30C6A9D16
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 26 Apr 2012 13:58:28 +0000 (UTC)
Received: (qmail 5033 invoked by uid 500); 26 Apr 2012 13:58:24 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 4817 invoked by uid 500); 26 Apr 2012 13:58:24 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 4808 invoked by uid 99); 26 Apr 2012 13:58:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2012 13:58:24 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [76.96.62.56] (HELO qmta06.westchester.pa.mail.comcast.net) (76.96.62.56)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2012 13:58:18 +0000
Received: from omta21.westchester.pa.mail.comcast.net ([76.96.62.72])
	by qmta06.westchester.pa.mail.comcast.net with comcast
	id 2cdb1j0021ZXKqc56dxzWD; Thu, 26 Apr 2012 13:57:59 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta21.westchester.pa.mail.comcast.net with comcast
	id 2dxx1j01738FjT13hdxxDq; Thu, 26 Apr 2012 13:57:57 +0000
Message-ID: <4F995468.7080208@christopherschultz.net>
Date: Thu, 26 Apr 2012 09:58:00 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Problem "J2EE Web Profile support"
References: <69E56F9824B18B4697B58E032CF77E08029C01D4@gttexc01.i.atm.to.it>
In-Reply-To: <69E56F9824B18B4697B58E032CF77E08029C01D4@gttexc01.i.atm.to.it>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Max,

On 4/26/12 4:25 AM, Vogliotti Massimo wrote:
> Hi, i use NetBeans 7.0.1 with tomcat 7.0.25 integrated. I'm
> creating a web application with JSF 2.1 and Java EE 6, when I try
> to create a "JSF Pages from entity classes" I get the following
> error message: "JSF Pages for Java EE generated sources can not
> complete without servers with J2EE Web Profile support.". What can
> I do?

Tomcat only implements the servlet specification and IIRC not the full
"web profile" of Java EE. I believe that TomEE was created
specifically for that purpose: you might want to check them out.

http://openejb.apache.org/apache-tomee.html

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+ZVGgACgkQ9CaO5/Lv0PAfeQCgp63ajafqnBclLHw0y7C5nAWF
o9AAoIc2hycukQvanIvF6mcQ+RWqVIcx
=qCuB
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233792-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 26 14:38:07 2012
Return-Path: <users-return-233792-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DF31C90BE
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 26 Apr 2012 14:38:07 +0000 (UTC)
Received: (qmail 32927 invoked by uid 500); 26 Apr 2012 14:38:04 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 32708 invoked by uid 500); 26 Apr 2012 14:38:04 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 32699 invoked by uid 99); 26 Apr 2012 14:38:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2012 14:38:04 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [85.115.54.190] (HELO cluster-j.mailcontrol.com) (85.115.54.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2012 14:37:56 +0000
Received: from emea-outbound.3ds.com (emea-outbound.3ds.com [91.103.40.254])
	by rly47j.srv.mailcontrol.com (MailControl) with ESMTP id q3QEbTe2016017
	for <users@tomcat.apache.org>; Thu, 26 Apr 2012 15:37:29 +0100
Received: from EU-DCC-MBX01.dsone.3ds.com ([169.254.1.123]) by
 EU-DCC-HUB04.dsone.3ds.com ([10.22.115.34]) with mapi id 14.01.0289.008; Thu,
 26 Apr 2012 16:37:29 +0200
From: GIORGI Olivier <Olivier.GIORGI@3ds.com>
To: "users@tomcat.apache.org" <users@tomcat.apache.org>
Subject: Load balancing & session affinity (QUERY)
Thread-Topic: Load balancing & session affinity (QUERY)
Thread-Index: Ac0jkhJRvDpS60wFSUmW1DzVDmw5KQAKAMEA
Date: Thu, 26 Apr 2012 14:37:29 +0000
Message-ID: <EE60C9C13C0BAE4B80DA001A947C834C2DADD2E5@EU-DCC-MBX01.dsone.3ds.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-cr-hashedpuzzle: BS6V BVqU Df/1 EcRc Gl2q Hcvx Hn0K ISve IU5l IXPw Il7Y
 Iwnu JBHt KvWG LOQy
 LQen;1;dQBzAGUAcgBzAEAAdABvAG0AYwBhAHQALgBhAHAAYQBjAGgAZQAuAG8AcgBnAA==;Sosha1_v1;7;{B8BA4A13-28BB-4BA1-9505-234BAA9B6379};bwBsAGkAdgBpAGUAcgAuAGcAaQBvAHIAZwBpAEAAMwBkAHMALgBjAG8AbQA=;Thu,
 26 Apr 2012 14:37:27
 GMT;TABvAGEAZAAgAGIAYQBsAGEAbgBjAGkAbgBnACAAJgAgAHMAZQBzAHMAaQBvAG4AIABhAGYAZgBpAG4AaQB0AHkAIAAoAFEAVQBFAFIAWQApAA==
x-cr-puzzleid: {B8BA4A13-28BB-4BA1-9505-234BAA9B6379}
x-originating-ip: [10.234.85.22]
Content-Type: multipart/alternative;
	boundary="_000_EE60C9C13C0BAE4B80DA001A947C834C2DADD2E5EUDCCMBX01dsone_"
MIME-Version: 1.0
X-Scanned-By: MailControl 7.7.0.1 (www.mailcontrol.com) on 10.74.0.157

--_000_EE60C9C13C0BAE4B80DA001A947C834C2DADD2E5EUDCCMBX01dsone_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hello to all,

I am using Apache 2.2.21 & Tomcat 6.0.29

1) Schema: Load balancer (Apache.2.2.21) -> 1st appli (Tomcat 6.0.29)
-> 2nd appli. (Tomcat 6.0.29)

2) Using the following configuration, my load balancing is stateless instea=
d of statefull (having a look at the logs).
---------------------------------------------------------------------------=
---------------------------------------------------------------------------=
-------
ProxyRequests Off
<Proxy *>
Order deny,allow
Allow from all
</Proxy>
<IfModule log_config_module>
LogFormat "%h %l %u %t \"%r\" %>s %b \"%{UNIQUE_ID}e\" \"%{BALANCER_WORKER_=
ROUTE}e\"" logjyc
CustomLog logs/jyc_log logjyc
</IfModule>
ProxyPass /MCSRootURI balancer://MCSCluster stickysession=3DJSESSIONID nofa=
ilover=3DOff
<Proxy balancer://MCSCluster >
BalancerMember http://workstation1:MCSPort1/MCSRootURI route=3Dhost1
BalancerMember http://MCSServer2:MCSPort2/MCSRootURI route=3Dhost2
</Proxy>
ProxyPassReverse /MCSRootURI http://MCSServer1:MCSPort1/MCSRootURI
ProxyPassReverse /MCSRootURI http://MCSServer2:MCSPort2/MCSRootURI
---------------------------------------------------------------------------=
---------------------------------------------------------------------------=
-------

3) Query
=3D> What have i missed on Apache or Tomcat side to get JSESSIONID taken in=
to account then have a statefull load balancing ?

4) Bypass: using the following configuration my load balancing is this time=
 statefull (having a look at the logs).
---------------------------------------------------------------------------=
---------------------------------------------------------------------------=
-------
ProxyRequests Off
<Proxy *>
Order deny,allow
Allow from all
</Proxy>
<IfModule log_config_module>
LogFormat "%h %l %u %t \"%r\" %>s %b \"%{UNIQUE_ID}e\" \"%{BALANCER_WORKER_=
ROUTE}e\"" logjyc
CustomLog logs/jyc_log logjyc
</IfModule>
SetEnvIf ^Cookie$ "MYCOOKIE=3D([^ ;]*)" VARCOOKIE=3D$1
Header add Set-Cookie "MYCOOKIE=3D%{UNIQUE_ID}e.%{BALANCER_WORKER_ROUTE}e; =
path=3D/" env=3D!VARCOOKIE
ProxyPass /MCSRootURI balancer://MCSCluster stickysession=3DMYCOOKIE nofail=
over=3DOff
<Proxy balancer://MCSCluster >
BalancerMember http://MCSServer1:MCSPort1/MCSRootURI route=3Dhost1
BalancerMember http://MCSServer2:MCSPort2/MCSRootURI route=3Dhost2
</Proxy>
ProxyPassReverse /MCSRootURI http://MCSServer1:MCSPort1/MCSRootURI
ProxyPassReverse /MCSRootURI http://MCSServer2:MCSPort2/MCSRootURI
---------------------------------------------------------------------------=
---------------------------------------------------------------------------=
-------

Thanks in advance for your help.
Best regards Olivier.


This email and any attachments are intended solely for the use of the indiv=
idual or entity to whom it is addressed and may be confidential and/or priv=
ileged.

If you are not one of the named recipients or have received this email in e=
rror,

(i) you should not read, disclose, or copy it,

(ii) please notify sender of your receipt by reply email and delete this em=
ail and all attachments,

(iii) Dassault Systemes does not accept or assume any liability or responsi=
bility for any use of or reliance on this email.

For other languages, go to http://www.3ds.com/terms/email-disclaimer

--_000_EE60C9C13C0BAE4B80DA001A947C834C2DADD2E5EUDCCMBX01dsone_--

From users-return-233793-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 26 16:00:00 2012
Return-Path: <users-return-233793-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AF0769E21
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 26 Apr 2012 16:00:00 +0000 (UTC)
Received: (qmail 36154 invoked by uid 500); 26 Apr 2012 15:59:57 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 36084 invoked by uid 500); 26 Apr 2012 15:59:57 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 36072 invoked by uid 99); 26 Apr 2012 15:59:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2012 15:59:57 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.91.2.13] (HELO smtp-outbound-2.vmware.com) (208.91.2.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2012 15:59:52 +0000
Received: from sc9-mailhost1.vmware.com (sc9-mailhost1.vmware.com [10.113.161.71])
	by smtp-outbound-2.vmware.com (Postfix) with ESMTP id 7735D28427
	for <users@tomcat.apache.org>; Thu, 26 Apr 2012 08:59:31 -0700 (PDT)
Received: from sc9-exht09.vmware.com (sc9-exht09.vmware.com [10.113.190.39])
	by sc9-mailhost1.vmware.com (Postfix) with ESMTP id 6E43418346
	for <users@tomcat.apache.org>; Thu, 26 Apr 2012 08:59:31 -0700 (PDT)
Received: from exch-mbx-114.vmware.com ([10.113.190.114]) by
 sc9-exht09.vmware.com ([10.113.190.39]) with mapi; Thu, 26 Apr 2012 08:59:31
 -0700
From: Derek Beauregard <dbeauregard@vmware.com>
To: Tomcat Users List <users@tomcat.apache.org>
Date: Thu, 26 Apr 2012 08:59:29 -0700
Subject: Re: Load balancing & session affinity (QUERY)
Thread-Topic: Load balancing & session affinity (QUERY)
Thread-Index: Ac0jxZDlZxIJct7LSPSuNAEBDzyrUQ==
Message-ID: <CBBEDA86.4DE9%dbeauregard@vmware.com>
In-Reply-To: <EE60C9C13C0BAE4B80DA001A947C834C2DADD2E5@EU-DCC-MBX01.dsone.3ds.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
user-agent: Microsoft-MacOutlook/14.14.0.111121
acceptlanguage: en-US
Content-Type: text/plain; charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Have you defined the jvmRoute on your Engine element in tomcat's
server.xml?

E.g., <Engine name=3D"catalina" jvmRoute=3D"host1"=8A>

The value for jvmRoute should match the route defined in your apache
balancer config.

-Derek

Derek Beauregard



On 4/26/12 9:37 AM, "GIORGI Olivier" <Olivier.GIORGI@3ds.com> wrote:

>Hello to all,
>
>I am using Apache 2.2.21 & Tomcat 6.0.29
>
>1) Schema: Load balancer (Apache.2.2.21) -> 1st appli (Tomcat 6.0.29)
>-> 2nd appli. (Tomcat 6.0.29)
>
>2) Using the following configuration, my load balancing is stateless
>instead of statefull (having a look at the logs).
>--------------------------------------------------------------------------
>--------------------------------------------------------------------------
>---------
>ProxyRequests Off
><Proxy *>
>Order deny,allow
>Allow from all
></Proxy>
><IfModule log_config_module>
>LogFormat "%h %l %u %t \"%r\" %>s %b \"%{UNIQUE_ID}e\"
>\"%{BALANCER_WORKER_ROUTE}e\"" logjyc
>CustomLog logs/jyc_log logjyc
></IfModule>
>ProxyPass /MCSRootURI balancer://MCSCluster stickysession=3DJSESSIONID
>nofailover=3DOff
><Proxy balancer://MCSCluster >
>BalancerMember http://workstation1:MCSPort1/MCSRootURI route=3Dhost1
>BalancerMember http://MCSServer2:MCSPort2/MCSRootURI route=3Dhost2
></Proxy>
>ProxyPassReverse /MCSRootURI http://MCSServer1:MCSPort1/MCSRootURI
>ProxyPassReverse /MCSRootURI http://MCSServer2:MCSPort2/MCSRootURI
>--------------------------------------------------------------------------
>--------------------------------------------------------------------------
>---------
>
>3) Query
>=3D> What have i missed on Apache or Tomcat side to get JSESSIONID taken
>into account then have a statefull load balancing ?
>
>4) Bypass: using the following configuration my load balancing is this
>time statefull (having a look at the logs).
>--------------------------------------------------------------------------
>--------------------------------------------------------------------------
>---------
>ProxyRequests Off
><Proxy *>
>Order deny,allow
>Allow from all
></Proxy>
><IfModule log_config_module>
>LogFormat "%h %l %u %t \"%r\" %>s %b \"%{UNIQUE_ID}e\"
>\"%{BALANCER_WORKER_ROUTE}e\"" logjyc
>CustomLog logs/jyc_log logjyc
></IfModule>
>SetEnvIf ^Cookie$ "MYCOOKIE=3D([^ ;]*)" VARCOOKIE=3D$1
>Header add Set-Cookie "MYCOOKIE=3D%{UNIQUE_ID}e.%{BALANCER_WORKER_ROUTE}e;
>path=3D/" env=3D!VARCOOKIE
>ProxyPass /MCSRootURI balancer://MCSCluster stickysession=3DMYCOOKIE
>nofailover=3DOff
><Proxy balancer://MCSCluster >
>BalancerMember http://MCSServer1:MCSPort1/MCSRootURI route=3Dhost1
>BalancerMember http://MCSServer2:MCSPort2/MCSRootURI route=3Dhost2
></Proxy>
>ProxyPassReverse /MCSRootURI http://MCSServer1:MCSPort1/MCSRootURI
>ProxyPassReverse /MCSRootURI http://MCSServer2:MCSPort2/MCSRootURI
>--------------------------------------------------------------------------
>--------------------------------------------------------------------------
>---------
>
>Thanks in advance for your help.
>Best regards Olivier.
>
>
>This email and any attachments are intended solely for the use of the
>individual or entity to whom it is addressed and may be confidential
>and/or privileged.
>
>If you are not one of the named recipients or have received this email in
>error,
>
>(i) you should not read, disclose, or copy it,
>
>(ii) please notify sender of your receipt by reply email and delete this
>email and all attachments,
>
>(iii) Dassault Systemes does not accept or assume any liability or
>responsibility for any use of or reliance on this email.
>
>For other languages, go to http://www.3ds.com/terms/email-disclaimer


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233794-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 26 18:25:47 2012
Return-Path: <users-return-233794-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8CD589B5E
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 26 Apr 2012 18:25:47 +0000 (UTC)
Received: (qmail 61675 invoked by uid 500); 26 Apr 2012 18:25:44 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 61545 invoked by uid 500); 26 Apr 2012 18:25:43 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 61516 invoked by uid 99); 26 Apr 2012 18:25:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2012 18:25:42 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [85.115.54.190] (HELO cluster-j.mailcontrol.com) (85.115.54.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2012 18:25:34 +0000
Received: from emea-outbound.3ds.com (emea-outbound.3ds.com [91.103.40.254])
	by rly27j.srv.mailcontrol.com (MailControl) with ESMTP id q3QIPCNt009747
	for <users@tomcat.apache.org>; Thu, 26 Apr 2012 19:25:13 +0100
Received: from EU-DCC-MBX01.dsone.3ds.com ([169.254.1.123]) by
 EU-DCC-HUB02.dsone.3ds.com ([10.22.115.32]) with mapi id 14.01.0289.008; Thu,
 26 Apr 2012 20:25:12 +0200
From: GIORGI Olivier <Olivier.GIORGI@3ds.com>
To: Tomcat Users List <users@tomcat.apache.org>
Subject: RE: Load balancing & session affinity (QUERY)
Thread-Topic: Load balancing & session affinity (QUERY)
Thread-Index: Ac0jkhJRvDpS60wFSUmW1DzVDmw5KQAKAMEA///1bYD//7X04A==
Date: Thu, 26 Apr 2012 18:25:12 +0000
Message-ID: <EE60C9C13C0BAE4B80DA001A947C834C2DADD553@EU-DCC-MBX01.dsone.3ds.com>
References: <EE60C9C13C0BAE4B80DA001A947C834C2DADD2E5@EU-DCC-MBX01.dsone.3ds.com>
 <CBBEDA86.4DE9%dbeauregard@vmware.com>
In-Reply-To: <CBBEDA86.4DE9%dbeauregard@vmware.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-originating-ip: [10.234.85.22]
Content-Type: text/plain; charset="iso-8859-2"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Scanned-By: MailControl 7.7.0.1 (www.mailcontrol.com) on 10.74.0.137

Hello Derek,

Thank you for your fruitfull answer.

It works.

Best regards Olivier.

-----Original Message-----
From: Derek Beauregard [mailto:dbeauregard@vmware.com]
Sent: Thursday, April 26, 2012 5:59 PM
To: Tomcat Users List
Subject: Re: Load balancing & session affinity (QUERY)

Have you defined the jvmRoute on your Engine element in tomcat's
server.xml?

E.g., <Engine name=3D"catalina" jvmRoute=3D"host1"=A9>

The value for jvmRoute should match the route defined in your apache
balancer config.

-Derek

Derek Beauregard



On 4/26/12 9:37 AM, "GIORGI Olivier" <Olivier.GIORGI@3ds.com> wrote:

>Hello to all,
>
>I am using Apache 2.2.21 & Tomcat 6.0.29
>
>1) Schema: Load balancer (Apache.2.2.21) -> 1st appli (Tomcat 6.0.29)
>-> 2nd appli. (Tomcat 6.0.29)
>
>2) Using the following configuration, my load balancing is stateless
>instead of statefull (having a look at the logs).
>--------------------------------------------------------------------------
>--------------------------------------------------------------------------
>---------
>ProxyRequests Off
><Proxy *>
>Order deny,allow
>Allow from all
></Proxy>
><IfModule log_config_module>
>LogFormat "%h %l %u %t \"%r\" %>s %b \"%{UNIQUE_ID}e\"
>\"%{BALANCER_WORKER_ROUTE}e\"" logjyc
>CustomLog logs/jyc_log logjyc
></IfModule>
>ProxyPass /MCSRootURI balancer://MCSCluster stickysession=3DJSESSIONID
>nofailover=3DOff
><Proxy balancer://MCSCluster >
>BalancerMember http://workstation1:MCSPort1/MCSRootURI route=3Dhost1
>BalancerMember http://MCSServer2:MCSPort2/MCSRootURI route=3Dhost2
></Proxy>
>ProxyPassReverse /MCSRootURI http://MCSServer1:MCSPort1/MCSRootURI
>ProxyPassReverse /MCSRootURI http://MCSServer2:MCSPort2/MCSRootURI
>--------------------------------------------------------------------------
>--------------------------------------------------------------------------
>---------
>
>3) Query
>=3D> What have i missed on Apache or Tomcat side to get JSESSIONID taken
>into account then have a statefull load balancing ?
>
>4) Bypass: using the following configuration my load balancing is this
>time statefull (having a look at the logs).
>--------------------------------------------------------------------------
>--------------------------------------------------------------------------
>---------
>ProxyRequests Off
><Proxy *>
>Order deny,allow
>Allow from all
></Proxy>
><IfModule log_config_module>
>LogFormat "%h %l %u %t \"%r\" %>s %b \"%{UNIQUE_ID}e\"
>\"%{BALANCER_WORKER_ROUTE}e\"" logjyc
>CustomLog logs/jyc_log logjyc
></IfModule>
>SetEnvIf ^Cookie$ "MYCOOKIE=3D([^ ;]*)" VARCOOKIE=3D$1
>Header add Set-Cookie "MYCOOKIE=3D%{UNIQUE_ID}e.%{BALANCER_WORKER_ROUTE}e;
>path=3D/" env=3D!VARCOOKIE
>ProxyPass /MCSRootURI balancer://MCSCluster stickysession=3DMYCOOKIE
>nofailover=3DOff
><Proxy balancer://MCSCluster >
>BalancerMember http://MCSServer1:MCSPort1/MCSRootURI route=3Dhost1
>BalancerMember http://MCSServer2:MCSPort2/MCSRootURI route=3Dhost2
></Proxy>
>ProxyPassReverse /MCSRootURI http://MCSServer1:MCSPort1/MCSRootURI
>ProxyPassReverse /MCSRootURI http://MCSServer2:MCSPort2/MCSRootURI
>--------------------------------------------------------------------------
>--------------------------------------------------------------------------
>---------
>
>Thanks in advance for your help.
>Best regards Olivier.
>
>
>This email and any attachments are intended solely for the use of the
>individual or entity to whom it is addressed and may be confidential
>and/or privileged.
>
>If you are not one of the named recipients or have received this email in
>error,
>
>(i) you should not read, disclose, or copy it,
>
>(ii) please notify sender of your receipt by reply email and delete this
>email and all attachments,
>
>(iii) Dassault Systemes does not accept or assume any liability or
>responsibility for any use of or reliance on this email.
>
>For other languages, go to http://www.3ds.com/terms/email-disclaimer


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org

This email and any attachments are intended solely for the use of the indiv=
idual or entity to whom it is addressed and may be confidential and/or priv=
ileged.

If you are not one of the named recipients or have received this email in e=
rror,

(i) you should not read, disclose, or copy it,

(ii) please notify sender of your receipt by reply email and delete this em=
ail and all attachments,

(iii) Dassault Systemes does not accept or assume any liability or responsi=
bility for any use of or reliance on this email.

For other languages, go to http://www.3ds.com/terms/email-disclaimer

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233795-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 26 19:45:06 2012
Return-Path: <users-return-233795-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B073C9B98
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 26 Apr 2012 19:45:06 +0000 (UTC)
Received: (qmail 20433 invoked by uid 500); 26 Apr 2012 19:45:03 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 20358 invoked by uid 500); 26 Apr 2012 19:45:03 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 20349 invoked by uid 99); 26 Apr 2012 19:45:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2012 19:45:03 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [96.39.62.68] (HELO guardian.stonekeep.com) (96.39.62.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2012 19:44:55 +0000
Received: from localhost (localhost [127.0.0.1])
	by guardian.stonekeep.com (Postfix) with ESMTP id C82D88F4006
	for <users@tomcat.apache.org>; Thu, 26 Apr 2012 15:44:34 -0400 (EDT)
X-Virus-Scanned: Debian amavisd-new at guardian.stonekeep.com
Received: from guardian.stonekeep.com ([127.0.0.1])
	by localhost (guardian.stonekeep.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id gNjR7e-VW3Kv for <users@tomcat.apache.org>;
	Thu, 26 Apr 2012 15:44:33 -0400 (EDT)
Received: from sloop.local (50-78-246-193-static.hfc.comcastbusiness.net [50.78.246.193])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by guardian.stonekeep.com (Postfix) with ESMTPSA id 31AD29900C0
	for <users@tomcat.apache.org>; Thu, 26 Apr 2012 15:44:33 -0400 (EDT)
Message-ID: <4F99A5A0.7060000@homeport.org>
Date: Thu, 26 Apr 2012 15:44:32 -0400
From: Dave Shevett <shevett@homeport.org>
Reply-To: shevett@homeport.org
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: "High Level" question.  Managing dynamic vhost deployments...
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hey folks - I've gotten great help on the list before, I'm looking for 
some guidance on how to approach this...

I have a hosted service that deploys / provisions vhosts running a 
prepackaged .war app.  I'd like to be able to 'spin up' a vhost on the 
fly, without restarting tomcat.

What I'm doing now is:
* Create a directory in /etc/tomcat6/Catalina/vhostname/
* Create a ROOT.xml in that dir that has <Context 
docBase=[sharedwarfilename]...> for the vhost
* Edit server.xml to make a new Host entry
* Restart tomcat

The app goes live (there's an Apache httpd front end with a wildcard on 
the domain that's using ajp: connections to Tomcat, so 
foo.domainname.com will look for a vhost of that name on the Tomcat server).

This works, but is a pain because it requires a tomcat restart and a 
manual file edit.

What I want to do be able to do is bring up a vhost, maybe via the 
Tomcat manager, without doing a restart.  I can deploy a .war file easy, 
but the vhost entry wouldn't wake up.

My understanding is I can make the vhosts go active via a script or tool 
that uses JMX calls to Tomcat to configure up the vhost, but my 
understanding is this configuration is mutable - if Tomcat restarts, all 
the vhost configurations disappear, and I have to 'reprovision it'.

Is it possible to spin up and down vhosts like this without restarting 
tomcat, and if so, what's the preferred methodology that makes it 
reproduceable, if the configuration is only in memory, and will 
disappear if/when tomcat restarts?

Thanks very much!

	-d



---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233796-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 26 20:22:50 2012
Return-Path: <users-return-233796-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EFD979A30
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 26 Apr 2012 20:22:50 +0000 (UTC)
Received: (qmail 15866 invoked by uid 500); 26 Apr 2012 20:22:47 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 15683 invoked by uid 500); 26 Apr 2012 20:22:47 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 15673 invoked by uid 99); 26 Apr 2012 20:22:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2012 20:22:47 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [76.96.59.243] (HELO qmta13.westchester.pa.mail.comcast.net) (76.96.59.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2012 20:22:41 +0000
Received: from omta16.westchester.pa.mail.comcast.net ([76.96.62.88])
	by qmta13.westchester.pa.mail.comcast.net with comcast
	id 2hHg1j00B1uE5Es5DkNM90; Thu, 26 Apr 2012 20:22:21 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta16.westchester.pa.mail.comcast.net with comcast
	id 2kNN1j00M38FjT13ckNNzE; Thu, 26 Apr 2012 20:22:23 +0000
Message-ID: <4F99AE7B.5080609@christopherschultz.net>
Date: Thu, 26 Apr 2012 16:22:19 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Long timeout after aborted upload
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

All,

I have Tomcat 7.0.27 fronted with Apache httpd 2.2 using mod_jk
1.2.35. We have a new feature to upload images into our webapp. It
uses Struts 1.3's multipart form parser to actually get the bits from
the request.

It's got a feature where you can get a request attribute set for you
if the upload exceeds a certain size. When we see that, we abort right
away, sending the user to an error page via a forward (Struts does
this for us) which should return a 200 OK response.

In the browser (Firefox 11.0 and 12.0 in our case), we can see the
throbber work for a good 10-20 seconds *after* the upload has failed
- -- our code has stopped running -- apparently waiting for something.

I've done thread dumps during idle times and during this long period
of waiting and they are /identical/ -- even the md5sums are the same.
That suggests to me that Tomcat and our webapp have completely washed
their hands of the request.

The only possibility I can see here is that Apache httpd hasn't closed
the connection. I'm going to be adding an access log that shows the
response time just to be sure, but can anyone think of anything that
might be causing this delay?

On a hunch that it was a keep-alive sitting there hung, I explicitly
set a "Connection:close" header in the response just to test. That
appears to have done nothing.

- From the investigations so far, it seems that the "problem" really
could just be the upload time: I tried to scp the file to the server
and it took about 20 seconds (which seems insane to me for an 11MiB
upload, but that's an issue between me and my ISP) so maybe just
pushing the bits is the issue.

Since Tomcat appears to be idle pretty much right away, the issue has
to be either mod_jk or httpd, or the browser itself. Is there anything
I can do at the web server level to sever the connection ASAP? Or is
this just a stubborn browser that refuses to give up until the last
byte has been sent?

Thanks,
- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+ZrnsACgkQ9CaO5/Lv0PDCfQCgwE0tZRVYg0LQPKcA+QmEv1cX
MXcAn0qt5bSa4OKb74omJ6UJA8lwak1f
=qIxu
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233797-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 26 20:38:41 2012
Return-Path: <users-return-233797-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BE0D19597
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 26 Apr 2012 20:38:41 +0000 (UTC)
Received: (qmail 86447 invoked by uid 500); 26 Apr 2012 20:38:38 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 86254 invoked by uid 500); 26 Apr 2012 20:38:38 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 86232 invoked by uid 99); 26 Apr 2012 20:38:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2012 20:38:37 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [216.82.241.196] (HELO mail46.messagelabs.com) (216.82.241.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2012 20:38:28 +0000
X-Env-Sender: Chuck.Caldarale@unisys.com
X-Msg-Ref: server-3.tower-46.messagelabs.com!1335472685!27295270!10
X-Originating-IP: [192.61.61.105]
X-StarScan-Version: 6.5.5; banners=-,-,-
X-VirusChecked: Checked
Received: (qmail 29239 invoked from network); 26 Apr 2012 20:38:06 -0000
Received: from naedge.unisys.com (HELO USEA-NAEDGE2.unisys.com) (192.61.61.105)
  by server-3.tower-46.messagelabs.com with RC4-SHA encrypted SMTP; 26 Apr 2012 20:38:06 -0000
Received: from usea-nahubcas2.na.uis.unisys.com (129.224.76.115) by
 USEA-NAEDGE2.unisys.com (192.61.61.105) with Microsoft SMTP Server (TLS) id
 8.3.83.0; Thu, 26 Apr 2012 15:37:35 -0500
Received: from USEA-EXCH8.na.uis.unisys.com ([129.224.76.41]) by
 usea-nahubcas2.na.uis.unisys.com ([129.224.76.115]) with mapi; Thu, 26 Apr
 2012 15:37:34 -0500
From: "Caldarale, Charles R" <Chuck.Caldarale@unisys.com>
To: Tomcat Users List <users@tomcat.apache.org>
Date: Thu, 26 Apr 2012 15:37:33 -0500
Subject: RE: "High Level" question.  Managing dynamic vhost deployments...
Thread-Topic: "High Level" question.  Managing dynamic vhost deployments...
Thread-Index: Ac0j5RhXy3goHeJiQYmkudkVdw1WhwABoLoA
Message-ID: <99C8B2929B39C24493377AC7A121E21FB01946CE42@USEA-EXCH8.na.uis.unisys.com>
References: <4F99A5A0.7060000@homeport.org>
In-Reply-To: <4F99A5A0.7060000@homeport.org>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

> From: Dave Shevett [mailto:shevett@homeport.org]=20
> Subject: "High Level" question. Managing dynamic vhost deployments...

> I'd like to be able to 'spin up' a vhost on the fly,
> without restarting tomcat.

Look at the host-manager (not the manager) webapp that comes bundled with r=
eal Tomcat distributions.

I would point you to the doc for it ... if it existed.  Patches welcome (he=
 says, while ducking under the table).

 - Chuck


THIS COMMUNICATION MAY CONTAIN CONFIDENTIAL AND/OR OTHERWISE PROPRIETARY MA=
TERIAL and is thus for use only by the intended recipient. If you received =
this in error, please contact the sender and delete the e-mail and its atta=
chments from all computers.


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233798-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Thu Apr 26 21:06:11 2012
Return-Path: <users-return-233798-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 41711C245
	for <apmail-tomcat-users-archive@www.apache.org>; Thu, 26 Apr 2012 21:06:11 +0000 (UTC)
Received: (qmail 95854 invoked by uid 500); 26 Apr 2012 21:06:08 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 95795 invoked by uid 500); 26 Apr 2012 21:06:08 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 95786 invoked by uid 99); 26 Apr 2012 21:06:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2012 21:06:07 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jordan@viviotech.net designates 208.77.211.51 as permitted sender)
Received: from [208.77.211.51] (HELO mail3.viviotech.net) (208.77.211.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 Apr 2012 21:06:00 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail3.viviotech.net (Postfix) with ESMTP id A9EC51258D2
	for <users@tomcat.apache.org>; Thu, 26 Apr 2012 14:11:34 -0700 (PDT)
X-Virus-Scanned: amavisd-new at mail3.viviotech.net
Received: from mail3.viviotech.net ([127.0.0.1])
	by localhost (mail3.viviotech.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id LKKzqOfqq1R8 for <users@tomcat.apache.org>;
	Thu, 26 Apr 2012 14:11:33 -0700 (PDT)
Received: from [192.168.254.249] (lan.viviotech.net [208.77.208.186])
	by mail3.viviotech.net (Postfix) with ESMTPSA id 8180F1258CF
	for <users@tomcat.apache.org>; Thu, 26 Apr 2012 14:11:33 -0700 (PDT)
Message-ID: <4F99B8C0.7040600@viviotech.net>
Date: Thu, 26 Apr 2012 14:06:08 -0700
From: Jordan Michaels <jordan@viviotech.net>
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:11.0) Gecko/20120412 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: "High Level" question.  Managing dynamic vhost deployments...
References: <4F99A5A0.7060000@homeport.org> <99C8B2929B39C24493377AC7A121E21FB01946CE42@USEA-EXCH8.na.uis.unisys.com>
In-Reply-To: <99C8B2929B39C24493377AC7A121E21FB01946CE42@USEA-EXCH8.na.uis.unisys.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Dave,

I don't know if this will help you, but I've done some work in this area 
that you may find useful.

In my case, I needed a way to create a Tomcat context based on sites 
that are already configured in Apache. This way, a client could use a 
control panel to create sites in Apache, and then whenever a request 
came in for Tomcat, the new context would be created in Tomcat that 
matched the site in Apache.

I did this project for the CFML community, but the process doesn't 
require CFML in any way. It can be used effectively with anything that 
needs a dynamic context that will match a site configured in Apache.

If you think this might help you, can you check out the project at the 
following URL:

http://www.modcfml.org/

I've been getting a lot of requests to make other aspects dynamic as 
well, such as custom context configs, aliases, etc. but that would 
require patching the Host Manager or writing my own classes that 
interfaced with the same classes that the Host Manager uses. That is a 
bit intimidating, so I haven't attempted it yet.

At any rate, maybe what I've done so far can help you in your efforts.

Warm Regards,
Jordan Michaels

On 04/26/2012 01:37 PM, Caldarale, Charles R wrote:
>> From: Dave Shevett [mailto:shevett@homeport.org]
>> Subject: "High Level" question. Managing dynamic vhost deployments...
>
>> I'd like to be able to 'spin up' a vhost on the fly,
>> without restarting tomcat.
>
> Look at the host-manager (not the manager) webapp that comes bundled with real Tomcat distributions.
>
> I would point you to the doc for it ... if it existed.  Patches welcome (he says, while ducking under the table).
>
>   - Chuck
>
>
> THIS COMMUNICATION MAY CONTAIN CONFIDENTIAL AND/OR OTHERWISE PROPRIETARY MATERIAL and is thus for use only by the intended recipient. If you received this in error, please contact the sender and delete the e-mail and its attachments from all computers.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233799-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 27 07:56:45 2012
Return-Path: <users-return-233799-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 104CDCA21
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 27 Apr 2012 07:56:45 +0000 (UTC)
Received: (qmail 10811 invoked by uid 500); 27 Apr 2012 07:56:41 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 10553 invoked by uid 500); 27 Apr 2012 07:56:36 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 10523 invoked by uid 99); 27 Apr 2012 07:56:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2012 07:56:35 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aw@ice-sa.com designates 212.85.38.228 as permitted sender)
Received: from [212.85.38.228] (HELO tor.combios.es) (212.85.38.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2012 07:56:27 +0000
Received: from [192.168.245.129] (p549E8D9D.dip0.t-ipconnect.de [84.158.141.157])
	by tor.combios.es (Postfix) with ESMTPA id 75E48DA07F9
	for <users@tomcat.apache.org>; Fri, 27 Apr 2012 09:56:04 +0200 (CEST)
Message-ID: <4F9A510F.30405@ice-sa.com>
Date: Fri, 27 Apr 2012 09:55:59 +0200
From: =?UTF-8?B?QW5kcsOpIFdhcm5pZXI=?= <aw@ice-sa.com>
Reply-To: Tomcat Users List <users@tomcat.apache.org>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Long timeout after aborted upload
References: <4F99AE7B.5080609@christopherschultz.net>
In-Reply-To: <4F99AE7B.5080609@christopherschultz.net>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Christopher,

Christopher Schultz wrote:
...
> 
> Since Tomcat appears to be idle pretty much right away, the issue has
> to be either mod_jk or httpd, or the browser itself. Is there anything
> I can do at the web server level to sever the connection ASAP? Or is
> this just a stubborn browser that refuses to give up until the last
> byte has been sent?
> 
You have to think of it this way : there is a lot of machinery and piping and intermediate 
holding tanks between the browser which is uploading the file, and ultimately your Tomcat 
webapp.  So even when your webapp whistles "stop!", there will be a significant delay 
before that filters down to the browser.
And the main issue is that, while it is uploading the data, the browser isn't reading 
anything from the webserver.  There is no "out of band" mechanism in HTTP for the 
webserver to tell the browser to stop in the middle of an upload (which is just "sending a 
HTTP request").  The only way is for the webserver to shut down the connection on which 
the browser is writing, which would cause the browser to experience a "Connection reset" 
error (which doesn't look very nice).
Other than that, the browser will only look for a response, when it has finished sending 
its request (which sounds logical, when you think about it).
Even to achieve the closing of the upload connection, you would need a mechanism for your 
webapp to be able to tell the closest possible "node" to the browser, to drop that 
connection.  There is no such standard mechanism. (And between the browser and your 
webserver, there can be proxies etc.).

Sending a response to the browser including a "Connection: close" header, just tells the 
browser that it will not be able to send *its next request* on the same HTTP/TCP 
connection, and that it will have to build a new connection.  But it doesn't impact the 
current request/response cycle.

This all being said, this section of the HTTP RFC provides some interesting clues : 
http://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html

If this thing of stopping the browser waisting its time is really important in your case, 
then on the base of the above, one could imagine a solution, based on for example a 
specialised browser "applet" which would send the file-to-upload using a separate HTTP 
request including an "Expect" header (see section 8.2.3), then waiting for the server to 
answer with a "100 Continue" response before sending the body.
(And hoping that the webserver handles this properly).
It seems worth a try, but it also seems fairly complicated to do right.

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233800-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 27 08:28:15 2012
Return-Path: <users-return-233800-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 88093CA94
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 27 Apr 2012 08:28:15 +0000 (UTC)
Received: (qmail 83476 invoked by uid 500); 27 Apr 2012 08:28:12 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 83255 invoked by uid 500); 27 Apr 2012 08:28:12 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 83228 invoked by uid 99); 27 Apr 2012 08:28:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2012 08:28:11 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aw@ice-sa.com designates 212.85.38.228 as permitted sender)
Received: from [212.85.38.228] (HELO tor.combios.es) (212.85.38.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2012 08:28:04 +0000
Received: from [192.168.245.129] (p549E8D9D.dip0.t-ipconnect.de [84.158.141.157])
	by tor.combios.es (Postfix) with ESMTPA id A71C8DA080C
	for <users@tomcat.apache.org>; Fri, 27 Apr 2012 10:27:42 +0200 (CEST)
Message-ID: <4F9A587C.3040001@ice-sa.com>
Date: Fri, 27 Apr 2012 10:27:40 +0200
From: =?ISO-8859-1?Q?Andr=E9_Warnier?= <aw@ice-sa.com>
Reply-To: Tomcat Users List <users@tomcat.apache.org>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: "High Level" question.  Managing dynamic vhost deployments...
References: <4F99A5A0.7060000@homeport.org>
In-Reply-To: <4F99A5A0.7060000@homeport.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Dave Shevett wrote:
> Hey folks - I've gotten great help on the list before, I'm looking for 
> some guidance on how to approach this...
> 
> I have a hosted service that deploys / provisions vhosts running a 
> prepackaged .war app.  I'd like to be able to 'spin up' a vhost on the 
> fly, without restarting tomcat.
> 
> What I'm doing now is:
> * Create a directory in /etc/tomcat6/Catalina/vhostname/
> * Create a ROOT.xml in that dir that has <Context 
> docBase=[sharedwarfilename]...> for the vhost
> * Edit server.xml to make a new Host entry
> * Restart tomcat
> 
> The app goes live (there's an Apache httpd front end with a wildcard on 
> the domain that's using ajp: connections to Tomcat, so 
> foo.domainname.com will look for a vhost of that name on the Tomcat 
> server).
> 
> This works, but is a pain because it requires a tomcat restart and a 
> manual file edit.
> 
> What I want to do be able to do is bring up a vhost, maybe via the 
> Tomcat manager, without doing a restart.  I can deploy a .war file easy, 
> but the vhost entry wouldn't wake up.
> 
> My understanding is I can make the vhosts go active via a script or tool 
> that uses JMX calls to Tomcat to configure up the vhost, but my 
> understanding is this configuration is mutable - if Tomcat restarts, all 
> the vhost configurations disappear, and I have to 'reprovision it'.
> 
> Is it possible to spin up and down vhosts like this without restarting 
> tomcat, and if so, what's the preferred methodology that makes it 
> reproduceable, if the configuration is only in memory, and will 
> disappear if/when tomcat restarts?
> 

I read somewhere that there exists an old African proverb which says : if you want to eat 
an elephant, you have to do it one little piece at a time.

It seems that you have already most of the parts done, and are just missing the 
"persistent" part of the <Host> entries in server.xml.
It would seem like a fairly easy task, with a bit of scripting, to have a template 
server.xml with some kind of an "include" tag ( la <!-- here come the Hosts -->), and 
whenever you create a new Host dynamically, adding it to some table, and rewriting the 
server.xml with the appropriate <Host> entries inserted in the template.
This way, whenever you restart Tomcat, it would "remember" these Hosts.
The script to re-create the server.xml could be inserted in your Tomcat startup mechanism.

Not discounting the other excellent and more elaborate suggestions received on the list, 
you may want to have a look at such a simple alternative.

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233801-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 27 09:37:56 2012
Return-Path: <users-return-233801-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 068C99854
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 27 Apr 2012 09:37:56 +0000 (UTC)
Received: (qmail 54449 invoked by uid 500); 27 Apr 2012 09:37:52 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 54325 invoked by uid 500); 27 Apr 2012 09:37:52 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 54301 invoked by uid 99); 27 Apr 2012 09:37:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2012 09:37:51 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,MANY_SPAN_IN_TEXT,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of hordine@gmail.com designates 209.85.210.173 as permitted sender)
Received: from [209.85.210.173] (HELO mail-iy0-f173.google.com) (209.85.210.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2012 09:37:43 +0000
Received: by iafj26 with SMTP id j26so1085357iaf.18
        for <users@tomcat.apache.org>; Fri, 27 Apr 2012 02:37:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=vxcUkg85bcwFEpRINsXeVGp89XsxOAYWkRXC9+Fhx5Y=;
        b=cta6mPiKcryJqxmKGjOtyhQ5qWZ0Ktrzwxmdg90/S9hz0l+kEeVSGobaNBBh93j0D/
         oUKwEVM4K577a3UHMYLg92C8T1KgVYJRrZAzpISgsEQ8GnaJ+W7yBKaBHf+c5IqE9AY1
         H2scARvaEp3X+B+R7UM/9q44oqaypB0BMahcA7ddSKyuaMyi/NZZfAa/+ZvlN8gUxKnv
         2/Oid8lgp8FX8f3mX6s1MAXEHS3oLxYI3gcyb5Az69fJfKUJup2Tm6Arkk8sNnXFDPL7
         jGwwqx1vmHie3LG//PuuWDHzNna+ZO6iseUB1twrv2TuKohLslmQXordRQs6yWNXX5/T
         5Ixg==
MIME-Version: 1.0
Received: by 10.50.190.197 with SMTP id gs5mr1354697igc.37.1335519442868; Fri,
 27 Apr 2012 02:37:22 -0700 (PDT)
Received: by 10.50.57.131 with HTTP; Fri, 27 Apr 2012 02:37:22 -0700 (PDT)
Date: Fri, 27 Apr 2012 11:37:22 +0200
Message-ID: <CANnp+Av13q0zmbssmieoQ1_L675DOyrTx5wDc7VkoCp98ksBjw@mail.gmail.com>
Subject: mvn tomcat:deploy fails with HTTP response 401
From: Henrique Ordine <hordine@gmail.com>
To: users@tomcat.apache.org
Content-Type: multipart/alternative; boundary=f46d0447870ffb985d04bea5d9a8

--f46d0447870ffb985d04bea5d9a8
Content-Type: text/plain; charset=ISO-8859-1

Hi everybody,

I'm trying to deploy my Maven Web App on my local Tomcat using the
tomcat:deploy maven plugin, but the Manager application fails with a
response code 401.

I have Tomcat 6 installed on Mac OS Leopard, with Java 1.5. I manage to
access my Tomcat/manager app with the user "hordine", that I configured and
deploy

I've configured my tomcat-users.xml, settings.xml, and POM files, like this:

I've added this user to my tomcat-users.xml:
  <role rolename="tomcat"/>
  <role rolename="manager"/>
  <role rolename="manager-script"/>
  <user username="tomcat" password="tomcat" roles="tomcat"/>
  <user username="maventomcat" password="maventomcat" roles="manager"/>
  <user username="hordine" password="hordine" roles="manager,
manager-script"/>


I've added this server to my settings.xml:
<servers>
    <server>
        <id>hordineLocalTomcat</id>
        <username>hordine</username>
        <password>hordine</password>
    </server>
</servers>

And I've configured my POM like this:

<build>

<finalName>hTask-web</finalName>

 <pluginManagement>

 <plugins>

  <plugin>

         <groupId>org.apache.tomcat.maven</groupId>

           <artifactId>tomcat-maven-plugin</artifactId>

           <version>1.1</version>

           <configuration>

   <url>http://localhost:8080/manager</url>

   <server>hordineLocalTomcat</server>

   <path>/hTask-web</path>

  </configuration>

  </plugin>

 </plugins>

 </pluginManagement>

</build>


I'd appreciate any help.

This is the entire error's stack trace:

Embedded error: Server returned HTTP response code: 401 for URL:
http://localhost:8080/manager/deploy?path=%2FhTask-web&war=
[INFO]
------------------------------------------------------------------------
[INFO] Trace
org.apache.maven.lifecycle.LifecycleExecutionException: Cannot invoke
Tomcat manager
at
org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:703)
at
org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeStandaloneGoal(DefaultLifecycleExecutor.java:553)
at
org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:523)
at
org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:371)
at
org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:332)
at
org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:181)
at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:356)
at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:137)
at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:41)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:592)
at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
Caused by: org.apache.maven.plugin.MojoExecutionException: Cannot invoke
Tomcat manager
at
org.codehaus.mojo.tomcat.AbstractCatalinaMojo.execute(AbstractCatalinaMojo.java:149)
at
org.codehaus.mojo.tomcat.AbstractWarCatalinaMojo.execute(AbstractWarCatalinaMojo.java:70)
at
org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:483)
at
org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:678)
... 17 more
Caused by: java.io.IOException: Server returned HTTP response code: 401 for
URL: http://localhost:8080/manager/deploy?path=%2FhTask-web&war=
at
sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1196)
at org.codehaus.mojo.tomcat.TomcatManager.invoke(TomcatManager.java:604)
at org.codehaus.mojo.tomcat.TomcatManager.deployImpl(TomcatManager.java:662)
at org.codehaus.mojo.tomcat.TomcatManager.deploy(TomcatManager.java:295)
at
org.codehaus.mojo.tomcat.AbstractDeployWarMojo.deployWar(AbstractDeployWarMojo.java:85)
at
org.codehaus.mojo.tomcat.AbstractDeployMojo.invokeManager(AbstractDeployMojo.java:85)
at
org.codehaus.mojo.tomcat.AbstractCatalinaMojo.execute(AbstractCatalinaMojo.java:141)
... 20 more


-- 
Henrique Ordine

http://hordine.wordpress.com/

--f46d0447870ffb985d04bea5d9a8--

From users-return-233802-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 27 10:14:41 2012
Return-Path: <users-return-233802-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 684A9C322
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 27 Apr 2012 10:14:41 +0000 (UTC)
Received: (qmail 61795 invoked by uid 500); 27 Apr 2012 10:14:38 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 61675 invoked by uid 500); 27 Apr 2012 10:14:37 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 61662 invoked by uid 99); 27 Apr 2012 10:14:37 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2012 10:14:37 +0000
Received: from localhost (HELO mail-yw0-f45.google.com) (127.0.0.1)
  (smtp-auth username olamy, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2012 10:14:37 +0000
Received: by yhoo21 with SMTP id o21so306809yho.18
        for <users@tomcat.apache.org>; Fri, 27 Apr 2012 03:14:36 -0700 (PDT)
Received: by 10.236.161.42 with SMTP id v30mr4197189yhk.127.1335521676562;
 Fri, 27 Apr 2012 03:14:36 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.100.14.18 with HTTP; Fri, 27 Apr 2012 03:14:16 -0700 (PDT)
In-Reply-To: <CANnp+Av13q0zmbssmieoQ1_L675DOyrTx5wDc7VkoCp98ksBjw@mail.gmail.com>
References: <CANnp+Av13q0zmbssmieoQ1_L675DOyrTx5wDc7VkoCp98ksBjw@mail.gmail.com>
From: Olivier Lamy <olamy@apache.org>
Date: Fri, 27 Apr 2012 12:14:16 +0200
Message-ID: <CAPoyBqTgaQh65qxGG6e8teCn8NVy2_KH65Z7_RJNRbTLK_4isA@mail.gmail.com>
Subject: Re: mvn tomcat:deploy fails with HTTP response 401
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hello,

That's something which has been fixed in trunk (I will probably
release a 2.0 next week).


2012/4/27 Henrique Ordine <hordine@gmail.com>:
> Hi everybody,
>
> I'm trying to deploy my Maven Web App on my local Tomcat using the
> tomcat:deploy maven plugin, but the Manager application fails with a
> response code 401.
>
> I have Tomcat 6 installed on Mac OS Leopard, with Java 1.5. I manage to
> access my Tomcat/manager app with the user "hordine", that I configured a=
nd
> deploy
>
> I've configured my tomcat-users.xml, settings.xml, and POM files, like th=
is:
>
> I've added this user to my tomcat-users.xml:
> =A0<role rolename=3D"tomcat"/>
> =A0<role rolename=3D"manager"/>
> =A0<role rolename=3D"manager-script"/>
> =A0<user username=3D"tomcat" password=3D"tomcat" roles=3D"tomcat"/>
> =A0<user username=3D"maventomcat" password=3D"maventomcat" roles=3D"manag=
er"/>
> =A0<user username=3D"hordine" password=3D"hordine" roles=3D"manager,
> manager-script"/>
>
>
> I've added this server to my settings.xml:
> <servers>
> =A0 =A0<server>
> =A0 =A0 =A0 =A0<id>hordineLocalTomcat</id>
> =A0 =A0 =A0 =A0<username>hordine</username>
> =A0 =A0 =A0 =A0<password>hordine</password>
> =A0 =A0</server>
> </servers>
>
> And I've configured my POM like this:
>
> <build>
>
> <finalName>hTask-web</finalName>
>
> =A0<pluginManagement>
>
> =A0<plugins>
>
> =A0<plugin>
>
> =A0 =A0 =A0 =A0 <groupId>org.apache.tomcat.maven</groupId>
>
> =A0 =A0 =A0 =A0 =A0 <artifactId>tomcat-maven-plugin</artifactId>
>
> =A0 =A0 =A0 =A0 =A0 <version>1.1</version>

Sure of that ????

But to test if your issue is fixed in trunk try <version>2.0-SNAPSHOT</vers=
ion>

see mojo declaration and repositories here:
http://tomcat.apache.org/maven-plugin-2.0-SNAPSHOT/snapshot-test.html

>
> =A0 =A0 =A0 =A0 =A0 <configuration>
>
> =A0 <url>http://localhost:8080/manager</url>
>
> =A0 <server>hordineLocalTomcat</server>
>
> =A0 <path>/hTask-web</path>
>
> =A0</configuration>
>
> =A0</plugin>
>
> =A0</plugins>
>
> =A0</pluginManagement>
>
> </build>
>
>
> I'd appreciate any help.
>
> This is the entire error's stack trace:
>
> Embedded error: Server returned HTTP response code: 401 for URL:
> http://localhost:8080/manager/deploy?path=3D%2FhTask-web&war=3D
> [INFO]
> ------------------------------------------------------------------------
> [INFO] Trace
> org.apache.maven.lifecycle.LifecycleExecutionException: Cannot invoke
> Tomcat manager
> at
> org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultL=
ifecycleExecutor.java:703)
> at
> org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeStandaloneGoal=
(DefaultLifecycleExecutor.java:553)
> at
> org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLi=
fecycleExecutor.java:523)
> at
> org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleF=
ailures(DefaultLifecycleExecutor.java:371)
> at
> org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(D=
efaultLifecycleExecutor.java:332)
> at
> org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecy=
cleExecutor.java:181)
> at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:356)
> at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:137)
> at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
> at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:41=
)
> at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
> at
> sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java=
:39)
> at
> sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorI=
mpl.java:25)
> at java.lang.reflect.Method.invoke(Method.java:592)
> at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
> at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
> at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
> at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
> Caused by: org.apache.maven.plugin.MojoExecutionException: Cannot invoke
> Tomcat manager
> at
> org.codehaus.mojo.tomcat.AbstractCatalinaMojo.execute(AbstractCatalinaMoj=
o.java:149)
> at
> org.codehaus.mojo.tomcat.AbstractWarCatalinaMojo.execute(AbstractWarCatal=
inaMojo.java:70)
> at
> org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginMan=
ager.java:483)
> at
> org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultL=
ifecycleExecutor.java:678)
> ... 17 more
> Caused by: java.io.IOException: Server returned HTTP response code: 401 f=
or
> URL: http://localhost:8080/manager/deploy?path=3D%2FhTask-web&war=3D
> at
> sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnect=
ion.java:1196)
> at org.codehaus.mojo.tomcat.TomcatManager.invoke(TomcatManager.java:604)
> at org.codehaus.mojo.tomcat.TomcatManager.deployImpl(TomcatManager.java:6=
62)
> at org.codehaus.mojo.tomcat.TomcatManager.deploy(TomcatManager.java:295)
> at
> org.codehaus.mojo.tomcat.AbstractDeployWarMojo.deployWar(AbstractDeployWa=
rMojo.java:85)
> at
> org.codehaus.mojo.tomcat.AbstractDeployMojo.invokeManager(AbstractDeployM=
ojo.java:85)
> at
> org.codehaus.mojo.tomcat.AbstractCatalinaMojo.execute(AbstractCatalinaMoj=
o.java:141)
> ... 20 more
>
>
> --
> Henrique Ordine
>
> http://hordine.wordpress.com/



--=20
Olivier Lamy
Talend: http://coders.talend.com
http://twitter.com/olamy | http://linkedin.com/in/olamy

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233803-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 27 13:46:44 2012
Return-Path: <users-return-233803-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C18AFCA56
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 27 Apr 2012 13:46:44 +0000 (UTC)
Received: (qmail 17185 invoked by uid 500); 27 Apr 2012 13:46:41 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 17015 invoked by uid 500); 27 Apr 2012 13:46:41 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 17006 invoked by uid 99); 27 Apr 2012 13:46:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2012 13:46:41 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [96.39.62.68] (HELO guardian.stonekeep.com) (96.39.62.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2012 13:46:33 +0000
Received: from localhost (localhost [127.0.0.1])
	by guardian.stonekeep.com (Postfix) with ESMTP id 7FB328F4001
	for <users@tomcat.apache.org>; Fri, 27 Apr 2012 09:46:12 -0400 (EDT)
X-Virus-Scanned: Debian amavisd-new at guardian.stonekeep.com
Received: from guardian.stonekeep.com ([127.0.0.1])
	by localhost (guardian.stonekeep.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id GK7ME5k9vVLr for <users@tomcat.apache.org>;
	Fri, 27 Apr 2012 09:46:12 -0400 (EDT)
Received: from sloop.westell.com (pool-71-162-65-7.bstnma.east.verizon.net [71.162.65.7])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by guardian.stonekeep.com (Postfix) with ESMTPSA id DA3E099010E
	for <users@tomcat.apache.org>; Fri, 27 Apr 2012 09:46:11 -0400 (EDT)
Message-ID: <4F9AA324.7060604@homeport.org>
Date: Fri, 27 Apr 2012 09:46:12 -0400
From: Dave Shevett <shevett@homeport.org>
Reply-To: shevett@homeport.org
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: users@tomcat.apache.org
Subject: Re: "High Level" question.  Managing dynamic vhost deployments...
References: <4F99A5A0.7060000@homeport.org> <4F9A587C.3040001@ice-sa.com>
In-Reply-To: <4F9A587C.3040001@ice-sa.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

On 4/27/12 4:27 AM, Andr Warnier wrote:
> It seems that you have already most of the parts done, and are just
> missing the "persistent" part of the <Host> entries in server.xml.
> It would seem like a fairly easy task, with a bit of scripting, to have
> a template server.xml with some kind of an "include" tag ( la <!-- here
> come the Hosts -->), and whenever you create a new Host dynamically,
> adding it to some table, and rewriting the server.xml with the
> appropriate <Host> entries inserted in the template.
> This way, whenever you restart Tomcat, it would "remember" these Hosts.
> The script to re-create the server.xml could be inserted in your Tomcat
> startup mechanism.

Yeah, this seems sort of like a double-approach.  I'd need to get Tomcat 
to enable the vhosts, and also have something that would 'dump' that 
information to server.xml.

I think the better approach is what Chuck pointed me to - the 
host-manager application seems to allow dynamic vhost generation in the 
running environment, what it needs is a hook to 'regen' the server.xml 
(or dump the XML for the <Host> entries for easy inclusion back into the 
server.xml).

So one last question before I start tearing into host-manager - what I'm 
guessing it's doing is using JMX calls to tomcat-core (Note, I've done 
zilcho work with Tomcat internals yet, so sorry if this is way off) and 
dynamically creating / updating vhosts.  If that's the case, it should 
be pretty easy to modify it to dump the XML, or write a command line 
tool that does the same thing.

Is this sane?  :)

Hmmmm.

	-d

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233804-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 27 15:01:41 2012
Return-Path: <users-return-233804-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2992BC417
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 27 Apr 2012 15:01:41 +0000 (UTC)
Received: (qmail 26079 invoked by uid 500); 27 Apr 2012 15:01:29 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 26009 invoked by uid 500); 27 Apr 2012 15:01:29 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 25925 invoked by uid 99); 27 Apr 2012 15:01:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2012 15:01:29 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=MSGID_MULTIPLE_AT,RCVD_IN_DNSWL_NONE,SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.25.134.18] (HELO mailout04.t-online.de) (194.25.134.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2012 14:52:29 +0000
Received: from fwd20.aul.t-online.de (fwd20.aul.t-online.de )
	by mailout04.t-online.de with smtp 
	id 1SNmWm-0004dq-MY; Fri, 27 Apr 2012 16:52:09 +0200
Received: from Preissa (bKlcgeZVZhoOYsGZTC7cKIl51T-ZanKQ8ki7tg3kN54XdsNnCYEg1pAJPr395kGwwD@[217.95.100.59]) by fwd20.t-online.de
	with esmtp id 1SNmWd-1757mS0; Fri, 27 Apr 2012 16:51:59 +0200
From: =?utf-8?Q?Konstantin_Prei=C3=9Fer?= <verlag.preisser@t-online.de>
To: "'Tomcat Users List'" <users@tomcat.apache.org>
Subject: Websocket Questions
Date: Fri, 27 Apr 2012 16:51:58 +0200
Message-ID: <002a01cd2485$4bf91dc0$e3eb5940$@preisser@t-online.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Ac0khUvCYHOm7sSrStKOnz5BiFZpsg==
Content-Language: de
X-ID: bKlcgeZVZhoOYsGZTC7cKIl51T-ZanKQ8ki7tg3kN54XdsNnCYEg1pAJPr395kGwwD
X-TOI-MSGID: 84530557-0df4-4b09-b757-a3dab0d3714a

Hi all,

I'm using Tomcat 7.0.27 with Native 1.1.23 on Windows Server 2008 32-bit =
with Java 1.7.0_03.

Recently I started a project which uses Websockets. It is a simple app =
where the clients submit the current mouse position to the server, and =
the server then broadcasts the position of that user to all other =
connected users.

To see how the Websocket Implementation in Tomcat works, I read the Chat =
example =
(http://svn.apache.org/repos/asf/tomcat/tc7.0.x/tags/TOMCAT_7_0_27/webapp=
s/examples/WEB-INF/classes/websocket/chat/ChatWebSocketServlet.java) =
from Johno Crawford.

1.
It seems that the connector's "connectionTimeout" attribute is used to =
determine when the Websocket connection should be closed after =
inactivity. Is this intended? At first, I wondered why Tomcat closes the =
Websocket connection after a relative short time of about 20 seconds, =
until I realized that the default server.xhml has a connectionTimeout of =
20000.

2. Is there experience of using the HTTP APR connector with Websockets? =
When I tried to use Websockets with that connector, the JVM crashed in =
tcnative-1.dll some minutes after Tomcat was started:

#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=3D0x1000476d, =
pid=3D3144, tid=3D9820
#
# JRE version: 7.0_03-b05
# Java VM: Java HotSpot(TM) Client VM (22.1-b02 mixed mode, sharing =
windows-x86 )
# Problematic frame:
# C  [tcnative-1.dll+0x476d]
#
# Core dump written. Default location: =
C:\Users\AdminKP\Desktop\apache-tomcat-7.0.27\bin\hs_err_pid3144.mdmp
#
# If you would like to submit a bug report, please visit:
#   http://bugreport.sun.com/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
#

When I switched to HTTP BIO however, everything worked fine.


Thanks!

Regards,
Konstantin Prei=C3=9Fer


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233805-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 27 15:18:38 2012
Return-Path: <users-return-233805-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3C57FCD52
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 27 Apr 2012 15:18:38 +0000 (UTC)
Received: (qmail 83808 invoked by uid 500); 27 Apr 2012 15:18:34 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 83618 invoked by uid 500); 27 Apr 2012 15:18:34 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 83607 invoked by uid 99); 27 Apr 2012 15:18:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2012 15:18:34 +0000
X-ASF-Spam-Status: No, hits=0.9 required=5.0
	tests=HK_RANDOM_ENVFROM,HK_RANDOM_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lbrtchx@gmail.com designates 209.85.217.173 as permitted sender)
Received: from [209.85.217.173] (HELO mail-lb0-f173.google.com) (209.85.217.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2012 15:18:29 +0000
Received: by lboi15 with SMTP id i15so784184lbo.18
        for <users@tomcat.apache.org>; Fri, 27 Apr 2012 08:18:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=gTE8r0sg7EjM/+M9kb5jmYJyEbnh9OYAS1rOvXLam9Q=;
        b=xpmvPiLxQ8tXuntpFPQkTw+75+/6e3HLp3OzWbYSraZhjo9SOb7OqiMDWL8JlzXxSp
         +JOpdhc0pvG4/XyIXNNzkOtG6tdoQdEgwcaLXcGogXkEFen4zazbcw3LcaXMpeElONs8
         si4BX3UdCiCT4Em8m9oPAuQj36pu/XcegWgaaflqSugkPuECHSqEKjyddZQN27x1OzM0
         Y768mJfVs+UmjDr/1bHhk6sppp0BDRYLL+MXW0O1/lzQDZpi5lwi3n0Wu8lipGRlt41A
         mPQTt00igTCLEi2g1qS3dfK4xiC7NiHeJHKAkeZMEeFgUWgzP0gQCbPNj7ANH9fQoOqK
         ZjVA==
MIME-Version: 1.0
Received: by 10.152.148.34 with SMTP id tp2mr10742110lab.47.1335539888119;
 Fri, 27 Apr 2012 08:18:08 -0700 (PDT)
Received: by 10.112.107.137 with HTTP; Fri, 27 Apr 2012 08:18:08 -0700 (PDT)
Date: Fri, 27 Apr 2012 15:18:08 +0000
Message-ID: <CAFakBwg7eaGGjWEUS-XUEcH3h1niOmzDB7rnaf0kKs3F5sEk+A@mail.gmail.com>
Subject: trying to install openjdk + tomcat -from source- ...
From: Albretch Mueller <lbrtchx@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1

~
 I have constantly run into various problems which I don't think are
well explained in the build instructions
~
 http://hg.openjdk.java.net/jdk7/build/raw-file/tip/README-builds.html
~
 and I have also searched and searched to no avail
~
 Actually I am having problems with openjdk version 7 and 8 (either is fine)
~
 Any sugestions?
~
 thanks
 lbrtchx

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233806-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 27 15:37:13 2012
Return-Path: <users-return-233806-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C016DCCBB
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 27 Apr 2012 15:37:13 +0000 (UTC)
Received: (qmail 47212 invoked by uid 500); 27 Apr 2012 15:37:10 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 47006 invoked by uid 500); 27 Apr 2012 15:37:10 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 46997 invoked by uid 99); 27 Apr 2012 15:37:10 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2012 15:37:10 +0000
Received: from localhost (HELO [192.168.23.9]) (127.0.0.1)
  (smtp-auth username markt, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2012 15:37:10 +0000
Message-ID: <4F9ABD1D.2000900@apache.org>
Date: Fri, 27 Apr 2012 16:37:01 +0100
From: Mark Thomas <markt@apache.org>
User-Agent: Mozilla/5.0 (Windows NT 5.2; WOW64; rv:12.0) Gecko/20120420 Thunderbird/12.0
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Websocket Questions
References: <002a01cd2485$4bf91dc0$e3eb5940$@preisser@t-online.de>
In-Reply-To: <002a01cd2485$4bf91dc0$e3eb5940$@preisser@t-online.de>
X-Enigmail-Version: 1.4.1
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

On 27/04/2012 15:51, Konstantin Preier wrote:
> Hi all,
> 
> I'm using Tomcat 7.0.27 with Native 1.1.23 on Windows Server 2008
> 32-bit with Java 1.7.0_03.
> 
> Recently I started a project which uses Websockets. It is a simple
> app where the clients submit the current mouse position to the
> server, and the server then broadcasts the position of that user to
> all other connected users.
> 
> To see how the Websocket Implementation in Tomcat works, I read the
> Chat example
> (http://svn.apache.org/repos/asf/tomcat/tc7.0.x/tags/TOMCAT_7_0_27/webapps/examples/WEB-INF/classes/websocket/chat/ChatWebSocketServlet.java)
> from Johno Crawford.
> 
> 1. It seems that the connector's "connectionTimeout" attribute is
> used to determine when the Websocket connection should be closed
> after inactivity. Is this intended?

At the moment, yes. There is probably a need for a separate timeout but
there needs to be a timeout. You can use ping messages to avoid it.

> 2. Is there experience of using the HTTP APR connector with
> Websockets? When I tried to use Websockets with that connector, the
> JVM crashed in tcnative-1.dll some minutes after Tomcat was started:

It has been tested as much as the others.

> # # A fatal error has been detected by the Java Runtime Environment: 
> # #  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x1000476d,
> pid=3144, tid=9820 # # JRE version: 7.0_03-b05 # Java VM: Java
> HotSpot(TM) Client VM (22.1-b02 mixed mode, sharing windows-x86 ) #
> Problematic frame: # C  [tcnative-1.dll+0x476d] # # Core dump
> written. Default location:
> C:\Users\AdminKP\Desktop\apache-tomcat-7.0.27\bin\hs_err_pid3144.mdmp

The full stack would be useful. It might point to where things are going
wrong.

Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233807-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 27 15:37:56 2012
Return-Path: <users-return-233807-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8EDFACD61
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 27 Apr 2012 15:37:56 +0000 (UTC)
Received: (qmail 51378 invoked by uid 500); 27 Apr 2012 15:37:53 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 51316 invoked by uid 500); 27 Apr 2012 15:37:53 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 51306 invoked by uid 99); 27 Apr 2012 15:37:53 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2012 15:37:53 +0000
Received: from localhost (HELO [192.168.23.9]) (127.0.0.1)
  (smtp-auth username markt, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2012 15:37:53 +0000
Message-ID: <4F9ABD49.9070801@apache.org>
Date: Fri, 27 Apr 2012 16:37:45 +0100
From: Mark Thomas <markt@apache.org>
User-Agent: Mozilla/5.0 (Windows NT 5.2; WOW64; rv:12.0) Gecko/20120420 Thunderbird/12.0
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: trying to install openjdk + tomcat -from source- ...
References: <CAFakBwg7eaGGjWEUS-XUEcH3h1niOmzDB7rnaf0kKs3F5sEk+A@mail.gmail.com>
In-Reply-To: <CAFakBwg7eaGGjWEUS-XUEcH3h1niOmzDB7rnaf0kKs3F5sEk+A@mail.gmail.com>
X-Enigmail-Version: 1.4.1
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

On 27/04/2012 16:18, Albretch Mueller wrote:
> ~
>  I have constantly run into various problems which I don't think are
> well explained in the build instructions
> ~
>  http://hg.openjdk.java.net/jdk7/build/raw-file/tip/README-builds.html

And that has what to do with Tomcat?

(clue: nothing)

Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233808-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 27 16:19:40 2012
Return-Path: <users-return-233808-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1078A9A86
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 27 Apr 2012 16:19:40 +0000 (UTC)
Received: (qmail 70519 invoked by uid 500); 27 Apr 2012 16:19:36 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 70349 invoked by uid 500); 27 Apr 2012 16:19:36 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 70340 invoked by uid 99); 27 Apr 2012 16:19:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2012 16:19:36 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=FREEMAIL_FORGED_REPLYTO,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.139.212.164] (HELO nm5.bullet.mail.bf1.yahoo.com) (98.139.212.164)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 27 Apr 2012 16:19:27 +0000
Received: from [98.139.212.145] by nm5.bullet.mail.bf1.yahoo.com with NNFMP; 27 Apr 2012 16:19:06 -0000
Received: from [98.139.212.233] by tm2.bullet.mail.bf1.yahoo.com with NNFMP; 27 Apr 2012 16:19:06 -0000
Received: from [127.0.0.1] by omp1042.mail.bf1.yahoo.com with NNFMP; 27 Apr 2012 16:19:06 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 125319.60746.bm@omp1042.mail.bf1.yahoo.com
Received: (qmail 45773 invoked by uid 60001); 27 Apr 2012 16:19:06 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1335543545; bh=0rp6CMnH3acLdMzfyGhJZudNCnhSUfOFVHVXrB1ABys=; h=X-YMail-OSG:Received:X-Mailer:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=3s3rQQHylcV7OFvF90gsT3SAaf3TMd0o3LK9sC1lpq/cDRGFgmywZZgRPVyetlLoQZic0QN54fh20JY11pDcIx97KohJf+fRbpIc/inJrnPK52RWlJbFtRESf/axtjTRYGcWPSI9Ri0CzAF1EIKyBHU3W+rrRTr8CpvPHluJHpU=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=ZdYOanojUiDOL+JD6dqgUUjw+ShnjnibBS6m5MPrjPGe5hUljOvlOWrnF+LYNw2Xis0NJlRTsXVRVsOE27hTSiCcpM1wyI1+w7iVtMFM8GoBLA9WFwLKVUw8zS1XyPoHug1h958vlF8ZqgUUWLgw9+zpver8gItvJn66WuKwbYU=;
X-YMail-OSG: sAvAgXsVM1lu6GnBapG5VaIek3ar0kdkTysxJmcnu8.eDnT
 mUFiMQQeyyUhFb_uxmTrGB3X5sjsylT8IEi.HtzS.2kKcWjYZJSYrHivRiqg
 SfQRA_xkBzOproCNTWFOgMmQov6akBJ8hb6NkjFlFpw0ZxtdnHv3F5haahnw
 b_OF6j.1yf4TvKKzbk3vOY5_.IKFkyiSUMVDdHiogr0diR3nrSYzoCaIcyIh
 0ZjX5VkI5s3ZwaId7CYgJ1PIgl1UYLWrLP_mAfSg_nMRLo3QXiT1zvTUI4CP
 0VhBA6K828h3A2zogjU1VMjV5xdnrQuJs1n2u2iqbicYgqyrSX8wDROnZzzL
 4XR37QZ4peZ4rakIVMDUcyOQ51Jj0nLP5VK4QcNgVsbxHlMNdsefb6TZoRlM
 5EpFA9ilXFb_dJoYxBMlnSNogReUo3ysd1JBQxtu_u41pdrVNf_q6MThmywf
 jdZ_3IaBsa8uDbJC5TJUjwA--
Received: from [76.124.48.202] by web161804.mail.bf1.yahoo.com via HTTP; Fri, 27 Apr 2012 09:19:05 PDT
X-Mailer: YahooMailWebService/0.8.117.340979
Message-ID: <1335543545.27019.YahooMailNeo@web161804.mail.bf1.yahoo.com>
Date: Fri, 27 Apr 2012 09:19:05 -0700 (PDT)
From: Dola Woolfe <dolachin@yahoo.com>
Reply-To: Dola Woolfe <dolachin@yahoo.com>
Subject: Capturing System.out on a Mac
To: Tom Cat <users@tomcat.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,=0A=0AWe just switched from Windows to Mac. On Windows, when we started =
tomcat in the command window, a new window would pop up that contains all t=
he output of System.out. =A0But on a Mac, no new window shows up and we are=
 missing all the output. Is there a quick fix to this?=0A=0AMany thanks in =
advance,=0A=0ADola=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233809-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 27 16:20:19 2012
Return-Path: <users-return-233809-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2337C9AC0
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 27 Apr 2012 16:20:19 +0000 (UTC)
Received: (qmail 74433 invoked by uid 500); 27 Apr 2012 16:20:15 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 74373 invoked by uid 500); 27 Apr 2012 16:20:15 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 74363 invoked by uid 99); 27 Apr 2012 16:20:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2012 16:20:15 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of hordine@gmail.com designates 209.85.160.173 as permitted sender)
Received: from [209.85.160.173] (HELO mail-gy0-f173.google.com) (209.85.160.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2012 16:20:03 +0000
Received: by ghrr14 with SMTP id r14so658435ghr.18
        for <users@tomcat.apache.org>; Fri, 27 Apr 2012 09:19:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=aDcNdAH1t5fU1VKzCeJ2xmxyK6Sor3KRuBjPqYBRlUw=;
        b=Zjx2Jv7KNQp2INVPstR9s8gADGTwm3Ix0WBvoN9xwlOJY9No6LyB3zjegkJRs9ACPH
         W+KcRpDp2T7Wikp/TEgnwAfJiV2B3X/s8xIjteoKvZqnRb39EiINVe9FXUev8eK+dSiJ
         ibLaDXbV8IfPlvYWLXHc4LyVhcWrGNzRlaDE3tmzbgCJwjRoUsdFEL6pNzPuAT9Pr/ED
         gIdJWIMAQ9YTHLqTN+PaUYuFOLVfonWo5LDoiCb30S7GWEO8dSrrIa4OKn/DVYKltsNh
         E+CuIF8xDVWj2oVls+9yoBdNa+WSp4e6oAUo9vXq2mNYT9d53NRNwnRSWjzg+nW+F+jw
         YvLQ==
MIME-Version: 1.0
Received: by 10.50.168.8 with SMTP id zs8mr3416108igb.37.1335543581576; Fri,
 27 Apr 2012 09:19:41 -0700 (PDT)
Received: by 10.50.57.131 with HTTP; Fri, 27 Apr 2012 09:19:41 -0700 (PDT)
In-Reply-To: <CAPoyBqTgaQh65qxGG6e8teCn8NVy2_KH65Z7_RJNRbTLK_4isA@mail.gmail.com>
References: <CANnp+Av13q0zmbssmieoQ1_L675DOyrTx5wDc7VkoCp98ksBjw@mail.gmail.com>
	<CAPoyBqTgaQh65qxGG6e8teCn8NVy2_KH65Z7_RJNRbTLK_4isA@mail.gmail.com>
Date: Fri, 27 Apr 2012 18:19:41 +0200
Message-ID: <CANnp+AtkKfJs5wM1HoKs88eydJ4Ha1AB2uysgcATm70m-7Ooiw@mail.gmail.com>
Subject: Re: mvn tomcat:deploy fails with HTTP response 401
From: Henrique Ordine <hordine@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/mixed; boundary=e89a8f838cd1c30eb904beab78dc
X-Virus-Checked: Checked by ClamAV on apache.org

--e89a8f838cd1c30eb904beab78dc
Content-Type: multipart/alternative; boundary=e89a8f838cd1c30eb404beab78da

--e89a8f838cd1c30eb404beab78da
Content-Type: text/plain; charset=ISO-8859-1

Thanks for your reply.

I made the changes that you suggested but tomcat:deploy still fails with
the same error.

tomcat:run works, but it was already working before.

My POM file is attached, if you could have a look at it, it would be great.
It's a small POM, I've only just started my App.

Thanks in advance,

Op 27 april 2012 12:14 schreef Olivier Lamy <olamy@apache.org> het volgende:

> Hello,
>
> That's something which has been fixed in trunk (I will probably
> release a 2.0 next week).
>
>
> 2012/4/27 Henrique Ordine <hordine@gmail.com>:
> > Hi everybody,
> >
> > I'm trying to deploy my Maven Web App on my local Tomcat using the
> > tomcat:deploy maven plugin, but the Manager application fails with a
> > response code 401.
> >
> > I have Tomcat 6 installed on Mac OS Leopard, with Java 1.5. I manage to
> > access my Tomcat/manager app with the user "hordine", that I configured
> and
> > deploy
> >
> > I've configured my tomcat-users.xml, settings.xml, and POM files, like
> this:
> >
> > I've added this user to my tomcat-users.xml:
> >  <role rolename="tomcat"/>
> >  <role rolename="manager"/>
> >  <role rolename="manager-script"/>
> >  <user username="tomcat" password="tomcat" roles="tomcat"/>
> >  <user username="maventomcat" password="maventomcat" roles="manager"/>
> >  <user username="hordine" password="hordine" roles="manager,
> > manager-script"/>
> >
> >
> > I've added this server to my settings.xml:
> > <servers>
> >    <server>
> >        <id>hordineLocalTomcat</id>
> >        <username>hordine</username>
> >        <password>hordine</password>
> >    </server>
> > </servers>
> >
> > And I've configured my POM like this:
> >
> > <build>
> >
> > <finalName>hTask-web</finalName>
> >
> >  <pluginManagement>
> >
> >  <plugins>
> >
> >  <plugin>
> >
> >         <groupId>org.apache.tomcat.maven</groupId>
> >
> >           <artifactId>tomcat-maven-plugin</artifactId>
> >
> >           <version>1.1</version>
>
> Sure of that ????
>
> But to test if your issue is fixed in trunk try
> <version>2.0-SNAPSHOT</version>
>
> see mojo declaration and repositories here:
> http://tomcat.apache.org/maven-plugin-2.0-SNAPSHOT/snapshot-test.html
>
> >
> >           <configuration>
> >
> >   <url>http://localhost:8080/manager</url>
> >
> >   <server>hordineLocalTomcat</server>
> >
> >   <path>/hTask-web</path>
> >
> >  </configuration>
> >
> >  </plugin>
> >
> >  </plugins>
> >
> >  </pluginManagement>
> >
> > </build>
> >
> >
> > I'd appreciate any help.
> >
> > This is the entire error's stack trace:
> >
> > Embedded error: Server returned HTTP response code: 401 for URL:
> > http://localhost:8080/manager/deploy?path=%2FhTask-web&war=
> > [INFO]
> > ------------------------------------------------------------------------
> > [INFO] Trace
> > org.apache.maven.lifecycle.LifecycleExecutionException: Cannot invoke
> > Tomcat manager
> > at
> >
> org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:703)
> > at
> >
> org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeStandaloneGoal(DefaultLifecycleExecutor.java:553)
> > at
> >
> org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:523)
> > at
> >
> org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:371)
> > at
> >
> org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:332)
> > at
> >
> org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:181)
> > at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:356)
> > at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:137)
> > at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
> > at
> org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:41)
> > at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
> > at
> >
> sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
> > at
> >
> sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
> > at java.lang.reflect.Method.invoke(Method.java:592)
> > at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
> > at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
> > at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
> > at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
> > Caused by: org.apache.maven.plugin.MojoExecutionException: Cannot invoke
> > Tomcat manager
> > at
> >
> org.codehaus.mojo.tomcat.AbstractCatalinaMojo.execute(AbstractCatalinaMojo.java:149)
> > at
> >
> org.codehaus.mojo.tomcat.AbstractWarCatalinaMojo.execute(AbstractWarCatalinaMojo.java:70)
> > at
> >
> org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:483)
> > at
> >
> org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:678)
> > ... 17 more
> > Caused by: java.io.IOException: Server returned HTTP response code: 401
> for
> > URL: http://localhost:8080/manager/deploy?path=%2FhTask-web&war=
> > at
> >
> sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1196)
> > at org.codehaus.mojo.tomcat.TomcatManager.invoke(TomcatManager.java:604)
> > at
> org.codehaus.mojo.tomcat.TomcatManager.deployImpl(TomcatManager.java:662)
> > at org.codehaus.mojo.tomcat.TomcatManager.deploy(TomcatManager.java:295)
> > at
> >
> org.codehaus.mojo.tomcat.AbstractDeployWarMojo.deployWar(AbstractDeployWarMojo.java:85)
> > at
> >
> org.codehaus.mojo.tomcat.AbstractDeployMojo.invokeManager(AbstractDeployMojo.java:85)
> > at
> >
> org.codehaus.mojo.tomcat.AbstractCatalinaMojo.execute(AbstractCatalinaMojo.java:141)
> > ... 20 more
> >
> >
> > --
> > Henrique Ordine
> >
> > http://hordine.wordpress.com/
>
>
>
> --
> Olivier Lamy
> Talend: http://coders.talend.com
> http://twitter.com/olamy | http://linkedin.com/in/olamy
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>
>


-- 
Henrique Ordine

http://hordine.wordpress.com/

--e89a8f838cd1c30eb404beab78da
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

<div class=3D"gmail_extra">Thanks for your reply.</div><div class=3D"gmail_=
extra"><br></div><div class=3D"gmail_extra">I made the changes that you sug=
gested but tomcat:deploy still fails with the same error.</div><div class=
=3D"gmail_extra">
<br></div><div class=3D"gmail_extra">tomcat:run works, but it was already w=
orking before.</div><div class=3D"gmail_extra"><br></div><div class=3D"gmai=
l_extra">My POM file is attached, if you could have a look at it, it would =
be great. It&#39;s a small POM, I&#39;ve only just started my App.</div>
<div class=3D"gmail_extra"><br></div><div class=3D"gmail_extra">Thanks in a=
dvance,<br><br><div class=3D"gmail_quote">Op 27 april 2012 12:14 schreef Ol=
ivier Lamy <span dir=3D"ltr">&lt;<a href=3D"mailto:olamy@apache.org" target=
=3D"_blank">olamy@apache.org</a>&gt;</span> het volgende:<br>
<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex">Hello,<br>
<br>
That&#39;s something which has been fixed in trunk (I will probably<br>
release a 2.0 next week).<br>
<br>
<br>
2012/4/27 Henrique Ordine &lt;<a href=3D"mailto:hordine@gmail.com">hordine@=
gmail.com</a>&gt;:<br>
<div><div class=3D"h5">&gt; Hi everybody,<br>
&gt;<br>
&gt; I&#39;m trying to deploy my Maven Web App on my local Tomcat using the=
<br>
&gt; tomcat:deploy maven plugin, but the Manager application fails with a<b=
r>
&gt; response code 401.<br>
&gt;<br>
&gt; I have Tomcat 6 installed on Mac OS Leopard, with Java 1.5. I manage t=
o<br>
&gt; access my Tomcat/manager app with the user &quot;hordine&quot;, that I=
 configured and<br>
&gt; deploy<br>
&gt;<br>
&gt; I&#39;ve configured my tomcat-users.xml, settings.xml, and POM files, =
like this:<br>
&gt;<br>
&gt; I&#39;ve added this user to my tomcat-users.xml:<br>
&gt; =A0&lt;role rolename=3D&quot;tomcat&quot;/&gt;<br>
&gt; =A0&lt;role rolename=3D&quot;manager&quot;/&gt;<br>
&gt; =A0&lt;role rolename=3D&quot;manager-script&quot;/&gt;<br>
&gt; =A0&lt;user username=3D&quot;tomcat&quot; password=3D&quot;tomcat&quot=
; roles=3D&quot;tomcat&quot;/&gt;<br>
&gt; =A0&lt;user username=3D&quot;maventomcat&quot; password=3D&quot;mavent=
omcat&quot; roles=3D&quot;manager&quot;/&gt;<br>
&gt; =A0&lt;user username=3D&quot;hordine&quot; password=3D&quot;hordine&qu=
ot; roles=3D&quot;manager,<br>
&gt; manager-script&quot;/&gt;<br>
&gt;<br>
&gt;<br>
&gt; I&#39;ve added this server to my settings.xml:<br>
&gt; &lt;servers&gt;<br>
&gt; =A0 =A0&lt;server&gt;<br>
&gt; =A0 =A0 =A0 =A0&lt;id&gt;hordineLocalTomcat&lt;/id&gt;<br>
&gt; =A0 =A0 =A0 =A0&lt;username&gt;hordine&lt;/username&gt;<br>
&gt; =A0 =A0 =A0 =A0&lt;password&gt;hordine&lt;/password&gt;<br>
&gt; =A0 =A0&lt;/server&gt;<br>
&gt; &lt;/servers&gt;<br>
&gt;<br>
&gt; And I&#39;ve configured my POM like this:<br>
&gt;<br>
&gt; &lt;build&gt;<br>
&gt;<br>
&gt; &lt;finalName&gt;hTask-web&lt;/finalName&gt;<br>
&gt;<br>
&gt; =A0&lt;pluginManagement&gt;<br>
&gt;<br>
&gt; =A0&lt;plugins&gt;<br>
&gt;<br>
&gt; =A0&lt;plugin&gt;<br>
&gt;<br>
&gt; =A0 =A0 =A0 =A0 &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;=
<br>
&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 &lt;artifactId&gt;tomcat-maven-plugin&lt;/artifact=
Id&gt;<br>
&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 &lt;version&gt;1.1&lt;/version&gt;<br>
<br>
</div></div>Sure of that ????<br>
<br>
But to test if your issue is fixed in trunk try &lt;version&gt;2.0-SNAPSHOT=
&lt;/version&gt;<br>
<br>
see mojo declaration and repositories here:<br>
<a href=3D"http://tomcat.apache.org/maven-plugin-2.0-SNAPSHOT/snapshot-test=
.html" target=3D"_blank">http://tomcat.apache.org/maven-plugin-2.0-SNAPSHOT=
/snapshot-test.html</a><br>
<div class=3D"HOEnZb"><div class=3D"h5"><br>
&gt;<br>
&gt; =A0 =A0 =A0 =A0 =A0 &lt;configuration&gt;<br>
&gt;<br>
&gt; =A0 &lt;url&gt;<a href=3D"http://localhost:8080/manager" target=3D"_bl=
ank">http://localhost:8080/manager</a>&lt;/url&gt;<br>
&gt;<br>
&gt; =A0 &lt;server&gt;hordineLocalTomcat&lt;/server&gt;<br>
&gt;<br>
&gt; =A0 &lt;path&gt;/hTask-web&lt;/path&gt;<br>
&gt;<br>
&gt; =A0&lt;/configuration&gt;<br>
&gt;<br>
&gt; =A0&lt;/plugin&gt;<br>
&gt;<br>
&gt; =A0&lt;/plugins&gt;<br>
&gt;<br>
&gt; =A0&lt;/pluginManagement&gt;<br>
&gt;<br>
&gt; &lt;/build&gt;<br>
&gt;<br>
&gt;<br>
&gt; I&#39;d appreciate any help.<br>
&gt;<br>
&gt; This is the entire error&#39;s stack trace:<br>
&gt;<br>
&gt; Embedded error: Server returned HTTP response code: 401 for URL:<br>
&gt; <a href=3D"http://localhost:8080/manager/deploy?path=3D%2FhTask-web&am=
p;war=3D" target=3D"_blank">http://localhost:8080/manager/deploy?path=3D%2F=
hTask-web&amp;war=3D</a><br>
&gt; [INFO]<br>
&gt; ----------------------------------------------------------------------=
--<br>
&gt; [INFO] Trace<br>
&gt; org.apache.maven.lifecycle.LifecycleExecutionException: Cannot invoke<=
br>
&gt; Tomcat manager<br>
&gt; at<br>
&gt; org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(Defau=
ltLifecycleExecutor.java:703)<br>
&gt; at<br>
&gt; org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeStandaloneG=
oal(DefaultLifecycleExecutor.java:553)<br>
&gt; at<br>
&gt; org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(Defaul=
tLifecycleExecutor.java:523)<br>
&gt; at<br>
&gt; org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHand=
leFailures(DefaultLifecycleExecutor.java:371)<br>
&gt; at<br>
&gt; org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegment=
s(DefaultLifecycleExecutor.java:332)<br>
&gt; at<br>
&gt; org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLif=
ecycleExecutor.java:181)<br>
&gt; at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:356)<br>
&gt; at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:137)<br>
&gt; at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)<br>
&gt; at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java=
:41)<br>
&gt; at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br>
&gt; at<br>
&gt; sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.j=
ava:39)<br>
&gt; at<br>
&gt; sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccess=
orImpl.java:25)<br>
&gt; at java.lang.reflect.Method.invoke(Method.java:592)<br>
&gt; at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)=
<br>
&gt; at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)<br>
&gt; at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:43=
0)<br>
&gt; at org.codehaus.classworlds.Launcher.main(Launcher.java:375)<br>
&gt; Caused by: org.apache.maven.plugin.MojoExecutionException: Cannot invo=
ke<br>
&gt; Tomcat manager<br>
&gt; at<br>
&gt; org.codehaus.mojo.tomcat.AbstractCatalinaMojo.execute(AbstractCatalina=
Mojo.java:149)<br>
&gt; at<br>
&gt; org.codehaus.mojo.tomcat.AbstractWarCatalinaMojo.execute(AbstractWarCa=
talinaMojo.java:70)<br>
&gt; at<br>
&gt; org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPlugin=
Manager.java:483)<br>
&gt; at<br>
&gt; org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(Defau=
ltLifecycleExecutor.java:678)<br>
&gt; ... 17 more<br>
&gt; Caused by: java.io.IOException: Server returned HTTP response code: 40=
1 for<br>
&gt; URL: <a href=3D"http://localhost:8080/manager/deploy?path=3D%2FhTask-w=
eb&amp;war=3D" target=3D"_blank">http://localhost:8080/manager/deploy?path=
=3D%2FhTask-web&amp;war=3D</a><br>
&gt; at<br>
&gt; sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConn=
ection.java:1196)<br>
&gt; at org.codehaus.mojo.tomcat.TomcatManager.invoke(TomcatManager.java:60=
4)<br>
&gt; at org.codehaus.mojo.tomcat.TomcatManager.deployImpl(TomcatManager.jav=
a:662)<br>
&gt; at org.codehaus.mojo.tomcat.TomcatManager.deploy(TomcatManager.java:29=
5)<br>
&gt; at<br>
&gt; org.codehaus.mojo.tomcat.AbstractDeployWarMojo.deployWar(AbstractDeplo=
yWarMojo.java:85)<br>
&gt; at<br>
&gt; org.codehaus.mojo.tomcat.AbstractDeployMojo.invokeManager(AbstractDepl=
oyMojo.java:85)<br>
&gt; at<br>
&gt; org.codehaus.mojo.tomcat.AbstractCatalinaMojo.execute(AbstractCatalina=
Mojo.java:141)<br>
&gt; ... 20 more<br>
&gt;<br>
&gt;<br>
&gt; --<br>
&gt; Henrique Ordine<br>
&gt;<br>
&gt; <a href=3D"http://hordine.wordpress.com/" target=3D"_blank">http://hor=
dine.wordpress.com/</a><br>
<br>
<br>
<br>
</div></div><span class=3D"HOEnZb"><font color=3D"#888888">--<br>
Olivier Lamy<br>
Talend: <a href=3D"http://coders.talend.com" target=3D"_blank">http://coder=
s.talend.com</a><br>
<a href=3D"http://twitter.com/olamy" target=3D"_blank">http://twitter.com/o=
lamy</a> | <a href=3D"http://linkedin.com/in/olamy" target=3D"_blank">http:=
//linkedin.com/in/olamy</a><br>
<br>
---------------------------------------------------------------------<br>
To unsubscribe, e-mail: <a href=3D"mailto:users-unsubscribe@tomcat.apache.o=
rg">users-unsubscribe@tomcat.apache.org</a><br>
For additional commands, e-mail: <a href=3D"mailto:users-help@tomcat.apache=
.org">users-help@tomcat.apache.org</a><br>
<br>
</font></span></blockquote></div><br><br clear=3D"all"><div><br></div>-- <b=
r><font color=3D"#006600">Henrique Ordine</font><div><br><div><a href=3D"ht=
tp://hordine.wordpress.com/" target=3D"_blank">http://hordine.wordpress.com=
/</a></div>
<div><div><br></div></div></div><br>
</div>

--e89a8f838cd1c30eb404beab78da--
--e89a8f838cd1c30eb904beab78dc
Content-Type: text/xml; charset=US-ASCII; name="pom.xml"
Content-Disposition: attachment; filename="pom.xml"
Content-Transfer-Encoding: base64
X-Attachment-Id: f_h1jg4pm30

PHByb2plY3QgeG1sbnM9Imh0dHA6Ly9tYXZlbi5hcGFjaGUub3JnL1BPTS80LjAuMCIgeG1sbnM6
eHNpPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZSIKCQkgeHNpOnNj
aGVtYUxvY2F0aW9uPSJodHRwOi8vbWF2ZW4uYXBhY2hlLm9yZy9QT00vNC4wLjAgaHR0cDovL21h
dmVuLmFwYWNoZS5vcmcvbWF2ZW4tdjRfMF8wLnhzZCI+CiAJPG1vZGVsVmVyc2lvbj40LjAuMDwv
bW9kZWxWZXJzaW9uPgoJPGdyb3VwSWQ+Y29tLmhvcmRpbmU8L2dyb3VwSWQ+Cgk8YXJ0aWZhY3RJ
ZD5oVGFzay13ZWI8L2FydGlmYWN0SWQ+Cgk8cGFja2FnaW5nPndhcjwvcGFja2FnaW5nPgoJPHZl
cnNpb24+MS4wLVNOQVBTSE9UPC92ZXJzaW9uPgoJPG5hbWU+aFRhc2std2ViIE1hdmVuIFdlYmFw
cDwvbmFtZT4KCTx1cmw+aHR0cDovL21hdmVuLmFwYWNoZS5vcmc8L3VybD4KCTxwcm9wZXJ0aWVz
PgogICAgCTxwcm9qZWN0LmJ1aWxkLnNvdXJjZUVuY29kaW5nPlVURi04PC9wcm9qZWN0LmJ1aWxk
LnNvdXJjZUVuY29kaW5nPgogICAgCTxzcHJpbmcudmVyc2lvbj4zLjAuMC5SRUxFQVNFPC9zcHJp
bmcudmVyc2lvbj4KICAgIDwvcHJvcGVydGllcz4KICAgIDxyZXBvc2l0b3JpZXM+CiAgICAJPHJl
cG9zaXRvcnk+CiAgICAgIAkJPGlkPnBlb3BsZS5hcGFjaGUuc25hcHNob3RzPC9pZD4KICAgICAg
CQk8dXJsPmh0dHA6Ly9yZXBvc2l0b3J5LmFwYWNoZS5vcmcvY29udGVudC9ncm91cHMvc25hcHNo
b3RzLWdyb3VwLzwvdXJsPgogICAgICAJCTxyZWxlYXNlcz4KICAgICAgICAJCTxlbmFibGVkPmZh
bHNlPC9lbmFibGVkPgogICAgICAJCTwvcmVsZWFzZXM+CiAgICAgIAkJPHNuYXBzaG90cz4KICAg
ICAgICAJCTxlbmFibGVkPnRydWU8L2VuYWJsZWQ+CiAgICAgIAkJPC9zbmFwc2hvdHM+CiAgICAJ
PC9yZXBvc2l0b3J5PgogIAk8L3JlcG9zaXRvcmllcz4KCTxkZXBlbmRlbmNpZXM+CgkJPGRlcGVu
ZGVuY3k+CgkJCTxncm91cElkPmp1bml0PC9ncm91cElkPgoJCQk8YXJ0aWZhY3RJZD5qdW5pdDwv
YXJ0aWZhY3RJZD4KCQkJPHZlcnNpb24+My44LjE8L3ZlcnNpb24+CgkJCTxzY29wZT50ZXN0PC9z
Y29wZT4KCQk8L2RlcGVuZGVuY3k+CgkJPGRlcGVuZGVuY3k+CgkJCTxncm91cElkPmNvbS5ob3Jk
aW5lPC9ncm91cElkPgoJCQk8YXJ0aWZhY3RJZD5odGFzay1hcGk8L2FydGlmYWN0SWQ+CgkJCTx2
ZXJzaW9uPjEuMC1TTkFQU0hPVDwvdmVyc2lvbj4KCQk8L2RlcGVuZGVuY3k+CQkKCTwvZGVwZW5k
ZW5jaWVzPgoJPGJ1aWxkPgoJCTxmaW5hbE5hbWU+aFRhc2std2ViPC9maW5hbE5hbWU+CgkJPHBs
dWdpbk1hbmFnZW1lbnQ+CgkJCTxwbHVnaW5zPgoJCQkJPHBsdWdpbj4KICAgICAgICAJCQk8Z3Jv
dXBJZD5vcmcuYXBhY2hlLnRvbWNhdC5tYXZlbjwvZ3JvdXBJZD4KICAgICAgICAgIAkJCTxhcnRp
ZmFjdElkPnRvbWNhdDYtbWF2ZW4tcGx1Z2luPC9hcnRpZmFjdElkPgogICAgICAgICAgCQkJPHZl
cnNpb24+Mi4wLVNOQVBTSE9UPC92ZXJzaW9uPgogICAgICAgICAgCQkJPGNvbmZpZ3VyYXRpb24+
CgkJCQkJCTx1cmw+aHR0cDovL2xvY2FsaG9zdDo4MDgwL21hbmFnZXI8L3VybD4KCQkJCQkJPHNl
cnZlcj5ob3JkaW5lTG9jYWxUb21jYXQ8L3NlcnZlcj4KCQkJCQkJPHBhdGg+LzwvcGF0aD4KCQkJ
CQk8L2NvbmZpZ3VyYXRpb24+CgkJCQk8L3BsdWdpbj4KCQkJPC9wbHVnaW5zPgoJCTwvcGx1Z2lu
TWFuYWdlbWVudD4JCQoJPC9idWlsZD4KPC9wcm9qZWN0Pgo=

--e89a8f838cd1c30eb904beab78dc
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org
--e89a8f838cd1c30eb904beab78dc--

From users-return-233810-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 27 16:24:51 2012
Return-Path: <users-return-233810-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0AE41C073
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 27 Apr 2012 16:24:51 +0000 (UTC)
Received: (qmail 89971 invoked by uid 500); 27 Apr 2012 16:24:47 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 89786 invoked by uid 500); 27 Apr 2012 16:24:47 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 89776 invoked by uid 99); 27 Apr 2012 16:24:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2012 16:24:47 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of hordine@gmail.com designates 209.85.213.45 as permitted sender)
Received: from [209.85.213.45] (HELO mail-yw0-f45.google.com) (209.85.213.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2012 16:24:39 +0000
Received: by yhoo21 with SMTP id o21so674189yho.18
        for <users@tomcat.apache.org>; Fri, 27 Apr 2012 09:24:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=ScPdFdReZiWF+yA3ES6bL0Lg8c1Hw+odcCM50XhoY84=;
        b=xXDTFceMAbq3klwTLDIFbiqD7OuKKO0qj/dvcXWUAPM2zStNW0qWokMiyNuOwyWWLf
         VEwSUnQbkdV4SMXX95QehRBOJ+V7QQ+qhF0evQwwcC1GZlAM7QCJBBvB/2WYzsQEE36w
         VV77f65ec+xtacLoykmOZrv0umLa+uLNnq1C59HfDVlIyqYM9nBO0iRNZ7zZPF8GbEuc
         EzRRHdlrFJyTHmPPRktz3Ybo/65ju7t9J3WkyOEVB6HhIkojCPYRla+DiOmIZOIeEnm7
         2icSpcbgF6TUziJ5+wf1PpllPULUGrWFG02HnhGpt/ALtGGLSy5KkY2j4SYOchFsUfBZ
         uOXg==
MIME-Version: 1.0
Received: by 10.50.155.132 with SMTP id vw4mr3471660igb.27.1335543858789; Fri,
 27 Apr 2012 09:24:18 -0700 (PDT)
Received: by 10.50.57.131 with HTTP; Fri, 27 Apr 2012 09:24:18 -0700 (PDT)
In-Reply-To: <1335543545.27019.YahooMailNeo@web161804.mail.bf1.yahoo.com>
References: <1335543545.27019.YahooMailNeo@web161804.mail.bf1.yahoo.com>
Date: Fri, 27 Apr 2012 18:24:18 +0200
Message-ID: <CANnp+Av4LYS7zxhBdcbVgm1SE0_XL5MaTQsTuKZ3jMWDLsMYug@mail.gmail.com>
Subject: Re: Capturing System.out on a Mac
From: Henrique Ordine <hordine@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>, Dola Woolfe <dolachin@yahoo.com>
Content-Type: multipart/alternative; boundary=e89a8f3bb04348fb9704beab89b9
X-Virus-Checked: Checked by ClamAV on apache.org

--e89a8f3bb04348fb9704beab89b9
Content-Type: text/plain; charset=ISO-8859-1

Aren't the log files in your tomcat_home/logs directory enough?

Op 27 april 2012 18:19 schreef Dola Woolfe <dolachin@yahoo.com> het
volgende:

> Hi,
>
> We just switched from Windows to Mac. On Windows, when we started tomcat
> in the command window, a new window would pop up that contains all the
> output of System.out.  But on a Mac, no new window shows up and we are
> missing all the output. Is there a quick fix to this?
>
> Many thanks in advance,
>
> Dola
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>
>


-- 
Henrique Ordine

http://hordine.wordpress.com/

--e89a8f3bb04348fb9704beab89b9--

From users-return-233811-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 27 16:54:53 2012
Return-Path: <users-return-233811-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6D90FCD69
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 27 Apr 2012 16:54:53 +0000 (UTC)
Received: (qmail 69276 invoked by uid 500); 27 Apr 2012 16:54:49 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 69100 invoked by uid 500); 27 Apr 2012 16:54:49 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 69090 invoked by uid 99); 27 Apr 2012 16:54:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2012 16:54:49 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=MSGID_MULTIPLE_AT,RCVD_IN_DNSWL_NONE,SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.25.134.80] (HELO mailout01.t-online.de) (194.25.134.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2012 16:54:39 +0000
Received: from fwd05.aul.t-online.de (fwd05.aul.t-online.de )
	by mailout01.t-online.de with smtp 
	id 1SNoR0-0008NQ-Cu; Fri, 27 Apr 2012 18:54:18 +0200
Received: from Preissa (VTsSAGZVwhTK0CsB4Byrx4bylK5fi5AOKk2VwzYkJIHQKFcNg2ccY8lG-f527iLZLu@[217.95.100.59]) by fwd05.t-online.de
	with esmtp id 1SNoQo-2Kmna40; Fri, 27 Apr 2012 18:54:06 +0200
From: =?UTF-8?Q?Konstantin_Prei=C3=9Fer?= <verlag.preisser@t-online.de>
To: "'Tomcat Users List'" <users@tomcat.apache.org>
References: <002a01cd2485$4bf91dc0$e3eb5940$@preisser@t-online.de> <4F9ABD1D.2000900@apache.org>
In-Reply-To: <4F9ABD1D.2000900@apache.org>
Subject: RE: Websocket Questions
Date: Fri, 27 Apr 2012 18:54:05 +0200
Message-ID: <000c01cd2496$5b7a79e0$126f6da0$@preisser@t-online.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Ac0ki578TXChlETtQeWDLIdKDEq/MgABVdeA
Content-Language: de
X-ID: VTsSAGZVwhTK0CsB4Byrx4bylK5fi5AOKk2VwzYkJIHQKFcNg2ccY8lG-f527iLZLu
X-TOI-MSGID: 59f7b42f-de53-47d4-8670-4c41abc198d1

Hi Mark,
thank you for your reply.

> -----Original Message-----
> From: Mark Thomas [mailto:markt@apache.org]
> Sent: Friday, April 27, 2012 5:37 PM
> To: Tomcat Users List
> Subject: Re: Websocket Questions
>=20
>=20
> At the moment, yes. There is probably a need for a separate timeout =
but
> there needs to be a timeout. You can use ping messages to avoid it.

Ok, thanks for the clarification.

>=20
> The full stack would be useful. It might point to where things are
> going
> wrong.

Below is the full content of the hs_err_pid3144.log file. This Tomcat =
instance only had the Websocket application running. It seems it is not =
hard to reproduce the crash - when I tried it today with HTTP APR again =
(and Java 1.7.0_04), Tomcat crashed after ~3 mins. In my Websockets App, =
I create a dedicated thread for each client that sends messages to the =
client (so that only one thread writes to a specific WsOutbound - I hope =
this is not forbidden ;-) ). This is the thread in the stack trace, so =
it seems the error occurs when writing to the Socket.=20

#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=3D0x1000476d, =
pid=3D7584, tid=3D4604
#
# JRE version: 7.0_04-b20
# Java VM: Java HotSpot(TM) Client VM (23.0-b21 mixed mode, sharing =
windows-x86 )
# Problematic frame:
# C  [tcnative-1.dll+0x476d]  =
Java_org_apache_tomcat_jni_Socket_send+0x8d
#
# Core dump written. Default location: =
C:\Users\AdminKP\Desktop\apache-tomcat-7.0.27\bin\hs_err_pid7584.mdmp
#
# If you would like to submit a bug report, please visit:
#   http://bugreport.sun.com/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
#

---------------  T H R E A D  ---------------

Current thread (0x00e19000):  JavaThread "Thread-48" daemon =
[_thread_in_native, id=3D4604, stack(0x049b0000,0x04a00000)]

siginfo: ExceptionCode=3D0xc0000005, reading address 0x00000020

Registers:
EAX=3D0x00000000, EBX=3D0x04e4d230, ECX=3D0x049fd7d4, EDX=3D0x00000000
ESP=3D0x049fd7b8, EBP=3D0x049ff7d8, ESI=3D0x00e19128, EDI=3D0x049fd7d4
EIP=3D0x1000476d, EFLAGS=3D0x00010246

Top of Stack: (sp=3D0x049fd7b8)
0x049fd7b8:   049fd7d4 049fd7d0 00e19000 049ff804
0x049fd7c8:   00000000 049ff7fc 00000001 049ff881
0x049fd7d8:   1000489d 049ff80c 00000000 30303030
0x049fd7e8:   6c63227b 4e737361 22656d61 6241223a
0x049fd7f8:   61727473 654d7463 67617373 6f4d2f65
0x049fd808:   4d657375 6465766f 7373654d 22656761
0x049fd818:   6c63222c 746e6569 3a226449 222c3632
0x049fd828:   333a2278 222c3134 323a2279 307d3030=20

Instructions: (pc=3D0x1000476d)
0x1000474d:   57 50 8b 45 1c 50 51 8b 8a 20 03 00 00 56 ff d1
0x1000475d:   8b 53 18 8d 85 f8 df ff ff 50 8b 43 0c 8b cf 51
0x1000476d:   8b 4a 20 50 ff d1 8b f0 eb 61 50 ff 15 94 44 0b
0x1000477d:   10 8b f8 83 c4 04 85 ff 75 16 8d 47 f4 5f 5e 5b=20


Register to memory mapping:

EAX=3D0x00000000 is an unknown value
EBX=3D0x04e4d230 is an unknown value
ECX=3D0x049fd7d4 is pointing into the stack for thread: 0x00e19000
EDX=3D0x00000000 is an unknown value
ESP=3D0x049fd7b8 is pointing into the stack for thread: 0x00e19000
EBP=3D0x049ff7d8 is pointing into the stack for thread: 0x00e19000
ESI=3D0x00e19128 is an unknown value
EDI=3D0x049fd7d4 is pointing into the stack for thread: 0x00e19000


Stack: [0x049b0000,0x04a00000],  sp=3D0x049fd7b8,  free space=3D309k
Native frames: (J=3Dcompiled Java code, j=3Dinterpreted, Vv=3DVM code, =
C=3Dnative code)
C  [tcnative-1.dll+0x476d]  Java_org_apache_tomcat_jni_Socket_send+0x8d
J  org.apache.tomcat.jni.Socket.send(J[BII)I
J  org.apache.coyote.http11.upgrade.UpgradeAprProcessor.write(I)V
v  ~StubRoutines::call_stub
V  [jvm.dll+0x1296da]
V  [jvm.dll+0x1d837e]
V  [jvm.dll+0x1298c3]
V  [jvm.dll+0x129927]
V  [jvm.dll+0xd24af]
V  [jvm.dll+0x149987]
V  [jvm.dll+0x149af0]
V  [jvm.dll+0x17df89]
C  [msvcr100.dll+0x5c6de]  endthreadex+0x3a
C  [msvcr100.dll+0x5c788]  endthreadex+0xe4
C  [kernel32.dll+0x4d309]  BaseThreadInitThunk+0x12
C  [ntdll.dll+0x41603]  RtlInitializeExceptionChain+0x63
C  [ntdll.dll+0x415d6]  RtlInitializeExceptionChain+0x36

Java frames: (J=3Dcompiled Java code, j=3Dinterpreted, Vv=3DVM code)
J  org.apache.tomcat.jni.Socket.send(J[BII)I
J  org.apache.coyote.http11.upgrade.UpgradeAprProcessor.write(I)V
J  =
org.apache.catalina.websocket.WsOutbound.doWriteBytes(Ljava/nio/ByteBuffe=
r;Z)V
J  =
org.apache.catalina.websocket.WsOutbound.doWriteText(Ljava/nio/CharBuffer=
;Z)V
J  =
org.apache.catalina.websocket.WsOutbound.writeTextMessage(Ljava/nio/CharB=
uffer;)V
J  test.MyWebsocketServlet$TestMessageInbound$1.run()V
j  java.lang.Thread.run()V+11
v  ~StubRoutines::call_stub

---------------  P R O C E S S  ---------------

Java Threads: ( =3D> current thread )
=3D>0x00e19000 JavaThread "Thread-48" daemon [_thread_in_native, =
id=3D4604, stack(0x049b0000,0x04a00000)]
  0x045c4400 JavaThread "Thread-45" daemon [_thread_blocked, id=3D6036, =
stack(0x059e0000,0x05a30000)]
  0x00e18c00 JavaThread "http-apr-8282-exec-10" daemon [_thread_blocked, =
id=3D8548, stack(0x05a30000,0x05a80000)]
  0x00e18400 JavaThread "http-apr-8282-exec-9" daemon [_thread_blocked, =
id=3D11616, stack(0x05770000,0x057c0000)]
  0x00e17c00 JavaThread "http-apr-8282-exec-8" daemon [_thread_blocked, =
id=3D10540, stack(0x05950000,0x059a0000)]
  0x045c5000 JavaThread "http-apr-8282-exec-7" daemon [_thread_blocked, =
id=3D544, stack(0x05830000,0x05880000)]
  0x045c4c00 JavaThread "http-apr-8282-exec-6" daemon [_thread_blocked, =
id=3D10324, stack(0x05880000,0x058d0000)]
  0x045c4000 JavaThread "http-apr-8282-exec-5" daemon [_thread_blocked, =
id=3D9332, stack(0x05380000,0x053d0000)]
  0x045c3800 JavaThread "http-apr-8282-exec-4" daemon [_thread_blocked, =
id=3D12088, stack(0x05710000,0x05760000)]
  0x045c3400 JavaThread "http-apr-8282-exec-3" daemon [_thread_blocked, =
id=3D10236, stack(0x05530000,0x05580000)]
  0x045c2c00 JavaThread "http-apr-8282-exec-2" daemon [_thread_blocked, =
id=3D4384, stack(0x055f0000,0x05640000)]
  0x045c2800 JavaThread "http-apr-8282-exec-1" daemon [_thread_blocked, =
id=3D13636, stack(0x054e0000,0x05530000)]
  0x045c2000 JavaThread "http-apr-8282-AsyncTimeout" daemon =
[_thread_blocked, id=3D6232, stack(0x05590000,0x055e0000)]
  0x045c1800 JavaThread "http-apr-8282-Acceptor-0" daemon =
[_thread_in_native, id=3D10572, stack(0x05480000,0x054d0000)]
  0x045c1400 JavaThread "http-apr-8282-Sendfile-0" daemon =
[_thread_blocked, id=3D1680, stack(0x04cd0000,0x04d20000)]
  0x045c0c00 JavaThread "http-apr-8282-CometPoller-7" daemon =
[_thread_blocked, id=3D5196, stack(0x05410000,0x05460000)]
  0x045c0800 JavaThread "http-apr-8282-CometPoller-6" daemon =
[_thread_blocked, id=3D12100, stack(0x05330000,0x05380000)]
  0x045c0000 JavaThread "http-apr-8282-CometPoller-5" daemon =
[_thread_blocked, id=3D4244, stack(0x052a0000,0x052f0000)]
  0x045bfc00 JavaThread "http-apr-8282-CometPoller-4" daemon =
[_thread_blocked, id=3D3168, stack(0x04a70000,0x04ac0000)]
  0x045bf400 JavaThread "http-apr-8282-CometPoller-3" daemon =
[_thread_blocked, id=3D5136, stack(0x05010000,0x05060000)]
  0x045bec00 JavaThread "http-apr-8282-CometPoller-2" daemon =
[_thread_blocked, id=3D4852, stack(0x051a0000,0x051f0000)]
  0x045be800 JavaThread "http-apr-8282-CometPoller-1" daemon =
[_thread_blocked, id=3D7208, stack(0x05220000,0x05270000)]
  0x045be000 JavaThread "http-apr-8282-CometPoller-0" daemon =
[_thread_blocked, id=3D6996, stack(0x05100000,0x05150000)]
  0x045bdc00 JavaThread "http-apr-8282-Poller-7" daemon =
[_thread_blocked, id=3D12212, stack(0x00ff0000,0x01040000)]
  0x0441dc00 JavaThread "http-apr-8282-Poller-6" daemon =
[_thread_in_native, id=3D6640, stack(0x01280000,0x012d0000)]
  0x0441d800 JavaThread "http-apr-8282-Poller-5" daemon =
[_thread_blocked, id=3D4164, stack(0x05070000,0x050c0000)]
  0x0441d000 JavaThread "http-apr-8282-Poller-4" daemon =
[_thread_blocked, id=3D12240, stack(0x04fc0000,0x05010000)]
  0x0441cc00 JavaThread "http-apr-8282-Poller-3" daemon =
[_thread_blocked, id=3D10148, stack(0x04ba0000,0x04bf0000)]
  0x0441c400 JavaThread "http-apr-8282-Poller-2" daemon =
[_thread_blocked, id=3D10648, stack(0x04d20000,0x04d70000)]
  0x045afc00 JavaThread "http-apr-8282-Poller-1" daemon =
[_thread_blocked, id=3D2852, stack(0x04c60000,0x04cb0000)]
  0x0441a800 JavaThread "http-apr-8282-Poller-0" daemon =
[_thread_in_native, id=3D9412, stack(0x047c0000,0x04810000)]
  0x043a3800 JavaThread =
"ContainerBackgroundProcessor[StandardEngine[Catalina]]" daemon =
[_thread_blocked, id=3D7992, stack(0x04940000,0x04990000)]
  0x04452c00 JavaThread "GC Daemon" daemon [_thread_blocked, id=3D9732, =
stack(0x04810000,0x04860000)]
  0x00e0c800 JavaThread "Service Thread" daemon [_thread_blocked, =
id=3D5408, stack(0x010b0000,0x01100000)]
  0x00e07400 JavaThread "C1 CompilerThread0" daemon [_thread_blocked, =
id=3D1508, stack(0x03fc0000,0x04010000)]
  0x00e02400 JavaThread "Attach Listener" daemon [_thread_blocked, =
id=3D13124, stack(0x01140000,0x01190000)]
  0x00dff000 JavaThread "Signal Dispatcher" daemon [_thread_blocked, =
id=3D12428, stack(0x00e40000,0x00e90000)]
  0x00dec000 JavaThread "Finalizer" daemon [_thread_blocked, id=3D13996, =
stack(0x012e0000,0x01330000)]
  0x00de7400 JavaThread "Reference Handler" daemon [_thread_blocked, =
id=3D10820, stack(0x01220000,0x01270000)]
  0x0110cc00 JavaThread "main" [_thread_in_native, id=3D7536, =
stack(0x003a0000,0x003f0000)]

Other Threads:
  0x00de5800 VMThread [stack: 0x01060000,0x010b0000] [id=3D13228]
  0x00e28400 WatcherThread [stack: 0x01190000,0x011e0000] [id=3D8396]

VM state:not at safepoint (normal execution)

VM Mutex/Monitor currently owned by a thread: None

Heap
 def new generation   total 6912K, used 2283K [0x23ca0000, 0x24420000, =
0x291f0000)
  eden space 6144K,  36% used [0x23ca0000, 0x23ecc168, 0x242a0000)
  from space 768K,   7% used [0x242a0000, 0x242aeb40, 0x24360000)
  to   space 768K,   0% used [0x24360000, 0x24360000, 0x24420000)
 tenured generation   total 15288K, used 9172K [0x291f0000, 0x2a0de000, =
0x33ca0000)
   the space 15288K,  59% used [0x291f0000, 0x29ae5238, 0x29ae5400, =
0x2a0de000)
 compacting perm gen  total 12288K, used 6885K [0x33ca0000, 0x348a0000, =
0x37ca0000)
   the space 12288K,  56% used [0x33ca0000, 0x343596f0, 0x34359800, =
0x348a0000)
    ro space 10240K,  45% used [0x37ca0000, 0x38123958, 0x38123a00, =
0x386a0000)
    rw space 12288K,  54% used [0x386a0000, 0x38d27498, 0x38d27600, =
0x392a0000)

Code Cache  [0x01fa0000, 0x02190000, 0x03fa0000)
 total_blobs=3D1011 nmethods=3D834 adapters=3D111 =
free_code_cache=3D30808Kb largest_free_block=3D31547008

Compilation events (10 events):
Event: 106.578 Thread 0x00e07400 nmethod 838 0x02187388 code =
[0x02187480, 0x02187550]
Event: 142.439 Thread 0x00e07400  840             =
org.apache.catalina.valves.ValveBase::getNext (5 bytes)
Event: 142.439 Thread 0x00e07400 nmethod 840 0x021878c8 code =
[0x021879c0, 0x02187a40]
Event: 160.714 Thread 0x00e07400  841             =
java.lang.ref.Reference::access$100 (4 bytes)
Event: 160.714 Thread 0x00e07400 nmethod 841 0x02187a88 code =
[0x02187b80, 0x02187bf0]
Event: 172.447 Thread 0x00e07400  842             =
java.util.regex.Pattern$Start::match (90 bytes)
Event: 172.447 Thread 0x00e07400 nmethod 842 0x02187c48 code =
[0x02187d60, 0x02187edc]
Event: 182.450 Thread 0x00e07400  843             =
java.util.regex.Pattern$Single::isSatisfiedBy (14 bytes)
Event: 182.450 Thread 0x00e07400 nmethod 843 0x02188048 code =
[0x02188140, 0x021881d0]
Event: 208.430 Thread 0x00e07400  844   !         =
org.apache.catalina.valves.AccessLogValve$DateFormatCache$Cache::getForma=
tInternal (514 bytes)

GC Heap History (10 events):
Event: 134.915 GC heap before
{Heap before GC invocations=3D23 (full 1):
 def new generation   total 4992K, used 4615K [0x23ca0000, 0x24200000, =
0x291f0000)
  eden space 4480K,  99% used [0x23ca0000, 0x240fe310, 0x24100000)
  from space 512K,  27% used [0x24180000, 0x241a3b58, 0x24200000)
  to   space 512K,   0% used [0x24100000, 0x24100000, 0x24180000)
 tenured generation   total 10944K, used 10926K [0x291f0000, 0x29ca0000, =
0x33ca0000)
   the space 10944K,  99% used [0x291f0000, 0x29c9b900, 0x29c9ba00, =
0x29ca0000)
 compacting perm gen  total 12288K, used 6885K [0x33ca0000, 0x348a0000, =
0x37ca0000)
   the space 12288K,  56% used [0x33ca0000, 0x343596f0, 0x34359800, =
0x348a0000)
    ro space 10240K,  45% used [0x37ca0000, 0x38123958, 0x38123a00, =
0x386a0000)
    rw space 12288K,  54% used [0x386a0000, 0x38d27498, 0x38d27600, =
0x392a0000)
Event: 134.918 GC heap after
Heap after GC invocations=3D24 (full 1):
 def new generation   total 4992K, used 142K [0x23ca0000, 0x24200000, =
0x291f0000)
  eden space 4480K,   0% used [0x23ca0000, 0x23ca0000, 0x24100000)
  from space 512K,  27% used [0x24100000, 0x24123ac8, 0x24180000)
  to   space 512K,   0% used [0x24180000, 0x24180000, 0x24200000)
 tenured generation   total 10944K, used 10926K [0x291f0000, 0x29ca0000, =
0x33ca0000)
   the space 10944K,  99% used [0x291f0000, 0x29c9b900, 0x29c9ba00, =
0x29ca0000)
 compacting perm gen  total 12288K, used 6885K [0x33ca0000, 0x348a0000, =
0x37ca0000)
   the space 12288K,  56% used [0x33ca0000, 0x343596f0, 0x34359800, =
0x348a0000)
    ro space 10240K,  45% used [0x37ca0000, 0x38123958, 0x38123a00, =
0x386a0000)
    rw space 12288K,  54% used [0x386a0000, 0x38d27498, 0x38d27600, =
0x392a0000)
}
Event: 148.951 GC heap before
{Heap before GC invocations=3D24 (full 1):
 def new generation   total 4992K, used 4622K [0x23ca0000, 0x24200000, =
0x291f0000)
  eden space 4480K, 100% used [0x23ca0000, 0x24100000, 0x24100000)
  from space 512K,  27% used [0x24100000, 0x24123ac8, 0x24180000)
  to   space 512K,   0% used [0x24180000, 0x24180000, 0x24200000)
 tenured generation   total 10944K, used 10926K [0x291f0000, 0x29ca0000, =
0x33ca0000)
   the space 10944K,  99% used [0x291f0000, 0x29c9b900, 0x29c9ba00, =
0x29ca0000)
 compacting perm gen  total 12288K, used 6885K [0x33ca0000, 0x348a0000, =
0x37ca0000)
   the space 12288K,  56% used [0x33ca0000, 0x343596f0, 0x34359800, =
0x348a0000)
    ro space 10240K,  45% used [0x37ca0000, 0x38123958, 0x38123a00, =
0x386a0000)
    rw space 12288K,  54% used [0x386a0000, 0x38d27498, 0x38d27600, =
0x392a0000)
Event: 148.954 GC heap after
Heap after GC invocations=3D25 (full 1):
 def new generation   total 4992K, used 142K [0x23ca0000, 0x24200000, =
0x291f0000)
  eden space 4480K,   0% used [0x23ca0000, 0x23ca0000, 0x24100000)
  from space 512K,  27% used [0x24180000, 0x241a3ac8, 0x24200000)
  to   space 512K,   0% used [0x24100000, 0x24100000, 0x24180000)
 tenured generation   total 10944K, used 10926K [0x291f0000, 0x29ca0000, =
0x33ca0000)
   the space 10944K,  99% used [0x291f0000, 0x29c9b900, 0x29c9ba00, =
0x29ca0000)
 compacting perm gen  total 12288K, used 6885K [0x33ca0000, 0x348a0000, =
0x37ca0000)
   the space 12288K,  56% used [0x33ca0000, 0x343596f0, 0x34359800, =
0x348a0000)
    ro space 10240K,  45% used [0x37ca0000, 0x38123958, 0x38123a00, =
0x386a0000)
    rw space 12288K,  54% used [0x386a0000, 0x38d27498, 0x38d27600, =
0x392a0000)
}
Event: 160.626 GC heap before
{Heap before GC invocations=3D25 (full 1):
 def new generation   total 4992K, used 4621K [0x23ca0000, 0x24200000, =
0x291f0000)
  eden space 4480K,  99% used [0x23ca0000, 0x240ffbb8, 0x24100000)
  from space 512K,  27% used [0x24180000, 0x241a3ac8, 0x24200000)
  to   space 512K,   0% used [0x24100000, 0x24100000, 0x24180000)
 tenured generation   total 10944K, used 10926K [0x291f0000, 0x29ca0000, =
0x33ca0000)
   the space 10944K,  99% used [0x291f0000, 0x29c9b900, 0x29c9ba00, =
0x29ca0000)
 compacting perm gen  total 12288K, used 6885K [0x33ca0000, 0x348a0000, =
0x37ca0000)
   the space 12288K,  56% used [0x33ca0000, 0x343596f0, 0x34359800, =
0x348a0000)
    ro space 10240K,  45% used [0x37ca0000, 0x38123958, 0x38123a00, =
0x386a0000)
    rw space 12288K,  54% used [0x386a0000, 0x38d27498, 0x38d27600, =
0x392a0000)
Event: 160.710 GC heap after
Heap after GC invocations=3D26 (full 2):
 def new generation   total 6912K, used 0K [0x23ca0000, 0x24420000, =
0x291f0000)
  eden space 6144K,   0% used [0x23ca0000, 0x23ca0000, 0x242a0000)
  from space 768K,   0% used [0x242a0000, 0x242a0000, 0x24360000)
  to   space 768K,   0% used [0x24360000, 0x24360000, 0x24420000)
 tenured generation   total 15288K, used 9172K [0x291f0000, 0x2a0de000, =
0x33ca0000)
   the space 15288K,  59% used [0x291f0000, 0x29ae5238, 0x29ae5400, =
0x2a0de000)
 compacting perm gen  total 12288K, used 6885K [0x33ca0000, 0x348a0000, =
0x37ca0000)
   the space 12288K,  56% used [0x33ca0000, 0x343596f0, 0x34359800, =
0x348a0000)
    ro space 10240K,  45% used [0x37ca0000, 0x38123958, 0x38123a00, =
0x386a0000)
    rw space 12288K,  54% used [0x386a0000, 0x38d27498, 0x38d27600, =
0x392a0000)
}
Event: 176.658 GC heap before
{Heap before GC invocations=3D26 (full 2):
 def new generation   total 6912K, used 6136K [0x23ca0000, 0x24420000, =
0x291f0000)
  eden space 6144K,  99% used [0x23ca0000, 0x2429e270, 0x242a0000)
  from space 768K,   0% used [0x242a0000, 0x242a0000, 0x24360000)
  to   space 768K,   0% used [0x24360000, 0x24360000, 0x24420000)
 tenured generation   total 15288K, used 9172K [0x291f0000, 0x2a0de000, =
0x33ca0000)
   the space 15288K,  59% used [0x291f0000, 0x29ae5238, 0x29ae5400, =
0x2a0de000)
 compacting perm gen  total 12288K, used 6885K [0x33ca0000, 0x348a0000, =
0x37ca0000)
   the space 12288K,  56% used [0x33ca0000, 0x343596f0, 0x34359800, =
0x348a0000)
    ro space 10240K,  45% used [0x37ca0000, 0x38123958, 0x38123a00, =
0x386a0000)
    rw space 12288K,  54% used [0x386a0000, 0x38d27498, 0x38d27600, =
0x392a0000)
Event: 176.660 GC heap after
Heap after GC invocations=3D27 (full 2):
 def new generation   total 6912K, used 58K [0x23ca0000, 0x24420000, =
0x291f0000)
  eden space 6144K,   0% used [0x23ca0000, 0x23ca0000, 0x242a0000)
  from space 768K,   7% used [0x24360000, 0x2436e8e0, 0x24420000)
  to   space 768K,   0% used [0x242a0000, 0x242a0000, 0x24360000)
 tenured generation   total 15288K, used 9172K [0x291f0000, 0x2a0de000, =
0x33ca0000)
   the space 15288K,  59% used [0x291f0000, 0x29ae5238, 0x29ae5400, =
0x2a0de000)
 compacting perm gen  total 12288K, used 6885K [0x33ca0000, 0x348a0000, =
0x37ca0000)
   the space 12288K,  56% used [0x33ca0000, 0x343596f0, 0x34359800, =
0x348a0000)
    ro space 10240K,  45% used [0x37ca0000, 0x38123958, 0x38123a00, =
0x386a0000)
    rw space 12288K,  54% used [0x386a0000, 0x38d27498, 0x38d27600, =
0x392a0000)
}
Event: 197.516 GC heap before
{Heap before GC invocations=3D27 (full 2):
 def new generation   total 6912K, used 6198K [0x23ca0000, 0x24420000, =
0x291f0000)
  eden space 6144K,  99% used [0x23ca0000, 0x2429f158, 0x242a0000)
  from space 768K,   7% used [0x24360000, 0x2436e8e0, 0x24420000)
  to   space 768K,   0% used [0x242a0000, 0x242a0000, 0x24360000)
 tenured generation   total 15288K, used 9172K [0x291f0000, 0x2a0de000, =
0x33ca0000)
   the space 15288K,  59% used [0x291f0000, 0x29ae5238, 0x29ae5400, =
0x2a0de000)
 compacting perm gen  total 12288K, used 6885K [0x33ca0000, 0x348a0000, =
0x37ca0000)
   the space 12288K,  56% used [0x33ca0000, 0x343596f0, 0x34359800, =
0x348a0000)
    ro space 10240K,  45% used [0x37ca0000, 0x38123958, 0x38123a00, =
0x386a0000)
    rw space 12288K,  54% used [0x386a0000, 0x38d27498, 0x38d27600, =
0x392a0000)
Event: 197.517 GC heap after
Heap after GC invocations=3D28 (full 2):
 def new generation   total 6912K, used 58K [0x23ca0000, 0x24420000, =
0x291f0000)
  eden space 6144K,   0% used [0x23ca0000, 0x23ca0000, 0x242a0000)
  from space 768K,   7% used [0x242a0000, 0x242aeb40, 0x24360000)
  to   space 768K,   0% used [0x24360000, 0x24360000, 0x24420000)
 tenured generation   total 15288K, used 9172K [0x291f0000, 0x2a0de000, =
0x33ca0000)
   the space 15288K,  59% used [0x291f0000, 0x29ae5238, 0x29ae5400, =
0x2a0de000)
 compacting perm gen  total 12288K, used 6885K [0x33ca0000, 0x348a0000, =
0x37ca0000)
   the space 12288K,  56% used [0x33ca0000, 0x343596f0, 0x34359800, =
0x348a0000)
    ro space 10240K,  45% used [0x37ca0000, 0x38123958, 0x38123a00, =
0x386a0000)
    rw space 12288K,  54% used [0x386a0000, 0x38d27498, 0x38d27600, =
0x392a0000)
}

Deoptimization events (0 events):
No events

Internal exceptions (10 events):
Event: 4.428 Thread 0x045c4000 Threw 0x23cef500 at =
C:\jdk7u2_32P\jdk7u4\hotspot\src\share\vm\prims\jvm.cpp:1166
Event: 4.429 Thread 0x045c4000 Threw 0x23cefbc0 at =
C:\jdk7u2_32P\jdk7u4\hotspot\src\share\vm\prims\jvm.cpp:1166
Event: 5.475 Thread 0x045c4000 Threw 0x23cf6230 at =
C:\jdk7u2_32P\jdk7u4\hotspot\src\share\vm\prims\jvm.cpp:1166
Event: 5.475 Thread 0x045c4000 Threw 0x23cf6770 at =
C:\jdk7u2_32P\jdk7u4\hotspot\src\share\vm\prims\jvm.cpp:1166
Event: 7.594 Thread 0x045c3400 Threw 0x23de2078 at =
C:\jdk7u2_32P\jdk7u4\hotspot\src\share\vm\prims\jvm.cpp:1166
Event: 7.594 Thread 0x045c3400 Threw 0x23de27a8 at =
C:\jdk7u2_32P\jdk7u4\hotspot\src\share\vm\prims\jvm.cpp:1166
Event: 7.597 Thread 0x045c3400 Threw 0x23dfc028 at =
C:\jdk7u2_32P\jdk7u4\hotspot\src\share\vm\prims\jvm.cpp:1166
Event: 7.597 Thread 0x045c3400 Threw 0x23dfc758 at =
C:\jdk7u2_32P\jdk7u4\hotspot\src\share\vm\prims\jvm.cpp:1166
Event: 11.306 Thread 0x045c4000 Threw 0x23fece50 at =
C:\jdk7u2_32P\jdk7u4\hotspot\src\share\vm\prims\jvm.cpp:1166
Event: 11.306 Thread 0x045c4000 Threw 0x23fed548 at =
C:\jdk7u2_32P\jdk7u4\hotspot\src\share\vm\prims\jvm.cpp:1166

Events (10 events):
Event: 160.715 Executing VM operation: RevokeBias done
Event: 160.715 Executing VM operation: RevokeBias
Event: 160.715 Executing VM operation: RevokeBias done
Event: 160.715 Executing VM operation: BulkRevokeBias
Event: 160.715 Executing VM operation: BulkRevokeBias done
Event: 163.534 Thread 0x00e19000 Thread added: 0x00e19000
Event: 176.658 Executing VM operation: GenCollectForAllocation
Event: 176.661 Executing VM operation: GenCollectForAllocation done
Event: 197.515 Executing VM operation: GenCollectForAllocation
Event: 197.517 Executing VM operation: GenCollectForAllocation done


Dynamic libraries:
0x01370000 - 0x0139f000 	C:\Program Files\Java\jdk1.7.0_04\bin\java.exe
0x779b0000 - 0x77ad8000 	C:\Windows\system32\ntdll.dll
0x76930000 - 0x76a0c000 	C:\Windows\system32\kernel32.dll
0x76a10000 - 0x76ad6000 	C:\Windows\system32\ADVAPI32.dll
0x76ae0000 - 0x76ba3000 	C:\Windows\system32\RPCRT4.dll
0x76430000 - 0x764cd000 	C:\Windows\system32\USER32.dll
0x763e0000 - 0x7642b000 	C:\Windows\system32\GDI32.dll
0x74c40000 - 0x74dde000 	=
C:\Windows\WinSxS\x86_microsoft.windows.common-controls_6595b64144ccf1df_=
6.0.6002.18305_none_5cb72f2a088b0ed3\COMCTL32.dll
0x76820000 - 0x768ca000 	C:\Windows\system32\msvcrt.dll
0x768d0000 - 0x76929000 	C:\Windows\system32\SHLWAPI.dll
0x76730000 - 0x7674e000 	C:\Windows\system32\IMM32.DLL
0x764d0000 - 0x76598000 	C:\Windows\system32\MSCTF.dll
0x76e80000 - 0x76e89000 	C:\Windows\system32\LPK.DLL
0x76e00000 - 0x76e7d000 	C:\Windows\system32\USP10.dll
0x66720000 - 0x667de000 	C:\Program =
Files\Java\jdk1.7.0_04\jre\bin\msvcr100.dll
0x62060000 - 0x623aa000 	C:\Program =
Files\Java\jdk1.7.0_04\jre\bin\client\jvm.dll
0x737b0000 - 0x737b7000 	C:\Windows\system32\WSOCK32.dll
0x763b0000 - 0x763dd000 	C:\Windows\system32\WS2_32.dll
0x76750000 - 0x76756000 	C:\Windows\system32\NSI.dll
0x748a0000 - 0x748d2000 	C:\Windows\system32\WINMM.dll
0x76070000 - 0x761b5000 	C:\Windows\system32\ole32.dll
0x76d70000 - 0x76dfd000 	C:\Windows\system32\OLEAUT32.dll
0x74860000 - 0x7489e000 	C:\Windows\system32\OLEACC.dll
0x76060000 - 0x76067000 	C:\Windows\system32\PSAPI.DLL
0x6c1c0000 - 0x6c1cc000 	C:\Program =
Files\Java\jdk1.7.0_04\jre\bin\verify.dll
0x6adc0000 - 0x6ade0000 	C:\Program =
Files\Java\jdk1.7.0_04\jre\bin\java.dll
0x6a640000 - 0x6a653000 	C:\Program =
Files\Java\jdk1.7.0_04\jre\bin\zip.dll
0x6bed0000 - 0x6bee4000 	C:\Program =
Files\Java\jdk1.7.0_04\jre\bin\net.dll
0x756f0000 - 0x7572b000 	C:\Windows\system32\mswsock.dll
0x757c0000 - 0x757c5000 	C:\Windows\System32\wship6.dll
0x6c070000 - 0x6c07f000 	C:\Program =
Files\Java\jdk1.7.0_04\jre\bin\nio.dll
0x6c000000 - 0x6c00a000 	C:\Program =
Files\Java\jdk1.7.0_04\jre\bin\management.dll
0x10000000 - 0x10107000 	=
C:\Users\AdminKP\Desktop\apache-tomcat-7.0.27\bin\tcnative-1.dll
0x753f0000 - 0x7542b000 	C:\Windows\system32\rsaenh.dll
0x68c00000 - 0x68c20000 	C:\Program =
Files\Java\jdk1.7.0_04\jre\bin\sunec.dll
0x6adb0000 - 0x6adb9000 	C:\Program =
Files\Java\jdk1.7.0_04\jre\bin\sunmscapi.dll
0x75970000 - 0x75a62000 	C:\Windows\system32\CRYPT32.dll
0x75ad0000 - 0x75ae2000 	C:\Windows\system32\MSASN1.dll
0x75f20000 - 0x75f3e000 	C:\Windows\system32\USERENV.dll
0x75f00000 - 0x75f14000 	C:\Windows\system32\Secur32.dll
0x75340000 - 0x75345000 	C:\Windows\System32\wshtcpip.dll
0x75330000 - 0x7533f000 	C:\Windows\system32\NLAapi.dll
0x758d0000 - 0x758e9000 	C:\Windows\system32\IPHLPAPI.DLL
0x75890000 - 0x758c5000 	C:\Windows\system32\dhcpcsvc.DLL
0x75b20000 - 0x75b4c000 	C:\Windows\system32\DNSAPI.dll
0x75880000 - 0x75887000 	C:\Windows\system32\WINNSI.DLL
0x75850000 - 0x75872000 	C:\Windows\system32\dhcpcsvc6.DLL
0x733d0000 - 0x733df000 	C:\Windows\system32\napinsp.dll
0x733c0000 - 0x733c8000 	C:\Windows\System32\winrnr.dll
0x761c0000 - 0x76209000 	C:\Windows\system32\WLDAP32.dll
0x735d0000 - 0x735d6000 	C:\Windows\system32\rasadhlp.dll
0x74210000 - 0x742ec000 	C:\Windows\system32\DBGHELP.DLL

VM Arguments:
jvm_args: =
-Djava.util.logging.config.file=3DC:\Users\AdminKP\Desktop\apache-tomcat-=
7.0.27\conf\logging.properties =
-Djava.util.logging.manager=3Dorg.apache.juli.ClassLoaderLogManager =
-Djava.endorsed.dirs=3DC:\Users\AdminKP\Desktop\apache-tomcat-7.0.27\endo=
rsed -Dcatalina.base=3DC:\Users\AdminKP\Desktop\apache-tomcat-7.0.27 =
-Dcatalina.home=3DC:\Users\AdminKP\Desktop\apache-tomcat-7.0.27 =
-Djava.io.tmpdir=3DC:\Users\AdminKP\Desktop\apache-tomcat-7.0.27\temp=20
java_command: org.apache.catalina.startup.Bootstrap start
Launcher Type: SUN_STANDARD

Environment Variables:
JAVA_HOME=3DC:\Program Files\Java\jdk1.7.0_04
JRE_HOME=3DC:\Program Files\Java\jdk1.7.0_04
CLASSPATH=3DC:\Users\AdminKP\Desktop\apache-tomcat-7.0.27\bin\bootstrap.j=
ar;C:\Users\AdminKP\Desktop\apache-tomcat-7.0.27\bin\tomcat-juli.jar
PATH=3DD:\Program Files\Parallels\Plesk\Mail Servers\Mail =
Enable\BIN;D:\PROGRA~1\PARALL~1\Plesk\ADDITI~1\Perl\site\bin;D:\PROGRA~1\=
PARALL~1\Plesk\ADDITI~1\Perl\bin;D:\Program =
Files\Parallels\Plesk\Additional\Python\Scripts;D:\Program =
Files\Parallels\Plesk\Additional\Python\;C:\Windows\system32;C:\Windows;C=
:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;E:\Pr=
ogram Files\Microsoft SQL Server\110\Tools\Binn\;E:\Program =
Files\Microsoft SQL Server\110\DTS\Binn\;E:\Program Files\Microsoft SQL =
Server\110\Tools\Binn\ManagementStudio\
USERNAME=3DAdminKP
OS=3DWindows_NT
PROCESSOR_IDENTIFIER=3Dx86 Family 6 Model 15 Stepping 13, GenuineIntel



---------------  S Y S T E M  ---------------

OS: Windows Server 2008 Build 6002 Service Pack 2

CPU:total 2 (2 cores per cpu, 1 threads per core) family 6 model 15 =
stepping 13, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ssse3, tsc

Memory: 4k page, physical 4159888k(1605684k free), swap =
10347160k(8198712k free)

vm_info: Java HotSpot(TM) Client VM (23.0-b21) for windows-x86 JRE =
(1.7.0_04-b20), built on Apr 12 2012 03:26:46 by "java_re" with unknown =
MS VC++:1600

time: Fri Apr 27 18:33:55 2012
elapsed time: 211 seconds



Regards,
Konstantin Prei=C3=9Fer


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233812-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 27 17:21:54 2012
Return-Path: <users-return-233812-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6C773C30C
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 27 Apr 2012 17:21:54 +0000 (UTC)
Received: (qmail 38951 invoked by uid 500); 27 Apr 2012 17:21:51 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 38744 invoked by uid 500); 27 Apr 2012 17:21:50 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 38735 invoked by uid 99); 27 Apr 2012 17:21:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2012 17:21:50 +0000
X-ASF-Spam-Status: No, hits=4.7 required=5.0
	tests=FREEMAIL_FORGED_REPLYTO,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [98.139.213.129] (HELO nm4-vm0.bullet.mail.bf1.yahoo.com) (98.139.213.129)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 27 Apr 2012 17:21:40 +0000
Received: from [98.139.215.141] by nm4.bullet.mail.bf1.yahoo.com with NNFMP; 27 Apr 2012 17:21:19 -0000
Received: from [98.139.212.212] by tm12.bullet.mail.bf1.yahoo.com with NNFMP; 27 Apr 2012 17:21:19 -0000
Received: from [127.0.0.1] by omp1021.mail.bf1.yahoo.com with NNFMP; 27 Apr 2012 17:21:19 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 358904.76483.bm@omp1021.mail.bf1.yahoo.com
Received: (qmail 34955 invoked by uid 60001); 27 Apr 2012 17:21:19 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1335547279; bh=eWfXRuSWI/eSdkGP2JKUGjiXUJmdVliR5ySPYZpkjJY=; h=X-YMail-OSG:Received:X-Mailer:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type; b=CUuE6b1XRzTIH2o6VbCQRFoZMC3oxpcJfCQQJD37ynKLWNOPY646kkxXRSpdbeXsOjmatgSROhHPfy9ztDAbX+r0YQfyJnD3EAfV1SMEK/jpR1f9iRjMo55l2WGCuVyDswGMv6RSazCuTM77GLK3UrtUu1Di6KWLgKV8JY9DAdk=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type;
  b=buheZ/G4d6fhF7Zkn7msesxQ+gR5oSOZ58jbA7tyEwxcysNENiruLTBz6vrZVzRo0Hqkt+vf2t2MsiXC2mTJWRkmEmNqaI03A6U7A1iGjs8BFvHOTs2WzpnMzql07ERpwchcIRAXfn5I8F0mOl3Npdu+IAATgwrzI3n04mdzm0s=;
X-YMail-OSG: hHoddCkVM1lUw2xtWLYtCL2er6kcE6S370kX.CnVkI669Yr
 auQEQpZK6_9vbe8hN4IsuvhwlqeRJKCS8k.RzsOEGkpMhjInSDybv32ucXB_
 efphxqHYVhHRJdtLhH9ebacDv8xEiFbKDH0EIYcuw2XdSb43QuC3Y9Pzjgjk
 2.TQMUoImISTLvypHqDoFcKyV_oBX8rErATtxwRcbUq2bZAVFZg83dtPMfLF
 tOwJU.Id4GRyrf1LYLBYtXEVqEwoI7A6vOIpBV8V1tXnTKo7MyjpkbEN1pNu
 XcH1bJXgSV6XBrtau0f3q8G.9pWp3XYLkj0.wZQK2iVn_l_3ojrxm.OUittm
 6YVrJeiuc1w5rsV8kjOFql2sLPuyQFTndYGcp_XrYTcBuKPtRXRr_QzNjkhu
 u8i4PzKn0wmHyq0QDDXM.IWmZ4bAEZPpJDu.oj0lB71hMIlOZCtQtbrQPOW0
 vpnRJKMCNG6mMlr7wZEGfDu3dG38rTm9d3MP3o9vaxF5ip_0diz.SlAJpgAI
 wJ1_YpOvbSh7mOyz.xlVwqftMlRbWPGun_0hL12e.18wOT5A-
Received: from [174.252.67.198] by web161802.mail.bf1.yahoo.com via HTTP; Fri, 27 Apr 2012 10:21:19 PDT
X-Mailer: YahooMailWebService/0.8.117.340979
Message-ID: <1335547279.34158.YahooMailMobile@web161802.mail.bf1.yahoo.com>
Date: Fri, 27 Apr 2012 10:21:19 -0700 (PDT)
From: Dola Woolfe <dolachin@yahoo.com>
Reply-To: dolachin@yahoo.com
Subject: Re: Capturing System.out on a Mac
To: Henrique Ordine <hordine@gmail.com>,
  Tomcat Users List <users@tomcat.apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="-2096837515-1759866965-1335547279=:34158"

---2096837515-1759866965-1335547279=:34158
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

They don't contain the output of System.out?=0A=0AAre you expecting them to=
?
---2096837515-1759866965-1335547279=:34158--

From users-return-233813-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 27 17:32:06 2012
Return-Path: <users-return-233813-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9744490B7
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 27 Apr 2012 17:32:06 +0000 (UTC)
Received: (qmail 61838 invoked by uid 500); 27 Apr 2012 17:32:03 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 61581 invoked by uid 500); 27 Apr 2012 17:32:03 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 61570 invoked by uid 99); 27 Apr 2012 17:32:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2012 17:32:03 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.91.2.12] (HELO smtp-outbound-1.vmware.com) (208.91.2.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2012 17:31:55 +0000
Received: from sc9-mailhost1.vmware.com (sc9-mailhost1.vmware.com [10.113.161.71])
	by smtp-outbound-1.vmware.com (Postfix) with ESMTP id 80D8828565
	for <users@tomcat.apache.org>; Fri, 27 Apr 2012 10:31:34 -0700 (PDT)
Received: from sc9-exht09.vmware.com (sc9-exht09.vmware.com [10.113.190.39])
	by sc9-mailhost1.vmware.com (Postfix) with ESMTP id 7D20618459
	for <users@tomcat.apache.org>; Fri, 27 Apr 2012 10:31:34 -0700 (PDT)
Received: from exch-mbx-114.vmware.com ([10.113.190.114]) by
 sc9-exht09.vmware.com ([10.113.190.39]) with mapi; Fri, 27 Apr 2012 10:31:34
 -0700
From: Derek Beauregard <dbeauregard@vmware.com>
To: Tomcat Users List <users@tomcat.apache.org>
Date: Fri, 27 Apr 2012 10:31:33 -0700
Subject: Re: Capturing System.out on a Mac
Thread-Topic: Capturing System.out on a Mac
Thread-Index: Ac0km5cM/FQFSKK+R6SEt+6lzpyhhA==
Message-ID: <CBC0412A.4E2B%dbeauregard@vmware.com>
In-Reply-To: <1335547279.34158.YahooMailMobile@web161802.mail.bf1.yahoo.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
user-agent: Microsoft-MacOutlook/14.14.0.111121
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

Catalina.out should have anything written to stdout/stderr.  Be careful as
this file is not rotated and will grow for ever.  Any web apps should be
using logging and not System.out.

Also you could start tomcat with the 'run' command rather than the 'start'
command to run it in the foreground of your current shell.  (I wouldn't do
this in production)

-Derek

Derek Beauregard


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233814-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 27 18:38:32 2012
Return-Path: <users-return-233814-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DF93ECD46
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 27 Apr 2012 18:38:31 +0000 (UTC)
Received: (qmail 68352 invoked by uid 500); 27 Apr 2012 18:38:28 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 68211 invoked by uid 500); 27 Apr 2012 18:38:27 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 67994 invoked by uid 99); 27 Apr 2012 18:38:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2012 18:38:27 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [76.96.62.16] (HELO qmta01.westchester.pa.mail.comcast.net) (76.96.62.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2012 18:38:20 +0000
Received: from omta21.westchester.pa.mail.comcast.net ([76.96.62.72])
	by qmta01.westchester.pa.mail.comcast.net with comcast
	id 33vl1j0021ZXKqc516e0wJ; Fri, 27 Apr 2012 18:38:00 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta21.westchester.pa.mail.comcast.net with comcast
	id 36dy1j00e38FjT13h6dyQJ; Fri, 27 Apr 2012 18:37:58 +0000
Message-ID: <4F9AE786.80005@christopherschultz.net>
Date: Fri, 27 Apr 2012 14:37:58 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Long timeout after aborted upload
References: <4F99AE7B.5080609@christopherschultz.net> <4F9A510F.30405@ice-sa.com>
In-Reply-To: <4F9A510F.30405@ice-sa.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Andr,

On 4/27/12 3:55 AM, Andr Warnier wrote:
> And the main issue is that, while it is uploading the data, the
> browser isn't reading anything from the webserver.

Yeah, I'm fairly sure that this is the problem.

> Sending a response to the browser including a "Connection: close" 
> header, just tells the browser that it will not be able to send
> *its next request* on the same HTTP/TCP connection, and that it
> will have to build a new connection.  But it doesn't impact the
> current request/response cycle.

Yes, I'm well aware of that.

> If this thing of stopping the browser waisting its time is really 
> important in your case, then on the base of the above, one could
> imagine a solution, based on for example a specialised browser
> "applet" which would send the file-to-upload using a separate HTTP
> request including an "Expect" header (see section 8.2.3), then
> waiting for the server to answer with a "100 Continue" response
> before sending the body.

Yeah, it's too bad I can't force the client to act like that. If I
could, I would object to the Content-Length immediately and then the
bytes would never even have to be sent.

Thanks,
- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+a54UACgkQ9CaO5/Lv0PBehgCfY6GhIdv6hwCLpYiBk8I47+CQ
XRkAoJzGRq075TdrNZ30zr9VyjFvcPS8
=X2KB
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233815-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 27 18:45:32 2012
Return-Path: <users-return-233815-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 38A46CF84
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 27 Apr 2012 18:45:32 +0000 (UTC)
Received: (qmail 95795 invoked by uid 500); 27 Apr 2012 18:45:29 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 95602 invoked by uid 500); 27 Apr 2012 18:45:29 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 95588 invoked by uid 99); 27 Apr 2012 18:45:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2012 18:45:28 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [76.96.62.48] (HELO qmta05.westchester.pa.mail.comcast.net) (76.96.62.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2012 18:45:22 +0000
Received: from omta11.westchester.pa.mail.comcast.net ([76.96.62.36])
	by qmta05.westchester.pa.mail.comcast.net with comcast
	id 36dX1j0050mv7h0556l2oF; Fri, 27 Apr 2012 18:45:02 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta11.westchester.pa.mail.comcast.net with comcast
	id 36l31j00J38FjT13X6l3cL; Fri, 27 Apr 2012 18:45:03 +0000
Message-ID: <4F9AE92C.8070602@christopherschultz.net>
Date: Fri, 27 Apr 2012 14:45:00 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Capturing System.out on a Mac
References: <1335543545.27019.YahooMailNeo@web161804.mail.bf1.yahoo.com>
In-Reply-To: <1335543545.27019.YahooMailNeo@web161804.mail.bf1.yahoo.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Dola,

On 4/27/12 12:19 PM, Dola Woolfe wrote:
> We just switched from Windows to Mac. On Windows, when we started 
> tomcat in the command window, a new window would pop up that
> contains all the output of System.out.  But on a Mac, no new window
> shows up and we are missing all the output. Is there a quick fix to
> this?

If you use bin/startup.sh, standard output is redirected to
logs/catalina.out. It's acting just like it does on all UNIX-like systems.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+a6SwACgkQ9CaO5/Lv0PBH1QCghXrzcWkj7HJqL9oWk6+qoFSe
4c4AoKK6XsCGtLRU7l5f1X3I+/CACHCl
=bDXa
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233816-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 27 19:10:20 2012
Return-Path: <users-return-233816-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C62BEC6A4
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 27 Apr 2012 19:10:20 +0000 (UTC)
Received: (qmail 55196 invoked by uid 500); 27 Apr 2012 19:10:17 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 54960 invoked by uid 500); 27 Apr 2012 19:10:17 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 54951 invoked by uid 99); 27 Apr 2012 19:10:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2012 19:10:17 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [72.30.239.13] (HELO nm31-vm5.bullet.mail.bf1.yahoo.com) (72.30.239.13)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 27 Apr 2012 19:10:08 +0000
Received: from [98.139.212.149] by nm31.bullet.mail.bf1.yahoo.com with NNFMP; 27 Apr 2012 19:09:46 -0000
Received: from [98.139.212.211] by tm6.bullet.mail.bf1.yahoo.com with NNFMP; 27 Apr 2012 19:09:46 -0000
Received: from [127.0.0.1] by omp1020.mail.bf1.yahoo.com with NNFMP; 27 Apr 2012 19:09:46 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 945695.43010.bm@omp1020.mail.bf1.yahoo.com
Received: (qmail 9737 invoked by uid 60001); 27 Apr 2012 19:09:46 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1335553786; bh=jHP56weEha9wi2vb+k6zWUeE5oKbJGam8eaEXMx5vlY=; h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=dJUv+rCqT5AN25uOzR99prlg7Vfzas1WHfd6D1DOZPYWu5W79RkXEFLbb/j4praDOai/IM1o1sYH2nwhWnx4FzO0ot6Cc2gbr7pyzs+4KWmOuh0hnxhexssoh/TvgpRVuz60X+fhxAqjdRkpbO8eB7zc79O/k/N79o4DeZ2AmF0=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=UTThbT23zA0gWk/Cn1k8FvceDLhtwTlf6Be/fWQZ1A72VxKy8afuHqcRTwkwCvIcKLJHAOLK8/LahQz3nwdy+kcC4cbxIZvsFLSccLZkcwBvRm954dKsD6xi4SF2311RUgkVUHPA1mB/6fx8OnrfX4axGPawImiBTtK/rzBM7ps=;
X-YMail-OSG: AC1wqPYVM1m1xo0vvOtPELuIKJinwvCtG_l7ZLH3Izz9PvK
 YU9MRHcdYOrx.JrMGceDfJbb2J4zzD_lJK2GEYoftpwuh9I613FvK1E1drcX
 wG2dcKrHcvH2HcFX3QbmQkShU30Q6NrnrPopA1zJblpQDVA7ZFjWpzBP8y05
 rFxdDPqyayxpDVciRlNsORzcio7S1b_ynkz6lFploUJf7bsBa3jKWQawrNwS
 tinLrJ82eFeNOKiUfN9ros0LZxK4jOimi.r31KhMqpsdaCAapwYSS0qxmj0p
 HUvAjRaYAUrrWYZ2a0owJEjAOo7uXkxhNQ35h8FSs0LgtbHzVwkJNuWQECXM
 oETvQGByNCfnJfg4b33znU8rilex7MWJDL5MwVUmSiwUokNfoeh8EntphUtW
 oiz2ilnLEyC5DXsyM.voLoJUP17j1IwcNu7iVd8NXnhHg_pIJ8rjC8XpZY8E
 k4gIqXWMRkxD91LBUmzVWN.L0jUoGQKfTyadlYwnSfhuj0w--
Received: from [144.118.114.148] by web161803.mail.bf1.yahoo.com via HTTP; Fri, 27 Apr 2012 12:09:46 PDT
X-Mailer: YahooMailWebService/0.8.117.340979
References: <1335547279.34158.YahooMailMobile@web161802.mail.bf1.yahoo.com> <CBC0412A.4E2B%dbeauregard@vmware.com>
Message-ID: <1335553786.91235.YahooMailNeo@web161803.mail.bf1.yahoo.com>
Date: Fri, 27 Apr 2012 12:09:46 -0700 (PDT)
From: Dola Woolfe <dolachin@yahoo.com>
Reply-To: Dola Woolfe <dolachin@yahoo.com>
Subject: Re: Capturing System.out on a Mac
To: Tomcat Users List <users@tomcat.apache.org>
In-Reply-To: <CBC0412A.4E2B%dbeauregard@vmware.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Thank you and Christopher!=0A=0AI appreciate the point about logging, but w=
hat if I am using a library that utilizes System.out?=0A=0AThanks again,=0A=
=0ADola=0A=0A=0A----- Original Message -----=0AFrom: Derek Beauregard <dbea=
uregard@vmware.com>=0ATo: Tomcat Users List <users@tomcat.apache.org>=0ACc:=
 =0ASent: Friday, April 27, 2012 1:31 PM=0ASubject: Re: Capturing System.ou=
t on a Mac=0A=0ACatalina.out should have anything written to stdout/stderr.=
=A0 Be careful as=0Athis file is not rotated and will grow for ever.=A0 Any=
 web apps should be=0Ausing logging and not System.out.=0A=0AAlso you could=
 start tomcat with the 'run' command rather than the 'start'=0Acommand to r=
un it in the foreground of your current shell.=A0 (I wouldn't do=0Athis in =
production)=0A=0A-Derek=0A=0ADerek Beauregard=0A=0A=0A---------------------=
------------------------------------------------=0ATo unsubscribe, e-mail: =
users-unsubscribe@tomcat.apache.org=0AFor additional commands, e-mail: user=
s-help@tomcat.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233817-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 27 19:21:59 2012
Return-Path: <users-return-233817-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 178B8C9C9
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 27 Apr 2012 19:21:59 +0000 (UTC)
Received: (qmail 84237 invoked by uid 500); 27 Apr 2012 19:21:55 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 84166 invoked by uid 500); 27 Apr 2012 19:21:55 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 84157 invoked by uid 99); 27 Apr 2012 19:21:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2012 19:21:55 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [216.82.241.132] (HELO mail45.messagelabs.com) (216.82.241.132)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2012 19:21:45 +0000
X-Env-Sender: Chuck.Caldarale@unisys.com
X-Msg-Ref: server-15.tower-45.messagelabs.com!1335554482!25181537!1
X-Originating-IP: [192.61.61.104]
X-StarScan-Version: 6.5.5; banners=-,-,-
X-VirusChecked: Checked
Received: (qmail 4375 invoked from network); 27 Apr 2012 19:21:23 -0000
Received: from unknown (HELO USEA-NAEDGE1.unisys.com) (192.61.61.104)
  by server-15.tower-45.messagelabs.com with RC4-SHA encrypted SMTP; 27 Apr 2012 19:21:23 -0000
Received: from usea-nahubcas2.na.uis.unisys.com (129.224.76.115) by
 USEA-NAEDGE1.unisys.com (192.61.61.104) with Microsoft SMTP Server (TLS) id
 8.3.83.0; Fri, 27 Apr 2012 14:21:22 -0500
Received: from USEA-EXCH8.na.uis.unisys.com ([129.224.76.41]) by
 usea-nahubcas2.na.uis.unisys.com ([129.224.76.115]) with mapi; Fri, 27 Apr
 2012 14:21:22 -0500
From: "Caldarale, Charles R" <Chuck.Caldarale@unisys.com>
To: Tomcat Users List <users@tomcat.apache.org>
Date: Fri, 27 Apr 2012 14:21:21 -0500
Subject: RE: Capturing System.out on a Mac
Thread-Topic: Capturing System.out on a Mac
Thread-Index: Ac0kqWYo+MsgcsX3SaWkRzrHdHshOgAAPa/A
Message-ID: <99C8B2929B39C24493377AC7A121E21FB019537FE7@USEA-EXCH8.na.uis.unisys.com>
References: <1335547279.34158.YahooMailMobile@web161802.mail.bf1.yahoo.com>
 <CBC0412A.4E2B%dbeauregard@vmware.com>
 <1335553786.91235.YahooMailNeo@web161803.mail.bf1.yahoo.com>
In-Reply-To: <1335553786.91235.YahooMailNeo@web161803.mail.bf1.yahoo.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

> From: Dola Woolfe [mailto:dolachin@yahoo.com]=20
> Subject: Re: Capturing System.out on a Mac

> I appreciate the point about logging, but what if I am using a=20
> library that utilizes System.out?

Then you really, really need to file a bug report with the maintainers of t=
he library for writing anti-social code.  In the meantime, you can modify t=
he Tomcat startup script to redirect stdout to a pipe, and have one of the =
widely available utilities listen on that pipe and write it to a rotatable =
log file.

 - Chuck


THIS COMMUNICATION MAY CONTAIN CONFIDENTIAL AND/OR OTHERWISE PROPRIETARY MA=
TERIAL and is thus for use only by the intended recipient. If you received =
this in error, please contact the sender and delete the e-mail and its atta=
chments from all computers.


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233818-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 27 20:20:28 2012
Return-Path: <users-return-233818-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 199CCCC74
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 27 Apr 2012 20:20:28 +0000 (UTC)
Received: (qmail 61889 invoked by uid 500); 27 Apr 2012 20:20:24 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 61839 invoked by uid 500); 27 Apr 2012 20:20:24 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 61830 invoked by uid 99); 27 Apr 2012 20:20:23 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2012 20:20:23 +0000
Received: from localhost (HELO mail-yw0-f45.google.com) (127.0.0.1)
  (smtp-auth username olamy, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2012 20:20:23 +0000
Received: by yhoo21 with SMTP id o21so882143yho.18
        for <users@tomcat.apache.org>; Fri, 27 Apr 2012 13:20:22 -0700 (PDT)
Received: by 10.236.92.178 with SMTP id j38mr7956922yhf.58.1335558022729; Fri,
 27 Apr 2012 13:20:22 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.100.14.18 with HTTP; Fri, 27 Apr 2012 13:20:02 -0700 (PDT)
In-Reply-To: <CANnp+AtkKfJs5wM1HoKs88eydJ4Ha1AB2uysgcATm70m-7Ooiw@mail.gmail.com>
References: <CANnp+Av13q0zmbssmieoQ1_L675DOyrTx5wDc7VkoCp98ksBjw@mail.gmail.com>
 <CAPoyBqTgaQh65qxGG6e8teCn8NVy2_KH65Z7_RJNRbTLK_4isA@mail.gmail.com> <CANnp+AtkKfJs5wM1HoKs88eydJ4Ha1AB2uysgcATm70m-7Ooiw@mail.gmail.com>
From: Olivier Lamy <olamy@apache.org>
Date: Fri, 27 Apr 2012 22:20:02 +0200
Message-ID: <CAPoyBqSCBSCDxMC_V5wnw=zzR4qjAZtEfAYFymcx+zp1o_hiAw@mail.gmail.com>
Subject: Re: mvn tomcat:deploy fails with HTTP response 401
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Add
  <pluginRepositories>
    <pluginRepository>
      <id>apache.snapshots</id>
      <name>Apache Snapshots</name>
      <url>http://repository.apache.org/content/groups/snapshots-group/</ur=
l>
      <releases>
        <enabled>false</enabled>
      </releases>
      <snapshots>
        <enabled>true</enabled>
      </snapshots>
    </pluginRepository>
  </pluginRepositories>

Note now you must use tomcat6:run or tomcat7:run (depending tomcat
version you want to use).

I'd like to know the command line you are using ? It must be
tomcat6:deploy or tomcat7:deploy

2012/4/27 Henrique Ordine <hordine@gmail.com>:
> Thanks for your reply.
>
> I made the changes that you suggested but tomcat:deploy still fails with =
the
> same error.
>
> tomcat:run works, but it was already working before.
>
> My POM file is attached, if you could have a look at it, it would be grea=
t.
> It's a small POM, I've only just started my App.
>
> Thanks in advance,
>
> Op 27 april 2012 12:14 schreef Olivier Lamy <olamy@apache.org> het volgen=
de:
>>
>> Hello,
>>
>> That's something which has been fixed in trunk (I will probably
>> release a 2.0 next week).
>>
>>
>> 2012/4/27 Henrique Ordine <hordine@gmail.com>:
>> > Hi everybody,
>> >
>> > I'm trying to deploy my Maven Web App on my local Tomcat using the
>> > tomcat:deploy maven plugin, but the Manager application fails with a
>> > response code 401.
>> >
>> > I have Tomcat 6 installed on Mac OS Leopard, with Java 1.5. I manage t=
o
>> > access my Tomcat/manager app with the user "hordine", that I configure=
d
>> > and
>> > deploy
>> >
>> > I've configured my tomcat-users.xml, settings.xml, and POM files, like
>> > this:
>> >
>> > I've added this user to my tomcat-users.xml:
>> > =A0<role rolename=3D"tomcat"/>
>> > =A0<role rolename=3D"manager"/>
>> > =A0<role rolename=3D"manager-script"/>
>> > =A0<user username=3D"tomcat" password=3D"tomcat" roles=3D"tomcat"/>
>> > =A0<user username=3D"maventomcat" password=3D"maventomcat" roles=3D"ma=
nager"/>
>> > =A0<user username=3D"hordine" password=3D"hordine" roles=3D"manager,
>> > manager-script"/>
>> >
>> >
>> > I've added this server to my settings.xml:
>> > <servers>
>> > =A0 =A0<server>
>> > =A0 =A0 =A0 =A0<id>hordineLocalTomcat</id>
>> > =A0 =A0 =A0 =A0<username>hordine</username>
>> > =A0 =A0 =A0 =A0<password>hordine</password>
>> > =A0 =A0</server>
>> > </servers>
>> >
>> > And I've configured my POM like this:
>> >
>> > <build>
>> >
>> > <finalName>hTask-web</finalName>
>> >
>> > =A0<pluginManagement>
>> >
>> > =A0<plugins>
>> >
>> > =A0<plugin>
>> >
>> > =A0 =A0 =A0 =A0 <groupId>org.apache.tomcat.maven</groupId>
>> >
>> > =A0 =A0 =A0 =A0 =A0 <artifactId>tomcat-maven-plugin</artifactId>
>> >
>> > =A0 =A0 =A0 =A0 =A0 <version>1.1</version>
>>
>> Sure of that ????
>>
>> But to test if your issue is fixed in trunk try
>> <version>2.0-SNAPSHOT</version>
>>
>> see mojo declaration and repositories here:
>> http://tomcat.apache.org/maven-plugin-2.0-SNAPSHOT/snapshot-test.html
>>
>> >
>> > =A0 =A0 =A0 =A0 =A0 <configuration>
>> >
>> > =A0 <url>http://localhost:8080/manager</url>
>> >
>> > =A0 <server>hordineLocalTomcat</server>
>> >
>> > =A0 <path>/hTask-web</path>
>> >
>> > =A0</configuration>
>> >
>> > =A0</plugin>
>> >
>> > =A0</plugins>
>> >
>> > =A0</pluginManagement>
>> >
>> > </build>
>> >
>> >
>> > I'd appreciate any help.
>> >
>> > This is the entire error's stack trace:
>> >
>> > Embedded error: Server returned HTTP response code: 401 for URL:
>> > http://localhost:8080/manager/deploy?path=3D%2FhTask-web&war=3D
>> > [INFO]
>> > ----------------------------------------------------------------------=
--
>> > [INFO] Trace
>> > org.apache.maven.lifecycle.LifecycleExecutionException: Cannot invoke
>> > Tomcat manager
>> > at
>> >
>> > org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(Defau=
ltLifecycleExecutor.java:703)
>> > at
>> >
>> > org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeStandaloneG=
oal(DefaultLifecycleExecutor.java:553)
>> > at
>> >
>> > org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(Defaul=
tLifecycleExecutor.java:523)
>> > at
>> >
>> > org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHand=
leFailures(DefaultLifecycleExecutor.java:371)
>> > at
>> >
>> > org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegment=
s(DefaultLifecycleExecutor.java:332)
>> > at
>> >
>> > org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLif=
ecycleExecutor.java:181)
>> > at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:356)
>> > at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:137)
>> > at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
>> > at
>> > org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:41=
)
>> > at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>> > at
>> >
>> > sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.j=
ava:39)
>> > at
>> >
>> > sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccess=
orImpl.java:25)
>> > at java.lang.reflect.Method.invoke(Method.java:592)
>> > at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
>> > at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
>> > at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:43=
0)
>> > at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
>> > Caused by: org.apache.maven.plugin.MojoExecutionException: Cannot invo=
ke
>> > Tomcat manager
>> > at
>> >
>> > org.codehaus.mojo.tomcat.AbstractCatalinaMojo.execute(AbstractCatalina=
Mojo.java:149)
>> > at
>> >
>> > org.codehaus.mojo.tomcat.AbstractWarCatalinaMojo.execute(AbstractWarCa=
talinaMojo.java:70)
>> > at
>> >
>> > org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPlugin=
Manager.java:483)
>> > at
>> >
>> > org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(Defau=
ltLifecycleExecutor.java:678)
>> > ... 17 more
>> > Caused by: java.io.IOException: Server returned HTTP response code: 40=
1
>> > for
>> > URL: http://localhost:8080/manager/deploy?path=3D%2FhTask-web&war=3D
>> > at
>> >
>> > sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConn=
ection.java:1196)
>> > at org.codehaus.mojo.tomcat.TomcatManager.invoke(TomcatManager.java:60=
4)
>> > at
>> > org.codehaus.mojo.tomcat.TomcatManager.deployImpl(TomcatManager.java:6=
62)
>> > at org.codehaus.mojo.tomcat.TomcatManager.deploy(TomcatManager.java:29=
5)
>> > at
>> >
>> > org.codehaus.mojo.tomcat.AbstractDeployWarMojo.deployWar(AbstractDeplo=
yWarMojo.java:85)
>> > at
>> >
>> > org.codehaus.mojo.tomcat.AbstractDeployMojo.invokeManager(AbstractDepl=
oyMojo.java:85)
>> > at
>> >
>> > org.codehaus.mojo.tomcat.AbstractCatalinaMojo.execute(AbstractCatalina=
Mojo.java:141)
>> > ... 20 more
>> >
>> >
>> > --
>> > Henrique Ordine
>> >
>> > http://hordine.wordpress.com/
>>
>>
>>
>> --
>> Olivier Lamy
>> Talend: http://coders.talend.com
>> http://twitter.com/olamy | http://linkedin.com/in/olamy
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>> For additional commands, e-mail: users-help@tomcat.apache.org
>>
>
>
>
> --
> Henrique Ordine
>
> http://hordine.wordpress.com/
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org



--=20
Olivier Lamy
Talend: http://coders.talend.com
http://twitter.com/olamy | http://linkedin.com/in/olamy

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233819-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Fri Apr 27 21:11:48 2012
Return-Path: <users-return-233819-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 248D8C118
	for <apmail-tomcat-users-archive@www.apache.org>; Fri, 27 Apr 2012 21:11:48 +0000 (UTC)
Received: (qmail 14843 invoked by uid 500); 27 Apr 2012 21:11:44 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 14793 invoked by uid 500); 27 Apr 2012 21:11:44 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 14780 invoked by uid 99); 27 Apr 2012 21:11:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 Apr 2012 21:11:44 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [217.146.177.150] (HELO nm25-vm6.bullet.mail.ukl.yahoo.com) (217.146.177.150)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 27 Apr 2012 21:11:36 +0000
Received: from [217.146.183.213] by nm25.bullet.mail.ukl.yahoo.com with NNFMP; 27 Apr 2012 21:11:15 -0000
Received: from [217.146.182.148] by tm6.bullet.mail.ukl.yahoo.com with NNFMP; 27 Apr 2012 21:11:15 -0000
Received: from [127.0.0.1] by smtp117.mail.ukl.yahoo.com with NNFMP; 27 Apr 2012 21:11:15 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.es; s=s1024; t=1335561075; bh=fvRpuiGydg3FveQauR3mDKTuknh1vbGhRCbpXKgnEGc=; h=X-Yahoo-Newman-Id:X-Yahoo-Newman-Property:X-YMail-OSG:X-Yahoo-SMTP:Received:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding:X-Antivirus:X-Antivirus-Status; b=e4wUz2UynJvph8F5oZsOSslEJG3X8soVN512D1snDPdBd7YSmDeyQVYSYownoygiphJJ5WgzdLsupx7ssXqgbI7ixurjRUjWtLXA4++zFIKkCeTClXI4Do5ncB8JNLKoX/uok2OWZC3ZN356MK3OeY242xk0HpJun90CLh2yZX4=
X-Yahoo-Newman-Id: 603725.96187.bm@smtp117.mail.ukl.yahoo.com
X-Yahoo-Newman-Property: ymail-3
X-YMail-OSG: zpmgDzcVM1mRxZE0bqDgD3odTpyoNMCgjrWBJijA4d20pqx
 FTEHEUw47XSOZEveLcTkYUxJVkQqS1y2IFIzKHXiqq0S0ble1DMAifZSAtWn
 VJIKK7.ChrErKOpW0FdA5NoBHIh638_OCemjEd8cmDOc1vVJcqL6G4byzmuZ
 JHNYqOJbDFIP.7CPpKzpdUqWIFIlCDd2yK3A3ZLTSwSVtmK4JVlI25d_Azch
 THIahbLLDopw9kk0GhpoWEdcd52.gjhLyU1h6hKMUoCmBY_PadZ7G6rk86XM
 KO.RSJhw8ZYepPuvbCgAFnwkpbsenIroMhnQb7H.BQ0KC0OpZtILp0H6Oofh
 zU7CPTELJ55k1VX5RUO3gTPQlGZW1netEbkRo9_ft05RmMr0ZC55Y9z2mrh_
 jpROqVhaz6UeBY2W3Av2xEQxYYqL69od6S0NVNtC7NWaEyIlaMLfNU3cTYOK
 Ex9sH7qtD2XbB6P74LmcD3nxXfeuYDatO.aMUbeSjEUN40yQBANZ9uINfUIN
 4GtnExxUG_E9a4dzIJ_JmFMWXoHXwq0OBeOQYmSBN7pktfqacIMJAY.1J_ko
 YuEvIie_zwyWK0I4StOFXhHGg4jipuxe5bIwwC6L1M.DtYO1D.msGWzUR.ib
 J6LUpMj_wDsMD2zwW3Dsv9pvrRQ6u7HX22d0P8pDEpEbFwzkLQfO1g2OY5rV
 k0G6aZf7.od9UsPSdlAo2HEUlxz2TBw--
X-Yahoo-SMTP: 4morDKeswBDE3lIuzd.cm_qbJNxlcsznEWqdK4MN
Received: from [127.0.0.1] (miguel_3_gonzalez@85.49.219.248 with plain)
        by smtp117.mail.ukl.yahoo.com with SMTP; 27 Apr 2012 14:11:15 -0700 PDT
Message-ID: <4F9B0B72.9020303@yahoo.es>
Date: Fri, 27 Apr 2012 23:11:14 +0200
From: =?UTF-8?B?TWlndWVsIEdvbnrDoWxleiBDYXN0YcOxb3M=?= <miguel_3_gonzalez@yahoo.es>
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Javamelody and Struts
References: <CBB234E5.2AAB3%darryl.lewis@unsw.edu.au> <4F95B427.9040400@yahoo.es> <4F95B4C9.9010802@christopherschultz.net> <4F95C2F3.9040307@yahoo.es> <4F95CB23.5070803@yahoo.es> <4F9859EB.8080709@yahoo.es> <4F987765.4020205@christopherschultz.net> <4F9879B6.6070501@yahoo.es> <4F98ABAA.4080108@christopherschultz.net> <4F991C4A.8090206@yahoo.es> <4F9952DE.501@christopherschultz.net>
In-Reply-To: <4F9952DE.501@christopherschultz.net>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Antivirus: avast! (VPS 120427-1, 27/04/2012), Outbound message
X-Antivirus-Status: Clean

On 26/04/2012 15:51, Christopher Schultz wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Miguel,
>
> On 4/26/12 5:58 AM, Miguel Gonzlez Castaos wrote:
>> On 26/04/2012 03:58, Christopher Schultz wrote:
>>> -----BEGIN PGP SIGNED MESSAGE----- Hash: SHA1
>>>
>>> Miguel,
>>>
>>> On 4/25/12 6:24 PM, Miguel Gonzlez Castaos wrote:
>>>>> Please post your SSL<Connector>    configuration (cleansed of
>>>>> any passwords).
>> By the way, double checking the info from my web browser I get this
>> is a verisign class 3 secure server G3
> It looks like you were using the "EV" intermediate certificates
> before. This page[1] says that C3G3 certs are not frequently used
> except for client certificates... is that what you've got?
>
> [1] http://www.verisign.com/support/roots.html
>
>> I'm sorry but I come from the Apache world and I'm pretty new to
>> Tomcat. Also I have inherited this server and the configuration is
>> messy.
> When you use Java, you generally have to work with keystores. It's
> just a file full of keys and certificates. Think of a Java keystore as
> all of the following httpd directives mashed together into a single
> binary entity:
>
>    SSLCertificateKeyFile
>    SSLCertificateFile
>    SSLCertificateChainFile
>    SSLCACertificateFile
>
> Also, you have to use an "alias" that Tomcat uses (it's "tomcat") as
> the alias for the certificate to actually use for the server (as
> opposed to any other certificates you might have in the keystore).
>
>> Maybe I'm wrong but should I add the CAcert somewhere in the SSL
>> connector?
> There's no place to do that: the whole chain must be in the keystore,
> including the CA root all the way down to your own certificate. You
> may be able to get away with not having the very top-root CA
> certificate... I haven't worked too much with Java keystores so it's
> possible that there is a set of root, trusted certificates that are
> inherited by all keystores, but there are many ways to
> create/configure a ServerSocketFactory, so it's probably possible to
> set one up both with or without that globally-recognized set of root
> CA certs (i.e. those trusted by the JVM implicitly).
>
> If you are getting this error in Javamelody, then you need to
> configure Javamelody properly -- this isn't a Tomcat thing if web
> browsers can connect properly to Tomcat via HTTPS.
Thanks for your answers, they have lead me to (partly) the solution.

I found some clues here:

http://h20000.www2.hp.com/bizsupport/TechSupport/Document.jsp?lang=en&cc=us&taskId=110&prodSeriesId=4164840&prodTypeId=18964&objectID=c03023432 
<http://h20000.www2.hp.com/bizsupport/TechSupport/Document.jsp?lang=en&cc=us&taskId=110&prodSeriesId=4164840&prodTypeId=18964&objectID=c03023432>

I didn't have to add the certificate to the tomcat keystore, but to the 
java keystore of the JRE

Now I get a javamelody error reporting the app hasn't been configured to 
use javamelody, so no more SSL handshake errors

Many thanks,

Miguel



---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233820-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sat Apr 28 03:42:54 2012
Return-Path: <users-return-233820-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A02D4C123
	for <apmail-tomcat-users-archive@www.apache.org>; Sat, 28 Apr 2012 03:42:54 +0000 (UTC)
Received: (qmail 64900 invoked by uid 500); 28 Apr 2012 03:42:51 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 64747 invoked by uid 500); 28 Apr 2012 03:42:50 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 64718 invoked by uid 99); 28 Apr 2012 03:42:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2012 03:42:49 +0000
X-ASF-Spam-Status: No, hits=0.9 required=5.0
	tests=HK_RANDOM_ENVFROM,HK_RANDOM_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lbrtchx@gmail.com designates 209.85.214.173 as permitted sender)
Received: from [209.85.214.173] (HELO mail-ob0-f173.google.com) (209.85.214.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2012 03:42:43 +0000
Received: by obbwd18 with SMTP id wd18so2328293obb.18
        for <users@tomcat.apache.org>; Fri, 27 Apr 2012 20:42:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=j+il3Rn5+nI4CzL5xILfiqI41wCISLpZHOSzRjLL5+g=;
        b=VO45Vvck2rWfZdY/pTilR70kVoaTR+0qE3RKddLk/RKgu8aqfKRumuxYIkfEv/ls7k
         /72gS3pBpBkLo4ARIjkKTN4Yp1dX3mom0cyuarhWFzYUqpw4xrkr8YFnP6JMiS6KPHca
         6caV9eaWLlJ0utC7GWl89KNf3ljQ/7yaIIz3ZhUiticgCNVFrXNv3tgsXXpUqja+cYoU
         t4pcH+ujNkcQtKCcItIufrrFANFjZNa1+GMdjCX4K8jpkww3f+FyPkvvPvE9T/HWirv1
         aeYBpRFmw3httEEvakIyQxflhtNtgAU9HW9dgtWJQ+yqmZ9QONuuqaBv2+y7RqiqF+QH
         krAA==
MIME-Version: 1.0
Received: by 10.182.111.3 with SMTP id ie3mr17767932obb.14.1335584542702; Fri,
 27 Apr 2012 20:42:22 -0700 (PDT)
Received: by 10.182.70.167 with HTTP; Fri, 27 Apr 2012 20:42:22 -0700 (PDT)
In-Reply-To: <4F9ABD49.9070801@apache.org>
References: <CAFakBwg7eaGGjWEUS-XUEcH3h1niOmzDB7rnaf0kKs3F5sEk+A@mail.gmail.com>
	<4F9ABD49.9070801@apache.org>
Date: Sat, 28 Apr 2012 03:42:22 +0000
Message-ID: <CAFakBwiNmRWVMOVyLZ7rPq2faL9m61wDf9RSe78qDVzwFDW_WA@mail.gmail.com>
Subject: Re: trying to install openjdk + tomcat -from source- ...
From: Albretch Mueller <lbrtchx@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

~
 Well, you are right, but maybe you guys knew of complete installation
of an environment, which I had seen before, but for some reason can't
fidn now
~
 lbrtchx

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233821-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sat Apr 28 05:02:27 2012
Return-Path: <users-return-233821-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A33E295D0
	for <apmail-tomcat-users-archive@www.apache.org>; Sat, 28 Apr 2012 05:02:27 +0000 (UTC)
Received: (qmail 94599 invoked by uid 500); 28 Apr 2012 05:02:24 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 94109 invoked by uid 500); 28 Apr 2012 05:02:17 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 94050 invoked by uid 99); 28 Apr 2012 05:02:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2012 05:02:15 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.216.45] (HELO mail-qa0-f45.google.com) (209.85.216.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2012 05:02:06 +0000
Received: by qaeb19 with SMTP id b19so3472qae.18
        for <users@tomcat.apache.org>; Fri, 27 Apr 2012 22:01:45 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:content-type:content-transfer-encoding:x-gm-message-state;
        bh=FlNfdxggjJQpSdiNNIEjULeB+i/Uc6P6/Xs8uVH/Fqk=;
        b=ZQ1M/qBA83TCPPpmq8GLK0TrU2UoCzm47gLX5RPmKBFiycRpmFA2h/a36McfkEVfYN
         x2zJYsAGBzh38DTSy0L7Fpsdavx/kO+c41+w2Ru1eOxaZ0ZNOd5bZtrCHC3FfN5Pq9VN
         fI0ROjGCuyh4jRkWLbewAqNpAi3IKhwdPYQU5fJ/7eKLOQ+eHywrBiLDqxHMIsVVh5s9
         uDHXC6dQdWS6rtggwag2pI5qULFpxvKoJSNziQpRg8U0+b73Y2nvahuszo02s3jMQqvG
         Mhp+u6U27EXpf9Pqh97wSYZAexo3RtTr7JgYcwYXCAMJLFcISLMOTM/XOqsu6sUbVtv9
         NPXQ==
Received: by 10.224.207.131 with SMTP id fy3mr11144347qab.74.1335589305071;
        Fri, 27 Apr 2012 22:01:45 -0700 (PDT)
Received: from [192.168.1.6] (c-68-45-12-151.hsd1.nj.comcast.net. [68.45.12.151])
        by mx.google.com with ESMTPS id ci18sm174045qab.9.2012.04.27.22.01.42
        (version=SSLv3 cipher=OTHER);
        Fri, 27 Apr 2012 22:01:43 -0700 (PDT)
Message-ID: <4F9B79B5.3060203@poonam.org>
Date: Sat, 28 Apr 2012 10:31:41 +0530
From: Kiran Badi <kiran@poonam.org>
Organization: www.poonam.org
User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:12.0) Gecko/20120420 Thunderbird/12.0
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: How to run Tomcat as Service on windows start up.
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Gm-Message-State: ALoCoQmX5rHOKjZ5NhOfTrZDnfWltxD0siVzZSEw9lWSqr4ETLtF6Ojd9u9gbuQExMxxLzXMgayw

Hi,

I have installed and added tomcat 7.0.11 to netbeans 7.01 and now I want 
it to run as windows service so that whenever I start windows, it should 
start up and run.

Currently whenever I close netbeans it shut down tomcat along with it.

PS : I cannot download and install the fresh copy since being a 7 months 
old developer I do not want to take the risk of breaking my existing 
setup.Time is my constraint.

Can we create some startup bat file for windows 7 32 bit home premium 
and somehow push it on start up program list ?

- Kiran

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233822-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sat Apr 28 05:51:45 2012
Return-Path: <users-return-233822-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6F626C75C
	for <apmail-tomcat-users-archive@www.apache.org>; Sat, 28 Apr 2012 05:51:45 +0000 (UTC)
Received: (qmail 83338 invoked by uid 500); 28 Apr 2012 05:51:41 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 83273 invoked by uid 500); 28 Apr 2012 05:51:40 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 83233 invoked by uid 99); 28 Apr 2012 05:51:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2012 05:51:39 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jdesodt@gmail.com designates 74.125.83.45 as permitted sender)
Received: from [74.125.83.45] (HELO mail-ee0-f45.google.com) (74.125.83.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2012 05:51:34 +0000
Received: by eeit10 with SMTP id t10so564909eei.18
        for <users@tomcat.apache.org>; Fri, 27 Apr 2012 22:51:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=pq6IhxSjSEtVkHTecZsuzsa9ujIXPxsKT6BBXivxQJs=;
        b=GVdUnlyf0uMVz4Lmj16f2hWvyZY9Mdi/ldv3MyispXdTsIKMyki/I3pLjknDnZl/SY
         F8l5J8Vff5G6dvDUdQ5bM+bdmZJPKUZrqEEEhA+nX/DOhY6zlMP9iFOt2uzUZyE086+d
         Y9xGf0Rd0BFQbGDrbjBRnr7Ql3f8izVjL/KwZTiOuQL4agBttubXeA2Lsa9+hb6PVYKz
         3tDVSrkHCaHIcN1vZYHGviqOp5V3uZhfI1NNP5v+PhMNCaQHllFuv/8mtT0PG2X8rTQQ
         d5j1zLqedDcmTgY1pLywn1/9k/UZi9HONifbr9r8nRxt3v9ZPjA7Dqskg6Zlxzwz1a2L
         nacQ==
MIME-Version: 1.0
Received: by 10.14.99.194 with SMTP id x42mr3226113eef.97.1335592273520; Fri,
 27 Apr 2012 22:51:13 -0700 (PDT)
Received: by 10.213.4.194 with HTTP; Fri, 27 Apr 2012 22:51:13 -0700 (PDT)
In-Reply-To: <4F9B79B5.3060203@poonam.org>
References: <4F9B79B5.3060203@poonam.org>
Date: Sat, 28 Apr 2012 07:51:13 +0200
Message-ID: <CAOHnQjoPb=OY07P27GLrH6jpwJWfaxnrek1CCAf+h4CdyZH_Og@mail.gmail.com>
Subject: Re: How to run Tomcat as Service on windows start up.
From: Jacques Desodt <jdesodt@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=bcaec52c6aa90728e904beb6cf6a
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec52c6aa90728e904beb6cf6a
Content-Type: text/plain; charset=ISO-8859-1

Hi Kiran,

On Windows 7, you can't run batch files as services.
See :
http://stackoverflow.com/questions/8972679/windows-7-bat-file-not-starting-as-a-service

Your first step : compile the .bat file into .exe
Then create the service, and after change the service register values with
regedit.
This is a pure windows process, i think you'll have better answers using
Microsoft forums.

Best regards,
Jacques

2012/4/28 Kiran Badi <kiran@poonam.org>

> Hi,
>
> I have installed and added tomcat 7.0.11 to netbeans 7.01 and now I want
> it to run as windows service so that whenever I start windows, it should
> start up and run.
>
> Currently whenever I close netbeans it shut down tomcat along with it.
>
> PS : I cannot download and install the fresh copy since being a 7 months
> old developer I do not want to take the risk of breaking my existing
> setup.Time is my constraint.
>
> Can we create some startup bat file for windows 7 32 bit home premium and
> somehow push it on start up program list ?
>
> - Kiran
>
> ------------------------------**------------------------------**---------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.**apache.org<users-unsubscribe@tomcat.apache.org>
> For additional commands, e-mail: users-help@tomcat.apache.org
>
>

--bcaec52c6aa90728e904beb6cf6a--

From users-return-233823-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sat Apr 28 07:39:35 2012
Return-Path: <users-return-233823-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3A0819879
	for <apmail-tomcat-users-archive@www.apache.org>; Sat, 28 Apr 2012 07:39:35 +0000 (UTC)
Received: (qmail 59482 invoked by uid 500); 28 Apr 2012 07:39:31 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 58960 invoked by uid 500); 28 Apr 2012 07:39:25 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 58880 invoked by uid 99); 28 Apr 2012 07:39:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2012 07:39:24 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pid@pidster.com designates 209.85.210.44 as permitted sender)
Received: from [209.85.210.44] (HELO mail-pz0-f44.google.com) (209.85.210.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2012 07:39:18 +0000
Received: by dadz14 with SMTP id z14so1860817dad.3
        for <users@tomcat.apache.org>; Sat, 28 Apr 2012 00:38:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=references:from:in-reply-to:mime-version:date:message-id:subject:to
         :content-type;
        bh=zPJb+VTyGh6+P/Pl2X0o1BIF7xqsflHIES7EzTsXNVA=;
        b=XsiuNE6KIM4c8Tnx9ZJrXyjgRpcvJygOt4FSCqsMECrf81sasGPR3kcbAbwT20GysW
         51UQ8zA7zgxqLEf43tTQFPW6F8xWTXt/N1Dy1GJiulJKeeGSEKGwPHr98KC481WVKSmv
         eipJH9yHf1c6UZWIILYRA0c5qO0gtkwnrvG2A=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=references:from:in-reply-to:mime-version:date:message-id:subject:to
         :content-type:x-gm-message-state;
        bh=zPJb+VTyGh6+P/Pl2X0o1BIF7xqsflHIES7EzTsXNVA=;
        b=j3kaJMEOYSO2KmHlIyb9AihQj3mhVKAHKNQXTi2ofhwtLarQ8PzEeWRMw/+eWBZeAH
         MGV62BkhuwBfSYkwvDUeK6iyTArk7qw2tlcqiYDMQwY4E+sjp/AzsRUAkA8ewOSLkNRT
         YQ89VG1qDBFm1wpLZEK9FJbqI4ML2bMam9N3BrB/0NB2qpksaDxw6vIXxqW+6bH/X4jM
         K9FtRnPqIuzoCg7PxivE8cKPu1KCxXN6O5XgYuxl4JzFa9cn/x4BO0E5PiUcbG8I6vVu
         0r8oHGVWDuKHWk8MHlO5/ptx2vPeSGsIy9LMuYyig0CXd5/UAPA+PQie7IjsTtKGWk5a
         g15g==
Received: by 10.68.225.202 with SMTP id rm10mr5513306pbc.112.1335598737209;
 Sat, 28 Apr 2012 00:38:57 -0700 (PDT)
References: <4F9B79B5.3060203@poonam.org> <CAOHnQjoPb=OY07P27GLrH6jpwJWfaxnrek1CCAf+h4CdyZH_Og@mail.gmail.com>
From: "Pid *" <pid@pidster.com>
In-Reply-To: <CAOHnQjoPb=OY07P27GLrH6jpwJWfaxnrek1CCAf+h4CdyZH_Og@mail.gmail.com>
Mime-Version: 1.0 (1.0)
Date: Sat, 28 Apr 2012 08:39:16 +0100
Message-ID: <-302303621517214517@unknownmsgid>
Subject: Re: How to run Tomcat as Service on windows start up.
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=UTF-8
X-Gm-Message-State: ALoCoQlL+mfWDU61o3Qupk1NyH5X7ZoeLyHSB3Q7ZjFVtil+YppZ+TdhEZVvXSLvUK+/UIyLHN8u

On 28 Apr 2012, at 06:51, Jacques Desodt <jdesodt@gmail.com> wrote:

> Hi Kiran,
>
> On Windows 7, you can't run batch files as services.
> See :
> http://stackoverflow.com/questions/8972679/windows-7-bat-file-not-starting-as-a-service
>
> Your first step : compile the .bat file into .exe
> Then create the service, and after change the service register values with
> regedit.
> This is a pure windows process, i think you'll have better answers using
> Microsoft forums.

Woah there!

How is this less



>
> Best regards,
> Jacques
>
> 2012/4/28 Kiran Badi <kiran@poonam.org>
>
>> Hi,
>>
>> I have installed and added tomcat 7.0.11 to netbeans 7.01 and now I want
>> it to run as windows service so that whenever I start windows, it should
>> start up and run.
>>
>> Currently whenever I close netbeans it shut down tomcat along with it.
>>
>> PS : I cannot download and install the fresh copy since being a 7 months
>> old developer I do not want to take the risk of breaking my existing
>> setup.Time is my constraint.
>>
>> Can we create some startup bat file for windows 7 32 bit home premium and
>> somehow push it on start up program list ?
>>
>> - Kiran
>>
>> ------------------------------**------------------------------**---------
>> To unsubscribe, e-mail: users-unsubscribe@tomcat.**apache.org<users-unsubscribe@tomcat.apache.org>
>> For additional commands, e-mail: users-help@tomcat.apache.org
>>
>>

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233824-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sat Apr 28 10:04:34 2012
Return-Path: <users-return-233824-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CC9209125
	for <apmail-tomcat-users-archive@www.apache.org>; Sat, 28 Apr 2012 10:04:34 +0000 (UTC)
Received: (qmail 95692 invoked by uid 500); 28 Apr 2012 10:04:31 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 95201 invoked by uid 500); 28 Apr 2012 10:04:27 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 95164 invoked by uid 99); 28 Apr 2012 10:04:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2012 10:04:26 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of hordine@gmail.com designates 209.85.210.173 as permitted sender)
Received: from [209.85.210.173] (HELO mail-iy0-f173.google.com) (209.85.210.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2012 10:04:21 +0000
Received: by iafj26 with SMTP id j26so2819001iaf.18
        for <users@tomcat.apache.org>; Sat, 28 Apr 2012 03:04:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=zN/Y2MQEoBGpgJNQpQWApc305HhBcr0d9+gFsfVQ/f4=;
        b=B+P8QE3B/HsAIPUqSp6KhoLBMqe1QwSmUwCOW6OunnLLh5sVRoKpSJrPWTXpzf1c9K
         dQIggcMpgBzoOtLC/zxNvTQrN8vsKgvuXb1mzu4Z4N6loUzN99o0pjiJLknOfy12FYhj
         K00Vi/PlND8g1/oYYjafoW3kY9AmK15F2LOl7c8zBCERC4TJSUHyJ0TZRfKI1Vczcwr1
         sSCjf6+MzEBzu1iyVInoXfGpO7tsMMXoYXT4lgULGUt2Y7rfSYLOsSzPDfdNjfKnYxXb
         yLjkVzOKG+vW7X4Wz5VbjkETy3gNvmOla3hG+fP8y1b/4tar0d1SEZKMMBuZ3tvyGbAh
         xsew==
MIME-Version: 1.0
Received: by 10.42.19.72 with SMTP id a8mr11440227icb.39.1335607440942; Sat,
 28 Apr 2012 03:04:00 -0700 (PDT)
Received: by 10.50.57.131 with HTTP; Sat, 28 Apr 2012 03:04:00 -0700 (PDT)
In-Reply-To: <CAPoyBqSCBSCDxMC_V5wnw=zzR4qjAZtEfAYFymcx+zp1o_hiAw@mail.gmail.com>
References: <CANnp+Av13q0zmbssmieoQ1_L675DOyrTx5wDc7VkoCp98ksBjw@mail.gmail.com>
	<CAPoyBqTgaQh65qxGG6e8teCn8NVy2_KH65Z7_RJNRbTLK_4isA@mail.gmail.com>
	<CANnp+AtkKfJs5wM1HoKs88eydJ4Ha1AB2uysgcATm70m-7Ooiw@mail.gmail.com>
	<CAPoyBqSCBSCDxMC_V5wnw=zzR4qjAZtEfAYFymcx+zp1o_hiAw@mail.gmail.com>
Date: Sat, 28 Apr 2012 12:04:00 +0200
Message-ID: <CANnp+Au8etMBDyiUqRZQ7z1PL-bUTNEdDhhynT=Ov7PAtivq1g@mail.gmail.com>
Subject: Re: mvn tomcat:deploy fails with HTTP response 401
From: Henrique Ordine <hordine@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=20cf3040ee5213a4f904beba5747
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf3040ee5213a4f904beba5747
Content-Type: text/plain; charset=ISO-8859-1

Thanks again for your help.

I added <pluginRepositories> to my POM, but if I use tomcat6:deploy or
tomcat6:run, Maven says:

The plugin 'org.apache.maven.plugins:maven-tomcat6-plugin' does not exist
or no valid version could be found

I'm using Maven, 2.2.0 by the way.

2012/4/27 Olivier Lamy <olamy@apache.org>

> Add
>  <pluginRepositories>
>    <pluginRepository>
>      <id>apache.snapshots</id>
>      <name>Apache Snapshots</name>
>      <url>http://repository.apache.org/content/groups/snapshots-group/
> </url>
>      <releases>
>        <enabled>false</enabled>
>      </releases>
>      <snapshots>
>        <enabled>true</enabled>
>      </snapshots>
>    </pluginRepository>
>  </pluginRepositories>
>
> Note now you must use tomcat6:run or tomcat7:run (depending tomcat
> version you want to use).
>
> I'd like to know the command line you are using ? It must be
> tomcat6:deploy or tomcat7:deploy
>
> 2012/4/27 Henrique Ordine <hordine@gmail.com>:
> > Thanks for your reply.
> >
> > I made the changes that you suggested but tomcat:deploy still fails with
> the
> > same error.
> >
> > tomcat:run works, but it was already working before.
> >
> > My POM file is attached, if you could have a look at it, it would be
> great.
> > It's a small POM, I've only just started my App.
> >
> > Thanks in advance,
> >
> > Op 27 april 2012 12:14 schreef Olivier Lamy <olamy@apache.org> het
> volgende:
> >>
> >> Hello,
> >>
> >> That's something which has been fixed in trunk (I will probably
> >> release a 2.0 next week).
> >>
> >>
> >> 2012/4/27 Henrique Ordine <hordine@gmail.com>:
> >> > Hi everybody,
> >> >
> >> > I'm trying to deploy my Maven Web App on my local Tomcat using the
> >> > tomcat:deploy maven plugin, but the Manager application fails with a
> >> > response code 401.
> >> >
> >> > I have Tomcat 6 installed on Mac OS Leopard, with Java 1.5. I manage
> to
> >> > access my Tomcat/manager app with the user "hordine", that I
> configured
> >> > and
> >> > deploy
> >> >
> >> > I've configured my tomcat-users.xml, settings.xml, and POM files, like
> >> > this:
> >> >
> >> > I've added this user to my tomcat-users.xml:
> >> >  <role rolename="tomcat"/>
> >> >  <role rolename="manager"/>
> >> >  <role rolename="manager-script"/>
> >> >  <user username="tomcat" password="tomcat" roles="tomcat"/>
> >> >  <user username="maventomcat" password="maventomcat" roles="manager"/>
> >> >  <user username="hordine" password="hordine" roles="manager,
> >> > manager-script"/>
> >> >
> >> >
> >> > I've added this server to my settings.xml:
> >> > <servers>
> >> >    <server>
> >> >        <id>hordineLocalTomcat</id>
> >> >        <username>hordine</username>
> >> >        <password>hordine</password>
> >> >    </server>
> >> > </servers>
> >> >
> >> > And I've configured my POM like this:
> >> >
> >> > <build>
> >> >
> >> > <finalName>hTask-web</finalName>
> >> >
> >> >  <pluginManagement>
> >> >
> >> >  <plugins>
> >> >
> >> >  <plugin>
> >> >
> >> >         <groupId>org.apache.tomcat.maven</groupId>
> >> >
> >> >           <artifactId>tomcat-maven-plugin</artifactId>
> >> >
> >> >           <version>1.1</version>
> >>
> >> Sure of that ????
> >>
> >> But to test if your issue is fixed in trunk try
> >> <version>2.0-SNAPSHOT</version>
> >>
> >> see mojo declaration and repositories here:
> >> http://tomcat.apache.org/maven-plugin-2.0-SNAPSHOT/snapshot-test.html
> >>
> >> >
> >> >           <configuration>
> >> >
> >> >   <url>http://localhost:8080/manager</url>
> >> >
> >> >   <server>hordineLocalTomcat</server>
> >> >
> >> >   <path>/hTask-web</path>
> >> >
> >> >  </configuration>
> >> >
> >> >  </plugin>
> >> >
> >> >  </plugins>
> >> >
> >> >  </pluginManagement>
> >> >
> >> > </build>
> >> >
> >> >
> >> > I'd appreciate any help.
> >> >
> >> > This is the entire error's stack trace:
> >> >
> >> > Embedded error: Server returned HTTP response code: 401 for URL:
> >> > http://localhost:8080/manager/deploy?path=%2FhTask-web&war=
> >> > [INFO]
> >> >
> ------------------------------------------------------------------------
> >> > [INFO] Trace
> >> > org.apache.maven.lifecycle.LifecycleExecutionException: Cannot invoke
> >> > Tomcat manager
> >> > at
> >> >
> >> >
> org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:703)
> >> > at
> >> >
> >> >
> org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeStandaloneGoal(DefaultLifecycleExecutor.java:553)
> >> > at
> >> >
> >> >
> org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:523)
> >> > at
> >> >
> >> >
> org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:371)
> >> > at
> >> >
> >> >
> org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:332)
> >> > at
> >> >
> >> >
> org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:181)
> >> > at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:356)
> >> > at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:137)
> >> > at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
> >> > at
> >> >
> org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:41)
> >> > at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
> >> > at
> >> >
> >> >
> sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
> >> > at
> >> >
> >> >
> sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
> >> > at java.lang.reflect.Method.invoke(Method.java:592)
> >> > at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
> >> > at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
> >> > at
> org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
> >> > at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
> >> > Caused by: org.apache.maven.plugin.MojoExecutionException: Cannot
> invoke
> >> > Tomcat manager
> >> > at
> >> >
> >> >
> org.codehaus.mojo.tomcat.AbstractCatalinaMojo.execute(AbstractCatalinaMojo.java:149)
> >> > at
> >> >
> >> >
> org.codehaus.mojo.tomcat.AbstractWarCatalinaMojo.execute(AbstractWarCatalinaMojo.java:70)
> >> > at
> >> >
> >> >
> org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:483)
> >> > at
> >> >
> >> >
> org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:678)
> >> > ... 17 more
> >> > Caused by: java.io.IOException: Server returned HTTP response code:
> 401
> >> > for
> >> > URL: http://localhost:8080/manager/deploy?path=%2FhTask-web&war=
> >> > at
> >> >
> >> >
> sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1196)
> >> > at
> org.codehaus.mojo.tomcat.TomcatManager.invoke(TomcatManager.java:604)
> >> > at
> >> >
> org.codehaus.mojo.tomcat.TomcatManager.deployImpl(TomcatManager.java:662)
> >> > at
> org.codehaus.mojo.tomcat.TomcatManager.deploy(TomcatManager.java:295)
> >> > at
> >> >
> >> >
> org.codehaus.mojo.tomcat.AbstractDeployWarMojo.deployWar(AbstractDeployWarMojo.java:85)
> >> > at
> >> >
> >> >
> org.codehaus.mojo.tomcat.AbstractDeployMojo.invokeManager(AbstractDeployMojo.java:85)
> >> > at
> >> >
> >> >
> org.codehaus.mojo.tomcat.AbstractCatalinaMojo.execute(AbstractCatalinaMojo.java:141)
> >> > ... 20 more
> >> >
> >> >
> >> > --
> >> > Henrique Ordine
> >> >
> >> > http://hordine.wordpress.com/
> >>
> >>
> >>
> >> --
> >> Olivier Lamy
> >> Talend: http://coders.talend.com
> >> http://twitter.com/olamy | http://linkedin.com/in/olamy
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> >> For additional commands, e-mail: users-help@tomcat.apache.org
> >>
> >
> >
> >
> > --
> > Henrique Ordine
> >
> > http://hordine.wordpress.com/
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> > For additional commands, e-mail: users-help@tomcat.apache.org
>
>
>
> --
> Olivier Lamy
> Talend: http://coders.talend.com
> http://twitter.com/olamy | http://linkedin.com/in/olamy
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>
>


-- 
Henrique Ordine

http://hordine.wordpress.com/

--20cf3040ee5213a4f904beba5747--

From users-return-233825-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sat Apr 28 11:32:26 2012
Return-Path: <users-return-233825-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 969AAC0D9
	for <apmail-tomcat-users-archive@www.apache.org>; Sat, 28 Apr 2012 11:32:26 +0000 (UTC)
Received: (qmail 46383 invoked by uid 500); 28 Apr 2012 11:32:23 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 46331 invoked by uid 500); 28 Apr 2012 11:32:23 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 46311 invoked by uid 99); 28 Apr 2012 11:32:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2012 11:32:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aw@ice-sa.com designates 212.85.38.228 as permitted sender)
Received: from [212.85.38.228] (HELO tor.combios.es) (212.85.38.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2012 11:32:15 +0000
Received: from [192.168.245.129] (p549E108B.dip0.t-ipconnect.de [84.158.16.139])
	by tor.combios.es (Postfix) with ESMTPA id 8C8A1DA07A3
	for <users@tomcat.apache.org>; Sat, 28 Apr 2012 13:31:53 +0200 (CEST)
Message-ID: <4F9BD526.2090100@ice-sa.com>
Date: Sat, 28 Apr 2012 13:31:50 +0200
From: =?ISO-8859-1?Q?Andr=E9_Warnier?= <aw@ice-sa.com>
Reply-To: Tomcat Users List <users@tomcat.apache.org>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: How to run Tomcat as Service on windows start up.
References: <4F9B79B5.3060203@poonam.org> <CAOHnQjoPb=OY07P27GLrH6jpwJWfaxnrek1CCAf+h4CdyZH_Og@mail.gmail.com>
In-Reply-To: <CAOHnQjoPb=OY07P27GLrH6jpwJWfaxnrek1CCAf+h4CdyZH_Og@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Jacques Desodt wrote:
> Hi Kiran,
> 
> On Windows 7, you can't run batch files as services.
> See :
> http://stackoverflow.com/questions/8972679/windows-7-bat-file-not-starting-as-a-service
> 
> Your first step : compile the .bat file into .exe
> Then create the service, and after change the service register values with
> regedit.

I think that it is a bit more complicated that that.
A .bat file compiled to a .exe will still not work properly as a Windows service.

The standard Tomcat installation for Windows does it right, by providing a correct 
"service wrapper" for the JVM which runs Tomcat.
The OP would probably, in the end, save himself some time by installing a proper 
Tomcat-as-a-Windows-service from the Tomcat website, and then arrange for Netbeans to talk 
to that one.



---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233826-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sat Apr 28 13:00:27 2012
Return-Path: <users-return-233826-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 897F897E6
	for <apmail-tomcat-users-archive@www.apache.org>; Sat, 28 Apr 2012 13:00:27 +0000 (UTC)
Received: (qmail 95116 invoked by uid 500); 28 Apr 2012 13:00:23 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 94936 invoked by uid 500); 28 Apr 2012 13:00:23 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 94926 invoked by uid 99); 28 Apr 2012 13:00:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2012 13:00:23 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_IMAGE_ONLY_20,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_REMOTE_IMAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jeffmaury@gmail.com designates 209.85.220.173 as permitted sender)
Received: from [209.85.220.173] (HELO mail-vx0-f173.google.com) (209.85.220.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2012 13:00:17 +0000
Received: by vcbfl11 with SMTP id fl11so1525589vcb.18
        for <users@tomcat.apache.org>; Sat, 28 Apr 2012 05:59:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:sender:from:date:x-google-sender-auth:message-id
         :subject:to:content-type;
        bh=VBmhIawgYAyV8UyupY953E0lNY+Dd1D0f2aaeZ4WVxI=;
        b=RtNRsgesel2sZ8PgCCuVzAKMbzVNhU2oULAM9ttFbYFpYr8m4t7u4XWrY6W6HrK8j1
         kAL+d4VcPRvAMzamezo5Iih8N6ueTLGLEie8fRlK0GetdRtTVaELfYtYy7+AjUEt/mYo
         /XPxiYyZ2LSSucRWRhqUnOModp0+07Nv2AGpdoRbim7MJmjaYVKM6REWu2o+mMXRMrey
         d6W3a2eVWyLk6z9iFHF8IeK3bNOwWAwwr+8ZUgpdIXsghDC1t98PoqXMmXN11MhDLYdE
         IU9tCjqIS5hiQLCsSRV8oSOpCAuPNU2O+NnWhrPgOO7+GuPkvuNybHXUBd3lFZ4lpIQX
         9RAA==
Received: by 10.220.218.136 with SMTP id hq8mr15491011vcb.68.1335617996496;
 Sat, 28 Apr 2012 05:59:56 -0700 (PDT)
MIME-Version: 1.0
Sender: jeffmaury@gmail.com
Received: by 10.52.71.211 with HTTP; Sat, 28 Apr 2012 05:59:15 -0700 (PDT)
From: Jeff MAURY <jeffmaury@jeffmaury.com>
Date: Sat, 28 Apr 2012 14:59:15 +0200
X-Google-Sender-Auth: JW0zaS1bQV9PTZiwjrFOMjEVyp8
Message-ID: <CANyrOm6g=a41ufKBfncxd6PvGSUA1M+-nWURpLDKxpBcDOhgJg@mail.gmail.com>
Subject: Does Tomcat Maven plugin support WAR overlays ?
To: users <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=14dae9cfccb43c9d4d04bebcccf3

--14dae9cfccb43c9d4d04bebcccf3
Content-Type: text/plain; charset=ISO-8859-1

Hello,

I am facing the following problem with WAR overlays:
I have a first WAR, called skeleton, that contains all necessary stuff:
base web.xml, index.jsp and JAR dependencies.
I have another WAR whose first dependency is the skeleton which is (as of
yet) almost empty except for the slf4j_log4 dependency.
When i run tomcat7:run on the skeleton, everything is ok
When I run tomcat7:run on the second war, Tomcat start but I am not able to
use the application.
I have look at the mojo code and it seems it is using the web app source
directory (src/main/webapp) by default so as it is empty my case, it cannot
work.
AM I missing something ?

Thanks
Jeff


-- 
Jeff MAURY


"Legacy code" often differs from its suggested alternative by actually
working and scaling.
 - Bjarne Stroustrup

http://www.jeffmaury.com
http://riadiscuss.jeffmaury.com
http://www.twitter.com/jeffmaury


-- 
Jeff MAURY


"Legacy code" often differs from its suggested alternative by actually
working and scaling.
 - Bjarne Stroustrup

http://www.jeffmaury.com
http://riadiscuss.jeffmaury.com
http://www.twitter.com/jeffmaury

--14dae9cfccb43c9d4d04bebcccf3--

From users-return-233827-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sat Apr 28 14:52:50 2012
Return-Path: <users-return-233827-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 899DDC999
	for <apmail-tomcat-users-archive@www.apache.org>; Sat, 28 Apr 2012 14:52:50 +0000 (UTC)
Received: (qmail 5970 invoked by uid 500); 28 Apr 2012 14:52:47 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 5917 invoked by uid 500); 28 Apr 2012 14:52:47 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 5902 invoked by uid 99); 28 Apr 2012 14:52:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2012 14:52:47 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mikewse@hotmail.com designates 65.55.90.92 as permitted sender)
Received: from [65.55.90.92] (HELO snt0-omc2-s17.snt0.hotmail.com) (65.55.90.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2012 14:52:37 +0000
Received: from SNT129-DS15 ([65.55.90.73]) by snt0-omc2-s17.snt0.hotmail.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Sat, 28 Apr 2012 07:52:16 -0700
X-Originating-IP: [83.227.224.93]
X-Originating-Email: [mikewse@hotmail.com]
Message-ID: <SNT129-DS151B4EFF626A36436F5897A42A0@phx.gbl>
From: Mike Wilson <mikewse@hotmail.com>
To: <users@tomcat.apache.org>
Subject: multiple mod_jk server mappings and JSESSIONID
Date: Sat, 28 Apr 2012 16:52:06 +0200
MIME-Version: 1.0
Content-Type: text/plain; charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.1.7601.17609
Thread-Index: Ac0lTnrgy3z2Sav5Rg2P0ssWnr6atQ==
X-OriginalArrivalTime: 28 Apr 2012 14:52:16.0030 (UTC) FILETIME=[80AFE3E0:01CD254E]

I need to set up a configuration where a site's path space 
gets distributed over two servers and I'm looking at using 
mod_jk like this:

  Apache httpd
    mod_jk
      workers.properties
        workerA -> serverA
        workerB -> serverB
      uriworkermap.properties
        /*       = serverA
        /path2/* = serverB
        /path3/* = serverB
        /path3/xyz/* = serverA

F ex "/" and "/path1/" would be directed to serverA and 
"/path2/" would be directed to serverB. This is all fine.

But how do I best solve the issue with each server setting 
its own JSESSIONID? The browser client will see one site 
with one domain and one JSESSIONID cookie, so this will 
cause interference between the two servers when switching 
between pages.

Does mod_jk offer any feature to solve this, or is my best 
bet to change the name of the JSESSIONID cookie on one of 
the servers?

Best regards
Mike Wilson


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233828-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sat Apr 28 15:16:44 2012
Return-Path: <users-return-233828-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E151BCD8C
	for <apmail-tomcat-users-archive@www.apache.org>; Sat, 28 Apr 2012 15:16:43 +0000 (UTC)
Received: (qmail 50440 invoked by uid 500); 28 Apr 2012 15:16:40 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 50367 invoked by uid 500); 28 Apr 2012 15:16:40 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 50357 invoked by uid 99); 28 Apr 2012 15:16:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2012 15:16:40 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rainer.jung@kippdata.de designates 195.227.30.149 as permitted sender)
Received: from [195.227.30.149] (HELO mailserver.kippdata.de) (195.227.30.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2012 15:16:33 +0000
Received: from [10.0.110.6] ([192.168.2.104])
	by mailserver.kippdata.de (8.13.5/8.13.5) with ESMTP id q3SFGBW0014536
	for <users@tomcat.apache.org>; Sat, 28 Apr 2012 17:16:12 +0200 (CEST)
Message-ID: <4F9C09BA.6050906@kippdata.de>
Date: Sat, 28 Apr 2012 17:16:10 +0200
From: Rainer Jung <rainer.jung@kippdata.de>
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: multiple mod_jk server mappings and JSESSIONID
References: <SNT129-DS151B4EFF626A36436F5897A42A0@phx.gbl>
In-Reply-To: <SNT129-DS151B4EFF626A36436F5897A42A0@phx.gbl>
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On 28.04.2012 16:52, Mike Wilson wrote:
> I need to set up a configuration where a site's path space
> gets distributed over two servers and I'm looking at using
> mod_jk like this:
>
>    Apache httpd
>      mod_jk
>        workers.properties
>          workerA ->  serverA
>          workerB ->  serverB
>        uriworkermap.properties
>          /*       = serverA
>          /path2/* = serverB
>          /path3/* = serverB
>          /path3/xyz/* = serverA
>
> F ex "/" and "/path1/" would be directed to serverA and
> "/path2/" would be directed to serverB. This is all fine.
>
> But how do I best solve the issue with each server setting
> its own JSESSIONID? The browser client will see one site
> with one domain and one JSESSIONID cookie, so this will
> cause interference between the two servers when switching
> between pages.
>
> Does mod_jk offer any feature to solve this, or is my best
> bet to change the name of the JSESSIONID cookie on one of
> the servers?

No, there's no builtin feature for that in mod_jk. You could try to 
fiddle around with the Set-Cookie and Cookie headers using mod_headers. 
I suggest using a backend feature to switch cookie name there.

Note that the client should also respect the path when choosing the 
correct cookie in case multiple cookies match the server. I'd hope the 
longest path wins in case there are multuple matching paths. Did you 
test, whether there's actually a problem with those cookies?

Just in case: you can log the cookies in the server access log for 
debugging purposes by adding %{Set-Cookie}o and %{Cookie}i to your 
LogFormat in Apache.

Regards,

Rainer


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233829-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sat Apr 28 16:38:43 2012
Return-Path: <users-return-233829-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 59BA6C2C7
	for <apmail-tomcat-users-archive@www.apache.org>; Sat, 28 Apr 2012 16:38:43 +0000 (UTC)
Received: (qmail 88866 invoked by uid 500); 28 Apr 2012 16:38:40 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 88624 invoked by uid 500); 28 Apr 2012 16:38:39 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 88614 invoked by uid 99); 28 Apr 2012 16:38:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2012 16:38:39 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.216.52] (HELO mail-qa0-f52.google.com) (209.85.216.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2012 16:38:33 +0000
Received: by qabj34 with SMTP id j34so747323qab.18
        for <users@tomcat.apache.org>; Sat, 28 Apr 2012 09:38:12 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:content-type
         :content-transfer-encoding:x-gm-message-state;
        bh=6ej5nFaF8VKIj7UfKNRDR8xs5nQZPHAO/AzntfhxedE=;
        b=kTgPVlzbB1+rjoiSmy7gKF9HyESamT6WJtXha9cJ8Mzf55xYRjFlLBGUi430nA7yk8
         Thj/jCJbZqHAoTVpuxqJoOQiDcCJap8VmvbmqSZBY+DzvTJG2lKzJ+IvSY6H0G/W2bWh
         XNI4YYfYh9TPpuxugfwqFFzmaYNXaT98TW8Ag2HyxO2Y4hKV+ahDhiV4onY2ED8bOFyo
         l2uzYGRUbg31Hdeq43TMOm6LFuBlYN3RQcq060VBlTOOs5fAxAnQkAZ3Sjctk+DpuWG6
         8t4bg74601FwFcXSB65NAMHa+Bl3W6Hgw4Z4S2dQAL7b5m4M/S74BzoGFJeWw/WGBbXg
         4Lsw==
Received: by 10.224.175.69 with SMTP id w5mr8283784qaz.49.1335631092076;
        Sat, 28 Apr 2012 09:38:12 -0700 (PDT)
Received: from [192.168.1.6] (c-68-45-12-151.hsd1.nj.comcast.net. [68.45.12.151])
        by mx.google.com with ESMTPS id hz18sm4622607qab.3.2012.04.28.09.38.09
        (version=SSLv3 cipher=OTHER);
        Sat, 28 Apr 2012 09:38:10 -0700 (PDT)
Message-ID: <4F9C1CF2.2070102@poonam.org>
Date: Sat, 28 Apr 2012 22:08:10 +0530
From: Kiran Badi <kiran@poonam.org>
Organization: www.poonam.org
User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:12.0) Gecko/20120420 Thunderbird/12.0
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: How to run Tomcat as Service on windows start up.
References: <4F9B79B5.3060203@poonam.org> <CAOHnQjoPb=OY07P27GLrH6jpwJWfaxnrek1CCAf+h4CdyZH_Og@mail.gmail.com> <4F9BD526.2090100@ice-sa.com>
In-Reply-To: <4F9BD526.2090100@ice-sa.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Gm-Message-State: ALoCoQlLW10nbe7HMac0JKpNIgJxSbyWN9QrhOrG6LFz8JjltL9IuRKdsLAgfamRrqUy8/AbHHxE
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the all your suggestions,

How about running service.bat and registering tomcat7.exe as windows 
service , the one for which I already have a copy,

Below is the output I get,


C:\Program Files\Apache Software Foundation\Apache Tomcat 
7.0.11\bin>service.bat
  install tomcat7.exe
Neither the JAVA_HOME nor the JRE_HOME environment variable is defined
Service will try to guess them from the registry.
Installing the service 'tomcat7.exe' ...
Using CATALINA_HOME:    "C:\Program Files\Apache Software 
Foundation\Apache Tomc
at 7.0.11"
Using CATALINA_BASE:    "C:\Program Files\Apache Software 
Foundation\Apache Tomc
at 7.0.11"
Using JAVA_HOME:        ""
Using JRE_HOME:         ""
Using JVM:              "auto"
Failed installing 'tomcat7.exe' service

C:\Program Files\Apache Software Foundation\Apache Tomcat 7.0.11\bin>

and when check java home/jre variables, I see its already defined,


C:\Users\kiran>echo %JRE_HOME%
C:\Program Files\Java\jre6

C:\Users\kiran>echo %JAVA_HOME%
C:\Program Files\Java\jdk1.6.0_26

am I understanding something incorrect here ?





I just did some google and feel that there might be some
On 4/28/2012 5:01 PM, Andr Warnier wrote:
> Jacques Desodt wrote:
>> Hi Kiran,
>>
>> On Windows 7, you can't run batch files as services.
>> See :
>> http://stackoverflow.com/questions/8972679/windows-7-bat-file-not-starting-as-a-service 
>>
>>
>> Your first step : compile the .bat file into .exe
>> Then create the service, and after change the service register values 
>> with
>> regedit.
>
> I think that it is a bit more complicated that that.
> A .bat file compiled to a .exe will still not work properly as a 
> Windows service.
>
> The standard Tomcat installation for Windows does it right, by 
> providing a correct "service wrapper" for the JVM which runs Tomcat.
> The OP would probably, in the end, save himself some time by 
> installing a proper Tomcat-as-a-Windows-service from the Tomcat 
> website, and then arrange for Netbeans to talk to that one.
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233830-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sat Apr 28 16:58:28 2012
Return-Path: <users-return-233830-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id ABED8C41C
	for <apmail-tomcat-users-archive@www.apache.org>; Sat, 28 Apr 2012 16:58:28 +0000 (UTC)
Received: (qmail 20539 invoked by uid 500); 28 Apr 2012 16:58:25 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 20332 invoked by uid 500); 28 Apr 2012 16:58:25 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 20323 invoked by uid 99); 28 Apr 2012 16:58:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2012 16:58:25 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=FREEMAIL_FORGED_REPLYTO,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [98.138.91.143] (HELO nm13-vm3.bullet.mail.ne1.yahoo.com) (98.138.91.143)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 28 Apr 2012 16:58:16 +0000
Received: from [98.138.90.57] by nm13.bullet.mail.ne1.yahoo.com with NNFMP; 28 Apr 2012 16:57:55 -0000
Received: from [98.138.89.171] by tm10.bullet.mail.ne1.yahoo.com with NNFMP; 28 Apr 2012 16:57:55 -0000
Received: from [127.0.0.1] by omp1027.mail.ne1.yahoo.com with NNFMP; 28 Apr 2012 16:57:55 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 307897.51677.bm@omp1027.mail.ne1.yahoo.com
Received: (qmail 70404 invoked by uid 60001); 28 Apr 2012 16:57:55 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1335632275; bh=26m9gEJM1NpB2nUcqIT/3//4ZbPzKzU/zAcC3Imf/y0=; h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=BrKZVOAS0Ow60vRVsfGx/l8eZPzmioAD+JsKbDRh2TwrWGog+p2mE1OHWBqs9gJ0FVV8V+QgeOVAS1j4Pga05iNPW45dVrwO+HI3aTZlhwWF9sCdGJ48KYH0w3WOx5PwkFZCs5dmfUOCuTg8z4hblzrTUiNCW+BvRQcG8yR/y3I=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=OODqUBq4PecS8hDFKqOzyJCrjyuLZh3nalJC9ytiDyrTaxM8B9h90mrlzVoTP3juc5+DtofG5DSA4iO3M/Ov/5zaFlVkNGTdv1+vIksD+8Taldqs9qKWBkpdQPK3WLcPv3/cfVkVK7e7SJ/8If5pdI5cg32K7gCkznXAHbVECuU=;
X-YMail-OSG: QPLyfYoVM1kiCrD3HrMdobeO_OKX6Ca_8_6SJ4ikqFOO6Ck
 Puq6wREm84JiNLSd3MPP2skXbqmdesAmyC4Y5QkRzIIRbsr3SKWC6LsHn_x8
 0KlTP.aFz757TPmeEVMNt6pkC2NPoydmp2NX.9sLlGDzkPjzFJdBH_LLLnl0
 SqaDG3NDXKKeTDj6vqK7lJLliBdTRVaSxjA1x1Y_5xrgposOSgA2P5uTUKKL
 qEyZPI8vYezhdOvTcpXkfYx.vZKMGLglschDARY1KQcAwtwLgRGbcSTwXMMn
 1sLjYDBeELtlHkP4Gfv62dxg7Lx.T75sY6WoWKj0GB.qZd1MkhGjZaPFKvzr
 _jiswBzD7Oz1Vslv2Fdk.IQkS8LK_zt6LXVCxI8o1FuZ.rv.DA6mJWC15g.N
 i7qFazkt8Pb.dK4R2Wzb1IU.d5nD0u5ekd.Hbk3RvrTBIwBXGWekgsbLHeJA
 uVVOoM.6pbK4xwB2ml7CIKlH0CqKIuwi6O3jCsJW7M.f2lOw3wS.wacBt4Dq
 .Ly3x74ni5yvzO68YkXUGwatFbq_3q104DSmzoEBEIZ4zWNnEb3xU5g5pEUM
 1P8sWTv0Z5PAc_c5t1_kSIxLgdU5o7cAZC6_rlqIl
Received: from [71.129.37.104] by web125505.mail.ne1.yahoo.com via HTTP; Sat, 28 Apr 2012 09:57:55 PDT
X-Mailer: YahooMailWebService/0.8.118.349524
References: <4F9B79B5.3060203@poonam.org> <CAOHnQjoPb=OY07P27GLrH6jpwJWfaxnrek1CCAf+h4CdyZH_Og@mail.gmail.com> <4F9BD526.2090100@ice-sa.com> 
Message-ID: <1335632275.59879.YahooMailNeo@web125505.mail.ne1.yahoo.com>
Date: Sat, 28 Apr 2012 09:57:55 -0700 (PDT)
From: Mark Eggers <its_toasted@yahoo.com>
Reply-To: Mark Eggers <its_toasted@yahoo.com>
Subject: Re: How to run Tomcat as Service on windows start up.
To: Tomcat Users List <users@tomcat.apache.org>,
  Tomcat Users List <users@tomcat.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

>From: Andr=E9 Warnier <aw@ice-sa.com>=0A>To: Tomcat Users List <users@tomc=
at.apache.org> =0A>Sent: Saturday, April 28, 2012 4:31 AM=0A>Subject: Re: H=
ow to run Tomcat as Service on windows start up.=0A> =0A>Jacques Desodt wro=
te:=0A>> Hi Kiran,=0A>> =0A>> On Windows 7, you can't run batch files as se=
rvices.=0A>> See :=0A>> http://stackoverflow.com/questions/8972679/windows-=
7-bat-file-not-starting-as-a-service=0A>> =0A>> Your first step : compile t=
he .bat file into .exe=0A>> Then create the service, and after change the s=
ervice register values with=0A>> regedit.=0A>=0A>I think that it is a bit m=
ore complicated that that.=0A>A .bat file compiled to a .exe will still not=
 work properly as a Windows service.=0A>=0A>The standard Tomcat installatio=
n for Windows does it right, by providing a correct "service wrapper" for t=
he JVM which runs Tomcat.=0A>The OP would probably, in the end, save himsel=
f some time by installing a proper Tomcat-as-a-Windows-service from the Tom=
cat website, and then arrange for Netbeans to talk to that one.=0A=0A=0ANet=
Beans will not talk to the service very well.=0A=0ANetBeans uses the .bat f=
iles (.sh on Linux / UNIX) to control Tomcat. From within NetBeans you can =
start, stop, and restart Tomcat, or run it in debug mode.=0A=0ANetBeans wil=
l complain that it cannot find the startup.bat and shutdown.bat required to=
 do these tasks if you install the service.=0A=0AWhen I develop, I normally=
 don't run Tomcat as a service. However, there are some systems where I nee=
d to run the service as well as develop. Here's what I do.=0A=0A1. Install =
my primary Tomcat as a service=0A=0AI usually make an Apache directory, and=
 then start installing Tomcat underneath that.=0A=0AI do not register this =
Tomcat with NetBeans since NetBeans cannot really control it properly.=0A=
=0A2. Install development Tomcats=0A=0AI then download the zip files for as=
 many different versions of Tomcat as I need. Each gets unzipped and put in=
 its own directory under the Apache directory.=0A=0A3. Edit files=0A=0Aa. S=
ervice Tomcat=0A=A0 =A0Leave ports at 8080 in server.xml=0A=0A=A0 =A0Edit t=
omcat-users.xml to set up manager-gui access=0A=0Ab. Non-service Tomcats=0A=
=A0 =A0Change shutdown port to be something different than the default 8005=
=0A=A0 =A0Change HTTP port to something different - 8090 perhaps=0A=A0 =A0E=
dit tomcat-users.xml to set up manager-script for NetBeans=0A=A0 =A0 =A0 If=
 this is pre-7 Tomcat, set up manager for NetBeans=0A=0A4. Register Tomcats=
 with NetBeans=0A=0AOnly register those Tomcats with NetBeans that you've i=
nstalled by unzipping. Do not register the service Tomcat with NetBeans.=0A=
=0AWhen you're developing, use the registered (non-service) Tomcats. When y=
ou want to run an application outside of NetBeans, use the manager applicat=
ion to deploy the web application to the service Tomct. The WAR file (from =
NetBeans' build command) will be found in Project-Name\dist.=0A=0AThis work=
s for me. I have three Tomcats ( 5.5.35, 6.0.35, 7.0.27) registered with ne=
tBeans 7.1.1 (soon to be 7.1.2). I have a service Tomcat (7.0.27) running s=
eparately.=0A=0A. . . . just my two cents.=0A/mde/

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233831-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sat Apr 28 16:58:32 2012
Return-Path: <users-return-233831-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 73084C431
	for <apmail-tomcat-users-archive@www.apache.org>; Sat, 28 Apr 2012 16:58:32 +0000 (UTC)
Received: (qmail 21498 invoked by uid 500); 28 Apr 2012 16:58:26 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 21416 invoked by uid 500); 28 Apr 2012 16:58:26 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 21385 invoked by uid 99); 28 Apr 2012 16:58:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2012 16:58:26 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=FREEMAIL_FORGED_REPLYTO,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [98.138.91.215] (HELO nm27-vm2.bullet.mail.ne1.yahoo.com) (98.138.91.215)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 28 Apr 2012 16:58:17 +0000
Received: from [98.138.90.57] by nm27.bullet.mail.ne1.yahoo.com with NNFMP; 28 Apr 2012 16:57:55 -0000
Received: from [98.138.87.5] by tm10.bullet.mail.ne1.yahoo.com with NNFMP; 28 Apr 2012 16:57:55 -0000
Received: from [127.0.0.1] by omp1005.mail.ne1.yahoo.com with NNFMP; 28 Apr 2012 16:57:55 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 208366.63920.bm@omp1005.mail.ne1.yahoo.com
Received: (qmail 70404 invoked by uid 60001); 28 Apr 2012 16:57:55 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1335632275; bh=26m9gEJM1NpB2nUcqIT/3//4ZbPzKzU/zAcC3Imf/y0=; h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=BrKZVOAS0Ow60vRVsfGx/l8eZPzmioAD+JsKbDRh2TwrWGog+p2mE1OHWBqs9gJ0FVV8V+QgeOVAS1j4Pga05iNPW45dVrwO+HI3aTZlhwWF9sCdGJ48KYH0w3WOx5PwkFZCs5dmfUOCuTg8z4hblzrTUiNCW+BvRQcG8yR/y3I=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=OODqUBq4PecS8hDFKqOzyJCrjyuLZh3nalJC9ytiDyrTaxM8B9h90mrlzVoTP3juc5+DtofG5DSA4iO3M/Ov/5zaFlVkNGTdv1+vIksD+8Taldqs9qKWBkpdQPK3WLcPv3/cfVkVK7e7SJ/8If5pdI5cg32K7gCkznXAHbVECuU=;
X-YMail-OSG: QPLyfYoVM1kiCrD3HrMdobeO_OKX6Ca_8_6SJ4ikqFOO6Ck
 Puq6wREm84JiNLSd3MPP2skXbqmdesAmyC4Y5QkRzIIRbsr3SKWC6LsHn_x8
 0KlTP.aFz757TPmeEVMNt6pkC2NPoydmp2NX.9sLlGDzkPjzFJdBH_LLLnl0
 SqaDG3NDXKKeTDj6vqK7lJLliBdTRVaSxjA1x1Y_5xrgposOSgA2P5uTUKKL
 qEyZPI8vYezhdOvTcpXkfYx.vZKMGLglschDARY1KQcAwtwLgRGbcSTwXMMn
 1sLjYDBeELtlHkP4Gfv62dxg7Lx.T75sY6WoWKj0GB.qZd1MkhGjZaPFKvzr
 _jiswBzD7Oz1Vslv2Fdk.IQkS8LK_zt6LXVCxI8o1FuZ.rv.DA6mJWC15g.N
 i7qFazkt8Pb.dK4R2Wzb1IU.d5nD0u5ekd.Hbk3RvrTBIwBXGWekgsbLHeJA
 uVVOoM.6pbK4xwB2ml7CIKlH0CqKIuwi6O3jCsJW7M.f2lOw3wS.wacBt4Dq
 .Ly3x74ni5yvzO68YkXUGwatFbq_3q104DSmzoEBEIZ4zWNnEb3xU5g5pEUM
 1P8sWTv0Z5PAc_c5t1_kSIxLgdU5o7cAZC6_rlqIl
Received: from [71.129.37.104] by web125505.mail.ne1.yahoo.com via HTTP; Sat, 28 Apr 2012 09:57:55 PDT
X-Mailer: YahooMailWebService/0.8.118.349524
References: <4F9B79B5.3060203@poonam.org> <CAOHnQjoPb=OY07P27GLrH6jpwJWfaxnrek1CCAf+h4CdyZH_Og@mail.gmail.com> <4F9BD526.2090100@ice-sa.com> 
Message-ID: <1335632275.59879.YahooMailNeo@web125505.mail.ne1.yahoo.com>
Date: Sat, 28 Apr 2012 09:57:55 -0700 (PDT)
From: Mark Eggers <its_toasted@yahoo.com>
Reply-To: Mark Eggers <its_toasted@yahoo.com>
Subject: Re: How to run Tomcat as Service on windows start up.
To: Tomcat Users List <users@tomcat.apache.org>,
  Tomcat Users List <users@tomcat.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

>From: Andr=E9 Warnier <aw@ice-sa.com>=0A>To: Tomcat Users List <users@tomc=
at.apache.org> =0A>Sent: Saturday, April 28, 2012 4:31 AM=0A>Subject: Re: H=
ow to run Tomcat as Service on windows start up.=0A> =0A>Jacques Desodt wro=
te:=0A>> Hi Kiran,=0A>> =0A>> On Windows 7, you can't run batch files as se=
rvices.=0A>> See :=0A>> http://stackoverflow.com/questions/8972679/windows-=
7-bat-file-not-starting-as-a-service=0A>> =0A>> Your first step : compile t=
he .bat file into .exe=0A>> Then create the service, and after change the s=
ervice register values with=0A>> regedit.=0A>=0A>I think that it is a bit m=
ore complicated that that.=0A>A .bat file compiled to a .exe will still not=
 work properly as a Windows service.=0A>=0A>The standard Tomcat installatio=
n for Windows does it right, by providing a correct "service wrapper" for t=
he JVM which runs Tomcat.=0A>The OP would probably, in the end, save himsel=
f some time by installing a proper Tomcat-as-a-Windows-service from the Tom=
cat website, and then arrange for Netbeans to talk to that one.=0A=0A=0ANet=
Beans will not talk to the service very well.=0A=0ANetBeans uses the .bat f=
iles (.sh on Linux / UNIX) to control Tomcat. From within NetBeans you can =
start, stop, and restart Tomcat, or run it in debug mode.=0A=0ANetBeans wil=
l complain that it cannot find the startup.bat and shutdown.bat required to=
 do these tasks if you install the service.=0A=0AWhen I develop, I normally=
 don't run Tomcat as a service. However, there are some systems where I nee=
d to run the service as well as develop. Here's what I do.=0A=0A1. Install =
my primary Tomcat as a service=0A=0AI usually make an Apache directory, and=
 then start installing Tomcat underneath that.=0A=0AI do not register this =
Tomcat with NetBeans since NetBeans cannot really control it properly.=0A=
=0A2. Install development Tomcats=0A=0AI then download the zip files for as=
 many different versions of Tomcat as I need. Each gets unzipped and put in=
 its own directory under the Apache directory.=0A=0A3. Edit files=0A=0Aa. S=
ervice Tomcat=0A=A0 =A0Leave ports at 8080 in server.xml=0A=0A=A0 =A0Edit t=
omcat-users.xml to set up manager-gui access=0A=0Ab. Non-service Tomcats=0A=
=A0 =A0Change shutdown port to be something different than the default 8005=
=0A=A0 =A0Change HTTP port to something different - 8090 perhaps=0A=A0 =A0E=
dit tomcat-users.xml to set up manager-script for NetBeans=0A=A0 =A0 =A0 If=
 this is pre-7 Tomcat, set up manager for NetBeans=0A=0A4. Register Tomcats=
 with NetBeans=0A=0AOnly register those Tomcats with NetBeans that you've i=
nstalled by unzipping. Do not register the service Tomcat with NetBeans.=0A=
=0AWhen you're developing, use the registered (non-service) Tomcats. When y=
ou want to run an application outside of NetBeans, use the manager applicat=
ion to deploy the web application to the service Tomct. The WAR file (from =
NetBeans' build command) will be found in Project-Name\dist.=0A=0AThis work=
s for me. I have three Tomcats ( 5.5.35, 6.0.35, 7.0.27) registered with ne=
tBeans 7.1.1 (soon to be 7.1.2). I have a service Tomcat (7.0.27) running s=
eparately.=0A=0A. . . . just my two cents.=0A/mde/

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233832-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sat Apr 28 17:18:15 2012
Return-Path: <users-return-233832-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 087BAC7B3
	for <apmail-tomcat-users-archive@www.apache.org>; Sat, 28 Apr 2012 17:18:15 +0000 (UTC)
Received: (qmail 65420 invoked by uid 500); 28 Apr 2012 17:18:12 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 65158 invoked by uid 500); 28 Apr 2012 17:18:11 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 65149 invoked by uid 99); 28 Apr 2012 17:18:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2012 17:18:11 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [194.51.201.67] (HELO esa-sf1.esa.gmessaging.net) (194.51.201.67)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2012 17:18:02 +0000
Received: from esa-sf1.esa.gmessaging.net (localhost [127.0.0.1])
	by localhost.esa.gmessaging.net (Postfix) with SMTP id 84D605F9989
	for <users@tomcat.apache.org>; Sat, 28 Apr 2012 19:17:30 +0200 (CEST)
Received: from sciops-mailgw.vilspa.esa.int (sciops-mailgw.vilspa.esa.int [193.147.152.105])
	by esa-sf1.esa.gmessaging.net (Postfix) with ESMTP id 6B5C25F9987
	for <users@tomcat.apache.org>; Sat, 28 Apr 2012 19:17:30 +0200 (CEST)
Received: from sciops.esac.int (scimail.esac.esa.int [193.147.152.87])
	by sciops-mailgw.vilspa.esa.int (Postfix) with ESMTP id 5F6618B8DD
	for <users@tomcat.apache.org>; Sat, 28 Apr 2012 19:17:39 +0200 (CEST)
Received: from [127.0.0.1] (dhcp-131-176-168-115.esac.esa.int [131.176.168.115])
	(authenticated bits=0)
	by sciops.esac.int (8.13.1/8.13.1) with ESMTP id q3SHHccb000760
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <users@tomcat.apache.org>; Sat, 28 Apr 2012 19:17:39 +0200
Message-ID: <8998_1335633450_4F9C262A_8998_16662_1_4F9C2633.9040109@yahoo.es>
Date: Sat, 28 Apr 2012 19:17:39 +0200
From: =?UTF-8?B?TWlndWVsIEdvbnrDoWxleiBDYXN0YcOxb3M=?= <miguel_3_gonzalez@yahoo.es>
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Javamelody and Struts
References: <CBB234E5.2AAB3%darryl.lewis@unsw.edu.au> <4F95B427.9040400@yahoo.es> <4F95B4C9.9010802@christopherschultz.net>
In-Reply-To: <4F95B4C9.9010802@christopherschultz.net>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Antivirus: avast! (VPS 120428-1, 28/04/2012), Outbound message
X-Antivirus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org

On 23/04/2012 22:00, Christopher Schultz wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Miguel,
>
> On 4/23/12 3:57 PM, Miguel Gonzlez Castaos wrote:
>> On 16/04/2012 12:43, Darryl Lewis wrote:
>>> Make sure the monitoring code is before the struts call.
Start over again from scratch.

Same application running in Tomcat 6 but HTTP works fine using a 
javamelody.war deployed war that I access as a central container of the 
monitoring. I can't get access, however, to 
http://myweb/mycontext/monitoring still in this Tomcat 6 server.

Same webapp in Tomcat 5.5, I can't add the listener lines without 
breaking the Struts redirects configured in struts-config.xml

Where should I add the monitoring code and where?

Thanks,

Miguel

This message and any attachments are intended for the use of the addressee or addressees only. The unauthorised disclosure, use, dissemination or copying (either in whole or in part) of its content is not permitted. If you received this message in error, please notify the sender and delete it from your system. Emails can be altered and their integrity cannot be guaranteed by the sender.

Please consider the environment before printing this email.


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233833-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sat Apr 28 20:11:56 2012
Return-Path: <users-return-233833-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 518C4C774
	for <apmail-tomcat-users-archive@www.apache.org>; Sat, 28 Apr 2012 20:11:56 +0000 (UTC)
Received: (qmail 59043 invoked by uid 500); 28 Apr 2012 20:11:53 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 58747 invoked by uid 500); 28 Apr 2012 20:11:52 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 58738 invoked by uid 99); 28 Apr 2012 20:11:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2012 20:11:52 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dgchristensen@comcast.net designates 76.96.30.64 as permitted sender)
Received: from [76.96.30.64] (HELO qmta07.emeryville.ca.mail.comcast.net) (76.96.30.64)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2012 20:11:42 +0000
Received: from omta21.emeryville.ca.mail.comcast.net ([76.96.30.88])
	by qmta07.emeryville.ca.mail.comcast.net with comcast
	id 3Xs61j0021u4NiLA7YBMWN; Sat, 28 Apr 2012 20:11:21 +0000
Received: from sz0170.ev.mail.comcast.net ([76.96.27.99])
	by omta21.emeryville.ca.mail.comcast.net with comcast
	id 3YBL1j00N28HroU8hYBLDZ; Sat, 28 Apr 2012 20:11:20 +0000
Date: Sat, 28 Apr 2012 20:11:20 +0000 (UTC)
From: dgchristensen@comcast.net
To: users@tomcat.apache.org
Message-ID: <1598068298.164850.1335643880788.JavaMail.root@sz0170a.emeryville.ca.mail.comcast.net>
Subject: Running Swing app under Tomcat 6 on Linux
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_164849_1716344286.1335643880787"
X-Originating-IP: [71.234.133.231]
X-Mailer: Zimbra 6.0.13_GA_2944 (ZimbraWebClient - FF3.0 (Win)/6.0.13_GA_2944)

------=_Part_164849_1716344286.1335643880787
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

My version info:=20

    =E2=80=A2 Tomcat 6.0.28=20
    =E2=80=A2 Java 1.6=20
    =E2=80=A2 Ubuntu 10.4=20


I have a small debugging/monitoring app written in Java/Swing that I'd like=
 to run inside Tomcat to help with debugging. The app is started by dynamic=
ally loading the monitoring class from a webservice running under Tomcat. T=
he works in Windows (multiple flavors) but I'm having problems getting this=
 running on Ubuntu. What I've tried so far:=20

1) First error I got was an Headless exception. Since the app is a GUI app =
I can't run in headless mode. After searching around I changed Tomcat's lib=
rary path (via -Djava.library.path in catalina.sh) to point to the client l=
ib (ie. .../java-6-sun-1.6.0.26/jre/lib/i386/client) instead of the server =
lib.=20

2) After changing the libs the next error was that DISPLAY wasn't set. Afte=
r setting DISPLAY=3D0.0 in catalina.sh I get "Can't connect to X11 with DIS=
PLAY=3D0.0" error. I've tried different values for DISPLAY (e.g. localhost:=
0.0) and nothing makes a difference. I've also tried fiddling around with t=
he policies in case there's a permissions error. See below for the call sta=
ck.=20

The webservice app is a simple RESTEasy implementation. Since this works in=
 Windows I'm assuming (perhaps erroneously) that this can work in Linux. An=
y help would be appreciated.=20

Thanks,=20
DG=20

java . lang . InternalError : Can 't connect to X11 window server using ' :=
 0 . 0 ' as the value of the DISPLAY variable.=20
sun.awt.X11GraphicsEnvironment.initDisplay(Native Method)=20
sun.awt.X11GraphicsEnvironment.access$100(X11GraphicsEnvironment.java:52)=
=20
sun.awt.X11GraphicsEnvironment$1.run(X11GraphicsEnvironment.java:155)=20
java.security.AccessController.doPrivileged(Native Method)=20
sun.awt.X11GraphicsEnvironment.<clinit>(X11GraphicsEnvironment.java:131)=20
java.lang.Class.forName0(Native Method)=20
java.lang.Class.forName(Class.java:169)=20
java.awt.GraphicsEnvironment.getLocalGraphicsEnvironment(GraphicsEnvironmen=
t.java:68)=20
java.awt.Window.init(Window.java:380)=20
java.awt.Window.<init>(Window.java:433)=20
java.awt.Frame.<init>(Frame.java:403)=20
java.awt.Frame.<init>(Frame.java:368)=20
javax.swing.JFrame.<init>(JFrame.java:158)=20
com.quinsoft.zeidon.objectbrowser.ObjectBrowser.startup(ObjectBrowser.java:=
60)=20


------=_Part_164849_1716344286.1335643880787--

From users-return-233834-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sat Apr 28 20:51:29 2012
Return-Path: <users-return-233834-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1F92EC8ED
	for <apmail-tomcat-users-archive@www.apache.org>; Sat, 28 Apr 2012 20:51:29 +0000 (UTC)
Received: (qmail 28161 invoked by uid 500); 28 Apr 2012 20:51:25 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 28102 invoked by uid 500); 28 Apr 2012 20:51:25 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 28093 invoked by uid 99); 28 Apr 2012 20:51:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2012 20:51:25 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [216.139.250.139] (HELO joe.nabble.com) (216.139.250.139)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2012 20:51:20 +0000
Received: from alf.nabble.com ([192.168.236.21])
	by joe.nabble.com with esmtp (Exim 4.72)
	(envelope-from <evernat@free.fr>)
	id 1SOEba-0001ho-Ul
	for users@tomcat.apache.org; Sat, 28 Apr 2012 13:50:59 -0700
Date: Sat, 28 Apr 2012 13:50:58 -0700 (PDT)
From: evernat <evernat@free.fr>
To: users@tomcat.apache.org
Message-ID: <1335646258940-4937283.post@n6.nabble.com>
In-Reply-To: <8998_1335633450_4F9C262A_8998_16662_1_4F9C2633.9040109@yahoo.es>
References: <4F8B28C6.4040800@yahoo.es> <CAAcgX+2o1UqVwpRETM+yamah3GNGw4+JROr919X+e_gW7pXs+w@mail.gmail.com> <4F8BCA3B.4020902@yahoo.es> <4F8BCC69.20603@yahoo.es> <CBB234E5.2AAB3%darryl.lewis@unsw.edu.au> <4F95B427.9040400@yahoo.es> <4F95B4C9.9010802@christopherschultz.net> <8998_1335633450_4F9C262A_8998_16662_1_4F9C2633.9040109@yahoo.es>
Subject: Re: Javamelody and Struts
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Miguel,

First, javamelody.war is *optional*. I suggest to try javamelody without
using it.
You may read the user guide for help with this:
http://code.google.com/p/javamelody/wiki/UserGuide
(if you have an exception, please copy the complete stack-trace)

Then, there is an issue with Tomcat 5.5, only if you use javamelody v1.36.
See http://code.google.com/p/javamelody/issues/detail?id=3D207
It will be fixed in v1.37 soon.

Emeric


Miguel Gonz=C3=A1lez Casta=C3=B1os wrote
>=20
> Start over again from scratch.
>=20
> Same application running in Tomcat 6 but HTTP works fine using a=20
> javamelody.war deployed war that I access as a central container of the=
=20
> monitoring. I can't get access, however, to=20
> http://myweb/mycontext/monitoring still in this Tomcat 6 server.
>=20
> Same webapp in Tomcat 5.5, I can't add the listener lines without=20
> breaking the Struts redirects configured in struts-config.xml
>=20
> Where should I add the monitoring code and where?
>=20
> Thanks,
>=20
> Miguel
>=20


--
View this message in context: http://tomcat.10.n6.nabble.com/Javamelody-and=
-Struts-tp4884442p4937283.html
Sent from the Tomcat - User mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233835-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sat Apr 28 21:15:39 2012
Return-Path: <users-return-233835-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 298ADCBD9
	for <apmail-tomcat-users-archive@www.apache.org>; Sat, 28 Apr 2012 21:15:39 +0000 (UTC)
Received: (qmail 72935 invoked by uid 500); 28 Apr 2012 21:15:35 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 72747 invoked by uid 500); 28 Apr 2012 21:15:35 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 72737 invoked by uid 99); 28 Apr 2012 21:15:35 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2012 21:15:35 +0000
Received: from localhost (HELO mail-yx0-f173.google.com) (127.0.0.1)
  (smtp-auth username olamy, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2012 21:15:35 +0000
Received: by yenr5 with SMTP id r5so1173993yen.18
        for <users@tomcat.apache.org>; Sat, 28 Apr 2012 14:15:34 -0700 (PDT)
Received: by 10.236.161.42 with SMTP id v30mr10490650yhk.127.1335647734456;
 Sat, 28 Apr 2012 14:15:34 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.100.14.18 with HTTP; Sat, 28 Apr 2012 14:15:14 -0700 (PDT)
In-Reply-To: <CANnp+Au8etMBDyiUqRZQ7z1PL-bUTNEdDhhynT=Ov7PAtivq1g@mail.gmail.com>
References: <CANnp+Av13q0zmbssmieoQ1_L675DOyrTx5wDc7VkoCp98ksBjw@mail.gmail.com>
 <CAPoyBqTgaQh65qxGG6e8teCn8NVy2_KH65Z7_RJNRbTLK_4isA@mail.gmail.com>
 <CANnp+AtkKfJs5wM1HoKs88eydJ4Ha1AB2uysgcATm70m-7Ooiw@mail.gmail.com>
 <CAPoyBqSCBSCDxMC_V5wnw=zzR4qjAZtEfAYFymcx+zp1o_hiAw@mail.gmail.com> <CANnp+Au8etMBDyiUqRZQ7z1PL-bUTNEdDhhynT=Ov7PAtivq1g@mail.gmail.com>
From: Olivier Lamy <olamy@apache.org>
Date: Sat, 28 Apr 2012 23:15:14 +0200
Message-ID: <CAPoyBqTa4_Mn1hfb1XesLBiRD2UE-dOQwsHYo2zaHTsXErMizw@mail.gmail.com>
Subject: Re: mvn tomcat:deploy fails with HTTP response 401
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Have a look here http://tomcat.apache.org/maven-plugin-2.0-SNAPSHOT/index.h=
tml

there is a section regarding content to add in ~/.m2/settings.xml

or add the plugin declaration in the pom section build>plugins>plugin
(rather than pluginManagement)

HTH
--=20
Olivier Lamy
Talend: http://coders.talend.com
http://twitter.com/olamy | http://linkedin.com/in/olamy

2012/4/28 Henrique Ordine <hordine@gmail.com>:
> Thanks again for your help.
>
> I added <pluginRepositories> to my POM, but if I use tomcat6:deploy or
> tomcat6:run, Maven says:
>
> The plugin 'org.apache.maven.plugins:maven-tomcat6-plugin' does not exist
> or no valid version could be found
>
> I'm using Maven, 2.2.0 by the way.
>
> 2012/4/27 Olivier Lamy <olamy@apache.org>
>
>> Add
>> =A0<pluginRepositories>
>> =A0 =A0<pluginRepository>
>> =A0 =A0 =A0<id>apache.snapshots</id>
>> =A0 =A0 =A0<name>Apache Snapshots</name>
>> =A0 =A0 =A0<url>http://repository.apache.org/content/groups/snapshots-gr=
oup/
>> </url>
>> =A0 =A0 =A0<releases>
>> =A0 =A0 =A0 =A0<enabled>false</enabled>
>> =A0 =A0 =A0</releases>
>> =A0 =A0 =A0<snapshots>
>> =A0 =A0 =A0 =A0<enabled>true</enabled>
>> =A0 =A0 =A0</snapshots>
>> =A0 =A0</pluginRepository>
>> =A0</pluginRepositories>
>>
>> Note now you must use tomcat6:run or tomcat7:run (depending tomcat
>> version you want to use).
>>
>> I'd like to know the command line you are using ? It must be
>> tomcat6:deploy or tomcat7:deploy
>>
>> 2012/4/27 Henrique Ordine <hordine@gmail.com>:
>> > Thanks for your reply.
>> >
>> > I made the changes that you suggested but tomcat:deploy still fails wi=
th
>> the
>> > same error.
>> >
>> > tomcat:run works, but it was already working before.
>> >
>> > My POM file is attached, if you could have a look at it, it would be
>> great.
>> > It's a small POM, I've only just started my App.
>> >
>> > Thanks in advance,
>> >
>> > Op 27 april 2012 12:14 schreef Olivier Lamy <olamy@apache.org> het
>> volgende:
>> >>
>> >> Hello,
>> >>
>> >> That's something which has been fixed in trunk (I will probably
>> >> release a 2.0 next week).
>> >>
>> >>
>> >> 2012/4/27 Henrique Ordine <hordine@gmail.com>:
>> >> > Hi everybody,
>> >> >
>> >> > I'm trying to deploy my Maven Web App on my local Tomcat using the
>> >> > tomcat:deploy maven plugin, but the Manager application fails with =
a
>> >> > response code 401.
>> >> >
>> >> > I have Tomcat 6 installed on Mac OS Leopard, with Java 1.5. I manag=
e
>> to
>> >> > access my Tomcat/manager app with the user "hordine", that I
>> configured
>> >> > and
>> >> > deploy
>> >> >
>> >> > I've configured my tomcat-users.xml, settings.xml, and POM files, l=
ike
>> >> > this:
>> >> >
>> >> > I've added this user to my tomcat-users.xml:
>> >> > =A0<role rolename=3D"tomcat"/>
>> >> > =A0<role rolename=3D"manager"/>
>> >> > =A0<role rolename=3D"manager-script"/>
>> >> > =A0<user username=3D"tomcat" password=3D"tomcat" roles=3D"tomcat"/>
>> >> > =A0<user username=3D"maventomcat" password=3D"maventomcat" roles=3D=
"manager"/>
>> >> > =A0<user username=3D"hordine" password=3D"hordine" roles=3D"manager=
,
>> >> > manager-script"/>
>> >> >
>> >> >
>> >> > I've added this server to my settings.xml:
>> >> > <servers>
>> >> > =A0 =A0<server>
>> >> > =A0 =A0 =A0 =A0<id>hordineLocalTomcat</id>
>> >> > =A0 =A0 =A0 =A0<username>hordine</username>
>> >> > =A0 =A0 =A0 =A0<password>hordine</password>
>> >> > =A0 =A0</server>
>> >> > </servers>
>> >> >
>> >> > And I've configured my POM like this:
>> >> >
>> >> > <build>
>> >> >
>> >> > <finalName>hTask-web</finalName>
>> >> >
>> >> > =A0<pluginManagement>
>> >> >
>> >> > =A0<plugins>
>> >> >
>> >> > =A0<plugin>
>> >> >
>> >> > =A0 =A0 =A0 =A0 <groupId>org.apache.tomcat.maven</groupId>
>> >> >
>> >> > =A0 =A0 =A0 =A0 =A0 <artifactId>tomcat-maven-plugin</artifactId>
>> >> >
>> >> > =A0 =A0 =A0 =A0 =A0 <version>1.1</version>
>> >>
>> >> Sure of that ????
>> >>
>> >> But to test if your issue is fixed in trunk try
>> >> <version>2.0-SNAPSHOT</version>
>> >>
>> >> see mojo declaration and repositories here:
>> >> http://tomcat.apache.org/maven-plugin-2.0-SNAPSHOT/snapshot-test.html
>> >>
>> >> >
>> >> > =A0 =A0 =A0 =A0 =A0 <configuration>
>> >> >
>> >> > =A0 <url>http://localhost:8080/manager</url>
>> >> >
>> >> > =A0 <server>hordineLocalTomcat</server>
>> >> >
>> >> > =A0 <path>/hTask-web</path>
>> >> >
>> >> > =A0</configuration>
>> >> >
>> >> > =A0</plugin>
>> >> >
>> >> > =A0</plugins>
>> >> >
>> >> > =A0</pluginManagement>
>> >> >
>> >> > </build>
>> >> >
>> >> >
>> >> > I'd appreciate any help.
>> >> >
>> >> > This is the entire error's stack trace:
>> >> >
>> >> > Embedded error: Server returned HTTP response code: 401 for URL:
>> >> > http://localhost:8080/manager/deploy?path=3D%2FhTask-web&war=3D
>> >> > [INFO]
>> >> >
>> ------------------------------------------------------------------------
>> >> > [INFO] Trace
>> >> > org.apache.maven.lifecycle.LifecycleExecutionException: Cannot invo=
ke
>> >> > Tomcat manager
>> >> > at
>> >> >
>> >> >
>> org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(Default=
LifecycleExecutor.java:703)
>> >> > at
>> >> >
>> >> >
>> org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeStandaloneGoa=
l(DefaultLifecycleExecutor.java:553)
>> >> > at
>> >> >
>> >> >
>> org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultL=
ifecycleExecutor.java:523)
>> >> > at
>> >> >
>> >> >
>> org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandle=
Failures(DefaultLifecycleExecutor.java:371)
>> >> > at
>> >> >
>> >> >
>> org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(=
DefaultLifecycleExecutor.java:332)
>> >> > at
>> >> >
>> >> >
>> org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifec=
ycleExecutor.java:181)
>> >> > at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:356)
>> >> > at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:137)
>> >> > at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
>> >> > at
>> >> >
>> org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:41)
>> >> > at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>> >> > at
>> >> >
>> >> >
>> sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.jav=
a:39)
>> >> > at
>> >> >
>> >> >
>> sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessor=
Impl.java:25)
>> >> > at java.lang.reflect.Method.invoke(Method.java:592)
>> >> > at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:3=
15)
>> >> > at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
>> >> > at
>> org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
>> >> > at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
>> >> > Caused by: org.apache.maven.plugin.MojoExecutionException: Cannot
>> invoke
>> >> > Tomcat manager
>> >> > at
>> >> >
>> >> >
>> org.codehaus.mojo.tomcat.AbstractCatalinaMojo.execute(AbstractCatalinaMo=
jo.java:149)
>> >> > at
>> >> >
>> >> >
>> org.codehaus.mojo.tomcat.AbstractWarCatalinaMojo.execute(AbstractWarCata=
linaMojo.java:70)
>> >> > at
>> >> >
>> >> >
>> org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginMa=
nager.java:483)
>> >> > at
>> >> >
>> >> >
>> org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(Default=
LifecycleExecutor.java:678)
>> >> > ... 17 more
>> >> > Caused by: java.io.IOException: Server returned HTTP response code:
>> 401
>> >> > for
>> >> > URL: http://localhost:8080/manager/deploy?path=3D%2FhTask-web&war=
=3D
>> >> > at
>> >> >
>> >> >
>> sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnec=
tion.java:1196)
>> >> > at
>> org.codehaus.mojo.tomcat.TomcatManager.invoke(TomcatManager.java:604)
>> >> > at
>> >> >
>> org.codehaus.mojo.tomcat.TomcatManager.deployImpl(TomcatManager.java:662=
)
>> >> > at
>> org.codehaus.mojo.tomcat.TomcatManager.deploy(TomcatManager.java:295)
>> >> > at
>> >> >
>> >> >
>> org.codehaus.mojo.tomcat.AbstractDeployWarMojo.deployWar(AbstractDeployW=
arMojo.java:85)
>> >> > at
>> >> >
>> >> >
>> org.codehaus.mojo.tomcat.AbstractDeployMojo.invokeManager(AbstractDeploy=
Mojo.java:85)
>> >> > at
>> >> >
>> >> >
>> org.codehaus.mojo.tomcat.AbstractCatalinaMojo.execute(AbstractCatalinaMo=
jo.java:141)
>> >> > ... 20 more
>> >> >
>> >> >
>> >> > --
>> >> > Henrique Ordine
>> >> >
>> >> > http://hordine.wordpress.com/
>> >>
>> >>
>> >>
>> >> --
>> >> Olivier Lamy
>> >> Talend: http://coders.talend.com
>> >> http://twitter.com/olamy | http://linkedin.com/in/olamy
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>> >> For additional commands, e-mail: users-help@tomcat.apache.org
>> >>
>> >
>> >
>> >
>> > --
>> > Henrique Ordine
>> >
>> > http://hordine.wordpress.com/
>> >
>> >
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>> > For additional commands, e-mail: users-help@tomcat.apache.org
>>
>>
>>
>> --
>> Olivier Lamy
>> Talend: http://coders.talend.com
>> http://twitter.com/olamy | http://linkedin.com/in/olamy
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>> For additional commands, e-mail: users-help@tomcat.apache.org
>>
>>
>
>
> --
> Henrique Ordine
>
> http://hordine.wordpress.com/

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233836-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sat Apr 28 21:25:08 2012
Return-Path: <users-return-233836-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 585409556
	for <apmail-tomcat-users-archive@www.apache.org>; Sat, 28 Apr 2012 21:25:08 +0000 (UTC)
Received: (qmail 92392 invoked by uid 500); 28 Apr 2012 21:25:05 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 92308 invoked by uid 500); 28 Apr 2012 21:25:04 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 92298 invoked by uid 99); 28 Apr 2012 21:25:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2012 21:25:04 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of hordine@gmail.com designates 209.85.210.173 as permitted sender)
Received: from [209.85.210.173] (HELO mail-iy0-f173.google.com) (209.85.210.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2012 21:24:58 +0000
Received: by iafj26 with SMTP id j26so3497883iaf.18
        for <users@tomcat.apache.org>; Sat, 28 Apr 2012 14:24:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=8ZhmIfA1w6pHKVXgcOm8rKhy0ionT+0tezu3ajGJcqk=;
        b=oVCU7bqHy6f3rlnMIxMR7CzNig6RLCGMVNa8a8jattcqnjA136vQQB0jKEk2jbZlUN
         segg+oGGw3SgmdqezFZig0v6H03/Ye+5IpO1O6+yWd0AJfjwTDZuVLP/iTto/QI3ctop
         LGJ6xLbjMLshgTxQJbXwg2aIMwSL8Elgyh1tV8sVLKyjxOQEZiK5mrBy+0f+BoN/bkN3
         S+abESMW4SBtdsJGJSuEZIiOcRMrFD27NZPtxGifW4jE8gW1SMwZLDYeQ8h6FP6VPjhM
         4q7Khk1nlYGVOT+y14cUDTDeENAN7spoHMCTTr7IvT3AW5y5dvTFsoueqtvO1o59tZSb
         RQ7w==
MIME-Version: 1.0
Received: by 10.50.168.8 with SMTP id zs8mr6698748igb.37.1335648276694; Sat,
 28 Apr 2012 14:24:36 -0700 (PDT)
Received: by 10.50.57.131 with HTTP; Sat, 28 Apr 2012 14:24:36 -0700 (PDT)
In-Reply-To: <CAPoyBqTa4_Mn1hfb1XesLBiRD2UE-dOQwsHYo2zaHTsXErMizw@mail.gmail.com>
References: <CANnp+Av13q0zmbssmieoQ1_L675DOyrTx5wDc7VkoCp98ksBjw@mail.gmail.com>
	<CAPoyBqTgaQh65qxGG6e8teCn8NVy2_KH65Z7_RJNRbTLK_4isA@mail.gmail.com>
	<CANnp+AtkKfJs5wM1HoKs88eydJ4Ha1AB2uysgcATm70m-7Ooiw@mail.gmail.com>
	<CAPoyBqSCBSCDxMC_V5wnw=zzR4qjAZtEfAYFymcx+zp1o_hiAw@mail.gmail.com>
	<CANnp+Au8etMBDyiUqRZQ7z1PL-bUTNEdDhhynT=Ov7PAtivq1g@mail.gmail.com>
	<CAPoyBqTa4_Mn1hfb1XesLBiRD2UE-dOQwsHYo2zaHTsXErMizw@mail.gmail.com>
Date: Sat, 28 Apr 2012 23:24:36 +0200
Message-ID: <CANnp+AvAN544JskYk8npVAfwzVms3mH0vu4YTW_53fZDYmnMcw@mail.gmail.com>
Subject: Re: mvn tomcat:deploy fails with HTTP response 401
From: Henrique Ordine <hordine@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=e89a8f838cd113c62d04bec3d98b

--e89a8f838cd113c62d04bec3d98b
Content-Type: text/plain; charset=ISO-8859-1

Awesome! I added the pluginGroup and it worked now.

Thank you!

2012/4/28 Olivier Lamy <olamy@apache.org>

> Have a look here
> http://tomcat.apache.org/maven-plugin-2.0-SNAPSHOT/index.html
>
> there is a section regarding content to add in ~/.m2/settings.xml
>
> or add the plugin declaration in the pom section build>plugins>plugin
> (rather than pluginManagement)
>
> HTH
> --
> Olivier Lamy
> Talend: http://coders.talend.com
> http://twitter.com/olamy | http://linkedin.com/in/olamy
>
> 2012/4/28 Henrique Ordine <hordine@gmail.com>:
> > Thanks again for your help.
> >
> > I added <pluginRepositories> to my POM, but if I use tomcat6:deploy or
> > tomcat6:run, Maven says:
> >
> > The plugin 'org.apache.maven.plugins:maven-tomcat6-plugin' does not exist
> > or no valid version could be found
> >
> > I'm using Maven, 2.2.0 by the way.
> >
> > 2012/4/27 Olivier Lamy <olamy@apache.org>
> >
> >> Add
> >>  <pluginRepositories>
> >>    <pluginRepository>
> >>      <id>apache.snapshots</id>
> >>      <name>Apache Snapshots</name>
> >>      <url>http://repository.apache.org/content/groups/snapshots-group/
> >> </url>
> >>      <releases>
> >>        <enabled>false</enabled>
> >>      </releases>
> >>      <snapshots>
> >>        <enabled>true</enabled>
> >>      </snapshots>
> >>    </pluginRepository>
> >>  </pluginRepositories>
> >>
> >> Note now you must use tomcat6:run or tomcat7:run (depending tomcat
> >> version you want to use).
> >>
> >> I'd like to know the command line you are using ? It must be
> >> tomcat6:deploy or tomcat7:deploy
> >>
> >> 2012/4/27 Henrique Ordine <hordine@gmail.com>:
> >> > Thanks for your reply.
> >> >
> >> > I made the changes that you suggested but tomcat:deploy still fails
> with
> >> the
> >> > same error.
> >> >
> >> > tomcat:run works, but it was already working before.
> >> >
> >> > My POM file is attached, if you could have a look at it, it would be
> >> great.
> >> > It's a small POM, I've only just started my App.
> >> >
> >> > Thanks in advance,
> >> >
> >> > Op 27 april 2012 12:14 schreef Olivier Lamy <olamy@apache.org> het
> >> volgende:
> >> >>
> >> >> Hello,
> >> >>
> >> >> That's something which has been fixed in trunk (I will probably
> >> >> release a 2.0 next week).
> >> >>
> >> >>
> >> >> 2012/4/27 Henrique Ordine <hordine@gmail.com>:
> >> >> > Hi everybody,
> >> >> >
> >> >> > I'm trying to deploy my Maven Web App on my local Tomcat using the
> >> >> > tomcat:deploy maven plugin, but the Manager application fails with
> a
> >> >> > response code 401.
> >> >> >
> >> >> > I have Tomcat 6 installed on Mac OS Leopard, with Java 1.5. I
> manage
> >> to
> >> >> > access my Tomcat/manager app with the user "hordine", that I
> >> configured
> >> >> > and
> >> >> > deploy
> >> >> >
> >> >> > I've configured my tomcat-users.xml, settings.xml, and POM files,
> like
> >> >> > this:
> >> >> >
> >> >> > I've added this user to my tomcat-users.xml:
> >> >> >  <role rolename="tomcat"/>
> >> >> >  <role rolename="manager"/>
> >> >> >  <role rolename="manager-script"/>
> >> >> >  <user username="tomcat" password="tomcat" roles="tomcat"/>
> >> >> >  <user username="maventomcat" password="maventomcat"
> roles="manager"/>
> >> >> >  <user username="hordine" password="hordine" roles="manager,
> >> >> > manager-script"/>
> >> >> >
> >> >> >
> >> >> > I've added this server to my settings.xml:
> >> >> > <servers>
> >> >> >    <server>
> >> >> >        <id>hordineLocalTomcat</id>
> >> >> >        <username>hordine</username>
> >> >> >        <password>hordine</password>
> >> >> >    </server>
> >> >> > </servers>
> >> >> >
> >> >> > And I've configured my POM like this:
> >> >> >
> >> >> > <build>
> >> >> >
> >> >> > <finalName>hTask-web</finalName>
> >> >> >
> >> >> >  <pluginManagement>
> >> >> >
> >> >> >  <plugins>
> >> >> >
> >> >> >  <plugin>
> >> >> >
> >> >> >         <groupId>org.apache.tomcat.maven</groupId>
> >> >> >
> >> >> >           <artifactId>tomcat-maven-plugin</artifactId>
> >> >> >
> >> >> >           <version>1.1</version>
> >> >>
> >> >> Sure of that ????
> >> >>
> >> >> But to test if your issue is fixed in trunk try
> >> >> <version>2.0-SNAPSHOT</version>
> >> >>
> >> >> see mojo declaration and repositories here:
> >> >>
> http://tomcat.apache.org/maven-plugin-2.0-SNAPSHOT/snapshot-test.html
> >> >>
> >> >> >
> >> >> >           <configuration>
> >> >> >
> >> >> >   <url>http://localhost:8080/manager</url>
> >> >> >
> >> >> >   <server>hordineLocalTomcat</server>
> >> >> >
> >> >> >   <path>/hTask-web</path>
> >> >> >
> >> >> >  </configuration>
> >> >> >
> >> >> >  </plugin>
> >> >> >
> >> >> >  </plugins>
> >> >> >
> >> >> >  </pluginManagement>
> >> >> >
> >> >> > </build>
> >> >> >
> >> >> >
> >> >> > I'd appreciate any help.
> >> >> >
> >> >> > This is the entire error's stack trace:
> >> >> >
> >> >> > Embedded error: Server returned HTTP response code: 401 for URL:
> >> >> > http://localhost:8080/manager/deploy?path=%2FhTask-web&war=
> >> >> > [INFO]
> >> >> >
> >> ------------------------------------------------------------------------
> >> >> > [INFO] Trace
> >> >> > org.apache.maven.lifecycle.LifecycleExecutionException: Cannot
> invoke
> >> >> > Tomcat manager
> >> >> > at
> >> >> >
> >> >> >
> >>
> org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:703)
> >> >> > at
> >> >> >
> >> >> >
> >>
> org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeStandaloneGoal(DefaultLifecycleExecutor.java:553)
> >> >> > at
> >> >> >
> >> >> >
> >>
> org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:523)
> >> >> > at
> >> >> >
> >> >> >
> >>
> org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:371)
> >> >> > at
> >> >> >
> >> >> >
> >>
> org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:332)
> >> >> > at
> >> >> >
> >> >> >
> >>
> org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:181)
> >> >> > at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:356)
> >> >> > at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:137)
> >> >> > at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
> >> >> > at
> >> >> >
> >> org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:41)
> >> >> > at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
> >> >> > at
> >> >> >
> >> >> >
> >>
> sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
> >> >> > at
> >> >> >
> >> >> >
> >>
> sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
> >> >> > at java.lang.reflect.Method.invoke(Method.java:592)
> >> >> > at
> org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
> >> >> > at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
> >> >> > at
> >> org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
> >> >> > at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
> >> >> > Caused by: org.apache.maven.plugin.MojoExecutionException: Cannot
> >> invoke
> >> >> > Tomcat manager
> >> >> > at
> >> >> >
> >> >> >
> >>
> org.codehaus.mojo.tomcat.AbstractCatalinaMojo.execute(AbstractCatalinaMojo.java:149)
> >> >> > at
> >> >> >
> >> >> >
> >>
> org.codehaus.mojo.tomcat.AbstractWarCatalinaMojo.execute(AbstractWarCatalinaMojo.java:70)
> >> >> > at
> >> >> >
> >> >> >
> >>
> org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:483)
> >> >> > at
> >> >> >
> >> >> >
> >>
> org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:678)
> >> >> > ... 17 more
> >> >> > Caused by: java.io.IOException: Server returned HTTP response code:
> >> 401
> >> >> > for
> >> >> > URL: http://localhost:8080/manager/deploy?path=%2FhTask-web&war=
> >> >> > at
> >> >> >
> >> >> >
> >>
> sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1196)
> >> >> > at
> >> org.codehaus.mojo.tomcat.TomcatManager.invoke(TomcatManager.java:604)
> >> >> > at
> >> >> >
> >>
> org.codehaus.mojo.tomcat.TomcatManager.deployImpl(TomcatManager.java:662)
> >> >> > at
> >> org.codehaus.mojo.tomcat.TomcatManager.deploy(TomcatManager.java:295)
> >> >> > at
> >> >> >
> >> >> >
> >>
> org.codehaus.mojo.tomcat.AbstractDeployWarMojo.deployWar(AbstractDeployWarMojo.java:85)
> >> >> > at
> >> >> >
> >> >> >
> >>
> org.codehaus.mojo.tomcat.AbstractDeployMojo.invokeManager(AbstractDeployMojo.java:85)
> >> >> > at
> >> >> >
> >> >> >
> >>
> org.codehaus.mojo.tomcat.AbstractCatalinaMojo.execute(AbstractCatalinaMojo.java:141)
> >> >> > ... 20 more
> >> >> >
> >> >> >
> >> >> > --
> >> >> > Henrique Ordine
> >> >> >
> >> >> > http://hordine.wordpress.com/
> >> >>
> >> >>
> >> >>
> >> >> --
> >> >> Olivier Lamy
> >> >> Talend: http://coders.talend.com
> >> >> http://twitter.com/olamy | http://linkedin.com/in/olamy
> >> >>
> >> >> ---------------------------------------------------------------------
> >> >> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> >> >> For additional commands, e-mail: users-help@tomcat.apache.org
> >> >>
> >> >
> >> >
> >> >
> >> > --
> >> > Henrique Ordine
> >> >
> >> > http://hordine.wordpress.com/
> >> >
> >> >
> >> >
> >> >
> >> > ---------------------------------------------------------------------
> >> > To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> >> > For additional commands, e-mail: users-help@tomcat.apache.org
> >>
> >>
> >>
> >> --
> >> Olivier Lamy
> >> Talend: http://coders.talend.com
> >> http://twitter.com/olamy | http://linkedin.com/in/olamy
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> >> For additional commands, e-mail: users-help@tomcat.apache.org
> >>
> >>
> >
> >
> > --
> > Henrique Ordine
> >
> > http://hordine.wordpress.com/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>
>


-- 
Henrique Ordine

http://hordine.wordpress.com/

--e89a8f838cd113c62d04bec3d98b--

From users-return-233837-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sat Apr 28 21:38:43 2012
Return-Path: <users-return-233837-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7E7999DE4
	for <apmail-tomcat-users-archive@www.apache.org>; Sat, 28 Apr 2012 21:38:43 +0000 (UTC)
Received: (qmail 18785 invoked by uid 500); 28 Apr 2012 21:38:40 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 18737 invoked by uid 500); 28 Apr 2012 21:38:40 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 18727 invoked by uid 99); 28 Apr 2012 21:38:40 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2012 21:38:40 +0000
Received: from localhost (HELO mail-yw0-f45.google.com) (127.0.0.1)
  (smtp-auth username olamy, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2012 21:38:39 +0000
Received: by yhoo21 with SMTP id o21so1181689yho.18
        for <users@tomcat.apache.org>; Sat, 28 Apr 2012 14:38:39 -0700 (PDT)
Received: by 10.236.161.42 with SMTP id v30mr10535497yhk.127.1335649119098;
 Sat, 28 Apr 2012 14:38:39 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.100.14.18 with HTTP; Sat, 28 Apr 2012 14:38:18 -0700 (PDT)
In-Reply-To: <CANyrOm6g=a41ufKBfncxd6PvGSUA1M+-nWURpLDKxpBcDOhgJg@mail.gmail.com>
References: <CANyrOm6g=a41ufKBfncxd6PvGSUA1M+-nWURpLDKxpBcDOhgJg@mail.gmail.com>
From: Olivier Lamy <olamy@apache.org>
Date: Sat, 28 Apr 2012 23:38:18 +0200
Message-ID: <CAPoyBqQxhLi0+wCOi0nDjiH6Hy94WaiHPWYryA69vvvEP5tn7w@mail.gmail.com>
Subject: Re: Does Tomcat Maven plugin support WAR overlays ?
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Salut Jeff,

Current Overlay support with tomcat6/7:run is very limited (only use
jars from WEB-INF/lib of the the war dependencies).
Perso, I use maven-dependency-plugin to extract war content (see
sample in this pom [1] ).
I agree it's "hackhish" :-) and having a better support as in the war
plugin could be better.
But didn't yet have any time to work on that. (can you create an issue
for that ?)
As my goal was to cut a release soon (ideally starting release process
next week, I'm not sure I will have time to work on that)

--=20
Olivier Lamy
Talend: http://coders.talend.com
http://twitter.com/olamy | http://linkedin.com/in/olamy

[1] http://svn.apache.org/repos/asf/archiva/trunk/archiva-modules/archiva-w=
eb/archiva-webapp/pom.xml

2012/4/28 Jeff MAURY <jeffmaury@jeffmaury.com>:
> Hello,
>
> I am facing the following problem with WAR overlays:
> I have a first WAR, called skeleton, that contains all necessary stuff:
> base web.xml, index.jsp and JAR dependencies.
> I have another WAR whose first dependency is the skeleton which is (as of
> yet) almost empty except for the slf4j_log4 dependency.
> When i run tomcat7:run on the skeleton, everything is ok
> When I run tomcat7:run on the second war, Tomcat start but I am not able =
to
> use the application.
> I have look at the mojo code and it seems it is using the web app source
> directory (src/main/webapp) by default so as it is empty my case, it cann=
ot
> work.
> AM I missing something ?
>
> Thanks
> Jeff
>
>
> --
> Jeff MAURY
>
>
> "Legacy code" often differs from its suggested alternative by actually
> working and scaling.
> =A0- Bjarne Stroustrup
>
> http://www.jeffmaury.com
> http://riadiscuss.jeffmaury.com
> http://www.twitter.com/jeffmaury
>
>
> --
> Jeff MAURY
>
>
> "Legacy code" often differs from its suggested alternative by actually
> working and scaling.
> =A0- Bjarne Stroustrup
>
> http://www.jeffmaury.com
> http://riadiscuss.jeffmaury.com
> http://www.twitter.com/jeffmaury

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233838-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sat Apr 28 22:04:49 2012
Return-Path: <users-return-233838-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3D57AC1EE
	for <apmail-tomcat-users-archive@www.apache.org>; Sat, 28 Apr 2012 22:04:49 +0000 (UTC)
Received: (qmail 68833 invoked by uid 500); 28 Apr 2012 22:04:46 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 68635 invoked by uid 500); 28 Apr 2012 22:04:46 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 68626 invoked by uid 99); 28 Apr 2012 22:04:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2012 22:04:46 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aw@ice-sa.com designates 212.85.38.228 as permitted sender)
Received: from [212.85.38.228] (HELO tor.combios.es) (212.85.38.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2012 22:04:38 +0000
Received: from [192.168.245.129] (p549E108B.dip0.t-ipconnect.de [84.158.16.139])
	by tor.combios.es (Postfix) with ESMTPA id 1154ADA070B
	for <users@tomcat.apache.org>; Sun, 29 Apr 2012 00:04:14 +0200 (CEST)
Message-ID: <4F9C6959.2050006@ice-sa.com>
Date: Sun, 29 Apr 2012 00:04:09 +0200
From: =?ISO-8859-1?Q?Andr=E9_Warnier?= <aw@ice-sa.com>
Reply-To: Tomcat Users List <users@tomcat.apache.org>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: multiple mod_jk server mappings and JSESSIONID
References: <SNT129-DS151B4EFF626A36436F5897A42A0@phx.gbl>
In-Reply-To: <SNT129-DS151B4EFF626A36436F5897A42A0@phx.gbl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Mike Wilson wrote:
> I need to set up a configuration where a site's path space 
> gets distributed over two servers and I'm looking at using 
> mod_jk like this:
> 
>   Apache httpd
>     mod_jk
>       workers.properties
>         workerA -> serverA
>         workerB -> serverB
>       uriworkermap.properties
>         /*       = serverA
>         /path2/* = serverB
>         /path3/* = serverB
>         /path3/xyz/* = serverA
> 

You may have a problem with the above mappings, since
/* overlaps everything, and /path3/* overlaps /path3/xyz/*.
I am not sure that mod_jk mappings follow the principle of "longest match wins".

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233839-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sat Apr 28 22:50:39 2012
Return-Path: <users-return-233839-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D1DF2C0EE
	for <apmail-tomcat-users-archive@www.apache.org>; Sat, 28 Apr 2012 22:50:39 +0000 (UTC)
Received: (qmail 45130 invoked by uid 500); 28 Apr 2012 22:50:36 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 44949 invoked by uid 500); 28 Apr 2012 22:50:36 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 44940 invoked by uid 99); 28 Apr 2012 22:50:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 28 Apr 2012 22:50:36 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.138.91.39] (HELO nm2-vm0.bullet.mail.ne1.yahoo.com) (98.138.91.39)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 28 Apr 2012 22:50:28 +0000
Received: from [98.138.90.56] by nm2.bullet.mail.ne1.yahoo.com with NNFMP; 28 Apr 2012 22:50:07 -0000
Received: from [98.138.89.199] by tm9.bullet.mail.ne1.yahoo.com with NNFMP; 28 Apr 2012 22:50:07 -0000
Received: from [127.0.0.1] by omp1057.mail.ne1.yahoo.com with NNFMP; 28 Apr 2012 22:50:07 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 682870.65749.bm@omp1057.mail.ne1.yahoo.com
Received: (qmail 48819 invoked by uid 60001); 28 Apr 2012 22:50:07 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1335653407; bh=cVaE8mUePjz88zXB9AUVGFO/zcDRY8HKP9DPiiHyRIc=; h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=Qg40H42T08Sgh9Uhv2aaaKKIgBp+GviC9gkC19S4iU1IT9LwHrgrLwVODRfs/6y7vNHRoD60jfGIuiKcNoDTw2pJVNIjECM9H6qZXqWmcutqBQfJL7DqfBIF3PUAeDaP9eeQPl2vsVmK0BiEqP76DqAk+39QKwBYSfH42IkSifY=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=hWNGznJB//vnUD+LA52ZGLtFIONB8R4I3A9smuyifQcUQLkSvocQMkZnj4zR3S9x1eX0eg6UPjPD3HAg8L8Y/8zSw3xjnbG0K8q/2F0YS062eoN+xWwiR922jsr5KJtOpGrDUm5UIFBOKjvf84p2/dlQ9s5ry8+ckc577G+QfBE=;
X-YMail-OSG: DscmmRUVM1m3SNyasvbq_gDDd8gdntjURKb_ItbPwrR.1zN
 FNR4oBJvllXZX1kPIWAszoIiE.2gcoFzw11YjdofavEqV4eYT8EjUpxLbMdV
 NTtnJLbpb91M77TXlmFCUrbmwLQtuiPL9qHvaAM1wTqTptrQv3uGj1aqU2Sl
 mKlPllePZCGUfJrwT5v4W5isks0qQ.l.u1_lIjwEgF0ZyC1yFAtErQHTctqg
 2FEVsrUSehyyHh6Ox2Jq8alZHM0r_VK3ZshamKw7DbrgblAVLZbrHCN20rrf
 LqTiHv74zhFEPPn2o7kIHpo20ozK5bE.mUvGVjrD7YCPkGUWCLaz7tlSQPrQ
 qFdK6FdC9kzk0TqQaW28VnTGtzDJV3LvgW.b.nGvE5f.BZqoQasM2a.3e50V
 YchhrNIZHfPBoBZZ08DRy9Ff9dgeMjilY5O3CSzMdQ9cHOIarGUYRx3.m3Zn
 Avg0QpJvt600zeeM47GoN2E6ZPxDEm5E_F9UitwhQ85l2y_Q7lMu8ZNkgMea
 W8TcOi8Jg1CL7z_ulfIYqODoWJA38tOGobPaBQ24L8fy_kSIMVvC20zgJ.Ev
 EroTMyLs6T5mf
Received: from [71.129.37.104] by web125502.mail.ne1.yahoo.com via HTTP; Sat, 28 Apr 2012 15:50:07 PDT
X-Mailer: YahooMailWebService/0.8.118.349524
References: <1598068298.164850.1335643880788.JavaMail.root@sz0170a.emeryville.ca.mail.comcast.net> 
Message-ID: <1335653407.47627.YahooMailNeo@web125502.mail.ne1.yahoo.com>
Date: Sat, 28 Apr 2012 15:50:07 -0700 (PDT)
From: Mark Eggers <its_toasted@yahoo.com>
Reply-To: Mark Eggers <its_toasted@yahoo.com>
Subject: Re: Running Swing app under Tomcat 6 on Linux
To: Tomcat Users List <users@tomcat.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Comments and questions are in line. Please note I run Fedora / CentOS / Red=
hat and I'm not so familiar with Ubuntu.=0A=0A----- Original Message -----=
=0A=0A> From: "dgchristensen@comcast.net" <dgchristensen@comcast.net>=0A> T=
o: users@tomcat.apache.org=0A> Cc: =0A> Sent: Saturday, April 28, 2012 1:11=
 PM=0A> Subject: Running Swing app under Tomcat 6 on Linux=0A> =0A> My vers=
ion info: =0A> =0A> =C2=A0 =C2=A0 =E2=80=A2 Tomcat 6.0.28 =0A> =C2=A0 =C2=
=A0 =E2=80=A2 Java 1.6 =0A> =C2=A0 =C2=A0 =E2=80=A2 Ubuntu 10.4 =0A> =0A> =
=0A> I have a small debugging/monitoring app written in Java/Swing that I'd=
 like =0A> to run inside Tomcat to help with debugging. The app is started =
by=0A> dynamically =C2=A0loading the monitoring class from a webservice run=
ning under=0A> Tomcat. The works in Windows (multiple flavors) but I'm havi=
ng problems=0A> getting this running on Ubuntu. What I've tried so far:=C2=
=A0=0A=0AWhat does this give you that monitoring the application via JMX (s=
ee VisualVM, jconsole), and debugging with your favorite IDE (NetBeans, Ecl=
ipse, IntelliJ) doesn't give you? You can actually do both locally as well =
as remotely (with a little bit of setup).=0A=0A> =0A> 1) First error I got =
was an Headless exception. Since the app is a GUI app I =0A> can't run in h=
eadless mode. After searching around I changed Tomcat's =0A> library path (=
via -Djava.library.path in catalina.sh) to point to the=C2=A0=0A> client=C2=
=A0lib=C2=A0(ie. .../java-6-sun-1.6.0.26/jre/lib/i386/client) instead of th=
e=0A> server lib.=C2=A0=0A=0ATry setting JRE_HOME in the environment to poi=
nt to a JRE installation instead. Or use JAVA_HOME and point to the JDK. To=
mcat will figure things out.=0A=0AIf your environment is not set up by defa=
ult to do that (mine is with custom.sh in /etc/profiles.d), create and use =
a setenv.sh script in CATALINA_HOME. In this set any CATALINA_OPTS, JAVA_OP=
TS, and other environment variables you need to.=0A=0A> =0A> 2) After chang=
ing the libs the next error was that DISPLAY wasn't set. After =0A> setting=
 DISPLAY=3D0.0 in catalina.sh I get "Can't connect to X11 with =0A> DISPLAY=
=3D0.0" error. I've tried different values for DISPLAY (e.g. =0A> localhost=
:0.0) and nothing makes a difference. I've also tried fiddling =0A> around =
with the policies in case there's a permissions error. See below for =0A> t=
he call stack. =0A=0AAre you running an X server? By that, are I mean is Ub=
untu showing up in whatever GUI you've chosen (I guess Gnome 2 is that vers=
ion's default)?=0A=0AIf you only have a command line interface, then there'=
s no place to create the screen. You can play games with a virtual frame bu=
ffer, but that will just allow your program to run, but without any screen =
output (obviously).=0A=0AAgain, don't set the DISPLAY environment variable =
in catalina.sh. Set this in setenv.sh in the bin directory of CATALINA_HOME=
. There are lots of scenarios here. Three common ones come to mind.=0A=0A1.=
 Local X server=0A=0AYou're at the console and running in a GUI environment=
. The display environment variable should already be set (typically :0.0). =
If you start Tomcat with your application in this environment, the GUI inte=
rface should just appear.=0A=0A2. Remote client, accessing the GUI via a VN=
C server (such as TightVNC)=0A=0AYour display environment should already be=
 set. For example, I'm currently on a remote CentOS 5.8 system via VNC. My =
DISPLAY environment variable is set to :0.2. If you start Tomcat with your =
application in this environment, the GUI interface should just appear in th=
e VNC viewer (for example TightVNC).=0A=0A3. Remote client, X server=0A=0AN=
ote that an X server means your PC is serving the screen, keyboard, and mou=
se to a remote client (your application). To accomplish this you'll have to=
 have an X server running (if you're on Windows, try XMing), and you'll hav=
e to set the DISPLAY variable appropriately. Running Java swing application=
s in this fashion is not very pleasant especially if your program is graphi=
cs-intensive.=0A=0A> The webservice app is a simple RESTEasy implementation=
. Since this works in =0A> Windows I'm assuming (perhaps erroneously) that =
this can work in Linux. Any =0A> help would be appreciated. =0A> =0A> Thank=
s, =0A> DG =0A> =0A> java . lang . InternalError : Can 't connect to X11 wi=
ndow server using =0A> ' : 0 . 0 ' as the value of the DISPLAY variable. =
=0A> sun.awt.X11GraphicsEnvironment.initDisplay(Native Method) =0A> sun.awt=
.X11GraphicsEnvironment.access$100(X11GraphicsEnvironment.java:52) =0A> sun=
.awt.X11GraphicsEnvironment$1.run(X11GraphicsEnvironment.java:155) =0A> jav=
a.security.AccessController.doPrivileged(Native Method) =0A> sun.awt.X11Gra=
phicsEnvironment.<clinit>(X11GraphicsEnvironment.java:131) =0A> java.lang.C=
lass.forName0(Native Method) =0A> java.lang.Class.forName(Class.java:169) =
=0A> java.awt.GraphicsEnvironment.getLocalGraphicsEnvironment(GraphicsEnvir=
onment.java:68) =0A> =0A> java.awt.Window.init(Window.java:380) =0A> java.a=
wt.Window.<init>(Window.java:433) =0A> java.awt.Frame.<init>(Frame.java:403=
) =0A> java.awt.Frame.<init>(Frame.java:368) =0A> javax.swing.JFrame.<init>=
(JFrame.java:158) =0A> com.quinsoft.zeidon.objectbrowser.ObjectBrowser.star=
tup(ObjectBrowser.java:60) =0A>=0A=0A=0AThis should work just fine if you'r=
e running an X server on your Ubuntu system. The DISPLAY environment variab=
le should be :0.0 (no spaces) for a local machine.=0A=0A. . . . just my two=
 cents.=0A/mde/

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233840-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sun Apr 29 01:15:35 2012
Return-Path: <users-return-233840-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2EC24C63F
	for <apmail-tomcat-users-archive@www.apache.org>; Sun, 29 Apr 2012 01:15:35 +0000 (UTC)
Received: (qmail 67784 invoked by uid 500); 29 Apr 2012 01:15:31 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 67534 invoked by uid 500); 29 Apr 2012 01:15:31 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 67524 invoked by uid 99); 29 Apr 2012 01:15:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Apr 2012 01:15:31 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of knst.kolinko@gmail.com designates 209.85.213.45 as permitted sender)
Received: from [209.85.213.45] (HELO mail-yw0-f45.google.com) (209.85.213.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Apr 2012 01:15:26 +0000
Received: by yhoo21 with SMTP id o21so1206434yho.18
        for <users@tomcat.apache.org>; Sat, 28 Apr 2012 18:15:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=cjCJ/UEbvKPGs+iZqaO0EB6STuWOUw2bFbYB2FysFfg=;
        b=XeDW8XRQgFIEV3ZLw6lIiOyoRPpn2I3t5OqJyFxQX8354CuGobCSch9fFiif7Csvjt
         9T+ZaZxXhZOaGfqJzRLTmBE0I5ejAS2cTx1dlSV7WY4BPk2ipulcDiG1XtUzbQ9oLI8+
         8XNFqABJwTHegLnNebUGG2FWRJSGS5A/aJVbAl0hHM+Muh1kpbRKS+GSmY4+VHnPTD+I
         tSrOzKF5pmnfqnG5lWw/2f9JFshOviPRyGX3mHC77cykJ1gP+9FJ4mpxq/V61l1LtB+m
         6/1nyU7iVyzUvEP7AticyVWrwV/GGqOL5B/xNxWAA1j3L29yZnskbjLXAID3jHxz5Vzi
         jrzw==
MIME-Version: 1.0
Received: by 10.236.182.74 with SMTP id n50mr4977753yhm.106.1335662105868;
 Sat, 28 Apr 2012 18:15:05 -0700 (PDT)
Received: by 10.146.161.7 with HTTP; Sat, 28 Apr 2012 18:15:05 -0700 (PDT)
In-Reply-To: <4F99AE7B.5080609@christopherschultz.net>
References: <4F99AE7B.5080609@christopherschultz.net>
Date: Sun, 29 Apr 2012 05:15:05 +0400
Message-ID: <CABzHfVkCZW51BD+j5V=APbStEESjUw8a_nQO_GMpE46AtULCrg@mail.gmail.com>
Subject: Re: Long timeout after aborted upload
From: Konstantin Kolinko <knst.kolinko@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

2012/4/27 Christopher Schultz <chris@christopherschultz.net>:
>
> In the browser (Firefox 11.0 and 12.0 in our case), we can see the
> throbber work for a good 10-20 seconds *after* the upload has failed
> - -- our code has stopped running -- apparently waiting for something.
>

Just several notes

1. See config/context.html -> swallowAbortedUploads

2. The "throbber work" is client-side issue. If it wastes his own
resources that is his own problem.
I would be more worried what is the load on the server and on the
network when this happens. (That would need some diagnosing work).

Just for starting - the status page in the Manager webapp shows the
current request processing threads and their status.

3. In GMail there is such a feature that when I make an attachment I
do not need to navigate to another page. The file is uploaded
asynchronously.

I wonder how it is done (Flash?) and whether you can have better error
handling at client side if you use similar approach.   E.g. JavaScript
detects that upload failed and then makes additional HTTP request to
get error details from the server.

Best regards,
Konstantin Kolinko

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233841-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sun Apr 29 21:08:39 2012
Return-Path: <users-return-233841-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A8EF391A8
	for <apmail-tomcat-users-archive@www.apache.org>; Sun, 29 Apr 2012 21:08:39 +0000 (UTC)
Received: (qmail 44270 invoked by uid 500); 29 Apr 2012 21:08:36 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 44175 invoked by uid 500); 29 Apr 2012 21:08:36 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 44165 invoked by uid 99); 29 Apr 2012 21:08:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Apr 2012 21:08:35 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dgchristensen@comcast.net designates 76.96.27.227 as permitted sender)
Received: from [76.96.27.227] (HELO qmta12.emeryville.ca.mail.comcast.net) (76.96.27.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Apr 2012 21:08:28 +0000
Received: from omta08.emeryville.ca.mail.comcast.net ([76.96.30.12])
	by qmta12.emeryville.ca.mail.comcast.net with comcast
	id 3wzP1j0040FhH24ACx88YT; Sun, 29 Apr 2012 21:08:08 +0000
Received: from sz0170.ev.mail.comcast.net ([76.96.27.99])
	by omta08.emeryville.ca.mail.comcast.net with comcast
	id 3x881j00128HroU8Ux885B; Sun, 29 Apr 2012 21:08:08 +0000
Date: Sun, 29 Apr 2012 21:08:08 +0000 (UTC)
From: dgchristensen@comcast.net
To: Tomcat Users List <users@tomcat.apache.org>, 
	Mark Eggers <its_toasted@yahoo.com>
Message-ID: <1796919121.189148.1335733688057.JavaMail.root@sz0170a.emeryville.ca.mail.comcast.net>
In-Reply-To: <1335653407.47627.YahooMailNeo@web125502.mail.ne1.yahoo.com>
Subject: Re: Running Swing app under Tomcat 6 on Linux
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Originating-IP: [24.60.152.59]
X-Mailer: Zimbra 6.0.13_GA_2944 (ZimbraWebClient - FF3.0 (Linux)/6.0.13_GA_2944)
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the response Mark. I've done as you've suggested and moved the e=
nv vars to setenv.sh and explicitly set JAVA_HOME. Setting JAVA_HOME means =
I no longer need to change the -Djava.library.path but I still get the same=
 error (X11 not found).=20

I definitely have an X11 server running on the server (which is really my l=
aptop; I'm running all of this locally on my laptop--no remoting). Is it po=
ssible that the problem occurs because I am running Tomcat as a daemon? The=
 command I use to start Tomcat is:=20

sudo service tomcat6 start=20

I've tried running startup.sh directly from the console but it doesn't work=
.  It looks like /etc/init.d/tomcat6 sets up some env vars before starting =
Tomcat.  I can try updating my environment so I can run startup.sh if you t=
hink it worth attempting.

Thanks,
DG

----- Original Message -----=20
From: "Mark Eggers" <its_toasted@yahoo.com>=20
To: "Tomcat Users List" <users@tomcat.apache.org>=20
Sent: Saturday, April 28, 2012 6:50:07 PM=20
Subject: Re: Running Swing app under Tomcat 6 on Linux=20

Comments and questions are in line. Please note I run Fedora / CentOS / Red=
hat and I'm not so familiar with Ubuntu.=20

----- Original Message -----=20

> From: "dgchristensen@comcast.net" <dgchristensen@comcast.net>=20
> To: users@tomcat.apache.org=20
> Cc:=20
> Sent: Saturday, April 28, 2012 1:11 PM=20
> Subject: Running Swing app under Tomcat 6 on Linux=20
>=20
> My version info:=20
>=20
> =E2=80=A2 Tomcat 6.0.28=20
> =E2=80=A2 Java 1.6=20
> =E2=80=A2 Ubuntu 10.4=20
>=20
>=20
> I have a small debugging/monitoring app written in Java/Swing that I'd li=
ke=20
> to run inside Tomcat to help with debugging. The app is started by=20
> dynamically loading the monitoring class from a webservice running under=
=20
> Tomcat. The works in Windows (multiple flavors) but I'm having problems=
=20
> getting this running on Ubuntu. What I've tried so far:=20

What does this give you that monitoring the application via JMX (see Visual=
VM, jconsole), and debugging with your favorite IDE (NetBeans, Eclipse, Int=
elliJ) doesn't give you? You can actually do both locally as well as remote=
ly (with a little bit of setup).=20

>=20
> 1) First error I got was an Headless exception. Since the app is a GUI ap=
p I=20
> can't run in headless mode. After searching around I changed Tomcat's=20
> library path (via -Djava.library.path in catalina.sh) to point to the=20
> client lib (ie. .../java-6-sun-1.6.0.26/jre/lib/i386/client) instead of t=
he=20
> server lib.=20

Try setting JRE_HOME in the environment to point to a JRE installation inst=
ead. Or use JAVA_HOME and point to the JDK. Tomcat will figure things out.=
=20

If your environment is not set up by default to do that (mine is with custo=
m.sh in /etc/profiles.d), create and use a setenv.sh script in CATALINA_HOM=
E. In this set any CATALINA_OPTS, JAVA_OPTS, and other environment variable=
s you need to.=20

>=20
> 2) After changing the libs the next error was that DISPLAY wasn't set. Af=
ter=20
> setting DISPLAY=3D0.0 in catalina.sh I get "Can't connect to X11 with=20
> DISPLAY=3D0.0" error. I've tried different values for DISPLAY (e.g.=20
> localhost:0.0) and nothing makes a difference. I've also tried fiddling=
=20
> around with the policies in case there's a permissions error. See below f=
or=20
> the call stack.=20

Are you running an X server? By that, are I mean is Ubuntu showing up in wh=
atever GUI you've chosen (I guess Gnome 2 is that version's default)?=20

If you only have a command line interface, then there's no place to create =
the screen. You can play games with a virtual frame buffer, but that will j=
ust allow your program to run, but without any screen output (obviously).=
=20

Again, don't set the DISPLAY environment variable in catalina.sh. Set this =
in setenv.sh in the bin directory of CATALINA_HOME. There are lots of scena=
rios here. Three common ones come to mind.=20

1. Local X server=20

You're at the console and running in a GUI environment. The display environ=
ment variable should already be set (typically :0.0). If you start Tomcat w=
ith your application in this environment, the GUI interface should just app=
ear.=20

2. Remote client, accessing the GUI via a VNC server (such as TightVNC)=20

Your display environment should already be set. For example, I'm currently =
on a remote CentOS 5.8 system via VNC. My DISPLAY environment variable is s=
et to :0.2. If you start Tomcat with your application in this environment, =
the GUI interface should just appear in the VNC viewer (for example TightVN=
C).=20

3. Remote client, X server=20

Note that an X server means your PC is serving the screen, keyboard, and mo=
use to a remote client (your application). To accomplish this you'll have t=
o have an X server running (if you're on Windows, try XMing), and you'll ha=
ve to set the DISPLAY variable appropriately. Running Java swing applicatio=
ns in this fashion is not very pleasant especially if your program is graph=
ics-intensive.=20

> The webservice app is a simple RESTEasy implementation. Since this works =
in=20
> Windows I'm assuming (perhaps erroneously) that this can work in Linux. A=
ny=20
> help would be appreciated.=20
>=20
> Thanks,=20
> DG=20
>=20
> java . lang . InternalError : Can 't connect to X11 window server using=
=20
> ' : 0 . 0 ' as the value of the DISPLAY variable.=20
> sun.awt.X11GraphicsEnvironment.initDisplay(Native Method)=20
> sun.awt.X11GraphicsEnvironment.access$100(X11GraphicsEnvironment.java:52)=
=20
> sun.awt.X11GraphicsEnvironment$1.run(X11GraphicsEnvironment.java:155)=20
> java.security.AccessController.doPrivileged(Native Method)=20
> sun.awt.X11GraphicsEnvironment.<clinit>(X11GraphicsEnvironment.java:131)=
=20
> java.lang.Class.forName0(Native Method)=20
> java.lang.Class.forName(Class.java:169)=20
> java.awt.GraphicsEnvironment.getLocalGraphicsEnvironment(GraphicsEnvironm=
ent.java:68)=20
>=20
> java.awt.Window.init(Window.java:380)=20
> java.awt.Window.<init>(Window.java:433)=20
> java.awt.Frame.<init>(Frame.java:403)=20
> java.awt.Frame.<init>(Frame.java:368)=20
> javax.swing.JFrame.<init>(JFrame.java:158)=20
> com.quinsoft.zeidon.objectbrowser.ObjectBrowser.startup(ObjectBrowser.jav=
a:60)=20
>=20


This should work just fine if you're running an X server on your Ubuntu sys=
tem. The DISPLAY environment variable should be :0.0 (no spaces) for a loca=
l machine.=20

. . . . just my two cents.=20
/mde/=20

---------------------------------------------------------------------=20
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org=20
For additional commands, e-mail: users-help@tomcat.apache.org=20


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233842-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sun Apr 29 21:19:22 2012
Return-Path: <users-return-233842-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C09A7933D
	for <apmail-tomcat-users-archive@www.apache.org>; Sun, 29 Apr 2012 21:19:22 +0000 (UTC)
Received: (qmail 65160 invoked by uid 500); 29 Apr 2012 21:19:19 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 64916 invoked by uid 500); 29 Apr 2012 21:19:19 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 64907 invoked by uid 99); 29 Apr 2012 21:19:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Apr 2012 21:19:19 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aw@ice-sa.com designates 212.85.38.228 as permitted sender)
Received: from [212.85.38.228] (HELO tor.combios.es) (212.85.38.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Apr 2012 21:19:13 +0000
Received: from [192.168.245.129] (p549E10D5.dip0.t-ipconnect.de [84.158.16.213])
	by tor.combios.es (Postfix) with ESMTPA id CC2F1DA045D
	for <users@tomcat.apache.org>; Sun, 29 Apr 2012 23:18:49 +0200 (CEST)
Message-ID: <4F9DB032.70604@ice-sa.com>
Date: Sun, 29 Apr 2012 23:18:42 +0200
From: =?ISO-8859-1?Q?Andr=E9_Warnier?= <aw@ice-sa.com>
Reply-To: Tomcat Users List <users@tomcat.apache.org>
User-Agent: Thunderbird 2.0.0.23 (Windows/20090812)
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: How to run Tomcat as Service on windows start up.
References: <4F9B79B5.3060203@poonam.org> <CAOHnQjoPb=OY07P27GLrH6jpwJWfaxnrek1CCAf+h4CdyZH_Og@mail.gmail.com> <4F9BD526.2090100@ice-sa.com> <1335632275.59879.YahooMailNeo@web125505.mail.ne1.yahoo.com>
In-Reply-To: <1335632275.59879.YahooMailNeo@web125505.mail.ne1.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Mark Eggers wrote:
>> From: Andr Warnier <aw@ice-sa.com>
>> To: Tomcat Users List <users@tomcat.apache.org> 
>> Sent: Saturday, April 28, 2012 4:31 AM
>> Subject: Re: How to run Tomcat as Service on windows start up.
>>
>> Jacques Desodt wrote:
>>> Hi Kiran,
>>>
>>> On Windows 7, you can't run batch files as services.
>>> See :
>>> http://stackoverflow.com/questions/8972679/windows-7-bat-file-not-starting-as-a-service
>>>
>>> Your first step : compile the .bat file into .exe
>>> Then create the service, and after change the service register values with
>>> regedit.
>> I think that it is a bit more complicated that that.
>> A .bat file compiled to a .exe will still not work properly as a Windows service.
>>
>> The standard Tomcat installation for Windows does it right, by providing a correct "service wrapper" for the JVM which runs Tomcat.
>> The OP would probably, in the end, save himself some time by installing a proper Tomcat-as-a-Windows-service from the Tomcat website, and then arrange for Netbeans to talk to that one.
> 
> 
> NetBeans will not talk to the service very well.
> 
> NetBeans uses the .bat files (.sh on Linux / UNIX) to control Tomcat. From within NetBeans you can start, stop, and restart Tomcat, or run it in debug mode.
> 
> NetBeans will complain that it cannot find the startup.bat and shutdown.bat required to do these tasks if you install the service.

Presumably then, you could replace startup.bat and shutdown.bat by similarly-named .bat 
files which respectively do
net start "Apache Tomcat"
and
net stop "Apache Tomcat"
(to keep it simple)

Similarly, it should be possible to create .bat files which run the Tomcat wrapper 
tomcatX.exe with the appropriate arguments to start, stop, or run Tomcat in debug mode.

No ?

(Although, if I understood the OP's request correctly, the point here would be to start 
Tomcat as a service as soon as Windows starts.  So presumably, the necessity of having a 
"startup.bat" is not evident anymore).

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233843-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sun Apr 29 21:53:23 2012
Return-Path: <users-return-233843-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 58A8EC2E0
	for <apmail-tomcat-users-archive@www.apache.org>; Sun, 29 Apr 2012 21:53:23 +0000 (UTC)
Received: (qmail 30674 invoked by uid 500); 29 Apr 2012 21:53:20 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 30463 invoked by uid 500); 29 Apr 2012 21:53:19 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 30453 invoked by uid 99); 29 Apr 2012 21:53:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Apr 2012 21:53:19 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.216.45] (HELO mail-qa0-f45.google.com) (209.85.216.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Apr 2012 21:53:12 +0000
Received: by qaeb19 with SMTP id b19so615721qae.18
        for <users@tomcat.apache.org>; Sun, 29 Apr 2012 14:52:51 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:content-type
         :content-transfer-encoding:x-gm-message-state;
        bh=2fDZmhFux34nlmeXnMcFUV0xmF7ZD+DqhTlHB+2WsHA=;
        b=Qs+ye10ZKvnqguUQd0BlW+khj/UPvzGEUZ3p8SJCLCaJWG1Bv/By20s+lDKGBlhSSE
         7gKoVALBjr7ALH04JXsX/6sseA6dI+gn8JVQ0qMiNN115qod/drmfWXGTG8GONwYdb+w
         Ul18sUNl8qa5Rmn+QtxNmi514SMc3vYsa5i0IA4IrgJ/yNo/fYfC61KVPC51Q6w8W2fX
         J0/k3eAd/4ecoVzA8OUp3Zr/QAcX0JZQqSpuUO27dotVYViW8PGXSnRuD60Utq4UoUFs
         flZj25nPLaLqkiOnjBWa2+MIqz3JAlOJdsthMYCNHlWsOYmTW4zYvH6Lsjz3zsbMTUqg
         Mocg==
Received: by 10.229.106.193 with SMTP id y1mr4866648qco.73.1335736371075;
        Sun, 29 Apr 2012 14:52:51 -0700 (PDT)
Received: from [192.168.1.6] (c-68-45-12-151.hsd1.nj.comcast.net. [68.45.12.151])
        by mx.google.com with ESMTPS id i8sm21821327qap.0.2012.04.29.14.52.48
        (version=SSLv3 cipher=OTHER);
        Sun, 29 Apr 2012 14:52:49 -0700 (PDT)
Message-ID: <4F9DB830.7070105@poonam.org>
Date: Mon, 30 Apr 2012 03:22:48 +0530
From: Kiran Badi <kiran@poonam.org>
Organization: www.poonam.org
User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:12.0) Gecko/20120420 Thunderbird/12.0
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: How to run Tomcat as Service on windows start up.
References: <4F9B79B5.3060203@poonam.org> <CAOHnQjoPb=OY07P27GLrH6jpwJWfaxnrek1CCAf+h4CdyZH_Og@mail.gmail.com> <4F9BD526.2090100@ice-sa.com> <1335632275.59879.YahooMailNeo@web125505.mail.ne1.yahoo.com> <4F9DB032.70604@ice-sa.com>
In-Reply-To: <4F9DB032.70604@ice-sa.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Gm-Message-State: ALoCoQmMpFl4S17aKBy+re2HoWjZlBLrtT9o0cGr4iQbiQo6LQYvTAUU2dtqh+22tQmGXQZJWaWU

I think I got your point Mark,it has to bat file  which net beans uses 
to control tomcat.Seems like I have to go and download a fresh copy of 
tomcat , install it as service and then use the manager app to deploy 
the war file.If I play around with my existing setup, there exists a 
risk of breaking it.

Andre, you are correct I need Tomcat to run as a service on windows 
start up,seems like it will be better to download a fresh copy rather 
than playing around with existing setup.

Thanks a lot for suggestions.

On 4/30/2012 2:48 AM, Andr Warnier wrote:
> Mark Eggers wrote:
>>> From: Andr Warnier <aw@ice-sa.com>
>>> To: Tomcat Users List <users@tomcat.apache.org> Sent: Saturday, 
>>> April 28, 2012 4:31 AM
>>> Subject: Re: How to run Tomcat as Service on windows start up.
>>>
>>> Jacques Desodt wrote:
>>>> Hi Kiran,
>>>>
>>>> On Windows 7, you can't run batch files as services.
>>>> See :
>>>> http://stackoverflow.com/questions/8972679/windows-7-bat-file-not-starting-as-a-service 
>>>>
>>>>
>>>> Your first step : compile the .bat file into .exe
>>>> Then create the service, and after change the service register 
>>>> values with
>>>> regedit.
>>> I think that it is a bit more complicated that that.
>>> A .bat file compiled to a .exe will still not work properly as a 
>>> Windows service.
>>>
>>> The standard Tomcat installation for Windows does it right, by 
>>> providing a correct "service wrapper" for the JVM which runs Tomcat.
>>> The OP would probably, in the end, save himself some time by 
>>> installing a proper Tomcat-as-a-Windows-service from the Tomcat 
>>> website, and then arrange for Netbeans to talk to that one.
>>
>>
>> NetBeans will not talk to the service very well.
>>
>> NetBeans uses the .bat files (.sh on Linux / UNIX) to control Tomcat. 
>> From within NetBeans you can start, stop, and restart Tomcat, or run 
>> it in debug mode.
>>
>> NetBeans will complain that it cannot find the startup.bat and 
>> shutdown.bat required to do these tasks if you install the service.
>
> Presumably then, you could replace startup.bat and shutdown.bat by 
> similarly-named .bat files which respectively do
> net start "Apache Tomcat"
> and
> net stop "Apache Tomcat"
> (to keep it simple)
>
> Similarly, it should be possible to create .bat files which run the 
> Tomcat wrapper tomcatX.exe with the appropriate arguments to start, 
> stop, or run Tomcat in debug mode.
>
> No ?
>
> (Although, if I understood the OP's request correctly, the point here 
> would be to start Tomcat as a service as soon as Windows starts.  So 
> presumably, the necessity of having a "startup.bat" is not evident 
> anymore).
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233844-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Sun Apr 29 21:54:20 2012
Return-Path: <users-return-233844-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5267CC321
	for <apmail-tomcat-users-archive@www.apache.org>; Sun, 29 Apr 2012 21:54:20 +0000 (UTC)
Received: (qmail 36158 invoked by uid 500); 29 Apr 2012 21:54:17 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 36080 invoked by uid 500); 29 Apr 2012 21:54:17 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 36071 invoked by uid 99); 29 Apr 2012 21:54:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Apr 2012 21:54:17 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pid@pidster.com designates 74.125.82.43 as permitted sender)
Received: from [74.125.82.43] (HELO mail-wg0-f43.google.com) (74.125.82.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 Apr 2012 21:54:11 +0000
Received: by wgbdr1 with SMTP id dr1so1904881wgb.0
        for <users@tomcat.apache.org>; Sun, 29 Apr 2012 14:53:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=pidster.com; s=google;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type;
        bh=cDk031QuSBv3uxanO/1+ATVWXk73v6VZASI1g8Wq6Fc=;
        b=I48wAA4Zl+27N3OvN3fjAjTYB7d6dFo1Sdr1F1BgRX9wQmu5kczj72XjIyUK31pse6
         cZrQkRBEJRu6HnUuPWQryvoJBxiEtD0ZhEUnZ57E0gmGs++W1L2bQCIrfsv8wiYVmFer
         Z/taBUvgrHMiz7Kd2o7whuSl86IvZ9WAeo7NE=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=message-id:date:from:organization:user-agent:mime-version:to
         :subject:references:in-reply-to:x-enigmail-version:openpgp
         :content-type:x-gm-message-state;
        bh=cDk031QuSBv3uxanO/1+ATVWXk73v6VZASI1g8Wq6Fc=;
        b=foeQHbV0b/8l6qBcIU0ksyRd2U0e2Talt7thXXuBOOmfj/YZ5niBBklDh6RSJ5zkqf
         d8tzz90ttxcArSSN48vG6B9Vmvhgj9MdKvucKd071y5YfllF1kybC7PAZR/B0Ydc/GF3
         rvz+NzWExx9P4DzjksC14u/cWs8wLLu82v2/nJtf2/NFCuDeTuPYBRPvtF1kUiT+o16A
         ENP0O0ASOxRkiJcjSpiKAeOQticwevE7ZiMl1REXl0m0xMtrbjswAgQFrjdQLTC+EQAA
         LK6NlmHW9WAvYfS+Ere0URdgh+ZHDpF9+Ytj8c6ZuDsz5VvijjXVPDtrhHJsWNtoVExJ
         7bIA==
Received: by 10.180.102.101 with SMTP id fn5mr1768946wib.6.1335736428700;
        Sun, 29 Apr 2012 14:53:48 -0700 (PDT)
Received: from Asura.local (cpc10-lewi14-2-0-cust355.2-4.cable.virginmedia.com. [82.4.249.100])
        by mx.google.com with ESMTPS id 6sm23933013wiz.1.2012.04.29.14.53.46
        (version=SSLv3 cipher=OTHER);
        Sun, 29 Apr 2012 14:53:47 -0700 (PDT)
Message-ID: <4F9DB867.2000704@pidster.com>
Date: Sun, 29 Apr 2012 22:53:43 +0100
From: Pid <pid@pidster.com>
Organization: Pidster Inc
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:12.0) Gecko/20120420 Thunderbird/12.0
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Running Swing app under Tomcat 6 on Linux
References: <1796919121.189148.1335733688057.JavaMail.root@sz0170a.emeryville.ca.mail.comcast.net>
In-Reply-To: <1796919121.189148.1335733688057.JavaMail.root@sz0170a.emeryville.ca.mail.comcast.net>
X-Enigmail-Version: 1.4.1
OpenPGP: id=62590808
Content-Type: multipart/signed; micalg=pgp-sha512;
 protocol="application/pgp-signature";
 boundary="------------enig3AA8FBDBD318FBEA60E800EA"
X-Gm-Message-State: ALoCoQlCRRHfjl35JGONnuRjad/MDbiXs4Pyqp+QgXktbwpy+emTDs/4S2UpPvlmupHkPq0uaCA8
X-Virus-Checked: Checked by ClamAV on apache.org

--------------enig3AA8FBDBD318FBEA60E800EA
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On 29/04/2012 22:08, dgchristensen@comcast.net wrote:
> Thanks for the response Mark. I've done as you've suggested and moved t=
he env vars to setenv.sh and explicitly set JAVA_HOME. Setting JAVA_HOME =
means I no longer need to change the -Djava.library.path but I still get =
the same error (X11 not found).=20
>=20
> I definitely have an X11 server running on the server (which is really =
my laptop; I'm running all of this locally on my laptop--no remoting). Is=
 it possible that the problem occurs because I am running Tomcat as a dae=
mon? The command I use to start Tomcat is:=20
>=20
> sudo service tomcat6 start=20
>=20
> I've tried running startup.sh directly from the console but it doesn't =
work.  It looks like /etc/init.d/tomcat6 sets up some env vars before sta=
rting Tomcat.  I can try updating my environment so I can run startup.sh =
if you think it worth attempting.

Please don't top-post.  Answer inline instead.

Tomcat has no knowledge of Swing, so or UI components of this nature.
Is there a reason it has to be started from Tomcat?


p

> Thanks,
> DG
>=20
> ----- Original Message -----=20
> From: "Mark Eggers" <its_toasted@yahoo.com>=20
> To: "Tomcat Users List" <users@tomcat.apache.org>=20
> Sent: Saturday, April 28, 2012 6:50:07 PM=20
> Subject: Re: Running Swing app under Tomcat 6 on Linux=20
>=20
> Comments and questions are in line. Please note I run Fedora / CentOS /=
 Redhat and I'm not so familiar with Ubuntu.=20
>=20
> ----- Original Message -----=20
>=20
>> From: "dgchristensen@comcast.net" <dgchristensen@comcast.net>=20
>> To: users@tomcat.apache.org=20
>> Cc:=20
>> Sent: Saturday, April 28, 2012 1:11 PM=20
>> Subject: Running Swing app under Tomcat 6 on Linux=20
>>
>> My version info:=20
>>
>> =E2=80=A2 Tomcat 6.0.28=20
>> =E2=80=A2 Java 1.6=20
>> =E2=80=A2 Ubuntu 10.4=20
>>
>>
>> I have a small debugging/monitoring app written in Java/Swing that I'd=
 like=20
>> to run inside Tomcat to help with debugging. The app is started by=20
>> dynamically loading the monitoring class from a webservice running und=
er=20
>> Tomcat. The works in Windows (multiple flavors) but I'm having problem=
s=20
>> getting this running on Ubuntu. What I've tried so far:=20
>=20
> What does this give you that monitoring the application via JMX (see Vi=
sualVM, jconsole), and debugging with your favorite IDE (NetBeans, Eclips=
e, IntelliJ) doesn't give you? You can actually do both locally as well a=
s remotely (with a little bit of setup).=20
>=20
>>
>> 1) First error I got was an Headless exception. Since the app is a GUI=
 app I=20
>> can't run in headless mode. After searching around I changed Tomcat's =

>> library path (via -Djava.library.path in catalina.sh) to point to the =

>> client lib (ie. .../java-6-sun-1.6.0.26/jre/lib/i386/client) instead o=
f the=20
>> server lib.=20
>=20
> Try setting JRE_HOME in the environment to point to a JRE installation =
instead. Or use JAVA_HOME and point to the JDK. Tomcat will figure things=
 out.=20
>=20
> If your environment is not set up by default to do that (mine is with c=
ustom.sh in /etc/profiles.d), create and use a setenv.sh script in CATALI=
NA_HOME. In this set any CATALINA_OPTS, JAVA_OPTS, and other environment =
variables you need to.=20
>=20
>>
>> 2) After changing the libs the next error was that DISPLAY wasn't set.=
 After=20
>> setting DISPLAY=3D0.0 in catalina.sh I get "Can't connect to X11 with =

>> DISPLAY=3D0.0" error. I've tried different values for DISPLAY (e.g.=20
>> localhost:0.0) and nothing makes a difference. I've also tried fiddlin=
g=20
>> around with the policies in case there's a permissions error. See belo=
w for=20
>> the call stack.=20
>=20
> Are you running an X server? By that, are I mean is Ubuntu showing up i=
n whatever GUI you've chosen (I guess Gnome 2 is that version's default)?=
=20
>=20
> If you only have a command line interface, then there's no place to cre=
ate the screen. You can play games with a virtual frame buffer, but that =
will just allow your program to run, but without any screen output (obvio=
usly).=20
>=20
> Again, don't set the DISPLAY environment variable in catalina.sh. Set t=
his in setenv.sh in the bin directory of CATALINA_HOME. There are lots of=
 scenarios here. Three common ones come to mind.=20
>=20
> 1. Local X server=20
>=20
> You're at the console and running in a GUI environment. The display env=
ironment variable should already be set (typically :0.0). If you start To=
mcat with your application in this environment, the GUI interface should =
just appear.=20
>=20
> 2. Remote client, accessing the GUI via a VNC server (such as TightVNC)=
=20
>=20
> Your display environment should already be set. For example, I'm curren=
tly on a remote CentOS 5.8 system via VNC. My DISPLAY environment variabl=
e is set to :0.2. If you start Tomcat with your application in this envir=
onment, the GUI interface should just appear in the VNC viewer (for examp=
le TightVNC).=20
>=20
> 3. Remote client, X server=20
>=20
> Note that an X server means your PC is serving the screen, keyboard, an=
d mouse to a remote client (your application). To accomplish this you'll =
have to have an X server running (if you're on Windows, try XMing), and y=
ou'll have to set the DISPLAY variable appropriately. Running Java swing =
applications in this fashion is not very pleasant especially if your prog=
ram is graphics-intensive.=20
>=20
>> The webservice app is a simple RESTEasy implementation. Since this wor=
ks in=20
>> Windows I'm assuming (perhaps erroneously) that this can work in Linux=
=2E Any=20
>> help would be appreciated.=20
>>
>> Thanks,=20
>> DG=20
>>
>> java . lang . InternalError : Can 't connect to X11 window server usin=
g=20
>> ' : 0 . 0 ' as the value of the DISPLAY variable.=20
>> sun.awt.X11GraphicsEnvironment.initDisplay(Native Method)=20
>> sun.awt.X11GraphicsEnvironment.access$100(X11GraphicsEnvironment.java:=
52)=20
>> sun.awt.X11GraphicsEnvironment$1.run(X11GraphicsEnvironment.java:155) =

>> java.security.AccessController.doPrivileged(Native Method)=20
>> sun.awt.X11GraphicsEnvironment.<clinit>(X11GraphicsEnvironment.java:13=
1)=20
>> java.lang.Class.forName0(Native Method)=20
>> java.lang.Class.forName(Class.java:169)=20
>> java.awt.GraphicsEnvironment.getLocalGraphicsEnvironment(GraphicsEnvir=
onment.java:68)=20
>>
>> java.awt.Window.init(Window.java:380)=20
>> java.awt.Window.<init>(Window.java:433)=20
>> java.awt.Frame.<init>(Frame.java:403)=20
>> java.awt.Frame.<init>(Frame.java:368)=20
>> javax.swing.JFrame.<init>(JFrame.java:158)=20
>> com.quinsoft.zeidon.objectbrowser.ObjectBrowser.startup(ObjectBrowser.=
java:60)=20
>>
>=20
>=20
> This should work just fine if you're running an X server on your Ubuntu=
 system. The DISPLAY environment variable should be :0.0 (no spaces) for =
a local machine.=20
>=20
> . . . . just my two cents.=20
> /mde/=20
>=20
> ---------------------------------------------------------------------=20
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org=20
> For additional commands, e-mail: users-help@tomcat.apache.org=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>=20


--=20

[key:62590808]


--------------enig3AA8FBDBD318FBEA60E800EA
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.18 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iQIcBAEBCgAGBQJPnbhoAAoJEGoM2OGpOvr9FhYP/j1sF3f+XFLQhP1TqQVX9FiW
nya07pjybNVo3d9QtN0yPJ8G62l6rBB15jCcMAc3i7AU53SsWuGRRpQxCLUYgtKk
THBGqn+2t0wVOXHnAA4YO85lLAy/2TC5NSayz+z1T46tXYVSdpdStD07bks1hIJq
zmhC6NNXwcvRt2gc7U5zrlCXtt3gO9ngdLbAZQBmpjEm824qfbHPwvGSYJHraDDk
4zlUyodXvAyTMxSW5RMaFDVOpBRLFPCXfKWc5zR06pOgZrWrKUpZW2UfXKJ1laG0
AAoT7twTkQ9pYu4l/rrvOnJZBywwgaIGzwu1Dpf7NRMkIVIwR10wI3XCfUlvE9dx
dDIlw50JP65eX9qzj1XreWNvnSL0chEaxWanJ97cJDJyVr4onfIELxbBduvK2in9
qVgqa0ACQIsp1pSevzBzYhR7FSxbnDLmiXSgw42MrfGnOxxxqgDMvtF5Y8cZcd0R
GRE8FyuPJj++sK+y7MELMlKpYnUKYEB2ozDCgCboCs0Z+31D/Gp+o0NWWaL+dCA1
nzNua0c/d9pJbNGIPBVr1SWJS3bNWq0s8IU80Q+K26JVevA6lyMudQSgpUURlsvr
sE2RteNsIRJds81ioBLL++wDGL95dchVaxBrWVfZr6a8OPzXF/OevkxtibJwvFba
Iu/ZNTw9NUOMmQcmoVlh
=tsnX
-----END PGP SIGNATURE-----

--------------enig3AA8FBDBD318FBEA60E800EA--

From users-return-233845-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 30 01:50:30 2012
Return-Path: <users-return-233845-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CABA69DE1
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 30 Apr 2012 01:50:30 +0000 (UTC)
Received: (qmail 48543 invoked by uid 500); 30 Apr 2012 01:50:27 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 48348 invoked by uid 500); 30 Apr 2012 01:50:27 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 48334 invoked by uid 99); 30 Apr 2012 01:50:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 01:50:27 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dgchristensen@comcast.net designates 76.96.30.17 as permitted sender)
Received: from [76.96.30.17] (HELO qmta10.emeryville.ca.mail.comcast.net) (76.96.30.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 01:50:18 +0000
Received: from omta04.emeryville.ca.mail.comcast.net ([76.96.30.35])
	by qmta10.emeryville.ca.mail.comcast.net with comcast
	id 41o81j0030lTkoCAA1pwNQ; Mon, 30 Apr 2012 01:49:56 +0000
Received: from sz0170.ev.mail.comcast.net ([76.96.27.99])
	by omta04.emeryville.ca.mail.comcast.net with comcast
	id 41pw1j00l28HroU8Q1pwcL; Mon, 30 Apr 2012 01:49:56 +0000
Date: Mon, 30 Apr 2012 01:49:56 +0000 (UTC)
From: dgchristensen@comcast.net
To: Tomcat Users List <users@tomcat.apache.org>
Message-ID: <2141145777.196896.1335750596376.JavaMail.root@sz0170a.emeryville.ca.mail.comcast.net>
In-Reply-To: <4F9DB867.2000704@pidster.com>
Subject: Re: Running Swing app under Tomcat 6 on Linux
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Originating-IP: [71.234.133.231]
X-Mailer: Zimbra 6.0.13_GA_2944 (ZimbraWebClient - FF3.0 (Win)/6.0.13_GA_2944)



----- Original Message -----
From: "Pid" <pid@pidster.com>
To: "Tomcat Users List" <users@tomcat.apache.org>
Sent: Sunday, April 29, 2012 5:53:43 PM
Subject: Re: Running Swing app under Tomcat 6 on Linux

On 29/04/2012 22:08, dgchristensen@comcast.net wrote:
> Thanks for the response Mark. I've done as you've suggested and moved the=
 env vars to setenv.sh and explicitly set JAVA_HOME. Setting JAVA_HOME mean=
s I no longer need to change the -Djava.library.path but I still get the sa=
me error (X11 not found).=20
>=20
> I definitely have an X11 server running on the server (which is really my=
 laptop; I'm running all of this locally on my laptop--no remoting). Is it =
possible that the problem occurs because I am running Tomcat as a daemon? T=
he command I use to start Tomcat is:=20
>=20
> sudo service tomcat6 start=20
>=20
> I've tried running startup.sh directly from the console but it doesn't wo=
rk.  It looks like /etc/init.d/tomcat6 sets up some env vars before startin=
g Tomcat.  I can try updating my environment so I can run startup.sh if you=
 think it worth attempting.

> Please don't top-post.  Answer inline instead.
>
> Tomcat has no knowledge of Swing, so or UI components of this nature.
> Is there a reason it has to be started from Tomcat?

The app needs to be running in the same JVM as the Tomcat applications so i=
t can access some of the application's objects.  Some day I may re-write it=
 to use JMX but that's a big change that won't happen soon.  Getting it to =
run as a "normal" Swing app under Tomcat is the expedient solution for now.

I was assuming (perhaps wrongly) that Swing was just a collection of classe=
s that didn't need any special environment (other than a running X server).

> p

> Thanks,
> DG
>=20
> ----- Original Message -----=20
> From: "Mark Eggers" <its_toasted@yahoo.com>=20
> To: "Tomcat Users List" <users@tomcat.apache.org>=20
> Sent: Saturday, April 28, 2012 6:50:07 PM=20
> Subject: Re: Running Swing app under Tomcat 6 on Linux=20
>=20
> Comments and questions are in line. Please note I run Fedora / CentOS / R=
edhat and I'm not so familiar with Ubuntu.=20
>=20
> ----- Original Message -----=20
>=20
>> From: "dgchristensen@comcast.net" <dgchristensen@comcast.net>=20
>> To: users@tomcat.apache.org=20
>> Cc:=20
>> Sent: Saturday, April 28, 2012 1:11 PM=20
>> Subject: Running Swing app under Tomcat 6 on Linux=20
>>
>> My version info:=20
>>
>> =E2=80=A2 Tomcat 6.0.28=20
>> =E2=80=A2 Java 1.6=20
>> =E2=80=A2 Ubuntu 10.4=20
>>
>>
>> I have a small debugging/monitoring app written in Java/Swing that I'd l=
ike=20
>> to run inside Tomcat to help with debugging. The app is started by=20
>> dynamically loading the monitoring class from a webservice running under=
=20
>> Tomcat. The works in Windows (multiple flavors) but I'm having problems=
=20
>> getting this running on Ubuntu. What I've tried so far:=20
>=20
> What does this give you that monitoring the application via JMX (see Visu=
alVM, jconsole), and debugging with your favorite IDE (NetBeans, Eclipse, I=
ntelliJ) doesn't give you? You can actually do both locally as well as remo=
tely (with a little bit of setup).=20
>=20
>>
>> 1) First error I got was an Headless exception. Since the app is a GUI a=
pp I=20
>> can't run in headless mode. After searching around I changed Tomcat's=20
>> library path (via -Djava.library.path in catalina.sh) to point to the=20
>> client lib (ie. .../java-6-sun-1.6.0.26/jre/lib/i386/client) instead of =
the=20
>> server lib.=20
>=20
> Try setting JRE_HOME in the environment to point to a JRE installation in=
stead. Or use JAVA_HOME and point to the JDK. Tomcat will figure things out=
.=20
>=20
> If your environment is not set up by default to do that (mine is with cus=
tom.sh in /etc/profiles.d), create and use a setenv.sh script in CATALINA_H=
OME. In this set any CATALINA_OPTS, JAVA_OPTS, and other environment variab=
les you need to.=20
>=20
>>
>> 2) After changing the libs the next error was that DISPLAY wasn't set. A=
fter=20
>> setting DISPLAY=3D0.0 in catalina.sh I get "Can't connect to X11 with=20
>> DISPLAY=3D0.0" error. I've tried different values for DISPLAY (e.g.=20
>> localhost:0.0) and nothing makes a difference. I've also tried fiddling=
=20
>> around with the policies in case there's a permissions error. See below =
for=20
>> the call stack.=20
>=20
> Are you running an X server? By that, are I mean is Ubuntu showing up in =
whatever GUI you've chosen (I guess Gnome 2 is that version's default)?=20
>=20
> If you only have a command line interface, then there's no place to creat=
e the screen. You can play games with a virtual frame buffer, but that will=
 just allow your program to run, but without any screen output (obviously).=
=20
>=20
> Again, don't set the DISPLAY environment variable in catalina.sh. Set thi=
s in setenv.sh in the bin directory of CATALINA_HOME. There are lots of sce=
narios here. Three common ones come to mind.=20
>=20
> 1. Local X server=20
>=20
> You're at the console and running in a GUI environment. The display envir=
onment variable should already be set (typically :0.0). If you start Tomcat=
 with your application in this environment, the GUI interface should just a=
ppear.=20
>=20
> 2. Remote client, accessing the GUI via a VNC server (such as TightVNC)=
=20
>=20
> Your display environment should already be set. For example, I'm currentl=
y on a remote CentOS 5.8 system via VNC. My DISPLAY environment variable is=
 set to :0.2. If you start Tomcat with your application in this environment=
, the GUI interface should just appear in the VNC viewer (for example Tight=
VNC).=20
>=20
> 3. Remote client, X server=20
>=20
> Note that an X server means your PC is serving the screen, keyboard, and =
mouse to a remote client (your application). To accomplish this you'll have=
 to have an X server running (if you're on Windows, try XMing), and you'll =
have to set the DISPLAY variable appropriately. Running Java swing applicat=
ions in this fashion is not very pleasant especially if your program is gra=
phics-intensive.=20
>=20
>> The webservice app is a simple RESTEasy implementation. Since this works=
 in=20
>> Windows I'm assuming (perhaps erroneously) that this can work in Linux. =
Any=20
>> help would be appreciated.=20
>>
>> Thanks,=20
>> DG=20
>>
>> java . lang . InternalError : Can 't connect to X11 window server using=
=20
>> ' : 0 . 0 ' as the value of the DISPLAY variable.=20
>> sun.awt.X11GraphicsEnvironment.initDisplay(Native Method)=20
>> sun.awt.X11GraphicsEnvironment.access$100(X11GraphicsEnvironment.java:52=
)=20
>> sun.awt.X11GraphicsEnvironment$1.run(X11GraphicsEnvironment.java:155)=20
>> java.security.AccessController.doPrivileged(Native Method)=20
>> sun.awt.X11GraphicsEnvironment.<clinit>(X11GraphicsEnvironment.java:131)=
=20
>> java.lang.Class.forName0(Native Method)=20
>> java.lang.Class.forName(Class.java:169)=20
>> java.awt.GraphicsEnvironment.getLocalGraphicsEnvironment(GraphicsEnviron=
ment.java:68)=20
>>
>> java.awt.Window.init(Window.java:380)=20
>> java.awt.Window.<init>(Window.java:433)=20
>> java.awt.Frame.<init>(Frame.java:403)=20
>> java.awt.Frame.<init>(Frame.java:368)=20
>> javax.swing.JFrame.<init>(JFrame.java:158)=20
>> com.quinsoft.zeidon.objectbrowser.ObjectBrowser.startup(ObjectBrowser.ja=
va:60)=20
>>
>=20
>=20
> This should work just fine if you're running an X server on your Ubuntu s=
ystem. The DISPLAY environment variable should be :0.0 (no spaces) for a lo=
cal machine.=20
>=20
> . . . . just my two cents.=20
> /mde/=20
>=20
> ---------------------------------------------------------------------=20
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org=20
> For additional commands, e-mail: users-help@tomcat.apache.org=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>=20


--=20

[key:62590808]


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233846-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 30 03:33:19 2012
Return-Path: <users-return-233846-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E27869E2C
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 30 Apr 2012 03:33:19 +0000 (UTC)
Received: (qmail 15976 invoked by uid 500); 30 Apr 2012 03:33:16 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 15789 invoked by uid 500); 30 Apr 2012 03:33:16 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 15751 invoked by uid 99); 30 Apr 2012 03:33:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 03:33:14 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=FREEMAIL_FORGED_REPLYTO,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.138.229.183] (HELO nm40-vm7.bullet.mail.ne1.yahoo.com) (98.138.229.183)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 30 Apr 2012 03:33:06 +0000
Received: from [98.138.90.52] by nm40.bullet.mail.ne1.yahoo.com with NNFMP; 30 Apr 2012 03:32:45 -0000
Received: from [98.138.87.2] by tm5.bullet.mail.ne1.yahoo.com with NNFMP; 30 Apr 2012 03:32:45 -0000
Received: from [127.0.0.1] by omp1002.mail.ne1.yahoo.com with NNFMP; 30 Apr 2012 03:32:45 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 564053.54776.bm@omp1002.mail.ne1.yahoo.com
Received: (qmail 59423 invoked by uid 60001); 30 Apr 2012 03:32:45 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1335756765; bh=qpEXEaCTigUQTr+2LcDqxCLRzspL/lU0UHXFNlHjKWQ=; h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=Jqj7hnE+BaVedEtz5jttRRSVbj3c/T3pZGxGqVEFxZiu87PAhLrNkAW3wz355+gOeJXuWhyCYm4dC1aFA6NUtfNgVxGLUOGqCtLuJNaVRhfaaJQRJm3wnefX/7E2v64+l19iNDg1bCX6vIUlyl5AgeLv2ZoB1ZBHz8JyP4pICO8=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=X9HpXSQwhmMB4CCeCIGqaBa1iLk3YRecA/BoYT3qNuqenSmp2x/8zkS6pTqJPu43HKDEWQnwemLCRBgA1436r1GtgWan47rZ39rEv3ZvjdQZBFohYv/JNv83F6HMrxgycRWXTuTj8eyMCf/wDzmpxzae9xOGHpsilby9uKTGLiY=;
X-YMail-OSG: JBUnrDAVM1kz62oQk.iWnsGJpY.pMfApKftit5XLwZzWDSl
 JpZsj76k6ouHSjvgdrpaFPb3Y8qePIb3dUDc5isN5l9O6G9vxD1FIiWHn_Q2
 qzNXWEuOMEmmbOx1rZXaxqsqmcy68P_A_fkaeqEXOt.1BjeF47Q3sbghebue
 _0KgWkaYPVJ.K1VJzOrVVZEColCN3YVhuMARIopc.j4Nvp9zq3LwYbAjZNXQ
 _H8bGm3I6jd.uLvwj__WAPdw4BHZ3sBAbKEd63fIiUos89E9w3.kcT_jivEh
 Bbxama_uVOy9FaiPI9KhkeeZWculf3GkwjkUOx5eYfP3R_FmmOSnHFFc7Xwc
 RB8hxqLnbbOrW68rXWJcZ9CDxQ3NOHmhrdaB9IlLmkcDfEwDlcT3.8ifTBLR
 tOJ0fo_6tBrAeTxqPs99b6Np.7BjGaJHG39PmfYRYvF7Jq7jIsIfV_6mm.gt
 yglSLMC2k89eP.xbSbiinA_chVLZYdVSQ3kzOwTIkM02kt4jZJ0se7DLbOO.
 nubgML4LB08PDFAl4w0zXU4n4VHtlAq6DkPMqOR_T
Received: from [71.134.9.186] by web125504.mail.ne1.yahoo.com via HTTP; Sun, 29 Apr 2012 20:32:45 PDT
X-Mailer: YahooMailWebService/0.8.118.349524
References: <4F9B79B5.3060203@poonam.org> <CAOHnQjoPb=OY07P27GLrH6jpwJWfaxnrek1CCAf+h4CdyZH_Og@mail.gmail.com> <4F9BD526.2090100@ice-sa.com> <1335632275.59879.YahooMailNeo@web125505.mail.ne1.yahoo.com> <4F9DB032.70604@ice-sa.com> 
Message-ID: <1335756765.22426.YahooMailNeo@web125504.mail.ne1.yahoo.com>
Date: Sun, 29 Apr 2012 20:32:45 -0700 (PDT)
From: Mark Eggers <its_toasted@yahoo.com>
Reply-To: Mark Eggers <its_toasted@yahoo.com>
Subject: Re: How to run Tomcat as Service on windows start up.
To: Tomcat Users List <users@tomcat.apache.org>,
  Tomcat Users List <users@tomcat.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

>________________________________=0A> From: Andr=E9 Warnier <aw@ice-sa.com>=
=0A>To: Tomcat Users List <users@tomcat.apache.org> =0A>Sent: Sunday, April=
 29, 2012 2:18 PM=0A>Subject: Re: How to run Tomcat as Service on windows s=
tart up.=0A=0A=0A>> Mark Eggers wrote:=0A>> NetBeans will complain that it =
cannot find the startup.bat and shutdown.bat=0A>> required to do these task=
s if you install the service.=0A=0A>=0A> Presumably then, you could replace=
 startup.bat and shutdown.bat=0A> by similarly-named .bat files which respe=
ctively do=0A>net start "Apache Tomcat"=0A>and=0A>net stop "Apache Tomcat"=
=0A>(to keep it simple)=0A>=0A=0AI suppose you could. I don't know how intr=
usive NetBeans' investigation of the scripts are. In Windows Vista and Wind=
ows 7, UAC might become a problem. I'm not a Windows person, so I'd have to=
 investigate this.=0A=0A> Similarly, it should be possible to create .bat f=
iles which run the Tomcat=A0=0A> wrapper tomcatX.exe with the appropriate a=
rguments to start, stop, or run=A0=0A> Tomcat in debug mode.=0A=0AFrom my r=
ecollection of the service, don't you have to configure the service for deb=
ug using the service configuration program? I'm not sure how you would hand=
le that through NetBeans, since I believe it simply does what start.bat / c=
atalina.bat require (pass the debug argument to catalina.bat).=0A=0ASo, you=
 might need a single startup.bat and shutdown.bat that would determine whic=
h service to run, and which service was running . . . .=0A=0A>=0A> No ?=0A>=
=0A>(Although, if I understood the OP's request correctly, the point here w=
ould=0A> be to start Tomcat as a service as soon as Windows starts.=A0 So p=
resumably,=0A> the necessity of having a "startup.bat" is not evident anymo=
re).=0A=0AIt's a little unclear as to what the OP request is. It sounds lik=
e the OP has two requirements:=0A=0A1. Deal with Tomcat in a development en=
vironment using NetBeans=0A=0ATo me this means starting, stopping, debuggin=
g, launching with the security manager, etc. That's hard to do when you don=
't own / completely control the service.=0A=0AThe same problem exists in Li=
nux. People want a system-wide Tomcat but want to use NetBean's deploy and =
debug facilities. There are all sorts of interesting permissions problems w=
ith this.=0A=0ANetBeans operates by deploying a context.xml file as [app-na=
me].xml in the appropriate Engine/host directory. The application is actual=
ly run out of [project-name]/build. This works fine, and you can do a lot o=
f dynamic updates in this fashion.=0A=0AWhat happens when the user of the I=
DE doesn't have access to post a context. xml to the appropriate directory?=
 What happens when Tomcat doesn't have access to read a user's [project-nam=
e]/build directory?=0A=0ASo for this use case, it's far easier and cleaner =
to maintain your own copy of Tomcat that can be registered, managed, and co=
ntrolled by NetBeans.=0A=0A2. Demonstrate works in progress to other develo=
pers=0A=0APutting aside for the moment that turning development box into a =
demonstration server may not be a good thing, it's sometimes handy. For thi=
s I was recommending a system-wide Tomcat (run as a service). You then just=
 use the manager application to update it with the latest demonstration-rea=
dy software.=0A=0AI think this has a few advantages. You don't show off int=
ermediate (and potentially embarrassing) code. The service is up regardless=
 of whether you're developing or not (OP's original request).=0A=0A=0A. . .=
 . just my two cents.=0A=0A/mde/

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233847-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 30 03:33:23 2012
Return-Path: <users-return-233847-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C637C9E5F
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 30 Apr 2012 03:33:23 +0000 (UTC)
Received: (qmail 16965 invoked by uid 500); 30 Apr 2012 03:33:17 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 16565 invoked by uid 500); 30 Apr 2012 03:33:17 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 16340 invoked by uid 99); 30 Apr 2012 03:33:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 03:33:16 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=FREEMAIL_FORGED_REPLYTO,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [98.138.229.41] (HELO nm31-vm1.bullet.mail.ne1.yahoo.com) (98.138.229.41)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 30 Apr 2012 03:33:07 +0000
Received: from [98.138.90.48] by nm31.bullet.mail.ne1.yahoo.com with NNFMP; 30 Apr 2012 03:32:45 -0000
Received: from [98.138.89.196] by tm1.bullet.mail.ne1.yahoo.com with NNFMP; 30 Apr 2012 03:32:45 -0000
Received: from [127.0.0.1] by omp1054.mail.ne1.yahoo.com with NNFMP; 30 Apr 2012 03:32:45 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 548585.69448.bm@omp1054.mail.ne1.yahoo.com
Received: (qmail 59423 invoked by uid 60001); 30 Apr 2012 03:32:45 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1335756765; bh=qpEXEaCTigUQTr+2LcDqxCLRzspL/lU0UHXFNlHjKWQ=; h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=Jqj7hnE+BaVedEtz5jttRRSVbj3c/T3pZGxGqVEFxZiu87PAhLrNkAW3wz355+gOeJXuWhyCYm4dC1aFA6NUtfNgVxGLUOGqCtLuJNaVRhfaaJQRJm3wnefX/7E2v64+l19iNDg1bCX6vIUlyl5AgeLv2ZoB1ZBHz8JyP4pICO8=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=X9HpXSQwhmMB4CCeCIGqaBa1iLk3YRecA/BoYT3qNuqenSmp2x/8zkS6pTqJPu43HKDEWQnwemLCRBgA1436r1GtgWan47rZ39rEv3ZvjdQZBFohYv/JNv83F6HMrxgycRWXTuTj8eyMCf/wDzmpxzae9xOGHpsilby9uKTGLiY=;
X-YMail-OSG: JBUnrDAVM1kz62oQk.iWnsGJpY.pMfApKftit5XLwZzWDSl
 JpZsj76k6ouHSjvgdrpaFPb3Y8qePIb3dUDc5isN5l9O6G9vxD1FIiWHn_Q2
 qzNXWEuOMEmmbOx1rZXaxqsqmcy68P_A_fkaeqEXOt.1BjeF47Q3sbghebue
 _0KgWkaYPVJ.K1VJzOrVVZEColCN3YVhuMARIopc.j4Nvp9zq3LwYbAjZNXQ
 _H8bGm3I6jd.uLvwj__WAPdw4BHZ3sBAbKEd63fIiUos89E9w3.kcT_jivEh
 Bbxama_uVOy9FaiPI9KhkeeZWculf3GkwjkUOx5eYfP3R_FmmOSnHFFc7Xwc
 RB8hxqLnbbOrW68rXWJcZ9CDxQ3NOHmhrdaB9IlLmkcDfEwDlcT3.8ifTBLR
 tOJ0fo_6tBrAeTxqPs99b6Np.7BjGaJHG39PmfYRYvF7Jq7jIsIfV_6mm.gt
 yglSLMC2k89eP.xbSbiinA_chVLZYdVSQ3kzOwTIkM02kt4jZJ0se7DLbOO.
 nubgML4LB08PDFAl4w0zXU4n4VHtlAq6DkPMqOR_T
Received: from [71.134.9.186] by web125504.mail.ne1.yahoo.com via HTTP; Sun, 29 Apr 2012 20:32:45 PDT
X-Mailer: YahooMailWebService/0.8.118.349524
References: <4F9B79B5.3060203@poonam.org> <CAOHnQjoPb=OY07P27GLrH6jpwJWfaxnrek1CCAf+h4CdyZH_Og@mail.gmail.com> <4F9BD526.2090100@ice-sa.com> <1335632275.59879.YahooMailNeo@web125505.mail.ne1.yahoo.com> <4F9DB032.70604@ice-sa.com> 
Message-ID: <1335756765.22426.YahooMailNeo@web125504.mail.ne1.yahoo.com>
Date: Sun, 29 Apr 2012 20:32:45 -0700 (PDT)
From: Mark Eggers <its_toasted@yahoo.com>
Reply-To: Mark Eggers <its_toasted@yahoo.com>
Subject: Re: How to run Tomcat as Service on windows start up.
To: Tomcat Users List <users@tomcat.apache.org>,
  Tomcat Users List <users@tomcat.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

>________________________________=0A> From: Andr=E9 Warnier <aw@ice-sa.com>=
=0A>To: Tomcat Users List <users@tomcat.apache.org> =0A>Sent: Sunday, April=
 29, 2012 2:18 PM=0A>Subject: Re: How to run Tomcat as Service on windows s=
tart up.=0A=0A=0A>> Mark Eggers wrote:=0A>> NetBeans will complain that it =
cannot find the startup.bat and shutdown.bat=0A>> required to do these task=
s if you install the service.=0A=0A>=0A> Presumably then, you could replace=
 startup.bat and shutdown.bat=0A> by similarly-named .bat files which respe=
ctively do=0A>net start "Apache Tomcat"=0A>and=0A>net stop "Apache Tomcat"=
=0A>(to keep it simple)=0A>=0A=0AI suppose you could. I don't know how intr=
usive NetBeans' investigation of the scripts are. In Windows Vista and Wind=
ows 7, UAC might become a problem. I'm not a Windows person, so I'd have to=
 investigate this.=0A=0A> Similarly, it should be possible to create .bat f=
iles which run the Tomcat=A0=0A> wrapper tomcatX.exe with the appropriate a=
rguments to start, stop, or run=A0=0A> Tomcat in debug mode.=0A=0AFrom my r=
ecollection of the service, don't you have to configure the service for deb=
ug using the service configuration program? I'm not sure how you would hand=
le that through NetBeans, since I believe it simply does what start.bat / c=
atalina.bat require (pass the debug argument to catalina.bat).=0A=0ASo, you=
 might need a single startup.bat and shutdown.bat that would determine whic=
h service to run, and which service was running . . . .=0A=0A>=0A> No ?=0A>=
=0A>(Although, if I understood the OP's request correctly, the point here w=
ould=0A> be to start Tomcat as a service as soon as Windows starts.=A0 So p=
resumably,=0A> the necessity of having a "startup.bat" is not evident anymo=
re).=0A=0AIt's a little unclear as to what the OP request is. It sounds lik=
e the OP has two requirements:=0A=0A1. Deal with Tomcat in a development en=
vironment using NetBeans=0A=0ATo me this means starting, stopping, debuggin=
g, launching with the security manager, etc. That's hard to do when you don=
't own / completely control the service.=0A=0AThe same problem exists in Li=
nux. People want a system-wide Tomcat but want to use NetBean's deploy and =
debug facilities. There are all sorts of interesting permissions problems w=
ith this.=0A=0ANetBeans operates by deploying a context.xml file as [app-na=
me].xml in the appropriate Engine/host directory. The application is actual=
ly run out of [project-name]/build. This works fine, and you can do a lot o=
f dynamic updates in this fashion.=0A=0AWhat happens when the user of the I=
DE doesn't have access to post a context. xml to the appropriate directory?=
 What happens when Tomcat doesn't have access to read a user's [project-nam=
e]/build directory?=0A=0ASo for this use case, it's far easier and cleaner =
to maintain your own copy of Tomcat that can be registered, managed, and co=
ntrolled by NetBeans.=0A=0A2. Demonstrate works in progress to other develo=
pers=0A=0APutting aside for the moment that turning development box into a =
demonstration server may not be a good thing, it's sometimes handy. For thi=
s I was recommending a system-wide Tomcat (run as a service). You then just=
 use the manager application to update it with the latest demonstration-rea=
dy software.=0A=0AI think this has a few advantages. You don't show off int=
ermediate (and potentially embarrassing) code. The service is up regardless=
 of whether you're developing or not (OP's original request).=0A=0A=0A. . .=
 . just my two cents.=0A=0A/mde/

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233848-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 30 04:24:31 2012
Return-Path: <users-return-233848-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 26C9F9A4C
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 30 Apr 2012 04:24:31 +0000 (UTC)
Received: (qmail 28586 invoked by uid 500); 30 Apr 2012 04:24:27 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 28252 invoked by uid 500); 30 Apr 2012 04:24:27 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 28220 invoked by uid 99); 30 Apr 2012 04:24:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 04:24:25 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.138.91.134] (HELO nm4-vm3.bullet.mail.ne1.yahoo.com) (98.138.91.134)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 30 Apr 2012 04:24:18 +0000
Received: from [98.138.90.48] by nm4.bullet.mail.ne1.yahoo.com with NNFMP; 30 Apr 2012 04:23:57 -0000
Received: from [98.138.89.160] by tm1.bullet.mail.ne1.yahoo.com with NNFMP; 30 Apr 2012 04:23:57 -0000
Received: from [127.0.0.1] by omp1016.mail.ne1.yahoo.com with NNFMP; 30 Apr 2012 04:23:57 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 920141.30159.bm@omp1016.mail.ne1.yahoo.com
Received: (qmail 93094 invoked by uid 60001); 30 Apr 2012 04:23:57 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1335759837; bh=4o4R/YGLJ4xFanh0Mro8FMhrAHNUMKgR6bmhff6PD3E=; h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=MVzLMUPO8qo+8pm7nevOyS+Ujvo/z+xiQCTa6Nzc6HvznZLE8ohJ8fDabX2adKb1kiMKUS9Y7YVBpWV7uEUQVZiyaI90VbXHRE4cV/UXuz4S0G4l0G9TlSswm/+fWgd+FH9Ugj2/p03ze/LWTUwqYhp7IiHwotzz2h7VDNr8WlM=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=O2r9J4uIf1vy82FiAeRdA5UxTafWpgQvTXTW3sCl7GkPnrAUV23I+lQbckc0yvQfJkFDc8cbEb2HyCgWnnt1hbM5cCrxjCeVA/tcOiwQUHKqar/5V2MJo30O2hIulP55E74DPYadgP7U7IfabAlMr7Z9ox2fcFv8xUYh4SCt/dw=;
X-YMail-OSG: P7JUAxkVM1kWou7RukdJ8U_DrwLBcGhX.jVqjBJyZPKaWdt
 xsPJt3oHcW4GCUnmLpMamTQDuybWHqKZ.KpURSOR3C_pNCN6D11VgnId7C53
 LbE_yltb13rtPV7dj_dUYwKQwf879i3vtrl3J4eVqn3Yl_J7OBGUTiQWQEjQ
 6NjXyVpFsakUeURg7fUp0ZttJt1GHjs0vtSLYabOevQnpTciAO4ISmeTuuhA
 _nWsFlVzt7j34Yjwbqs9uiyhNmKjbx5htVwcpjSwmrV94dzo4xlGSVY7Cj_c
 hQTqbZqG0pYrgEXj9ywpzKVlNu_VFZEMcbWCLPzhmoesj1jrQvlrwGN.5yp4
 YriwP_ZNtT6BNsYK0XYJOxMyFG0RuQ5YwBBTzeaLuV7N.cQfmtk6alasmdA9
 5JLTjZYWrqnDX0fNpS5hbsCCbnDQpZkCFy.6zOAEB2sPQOLougeS5c9Fb6Dn
 qiSEKu3cPfsz4kA1K0kT2b3zAh6vSomJ5y.HFKXwRDQkXkGxqNFWVcUo43GX
 DtG3WuvyjIMbOCgPNtUri9j0Nqt0qQip10T8fc6tRYKDtTovg1Tydci1vJ0w
 m3uHkkXDcArcD0JlrTIg94j1aHPbnGzJV6HUye9IC5MQgnP9m5BR_xP9Zp29
 RT7Fn.0vhMAdY
Received: from [71.134.9.186] by web125505.mail.ne1.yahoo.com via HTTP; Sun, 29 Apr 2012 21:23:57 PDT
X-Mailer: YahooMailWebService/0.8.118.349524
References: <4F9DB867.2000704@pidster.com> <2141145777.196896.1335750596376.JavaMail.root@sz0170a.emeryville.ca.mail.comcast.net>
Message-ID: <1335759837.69775.YahooMailNeo@web125505.mail.ne1.yahoo.com>
Date: Sun, 29 Apr 2012 21:23:57 -0700 (PDT)
From: Mark Eggers <its_toasted@yahoo.com>
Reply-To: Mark Eggers <its_toasted@yahoo.com>
Subject: Re: Running Swing app under Tomcat 6 on Linux
To: Tomcat Users List <users@tomcat.apache.org>
In-Reply-To: <2141145777.196896.1335750596376.JavaMail.root@sz0170a.emeryville.ca.mail.comcast.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Comment inline.=0A=0ASearch for =3D=3D=3D=3D=3D=3D Comment =3D=3D=3D=3D=3D=
=3D=0A=0A----- Original Message -----=0A=0A> From: "dgchristensen@comcast.n=
et" <dgchristensen@comcast.net>=0A> To: Tomcat Users List <users@tomcat.apa=
che.org>=0A> Cc: =0A> Sent: Sunday, April 29, 2012 6:49 PM=0A> Subject: Re:=
 Running Swing app under Tomcat 6 on Linux=0A> =0A> =0A> =0A> ----- Origina=
l Message -----=0A> From: "Pid" <pid@pidster.com>=0A> To: "Tomcat Users Lis=
t" <users@tomcat.apache.org>=0A> Sent: Sunday, April 29, 2012 5:53:43 PM=0A=
> Subject: Re: Running Swing app under Tomcat 6 on Linux=0A> =0A> On 29/04/=
2012 22:08, dgchristensen@comcast.net wrote:=0A>>  Thanks for the response =
Mark. I've done as you've suggested and =0A> moved the env vars to setenv.s=
h and explicitly set JAVA_HOME. Setting JAVA_HOME =0A> means I no longer ne=
ed to change the -Djava.library.path but I still get the =0A> same error (X=
11 not found). =0A>> =0A>>  I definitely have an X11 server running on the =
server (which is really my =0A> laptop; I'm running all of this locally on =
my laptop--no remoting). Is it =0A> possible that the problem occurs becaus=
e I am running Tomcat as a daemon? The =0A> command I use to start Tomcat i=
s: =0A>> =0A>>  sudo service tomcat6 start =0A>>=0A=0A=3D=3D=3D=3D=3D=3D Co=
mment =3D=3D=3D=3D=3D=3D=C2=A0=0A=0A=0AI don't know what magic the Ubuntu r=
epackaging does. If it's anything like the CentOS repackaging, it's pretty =
involved.=0A=0AOne thing you might try is the following:=0A=0A1. sudo servi=
ce tomcat6 stop=0A2. Download a copy of Tomcat from Apache=0A3. Unpack it i=
n your home directory=0A4. Edit $CATALINA_HOME/conf/tomcat-users.xml=0A5. A=
dd your application to $CATALINA_HOME/webapps=0A6. export JRE_HOME=3D[your =
Java JRE installation]=0A7. cd $CATALINA_HOME/bin=0A8. Make sure startup.sh=
 is executable=0A9. ./startup.sh=0A=0AAnd see what happens.=0A=0AAlso, run =
/sbin/chkconfig tomcat6=0A=0AIf it's on at level 3, then it's been started =
before there's an X display. However, you'd think running=C2=A0=0A=0Asudo s=
ervice tomcat6 start=0A=0Awould then fail since it should already be runnin=
g. I wonder if you're running two copies of Tomcat 6, and you've placed you=
r application in the webapps directory started at run level 3.=0A=0A=3D=3D=
=3D=3D=3D=3D Comment =3D=3D=3D=3D=3D=3D=C2=A0=C2=A0=0A=0A=0A>>  I've tried =
running startup.sh directly from the console but it =0A> doesn't work.=C2=
=A0 It looks like /etc/init.d/tomcat6 sets up some env vars =0A> before sta=
rting Tomcat.=C2=A0 I can try updating my environment so I can run =0A> sta=
rtup.sh if you think it worth attempting.=0A> =0A>>  Please don't top-post.=
=C2=A0 Answer inline instead.=0A>> =0A>>  Tomcat has no knowledge of Swing,=
 so or UI components of this nature.=0A>>  Is there a reason it has to be s=
tarted from Tomcat?=0A> =0A> The app needs to be running in the same JVM as=
 the Tomcat applications so it can =0A> access some of the application's ob=
jects.=C2=A0 Some day I may re-write it to use =0A> JMX but that's a big ch=
ange that won't happen soon.=C2=A0 Getting it to run =0A> as a "normal" Swi=
ng app under Tomcat is the expedient solution for =0A> now.=0A> =0A> I was =
assuming (perhaps wrongly) that Swing was just a collection of classes =0A>=
 that didn't need any special environment (other than a running X server).=
=0A> =0A>>  p=0A> =0A>>  Thanks,=0A>>  DG=0A>> =0A>>  ----- Original Messag=
e ----- =0A>>  From: "Mark Eggers" <its_toasted@yahoo.com> =0A>>  To: "Tomc=
at Users List" <users@tomcat.apache.org> =0A>>  Sent: Saturday, April 28, 2=
012 6:50:07 PM =0A>>  Subject: Re: Running Swing app under Tomcat 6 on Linu=
x =0A>> =0A>>  Comments and questions are in line. Please note I run Fedora=
 / CentOS / =0A> Redhat and I'm not so familiar with Ubuntu. =0A>> =0A>>  -=
---- Original Message ----- =0A>> =0A>>>  From: "dgchristensen@comcast.net"=
 =0A> <dgchristensen@comcast.net> =0A>>>  To: users@tomcat.apache.org =0A>>=
>  Cc: =0A>>>  Sent: Saturday, April 28, 2012 1:11 PM =0A>>>  Subject: Runn=
ing Swing app under Tomcat 6 on Linux =0A>>> =0A>>>  My version info: =0A>>=
> =0A>>>  =E2=80=A2 Tomcat 6.0.28 =0A>>>  =E2=80=A2 Java 1.6 =0A>>>  =E2=80=
=A2 Ubuntu 10.4 =0A>>> =0A>>> =0A>>>  I have a small debugging/monitoring a=
pp written in Java/Swing that =0A> I'd like =0A>>>  to run inside Tomcat to=
 help with debugging. The app is started by =0A>>>  dynamically loading the=
 monitoring class from a webservice running =0A> under =0A>>>  Tomcat. The =
works in Windows (multiple flavors) but I'm having =0A> problems =0A>>>  ge=
tting this running on Ubuntu. What I've tried so far: =0A>> =0A>>  What doe=
s this give you that monitoring the application via JMX (see =0A> VisualVM,=
 jconsole), and debugging with your favorite IDE (NetBeans, Eclipse, =0A> I=
ntelliJ) doesn't give you? You can actually do both locally as well as =0A>=
 remotely (with a little bit of setup). =0A>> =0A>>> =0A>>>  1) First error=
 I got was an Headless exception. Since the app is a GUI =0A> app I =0A>>> =
 can't run in headless mode. After searching around I changed =0A> Tomcat's=
 =0A>>>  library path (via -Djava.library.path in catalina.sh) to point to =
the =0A>>>  client lib (ie. .../java-6-sun-1.6.0.26/jre/lib/i386/client) in=
stead of =0A> the =0A>>>  server lib. =0A>> =0A>>  Try setting JRE_HOME in =
the environment to point to a JRE installation =0A> instead. Or use JAVA_HO=
ME and point to the JDK. Tomcat will figure things out. =0A>> =0A>>  If you=
r environment is not set up by default to do that (mine is with =0A> custom=
.sh in /etc/profiles.d), create and use a setenv.sh script in =0A> CATALINA=
_HOME. In this set any CATALINA_OPTS, JAVA_OPTS, and other environment =0A>=
 variables you need to. =0A>> =0A>>> =0A>>>  2) After changing the libs the=
 next error was that DISPLAY wasn't =0A> set. After =0A>>>  setting DISPLAY=
=3D0.0 in catalina.sh I get "Can't connect to X11 =0A> with =0A>>>  DISPLAY=
=3D0.0" error. I've tried different values for DISPLAY =0A> (e.g. =0A>>>  l=
ocalhost:0.0) and nothing makes a difference. I've also tried =0A> fiddling=
 =0A>>>  around with the policies in case there's a permissions error. See =
=0A> below for =0A>>>  the call stack. =0A>> =0A>>  Are you running an X se=
rver? By that, are I mean is Ubuntu showing up in =0A> whatever GUI you've =
chosen (I guess Gnome 2 is that version's default)? =0A>> =0A>>  If you onl=
y have a command line interface, then there's no place to =0A> create the s=
creen. You can play games with a virtual frame buffer, but that will =0A> j=
ust allow your program to run, but without any screen output (obviously). =
=0A>> =0A>>  Again, don't set the DISPLAY environment variable in catalina.=
sh. Set =0A> this in setenv.sh in the bin directory of CATALINA_HOME. There=
 are lots of =0A> scenarios here. Three common ones come to mind. =0A>> =0A=
>>  1. Local X server =0A>> =0A>>  You're at the console and running in a G=
UI environment. The display =0A> environment variable should already be set=
 (typically :0.0). If you start Tomcat =0A> with your application in this e=
nvironment, the GUI interface should just appear. =0A> =0A>> =0A>>  2. Remo=
te client, accessing the GUI via a VNC server (such as TightVNC) =0A>> =0A>=
>  Your display environment should already be set. For example, I'm =0A> cu=
rrently on a remote CentOS 5.8 system via VNC. My DISPLAY environment varia=
ble =0A> is set to :0.2. If you start Tomcat with your application in this =
environment, =0A> the GUI interface should just appear in the VNC viewer (f=
or example TightVNC). =0A>> =0A>>  3. Remote client, X server =0A>> =0A>>  =
Note that an X server means your PC is serving the screen, keyboard, and =
=0A> mouse to a remote client (your application). To accomplish this you'll=
 have =0A> to have an X server running (if you're on Windows, try XMing), a=
nd =0A> you'll have to set the DISPLAY variable appropriately. Running Java=
 swing =0A> applications in this fashion is not very pleasant especially if=
 your program is =0A> graphics-intensive. =0A>> =0A>>>  The webservice app =
is a simple RESTEasy implementation. Since this =0A> works in =0A>>>  Windo=
ws I'm assuming (perhaps erroneously) that this can work in =0A> Linux. Any=
 =0A>>>  help would be appreciated. =0A>>> =0A>>>  Thanks, =0A>>>  DG =0A>>=
> =0A>>>  java . lang . InternalError : Can 't connect to X11 window server=
 =0A> using =0A>>>  ' : 0 . 0 ' as the value of the DISPLAY variable. =0A>>=
>  sun.awt.X11GraphicsEnvironment.initDisplay(Native Method) =0A>>> =0A> su=
n.awt.X11GraphicsEnvironment.access$100(X11GraphicsEnvironment.java:52) =0A=
>>>  sun.awt.X11GraphicsEnvironment$1.run(X11GraphicsEnvironment.java:155) =
=0A>>>  java.security.AccessController.doPrivileged(Native Method) =0A>>> =
=0A> sun.awt.X11GraphicsEnvironment.<clinit>(X11GraphicsEnvironment.java:13=
1) =0A>>>  java.lang.Class.forName0(Native Method) =0A>>>  java.lang.Class.=
forName(Class.java:169) =0A>>> =0A> java.awt.GraphicsEnvironment.getLocalGr=
aphicsEnvironment(GraphicsEnvironment.java:68) =0A> =0A>>> =0A>>>  java.awt=
.Window.init(Window.java:380) =0A>>>  java.awt.Window.<init>(Window.java:43=
3) =0A>>>  java.awt.Frame.<init>(Frame.java:403) =0A>>>  java.awt.Frame.<in=
it>(Frame.java:368) =0A>>>  javax.swing.JFrame.<init>(JFrame.java:158) =0A>=
>> =0A> com.quinsoft.zeidon.objectbrowser.ObjectBrowser.startup(ObjectBrows=
er.java:60) =0A>>> =0A>> =0A>> =0A>>  This should work just fine if you're =
running an X server on your Ubuntu =0A> system. The DISPLAY environment var=
iable should be :0.0 (no spaces) for a local =0A> machine. =0A>> =0A>>  . .=
 . . just my two cents. =0A>>  /mde/ 

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233849-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 30 08:59:22 2012
Return-Path: <users-return-233849-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B25D9C272
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 30 Apr 2012 08:59:22 +0000 (UTC)
Received: (qmail 69444 invoked by uid 500); 30 Apr 2012 08:59:19 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 69154 invoked by uid 500); 30 Apr 2012 08:59:12 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 69124 invoked by uid 99); 30 Apr 2012 08:59:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 08:59:11 +0000
X-ASF-Spam-Status: No, hits=-0.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rthirunavukkarasu23@gmail.com designates 209.85.217.173 as permitted sender)
Received: from [209.85.217.173] (HELO mail-lb0-f173.google.com) (209.85.217.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 08:59:05 +0000
Received: by lbbgk15 with SMTP id gk15so1058888lbb.18
        for <users@tomcat.apache.org>; Mon, 30 Apr 2012 01:58:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=3PnfKMp1sB+rJGLMASVopM1HF5gM5BPFq3yz9FTmv0w=;
        b=JGStapV/zR7MCor7A8oUEgVq9vfm+7XA/4c3VOF6b4JFrgdT6Ut4PPnlLvaNL2ZrRj
         1AiIDjSyXV4HhFzN+UhYfqKhHX3VESq4pg0cqwnYe+Asme+obmsV9J4jbFtZvlAhkQtt
         hl867M/7BAOFpPrI7X/mqTxERqDuSznIIR65QWLrF+qdzvF2ZgyDB0OmaofeeFrWQQeB
         SXXsscUJS9GRZgN4aWUWBSuWdkNoTDujGaFzf/bPzCmEB7eifeVDNgoTKJEq5v9U2+0S
         dFvG8+v+uNMHKjOfA5PkqM+yUC5iXl4tcbjLIRwb7lZTP9jK9VKQ74wXXgWWmv7oMMjx
         SbmQ==
MIME-Version: 1.0
Received: by 10.112.82.234 with SMTP id l10mr321979lby.50.1335776324917; Mon,
 30 Apr 2012 01:58:44 -0700 (PDT)
Received: by 10.112.85.132 with HTTP; Mon, 30 Apr 2012 01:58:44 -0700 (PDT)
Date: Mon, 30 Apr 2012 14:28:44 +0530
Message-ID: <CAMSN5ZYFqZ0aF3fKSatfC3p1mfhiLBEutsJfD0n5vRFx0kZ__w@mail.gmail.com>
Subject: SNI (Server Name Indication) supports in Tomcat (7.0.27)
From: Reka Thirunavukkarasu <rthirunavukkarasu23@gmail.com>
To: users@tomcat.apache.org
Content-Type: text/plain; charset=UTF-8

Hi

I'm having virtual hosts as named based virtual host in tomcat and
deploying webapps inside that virtual host. I want to provide secured
connection to access particular virtual hosts (not all) based on user
requirement. I went through the mailing list to get the idea. But
mostly, it was suggested to go for ip basis or using wild card to
support SSL in virtual host. FYI: we want to use only tomcat to
support such feature.

ip basis won't be much effective to us, since we plan to use one ip
for all the virtual host. Using wild card will degrade the performance
from user, since we ask the user to choose his own virtual host name
in our implementation.

Does there any solution exist to support SSL for named based virtual
host?  [1] suggested that tomcat is supporting SNI. But i couldn't
find any materials regarding that. Can you please provide any material
to got through to support SNI?

[1]. http://en.wikipedia.org/wiki/Server_Name_Indication#Support


Thanks,
Reka.

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233850-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 30 09:04:27 2012
Return-Path: <users-return-233850-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5C4AEC385
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 30 Apr 2012 09:04:27 +0000 (UTC)
Received: (qmail 87757 invoked by uid 500); 30 Apr 2012 09:04:24 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 87680 invoked by uid 500); 30 Apr 2012 09:04:23 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 87658 invoked by uid 99); 30 Apr 2012 09:04:22 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 09:04:22 +0000
Received: from localhost (HELO [192.168.23.9]) (127.0.0.1)
  (smtp-auth username markt, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 09:04:22 +0000
Message-ID: <4F9E5593.8020805@apache.org>
Date: Mon, 30 Apr 2012 10:04:19 +0100
From: Mark Thomas <markt@apache.org>
User-Agent: Mozilla/5.0 (Windows NT 5.2; WOW64; rv:12.0) Gecko/20120420 Thunderbird/12.0
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: SNI (Server Name Indication) supports in Tomcat (7.0.27)
References: <CAMSN5ZYFqZ0aF3fKSatfC3p1mfhiLBEutsJfD0n5vRFx0kZ__w@mail.gmail.com>
In-Reply-To: <CAMSN5ZYFqZ0aF3fKSatfC3p1mfhiLBEutsJfD0n5vRFx0kZ__w@mail.gmail.com>
X-Enigmail-Version: 1.4.1
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

On 30/04/2012 09:58, Reka Thirunavukkarasu wrote:
> Can you please provide any material
> to got through to support SNI?

http://tomcat.markmail.org/thread/q6d5czzlgih3r2ys

Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233851-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 30 09:31:36 2012
Return-Path: <users-return-233851-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AD2A096F3
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 30 Apr 2012 09:31:36 +0000 (UTC)
Received: (qmail 56908 invoked by uid 500); 30 Apr 2012 09:31:33 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 56851 invoked by uid 500); 30 Apr 2012 09:31:33 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 56826 invoked by uid 99); 30 Apr 2012 09:31:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 09:31:32 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jeffmaury@gmail.com designates 209.85.212.177 as permitted sender)
Received: from [209.85.212.177] (HELO mail-wi0-f177.google.com) (209.85.212.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 09:31:26 +0000
Received: by wibhj13 with SMTP id hj13so2105423wib.0
        for <users@tomcat.apache.org>; Mon, 30 Apr 2012 02:31:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:sender:in-reply-to:references:from:date
         :x-google-sender-auth:message-id:subject:to:content-type;
        bh=teqrrCXVJXeacAoynpJADBBA9GWPB+HDbt6OAkTr7e4=;
        b=AXqzD0oPRGPYipY/xOFZbOOJ5dMGC2cZxnYUBvtO1d7M6RMj4J0IyIcIvS1eNHNeus
         OUEYEEvTL9ItGLWko7QAxaa2NPmIm3vinJsduXFZdkufjHSq4Ij2lzNujjdmafkZa9k2
         CwTHpsDIpl3EG6oEYosRW2opbsukwos3o4t2Hoa7OiMAe4/osEhOuN1I/ghlMZpMXavY
         VMZE3WchI3apDfUR4snHfU6XM2rGmlw077BGKujWasNVfGkrP1vEe5AhKJN+2thKStJZ
         +E5qo1gTnjvXcUEzl2BifFE/cR2DONzEdpw5Ry13cwfsTyBUBO3Ff6q7Wfx+4jR3Sd+7
         BScg==
Received: by 10.180.78.164 with SMTP id c4mr12426109wix.10.1335778265276; Mon,
 30 Apr 2012 02:31:05 -0700 (PDT)
MIME-Version: 1.0
Sender: jeffmaury@gmail.com
Received: by 10.223.6.79 with HTTP; Mon, 30 Apr 2012 02:30:24 -0700 (PDT)
In-Reply-To: <CAPoyBqQxhLi0+wCOi0nDjiH6Hy94WaiHPWYryA69vvvEP5tn7w@mail.gmail.com>
References: <CANyrOm6g=a41ufKBfncxd6PvGSUA1M+-nWURpLDKxpBcDOhgJg@mail.gmail.com>
 <CAPoyBqQxhLi0+wCOi0nDjiH6Hy94WaiHPWYryA69vvvEP5tn7w@mail.gmail.com>
From: Jeff MAURY <jeffmaury@jeffmaury.com>
Date: Mon, 30 Apr 2012 11:30:24 +0200
X-Google-Sender-Auth: Ib_XfkWEUIO-orpgmpYu2srZQRQ
Message-ID: <CANyrOm4rDqXjfpaYmouL7dhSjT+B3i-enfi8-i8OqdV9Pg_o2A@mail.gmail.com>
Subject: Re: Does Tomcat Maven plugin support WAR overlays ?
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=f46d0435c08200221e04bee21d4c
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d0435c08200221e04bee21d4c
Content-Type: text/plain; charset=ISO-8859-1

Salut Olivier,

I wanted to make sure I understand the goal properly.
Is the rationale for using src/main/webapp as the default docbase for
Tomcat to propagate modifications of files on the fly (JSP,...) without the
need to restart Tomcat ?
At least, I think we should make it clear in the documentation and issue a
warning at runtime when we detect an overlay.
I will open a JIRA

Jeff

On Sat, Apr 28, 2012 at 11:38 PM, Olivier Lamy <olamy@apache.org> wrote:

> Salut Jeff,
>
> Current Overlay support with tomcat6/7:run is very limited (only use
> jars from WEB-INF/lib of the the war dependencies).
> Perso, I use maven-dependency-plugin to extract war content (see
> sample in this pom [1] ).
> I agree it's "hackhish" :-) and having a better support as in the war
> plugin could be better.
> But didn't yet have any time to work on that. (can you create an issue
> for that ?)
> As my goal was to cut a release soon (ideally starting release process
> next week, I'm not sure I will have time to work on that)
>
> --
> Olivier Lamy
> Talend: http://coders.talend.com
> http://twitter.com/olamy | http://linkedin.com/in/olamy
>
> [1]
> http://svn.apache.org/repos/asf/archiva/trunk/archiva-modules/archiva-web/archiva-webapp/pom.xml
>
> 2012/4/28 Jeff MAURY <jeffmaury@jeffmaury.com>:
> > Hello,
> >
> > I am facing the following problem with WAR overlays:
> > I have a first WAR, called skeleton, that contains all necessary stuff:
> > base web.xml, index.jsp and JAR dependencies.
> > I have another WAR whose first dependency is the skeleton which is (as of
> > yet) almost empty except for the slf4j_log4 dependency.
> > When i run tomcat7:run on the skeleton, everything is ok
> > When I run tomcat7:run on the second war, Tomcat start but I am not able
> to
> > use the application.
> > I have look at the mojo code and it seems it is using the web app source
> > directory (src/main/webapp) by default so as it is empty my case, it
> cannot
> > work.
> > AM I missing something ?
> >
> > Thanks
> > Jeff
> >
> >
> > --
> > Jeff MAURY
> >
> >
> > "Legacy code" often differs from its suggested alternative by actually
> > working and scaling.
> >  - Bjarne Stroustrup
> >
> > http://www.jeffmaury.com
> > http://riadiscuss.jeffmaury.com
> > http://www.twitter.com/jeffmaury
> >
> >
> > --
> > Jeff MAURY
> >
> >
> > "Legacy code" often differs from its suggested alternative by actually
> > working and scaling.
> >  - Bjarne Stroustrup
> >
> > http://www.jeffmaury.com
> > http://riadiscuss.jeffmaury.com
> > http://www.twitter.com/jeffmaury
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>
>


-- 
Jeff MAURY


"Legacy code" often differs from its suggested alternative by actually
working and scaling.
 - Bjarne Stroustrup

http://www.jeffmaury.com
http://riadiscuss.jeffmaury.com
http://www.twitter.com/jeffmaury

--f46d0435c08200221e04bee21d4c--

From users-return-233852-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 30 10:27:15 2012
Return-Path: <users-return-233852-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 33E6FCE4B
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 30 Apr 2012 10:27:15 +0000 (UTC)
Received: (qmail 94830 invoked by uid 500); 30 Apr 2012 10:27:11 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 94691 invoked by uid 500); 30 Apr 2012 10:27:11 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 94661 invoked by uid 99); 30 Apr 2012 10:27:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 10:27:10 +0000
X-ASF-Spam-Status: No, hits=3.2 required=5.0
	tests=FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mgainty@hotmail.com designates 65.55.111.112 as permitted sender)
Received: from [65.55.111.112] (HELO blu0-omc2-s37.blu0.hotmail.com) (65.55.111.112)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 10:27:04 +0000
Received: from BLU142-W12 ([65.55.111.71]) by blu0-omc2-s37.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Mon, 30 Apr 2012 03:26:43 -0700
Message-ID: <BLU142-W12798FF14C5EB74356D7D3AE280@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_a0cde08f-96fb-4a11-a98c-1a7c0946759a_"
X-Originating-IP: [166.186.168.55]
From: Martin Gainty <mgainty@hotmail.com>
To: Tomcat Users List <users@tomcat.apache.org>, <users@maven.apache.org>
Subject: RE: mvn tomcat:deploy fails with HTTP response 401
Date: Mon, 30 Apr 2012 06:26:43 -0400
Importance: Normal
In-Reply-To:
 <CANnp+AvAN544JskYk8npVAfwzVms3mH0vu4YTW_53fZDYmnMcw@mail.gmail.com>
References:
 <CANnp+Av13q0zmbssmieoQ1_L675DOyrTx5wDc7VkoCp98ksBjw@mail.gmail.com>,<CAPoyBqTgaQh65qxGG6e8teCn8NVy2_KH65Z7_RJNRbTLK_4isA@mail.gmail.com>,<CANnp+AtkKfJs5wM1HoKs88eydJ4Ha1AB2uysgcATm70m-7Ooiw@mail.gmail.com>,<CAPoyBqSCBSCDxMC_V5wnw=zzR4qjAZtEfAYFymcx+zp1o_hiAw@mail.gmail.com>,<CANnp+Au8etMBDyiUqRZQ7z1PL-bUTNEdDhhynT=Ov7PAtivq1g@mail.gmail.com>,<CAPoyBqTa4_Mn1hfb1XesLBiRD2UE-dOQwsHYo2zaHTsXErMizw@mail.gmail.com>,<CANnp+AvAN544JskYk8npVAfwzVms3mH0vu4YTW_53fZDYmnMcw@mail.gmail.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 30 Apr 2012 10:26:43.0284 (UTC) FILETIME=[BCDB4940:01CD26BB]
X-Virus-Checked: Checked by ClamAV on apache.org

--_a0cde08f-96fb-4a11-a98c-1a7c0946759a_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable



redirecting to maven users ..as this is a maven issue

Thanks=2C
Martin
______________________________________________=20
Verzicht und Vertraulichkeitanmerkung/Note de d=E9ni et de confidentialit=
=E9
=20
Diese Nachricht ist vertraulich. Sollten Sie nicht der vorgesehene Empfaeng=
er sein=2C so bitten wir hoeflich um eine Mitteilung. Jede unbefugte Weiter=
leitung oder Fertigung einer Kopie ist unzulaessig. Diese Nachricht dient l=
ediglich dem Austausch von Informationen und entfaltet keine rechtliche Bin=
dungswirkung. Aufgrund der leichten Manipulierbarkeit von E-Mails koennen w=
ir keine Haftung fuer den Inhalt uebernehmen.
Ce message est confidentiel et peut =EAtre privil=E9gi=E9. Si vous n'=EAtes=
 pas le destinataire pr=E9vu=2C nous te demandons avec bont=E9 que pour sat=
isfaire informez l'exp=E9diteur. N'importe quelle diffusion non autoris=E9e=
 ou la copie de ceci est interdite. Ce message sert =E0 l'information seule=
ment et n'aura pas n'importe quel effet l=E9galement obligatoire. =C9tant d=
onn=E9 que les email peuvent facilement =EAtre sujets =E0 la manipulation=
=2C nous ne pouvons accepter aucune responsabilit=E9 pour le contenu fourni=
.


> Date: Sat=2C 28 Apr 2012 23:24:36 +0200
> Subject: Re: mvn tomcat:deploy fails with HTTP response 401
> From: hordine@gmail.com
> To: users@tomcat.apache.org
>=20
> Awesome! I added the pluginGroup and it worked now.
>=20
> Thank you!
>=20
> 2012/4/28 Olivier Lamy <olamy@apache.org>
>=20
> > Have a look here
> > http://tomcat.apache.org/maven-plugin-2.0-SNAPSHOT/index.html
> >
> > there is a section regarding content to add in ~/.m2/settings.xml
> >
> > or add the plugin declaration in the pom section build>plugins>plugin
> > (rather than pluginManagement)
> >
> > HTH
> > --
> > Olivier Lamy
> > Talend: http://coders.talend.com
> > http://twitter.com/olamy | http://linkedin.com/in/olamy
> >
> > 2012/4/28 Henrique Ordine <hordine@gmail.com>:
> > > Thanks again for your help.
> > >
> > > I added <pluginRepositories> to my POM=2C but if I use tomcat6:deploy=
 or
> > > tomcat6:run=2C Maven says:
> > >
> > > The plugin 'org.apache.maven.plugins:maven-tomcat6-plugin' does not e=
xist
> > > or no valid version could be found
> > >
> > > I'm using Maven=2C 2.2.0 by the way.
> > >
> > > 2012/4/27 Olivier Lamy <olamy@apache.org>
> > >
> > >> Add
> > >>  <pluginRepositories>
> > >>    <pluginRepository>
> > >>      <id>apache.snapshots</id>
> > >>      <name>Apache Snapshots</name>
> > >>      <url>http://repository.apache.org/content/groups/snapshots-grou=
p/
> > >> </url>
> > >>      <releases>
> > >>        <enabled>false</enabled>
> > >>      </releases>
> > >>      <snapshots>
> > >>        <enabled>true</enabled>
> > >>      </snapshots>
> > >>    </pluginRepository>
> > >>  </pluginRepositories>
> > >>
> > >> Note now you must use tomcat6:run or tomcat7:run (depending tomcat
> > >> version you want to use).
> > >>
> > >> I'd like to know the command line you are using ? It must be
> > >> tomcat6:deploy or tomcat7:deploy
> > >>
> > >> 2012/4/27 Henrique Ordine <hordine@gmail.com>:
> > >> > Thanks for your reply.
> > >> >
> > >> > I made the changes that you suggested but tomcat:deploy still fail=
s
> > with
> > >> the
> > >> > same error.
> > >> >
> > >> > tomcat:run works=2C but it was already working before.
> > >> >
> > >> > My POM file is attached=2C if you could have a look at it=2C it wo=
uld be
> > >> great.
> > >> > It's a small POM=2C I've only just started my App.
> > >> >
> > >> > Thanks in advance=2C
> > >> >
> > >> > Op 27 april 2012 12:14 schreef Olivier Lamy <olamy@apache.org> het
> > >> volgende:
> > >> >>
> > >> >> Hello=2C
> > >> >>
> > >> >> That's something which has been fixed in trunk (I will probably
> > >> >> release a 2.0 next week).
> > >> >>
> > >> >>
> > >> >> 2012/4/27 Henrique Ordine <hordine@gmail.com>:
> > >> >> > Hi everybody=2C
> > >> >> >
> > >> >> > I'm trying to deploy my Maven Web App on my local Tomcat using =
the
> > >> >> > tomcat:deploy maven plugin=2C but the Manager application fails=
 with
> > a
> > >> >> > response code 401.
> > >> >> >
> > >> >> > I have Tomcat 6 installed on Mac OS Leopard=2C with Java 1.5. I
> > manage
> > >> to
> > >> >> > access my Tomcat/manager app with the user "hordine"=2C that I
> > >> configured
> > >> >> > and
> > >> >> > deploy
> > >> >> >
> > >> >> > I've configured my tomcat-users.xml=2C settings.xml=2C and POM =
files=2C
> > like
> > >> >> > this:
> > >> >> >
> > >> >> > I've added this user to my tomcat-users.xml:
> > >> >> >  <role rolename=3D"tomcat"/>
> > >> >> >  <role rolename=3D"manager"/>
> > >> >> >  <role rolename=3D"manager-script"/>
> > >> >> >  <user username=3D"tomcat" password=3D"tomcat" roles=3D"tomcat"=
/>
> > >> >> >  <user username=3D"maventomcat" password=3D"maventomcat"
> > roles=3D"manager"/>
> > >> >> >  <user username=3D"hordine" password=3D"hordine" roles=3D"manag=
er=2C
> > >> >> > manager-script"/>
> > >> >> >
> > >> >> >
> > >> >> > I've added this server to my settings.xml:
> > >> >> > <servers>
> > >> >> >    <server>
> > >> >> >        <id>hordineLocalTomcat</id>
> > >> >> >        <username>hordine</username>
> > >> >> >        <password>hordine</password>
> > >> >> >    </server>
> > >> >> > </servers>
> > >> >> >
> > >> >> > And I've configured my POM like this:
> > >> >> >
> > >> >> > <build>
> > >> >> >
> > >> >> > <finalName>hTask-web</finalName>
> > >> >> >
> > >> >> >  <pluginManagement>
> > >> >> >
> > >> >> >  <plugins>
> > >> >> >
> > >> >> >  <plugin>
> > >> >> >
> > >> >> >         <groupId>org.apache.tomcat.maven</groupId>
> > >> >> >
> > >> >> >           <artifactId>tomcat-maven-plugin</artifactId>
> > >> >> >
> > >> >> >           <version>1.1</version>
> > >> >>
> > >> >> Sure of that ????
> > >> >>
> > >> >> But to test if your issue is fixed in trunk try
> > >> >> <version>2.0-SNAPSHOT</version>
> > >> >>
> > >> >> see mojo declaration and repositories here:
> > >> >>
> > http://tomcat.apache.org/maven-plugin-2.0-SNAPSHOT/snapshot-test.html
> > >> >>
> > >> >> >
> > >> >> >           <configuration>
> > >> >> >
> > >> >> >   <url>http://localhost:8080/manager</url>
> > >> >> >
> > >> >> >   <server>hordineLocalTomcat</server>
> > >> >> >
> > >> >> >   <path>/hTask-web</path>
> > >> >> >
> > >> >> >  </configuration>
> > >> >> >
> > >> >> >  </plugin>
> > >> >> >
> > >> >> >  </plugins>
> > >> >> >
> > >> >> >  </pluginManagement>
> > >> >> >
> > >> >> > </build>
> > >> >> >
> > >> >> >
> > >> >> > I'd appreciate any help.
> > >> >> >
> > >> >> > This is the entire error's stack trace:
> > >> >> >
> > >> >> > Embedded error: Server returned HTTP response code: 401 for URL=
:
> > >> >> > http://localhost:8080/manager/deploy?path=3D%2FhTask-web&war=3D
> > >> >> > [INFO]
> > >> >> >
> > >> --------------------------------------------------------------------=
----
> > >> >> > [INFO] Trace
> > >> >> > org.apache.maven.lifecycle.LifecycleExecutionException: Cannot
> > invoke
> > >> >> > Tomcat manager
> > >> >> > at
> > >> >> >
> > >> >> >
> > >>
> > org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(Defaul=
tLifecycleExecutor.java:703)
> > >> >> > at
> > >> >> >
> > >> >> >
> > >>
> > org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeStandaloneGo=
al(DefaultLifecycleExecutor.java:553)
> > >> >> > at
> > >> >> >
> > >> >> >
> > >>
> > org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(Default=
LifecycleExecutor.java:523)
> > >> >> > at
> > >> >> >
> > >> >> >
> > >>
> > org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandl=
eFailures(DefaultLifecycleExecutor.java:371)
> > >> >> > at
> > >> >> >
> > >> >> >
> > >>
> > org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments=
(DefaultLifecycleExecutor.java:332)
> > >> >> > at
> > >> >> >
> > >> >> >
> > >>
> > org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLife=
cycleExecutor.java:181)
> > >> >> > at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:35=
6)
> > >> >> > at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:137)
> > >> >> > at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
> > >> >> > at
> > >> >> >
> > >> org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:=
41)
> > >> >> > at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
> > >> >> > at
> > >> >> >
> > >> >> >
> > >>
> > sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.ja=
va:39)
> > >> >> > at
> > >> >> >
> > >> >> >
> > >>
> > sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccesso=
rImpl.java:25)
> > >> >> > at java.lang.reflect.Method.invoke(Method.java:592)
> > >> >> > at
> > org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
> > >> >> > at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
> > >> >> > at
> > >> org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430=
)
> > >> >> > at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
> > >> >> > Caused by: org.apache.maven.plugin.MojoExecutionException: Cann=
ot
> > >> invoke
> > >> >> > Tomcat manager
> > >> >> > at
> > >> >> >
> > >> >> >
> > >>
> > org.codehaus.mojo.tomcat.AbstractCatalinaMojo.execute(AbstractCatalinaM=
ojo.java:149)
> > >> >> > at
> > >> >> >
> > >> >> >
> > >>
> > org.codehaus.mojo.tomcat.AbstractWarCatalinaMojo.execute(AbstractWarCat=
alinaMojo.java:70)
> > >> >> > at
> > >> >> >
> > >> >> >
> > >>
> > org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginM=
anager.java:483)
> > >> >> > at
> > >> >> >
> > >> >> >
> > >>
> > org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(Defaul=
tLifecycleExecutor.java:678)
> > >> >> > ... 17 more
> > >> >> > Caused by: java.io.IOException: Server returned HTTP response c=
ode:
> > >> 401
> > >> >> > for
> > >> >> > URL: http://localhost:8080/manager/deploy?path=3D%2FhTask-web&w=
ar=3D
> > >> >> > at
> > >> >> >
> > >> >> >
> > >>
> > sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConne=
ction.java:1196)
> > >> >> > at
> > >> org.codehaus.mojo.tomcat.TomcatManager.invoke(TomcatManager.java:604=
)
> > >> >> > at
> > >> >> >
> > >>
> > org.codehaus.mojo.tomcat.TomcatManager.deployImpl(TomcatManager.java:66=
2)
> > >> >> > at
> > >> org.codehaus.mojo.tomcat.TomcatManager.deploy(TomcatManager.java:295=
)
> > >> >> > at
> > >> >> >
> > >> >> >
> > >>
> > org.codehaus.mojo.tomcat.AbstractDeployWarMojo.deployWar(AbstractDeploy=
WarMojo.java:85)
> > >> >> > at
> > >> >> >
> > >> >> >
> > >>
> > org.codehaus.mojo.tomcat.AbstractDeployMojo.invokeManager(AbstractDeplo=
yMojo.java:85)
> > >> >> > at
> > >> >> >
> > >> >> >
> > >>
> > org.codehaus.mojo.tomcat.AbstractCatalinaMojo.execute(AbstractCatalinaM=
ojo.java:141)
> > >> >> > ... 20 more
> > >> >> >
> > >> >> >
> > >> >> > --
> > >> >> > Henrique Ordine
> > >> >> >
> > >> >> > http://hordine.wordpress.com/
> > >> >>
> > >> >>
> > >> >>
> > >> >> --
> > >> >> Olivier Lamy
> > >> >> Talend: http://coders.talend.com
> > >> >> http://twitter.com/olamy | http://linkedin.com/in/olamy
> > >> >>
> > >> >> -----------------------------------------------------------------=
----
> > >> >> To unsubscribe=2C e-mail: users-unsubscribe@tomcat.apache.org
> > >> >> For additional commands=2C e-mail: users-help@tomcat.apache.org
> > >> >>
> > >> >
> > >> >
> > >> >
> > >> > --
> > >> > Henrique Ordine
> > >> >
> > >> > http://hordine.wordpress.com/
> > >> >
> > >> >
> > >> >
> > >> >
> > >> > ------------------------------------------------------------------=
---
> > >> > To unsubscribe=2C e-mail: users-unsubscribe@tomcat.apache.org
> > >> > For additional commands=2C e-mail: users-help@tomcat.apache.org
> > >>
> > >>
> > >>
> > >> --
> > >> Olivier Lamy
> > >> Talend: http://coders.talend.com
> > >> http://twitter.com/olamy | http://linkedin.com/in/olamy
> > >>
> > >> --------------------------------------------------------------------=
-
> > >> To unsubscribe=2C e-mail: users-unsubscribe@tomcat.apache.org
> > >> For additional commands=2C e-mail: users-help@tomcat.apache.org
> > >>
> > >>
> > >
> > >
> > > --
> > > Henrique Ordine
> > >
> > > http://hordine.wordpress.com/
> >
> > ---------------------------------------------------------------------
> > To unsubscribe=2C e-mail: users-unsubscribe@tomcat.apache.org
> > For additional commands=2C e-mail: users-help@tomcat.apache.org
> >
> >
>=20
>=20
> --=20
> Henrique Ordine
>=20
> http://hordine.wordpress.com/
 		 	   		  =

--_a0cde08f-96fb-4a11-a98c-1a7c0946759a_--

From users-return-233853-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 30 10:56:39 2012
Return-Path: <users-return-233853-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B1E7AC6DA
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 30 Apr 2012 10:56:39 +0000 (UTC)
Received: (qmail 73229 invoked by uid 500); 30 Apr 2012 10:56:36 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 73159 invoked by uid 500); 30 Apr 2012 10:56:36 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 73139 invoked by uid 99); 30 Apr 2012 10:56:35 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 10:56:35 +0000
Received: from localhost (HELO mail-yx0-f173.google.com) (127.0.0.1)
  (smtp-auth username olamy, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 10:56:35 +0000
Received: by yenr5 with SMTP id r5so1515285yen.18
        for <users@tomcat.apache.org>; Mon, 30 Apr 2012 03:56:34 -0700 (PDT)
Received: by 10.236.161.42 with SMTP id v30mr15384345yhk.127.1335783394381;
 Mon, 30 Apr 2012 03:56:34 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.100.14.18 with HTTP; Mon, 30 Apr 2012 03:56:14 -0700 (PDT)
In-Reply-To: <BLU142-W12798FF14C5EB74356D7D3AE280@phx.gbl>
References: <CANnp+Av13q0zmbssmieoQ1_L675DOyrTx5wDc7VkoCp98ksBjw@mail.gmail.com>
 <CAPoyBqTgaQh65qxGG6e8teCn8NVy2_KH65Z7_RJNRbTLK_4isA@mail.gmail.com>
 <CANnp+AtkKfJs5wM1HoKs88eydJ4Ha1AB2uysgcATm70m-7Ooiw@mail.gmail.com>
 <CAPoyBqSCBSCDxMC_V5wnw=zzR4qjAZtEfAYFymcx+zp1o_hiAw@mail.gmail.com>
 <CANnp+Au8etMBDyiUqRZQ7z1PL-bUTNEdDhhynT=Ov7PAtivq1g@mail.gmail.com>
 <CAPoyBqTa4_Mn1hfb1XesLBiRD2UE-dOQwsHYo2zaHTsXErMizw@mail.gmail.com>
 <CANnp+AvAN544JskYk8npVAfwzVms3mH0vu4YTW_53fZDYmnMcw@mail.gmail.com> <BLU142-W12798FF14C5EB74356D7D3AE280@phx.gbl>
From: Olivier Lamy <olamy@apache.org>
Date: Mon, 30 Apr 2012 12:56:14 +0200
Message-ID: <CAPoyBqTmMWwYSEZpU+mOcsK90E0bVJrqmwp_X6PWLUCUyHVt+g@mail.gmail.com>
Subject: Re: mvn tomcat:deploy fails with HTTP response 401
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,
That's not an issue.
See documentation here:
http://maven.apache.org/guides/introduction/introduction-to-plugin-prefix-m=
apping.html



2012/4/30 Martin Gainty <mgainty@hotmail.com>:
>
>
> redirecting to maven users ..as this is a maven issue
>
> Thanks,
> Martin
> ______________________________________________
> Verzicht und Vertraulichkeitanmerkung/Note de d=E9ni et de confidentialit=
=E9
>
> Diese Nachricht ist vertraulich. Sollten Sie nicht der vorgesehene Empfae=
nger sein, so bitten wir hoeflich um eine Mitteilung. Jede unbefugte Weiter=
leitung oder Fertigung einer Kopie ist unzulaessig. Diese Nachricht dient l=
ediglich dem Austausch von Informationen und entfaltet keine rechtliche Bin=
dungswirkung. Aufgrund der leichten Manipulierbarkeit von E-Mails koennen w=
ir keine Haftung fuer den Inhalt uebernehmen.
> Ce message est confidentiel et peut =EAtre privil=E9gi=E9. Si vous n'=EAt=
es pas le destinataire pr=E9vu, nous te demandons avec bont=E9 que pour sat=
isfaire informez l'exp=E9diteur. N'importe quelle diffusion non autoris=E9e=
 ou la copie de ceci est interdite. Ce message sert =E0 l'information seule=
ment et n'aura pas n'importe quel effet l=E9galement obligatoire. =C9tant d=
onn=E9 que les email peuvent facilement =EAtre sujets =E0 la manipulation, =
nous ne pouvons accepter aucune responsabilit=E9 pour le contenu fourni.
>
>
>> Date: Sat, 28 Apr 2012 23:24:36 +0200
>> Subject: Re: mvn tomcat:deploy fails with HTTP response 401
>> From: hordine@gmail.com
>> To: users@tomcat.apache.org
>>
>> Awesome! I added the pluginGroup and it worked now.
>>
>> Thank you!
>>
>> 2012/4/28 Olivier Lamy <olamy@apache.org>
>>
>> > Have a look here
>> > http://tomcat.apache.org/maven-plugin-2.0-SNAPSHOT/index.html
>> >
>> > there is a section regarding content to add in ~/.m2/settings.xml
>> >
>> > or add the plugin declaration in the pom section build>plugins>plugin
>> > (rather than pluginManagement)
>> >
>> > HTH
>> > --
>> > Olivier Lamy
>> > Talend: http://coders.talend.com
>> > http://twitter.com/olamy | http://linkedin.com/in/olamy
>> >
>> > 2012/4/28 Henrique Ordine <hordine@gmail.com>:
>> > > Thanks again for your help.
>> > >
>> > > I added <pluginRepositories> to my POM, but if I use tomcat6:deploy =
or
>> > > tomcat6:run, Maven says:
>> > >
>> > > The plugin 'org.apache.maven.plugins:maven-tomcat6-plugin' does not =
exist
>> > > or no valid version could be found
>> > >
>> > > I'm using Maven, 2.2.0 by the way.
>> > >
>> > > 2012/4/27 Olivier Lamy <olamy@apache.org>
>> > >
>> > >> Add
>> > >> =A0<pluginRepositories>
>> > >> =A0 =A0<pluginRepository>
>> > >> =A0 =A0 =A0<id>apache.snapshots</id>
>> > >> =A0 =A0 =A0<name>Apache Snapshots</name>
>> > >> =A0 =A0 =A0<url>http://repository.apache.org/content/groups/snapsho=
ts-group/
>> > >> </url>
>> > >> =A0 =A0 =A0<releases>
>> > >> =A0 =A0 =A0 =A0<enabled>false</enabled>
>> > >> =A0 =A0 =A0</releases>
>> > >> =A0 =A0 =A0<snapshots>
>> > >> =A0 =A0 =A0 =A0<enabled>true</enabled>
>> > >> =A0 =A0 =A0</snapshots>
>> > >> =A0 =A0</pluginRepository>
>> > >> =A0</pluginRepositories>
>> > >>
>> > >> Note now you must use tomcat6:run or tomcat7:run (depending tomcat
>> > >> version you want to use).
>> > >>
>> > >> I'd like to know the command line you are using ? It must be
>> > >> tomcat6:deploy or tomcat7:deploy
>> > >>
>> > >> 2012/4/27 Henrique Ordine <hordine@gmail.com>:
>> > >> > Thanks for your reply.
>> > >> >
>> > >> > I made the changes that you suggested but tomcat:deploy still fai=
ls
>> > with
>> > >> the
>> > >> > same error.
>> > >> >
>> > >> > tomcat:run works, but it was already working before.
>> > >> >
>> > >> > My POM file is attached, if you could have a look at it, it would=
 be
>> > >> great.
>> > >> > It's a small POM, I've only just started my App.
>> > >> >
>> > >> > Thanks in advance,
>> > >> >
>> > >> > Op 27 april 2012 12:14 schreef Olivier Lamy <olamy@apache.org> he=
t
>> > >> volgende:
>> > >> >>
>> > >> >> Hello,
>> > >> >>
>> > >> >> That's something which has been fixed in trunk (I will probably
>> > >> >> release a 2.0 next week).
>> > >> >>
>> > >> >>
>> > >> >> 2012/4/27 Henrique Ordine <hordine@gmail.com>:
>> > >> >> > Hi everybody,
>> > >> >> >
>> > >> >> > I'm trying to deploy my Maven Web App on my local Tomcat using=
 the
>> > >> >> > tomcat:deploy maven plugin, but the Manager application fails =
with
>> > a
>> > >> >> > response code 401.
>> > >> >> >
>> > >> >> > I have Tomcat 6 installed on Mac OS Leopard, with Java 1.5. I
>> > manage
>> > >> to
>> > >> >> > access my Tomcat/manager app with the user "hordine", that I
>> > >> configured
>> > >> >> > and
>> > >> >> > deploy
>> > >> >> >
>> > >> >> > I've configured my tomcat-users.xml, settings.xml, and POM fil=
es,
>> > like
>> > >> >> > this:
>> > >> >> >
>> > >> >> > I've added this user to my tomcat-users.xml:
>> > >> >> > =A0<role rolename=3D"tomcat"/>
>> > >> >> > =A0<role rolename=3D"manager"/>
>> > >> >> > =A0<role rolename=3D"manager-script"/>
>> > >> >> > =A0<user username=3D"tomcat" password=3D"tomcat" roles=3D"tomc=
at"/>
>> > >> >> > =A0<user username=3D"maventomcat" password=3D"maventomcat"
>> > roles=3D"manager"/>
>> > >> >> > =A0<user username=3D"hordine" password=3D"hordine" roles=3D"ma=
nager,
>> > >> >> > manager-script"/>
>> > >> >> >
>> > >> >> >
>> > >> >> > I've added this server to my settings.xml:
>> > >> >> > <servers>
>> > >> >> > =A0 =A0<server>
>> > >> >> > =A0 =A0 =A0 =A0<id>hordineLocalTomcat</id>
>> > >> >> > =A0 =A0 =A0 =A0<username>hordine</username>
>> > >> >> > =A0 =A0 =A0 =A0<password>hordine</password>
>> > >> >> > =A0 =A0</server>
>> > >> >> > </servers>
>> > >> >> >
>> > >> >> > And I've configured my POM like this:
>> > >> >> >
>> > >> >> > <build>
>> > >> >> >
>> > >> >> > <finalName>hTask-web</finalName>
>> > >> >> >
>> > >> >> > =A0<pluginManagement>
>> > >> >> >
>> > >> >> > =A0<plugins>
>> > >> >> >
>> > >> >> > =A0<plugin>
>> > >> >> >
>> > >> >> > =A0 =A0 =A0 =A0 <groupId>org.apache.tomcat.maven</groupId>
>> > >> >> >
>> > >> >> > =A0 =A0 =A0 =A0 =A0 <artifactId>tomcat-maven-plugin</artifactI=
d>
>> > >> >> >
>> > >> >> > =A0 =A0 =A0 =A0 =A0 <version>1.1</version>
>> > >> >>
>> > >> >> Sure of that ????
>> > >> >>
>> > >> >> But to test if your issue is fixed in trunk try
>> > >> >> <version>2.0-SNAPSHOT</version>
>> > >> >>
>> > >> >> see mojo declaration and repositories here:
>> > >> >>
>> > http://tomcat.apache.org/maven-plugin-2.0-SNAPSHOT/snapshot-test.html
>> > >> >>
>> > >> >> >
>> > >> >> > =A0 =A0 =A0 =A0 =A0 <configuration>
>> > >> >> >
>> > >> >> > =A0 <url>http://localhost:8080/manager</url>
>> > >> >> >
>> > >> >> > =A0 <server>hordineLocalTomcat</server>
>> > >> >> >
>> > >> >> > =A0 <path>/hTask-web</path>
>> > >> >> >
>> > >> >> > =A0</configuration>
>> > >> >> >
>> > >> >> > =A0</plugin>
>> > >> >> >
>> > >> >> > =A0</plugins>
>> > >> >> >
>> > >> >> > =A0</pluginManagement>
>> > >> >> >
>> > >> >> > </build>
>> > >> >> >
>> > >> >> >
>> > >> >> > I'd appreciate any help.
>> > >> >> >
>> > >> >> > This is the entire error's stack trace:
>> > >> >> >
>> > >> >> > Embedded error: Server returned HTTP response code: 401 for UR=
L:
>> > >> >> > http://localhost:8080/manager/deploy?path=3D%2FhTask-web&war=
=3D
>> > >> >> > [INFO]
>> > >> >> >
>> > >> -------------------------------------------------------------------=
-----
>> > >> >> > [INFO] Trace
>> > >> >> > org.apache.maven.lifecycle.LifecycleExecutionException: Cannot
>> > invoke
>> > >> >> > Tomcat manager
>> > >> >> > at
>> > >> >> >
>> > >> >> >
>> > >>
>> > org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(Defau=
ltLifecycleExecutor.java:703)
>> > >> >> > at
>> > >> >> >
>> > >> >> >
>> > >>
>> > org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeStandaloneG=
oal(DefaultLifecycleExecutor.java:553)
>> > >> >> > at
>> > >> >> >
>> > >> >> >
>> > >>
>> > org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(Defaul=
tLifecycleExecutor.java:523)
>> > >> >> > at
>> > >> >> >
>> > >> >> >
>> > >>
>> > org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHand=
leFailures(DefaultLifecycleExecutor.java:371)
>> > >> >> > at
>> > >> >> >
>> > >> >> >
>> > >>
>> > org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegment=
s(DefaultLifecycleExecutor.java:332)
>> > >> >> > at
>> > >> >> >
>> > >> >> >
>> > >>
>> > org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLif=
ecycleExecutor.java:181)
>> > >> >> > at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:3=
56)
>> > >> >> > at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:137=
)
>> > >> >> > at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
>> > >> >> > at
>> > >> >> >
>> > >> org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java=
:41)
>> > >> >> > at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>> > >> >> > at
>> > >> >> >
>> > >> >> >
>> > >>
>> > sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.j=
ava:39)
>> > >> >> > at
>> > >> >> >
>> > >> >> >
>> > >>
>> > sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccess=
orImpl.java:25)
>> > >> >> > at java.lang.reflect.Method.invoke(Method.java:592)
>> > >> >> > at
>> > org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
>> > >> >> > at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
>> > >> >> > at
>> > >> org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:43=
0)
>> > >> >> > at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
>> > >> >> > Caused by: org.apache.maven.plugin.MojoExecutionException: Can=
not
>> > >> invoke
>> > >> >> > Tomcat manager
>> > >> >> > at
>> > >> >> >
>> > >> >> >
>> > >>
>> > org.codehaus.mojo.tomcat.AbstractCatalinaMojo.execute(AbstractCatalina=
Mojo.java:149)
>> > >> >> > at
>> > >> >> >
>> > >> >> >
>> > >>
>> > org.codehaus.mojo.tomcat.AbstractWarCatalinaMojo.execute(AbstractWarCa=
talinaMojo.java:70)
>> > >> >> > at
>> > >> >> >
>> > >> >> >
>> > >>
>> > org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPlugin=
Manager.java:483)
>> > >> >> > at
>> > >> >> >
>> > >> >> >
>> > >>
>> > org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(Defau=
ltLifecycleExecutor.java:678)
>> > >> >> > ... 17 more
>> > >> >> > Caused by: java.io.IOException: Server returned HTTP response =
code:
>> > >> 401
>> > >> >> > for
>> > >> >> > URL: http://localhost:8080/manager/deploy?path=3D%2FhTask-web&=
war=3D
>> > >> >> > at
>> > >> >> >
>> > >> >> >
>> > >>
>> > sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConn=
ection.java:1196)
>> > >> >> > at
>> > >> org.codehaus.mojo.tomcat.TomcatManager.invoke(TomcatManager.java:60=
4)
>> > >> >> > at
>> > >> >> >
>> > >>
>> > org.codehaus.mojo.tomcat.TomcatManager.deployImpl(TomcatManager.java:6=
62)
>> > >> >> > at
>> > >> org.codehaus.mojo.tomcat.TomcatManager.deploy(TomcatManager.java:29=
5)
>> > >> >> > at
>> > >> >> >
>> > >> >> >
>> > >>
>> > org.codehaus.mojo.tomcat.AbstractDeployWarMojo.deployWar(AbstractDeplo=
yWarMojo.java:85)
>> > >> >> > at
>> > >> >> >
>> > >> >> >
>> > >>
>> > org.codehaus.mojo.tomcat.AbstractDeployMojo.invokeManager(AbstractDepl=
oyMojo.java:85)
>> > >> >> > at
>> > >> >> >
>> > >> >> >
>> > >>
>> > org.codehaus.mojo.tomcat.AbstractCatalinaMojo.execute(AbstractCatalina=
Mojo.java:141)
>> > >> >> > ... 20 more
>> > >> >> >
>> > >> >> >
>> > >> >> > --
>> > >> >> > Henrique Ordine
>> > >> >> >
>> > >> >> > http://hordine.wordpress.com/
>> > >> >>
>> > >> >>
>> > >> >>
>> > >> >> --
>> > >> >> Olivier Lamy
>> > >> >> Talend: http://coders.talend.com
>> > >> >> http://twitter.com/olamy | http://linkedin.com/in/olamy
>> > >> >>
>> > >> >> ----------------------------------------------------------------=
-----
>> > >> >> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>> > >> >> For additional commands, e-mail: users-help@tomcat.apache.org
>> > >> >>
>> > >> >
>> > >> >
>> > >> >
>> > >> > --
>> > >> > Henrique Ordine
>> > >> >
>> > >> > http://hordine.wordpress.com/
>> > >> >
>> > >> >
>> > >> >
>> > >> >
>> > >> > -----------------------------------------------------------------=
----
>> > >> > To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>> > >> > For additional commands, e-mail: users-help@tomcat.apache.org
>> > >>
>> > >>
>> > >>
>> > >> --
>> > >> Olivier Lamy
>> > >> Talend: http://coders.talend.com
>> > >> http://twitter.com/olamy | http://linkedin.com/in/olamy
>> > >>
>> > >> -------------------------------------------------------------------=
--
>> > >> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>> > >> For additional commands, e-mail: users-help@tomcat.apache.org
>> > >>
>> > >>
>> > >
>> > >
>> > > --
>> > > Henrique Ordine
>> > >
>> > > http://hordine.wordpress.com/
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>> > For additional commands, e-mail: users-help@tomcat.apache.org
>> >
>> >
>>
>>
>> --
>> Henrique Ordine
>>
>> http://hordine.wordpress.com/
>



--=20
Olivier Lamy
Talend: http://coders.talend.com
http://twitter.com/olamy | http://linkedin.com/in/olamy

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233854-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 30 11:06:43 2012
Return-Path: <users-return-233854-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9CD32C726
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 30 Apr 2012 11:06:43 +0000 (UTC)
Received: (qmail 96073 invoked by uid 500); 30 Apr 2012 11:06:40 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 96013 invoked by uid 500); 30 Apr 2012 11:06:40 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 95993 invoked by uid 99); 30 Apr 2012 11:06:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 11:06:39 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of allstaraga@gmail.com designates 209.85.212.177 as permitted sender)
Received: from [209.85.212.177] (HELO mail-wi0-f177.google.com) (209.85.212.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 11:06:33 +0000
Received: by wibhj13 with SMTP id hj13so2162923wib.0
        for <users@tomcat.apache.org>; Mon, 30 Apr 2012 04:06:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=e3EcuJdO8loJ/81BgYlTNR1vcmseS9bvE+Sfy+jciHY=;
        b=jWofUrdPZQ9oZVzzqY7s9FAqzp5AJ0Ofx8U4pWjUUveU3suhhDMgFxclfpzpq73CZh
         R1v/+AHg3pzr8uBCrFeXyATj+5RAGfdE5VD9CFOQ4jz3k0DKkWJ1oIe0o5KJid6ZAo9v
         KpPhktBZdTrgBgLKGJRKXRXX4iVmb+5Mc0JmRIm5xF0tbCrRw43OmEIuO3AQVwKV6o25
         aNOgdUA0YdxF6yp6vESM33c6T3s167QkeY3mtHXzWgnPgmt/eG4A5iIQJ5gyxozdQYv+
         HgrIaWoWaDI3AhETl5CYjwXGJzSZ/+mvu/wZie/CEunnVf5gM4FpJM2kxcrCwTCaP4XG
         WYaw==
MIME-Version: 1.0
Received: by 10.180.104.230 with SMTP id gh6mr14445677wib.22.1335783970520;
 Mon, 30 Apr 2012 04:06:10 -0700 (PDT)
Received: by 10.223.93.194 with HTTP; Mon, 30 Apr 2012 04:06:10 -0700 (PDT)
Date: Mon, 30 Apr 2012 13:06:10 +0200
Message-ID: <CADmRKMwbsUZcu9oRyBu+jH+0jDMWuHBFgP=N-NwhNZMeQ_Dmag@mail.gmail.com>
Subject: mod_jk recovery when tomcat killed
From: Agnieszka Allstar <allstaraga@gmail.com>
To: users@tomcat.apache.org
Content-Type: multipart/alternative; boundary=f46d04428dca0f3ee204bee37182
X-Virus-Checked: Checked by ClamAV on apache.org

--f46d04428dca0f3ee204bee37182
Content-Type: text/plain; charset=ISO-8859-1

Hello,

I'm using httpd 2.2.22 with mod_jk 1.2.32 and 2 load balanced tomcat
workers (TC 6.0.35). I have a question about recovery in case when active
worker becomes abruptly inactive.

Here's my test scenario:
1. Web service client sends SOAP request to apache server. This client
sends requests in 2 flavors, either it is a generic SOAP call (A case) or a
soap request with some files attached with MTOM (B case). Web service is
capable of handling both types of requests.
2. Once the processing starts, I kill this tomcat with "kill -9".

The results are:
A - when tomcat1 is killed, the request is automatically transmitted to
tomcat2. Client receives correct results. This is OK.
B - when tomcat1 is killed, the request is not transmitted to tomcat2.
Client receives 502 error: bad gateway instead.

The configuration is unchanged (no recovery options set). The only
difference is the request which is obviously larger in B case (some text
files attached).
These lines I found particularly mysterious:
(tomcat1) sending request to tomcat failed (recoverable)
(tomcat1) sending request to tomcat failed (unrecoverable),  (attempt=1)

Why is one request failure considered to be recoverable and the other is
not ?

Best regards,
Kate

Logs for A:
[Fri Apr 27 12:15:11 2012] [1757184:1] [info] init_jk::mod_jk.c (3252):
mod_jk/1.2.32 () initialized
[Fri Apr 27 12:15:29 2012] [1331310:1] [info]
ajp_connection_tcp_get_message::jk_ajp_common.c (1266): (tomcat1) can't
receive the response header message fro
[Fri Apr 27 12:15:29 2012] [1331310:1] [error]
ajp_get_reply::jk_ajp_common.c (2118): (tomcat1) Tomcat is down or refused
connection. No response has been se
[Fri Apr 27 12:15:29 2012] [1331310:1] [info] ajp_service::jk_ajp_common.c
(2607): (tomcat1) sending request to tomcat failed (recoverable),
(attempt=1)
[Fri Apr 27 12:15:29 2012] [1331310:1] [info] jk_open_socket::jk_connect.c
(626): connect to x.x.x.15:8191 failed (errno=79)
[Fri Apr 27 12:15:29 2012] [1331310:1] [info]
ajp_connect_to_endpoint::jk_ajp_common.c (1008): Failed opening socket to
(x.x.x.15:8191) (errno=79)
[Fri Apr 27 12:15:29 2012] [1331310:1] [error]
ajp_send_request::jk_ajp_common.c (1630): (tomcat1) connecting to backend
failed. Tomcat is probably not start
[Fri Apr 27 12:15:29 2012] [1331310:1] [info] ajp_service::jk_ajp_common.c
(2607): (tomcat1) sending request to tomcat failed (recoverable), because
of error
[Fri Apr 27 12:15:29 2012] [1331310:1] [error] ajp_service::jk_ajp_common.c
(2626): (tomcat1) connecting to tomcat failed.
[Fri Apr 27 12:15:29 2012] [1331310:1] [info] service::jk_lb_worker.c
(1400): service failed, worker tomcat1 is in error state
[Fri Apr 27 12:15:42 2012] Req: tomcat1 15.197145 s POST 1553 200

Logs for B:
[Fri Apr 27 12:16:23 2012] [1757184:1] [info] init_jk::mod_jk.c (3252):
mod_jk/1.2.32 () initialized
[Fri Apr 27 12:19:08 2012] [1376450:1] [info]
ajp_connection_tcp_get_message::jk_ajp_common.c (1266): (tomcat1) can't
receive the response header message fro
[Fri Apr 27 12:19:08 2012] [1376450:1] [error]
ajp_get_reply::jk_ajp_common.c (2118): (tomcat1) Tomcat is down or refused
connection. No response has been se
[Fri Apr 27 12:19:08 2012] [1376450:1] [error] ajp_service::jk_ajp_common.c
(2600): (tomcat1) sending request to tomcat failed (unrecoverable),
(attempt=1)
[Fri Apr 27 12:19:08 2012] [1376450:1] [info] service::jk_lb_worker.c
(1400): service failed, worker tomcat1 is in error state
[Fri Apr 27 12:19:08 2012] [1376450:1] [error] service::jk_lb_worker.c
(1425): unrecoverable error 502, request failed. Tomcat failed in the
middle of reques
[Fri Apr 27 12:19:08 2012] [1376450:1] [error] service::jk_lb_worker.c
(1485): All tomcat instances failed, no more workers left
[Fri Apr 27 12:19:08 2012] Req: tomcat1 2.968299 s POST 0 200
[Fri Apr 27 12:19:08 2012] [1376450:1] [info] jk_handler::mod_jk.c (2678):
Service error=0 for worker=loadbalancer

--f46d04428dca0f3ee204bee37182--

From users-return-233855-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 30 11:19:54 2012
Return-Path: <users-return-233855-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AF73AC756
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 30 Apr 2012 11:19:54 +0000 (UTC)
Received: (qmail 29461 invoked by uid 500); 30 Apr 2012 11:19:51 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 29275 invoked by uid 500); 30 Apr 2012 11:19:51 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 29260 invoked by uid 99); 30 Apr 2012 11:19:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 11:19:51 +0000
X-ASF-Spam-Status: No, hits=-0.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rthirunavukkarasu23@gmail.com designates 209.85.217.173 as permitted sender)
Received: from [209.85.217.173] (HELO mail-lb0-f173.google.com) (209.85.217.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 11:19:44 +0000
Received: by lbbgk15 with SMTP id gk15so1158684lbb.18
        for <users@tomcat.apache.org>; Mon, 30 Apr 2012 04:19:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=+twpa0CsMQzIrWTrRRHniBqT4tcAIKv03W5/QUY5F0A=;
        b=lXHMXx1QT84nxbN8uFhmE1EIVPRLg7qrt/pbv+3JlZ9U2YiRVbQXg0wQZ/5UNu7lBh
         WgdyKS2t9ygtnQXMpkmEDlJae1vfiGqdSeyg3OLwx1iHuv4CU74NGWx+pCJyAfVib6wp
         03z5w0lPG/dS+vL5RQyXh56Xp6Qta1/1uDUou+QXJ5uC6aA1PtoXdkytPxOWaRJfKCE+
         Zy+om72Z32V1aKWSw8QTGvV8YCrv74z5zy/ogXbSht7gOhjwYgtEErgMoFHHIpxdRcCV
         RBF9+SQC3VZx6jQ4n/4Ue/hETvKM/T+jVHEQWw6l2Xl8p9wRezYoPPpBs6FypBbaSowB
         IzOA==
MIME-Version: 1.0
Received: by 10.152.130.138 with SMTP id oe10mr19629834lab.5.1335784764362;
 Mon, 30 Apr 2012 04:19:24 -0700 (PDT)
Received: by 10.112.85.132 with HTTP; Mon, 30 Apr 2012 04:19:24 -0700 (PDT)
In-Reply-To: <4F9E5593.8020805@apache.org>
References: <CAMSN5ZYFqZ0aF3fKSatfC3p1mfhiLBEutsJfD0n5vRFx0kZ__w@mail.gmail.com>
	<4F9E5593.8020805@apache.org>
Date: Mon, 30 Apr 2012 16:49:24 +0530
Message-ID: <CAMSN5Za4cnqw1o8vctOAgTyrd-tnYjpsG_ZxEv-f13RhV9K8OA@mail.gmail.com>
Subject: Re: SNI (Server Name Indication) supports in Tomcat (7.0.27)
From: Reka Thirunavukkarasu <rthirunavukkarasu23@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=UTF-8

Thanks. I could see all the clarifications there.

Reka

On Mon, Apr 30, 2012 at 2:34 PM, Mark Thomas <markt@apache.org> wrote:
> On 30/04/2012 09:58, Reka Thirunavukkarasu wrote:
>> Can you please provide any material
>> to got through to support SNI?
>
> http://tomcat.markmail.org/thread/q6d5czzlgih3r2ys
>
> Mark
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>



-- 
Regards,
Reka
:)

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233856-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 30 12:07:08 2012
Return-Path: <users-return-233856-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 35D6C9666
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 30 Apr 2012 12:07:08 +0000 (UTC)
Received: (qmail 61206 invoked by uid 500); 30 Apr 2012 12:07:03 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 61155 invoked by uid 500); 30 Apr 2012 12:07:03 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 61140 invoked by uid 99); 30 Apr 2012 12:07:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 12:07:03 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of esmond.pitt@bigpond.com designates 61.9.168.146 as permitted sender)
Received: from [61.9.168.146] (HELO nskntmtas04p.mx.bigpond.com) (61.9.168.146)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 12:06:54 +0000
Received: from nskntcmgw08p ([61.9.169.168]) by nskntmtas04p.mx.bigpond.com
          with ESMTP
          id <20120430120630.HLUF6123.nskntmtas04p.mx.bigpond.com@nskntcmgw08p>
          for <users@tomcat.apache.org>; Mon, 30 Apr 2012 12:06:30 +0000
Received: from HP6910P ([120.151.14.51])
	by nskntcmgw08p with BigPond Outbound
	id 4C6V1j00H165irc01C6Vs4; Mon, 30 Apr 2012 12:06:30 +0000
X-Authority-Analysis: v=2.0 cv=T/cOvo2Q c=1 sm=1
 a=4u9tzJkkMcV5r5ibEi6r6w==:17 a=lLTguUbAwloA:10 a=JDadKst33uMA:10
 a=kj9zAlcOel0A:10 a=WXD7OAvlz2Pns4Czr-UA:9 a=CjuIK1q_8ugA:10
 a=4u9tzJkkMcV5r5ibEi6r6w==:117
From: "Esmond Pitt" <esmond.pitt@bigpond.com>
To: "'Tomcat Users List'" <users@tomcat.apache.org>
References: <SNT129-DS151B4EFF626A36436F5897A42A0@phx.gbl> <4F9C6959.2050006@ice-sa.com>
In-Reply-To: <4F9C6959.2050006@ice-sa.com>
Subject: RE: multiple mod_jk server mappings and JSESSIONID
Date: Mon, 30 Apr 2012 22:06:23 +1000
Message-ID: <DA870606F8854EB8AFA86957EE694DFD@HP6910P>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.1.7601.17609
Thread-Index: Ac0mvR/gI+bXo7VGTy6SKOUn97rLcQADC48w
X-Virus-Checked: Checked by ClamAV on apache.org

> I am not sure that mod_jk mappings follow the principle of "longest match
wins".

They follow a logic of their own whereby wildcard matches outrank
non-wildcard matches, so for example:

JkMount /* 
JkUnmount /

doesn't operate to unmount the Tomcat root, not because it is shorter but
because it isn't a wildcard (see mod_jk.log).

The best advice I can give you about mod_jk is not to use it: ditch it and
use mod_proxy_ajp instead. Much better, much simpler, and no messing about
between the Tomcat and Apache configurations.

EJP



---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233857-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 30 14:40:50 2012
Return-Path: <users-return-233857-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 31DC59A17
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 30 Apr 2012 14:40:50 +0000 (UTC)
Received: (qmail 57415 invoked by uid 500); 30 Apr 2012 14:40:46 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 57356 invoked by uid 500); 30 Apr 2012 14:40:46 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 57346 invoked by uid 99); 30 Apr 2012 14:40:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 14:40:46 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [76.96.62.32] (HELO qmta03.westchester.pa.mail.comcast.net) (76.96.62.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 14:40:39 +0000
Received: from omta11.westchester.pa.mail.comcast.net ([76.96.62.36])
	by qmta03.westchester.pa.mail.comcast.net with comcast
	id 4E3Y1j0020mv7h053EgKEG; Mon, 30 Apr 2012 14:40:19 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta11.westchester.pa.mail.comcast.net with comcast
	id 4EgJ1j01138FjT13XEgJmw; Mon, 30 Apr 2012 14:40:19 +0000
Message-ID: <4F9EA451.9090904@christopherschultz.net>
Date: Mon, 30 Apr 2012 10:40:17 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: Running Swing app under Tomcat 6 on Linux
References: <1598068298.164850.1335643880788.JavaMail.root@sz0170a.emeryville.ca.mail.comcast.net>
In-Reply-To: <1598068298.164850.1335643880788.JavaMail.root@sz0170a.emeryville.ca.mail.comcast.net>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

DG,

On 4/28/12 4:11 PM, dgchristensen@comcast.net wrote:
> I have a small debugging/monitoring app written in Java/Swing that
>  I'd like to run inside Tomcat to help with debugging.

You are asking for all kinds of pain, here.

> The app is started by dynamically loading the monitoring class from
> a webservice running under Tomcat.

So, the GUI monitoring app loads classes from a webservice hosted by
the webapp? Elsewhere in this thread, you said it had to run in the
same JVM because it directly-accesses some of the objects. Those two
statements seem to contradict one another.

> The works in Windows (multiple flavors) but I'm having problems 
> getting this running on Ubuntu.

The presence of the always-running GUI environment in Microsoft
Windows is the reason stuff like this works there.

> What I've tried so far:
> 
> 1) First error I got was an Headless exception. Since the app is a
>  GUI app I can't run in headless mode. After searching around I 
> changed Tomcat's library path (via -Djava.library.path in 
> catalina.sh) to point to the client lib (ie. 
> .../java-6-sun-1.6.0.26/jre/lib/i386/client)> instead of the
> server lib.

You should be able to do this with the "-client" command-line
parameter. I'm not sure why you would need this at all, except maybe
- -server in your environment also implies "headless", which can also be
changed using a command-line parameter. You shouldn't have to mess
with the java.library.path.

> 2) After changing the libs the next error was that DISPLAY wasn't 
> set. After setting DISPLAY=0.0 in catalina.sh I get "Can't connect
> to X11 with DISPLAY=0.0" error. I've tried different values for
> DISPLAY (e.g. localhost:0.0) and nothing makes a difference. I've
> also tried fiddling around with the policies in case there's a
> permissions error. See below for the call stack.

As Mark says, you'll need to set this to your actual DISPLAY. When
you're logged-in to your laptop, open an xterm and type "echo
$DISPLAY". Use whatever value that is to attach to your X display.

If Tomcat is running as a user other than you, then you might also
have to do an "xhost +" as yourself to allow any client to connect to
your X server.

> The webservice app is a simple RESTEasy implementation. Since this 
> works in Windows I'm assuming (perhaps erroneously) that this can 
> work in Linux. Any help would be appreciated.

I'm sure it *can* work in Linux, but the whole thing sounds insane to me.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+epFEACgkQ9CaO5/Lv0PD5TQCfaHXWYeFPrDR2H5OMjOyFMHsI
fjQAniXwykkxw5sMfWlCvI9n0zHYNRT8
=LHQA
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233858-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 30 14:49:24 2012
Return-Path: <users-return-233858-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E185B9A2A
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 30 Apr 2012 14:49:23 +0000 (UTC)
Received: (qmail 79876 invoked by uid 500); 30 Apr 2012 14:49:20 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 79779 invoked by uid 500); 30 Apr 2012 14:49:20 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 79770 invoked by uid 99); 30 Apr 2012 14:49:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 14:49:20 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [76.96.62.24] (HELO qmta01.westchester.pa.mail.comcast.net) (76.96.62.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 14:49:14 +0000
Received: from omta17.westchester.pa.mail.comcast.net ([76.96.62.89])
	by qmta01.westchester.pa.mail.comcast.net with comcast
	id 4A9z1j0041vXlb851EoucF; Mon, 30 Apr 2012 14:48:54 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta17.westchester.pa.mail.comcast.net with comcast
	id 4Eot1j00C38FjT13dEotGP; Mon, 30 Apr 2012 14:48:53 +0000
Message-ID: <4F9EA654.6060903@christopherschultz.net>
Date: Mon, 30 Apr 2012 10:48:52 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: mod_jk recovery when tomcat killed
References: <CADmRKMwbsUZcu9oRyBu+jH+0jDMWuHBFgP=N-NwhNZMeQ_Dmag@mail.gmail.com>
In-Reply-To: <CADmRKMwbsUZcu9oRyBu+jH+0jDMWuHBFgP=N-NwhNZMeQ_Dmag@mail.gmail.com>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Kate,

On 4/30/12 7:06 AM, Agnieszka Allstar wrote:
> Here's my test scenario: 1. Web service client sends SOAP request
> to apache server. This client sends requests in 2 flavors, either
> it is a generic SOAP call (A case) or a soap request with some
> files attached with MTOM (B case). Web service is capable of
> handling both types of requests. 2. Once the processing starts, I
> kill this tomcat with "kill -9".
> 
> The results are: A - when tomcat1 is killed, the request is
> automatically transmitted to tomcat2. Client receives correct
> results. This is OK. B - when tomcat1 is killed, the request is not
> transmitted to tomcat2. Client receives 502 error: bad gateway
> instead.

Are you using POST to send both messages (A case and B case)?

What if you send a very *small* attachment via MTOM? I'm wondering
what the real difference is, since in both cases you should be sending
HTTP POST... the only difference should be larger Content-Length.

I wonder if mod_jk can only failover the current request (with no
error to the client) if the request is small enough (or only a small
amount has already been transferred to the failing server).

> [Fri Apr 27 12:19:08 2012] [1376450:1] [error]
> service::jk_lb_worker.c (1425): unrecoverable error 502, request
> failed. Tomcat failed in the middle of reques [Fri Apr 27 12:19:08
> 2012] [1376450:1] [error] service::jk_lb_worker.c (1485): All
> tomcat instances failed, no more workers left

This looks like you have killed both tomcat instances and mod_jk can
contact neither of them. Are you sure you have gotten mod_jk back in
communication with both servers between "A case" and "B case" runs? If
you haven't, this isn't really a valid test.

(It looks like some of your mod_jk.log lines have been truncated...
was that simply a copy/paste error?)

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+eplQACgkQ9CaO5/Lv0PCDWgCdGiF1xBEIUg3tDfj5bV/HjH+m
ZkYAoIcFbG7EmdyKm0Jha15HrGOzsC88
=PQqY
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233859-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 30 14:52:51 2012
Return-Path: <users-return-233859-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 783919A39
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 30 Apr 2012 14:52:51 +0000 (UTC)
Received: (qmail 89085 invoked by uid 500); 30 Apr 2012 14:52:48 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 88815 invoked by uid 500); 30 Apr 2012 14:52:48 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 88805 invoked by uid 99); 30 Apr 2012 14:52:48 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 14:52:48 +0000
Received: from localhost (HELO mail-ee0-f45.google.com) (127.0.0.1)
  (smtp-auth username olamy, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 14:52:47 +0000
Received: by eeit10 with SMTP id t10so1275411eei.18
        for <users@tomcat.apache.org>; Mon, 30 Apr 2012 07:52:45 -0700 (PDT)
Received: by 10.14.127.76 with SMTP id c52mr4482409eei.37.1335797565709; Mon,
 30 Apr 2012 07:52:45 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.213.13.77 with HTTP; Mon, 30 Apr 2012 07:52:24 -0700 (PDT)
In-Reply-To: <CANyrOm4rDqXjfpaYmouL7dhSjT+B3i-enfi8-i8OqdV9Pg_o2A@mail.gmail.com>
References: <CANyrOm6g=a41ufKBfncxd6PvGSUA1M+-nWURpLDKxpBcDOhgJg@mail.gmail.com>
 <CAPoyBqQxhLi0+wCOi0nDjiH6Hy94WaiHPWYryA69vvvEP5tn7w@mail.gmail.com> <CANyrOm4rDqXjfpaYmouL7dhSjT+B3i-enfi8-i8OqdV9Pg_o2A@mail.gmail.com>
From: Olivier Lamy <olamy@apache.org>
Date: Mon, 30 Apr 2012 16:52:24 +0200
Message-ID: <CAPoyBqQF=1d05ArerZWkHi65JXykbyPVSmBuT4=NTTONA7Dv0w@mail.gmail.com>
Subject: Re: Does Tomcat Maven plugin support WAR overlays ?
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

2012/4/30 Jeff MAURY <jeffmaury@jeffmaury.com>:
> Salut Olivier,
>
> I wanted to make sure I understand the goal properly.
> Is the rationale for using src/main/webapp as the default docbase for
> Tomcat to propagate modifications of files on the fly (JSP,...) without t=
he
> need to restart Tomcat ?
Yup that's the goal. Fast dev mode (i.e. no restart) when only
modifying jsp or static resources (html, js, css etc...)
> At least, I think we should make it clear in the documentation and issue =
a
> warning at runtime when we detect an overlay.
What I can do is to extract the war content (except WEB-INF/lib as
it's already added) under the warSourceDirectory plugin parameter
(default src/main/webapp) which is the docBase (but with a parameter
called extractPath relative to the docBase).
The plugin configuration part could be
          <overlays>
            <overlay>
              <groupId>org.foo</groupId>
              <artifactId>bar</artifactId>
              <extractPath>bar</extractPath>
            </overlay>
          </overlays>

What I don't like is people will have to ignore this directory in their scm

The best: extract somewhere (temporary directory) and add this as "a
symlink" in the docBase.

> I will open a JIRA
>
> Jeff
>
> On Sat, Apr 28, 2012 at 11:38 PM, Olivier Lamy <olamy@apache.org> wrote:
>
>> Salut Jeff,
>>
>> Current Overlay support with tomcat6/7:run is very limited (only use
>> jars from WEB-INF/lib of the the war dependencies).
>> Perso, I use maven-dependency-plugin to extract war content (see
>> sample in this pom [1] ).
>> I agree it's "hackhish" :-) and having a better support as in the war
>> plugin could be better.
>> But didn't yet have any time to work on that. (can you create an issue
>> for that ?)
>> As my goal was to cut a release soon (ideally starting release process
>> next week, I'm not sure I will have time to work on that)
>>
>> --
>> Olivier Lamy
>> Talend: http://coders.talend.com
>> http://twitter.com/olamy | http://linkedin.com/in/olamy
>>
>> [1]
>> http://svn.apache.org/repos/asf/archiva/trunk/archiva-modules/archiva-we=
b/archiva-webapp/pom.xml
>>
>> 2012/4/28 Jeff MAURY <jeffmaury@jeffmaury.com>:
>> > Hello,
>> >
>> > I am facing the following problem with WAR overlays:
>> > I have a first WAR, called skeleton, that contains all necessary stuff=
:
>> > base web.xml, index.jsp and JAR dependencies.
>> > I have another WAR whose first dependency is the skeleton which is (as=
 of
>> > yet) almost empty except for the slf4j_log4 dependency.
>> > When i run tomcat7:run on the skeleton, everything is ok
>> > When I run tomcat7:run on the second war, Tomcat start but I am not ab=
le
>> to
>> > use the application.
>> > I have look at the mojo code and it seems it is using the web app sour=
ce
>> > directory (src/main/webapp) by default so as it is empty my case, it
>> cannot
>> > work.
>> > AM I missing something ?
>> >
>> > Thanks
>> > Jeff
>> >
>> >
>> > --
>> > Jeff MAURY
>> >
>> >
>> > "Legacy code" often differs from its suggested alternative by actually
>> > working and scaling.
>> > =A0- Bjarne Stroustrup
>> >
>> > http://www.jeffmaury.com
>> > http://riadiscuss.jeffmaury.com
>> > http://www.twitter.com/jeffmaury
>> >
>> >
>> > --
>> > Jeff MAURY
>> >
>> >
>> > "Legacy code" often differs from its suggested alternative by actually
>> > working and scaling.
>> > =A0- Bjarne Stroustrup
>> >
>> > http://www.jeffmaury.com
>> > http://riadiscuss.jeffmaury.com
>> > http://www.twitter.com/jeffmaury
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>> For additional commands, e-mail: users-help@tomcat.apache.org
>>
>>
>
>
> --
> Jeff MAURY
>
>
> "Legacy code" often differs from its suggested alternative by actually
> working and scaling.
> =A0- Bjarne Stroustrup
>
> http://www.jeffmaury.com
> http://riadiscuss.jeffmaury.com
> http://www.twitter.com/jeffmaury



--=20
Olivier Lamy
Talend: http://coders.talend.com
http://twitter.com/olamy | http://linkedin.com/in/olamy

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233860-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 30 14:54:55 2012
Return-Path: <users-return-233860-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 89D109A3D
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 30 Apr 2012 14:54:55 +0000 (UTC)
Received: (qmail 98224 invoked by uid 500); 30 Apr 2012 14:54:51 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 98073 invoked by uid 500); 30 Apr 2012 14:54:51 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 98061 invoked by uid 99); 30 Apr 2012 14:54:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 14:54:51 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [76.96.62.80] (HELO qmta08.westchester.pa.mail.comcast.net) (76.96.62.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 14:54:44 +0000
Received: from omta21.westchester.pa.mail.comcast.net ([76.96.62.72])
	by qmta08.westchester.pa.mail.comcast.net with comcast
	id 4B2Y1j0031ZXKqc58EuPXV; Mon, 30 Apr 2012 14:54:23 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta21.westchester.pa.mail.comcast.net with comcast
	id 4EuN1j01B38FjT13hEuNYD; Mon, 30 Apr 2012 14:54:22 +0000
Message-ID: <4F9EA79D.10700@christopherschultz.net>
Date: Mon, 30 Apr 2012 10:54:21 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: multiple mod_jk server mappings and JSESSIONID
References: <SNT129-DS151B4EFF626A36436F5897A42A0@phx.gbl> <4F9C6959.2050006@ice-sa.com> <DA870606F8854EB8AFA86957EE694DFD@HP6910P>
In-Reply-To: <DA870606F8854EB8AFA86957EE694DFD@HP6910P>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Esmond,

On 4/30/12 8:06 AM, Esmond Pitt wrote:
>> I am not sure that mod_jk mappings follow the principle of
>> "longest match
> wins".
> 
> They follow a logic of their own whereby wildcard matches outrank 
> non-wildcard matches, so for example:
> 
> JkMount /* JkUnmount /
> 
> doesn't operate to unmount the Tomcat root, not because it is
> shorter but because it isn't a wildcard (see mod_jk.log).
> 
> The best advice I can give you about mod_jk is not to use it: ditch
> it and use mod_proxy_ajp instead. Much better, much simpler, and no
> messing about between the Tomcat and Apache configurations.

Just because you find mod_proxy_ajp easier to configure doesn't make
it a good recommendation. The OP isn't having any problem that complex
configuration is making any easier or worse.

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+ep50ACgkQ9CaO5/Lv0PAuBQCgpYGHiYIrGuHIjyy+BVVK39oF
SCoAoJ+eFRdlfkyTQE1qiftI4d/F52oY
=6dgK
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233861-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 30 15:01:36 2012
Return-Path: <users-return-233861-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A26489A7A
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 30 Apr 2012 15:01:36 +0000 (UTC)
Received: (qmail 26301 invoked by uid 500); 30 Apr 2012 15:01:33 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 26060 invoked by uid 500); 30 Apr 2012 15:01:33 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 26048 invoked by uid 99); 30 Apr 2012 15:01:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 15:01:33 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [76.96.59.212] (HELO qmta14.westchester.pa.mail.comcast.net) (76.96.59.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 15:01:26 +0000
Received: from omta20.westchester.pa.mail.comcast.net ([76.96.62.71])
	by qmta14.westchester.pa.mail.comcast.net with comcast
	id 4EVD1j00C1YDfWL5EF15D1; Mon, 30 Apr 2012 15:01:05 +0000
Received: from Christophers-MacBook-Pro.local ([69.143.109.145])
	by omta20.westchester.pa.mail.comcast.net with comcast
	id 4F141j05T38FjT13gF157i; Mon, 30 Apr 2012 15:01:05 +0000
Message-ID: <4F9EA92F.8080509@christopherschultz.net>
Date: Mon, 30 Apr 2012 11:01:03 -0400
From: Christopher Schultz <chris@christopherschultz.net>
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.7; rv:11.0) Gecko/20120327 Thunderbird/11.0.1
MIME-Version: 1.0
To: Tomcat Users List <users@tomcat.apache.org>
Subject: Re: multiple mod_jk server mappings and JSESSIONID
References: <SNT129-DS151B4EFF626A36436F5897A42A0@phx.gbl>
In-Reply-To: <SNT129-DS151B4EFF626A36436F5897A42A0@phx.gbl>
X-Enigmail-Version: 1.4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Mike,

On 4/28/12 10:52 AM, Mike Wilson wrote:
> uriworkermap.properties /*       = serverA /path2/* = serverB 
> /path3/* = serverB /path3/xyz/* = serverA

Like Andr, I'm curious about this, too. I would have expected some of
these things to interfere with each other. Are you just using
shorthand when you say /path2/* or is that similar to your real JkMount?

> But how do I best solve the issue with each server setting its own
> JSESSIONID?

The first thing to determine is if you actually have a problem: Tomcat
can tolerate having multiple JSESSIONID cookies coming-in from a
request. It will try the JSESSIONID cookies sequentially until it
finds a valid one. So, there's no reason two webapps cannot share the
same URL space (though you're in for some surprises, occasionally).

> The browser client will see one site with one domain and one
> JSESSIONID cookie, so this will cause interference between the two
> servers when switching between pages.

Remember that a cookie also has a "path" associated with it. What are
the webapp context paths for your various webapps? If they are both
"/" (i.e. the ROOT webapp) then you are kind of screwed: the webapps
will fight each other for the JSESSIONID cookie and your client will
probably always send the wrong cookie. :(

If you have disjoint paths (/foo versus /bar) then everything will be
fine. If you have nested paths (/ versus /foo -- which is looks like
you probably do), then things will *mostly* work, except when they
don't. I had the experience of using nested paths in the past and
things became very confused under certain circumstances.

(IIRC, we were also using proxied-JSESSIONIDs through the nested URL
space to communicate back to the top-level URL space so we couldn't
have Tomcat tell us if a session id was valid or not... we had to
blindly choose one of the JSESSIONID cookies and send *that* to the
Tomcat back-end. I can see that this isn't making any sense and it was
kind of a cluster#$@*%& so forget it.)

> Does mod_jk offer any feature to solve this, or is my best bet to
> change the name of the JSESSIONID cookie on one of the servers?

I would go back to my first question: is there actually a problem? Or,
are you simply forecasting one?

- -chris
-----BEGIN PGP SIGNATURE-----
Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
Comment: GPGTools - http://gpgtools.org
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iEYEARECAAYFAk+eqS8ACgkQ9CaO5/Lv0PCYpwCeI+BSXcLhZj11prRQdRSODzMB
XDMAniFPBmAnx13PMzzoomaQfcighWmW
=wX91
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233862-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 30 15:07:24 2012
Return-Path: <users-return-233862-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DA1449A95
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 30 Apr 2012 15:07:24 +0000 (UTC)
Received: (qmail 40535 invoked by uid 500); 30 Apr 2012 15:07:21 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 40326 invoked by uid 500); 30 Apr 2012 15:07:21 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 40317 invoked by uid 99); 30 Apr 2012 15:07:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 15:07:21 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jeffmaury@gmail.com designates 74.125.82.173 as permitted sender)
Received: from [74.125.82.173] (HELO mail-we0-f173.google.com) (74.125.82.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 15:07:17 +0000
Received: by werp12 with SMTP id p12so2443209wer.18
        for <users@tomcat.apache.org>; Mon, 30 Apr 2012 08:06:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:sender:in-reply-to:references:from:date
         :x-google-sender-auth:message-id:subject:to:content-type;
        bh=Z3npG5RZgprme1CmzNHA3GFURTXz5hE2DysHwPoEg2Y=;
        b=cNRClzAnV17sBW4hIsAZ9J99m1oS5c3gj954EkmqcgSZqEzUgH8bNOieSWIX5mX0t6
         1M1r2+SJgPkOmkAYdICujtGk/uvdc9SyFdkAS7q5kw1OU2a1VUU3njzgqClh7NAxFEzq
         dpH5TPnWtALYz11NmFraEAdNzYcg4x1pSEbPHsFNBaPceRV3zDCDRBQpY2+2ItOJncD6
         FpzD0NKpSP8l2Unw5UPisbya33VxdPpzgtGkgeMJCJJIiHzoOnklCNPYwvaQ4joog5jq
         RhUcIXJijg+Ylz40EJ/aoZ1neLLe951sKq8vefrP5Wrvkb7v48eS6++WMCtZt2JrgY5g
         ZPtg==
Received: by 10.216.137.22 with SMTP id x22mr15115452wei.69.1335798415702;
 Mon, 30 Apr 2012 08:06:55 -0700 (PDT)
MIME-Version: 1.0
Sender: jeffmaury@gmail.com
Received: by 10.223.6.79 with HTTP; Mon, 30 Apr 2012 08:06:15 -0700 (PDT)
In-Reply-To: <CAPoyBqQF=1d05ArerZWkHi65JXykbyPVSmBuT4=NTTONA7Dv0w@mail.gmail.com>
References: <CANyrOm6g=a41ufKBfncxd6PvGSUA1M+-nWURpLDKxpBcDOhgJg@mail.gmail.com>
 <CAPoyBqQxhLi0+wCOi0nDjiH6Hy94WaiHPWYryA69vvvEP5tn7w@mail.gmail.com>
 <CANyrOm4rDqXjfpaYmouL7dhSjT+B3i-enfi8-i8OqdV9Pg_o2A@mail.gmail.com> <CAPoyBqQF=1d05ArerZWkHi65JXykbyPVSmBuT4=NTTONA7Dv0w@mail.gmail.com>
From: Jeff MAURY <jeffmaury@jeffmaury.com>
Date: Mon, 30 Apr 2012 17:06:15 +0200
X-Google-Sender-Auth: eOnrI81dEyuAJRfv2TFd09JVvLw
Message-ID: <CANyrOm4acrSLipKCcE-axVRSqQgdj9keAMWXbb7xQ7t1nKkctA@mail.gmail.com>
Subject: Re: Does Tomcat Maven plugin support WAR overlays ?
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=0016e6d46b830f3aba04bee6ce82
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6d46b830f3aba04bee6ce82
Content-Type: text/plain; charset=ISO-8859-1

I don't link the idea of having Maven adding some stuff except under
target. This will cause many many problems with people and SCM.
I don't get your second solution: how do you merge you temporary stuff and
src/main/webapp with a symlink ?

Jeff


On Mon, Apr 30, 2012 at 4:52 PM, Olivier Lamy <olamy@apache.org> wrote:

> 2012/4/30 Jeff MAURY <jeffmaury@jeffmaury.com>:
> > Salut Olivier,
> >
> > I wanted to make sure I understand the goal properly.
> > Is the rationale for using src/main/webapp as the default docbase for
> > Tomcat to propagate modifications of files on the fly (JSP,...) without
> the
> > need to restart Tomcat ?
> Yup that's the goal. Fast dev mode (i.e. no restart) when only
> modifying jsp or static resources (html, js, css etc...)
> > At least, I think we should make it clear in the documentation and issue
> a
> > warning at runtime when we detect an overlay.
> What I can do is to extract the war content (except WEB-INF/lib as
> it's already added) under the warSourceDirectory plugin parameter
> (default src/main/webapp) which is the docBase (but with a parameter
> called extractPath relative to the docBase).
> The plugin configuration part could be
>          <overlays>
>            <overlay>
>              <groupId>org.foo</groupId>
>              <artifactId>bar</artifactId>
>              <extractPath>bar</extractPath>
>            </overlay>
>          </overlays>
>
> What I don't like is people will have to ignore this directory in their scm
>
> The best: extract somewhere (temporary directory) and add this as "a
> symlink" in the docBase.
>
> > I will open a JIRA
> >
> > Jeff
> >
> > On Sat, Apr 28, 2012 at 11:38 PM, Olivier Lamy <olamy@apache.org> wrote:
> >
> >> Salut Jeff,
> >>
> >> Current Overlay support with tomcat6/7:run is very limited (only use
> >> jars from WEB-INF/lib of the the war dependencies).
> >> Perso, I use maven-dependency-plugin to extract war content (see
> >> sample in this pom [1] ).
> >> I agree it's "hackhish" :-) and having a better support as in the war
> >> plugin could be better.
> >> But didn't yet have any time to work on that. (can you create an issue
> >> for that ?)
> >> As my goal was to cut a release soon (ideally starting release process
> >> next week, I'm not sure I will have time to work on that)
> >>
> >> --
> >> Olivier Lamy
> >> Talend: http://coders.talend.com
> >> http://twitter.com/olamy | http://linkedin.com/in/olamy
> >>
> >> [1]
> >>
> http://svn.apache.org/repos/asf/archiva/trunk/archiva-modules/archiva-web/archiva-webapp/pom.xml
> >>
> >> 2012/4/28 Jeff MAURY <jeffmaury@jeffmaury.com>:
> >> > Hello,
> >> >
> >> > I am facing the following problem with WAR overlays:
> >> > I have a first WAR, called skeleton, that contains all necessary
> stuff:
> >> > base web.xml, index.jsp and JAR dependencies.
> >> > I have another WAR whose first dependency is the skeleton which is
> (as of
> >> > yet) almost empty except for the slf4j_log4 dependency.
> >> > When i run tomcat7:run on the skeleton, everything is ok
> >> > When I run tomcat7:run on the second war, Tomcat start but I am not
> able
> >> to
> >> > use the application.
> >> > I have look at the mojo code and it seems it is using the web app
> source
> >> > directory (src/main/webapp) by default so as it is empty my case, it
> >> cannot
> >> > work.
> >> > AM I missing something ?
> >> >
> >> > Thanks
> >> > Jeff
> >> >
> >> >
> >> > --
> >> > Jeff MAURY
> >> >
> >> >
> >> > "Legacy code" often differs from its suggested alternative by actually
> >> > working and scaling.
> >> >  - Bjarne Stroustrup
> >> >
> >> > http://www.jeffmaury.com
> >> > http://riadiscuss.jeffmaury.com
> >> > http://www.twitter.com/jeffmaury
> >> >
> >> >
> >> > --
> >> > Jeff MAURY
> >> >
> >> >
> >> > "Legacy code" often differs from its suggested alternative by actually
> >> > working and scaling.
> >> >  - Bjarne Stroustrup
> >> >
> >> > http://www.jeffmaury.com
> >> > http://riadiscuss.jeffmaury.com
> >> > http://www.twitter.com/jeffmaury
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> >> For additional commands, e-mail: users-help@tomcat.apache.org
> >>
> >>
> >
> >
> > --
> > Jeff MAURY
> >
> >
> > "Legacy code" often differs from its suggested alternative by actually
> > working and scaling.
> >  - Bjarne Stroustrup
> >
> > http://www.jeffmaury.com
> > http://riadiscuss.jeffmaury.com
> > http://www.twitter.com/jeffmaury
>
>
>
> --
> Olivier Lamy
> Talend: http://coders.talend.com
> http://twitter.com/olamy | http://linkedin.com/in/olamy
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>
>


-- 
Jeff MAURY


"Legacy code" often differs from its suggested alternative by actually
working and scaling.
 - Bjarne Stroustrup

http://www.jeffmaury.com
http://riadiscuss.jeffmaury.com
http://www.twitter.com/jeffmaury

--0016e6d46b830f3aba04bee6ce82--

From users-return-233863-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 30 15:13:48 2012
Return-Path: <users-return-233863-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B11109AC1
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 30 Apr 2012 15:13:48 +0000 (UTC)
Received: (qmail 62802 invoked by uid 500); 30 Apr 2012 15:13:45 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 62558 invoked by uid 500); 30 Apr 2012 15:13:45 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 62537 invoked by uid 99); 30 Apr 2012 15:13:44 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 15:13:44 +0000
Received: from localhost (HELO mail-ey0-f173.google.com) (127.0.0.1)
  (smtp-auth username olamy, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 15:13:43 +0000
Received: by eaaf11 with SMTP id f11so1275980eaa.18
        for <users@tomcat.apache.org>; Mon, 30 Apr 2012 08:13:41 -0700 (PDT)
Received: by 10.14.127.76 with SMTP id c52mr4495718eei.37.1335798821848; Mon,
 30 Apr 2012 08:13:41 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.213.13.77 with HTTP; Mon, 30 Apr 2012 08:13:20 -0700 (PDT)
In-Reply-To: <CANyrOm4acrSLipKCcE-axVRSqQgdj9keAMWXbb7xQ7t1nKkctA@mail.gmail.com>
References: <CANyrOm6g=a41ufKBfncxd6PvGSUA1M+-nWURpLDKxpBcDOhgJg@mail.gmail.com>
 <CAPoyBqQxhLi0+wCOi0nDjiH6Hy94WaiHPWYryA69vvvEP5tn7w@mail.gmail.com>
 <CANyrOm4rDqXjfpaYmouL7dhSjT+B3i-enfi8-i8OqdV9Pg_o2A@mail.gmail.com>
 <CAPoyBqQF=1d05ArerZWkHi65JXykbyPVSmBuT4=NTTONA7Dv0w@mail.gmail.com> <CANyrOm4acrSLipKCcE-axVRSqQgdj9keAMWXbb7xQ7t1nKkctA@mail.gmail.com>
From: Olivier Lamy <olamy@apache.org>
Date: Mon, 30 Apr 2012 17:13:20 +0200
Message-ID: <CAPoyBqS+ewsV7Nz2ZFAjmt29ZuEPT66F+cbpDy1SW=QRS35L5g@mail.gmail.com>
Subject: Re: Does Tomcat Maven plugin support WAR overlays ?
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

2012/4/30 Jeff MAURY <jeffmaury@jeffmaury.com>:
> I don't link the idea of having Maven adding some stuff except under
> target. This will cause many many problems with people and SCM.
> I don't get your second solution: how do you merge you temporary stuff an=
d
> src/main/webapp with a symlink ?

extract (except WEB-INF/lib and WEB-INF/classes) the overlay way in
/tmp/foo/

src/main/webapp/foo (a kind of symlink to to /tmp/foo)
But I have to investigate how to do that with the tomcat embed api ( :-) )



>
> Jeff
>
>
> On Mon, Apr 30, 2012 at 4:52 PM, Olivier Lamy <olamy@apache.org> wrote:
>
>> 2012/4/30 Jeff MAURY <jeffmaury@jeffmaury.com>:
>> > Salut Olivier,
>> >
>> > I wanted to make sure I understand the goal properly.
>> > Is the rationale for using src/main/webapp as the default docbase for
>> > Tomcat to propagate modifications of files on the fly (JSP,...) withou=
t
>> the
>> > need to restart Tomcat ?
>> Yup that's the goal. Fast dev mode (i.e. no restart) when only
>> modifying jsp or static resources (html, js, css etc...)
>> > At least, I think we should make it clear in the documentation and iss=
ue
>> a
>> > warning at runtime when we detect an overlay.
>> What I can do is to extract the war content (except WEB-INF/lib as
>> it's already added) under the warSourceDirectory plugin parameter
>> (default src/main/webapp) which is the docBase (but with a parameter
>> called extractPath relative to the docBase).
>> The plugin configuration part could be
>> =A0 =A0 =A0 =A0 =A0<overlays>
>> =A0 =A0 =A0 =A0 =A0 =A0<overlay>
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0<groupId>org.foo</groupId>
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0<artifactId>bar</artifactId>
>> =A0 =A0 =A0 =A0 =A0 =A0 =A0<extractPath>bar</extractPath>
>> =A0 =A0 =A0 =A0 =A0 =A0</overlay>
>> =A0 =A0 =A0 =A0 =A0</overlays>
>>
>> What I don't like is people will have to ignore this directory in their =
scm
>>
>> The best: extract somewhere (temporary directory) and add this as "a
>> symlink" in the docBase.
>>
>> > I will open a JIRA
>> >
>> > Jeff
>> >
>> > On Sat, Apr 28, 2012 at 11:38 PM, Olivier Lamy <olamy@apache.org> wrot=
e:
>> >
>> >> Salut Jeff,
>> >>
>> >> Current Overlay support with tomcat6/7:run is very limited (only use
>> >> jars from WEB-INF/lib of the the war dependencies).
>> >> Perso, I use maven-dependency-plugin to extract war content (see
>> >> sample in this pom [1] ).
>> >> I agree it's "hackhish" :-) and having a better support as in the war
>> >> plugin could be better.
>> >> But didn't yet have any time to work on that. (can you create an issu=
e
>> >> for that ?)
>> >> As my goal was to cut a release soon (ideally starting release proces=
s
>> >> next week, I'm not sure I will have time to work on that)
>> >>
>> >> --
>> >> Olivier Lamy
>> >> Talend: http://coders.talend.com
>> >> http://twitter.com/olamy | http://linkedin.com/in/olamy
>> >>
>> >> [1]
>> >>
>> http://svn.apache.org/repos/asf/archiva/trunk/archiva-modules/archiva-we=
b/archiva-webapp/pom.xml
>> >>
>> >> 2012/4/28 Jeff MAURY <jeffmaury@jeffmaury.com>:
>> >> > Hello,
>> >> >
>> >> > I am facing the following problem with WAR overlays:
>> >> > I have a first WAR, called skeleton, that contains all necessary
>> stuff:
>> >> > base web.xml, index.jsp and JAR dependencies.
>> >> > I have another WAR whose first dependency is the skeleton which is
>> (as of
>> >> > yet) almost empty except for the slf4j_log4 dependency.
>> >> > When i run tomcat7:run on the skeleton, everything is ok
>> >> > When I run tomcat7:run on the second war, Tomcat start but I am not
>> able
>> >> to
>> >> > use the application.
>> >> > I have look at the mojo code and it seems it is using the web app
>> source
>> >> > directory (src/main/webapp) by default so as it is empty my case, i=
t
>> >> cannot
>> >> > work.
>> >> > AM I missing something ?
>> >> >
>> >> > Thanks
>> >> > Jeff
>> >> >
>> >> >
>> >> > --
>> >> > Jeff MAURY
>> >> >
>> >> >
>> >> > "Legacy code" often differs from its suggested alternative by actua=
lly
>> >> > working and scaling.
>> >> > =A0- Bjarne Stroustrup
>> >> >
>> >> > http://www.jeffmaury.com
>> >> > http://riadiscuss.jeffmaury.com
>> >> > http://www.twitter.com/jeffmaury
>> >> >
>> >> >
>> >> > --
>> >> > Jeff MAURY
>> >> >
>> >> >
>> >> > "Legacy code" often differs from its suggested alternative by actua=
lly
>> >> > working and scaling.
>> >> > =A0- Bjarne Stroustrup
>> >> >
>> >> > http://www.jeffmaury.com
>> >> > http://riadiscuss.jeffmaury.com
>> >> > http://www.twitter.com/jeffmaury
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>> >> For additional commands, e-mail: users-help@tomcat.apache.org
>> >>
>> >>
>> >
>> >
>> > --
>> > Jeff MAURY
>> >
>> >
>> > "Legacy code" often differs from its suggested alternative by actually
>> > working and scaling.
>> > =A0- Bjarne Stroustrup
>> >
>> > http://www.jeffmaury.com
>> > http://riadiscuss.jeffmaury.com
>> > http://www.twitter.com/jeffmaury
>>
>>
>>
>> --
>> Olivier Lamy
>> Talend: http://coders.talend.com
>> http://twitter.com/olamy | http://linkedin.com/in/olamy
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
>> For additional commands, e-mail: users-help@tomcat.apache.org
>>
>>
>
>
> --
> Jeff MAURY
>
>
> "Legacy code" often differs from its suggested alternative by actually
> working and scaling.
> =A0- Bjarne Stroustrup
>
> http://www.jeffmaury.com
> http://riadiscuss.jeffmaury.com
> http://www.twitter.com/jeffmaury



--=20
Olivier Lamy
Talend: http://coders.talend.com
http://twitter.com/olamy | http://linkedin.com/in/olamy

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233864-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 30 15:43:09 2012
Return-Path: <users-return-233864-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3F63EC53D
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 30 Apr 2012 15:43:09 +0000 (UTC)
Received: (qmail 55392 invoked by uid 500); 30 Apr 2012 15:43:05 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 55318 invoked by uid 500); 30 Apr 2012 15:43:05 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 55309 invoked by uid 99); 30 Apr 2012 15:43:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 15:43:05 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.138.90.75] (HELO nm12.bullet.mail.ne1.yahoo.com) (98.138.90.75)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 30 Apr 2012 15:42:57 +0000
Received: from [98.138.90.57] by nm12.bullet.mail.ne1.yahoo.com with NNFMP; 30 Apr 2012 15:42:36 -0000
Received: from [98.138.89.253] by tm10.bullet.mail.ne1.yahoo.com with NNFMP; 30 Apr 2012 15:42:36 -0000
Received: from [127.0.0.1] by omp1045.mail.ne1.yahoo.com with NNFMP; 30 Apr 2012 15:42:36 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 533909.90301.bm@omp1045.mail.ne1.yahoo.com
Received: (qmail 90698 invoked by uid 60001); 30 Apr 2012 15:42:36 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1335800556; bh=W7s3QViLHdGMivOAuzPnuciRo1yypwdKURCrQrGD8PA=; h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=xzye2s4bpplbIZc80awNWt5z1pMlxmSAXtcX/ZL0ywWBFxIV2y9+aaSS+LbPWsx0xWlE8Iv8yn1UrifzavKrNdyTuIIQlOyVtm/r9pHB6321dhV9U5IDtAjHnWbxmg/U9/0804sdgV//cpZrk1RkkBe6GBkHr/NS5bRBqcbOtb0=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=HZf9GZCgGBd3kqpg0o3YrGpdQUB9FTcP1bXE1vNVzd14jCewMjZA58JUN3qCAAmxDcZBNWm5H1IGa83FkXxy66xQ2NRSlc38n5FIupHs4Rmj+4/iY4WN067jc2bqudVc89jXazT+t3oSYkkqncK2KggLHRfpTFqrtaQK7VyEjQo=;
X-YMail-OSG: 66d8pMYVM1nMoimGyRaBIMSCvy7EvGmjJR_uZrOv6SYdBcy
 REOEpCaOH2x.jqDj1bTtj6.Bk4JnO7E1GoS8DoraxzGWlwS5AtnvvBRYpxLJ
 ACKBgShP68XkOuOE6P13LrAaI2sqyrVR2hYxk35.J0N1etDt.vKKquDui3TP
 g4Ssbqz6pJ.LH2D2dfwJ5KS4nDeCBqV4xDayKl067jjzffQBvpJzpxpL6tLV
 aYB1WH2kIwtZxaYJgJJmGIvqg27tSN_BVc8ONIiAmTTlpi43ZW6Cf7fRd8wy
 OvtsScF4YxvCkRinsetFrFeCxYXKTTUkSpKJmhwHDoGqL5KBnIuzw0VGVEGl
 f225NN8jweiNLx0KWhbui9kQbmu4ydF9Rw7tcrmOhgjwRu6y6uqEMN14j.PW
 6neM6hU1FZhd6Lg6ZaONIb0qWu2KMTZD5lfoDwQcIL7GP3mNHALywl9_e_j3
 WJUGICtATBasd8q4PwirKPUrV4W7jOsBx1MTHNug2yU4W1GFjwuYcpWgfQv6
 z4aIDOMpg12tg1yD5s2TQEA5NNUUPsHo9hyLhi73A6Vd4AZYB8MTSztwecbu
 sOOYGMA--
Received: from [71.134.9.186] by web125501.mail.ne1.yahoo.com via HTTP; Mon, 30 Apr 2012 08:42:36 PDT
X-Mailer: YahooMailWebService/0.8.118.349524
References: <CAMSN5ZYFqZ0aF3fKSatfC3p1mfhiLBEutsJfD0n5vRFx0kZ__w@mail.gmail.com> <4F9E5593.8020805@apache.org> <CAMSN5Za4cnqw1o8vctOAgTyrd-tnYjpsG_ZxEv-f13RhV9K8OA@mail.gmail.com>
Message-ID: <1335800556.85780.YahooMailNeo@web125501.mail.ne1.yahoo.com>
Date: Mon, 30 Apr 2012 08:42:36 -0700 (PDT)
From: Mark Eggers <its_toasted@yahoo.com>
Reply-To: Mark Eggers <its_toasted@yahoo.com>
Subject: Re: SNI (Server Name Indication) supports in Tomcat (7.0.27)
To: Tomcat Users List <users@tomcat.apache.org>
In-Reply-To: <CAMSN5Za4cnqw1o8vctOAgTyrd-tnYjpsG_ZxEv-f13RhV9K8OA@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

----- Original Message -----

> From: Reka Thirunavukkarasu <rthirunavukkarasu23@gmail.com>
> To: Tomcat Users List <users@tomcat.apache.org>
> Cc: 
> Sent: Monday, April 30, 2012 4:19 AM
> Subject: Re: SNI (Server Name Indication) supports in Tomcat (7.0.27)
> 
>T hanks. I could see all the clarifications there.
> 
> Reka
> 
> On Mon, Apr 30, 2012 at 2:34 PM, Mark Thomas <markt@apache.org> wrote:
>>  On 30/04/2012 09:58, Reka Thirunavukkarasu wrote:
>>>  Can you please provide any material
>>>  to got through to support SNI?
>> 
>>  http://tomcat.markmail.org/thread/q6d5czzlgih3r2ys
>> 
>>  Mark


Reka,

Another wrinkle, but I've not tried this with Tomcat . . .

You could look at a SAN cert. I'm currently using a SAN cert in Apache HTTPD with named virtual hosts and SSL. The configuration check complains, but that complaint is apparently a bug since the actual feature is supported.

I don't know what the performance impact would be with many hosts. I also don't know how this would work since you let your users choose virtual host names. The SAN cert would have to be updated for each host name, which might also be an issue for you.

. . . . just my two cents.
/mde/

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233865-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 30 16:47:08 2012
Return-Path: <users-return-233865-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1783992EC
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 30 Apr 2012 16:47:08 +0000 (UTC)
Received: (qmail 27052 invoked by uid 500); 30 Apr 2012 16:47:04 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 26877 invoked by uid 500); 30 Apr 2012 16:47:04 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 26868 invoked by uid 99); 30 Apr 2012 16:47:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 16:47:04 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dgchristensen@comcast.net designates 76.96.27.227 as permitted sender)
Received: from [76.96.27.227] (HELO qmta12.emeryville.ca.mail.comcast.net) (76.96.27.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 16:46:56 +0000
Received: from omta10.emeryville.ca.mail.comcast.net ([76.96.30.28])
	by qmta12.emeryville.ca.mail.comcast.net with comcast
	id 4GDi1j0060cQ2SLACGmaUU; Mon, 30 Apr 2012 16:46:35 +0000
Received: from sz0170.ev.mail.comcast.net ([76.96.27.99])
	by omta10.emeryville.ca.mail.comcast.net with comcast
	id 4GmZ1j00U28HroU8WGmZHY; Mon, 30 Apr 2012 16:46:34 +0000
Date: Mon, 30 Apr 2012 16:46:32 +0000 (UTC)
From: dgchristensen@comcast.net
To: Tomcat Users List <users@tomcat.apache.org>
Message-ID: <1538460097.217788.1335804392954.JavaMail.root@sz0170a.emeryville.ca.mail.comcast.net>
In-Reply-To: <4F9EA451.9090904@christopherschultz.net>
Subject: Re: Running Swing app under Tomcat 6 on Linux
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit
X-Originating-IP: [63.116.56.194]
X-Mailer: Zimbra 6.0.13_GA_2944 (ZimbraWebClient - FF3.0 (Linux)/6.0.13_GA_2944)



----- Original Message -----
> From: "Christopher Schultz" <chris@christopherschultz.net>
> To: "Tomcat Users List" <users@tomcat.apache.org>
> Sent: Monday, April 30, 2012 10:40:17 AM
> Subject: Re: Running Swing app under Tomcat 6 on Linux
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
> 
> DG,
> 
> On 4/28/12 4:11 PM, dgchristensen@comcast.net wrote:
> > I have a small debugging/monitoring app written in Java/Swing that
> >  I'd like to run inside Tomcat to help with debugging.
> 
> You are asking for all kinds of pain, here.
> 
> > The app is started by dynamically loading the monitoring class from
> > a webservice running under Tomcat.
> 
> So, the GUI monitoring app loads classes from a webservice hosted by
> the webapp? Elsewhere in this thread, you said it had to run in the
> same JVM because it directly-accesses some of the objects. Those two
> statements seem to contradict one another.
 
Thanks for the input.  I guess I should give more rationale on why I want to do this.  My webservice(s) use an open source project that acts as a DB engine for retrieving data from the DB (google 'zeidonjoe' if any of you are interested).  The data engine has a browser that lets a developer view all the retrieved data in a structured GUI.  In a way it would be like viewing all your active Hibernate objects, showing data and relationships.  It can be a very powerful tool while debugging.  The browser is dynamically loaded+started by the data engine and it (the browser) has access to the engine's internal objects so that the DB data can be displayed.

The browser is written using Swing, originally on Windows, and the users (who are engineers) like it.  Now I'm trying to get it working on Linux.  A better long-term solution would perhaps be to create a JMX API but that's a lot of changes for something that already works on Windows.  As always, engineering time is short and I'm looking for the quickest solution that doesn't confine me in the future.  I'm open to any alternative ideas if they are relatively quick to implement.

DG

> > The works in Windows (multiple flavors) but I'm having problems
> > getting this running on Ubuntu.
> 
> The presence of the always-running GUI environment in Microsoft
> Windows is the reason stuff like this works there.
> 
> > What I've tried so far:
> >
> > 1) First error I got was an Headless exception. Since the app is a
> >  GUI app I can't run in headless mode. After searching around I
> > changed Tomcat's library path (via -Djava.library.path in
> > catalina.sh) to point to the client lib (ie.
> > .../java-6-sun-1.6.0.26/jre/lib/i386/client)> instead of the
> > server lib.
> 
> You should be able to do this with the "-client" command-line
> parameter. I'm not sure why you would need this at all, except maybe
> - -server in your environment also implies "headless", which can also
> be
> changed using a command-line parameter. You shouldn't have to mess
> with the java.library.path.
> 
> > 2) After changing the libs the next error was that DISPLAY wasn't
> > set. After setting DISPLAY=0.0 in catalina.sh I get "Can't connect
> > to X11 with DISPLAY=0.0" error. I've tried different values for
> > DISPLAY (e.g. localhost:0.0) and nothing makes a difference. I've
> > also tried fiddling around with the policies in case there's a
> > permissions error. See below for the call stack.
> 
> As Mark says, you'll need to set this to your actual DISPLAY. When
> you're logged-in to your laptop, open an xterm and type "echo
> $DISPLAY". Use whatever value that is to attach to your X display.
> 
> If Tomcat is running as a user other than you, then you might also
> have to do an "xhost +" as yourself to allow any client to connect to
> your X server.
> 
> > The webservice app is a simple RESTEasy implementation. Since this
> > works in Windows I'm assuming (perhaps erroneously) that this can
> > work in Linux. Any help would be appreciated.
> 
> I'm sure it *can* work in Linux, but the whole thing sounds insane to
> me.
> 
> - -chris
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
> Comment: GPGTools - http://gpgtools.org
> Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/
> 
> iEYEARECAAYFAk+epFEACgkQ9CaO5/Lv0PD5TQCfaHXWYeFPrDR2H5OMjOyFMHsI
> fjQAniXwykkxw5sMfWlCvI9n0zHYNRT8
> =LHQA
> -----END PGP SIGNATURE-----
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233866-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 30 16:49:24 2012
Return-Path: <users-return-233866-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C109592F9
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 30 Apr 2012 16:49:24 +0000 (UTC)
Received: (qmail 33785 invoked by uid 500); 30 Apr 2012 16:49:21 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 33690 invoked by uid 500); 30 Apr 2012 16:49:21 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 33680 invoked by uid 99); 30 Apr 2012 16:49:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 16:49:21 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of allstaraga@gmail.com designates 74.125.82.43 as permitted sender)
Received: from [74.125.82.43] (HELO mail-wg0-f43.google.com) (74.125.82.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 16:49:15 +0000
Received: by wgbdr1 with SMTP id dr1so2502072wgb.0
        for <users@tomcat.apache.org>; Mon, 30 Apr 2012 09:48:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=KW8raGcqwyKx2gK6UEa6ibih4o4i68jGQG84LBhCmzs=;
        b=fjzSJiN6cGTauahjUFoNK5bPO4Vo6vw1NO79iecWWl6Zul5h2s+dsWYzjJqF+ddm9p
         uouR5euzM68NyBVW8gjjDMLdi425xoE9S3GFXrgwvDBaPpLo1EbMeX7iq/d1InjjOcn+
         uRD1Dpx6c0bfI8YoKNnPKcU2+LfBfWe4uWNwMst1fGUTeU19N/afxec+TGBjAWVW7aX7
         nitFIoDEOpHQ9mcEDHj55vhnh7zdRTj8ihVEYN8rrVXezdjLIhFG/QDJtI8FLmZm/mRu
         1nVgzNW5PC5hN8W17ABB4TqH1YpvNLRiKT2qkVUy825Oyf18BV3jxqHHCGz4UwcKCWDA
         0RHg==
MIME-Version: 1.0
Received: by 10.216.139.204 with SMTP id c54mr13068559wej.103.1335804535046;
 Mon, 30 Apr 2012 09:48:55 -0700 (PDT)
Received: by 10.223.93.194 with HTTP; Mon, 30 Apr 2012 09:48:54 -0700 (PDT)
In-Reply-To: <4F9EA654.6060903@christopherschultz.net>
References: <CADmRKMwbsUZcu9oRyBu+jH+0jDMWuHBFgP=N-NwhNZMeQ_Dmag@mail.gmail.com>
	<4F9EA654.6060903@christopherschultz.net>
Date: Mon, 30 Apr 2012 18:48:54 +0200
Message-ID: <CADmRKMyqyakmDDWCGt7MFwRdO8MJsyZKXosQUBvMFOYRBrYXRw@mail.gmail.com>
Subject: Re: mod_jk recovery when tomcat killed
From: Agnieszka Allstar <allstaraga@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: multipart/alternative; boundary=0016e6d99fa4cd00a804bee83a50

--0016e6d99fa4cd00a804bee83a50
Content-Type: text/plain; charset=ISO-8859-1

2012/4/30 Christopher Schultz <chris@christopherschultz.net>

> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>
> Kate,
>
> On 4/30/12 7:06 AM, Agnieszka Allstar wrote:
> > Here's my test scenario: 1. Web service client sends SOAP request
> > to apache server. This client sends requests in 2 flavors, either
> > it is a generic SOAP call (A case) or a soap request with some
> > files attached with MTOM (B case). Web service is capable of
> > handling both types of requests. 2. Once the processing starts, I
> > kill this tomcat with "kill -9".
> >
> > The results are: A - when tomcat1 is killed, the request is
> > automatically transmitted to tomcat2. Client receives correct
> > results. This is OK. B - when tomcat1 is killed, the request is not
> > transmitted to tomcat2. Client receives 502 error: bad gateway
> > instead.
>
> Are you using POST to send both messages (A case and B case)?
>

Yes, both are POST.

>
> What if you send a very *small* attachment via MTOM? I'm wondering
> what the real difference is, since in both cases you should be sending
> HTTP POST... the only difference should be larger Content-Length.
>

Good idea, gotta check the small attachment version and see what happens.
I've also noticed that requests differ in Content-Type. For simple soap
request is text/xml and the one with attachments is multipart/related;
type="application/xop+xml (...).

>
> I wonder if mod_jk can only failover the current request (with no
> error to the client) if the request is small enough (or only a small
> amount has already been transferred to the failing server).
>

This could be it I'll check this out. I only need to wait few days until
I'm back in office.

>
> > [Fri Apr 27 12:19:08 2012] [1376450:1] [error]
> > service::jk_lb_worker.c (1425): unrecoverable error 502, request
> > failed. Tomcat failed in the middle of reques [Fri Apr 27 12:19:08
> > 2012] [1376450:1] [error] service::jk_lb_worker.c (1485): All
> > tomcat instances failed, no more workers left
>
> This looks like you have killed both tomcat instances and mod_jk can
> contact neither of them. Are you sure you have gotten mod_jk back in
> communication with both servers between "A case" and "B case" runs? If
> you haven't, this isn't really a valid test.
>

I'm pretty sure there was only one tomcat killed but I'll rerun my tests.
As for initial state, after each test I restart both mod_jk (apache) and
tomcat servers and make sure they appear as ok in mod_jk.

>
> (It looks like some of your mod_jk.log lines have been truncated...
> was that simply a copy/paste error?)
>

You're right thanks.

>
> - -chris
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG/MacGPG2 v2.0.17 (Darwin)
> Comment: GPGTools - http://gpgtools.org
> Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/
>
> iEYEARECAAYFAk+eplQACgkQ9CaO5/Lv0PCDWgCdGiF1xBEIUg3tDfj5bV/HjH+m
> ZkYAoIcFbG7EmdyKm0Jha15HrGOzsC88
> =PQqY
> -----END PGP SIGNATURE-----
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
> For additional commands, e-mail: users-help@tomcat.apache.org
>
>

--0016e6d99fa4cd00a804bee83a50--

From users-return-233867-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 30 18:57:08 2012
Return-Path: <users-return-233867-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4AD749D14
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 30 Apr 2012 18:57:08 +0000 (UTC)
Received: (qmail 18226 invoked by uid 500); 30 Apr 2012 18:57:04 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 18145 invoked by uid 500); 30 Apr 2012 18:57:04 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 18135 invoked by uid 99); 30 Apr 2012 18:57:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 18:57:04 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [207.126.144.145] (HELO eu1sys200aog118.obsmtp.com) (207.126.144.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 18:56:56 +0000
Received: from mail-iy0-f169.google.com ([209.85.210.169]) (using TLSv1) by eu1sys200aob118.postini.com ([207.126.147.11]) with SMTP
	ID DSNKT57gYsSq1ZrKIeGwxn3XP3z4I7JnAa40@postini.com; Mon, 30 Apr 2012 18:56:36 UTC
Received: by iajr24 with SMTP id r24so5752982iaj.0
        for <users@tomcat.apache.org>; Mon, 30 Apr 2012 11:56:33 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type
         :x-gm-message-state;
        bh=SIjMPWbEjDwInn+VriarXiBGiDC12HFqn5AcCzDjmaw=;
        b=FFYCDtEwcPAOHa3LO9XugAV+aUtESgsSJKvSH76OpUg+ZNAeVN/IqXLpAJdbf+8MLb
         XsDYs6eTwrkSMBsplQpdCQgSf4wdPA7kgm6J9vOrh2bh8WQEru+XJxBRfKz/jewwbCcv
         z5+bWgAWS1tivFIkf/iTUbpYzH806VoJtPaGdqdgfTxUjMZEOm5yS6pch1BSv21knnCQ
         EzQ/TzVJgcW7XKlB2BEZ+4UbYUK71stNWZJDj5OPqMTtvnRwK2sOkGGRiycToPFslcD5
         nTn9o6nWCzQP0rUdNKLZW48zIx+2agQuJJGwr0IumM2cLeXwMLhN7sg1Nmt5oab50S67
         3XOQ==
MIME-Version: 1.0
Received: by 10.50.161.225 with SMTP id xv1mr11113360igb.35.1335812193275;
 Mon, 30 Apr 2012 11:56:33 -0700 (PDT)
Received: by 10.50.34.163 with HTTP; Mon, 30 Apr 2012 11:56:33 -0700 (PDT)
Date: Mon, 30 Apr 2012 19:56:33 +0100
Message-ID: <CAES7Jg_1OyQjqMVcWUzQS1L0psDjQRKJ2wjB=boi_q-hFNWKtw@mail.gmail.com>
Subject: Exception in thread "http-bio-8080-exec-3" Exception in thread "ContainerBackgroundProcessor[StandardEngine[Catalina]]"
From: "Smith, Mitchell" <mitchell.smith@cwc.com>
To: users@tomcat.apache.org
Content-Type: multipart/alternative; boundary=14dae93412814450e204beea0369
X-Gm-Message-State: ALoCoQmxSbOh7god4gu6UUvlSHipJcl7LfR5Dq4vKG1AhHjcnqrXC8BEstwftTlHTFCZZfoVC0rN
X-Virus-Checked: Checked by ClamAV on apache.org

--14dae93412814450e204beea0369
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I am currently upgrading to use Java 7 and tomcat7.

However when I try to execute a login in my WebApp I get the following
error.

Exception in thread "http-bio-8080-exec-3" Exception in thread
"ContainerBackgroundProcessor[StandardEngine[Catalina]]"

I am using:
Java jdk7 (update4)
Tomcat 7.0.27

My Application is an Icefaces3.0.1 JSF2 application.

Any detail on what this error means would be greatly appreciated.

Thanks

-- 
*Mitchell Smith
*

The information contained in this email (and any attachments) is confidential and may be privileged. If you are not the intended recipient
and have received this email in error, please notify the sender immediately by reply email and delete the message and any attachments.
If you are not the named addressee, you must not copy, disclose, forward or otherwise use the information contained in this email.
Cable & Wireless Communications Plc and its affiliates reserve the right to monitor all email communications through their networks to
ensure regulatory compliance.
 
Cable & Wireless Communications Plc is a company registered in England & Wales with number:
07130199 and offices located at 3rd Floor, 26 Red Lion Square, London WC1R 4HQ

--14dae93412814450e204beea0369--

From users-return-233868-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 30 19:17:56 2012
Return-Path: <users-return-233868-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7B66F9DBD
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 30 Apr 2012 19:17:56 +0000 (UTC)
Received: (qmail 78712 invoked by uid 500); 30 Apr 2012 19:17:53 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 78480 invoked by uid 500); 30 Apr 2012 19:17:53 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 78470 invoked by uid 99); 30 Apr 2012 19:17:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 19:17:53 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [216.82.241.83] (HELO mail37.messagelabs.com) (216.82.241.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 19:17:43 +0000
X-Env-Sender: Chuck.Caldarale@unisys.com
X-Msg-Ref: server-12.tower-37.messagelabs.com!1335813437!20423078!20
X-Originating-IP: [192.61.61.105]
X-StarScan-Version: 6.5.10; banners=-,-,-
X-VirusChecked: Checked
Received: (qmail 5916 invoked from network); 30 Apr 2012 19:17:21 -0000
Received: from naedge.unisys.com (HELO USEA-NAEDGE2.unisys.com) (192.61.61.105)
  by server-12.tower-37.messagelabs.com with RC4-SHA encrypted SMTP; 30 Apr 2012 19:17:21 -0000
Received: from usea-nahubcas1.na.uis.unisys.com (129.224.76.114) by
 USEA-NAEDGE2.unisys.com (192.61.61.105) with Microsoft SMTP Server (TLS) id
 8.3.83.0; Mon, 30 Apr 2012 14:17:13 -0500
Received: from USEA-EXCH8.na.uis.unisys.com ([129.224.76.41]) by
 usea-nahubcas1.na.uis.unisys.com ([129.224.76.114]) with mapi; Mon, 30 Apr
 2012 14:17:13 -0500
From: "Caldarale, Charles R" <Chuck.Caldarale@unisys.com>
To: Tomcat Users List <users@tomcat.apache.org>
Date: Mon, 30 Apr 2012 14:17:12 -0500
Subject: RE: Exception in thread "http-bio-8080-exec-3" Exception in thread
 "ContainerBackgroundProcessor[StandardEngine[Catalina]]"
Thread-Topic: Exception in thread "http-bio-8080-exec-3" Exception in thread
 "ContainerBackgroundProcessor[StandardEngine[Catalina]]"
Thread-Index: Ac0nAxWRFwAeyRLzTxiXhKIjlXeujwAAodxg
Message-ID: <99C8B2929B39C24493377AC7A121E21FB01970AED7@USEA-EXCH8.na.uis.unisys.com>
References: <CAES7Jg_1OyQjqMVcWUzQS1L0psDjQRKJ2wjB=boi_q-hFNWKtw@mail.gmail.com>
In-Reply-To: <CAES7Jg_1OyQjqMVcWUzQS1L0psDjQRKJ2wjB=boi_q-hFNWKtw@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

> From: Smith, Mitchell [mailto:mitchell.smith@cwc.com]=20
> Subject: Exception in thread "http-bio-8080-exec-3" Exception in
> thread "ContainerBackgroundProcessor[StandardEngine[Catalina]]"

> when I try to execute a login in my WebApp I get the following error.

> Exception in thread "http-bio-8080-exec-3" Exception in thread
> "ContainerBackgroundProcessor[StandardEngine[Catalina]]"

Please post the whole stack trace for the exception.  Without it, any respo=
nse would just be speculation.

 - Chuck


THIS COMMUNICATION MAY CONTAIN CONFIDENTIAL AND/OR OTHERWISE PROPRIETARY MA=
TERIAL and is thus for use only by the intended recipient. If you received =
this in error, please contact the sender and delete the e-mail and its atta=
chments from all computers.


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233869-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 30 19:29:20 2012
Return-Path: <users-return-233869-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8D2BDC6D7
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 30 Apr 2012 19:29:20 +0000 (UTC)
Received: (qmail 17232 invoked by uid 500); 30 Apr 2012 19:29:17 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 17038 invoked by uid 500); 30 Apr 2012 19:29:17 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 17028 invoked by uid 99); 30 Apr 2012 19:29:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 19:29:17 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [141.211.12.86] (HELO tombraider.mr.itd.umich.edu) (141.211.12.86)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 19:29:10 +0000
Received: FROM ldevm-shanti.dean.lsa.umich.edu (ldevm-shanti.dean.lsa.umich.edu [141.211.104.14])
	By tombraider.mr.itd.umich.edu ID 4F9EE7EE.988D3.7899 ;
	Authuser shanti;
	30 Apr 2012 15:28:46 EDT
From: Shanti Suresh <shanti@umich.edu>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: Multiple Contexts - one classloader
Date: Mon, 30 Apr 2012 15:28:46 -0400
Message-Id: <20F0D155-26FF-4FCC-AE75-BBC45AAF26F9@umich.edu>
To: Tomcat Users List <users@tomcat.apache.org>
Mime-Version: 1.0 (Apple Message framework v1084)
X-Mailer: Apple Mail (2.1084)
X-Virus-Checked: Checked by ClamAV on apache.org

All,

Is there a way to specify with Tomcat 7, one webapp-base with multiple =
contexts?  If I create several XML files under =
<tomcat-home>/conf/Catalina/localhost/ and point the docbase to =
outside-appbase WAR path I get multiple classloaders.  I would like one =
application instance to serve the different contexts.  Is that possible? =
 An example of three context XML files follows.  But I get three =
classloaders and multiple deployments:

siteA.xml:

<Context docBase=3D"/opt/tomcat/killerApp" path=3D"/siteA" =
crossContext=3D"true"
         clearReferencesHttpClientKeepAliveThread=3D"true"
         clearReferencesStopTimerThreads=3D"true"
         swallowOutput=3D"true" />


siteB.xml:

<Context docBase=3D"/opt/tomcat/killerApp" path=3D"/siteB" =
crossContext=3D"true"
         clearReferencesHttpClientKeepAliveThread=3D"true"
         clearReferencesStopTimerThreads=3D"true"
         swallowOutput=3D"true" />


siteC.xml:

<Context docBase=3D"/opt/tomcat/killerApp" path=3D"/siteC" =
crossContext=3D"true"
         clearReferencesHttpClientKeepAliveThread=3D"true"
         clearReferencesStopTimerThreads=3D"true"
         swallowOutput=3D"true" />

Thanks.

                     -Shanti





---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233870-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 30 19:41:43 2012
Return-Path: <users-return-233870-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 65932C712
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 30 Apr 2012 19:41:43 +0000 (UTC)
Received: (qmail 54761 invoked by uid 500); 30 Apr 2012 19:41:40 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 54691 invoked by uid 500); 30 Apr 2012 19:41:40 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 54682 invoked by uid 99); 30 Apr 2012 19:41:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 19:41:40 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [216.82.249.147] (HELO mail29.messagelabs.com) (216.82.249.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 19:41:29 +0000
X-Env-Sender: Chuck.Caldarale@unisys.com
X-Msg-Ref: server-12.tower-29.messagelabs.com!1335814865!23307758!1
X-Originating-IP: [192.61.61.104]
X-StarScan-Version: 6.5.10; banners=-,-,-
X-VirusChecked: Checked
Received: (qmail 14668 invoked from network); 30 Apr 2012 19:41:06 -0000
Received: from unknown (HELO USEA-NAEDGE1.unisys.com) (192.61.61.104)
  by server-12.tower-29.messagelabs.com with RC4-SHA encrypted SMTP; 30 Apr 2012 19:41:06 -0000
Received: from usea-nahubcas2.na.uis.unisys.com (129.224.76.115) by
 USEA-NAEDGE1.unisys.com (192.61.61.104) with Microsoft SMTP Server (TLS) id
 8.3.83.0; Mon, 30 Apr 2012 14:41:05 -0500
Received: from USEA-EXCH8.na.uis.unisys.com ([129.224.76.41]) by
 usea-nahubcas2.na.uis.unisys.com ([129.224.76.115]) with mapi; Mon, 30 Apr
 2012 14:41:05 -0500
From: "Caldarale, Charles R" <Chuck.Caldarale@unisys.com>
To: Tomcat Users List <users@tomcat.apache.org>
Date: Mon, 30 Apr 2012 14:41:05 -0500
Subject: RE: Multiple Contexts - one classloader
Thread-Topic: Multiple Contexts - one classloader
Thread-Index: Ac0nB40ImgWwMn7gQRy0kZGpLuKL+QAAQ3ZA
Message-ID: <99C8B2929B39C24493377AC7A121E21FB01970AF67@USEA-EXCH8.na.uis.unisys.com>
References: <20F0D155-26FF-4FCC-AE75-BBC45AAF26F9@umich.edu>
In-Reply-To: <20F0D155-26FF-4FCC-AE75-BBC45AAF26F9@umich.edu>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

> From: Shanti Suresh [mailto:shanti@umich.edu]=20
> Subject: Multiple Contexts - one classloader

> I would like one application instance to serve the different contexts.

Please read the servlet spec; one application =3D=3D one context.  You can =
play games with forwarding if you want, or simply install just one webapp a=
s ROOT (case sensitive) and remove the three site* <Context> elements.

> I get three classloaders and multiple deployments:

As you should.  Each webapp is independent of the others, by definition.

Also, take out the path attributes in the three <Context> elements; that at=
tribute is not allowed here.

 - Chuck


THIS COMMUNICATION MAY CONTAIN CONFIDENTIAL AND/OR OTHERWISE PROPRIETARY MA=
TERIAL and is thus for use only by the intended recipient. If you received =
this in error, please contact the sender and delete the e-mail and its atta=
chments from all computers.


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233871-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 30 19:47:31 2012
Return-Path: <users-return-233871-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D028CC811
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 30 Apr 2012 19:47:31 +0000 (UTC)
Received: (qmail 76483 invoked by uid 500); 30 Apr 2012 19:47:28 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 76308 invoked by uid 500); 30 Apr 2012 19:47:28 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 76297 invoked by uid 99); 30 Apr 2012 19:47:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 19:47:28 +0000
X-ASF-Spam-Status: No, hits=0.9 required=5.0
	tests=HK_RANDOM_ENVFROM,HK_RANDOM_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lbrtchx@gmail.com designates 209.85.214.173 as permitted sender)
Received: from [209.85.214.173] (HELO mail-ob0-f173.google.com) (209.85.214.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 19:47:22 +0000
Received: by obbwd20 with SMTP id wd20so3236154obb.18
        for <users@tomcat.apache.org>; Mon, 30 Apr 2012 12:47:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=ULSs2dsYT2JimFZZAwsiFvSZN1E+ZpDwRpq5LBD6TZ4=;
        b=GOdAqTJRENACvnjotjNlZooMDIYnwnOL0VLAYkhvdzjzZZws+EQymjVVBilfVkjv8x
         EJOlPDnfmXrd1ZXH2t1MxmWvDuuZ32hfgY4tu0oA7ScD5FZHpK5s1g7kbAjUtMoxXwsR
         monPAHLlJeQfqUDJ3lfOVRlD6TqnjSRv+whCTNV3XhJEX8GMzS/iQOKoTBj39yeUrILA
         DXb674ro7O1Hd3ajnNex07fDbPk/jqfvqHq+XFNwru6GjKki4bKgvznsZxDGVUIz7zxl
         Dpy/+l5mkhKm5jO1zi7H6ipNwf1KR+T1kaBK7DzPGDBw93A4/SRxJeWSuBhsiJ8Dv/Js
         ewBA==
MIME-Version: 1.0
Received: by 10.182.46.100 with SMTP id u4mr6468226obm.46.1335815221217; Mon,
 30 Apr 2012 12:47:01 -0700 (PDT)
Received: by 10.182.70.167 with HTTP; Mon, 30 Apr 2012 12:47:01 -0700 (PDT)
Date: Mon, 30 Apr 2012 19:47:01 +0000
Message-ID: <CAFakBwjVkV5cL20wWuLSM13e8keJRHetz9H4Z2EdY+eRe7PaXQ@mail.gmail.com>
Subject: tomcat deps on ant which deps on junit ... BUILD FAILED
From: Albretch Mueller <lbrtchx@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1

~
 While trying to install tomcat-7.0.27 it tells me install ant, which
tells me to install junit and then you get:
~
 Has anyone dealt with those issues?
~
 lbrtchx
~
$ git clone https://github.com/KentBeck/junit.git >
"/media/sdb1/prjx/sw/jwebXBL/java_baseline/srcs/junit/REF/junit.git_"$_DT".inst_build.log"
2>&1
$ cd junit
$ ant -verbose dist

BUILD FAILED
/media/sdb1/prjx/sw/jwebXBL/java_baseline/srcs/junit/junit/build.xml:191:
The following error occurred while executing this line:
/media/sdb1/prjx/sw/jwebXBL/java_baseline/srcs/junit/junit/build.xml:179:
Java returned: 1
	at org.apache.tools.ant.taskdefs.Java.execute(Java.java:111)
	at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
	at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:601)
	at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
	at org.apache.tools.ant.Task.perform(Task.java:348)
	at org.apache.tools.ant.taskdefs.Sequential.execute(Sequential.java:68)
	at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
	at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:601)
	at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
	at org.apache.tools.ant.Task.perform(Task.java:348)
	at org.apache.tools.ant.taskdefs.MacroInstance.execute(MacroInstance.java:398)
	at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
	at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:601)
	at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
	at org.apache.tools.ant.Task.perform(Task.java:348)
	at org.apache.tools.ant.Target.execute(Target.java:390)
	at org.apache.tools.ant.Target.performTasks(Target.java:411)
	at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
	at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
	at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
	at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
	at org.apache.tools.ant.Main.runBuild(Main.java:809)
	at org.apache.tools.ant.Main.startAnt(Main.java:217)
	at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
	at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)

Total time: 25 seconds

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233872-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 30 19:53:51 2012
Return-Path: <users-return-233872-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 01B78C855
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 30 Apr 2012 19:53:51 +0000 (UTC)
Received: (qmail 99764 invoked by uid 500); 30 Apr 2012 19:53:47 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 99699 invoked by uid 500); 30 Apr 2012 19:53:47 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 98544 invoked by uid 99); 30 Apr 2012 19:53:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 19:53:46 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [216.82.254.195] (HELO mail200.messagelabs.com) (216.82.254.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 19:53:37 +0000
X-Env-Sender: Chuck.Caldarale@unisys.com
X-Msg-Ref: server-7.tower-200.messagelabs.com!1335815589!11039985!2
X-Originating-IP: [192.61.61.104]
X-StarScan-Version: 6.5.5; banners=-,-,-
X-VirusChecked: Checked
Received: (qmail 25655 invoked from network); 30 Apr 2012 19:53:15 -0000
Received: from unknown (HELO USEA-NAEDGE1.unisys.com) (192.61.61.104)
  by server-7.tower-200.messagelabs.com with RC4-SHA encrypted SMTP; 30 Apr 2012 19:53:15 -0000
Received: from usea-nahubcas1.na.uis.unisys.com (129.224.76.114) by
 USEA-NAEDGE1.unisys.com (192.61.61.104) with Microsoft SMTP Server (TLS) id
 8.3.83.0; Mon, 30 Apr 2012 14:53:09 -0500
Received: from USEA-EXCH8.na.uis.unisys.com ([129.224.76.41]) by
 usea-nahubcas1.na.uis.unisys.com ([129.224.76.114]) with mapi; Mon, 30 Apr
 2012 14:53:08 -0500
From: "Caldarale, Charles R" <Chuck.Caldarale@unisys.com>
To: Tomcat Users List <users@tomcat.apache.org>
Date: Mon, 30 Apr 2012 14:53:08 -0500
Subject: RE: tomcat deps on ant which deps on junit ... BUILD FAILED
Thread-Topic: tomcat deps on ant which deps on junit ... BUILD FAILED
Thread-Index: Ac0nChWzWBHsdGDOR2eJCE2SPLv/gAAAIlwA
Message-ID: <99C8B2929B39C24493377AC7A121E21FB01970AFBF@USEA-EXCH8.na.uis.unisys.com>
References: <CAFakBwjVkV5cL20wWuLSM13e8keJRHetz9H4Z2EdY+eRe7PaXQ@mail.gmail.com>
In-Reply-To: <CAFakBwjVkV5cL20wWuLSM13e8keJRHetz9H4Z2EdY+eRe7PaXQ@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

> From: Albretch Mueller [mailto:lbrtchx@gmail.com]=20
> Subject: tomcat deps on ant which deps on junit ... BUILD FAILED

> While trying to install tomcat-7.0.27 it tells me install ant

Exactly what Tomcat distribution (and from where) are you trying to install=
?  Since Tomcat is pure Java, just download, unzip or untar, and run it - a=
ssuming you're using a real Tomcat from tomcat.apache.org.

 - Chuck


THIS COMMUNICATION MAY CONTAIN CONFIDENTIAL AND/OR OTHERWISE PROPRIETARY MA=
TERIAL and is thus for use only by the intended recipient. If you received =
this in error, please contact the sender and delete the e-mail and its atta=
chments from all computers.


---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


From users-return-233873-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 30 22:16:30 2012
Return-Path: <users-return-233873-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D822FC492
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 30 Apr 2012 22:16:29 +0000 (UTC)
Received: (qmail 67774 invoked by uid 500); 30 Apr 2012 22:16:26 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 67695 invoked by uid 500); 30 Apr 2012 22:16:26 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 67686 invoked by uid 99); 30 Apr 2012 22:16:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 22:16:26 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of unmarshall@gmail.com designates 209.85.214.173 as permitted sender)
Received: from [209.85.214.173] (HELO mail-ob0-f173.google.com) (209.85.214.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 22:16:20 +0000
Received: by obbwd20 with SMTP id wd20so3416717obb.18
        for <users@tomcat.apache.org>; Mon, 30 Apr 2012 15:16:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=OYssMHTc5TI1tboZ+NQIYhcTfjbzXdjD+4SrszgAPfI=;
        b=gEiXVwYLUODe164/FYRN0f7k2+CDrQXYiWaOkis49nf+nHz7CloVEEA8jcWGUprRiz
         4JEkyvN0xse+LVJGx8L7N0Z59IZwfSJmOY8X/V5kiK6douPUyUcu6L/zFwR+EMgNppl4
         pk5XmY14vaW/I0OmdvIwKP/WNr051oEt9zb2TCycNVD9DX92wmTb6U5u8NRTWN4ebNTM
         OUVl86vkEHAmO67OSEyG4+XmIxdUT8CR6P9rRAXT/g5tejenIEl+4DD5/mG0gfqRkbl5
         HMiNRUnoUEYSPJLJpyHAnCbVSxsm04kwyxrwTFU3Y7t1Hxm/bsivFhqo38D5MeSI+mdL
         ZZnQ==
MIME-Version: 1.0
Received: by 10.182.179.68 with SMTP id de4mr3468038obc.13.1335824160268; Mon,
 30 Apr 2012 15:16:00 -0700 (PDT)
Received: by 10.182.44.201 with HTTP; Mon, 30 Apr 2012 15:16:00 -0700 (PDT)
Date: Tue, 1 May 2012 03:46:00 +0530
Message-ID: <CAA1zootRBv6DukTbgMvcwmNDcTEUV=EgC27s9vyfjH3_M9NhZg@mail.gmail.com>
Subject: Signing and Encrypting messages using Apache tribes
From: Madhav Bhargava <unmarshall@gmail.com>
To: users@tomcat.apache.org
Content-Type: multipart/alternative; boundary=e89a8f6433a08e231304beeccce6
X-Virus-Checked: Checked by ClamAV on apache.org

--e89a8f6433a08e231304beeccce6
Content-Type: text/plain; charset=UTF-8

Hi All,

We use apache tribes for inter node communication via multicast. For
securing inter node communication two things are required:

1. Establishing the identity of a node as valid who is sending the message
2. Encrypting selective messages which are sensitive in nature.

This topic was raised some time back (
http://tomcat.10.n6.nabble.com/Securing-Tomcat-cluster-communication-td1973779.html
 )

It is recommended that encryption/decryption of messages be done using a
custom interceptor or using a stunnel, the former approach being the
preferred approach. It has also being mentioned that the option
SEND_OPTIONS_SECURE has not been implemented. This was in 2011, how its
2012 - Has this been implemented now?

What do you suggest is the best way using tribes to sign messages - via
another interceptor or by just using the secret keyword as per
http://tomcat.apache.org/connectors-doc/reference/workers.html

best regards,
madhav



-- 
When I tell the truth, it is not for the sake of convincing those who do
not know it, but for the sake of defending those that do

--e89a8f6433a08e231304beeccce6--

From users-return-233874-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org  Mon Apr 30 23:07:48 2012
Return-Path: <users-return-233874-apmail-tomcat-users-archive=tomcat.apache.org@tomcat.apache.org>
X-Original-To: apmail-tomcat-users-archive@www.apache.org
Delivered-To: apmail-tomcat-users-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D79919206
	for <apmail-tomcat-users-archive@www.apache.org>; Mon, 30 Apr 2012 23:07:47 +0000 (UTC)
Received: (qmail 80345 invoked by uid 500); 30 Apr 2012 23:07:44 -0000
Delivered-To: apmail-tomcat-users-archive@tomcat.apache.org
Received: (qmail 80146 invoked by uid 500); 30 Apr 2012 23:07:44 -0000
Mailing-List: contact users-help@tomcat.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:users-help@tomcat.apache.org>
List-Unsubscribe: <mailto:users-unsubscribe@tomcat.apache.org>
List-Post: <mailto:users@tomcat.apache.org>
List-Id: <users.tomcat.apache.org>
Reply-To: "Tomcat Users List" <users@tomcat.apache.org>
Delivered-To: mailing list users@tomcat.apache.org
Received: (qmail 80136 invoked by uid 99); 30 Apr 2012 23:07:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 23:07:44 +0000
X-ASF-Spam-Status: No, hits=0.9 required=5.0
	tests=HK_RANDOM_ENVFROM,HK_RANDOM_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lbrtchx@gmail.com designates 209.85.214.173 as permitted sender)
Received: from [209.85.214.173] (HELO mail-ob0-f173.google.com) (209.85.214.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 Apr 2012 23:07:38 +0000
Received: by obbwd20 with SMTP id wd20so3481742obb.18
        for <users@tomcat.apache.org>; Mon, 30 Apr 2012 16:07:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=XnifOo9x2bD1seI+EiHg8nas+T1EJd8Hk28RYn8LUxo=;
        b=tGN6T2wBuIqp3eNz/UVZZMMYYYu2H9HQXKiO7khFTJlHVLaAwlz+guOHnm1Hx3Nvky
         jeqIcuKNJkT2/cJ9KSclxwDTKOtGX3FlaPRDga4wdwTf/Tm3MDghY++c6ZZ9yUPG1zOc
         wealgusj1Ff40Wamg+qATg8JiCGhA+p5BWJ+H4/uAQ+A3NiRSifHX6/Abg2lUAj1fLd+
         XsPhxIopRQxw9GwVdfFlISsb6czW0TLbJTqojr6TO+6ir3WUbZ47Ytvd3cApiqwikd84
         Gh6Wk6bkREPjSxSqyzJv3I4I+ubHOtE9f2BHxdXpLeF/JLwco80W/9m9j4gePf571jJP
         jo7A==
MIME-Version: 1.0
Received: by 10.60.20.3 with SMTP id j3mr2214923oee.43.1335827237067; Mon, 30
 Apr 2012 16:07:17 -0700 (PDT)
Received: by 10.182.70.167 with HTTP; Mon, 30 Apr 2012 16:07:17 -0700 (PDT)
In-Reply-To: <99C8B2929B39C24493377AC7A121E21FB01970AFBF@USEA-EXCH8.na.uis.unisys.com>
References: <CAFakBwjVkV5cL20wWuLSM13e8keJRHetz9H4Z2EdY+eRe7PaXQ@mail.gmail.com>
	<99C8B2929B39C24493377AC7A121E21FB01970AFBF@USEA-EXCH8.na.uis.unisys.com>
Date: Mon, 30 Apr 2012 23:07:17 +0000
Message-ID: <CAFakBwhDaO3mzWUWSOo0Wix5kw4F=6j64ekMSFT8U2a3tfN9Kw@mail.gmail.com>
Subject: Re: tomcat deps on ant which deps on junit ... BUILD FAILED
From: Albretch Mueller <lbrtchx@gmail.com>
To: Tomcat Users List <users@tomcat.apache.org>
Content-Type: text/plain; charset=ISO-8859-1

> Exactly what Tomcat distribution (and from where) are you trying to install?
~
 Well, I got the source code from:
~
 http://apache.claz.org/tomcat/tomcat-7/v7.0.27/src/apache-tomcat-7.0.27-src.tar.gz
~
 and followed the build instructions
~
 lbrtchx

---------------------------------------------------------------------
To unsubscribe, e-mail: users-unsubscribe@tomcat.apache.org
For additional commands, e-mail: users-help@tomcat.apache.org


